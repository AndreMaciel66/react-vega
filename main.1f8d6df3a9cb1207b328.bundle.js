(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{152:function(module){module.exports={table:[{category:"A",amount:28},{category:"B",amount:55},{category:"C",amount:43},{category:"D",amount:91},{category:"E",amount:81},{category:"F",amount:53},{category:"G",amount:19},{category:"H",amount:87}]}},153:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(31),__webpack_require__(22),__webpack_require__(6),__webpack_require__(86),__webpack_require__(87),__webpack_require__(310);var react=__webpack_require__(1),react_default=__webpack_require__.n(react),data1=__webpack_require__(152),spec1={$schema:"https://vega.github.io/schema/vega/v3.0.json",width:400,height:200,padding:{left:5,right:5,top:5,bottom:5},data:[{name:"table",values:[{category:"A",amount:28},{category:"B",amount:55},{category:"C",amount:43},{category:"D",amount:91},{category:"E",amount:81},{category:"F",amount:53},{category:"G",amount:19},{category:"H",amount:87}]}],signals:[{name:"tooltip",value:{},on:[{events:"rect:mouseover",update:"datum"},{events:"rect:mouseout",update:"{}"}]}],scales:[{name:"xscale",type:"band",domain:{data:"table",field:"category"},range:"width"},{name:"yscale",domain:{data:"table",field:"amount"},nice:!0,range:"height"}],axes:[{orient:"bottom",scale:"xscale"},{orient:"left",scale:"yscale"}],marks:[{type:"rect",from:{data:"table"},encode:{enter:{x:{scale:"xscale",field:"category",offset:1},width:{scale:"xscale",band:1,offset:-1},y:{scale:"yscale",field:"amount"},y2:{scale:"yscale",value:0}},update:{fill:{value:"steelblue"}},hover:{fill:{value:"red"}}}},{type:"text",encode:{enter:{align:{value:"center"},baseline:{value:"bottom"},fill:{value:"#333"}},update:{x:{scale:"xscale",signal:"tooltip.category",band:.5},y:{scale:"yscale",signal:"tooltip.amount",offset:-2},text:{signal:"tooltip.amount"},fillOpacity:[{test:"datum === tooltip",value:0},{value:1}]}}}]},spec2={$schema:"https://vega.github.io/schema/vega/v3.0.json",width:400,height:200,padding:{left:5,right:5,top:5,bottom:5},data:[{name:"table",values:[{category:"A",amount:28},{category:"B",amount:55},{category:"C",amount:43},{category:"D",amount:91},{category:"E",amount:81},{category:"F",amount:53},{category:"G",amount:19},{category:"H",amount:87}]}],signals:[{name:"tooltip",value:{},on:[{events:"rect:mouseover",update:"datum"},{events:"rect:mouseout",update:"{}"}]}],scales:[{name:"xscale",type:"band",domain:{data:"table",field:"category"},range:"width"},{name:"yscale",domain:{data:"table",field:"amount"},nice:!0,range:"height"}],axes:[{orient:"bottom",scale:"xscale"},{orient:"left",scale:"yscale"}],marks:[{type:"rect",from:{data:"table"},encode:{enter:{x:{scale:"xscale",field:"category",offset:10},width:{scale:"xscale",band:.5,offset:-1},y:{scale:"yscale",field:"amount"},y2:{scale:"yscale",value:0}},update:{fill:{value:"green"}},hover:{fill:{value:"yellow"}}}},{type:"text",encode:{enter:{align:{value:"center"},baseline:{value:"bottom"},fill:{value:"#333"}},update:{x:{scale:"xscale",signal:"tooltip.category",band:.5},y:{scale:"yscale",signal:"tooltip.amount",offset:-2},text:{signal:"tooltip.amount"},fillOpacity:[{test:"datum === tooltip",value:0},{value:1}]}}}]},vega=(__webpack_require__(47),__webpack_require__(62),__webpack_require__(34),__webpack_require__(65)),prop_types=__webpack_require__(5),prop_types_default=__webpack_require__.n(prop_types);__webpack_require__(26);function isDefined(x){return null!=x}function isFunction(functionToCheck){return!!functionToCheck&&"[object Function]"==={}.toString.call(functionToCheck)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var Vega_propTypes={background:prop_types_default.a.string,className:prop_types_default.a.string,data:prop_types_default.a.object,enableHover:prop_types_default.a.bool,height:prop_types_default.a.number,logLevel:prop_types_default.a.number,onNewView:prop_types_default.a.func,onParseError:prop_types_default.a.func,padding:prop_types_default.a.object,renderer:prop_types_default.a.string,spec:prop_types_default.a.object.isRequired,style:prop_types_default.a.object,tooltip:prop_types_default.a.func,width:prop_types_default.a.number},Vega_Vega=function(_React$Component){function Vega(){return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Vega),_possibleConstructorReturn(this,_getPrototypeOf(Vega).apply(this,arguments))}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Vega,react_default.a.Component),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Vega,[{key:"componentDidMount",value:function componentDidMount(){var spec=this.props.spec;this.createView(spec)}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var _this=this,spec=this.props.spec;if(spec!==prevProps.spec)this.clearView(),this.createView(spec);else if(this.view){var props=this.props,changed=!1;["width","height","renderer","logLevel","background"].filter(function(field){return props[field]!==prevProps[field]}).forEach(function(field){_this.view[field](props[field]),changed=!0}),Vega.isSamePadding(props.padding,prevProps.padding)||(this.view.padding(props.padding||spec.padding),changed=!0),spec.data&&props.data&&spec.data.forEach(function(d){var oldData=prevProps.data[d.name],newData=props.data[d.name];Vega.isSameData(oldData,newData)||(_this.updateData(d.name,newData),changed=!0)}),props.enableHover!==prevProps.enableHover&&(changed=!0),changed&&(props.enableHover&&this.view.hover(),this.view.run())}}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.clearView()}},{key:"createView",value:function createView(spec){var _this2=this;if(spec){var props=this.props;try{var runtime=vega.c(spec),view=new vega.a(runtime).initialize(this.element);spec.signals&&spec.signals.forEach(function(signal){view.addSignalListener(signal.name,function(){var listener=props[Vega.listenerName(signal.name)];if(listener){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];listener.apply(_this2,args)}})}),this.view=view,["logLevel","renderer","tooltip","background","width","height","padding"].filter(function(field){return isDefined(props[field])}).forEach(function(field){view[field](props[field])}),spec.data&&props.data&&spec.data.filter(function(d){return props.data[d.name]}).forEach(function(d){_this2.updateData(d.name,props.data[d.name])}),props.enableHover&&view.hover(),view.run(),props.onNewView(view)}catch(ex){this.clearView(),props.onParseError(ex)}}else this.clearView();return this}},{key:"updateData",value:function updateData(name,value){value&&(isFunction(value)?value(this.view.data(name)):this.view.change(name,vega.b().remove(function(){return!0}).insert(value)))}},{key:"clearView",value:function clearView(){return this.view&&(this.view.finalize(),this.view=null),this}},{key:"render",value:function render(){var _this3=this,_this$props=this.props,className=_this$props.className,style=_this$props.style;return react_default.a.createElement("div",{ref:function ref(c){_this3.element=c},className:className,style:style})}}],[{key:"isSamePadding",value:function isSamePadding(a,b){return isDefined(a)&&isDefined(b)?a.top===b.top&&a.left===b.left&&a.right===b.right&&a.bottom===b.bottom:a===b}},{key:"isSameData",value:function isSameData(a,b){return a===b&&!isFunction(a)}},{key:"isSameSpec",value:function isSameSpec(a,b){return a===b||JSON.stringify(a)===JSON.stringify(b)}},{key:"listenerName",value:function listenerName(signalName){return"onSignal".concat(function capitalize(str){return str.charAt(0).toUpperCase()+str.slice(1)}(signalName))}}]),Vega}();Vega_Vega.displayName="Vega",Vega_Vega.propTypes=Vega_propTypes,Vega_Vega.defaultProps={background:void 0,className:"",data:{},enableHover:!0,height:void 0,logLevel:void 0,onNewView:function onNewView(){},onParseError:function onParseError(){},padding:void 0,renderer:"svg",style:void 0,tooltip:function tooltip(){},width:void 0};var src_Vega=Vega_Vega;Vega_Vega.__docgenInfo={description:"",methods:[{name:"isSamePadding",docblock:null,modifiers:["static"],params:[{name:"a",type:null},{name:"b",type:null}],returns:null},{name:"isSameData",docblock:null,modifiers:["static"],params:[{name:"a",type:null},{name:"b",type:null}],returns:null},{name:"isSameSpec",docblock:null,modifiers:["static"],params:[{name:"a",type:null},{name:"b",type:null}],returns:null},{name:"listenerName",docblock:null,modifiers:["static"],params:[{name:"signalName",type:null}],returns:null},{name:"createView",docblock:null,modifiers:[],params:[{name:"spec",type:null}],returns:null},{name:"updateData",docblock:null,modifiers:[],params:[{name:"name",type:null},{name:"value",type:null}],returns:null},{name:"clearView",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Vega",props:{background:{defaultValue:{value:"undefined",computed:!0},type:{name:"string"},required:!1,description:""},className:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},data:{defaultValue:{value:"{}",computed:!1},type:{name:"object"},required:!1,description:""},enableHover:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},height:{defaultValue:{value:"undefined",computed:!0},type:{name:"number"},required:!1,description:""},logLevel:{defaultValue:{value:"undefined",computed:!0},type:{name:"number"},required:!1,description:""},onNewView:{defaultValue:{value:"function() {}",computed:!1},type:{name:"func"},required:!1,description:""},onParseError:{defaultValue:{value:"function() {}",computed:!1},type:{name:"func"},required:!1,description:""},padding:{defaultValue:{value:"undefined",computed:!0},type:{name:"object"},required:!1,description:""},renderer:{defaultValue:{value:"'svg'",computed:!1},type:{name:"string"},required:!1,description:""},style:{defaultValue:{value:"undefined",computed:!0},type:{name:"object"},required:!1,description:""},tooltip:{defaultValue:{value:"() => {}",computed:!1},type:{name:"func"},required:!1,description:""},width:{defaultValue:{value:"undefined",computed:!0},type:{name:"number"},required:!1,description:""},spec:{type:{name:"object"},required:!0,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Vega.jsx"]={name:"Vega",docgenInfo:Vega_Vega.__docgenInfo,path:"src/Vega.jsx"});__webpack_require__(57),__webpack_require__(32),__webpack_require__(33),__webpack_require__(83);function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var src=src_Vega,src_createClassFromSpec=function createClassFromSpec(){function Chart(props){return react_default.a.createElement(src_Vega,_extends({spec:spec},props))}var spec=1===arguments.length?0>=arguments.length?void 0:arguments[0]:1>=arguments.length?void 0:arguments[1],propTypes=function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null==arguments[i]?{}:arguments[i],ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}({},src_Vega.propTypes);return delete propTypes.spec,spec.signals&&spec.signals.forEach(function(signal){propTypes[src_Vega.listenerName(signal.name)]=prop_types_default.a.func}),Chart.getSpec=function(){return spec},Chart.propTypes=propTypes,Chart};__webpack_require__(319);function Demo_typeof(obj){return(Demo_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Demo_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function Demo_getPrototypeOf(o){return(Demo_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function Demo_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Demo_setPrototypeOf(o,p){return(Demo_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__.d(__webpack_exports__,"a",function(){return Demo_Demo});var BarChart=src_createClassFromSpec(spec1),_ref=react_default.a.createElement("iframe",{title:"star",src:"https://ghbtns.com/github-btn.html?user=vega&repo=react-vega&type=star&count=true",frameBorder:"0",scrolling:"0",width:"100px",height:"20px"}),_ref2=react_default.a.createElement("h3",null,react_default.a.createElement("code",null,"<Vega>")," React Component"),_ref3=react_default.a.createElement("pre",null,"<Vega data={this.state.data} spec={this.state.spec} onSignalHover={this.handleHover} />"),_ref4=react_default.a.createElement("h3",null,react_default.a.createElement("code",null,"ReactVega.createClassFromSpec()")),_ref5=react_default.a.createElement("pre",null,"const BarChart = ReactVega.createClassFromSpec(barSpec);\n<BarChart data={this.state.data} onSignalHover={this.handleHover} />"),Demo_Demo=function(_React$Component){function Demo(props){var _this;return function Demo_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Demo),(_this=function Demo_possibleConstructorReturn(self,call){return!call||"object"!==Demo_typeof(call)&&"function"!=typeof call?Demo_assertThisInitialized(self):call}(this,Demo_getPrototypeOf(Demo).call(this,props))).state={data:data1,info:"",spec:spec1},_this.handleHover=_this.handleHover.bind(Demo_assertThisInitialized(_this)),_this.toggleSpec=_this.handleToggleSpec.bind(Demo_assertThisInitialized(_this)),_this.updateData=_this.handleUpdateData.bind(Demo_assertThisInitialized(_this)),_this}return function Demo_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Demo_setPrototypeOf(subClass,superClass)}(Demo,react_default.a.Component),function Demo_createClass(Constructor,protoProps,staticProps){return protoProps&&Demo_defineProperties(Constructor.prototype,protoProps),staticProps&&Demo_defineProperties(Constructor,staticProps),Constructor}(Demo,[{key:"handleHover",value:function handleHover(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];this.setState({info:JSON.stringify(args)})}},{key:"handleToggleSpec",value:function handleToggleSpec(){this.state.spec===spec1?this.setState({spec:spec2}):this.setState({spec:spec1})}},{key:"handleUpdateData",value:function handleUpdateData(){for(var table=[],i=1;20>=i;i+=1)table.push({amount:Math.round(100*Math.random()),category:String.fromCharCode(65+i)});this.setState({data:{table:table}})}},{key:"render",value:function render(){var _this$state=this.state,data=_this$state.data,spec=_this$state.spec,info=_this$state.info;return react_default.a.createElement("div",null,react_default.a.createElement("div",{style:{float:"right"}},_ref),react_default.a.createElement("button",{type:"button",onClick:this.handleToggleSpec},"Toggle Spec"),react_default.a.createElement("button",{type:"button",onClick:this.handleUpdateData},"Update data"),_ref2,"Will recompile when spec changes and update when data changes.",_ref3,react_default.a.createElement(src,{data:data,spec:spec,onSignalTooltip:this.handleHover}),_ref4,"Use the given spec to create a reusable component.",_ref5,react_default.a.createElement(BarChart,{data:data,onSignalTooltip:this.handleHover}),info)}}]),Demo}();Demo_Demo.displayName="Demo",Demo_Demo.__docgenInfo={description:"",methods:[{name:"handleHover",docblock:null,modifiers:[],params:[{name:"...args",type:null}],returns:null},{name:"handleToggleSpec",docblock:null,modifiers:[],params:[],returns:null},{name:"handleUpdateData",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Demo"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/Demo.jsx"]={name:"Demo",docgenInfo:Demo_Demo.__docgenInfo,path:"stories/Demo.jsx"})},154:function(module,exports,__webpack_require__){__webpack_require__(155),__webpack_require__(233),module.exports=__webpack_require__(234)},234:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__(32),__webpack_require__(33),__webpack_require__(26),__webpack_require__(34);var _storybook_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(63),req=__webpack_require__(308);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_4__.configure)(function loadStories(){req.keys().forEach(function(filename){return req(filename)})},module)}.call(this,__webpack_require__(114)(module))},308:function(module,exports,__webpack_require__){var map={"./index.stories.js":309};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=308},309:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_storybook_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(63),_Demo__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(153),_ref=react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Demo__WEBPACK_IMPORTED_MODULE_2__.a,null);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("react-vega",module).add("Demo",function(){return _ref})}.call(this,__webpack_require__(114)(module))},319:function(module,exports,__webpack_require__){var content=__webpack_require__(320);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(322)(content,options);content.locals&&(module.exports=content.locals)},320:function(module,exports,__webpack_require__){(module.exports=__webpack_require__(321)(!1)).push([module.i,"body{\n  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  text-align: center;\n}\n\nh1, h2, h3{\n  font-weight: 300;\n}\n\nh2{\n  color: #777;\n}\n\na, a:link, a:visited{\n  color: #5d7da7;\n  text-decoration: none;\n}\n\na:hover{\n  color: #232d5f;\n  text-decoration: underline;\n}\n\n#app{\n  margin-top: 10px;\n}\n\nfooter{\n  color: #aaa;\n  font-size: 12px;\n  font-weight: 300;\n  padding: 20px;\n  padding-top: 40px;\n}",""])}},[[154,1,2]]]);
//# sourceMappingURL=main.1f8d6df3a9cb1207b328.bundle.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(module,__webpack_exports__,__webpack_require__){"use strict";var accessor=function(fn,fields,name){return fn.fields=fields||[],fn.fname=name,fn};function accessorName(fn){return null==fn?null:fn.fname}function accessorFields(fn){return null==fn?null:fn.fields}var error=function(message){throw Error(message)},splitAccessPath=function(p){var i,j,c,path=[],q=null,b=0,n=p.length,s="";function push(){path.push(s+p.substring(i,j)),s="",i=j+1}for(p+="",i=j=0;j<n;++j)if("\\"===(c=p[j]))s+=p.substring(i,j),i=++j;else if(c===q)push(),q=null,b=-1;else{if(q)continue;i===b&&'"'===c?(i=j+1,q=c):i===b&&"'"===c?(i=j+1,q=c):"."!==c||b?"["===c?(j>i&&push(),b=i=j+1):"]"===c&&(b||error("Access path missing open bracket: "+p),b>0&&push(),b=0,i=j+1):j>i?push():i=j+1}return b&&error("Access path missing closing bracket: "+p),q&&error("Access path missing closing quote: "+p),j>i&&(j++,push()),path},isArray=Array.isArray,isObject=function(_){return _===Object(_)},isString=function(_){return"string"==typeof _};function $(x){return isArray(x)?"["+x.map($)+"]":isObject(x)||isString(x)?JSON.stringify(x).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):x}var src_field=function(field,name){var path=splitAccessPath(field),code="return _["+path.map($).join("][")+"];";return accessor(Function("_",code),[field=1===path.length?path[0]:field],name||field)},empty=[],id=src_field("id"),identity=accessor((function(_){return _}),empty,"identity"),zero=accessor((function(){return 0}),empty,"zero"),one=accessor((function(){return 1}),empty,"one"),truthy=accessor((function(){return!0}),empty,"true"),falsy=accessor((function(){return!1}),empty,"false");function log(method,level,input){var args=[level].concat([].slice.call(input));console[method].apply(console,args)}var logger=function(_,method){var level=_||0;return{level:function(_){return arguments.length?(level=+_,this):level},error:function(){return level>=1&&log(method||"error","ERROR",arguments),this},warn:function(){return level>=2&&log(method||"warn","WARN",arguments),this},info:function(){return level>=3&&log(method||"log","INFO",arguments),this},debug:function(){return level>=4&&log(method||"log","DEBUG",arguments),this}}};function mergeConfig(...configs){return configs.reduce((out,source)=>{for(var key in source)if("signals"===key)out.signals=mergeNamed(out.signals,source.signals);else{var r="legend"===key?{layout:1}:"style"===key||null;writeConfig(out,key,source[key],r)}return out},{})}function writeConfig(output,key,value,recurse){var k,o;if(isObject(value)&&!isArray(value))for(k in o=isObject(output[key])?output[key]:output[key]={},value)recurse&&(!0===recurse||recurse[k])?writeConfig(o,k,value[k]):o[k]=value[k];else output[key]=value}function mergeNamed(a,b){if(null==a)return b;const map={},out=[];function add(_){map[_.name]||(map[_.name]=1,out.push(_))}return b.forEach(add),a.forEach(add),out}var peek=function(array){return array[array.length-1]},toNumber=function(_){return null==_||""===_?null:+_};function exp(sign){return function(x){return sign*Math.exp(x)}}function transform_log(sign){return function(x){return Math.log(sign*x)}}function symlog(c){return function(x){return Math.sign(x)*Math.log1p(Math.abs(x/c))}}function symexp(c){return function(x){return Math.sign(x)*Math.expm1(Math.abs(x))*c}}function pow(exponent){return function(x){return x<0?-Math.pow(-x,exponent):Math.pow(x,exponent)}}function pan(domain,delta,lift,ground){var d0=lift(domain[0]),d1=lift(peek(domain)),dd=(d1-d0)*delta;return[ground(d0-dd),ground(d1-dd)]}function panLinear(domain,delta){return pan(domain,delta,toNumber,identity)}function panLog(domain,delta){var sign=Math.sign(domain[0]);return pan(domain,delta,transform_log(sign),exp(sign))}function panPow(domain,delta,exponent){return pan(domain,delta,pow(exponent),pow(1/exponent))}function panSymlog(domain,delta,constant){return pan(domain,delta,symlog(constant),symexp(constant))}function zoom(domain,anchor,scale,lift,ground){var d0=lift(domain[0]),d1=lift(peek(domain)),da=null!=anchor?lift(anchor):(d0+d1)/2;return[ground(da+(d0-da)*scale),ground(da+(d1-da)*scale)]}function zoomLinear(domain,anchor,scale){return zoom(domain,anchor,scale,toNumber,identity)}function zoomLog(domain,anchor,scale){var sign=Math.sign(domain[0]);return zoom(domain,anchor,scale,transform_log(sign),exp(sign))}function zoomPow(domain,anchor,scale,exponent){return zoom(domain,anchor,scale,pow(exponent),pow(1/exponent))}function zoomSymlog(domain,anchor,scale,constant){return zoom(domain,anchor,scale,symlog(constant),symexp(constant))}function quarter(date){return 1+~~(new Date(date).getMonth()/3)}function utcquarter(date){return 1+~~(new Date(date).getUTCMonth()/3)}var src_array=function(_){return null!=_?isArray(_)?_:[_]:[]},clampRange=function(range,min,max){var span,lo=range[0],hi=range[1];return hi<lo&&(span=hi,hi=lo,lo=span),(span=hi-lo)>=max-min?[min,max]:[lo=Math.min(Math.max(lo,min),max-span),lo+span]},isFunction=function(_){return"function"==typeof _},compare=function(fields,orders){var i,j,f,u,v,d,t,lt,gt,idx=[],cmp=(fields=src_array(fields)).map((function(f,i){return null==f?null:(idx.push(i),isFunction(f)?f:splitAccessPath(f).map($).join("]["))})),n=idx.length-1,ord=src_array(orders),code="var u,v;return ";if(n<0)return null;for(j=0;j<=n;++j)f=cmp[i=idx[j]],isFunction(f)?(u="(u=this."+(d="f"+i)+"(a))",v="(v=this."+d+"(b))",(t=t||{})[d]=f):(u="(u=a["+f+"])",v="(v=b["+f+"])"),d="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"!==ord[i]?(gt=1,lt=-1):(gt=-1,lt=1),code+="("+u+"<"+v+"||u==null)&&v!=null?"+lt+":(u>v||v==null)&&u!=null?"+gt+":"+d+"!==u&&v===v?"+lt+":v!==v&&u===u?"+gt+(i<n?":":":0");return f=Function("a","b",code+";"),t&&(f=f.bind(t)),fields=fields.reduce((function(map,field){return isFunction(field)?(accessorFields(field)||[]).forEach((function(_){map[_]=1})):null!=field&&(map[field+""]=1),map}),{}),accessor(f,Object.keys(fields))},constant=function(_){return isFunction(_)?_:function(){return _}},debounce=function(delay,handler){var tid,evt;function callback(){handler(evt),tid=evt=null}return function(e){evt=e,tid&&clearTimeout(tid),tid=setTimeout(callback,delay)}},extend=function(_){for(var x,k,i=1,len=arguments.length;i<len;++i)for(k in x=arguments[i])_[k]=x[k];return _},extent=function(array,f){var n,v,min,max,i=0;if(array&&(n=array.length))if(null==f){for(v=array[i];null==v||v!=v;v=array[++i]);for(min=max=v;i<n;++i)null!=(v=array[i])&&(v<min&&(min=v),v>max&&(max=v))}else{for(v=f(array[i]);null==v||v!=v;v=f(array[++i]));for(min=max=v;i<n;++i)null!=(v=f(array[i]))&&(v<min&&(min=v),v>max&&(max=v))}return[min,max]},extentIndex=function(array,f){var a,b,c,u,v,i=-1,n=array.length;if(null==f){for(;++i<n;)if(null!=(b=array[i])&&b>=b){a=c=b;break}for(u=v=i;++i<n;)null!=(b=array[i])&&(a>b&&(a=b,u=i),c<b&&(c=b,v=i))}else{for(;++i<n;)if(null!=(b=f(array[i],i,array))&&b>=b){a=c=b;break}for(u=v=i;++i<n;)null!=(b=f(array[i],i,array))&&(a>b&&(a=b,u=i),c<b&&(c=b,v=i))}return[u,v]};const hop=Object.prototype.hasOwnProperty;var src_hasOwnProperty=function(object,property){return hop.call(object,property)},NULL={},fastmap=function(input){var map,test,obj={};function has(key){return src_hasOwnProperty(obj,key)&&obj[key]!==NULL}return map={size:0,empty:0,object:obj,has:has,get:function(key){return has(key)?obj[key]:void 0},set:function(key,value){return has(key)||(++map.size,obj[key]===NULL&&--map.empty),obj[key]=value,this},delete:function(key){return has(key)&&(--map.size,++map.empty,obj[key]=NULL),this},clear:function(){map.size=map.empty=0,map.object=obj={}},test:function(_){return arguments.length?(test=_,map):test},clean:function(){var key,value,next={},size=0;for(key in obj)(value=obj[key])===NULL||test&&test(value)||(next[key]=value,++size);map.size=size,map.empty=0,map.object=obj=next}},input&&Object.keys(input).forEach((function(key){map.set(key,input[key])})),map},flush=function(range,value,threshold,left,right,center){if(!threshold&&0!==threshold)return center;var l,r,a=range[0],b=peek(range),t=+threshold;return b<a&&(l=a,a=b,b=l),(l=Math.abs(value-a))<(r=Math.abs(b-value))&&l<=t?left:r<=t?right:center},inherits=function(child,parent){var proto=child.prototype=Object.create(parent.prototype);return proto.constructor=child,proto},inrange=function(value,range,left,right){var t,r0=range[0],r1=range[range.length-1];return r0>r1&&(t=r0,r0=r1,r1=t),right=void 0===right||right,((left=void 0===left||left)?r0<=value:r0<value)&&(right?value<=r1:value<r1)},isBoolean=function(_){return"boolean"==typeof _},isDate=function(_){return"[object Date]"===Object.prototype.toString.call(_)},isNumber=function(_){return"number"==typeof _},isRegExp=function(_){return"[object RegExp]"===Object.prototype.toString.call(_)},src_key=function(fields,flat){fields&&(fields=flat?src_array(fields).map((function(f){return f.replace(/\\(.)/g,"$1")})):src_array(fields));var fn=fields&&fields.length?Function("_","return ''+"+fields.map((function(f){return"_["+(flat?$(f):splitAccessPath(f).map($).join("]["))+"]"})).join("+'|'+")+";"):function(){return""};return accessor(fn,fields,"key")},lerp=function(array,frac){const lo=array[0],hi=peek(array),f=+frac;return f?1===f?hi:lo+f*(hi-lo):lo},merge=function(compare,array0,array1,output){var n0=array0.length,n1=array1.length;if(!n1)return array0;if(!n0)return array1;for(var merged=output||new array0.constructor(n0+n1),i0=0,i1=0,i=0;i0<n0&&i1<n1;++i)merged[i]=compare(array0[i0],array1[i1])>0?array1[i1++]:array0[i0++];for(;i0<n0;++i0,++i)merged[i]=array0[i0];for(;i1<n1;++i1,++i)merged[i]=array1[i1];return merged},repeat=function(str,reps){for(var s="";--reps>=0;)s+=str;return s},pad=function(str,length,padchar,align){var c=padchar||" ",s=str+"",n=length-s.length;return n<=0?s:"left"===align?repeat(c,n)+s:"center"===align?repeat(c,~~(n/2))+s+repeat(c,Math.ceil(n/2)):s+repeat(c,n)},span=function(array){return array&&peek(array)-array[0]||0},toBoolean=function(_){return null==_||""===_?null:!(!_||"false"===_||"0"===_)&&!!_};function defaultParser(_){return isNumber(_)?_:isDate(_)?_:Date.parse(_)}var toDate=function(_,parser){return parser=parser||defaultParser,null==_||""===_?null:parser(_)},src_toString=function(_){return null==_||""===_?null:_+""},toSet=function(_){for(var s={},i=0,n=_.length;i<n;++i)s[_[i]]=!0;return s},truncate=function(str,length,align,ellipsis){var e=null!=ellipsis?ellipsis:"…",s=str+"",n=s.length,l=Math.max(0,length-e.length);return n<=length?s:"left"===align?e+s.slice(n-l):"center"===align?s.slice(0,Math.ceil(l/2))+e+s.slice(n-~~(l/2)):s.slice(0,l)+e},visitArray=function(array,filter,visitor){if(array){var t,i=0,n=array.length;if(filter)for(;i<n;++i)(t=filter(array[i]))&&visitor(t,i,array);else array.forEach(visitor)}};__webpack_require__.d(__webpack_exports__,"f",(function(){return accessor})),__webpack_require__.d(__webpack_exports__,"h",(function(){return accessorName})),__webpack_require__.d(__webpack_exports__,"g",(function(){return accessorFields})),__webpack_require__.d(__webpack_exports__,"w",(function(){return id})),__webpack_require__.d(__webpack_exports__,"x",(function(){return identity})),__webpack_require__.d(__webpack_exports__,"jb",(function(){return zero})),__webpack_require__.d(__webpack_exports__,"N",(function(){return one})),__webpack_require__.d(__webpack_exports__,"fb",(function(){return truthy})),__webpack_require__.d(__webpack_exports__,"r",(function(){return falsy})),__webpack_require__.d(__webpack_exports__,"K",(function(){return logger})),__webpack_require__.d(__webpack_exports__,"d",(function(){return 0})),__webpack_require__.d(__webpack_exports__,"b",(function(){return 1})),__webpack_require__.d(__webpack_exports__,"e",(function(){return 2})),__webpack_require__.d(__webpack_exports__,"c",(function(){return 3})),__webpack_require__.d(__webpack_exports__,"a",(function(){return 4})),__webpack_require__.d(__webpack_exports__,"M",(function(){return mergeConfig})),__webpack_require__.d(__webpack_exports__,"ib",(function(){return writeConfig})),__webpack_require__.d(__webpack_exports__,"P",(function(){return panLinear})),__webpack_require__.d(__webpack_exports__,"Q",(function(){return panLog})),__webpack_require__.d(__webpack_exports__,"R",(function(){return panPow})),__webpack_require__.d(__webpack_exports__,"S",(function(){return panSymlog})),__webpack_require__.d(__webpack_exports__,"kb",(function(){return zoomLinear})),__webpack_require__.d(__webpack_exports__,"lb",(function(){return zoomLog})),__webpack_require__.d(__webpack_exports__,"mb",(function(){return zoomPow})),__webpack_require__.d(__webpack_exports__,"nb",(function(){return zoomSymlog})),__webpack_require__.d(__webpack_exports__,"U",(function(){return quarter})),__webpack_require__.d(__webpack_exports__,"gb",(function(){return utcquarter})),__webpack_require__.d(__webpack_exports__,"i",(function(){return src_array})),__webpack_require__.d(__webpack_exports__,"j",(function(){return clampRange})),__webpack_require__.d(__webpack_exports__,"k",(function(){return compare})),__webpack_require__.d(__webpack_exports__,"l",(function(){return constant})),__webpack_require__.d(__webpack_exports__,"m",(function(){return debounce})),__webpack_require__.d(__webpack_exports__,"n",(function(){return error})),__webpack_require__.d(__webpack_exports__,"o",(function(){return extend})),__webpack_require__.d(__webpack_exports__,"p",(function(){return extent})),__webpack_require__.d(__webpack_exports__,"q",(function(){return extentIndex})),__webpack_require__.d(__webpack_exports__,"s",(function(){return fastmap})),__webpack_require__.d(__webpack_exports__,"t",(function(){return src_field})),__webpack_require__.d(__webpack_exports__,"u",(function(){return flush})),__webpack_require__.d(__webpack_exports__,"v",(function(){return src_hasOwnProperty})),__webpack_require__.d(__webpack_exports__,"y",(function(){return inherits})),__webpack_require__.d(__webpack_exports__,"z",(function(){return inrange})),__webpack_require__.d(__webpack_exports__,"A",(function(){return isArray})),__webpack_require__.d(__webpack_exports__,"B",(function(){return isBoolean})),__webpack_require__.d(__webpack_exports__,"C",(function(){return isDate})),__webpack_require__.d(__webpack_exports__,"D",(function(){return isFunction})),__webpack_require__.d(__webpack_exports__,"E",(function(){return isNumber})),__webpack_require__.d(__webpack_exports__,"F",(function(){return isObject})),__webpack_require__.d(__webpack_exports__,"G",(function(){return isRegExp})),__webpack_require__.d(__webpack_exports__,"H",(function(){return isString})),__webpack_require__.d(__webpack_exports__,"I",(function(){return src_key})),__webpack_require__.d(__webpack_exports__,"J",(function(){return lerp})),__webpack_require__.d(__webpack_exports__,"L",(function(){return merge})),__webpack_require__.d(__webpack_exports__,"O",(function(){return pad})),__webpack_require__.d(__webpack_exports__,"T",(function(){return peek})),__webpack_require__.d(__webpack_exports__,"V",(function(){return repeat})),__webpack_require__.d(__webpack_exports__,"W",(function(){return span})),__webpack_require__.d(__webpack_exports__,"X",(function(){return splitAccessPath})),__webpack_require__.d(__webpack_exports__,"Y",(function(){return $})),__webpack_require__.d(__webpack_exports__,"Z",(function(){return toBoolean})),__webpack_require__.d(__webpack_exports__,"ab",(function(){return toDate})),__webpack_require__.d(__webpack_exports__,"bb",(function(){return toNumber})),__webpack_require__.d(__webpack_exports__,"db",(function(){return src_toString})),__webpack_require__.d(__webpack_exports__,"cb",(function(){return toSet})),__webpack_require__.d(__webpack_exports__,"eb",(function(){return truncate})),__webpack_require__.d(__webpack_exports__,"hb",(function(){return visitArray}))},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(558)},function(module,exports,__webpack_require__){var $=__webpack_require__(3),DESCRIPTORS=__webpack_require__(12);$({target:"Object",stat:!0,forced:!DESCRIPTORS,sham:!DESCRIPTORS},{defineProperty:__webpack_require__(19).f})},function(module,exports,__webpack_require__){var global=__webpack_require__(5),getOwnPropertyDescriptor=__webpack_require__(57).f,createNonEnumerableProperty=__webpack_require__(29),redefine=__webpack_require__(30),setGlobal=__webpack_require__(138),copyConstructorProperties=__webpack_require__(206),isForced=__webpack_require__(93);module.exports=function(options,source){var target,key,targetProperty,sourceProperty,descriptor,TARGET=options.target,GLOBAL=options.global,STATIC=options.stat;if(target=GLOBAL?global:STATIC?global[TARGET]||setGlobal(TARGET,{}):(global[TARGET]||{}).prototype)for(key in source){if(sourceProperty=source[key],targetProperty=options.noTargetGet?(descriptor=getOwnPropertyDescriptor(target,key))&&descriptor.value:target[key],!isForced(GLOBAL?key:TARGET+(STATIC?".":"#")+key,options.forced)&&void 0!==targetProperty){if(typeof sourceProperty==typeof targetProperty)continue;copyConstructorProperties(sourceProperty,targetProperty)}(options.sham||targetProperty&&targetProperty.sham)&&createNonEnumerableProperty(sourceProperty,"sham",!0),redefine(target,key,sourceProperty,options)}}},,function(module,exports,__webpack_require__){(function(global){var check=function(it){return it&&it.Math==Math&&it};module.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof global&&global)||Function("return this")()}).call(this,__webpack_require__(22))},function(module,exports,__webpack_require__){"use strict";var keys=__webpack_require__(129),hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),toStr=Object.prototype.toString,concat=Array.prototype.concat,origDefineProperty=Object.defineProperty,supportsDescriptors=origDefineProperty&&function(){var obj={};try{for(var _ in origDefineProperty(obj,"x",{enumerable:!1,value:obj}),obj)return!1;return obj.x===obj}catch(e){return!1}}(),defineProperty=function(object,name,value,predicate){var fn;name in object&&("function"!=typeof(fn=predicate)||"[object Function]"!==toStr.call(fn)||!predicate())||(supportsDescriptors?origDefineProperty(object,name,{configurable:!0,enumerable:!1,value:value,writable:!0}):object[name]=value)},defineProperties=function(object,map){var predicates=arguments.length>2?arguments[2]:{},props=keys(map);hasSymbols&&(props=concat.call(props,Object.getOwnPropertySymbols(map)));for(var i=0;i<props.length;i+=1)defineProperty(object,props[i],map[props[i]],predicates[props[i]])};defineProperties.supportsDescriptors=!!supportsDescriptors,module.exports=defineProperties},function(module,exports){module.exports=function(exec){try{return!!exec()}catch(error){return!0}}},function(module,exports,__webpack_require__){var global=__webpack_require__(5),shared=__webpack_require__(69),uid=__webpack_require__(90),NATIVE_SYMBOL=__webpack_require__(210),Symbol=global.Symbol,store=shared("wks");module.exports=function(name){return store[name]||(store[name]=NATIVE_SYMBOL&&Symbol[name]||(NATIVE_SYMBOL?Symbol:uid)("Symbol."+name))}},function(module,exports){module.exports=function(it){return"object"==typeof it?null!==it:"function"==typeof it}},function(module,exports,__webpack_require__){"use strict";var $TypeError=TypeError,ThrowTypeError=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new $TypeError},hasSymbols=__webpack_require__(34)(),getProto=Object.getPrototypeOf||function(x){return x.__proto__},asyncGenIterator=void 0,TypedArray="undefined"==typeof Uint8Array?void 0:getProto(Uint8Array),INTRINSICS={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":hasSymbols?getProto([][Symbol.iterator]()):void 0,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":void 0,"$ %AsyncFunction%":void 0,"$ %AsyncFunctionPrototype%":void 0,"$ %AsyncGenerator%":void 0,"$ %AsyncGeneratorFunction%":void 0,"$ %AsyncGeneratorPrototype%":void 0,"$ %AsyncIteratorPrototype%":asyncGenIterator&&hasSymbols&&Symbol.asyncIterator?asyncGenIterator[Symbol.asyncIterator]():void 0,"$ %Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"==typeof DataView?void 0:DataView,"$ %DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"$ %Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"$ %Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"$ %Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":void 0,"$ %GeneratorFunction%":void 0,"$ %GeneratorPrototype%":void 0,"$ %Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"$ %Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"$ %Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"$ %Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"$ %Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"$ %Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":hasSymbols?getProto(getProto([][Symbol.iterator]())):void 0,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"==typeof Map?void 0:Map,"$ %MapIteratorPrototype%":"undefined"!=typeof Map&&hasSymbols?getProto((new Map)[Symbol.iterator]()):void 0,"$ %MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"==typeof Promise?void 0:Promise,"$ %PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"$ %PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"$ %Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"$ %Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"$ %Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"$ %Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"==typeof Set?void 0:Set,"$ %SetIteratorPrototype%":"undefined"!=typeof Set&&hasSymbols?getProto((new Set)[Symbol.iterator]()):void 0,"$ %SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"$ %SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":hasSymbols?getProto(""[Symbol.iterator]()):void 0,"$ %StringPrototype%":String.prototype,"$ %Symbol%":hasSymbols?Symbol:void 0,"$ %SymbolPrototype%":hasSymbols?Symbol.prototype:void 0,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":ThrowTypeError,"$ %TypedArray%":TypedArray,"$ %TypedArrayPrototype%":TypedArray?TypedArray.prototype:void 0,"$ %TypeError%":$TypeError,"$ %TypeErrorPrototype%":$TypeError.prototype,"$ %Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"$ %Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"$ %WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"$ %WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"$ %WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},$replace=__webpack_require__(23).call(Function.call,String.prototype.replace),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function stringToPath(string){var result=[];return $replace(string,rePropName,(function(match,number,quote,subString){result[result.length]=quote?$replace(subString,reEscapeChar,"$1"):number||match})),result},getBaseIntrinsic=function getBaseIntrinsic(name,allowMissing){var key="$ "+name;if(!(key in INTRINSICS))throw new SyntaxError("intrinsic "+name+" does not exist!");if(void 0===INTRINSICS[key]&&!allowMissing)throw new $TypeError("intrinsic "+name+" exists, but is not available. Please file an issue!");return INTRINSICS[key]};module.exports=function GetIntrinsic(name,allowMissing){if(arguments.length>1&&"boolean"!=typeof allowMissing)throw new TypeError('"allowMissing" argument must be a boolean');var parts=stringToPath(name);if(0===parts.length)return getBaseIntrinsic(name,allowMissing);for(var value=getBaseIntrinsic("%"+parts[0]+"%",allowMissing),i=1;i<parts.length;i+=1)null!=value&&(value=value[parts[i]]);return value}},function(module,exports,__webpack_require__){var path=__webpack_require__(139),has=__webpack_require__(18),wrappedWellKnownSymbolModule=__webpack_require__(214),defineProperty=__webpack_require__(19).f;module.exports=function(NAME){var Symbol=path.Symbol||(path.Symbol={});has(Symbol,NAME)||defineProperty(Symbol,NAME,{value:wrappedWellKnownSymbolModule.f(NAME)})}},function(module,exports,__webpack_require__){var fails=__webpack_require__(7);module.exports=!fails((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(module,exports,__webpack_require__){var isObject=__webpack_require__(9);module.exports=function(it){if(!isObject(it))throw TypeError(String(it)+" is not an object");return it}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(3),forEach=__webpack_require__(215);$({target:"Array",proto:!0,forced:[].forEach!=forEach},{forEach:forEach})},function(module,exports,__webpack_require__){var global=__webpack_require__(5),DOMIterables=__webpack_require__(218),forEach=__webpack_require__(215),createNonEnumerableProperty=__webpack_require__(29);for(var COLLECTION_NAME in DOMIterables){var Collection=global[COLLECTION_NAME],CollectionPrototype=Collection&&Collection.prototype;if(CollectionPrototype&&CollectionPrototype.forEach!==forEach)try{createNonEnumerableProperty(CollectionPrototype,"forEach",forEach)}catch(error){CollectionPrototype.forEach=forEach}}},function(module,exports,__webpack_require__){var redefine=__webpack_require__(30),toString=__webpack_require__(377),ObjectPrototype=Object.prototype;toString!==ObjectPrototype.toString&&redefine(ObjectPrototype,"toString",toString,{unsafe:!0})},function(module,exports,__webpack_require__){"use strict";var toIndexedObject=__webpack_require__(37),addToUnscopables=__webpack_require__(146),Iterators=__webpack_require__(76),InternalStateModule=__webpack_require__(45),defineIterator=__webpack_require__(147),setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor("Array Iterator");module.exports=defineIterator(Array,"Array",(function(iterated,kind){setInternalState(this,{type:"Array Iterator",target:toIndexedObject(iterated),index:0,kind:kind})}),(function(){var state=getInternalState(this),target=state.target,kind=state.kind,index=state.index++;return!target||index>=target.length?(state.target=void 0,{value:void 0,done:!0}):"keys"==kind?{value:index,done:!1}:"values"==kind?{value:target[index],done:!1}:{value:[index,target[index]],done:!1}}),"values"),Iterators.Arguments=Iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries")},function(module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(12),IE8_DOM_DEFINE=__webpack_require__(203),anObject=__webpack_require__(13),toPrimitive=__webpack_require__(68),nativeDefineProperty=Object.defineProperty;exports.f=DESCRIPTORS?nativeDefineProperty:function defineProperty(O,P,Attributes){if(anObject(O),P=toPrimitive(P,!0),anObject(Attributes),IE8_DOM_DEFINE)try{return nativeDefineProperty(O,P,Attributes)}catch(error){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported");return"value"in Attributes&&(O[P]=Attributes.value),O}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(3),global=__webpack_require__(5),getBuiltIn=__webpack_require__(58),IS_PURE=__webpack_require__(70),DESCRIPTORS=__webpack_require__(12),NATIVE_SYMBOL=__webpack_require__(210),fails=__webpack_require__(7),has=__webpack_require__(18),isArray=__webpack_require__(72),isObject=__webpack_require__(9),anObject=__webpack_require__(13),toObject=__webpack_require__(32),toIndexedObject=__webpack_require__(37),toPrimitive=__webpack_require__(68),createPropertyDescriptor=__webpack_require__(67),nativeObjectCreate=__webpack_require__(59),objectKeys=__webpack_require__(73),getOwnPropertyNamesModule=__webpack_require__(91),getOwnPropertyNamesExternal=__webpack_require__(378),getOwnPropertySymbolsModule=__webpack_require__(142),getOwnPropertyDescriptorModule=__webpack_require__(57),definePropertyModule=__webpack_require__(19),propertyIsEnumerableModule=__webpack_require__(87),createNonEnumerableProperty=__webpack_require__(29),redefine=__webpack_require__(30),shared=__webpack_require__(69),sharedKey=__webpack_require__(89),hiddenKeys=__webpack_require__(71),uid=__webpack_require__(90),wellKnownSymbol=__webpack_require__(8),wrappedWellKnownSymbolModule=__webpack_require__(214),defineWellKnownSymbol=__webpack_require__(11),setToStringTag=__webpack_require__(47),InternalStateModule=__webpack_require__(45),$forEach=__webpack_require__(48).forEach,HIDDEN=sharedKey("hidden"),TO_PRIMITIVE=wellKnownSymbol("toPrimitive"),setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor("Symbol"),ObjectPrototype=Object.prototype,$Symbol=global.Symbol,$stringify=getBuiltIn("JSON","stringify"),nativeGetOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,nativeDefineProperty=definePropertyModule.f,nativeGetOwnPropertyNames=getOwnPropertyNamesExternal.f,nativePropertyIsEnumerable=propertyIsEnumerableModule.f,AllSymbols=shared("symbols"),ObjectPrototypeSymbols=shared("op-symbols"),StringToSymbolRegistry=shared("string-to-symbol-registry"),SymbolToStringRegistry=shared("symbol-to-string-registry"),WellKnownSymbolsStore=shared("wks"),QObject=global.QObject,USE_SETTER=!QObject||!QObject.prototype||!QObject.prototype.findChild,setSymbolDescriptor=DESCRIPTORS&&fails((function(){return 7!=nativeObjectCreate(nativeDefineProperty({},"a",{get:function(){return nativeDefineProperty(this,"a",{value:7}).a}})).a}))?function(O,P,Attributes){var ObjectPrototypeDescriptor=nativeGetOwnPropertyDescriptor(ObjectPrototype,P);ObjectPrototypeDescriptor&&delete ObjectPrototype[P],nativeDefineProperty(O,P,Attributes),ObjectPrototypeDescriptor&&O!==ObjectPrototype&&nativeDefineProperty(ObjectPrototype,P,ObjectPrototypeDescriptor)}:nativeDefineProperty,wrap=function(tag,description){var symbol=AllSymbols[tag]=nativeObjectCreate($Symbol.prototype);return setInternalState(symbol,{type:"Symbol",tag:tag,description:description}),DESCRIPTORS||(symbol.description=description),symbol},isSymbol=NATIVE_SYMBOL&&"symbol"==typeof $Symbol.iterator?function(it){return"symbol"==typeof it}:function(it){return Object(it)instanceof $Symbol},$defineProperty=function defineProperty(O,P,Attributes){O===ObjectPrototype&&$defineProperty(ObjectPrototypeSymbols,P,Attributes),anObject(O);var key=toPrimitive(P,!0);return anObject(Attributes),has(AllSymbols,key)?(Attributes.enumerable?(has(O,HIDDEN)&&O[HIDDEN][key]&&(O[HIDDEN][key]=!1),Attributes=nativeObjectCreate(Attributes,{enumerable:createPropertyDescriptor(0,!1)})):(has(O,HIDDEN)||nativeDefineProperty(O,HIDDEN,createPropertyDescriptor(1,{})),O[HIDDEN][key]=!0),setSymbolDescriptor(O,key,Attributes)):nativeDefineProperty(O,key,Attributes)},$defineProperties=function defineProperties(O,Properties){anObject(O);var properties=toIndexedObject(Properties),keys=objectKeys(properties).concat($getOwnPropertySymbols(properties));return $forEach(keys,(function(key){DESCRIPTORS&&!$propertyIsEnumerable.call(properties,key)||$defineProperty(O,key,properties[key])})),O},$propertyIsEnumerable=function propertyIsEnumerable(V){var P=toPrimitive(V,!0),enumerable=nativePropertyIsEnumerable.call(this,P);return!(this===ObjectPrototype&&has(AllSymbols,P)&&!has(ObjectPrototypeSymbols,P))&&(!(enumerable||!has(this,P)||!has(AllSymbols,P)||has(this,HIDDEN)&&this[HIDDEN][P])||enumerable)},$getOwnPropertyDescriptor=function getOwnPropertyDescriptor(O,P){var it=toIndexedObject(O),key=toPrimitive(P,!0);if(it!==ObjectPrototype||!has(AllSymbols,key)||has(ObjectPrototypeSymbols,key)){var descriptor=nativeGetOwnPropertyDescriptor(it,key);return!descriptor||!has(AllSymbols,key)||has(it,HIDDEN)&&it[HIDDEN][key]||(descriptor.enumerable=!0),descriptor}},$getOwnPropertyNames=function getOwnPropertyNames(O){var names=nativeGetOwnPropertyNames(toIndexedObject(O)),result=[];return $forEach(names,(function(key){has(AllSymbols,key)||has(hiddenKeys,key)||result.push(key)})),result},$getOwnPropertySymbols=function getOwnPropertySymbols(O){var IS_OBJECT_PROTOTYPE=O===ObjectPrototype,names=nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE?ObjectPrototypeSymbols:toIndexedObject(O)),result=[];return $forEach(names,(function(key){!has(AllSymbols,key)||IS_OBJECT_PROTOTYPE&&!has(ObjectPrototype,key)||result.push(AllSymbols[key])})),result};(NATIVE_SYMBOL||(redefine(($Symbol=function Symbol(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor");var description=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,tag=uid(description),setter=function(value){this===ObjectPrototype&&setter.call(ObjectPrototypeSymbols,value),has(this,HIDDEN)&&has(this[HIDDEN],tag)&&(this[HIDDEN][tag]=!1),setSymbolDescriptor(this,tag,createPropertyDescriptor(1,value))};return DESCRIPTORS&&USE_SETTER&&setSymbolDescriptor(ObjectPrototype,tag,{configurable:!0,set:setter}),wrap(tag,description)}).prototype,"toString",(function toString(){return getInternalState(this).tag})),propertyIsEnumerableModule.f=$propertyIsEnumerable,definePropertyModule.f=$defineProperty,getOwnPropertyDescriptorModule.f=$getOwnPropertyDescriptor,getOwnPropertyNamesModule.f=getOwnPropertyNamesExternal.f=$getOwnPropertyNames,getOwnPropertySymbolsModule.f=$getOwnPropertySymbols,DESCRIPTORS&&(nativeDefineProperty($Symbol.prototype,"description",{configurable:!0,get:function description(){return getInternalState(this).description}}),IS_PURE||redefine(ObjectPrototype,"propertyIsEnumerable",$propertyIsEnumerable,{unsafe:!0})),wrappedWellKnownSymbolModule.f=function(name){return wrap(wellKnownSymbol(name),name)}),$({global:!0,wrap:!0,forced:!NATIVE_SYMBOL,sham:!NATIVE_SYMBOL},{Symbol:$Symbol}),$forEach(objectKeys(WellKnownSymbolsStore),(function(name){defineWellKnownSymbol(name)})),$({target:"Symbol",stat:!0,forced:!NATIVE_SYMBOL},{for:function(key){var string=String(key);if(has(StringToSymbolRegistry,string))return StringToSymbolRegistry[string];var symbol=$Symbol(string);return StringToSymbolRegistry[string]=symbol,SymbolToStringRegistry[symbol]=string,symbol},keyFor:function keyFor(sym){if(!isSymbol(sym))throw TypeError(sym+" is not a symbol");if(has(SymbolToStringRegistry,sym))return SymbolToStringRegistry[sym]},useSetter:function(){USE_SETTER=!0},useSimple:function(){USE_SETTER=!1}}),$({target:"Object",stat:!0,forced:!NATIVE_SYMBOL,sham:!DESCRIPTORS},{create:function create(O,Properties){return void 0===Properties?nativeObjectCreate(O):$defineProperties(nativeObjectCreate(O),Properties)},defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor}),$({target:"Object",stat:!0,forced:!NATIVE_SYMBOL},{getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols}),$({target:"Object",stat:!0,forced:fails((function(){getOwnPropertySymbolsModule.f(1)}))},{getOwnPropertySymbols:function getOwnPropertySymbols(it){return getOwnPropertySymbolsModule.f(toObject(it))}}),$stringify)&&$({target:"JSON",stat:!0,forced:!NATIVE_SYMBOL||fails((function(){var symbol=$Symbol();return"[null]"!=$stringify([symbol])||"{}"!=$stringify({a:symbol})||"{}"!=$stringify(Object(symbol))}))},{stringify:function stringify(it,replacer,space){for(var $replacer,args=[it],index=1;arguments.length>index;)args.push(arguments[index++]);if($replacer=replacer,(isObject(replacer)||void 0!==it)&&!isSymbol(it))return isArray(replacer)||(replacer=function(key,value){if("function"==typeof $replacer&&(value=$replacer.call(this,key,value)),!isSymbol(value))return value}),args[1]=replacer,$stringify.apply(null,args)}});$Symbol.prototype[TO_PRIMITIVE]||createNonEnumerableProperty($Symbol.prototype,TO_PRIMITIVE,$Symbol.prototype.valueOf),setToStringTag($Symbol,"Symbol"),hiddenKeys[HIDDEN]=!0},function(module,exports,__webpack_require__){var global=__webpack_require__(5),DOMIterables=__webpack_require__(218),ArrayIteratorMethods=__webpack_require__(17),createNonEnumerableProperty=__webpack_require__(29),wellKnownSymbol=__webpack_require__(8),ITERATOR=wellKnownSymbol("iterator"),TO_STRING_TAG=wellKnownSymbol("toStringTag"),ArrayValues=ArrayIteratorMethods.values;for(var COLLECTION_NAME in DOMIterables){var Collection=global[COLLECTION_NAME],CollectionPrototype=Collection&&Collection.prototype;if(CollectionPrototype){if(CollectionPrototype[ITERATOR]!==ArrayValues)try{createNonEnumerableProperty(CollectionPrototype,ITERATOR,ArrayValues)}catch(error){CollectionPrototype[ITERATOR]=ArrayValues}if(CollectionPrototype[TO_STRING_TAG]||createNonEnumerableProperty(CollectionPrototype,TO_STRING_TAG,COLLECTION_NAME),DOMIterables[COLLECTION_NAME])for(var METHOD_NAME in ArrayIteratorMethods)if(CollectionPrototype[METHOD_NAME]!==ArrayIteratorMethods[METHOD_NAME])try{createNonEnumerableProperty(CollectionPrototype,METHOD_NAME,ArrayIteratorMethods[METHOD_NAME])}catch(error){CollectionPrototype[METHOD_NAME]=ArrayIteratorMethods[METHOD_NAME]}}}},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(296);module.exports=Function.prototype.bind||implementation},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(3),DESCRIPTORS=__webpack_require__(12),global=__webpack_require__(5),has=__webpack_require__(18),isObject=__webpack_require__(9),defineProperty=__webpack_require__(19).f,copyConstructorProperties=__webpack_require__(206),NativeSymbol=global.Symbol;if(DESCRIPTORS&&"function"==typeof NativeSymbol&&(!("description"in NativeSymbol.prototype)||void 0!==NativeSymbol().description)){var EmptyStringDescriptionStore={},SymbolWrapper=function Symbol(){var description=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),result=this instanceof SymbolWrapper?new NativeSymbol(description):void 0===description?NativeSymbol():NativeSymbol(description);return""===description&&(EmptyStringDescriptionStore[result]=!0),result};copyConstructorProperties(SymbolWrapper,NativeSymbol);var symbolPrototype=SymbolWrapper.prototype=NativeSymbol.prototype;symbolPrototype.constructor=SymbolWrapper;var symbolToString=symbolPrototype.toString,native="Symbol(test)"==String(NativeSymbol("test")),regexp=/^Symbol\((.*)\)[^)]+$/;defineProperty(symbolPrototype,"description",{configurable:!0,get:function description(){var symbol=isObject(this)?this.valueOf():this,string=symbolToString.call(symbol);if(has(EmptyStringDescriptionStore,symbol))return"";var desc=native?string.slice(7,-1):string.replace(regexp,"$1");return""===desc?void 0:desc}}),$({global:!0,forced:!0},{Symbol:SymbolWrapper})}},function(module,exports,__webpack_require__){__webpack_require__(11)("iterator")},function(module,exports,__webpack_require__){var $=__webpack_require__(3),toObject=__webpack_require__(32),nativeKeys=__webpack_require__(73);$({target:"Object",stat:!0,forced:__webpack_require__(7)((function(){nativeKeys(1)}))},{keys:function keys(it){return nativeKeys(toObject(it))}})},function(module,exports,__webpack_require__){"use strict";var charAt=__webpack_require__(224).charAt,InternalStateModule=__webpack_require__(45),defineIterator=__webpack_require__(147),setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor("String Iterator");defineIterator(String,"String",(function(iterated){setInternalState(this,{type:"String Iterator",string:String(iterated),index:0})}),(function next(){var point,state=getInternalState(this),string=state.string,index=state.index;return index>=string.length?{value:void 0,done:!0}:(point=charAt(string,index),state.index+=point.length,{value:point,done:!1})}))},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(3),fails=__webpack_require__(7),isArray=__webpack_require__(72),isObject=__webpack_require__(9),toObject=__webpack_require__(32),toLength=__webpack_require__(31),createProperty=__webpack_require__(143),arraySpeciesCreate=__webpack_require__(209),arrayMethodHasSpeciesSupport=__webpack_require__(94),wellKnownSymbol=__webpack_require__(8),V8_VERSION=__webpack_require__(144),IS_CONCAT_SPREADABLE=wellKnownSymbol("isConcatSpreadable"),IS_CONCAT_SPREADABLE_SUPPORT=V8_VERSION>=51||!fails((function(){var array=[];return array[IS_CONCAT_SPREADABLE]=!1,array.concat()[0]!==array})),SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("concat"),isConcatSpreadable=function(O){if(!isObject(O))return!1;var spreadable=O[IS_CONCAT_SPREADABLE];return void 0!==spreadable?!!spreadable:isArray(O)};$({target:"Array",proto:!0,forced:!IS_CONCAT_SPREADABLE_SUPPORT||!SPECIES_SUPPORT},{concat:function concat(arg){var i,k,length,len,E,O=toObject(this),A=arraySpeciesCreate(O,0),n=0;for(i=-1,length=arguments.length;i<length;i++)if(E=-1===i?O:arguments[i],isConcatSpreadable(E)){if(n+(len=toLength(E.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(k=0;k<len;k++,n++)k in E&&createProperty(A,n,E[k])}else{if(n>=9007199254740991)throw TypeError("Maximum allowed index exceeded");createProperty(A,n++,E)}return A.length=n,A}})},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(12),definePropertyModule=__webpack_require__(19),createPropertyDescriptor=__webpack_require__(67);module.exports=DESCRIPTORS?function(object,key,value){return definePropertyModule.f(object,key,createPropertyDescriptor(1,value))}:function(object,key,value){return object[key]=value,object}},function(module,exports,__webpack_require__){var global=__webpack_require__(5),shared=__webpack_require__(69),createNonEnumerableProperty=__webpack_require__(29),has=__webpack_require__(18),setGlobal=__webpack_require__(138),nativeFunctionToString=__webpack_require__(204),InternalStateModule=__webpack_require__(45),getInternalState=InternalStateModule.get,enforceInternalState=InternalStateModule.enforce,TEMPLATE=String(nativeFunctionToString).split("toString");shared("inspectSource",(function(it){return nativeFunctionToString.call(it)})),(module.exports=function(O,key,value,options){var unsafe=!!options&&!!options.unsafe,simple=!!options&&!!options.enumerable,noTargetGet=!!options&&!!options.noTargetGet;"function"==typeof value&&("string"!=typeof key||has(value,"name")||createNonEnumerableProperty(value,"name",key),enforceInternalState(value).source=TEMPLATE.join("string"==typeof key?key:"")),O!==global?(unsafe?!noTargetGet&&O[key]&&(simple=!0):delete O[key],simple?O[key]=value:createNonEnumerableProperty(O,key,value)):simple?O[key]=value:setGlobal(key,value)})(Function.prototype,"toString",(function toString(){return"function"==typeof this&&getInternalState(this).source||nativeFunctionToString.call(this)}))},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(92),min=Math.min;module.exports=function(argument){return argument>0?min(toInteger(argument),9007199254740991):0}},function(module,exports,__webpack_require__){var requireObjectCoercible=__webpack_require__(35);module.exports=function(argument){return Object(requireObjectCoercible(argument))}},function(module,exports,__webpack_require__){var freeGlobal=__webpack_require__(242),freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();module.exports=root},function(module,exports,__webpack_require__){"use strict";(function(global){var origSymbol=global.Symbol,hasSymbolSham=__webpack_require__(305);module.exports=function hasNativeSymbols(){return"function"==typeof origSymbol&&("function"==typeof Symbol&&("symbol"==typeof origSymbol("foo")&&("symbol"==typeof Symbol("bar")&&hasSymbolSham())))}}).call(this,__webpack_require__(22))},function(module,exports){module.exports=function(it){if(null==it)throw TypeError("Can't call method on "+it);return it}},function(module,exports,__webpack_require__){(function(global){var win;win="undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:{},module.exports=win}).call(this,__webpack_require__(22))},function(module,exports,__webpack_require__){var IndexedObject=__webpack_require__(88),requireObjectCoercible=__webpack_require__(35);module.exports=function(it){return IndexedObject(requireObjectCoercible(it))}},function(module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},function(module,exports,__webpack_require__){__webpack_require__(3)({target:"Array",stat:!0},{isArray:__webpack_require__(72)})},function(module,exports,__webpack_require__){var $=__webpack_require__(3),assign=__webpack_require__(410);$({target:"Object",stat:!0,forced:Object.assign!==assign},{assign:assign})},function(module,exports){module.exports=function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}},,function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(23);module.exports=bind.call(Function.call,Object.prototype.hasOwnProperty)},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(10),callBind=__webpack_require__(86),$indexOf=callBind(GetIntrinsic("String.prototype.indexOf"));module.exports=function callBoundIntrinsic(name,allowMissing){var intrinsic=GetIntrinsic(name,!!allowMissing);return"function"==typeof intrinsic&&$indexOf(name,".prototype.")?callBind(intrinsic):intrinsic}},function(module,exports,__webpack_require__){var set,get,has,NATIVE_WEAK_MAP=__webpack_require__(205),global=__webpack_require__(5),isObject=__webpack_require__(9),createNonEnumerableProperty=__webpack_require__(29),objectHas=__webpack_require__(18),sharedKey=__webpack_require__(89),hiddenKeys=__webpack_require__(71),WeakMap=global.WeakMap;if(NATIVE_WEAK_MAP){var store=new WeakMap,wmget=store.get,wmhas=store.has,wmset=store.set;set=function(it,metadata){return wmset.call(store,it,metadata),metadata},get=function(it){return wmget.call(store,it)||{}},has=function(it){return wmhas.call(store,it)}}else{var STATE=sharedKey("state");hiddenKeys[STATE]=!0,set=function(it,metadata){return createNonEnumerableProperty(it,STATE,metadata),metadata},get=function(it){return objectHas(it,STATE)?it[STATE]:{}},has=function(it){return objectHas(it,STATE)}}module.exports={set:set,get:get,has:has,enforce:function(it){return has(it)?get(it):set(it,{})},getterFor:function(TYPE){return function(it){var state;if(!isObject(it)||(state=get(it)).type!==TYPE)throw TypeError("Incompatible receiver, "+TYPE+" required");return state}}}},function(module,exports,__webpack_require__){"use strict";(function(module){__webpack_require__(14),__webpack_require__(2),__webpack_require__(26),__webpack_require__(15),Object.defineProperty(exports,"__esModule",{value:!0});var _constants=__webpack_require__(268);Object.keys(_constants).forEach((function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _constants[key]}})}));var _models=__webpack_require__(589);Object.keys(_models).forEach((function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _models[key]}})}));var _preview=__webpack_require__(596);Object.keys(_preview).forEach((function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _preview[key]}})})),module&&module.hot&&module.hot.decline&&module.hot.decline()}).call(this,__webpack_require__(77)(module))},function(module,exports,__webpack_require__){var defineProperty=__webpack_require__(19).f,has=__webpack_require__(18),TO_STRING_TAG=__webpack_require__(8)("toStringTag");module.exports=function(it,TAG,STATIC){it&&!has(it=STATIC?it:it.prototype,TO_STRING_TAG)&&defineProperty(it,TO_STRING_TAG,{configurable:!0,value:TAG})}},function(module,exports,__webpack_require__){var bind=__webpack_require__(74),IndexedObject=__webpack_require__(88),toObject=__webpack_require__(32),toLength=__webpack_require__(31),arraySpeciesCreate=__webpack_require__(209),push=[].push,createMethod=function(TYPE){var IS_MAP=1==TYPE,IS_FILTER=2==TYPE,IS_SOME=3==TYPE,IS_EVERY=4==TYPE,IS_FIND_INDEX=6==TYPE,NO_HOLES=5==TYPE||IS_FIND_INDEX;return function($this,callbackfn,that,specificCreate){for(var value,result,O=toObject($this),self=IndexedObject(O),boundFunction=bind(callbackfn,that,3),length=toLength(self.length),index=0,create=specificCreate||arraySpeciesCreate,target=IS_MAP?create($this,length):IS_FILTER?create($this,0):void 0;length>index;index++)if((NO_HOLES||index in self)&&(result=boundFunction(value=self[index],index,O),TYPE))if(IS_MAP)target[index]=result;else if(result)switch(TYPE){case 3:return!0;case 5:return value;case 6:return index;case 2:push.call(target,value)}else if(IS_EVERY)return!1;return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:target}};module.exports={forEach:createMethod(0),map:createMethod(1),filter:createMethod(2),some:createMethod(3),every:createMethod(4),find:createMethod(5),findIndex:createMethod(6)}},function(module,exports){module.exports=function(it){if("function"!=typeof it)throw TypeError(String(it)+" is not a function");return it}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(3),exec=__webpack_require__(106);$({target:"RegExp",proto:!0,forced:/./.exec!==exec},{exec:exec})},function(module,exports){var isArray=Array.isArray;module.exports=isArray},function(module,exports){module.exports=function isObjectLike(value){return null!=value&&"object"==typeof value}},function(module,exports,__webpack_require__){var baseIsNative=__webpack_require__(466),getValue=__webpack_require__(469);module.exports=function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:void 0}},function(module,exports,__webpack_require__){"use strict";(function(module){__webpack_require__(2),Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"storiesOf",{enumerable:!0,get:function get(){return _preview.storiesOf}}),Object.defineProperty(exports,"setAddon",{enumerable:!0,get:function get(){return _preview.setAddon}}),Object.defineProperty(exports,"addDecorator",{enumerable:!0,get:function get(){return _preview.addDecorator}}),Object.defineProperty(exports,"DecoratorFn",{enumerable:!0,get:function get(){return _preview.DecoratorFn}}),Object.defineProperty(exports,"addParameters",{enumerable:!0,get:function get(){return _preview.addParameters}}),Object.defineProperty(exports,"configure",{enumerable:!0,get:function get(){return _preview.configure}}),Object.defineProperty(exports,"getStorybook",{enumerable:!0,get:function get(){return _preview.getStorybook}}),Object.defineProperty(exports,"raw",{enumerable:!0,get:function get(){return _preview.raw}}),Object.defineProperty(exports,"forceReRender",{enumerable:!0,get:function get(){return _preview.forceReRender}});var _preview=__webpack_require__(402);module&&module.hot&&module.hot.decline&&module.hot.decline()}).call(this,__webpack_require__(77)(module))},,function(module,exports,__webpack_require__){"use strict";var trimStart=__webpack_require__(339),trimEnd=__webpack_require__(341),inspect=__webpack_require__(130),ES2018=__webpack_require__(135),assign=__webpack_require__(65),MAX_SAFE_INTEGER=__webpack_require__(184),$TypeError=__webpack_require__(10)("%TypeError%"),ES2019=assign(assign({},ES2018),{AddEntriesFromIterable:function AddEntriesFromIterable(target,iterable,adder){if(!this.IsCallable(adder))throw new $TypeError("Assertion failed: `adder` is not callable");if(null==iterable)throw new $TypeError("Assertion failed: `iterable` is present, and not nullish");for(var iteratorRecord=this.GetIterator(iterable);;){var next=this.IteratorStep(iteratorRecord);if(!next)return target;var nextItem=this.IteratorValue(next);if("Object"!==this.Type(nextItem)){var error=new $TypeError("iterator next must return an Object, got "+inspect(nextItem));return this.IteratorClose(iteratorRecord,(function(){throw error}))}try{var k=this.Get(nextItem,"0"),v=this.Get(nextItem,"1");this.Call(adder,target,[k,v])}catch(e){return this.IteratorClose(iteratorRecord,(function(){throw e}))}}},FlattenIntoArray:function FlattenIntoArray(target,source,sourceLen,start,depth){var mapperFunction;arguments.length>5&&(mapperFunction=arguments[5]);for(var targetIndex=start,sourceIndex=0;sourceIndex<sourceLen;){var P=this.ToString(sourceIndex),exists=this.HasProperty(source,P);if(!0===exists){var element=this.Get(source,P);if(void 0!==mapperFunction){if(arguments.length<=6)throw new $TypeError("Assertion failed: thisArg is required when mapperFunction is provided");element=this.Call(mapperFunction,arguments[6],[element,sourceIndex,source])}var shouldFlatten=!1;if(depth>0&&(shouldFlatten=this.IsArray(element)),shouldFlatten){var elementLen=this.ToLength(this.Get(element,"length"));targetIndex=this.FlattenIntoArray(target,element,elementLen,targetIndex,depth-1)}else{if(targetIndex>=MAX_SAFE_INTEGER)throw new $TypeError("index too large");this.CreateDataPropertyOrThrow(target,this.ToString(targetIndex),element),targetIndex+=1}}sourceIndex+=1}return targetIndex},TrimString:function TrimString(string,where){var T,str=this.RequireObjectCoercible(string),S=this.ToString(str);if("start"===where)T=trimStart(S);else if("end"===where)T=trimEnd(S);else{if("start+end"!==where)throw new $TypeError('Assertion failed: invalid `where` value; must be "start", "end", or "start+end"');T=trimStart(trimEnd(S))}return T}});module.exports=ES2019},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(12),propertyIsEnumerableModule=__webpack_require__(87),createPropertyDescriptor=__webpack_require__(67),toIndexedObject=__webpack_require__(37),toPrimitive=__webpack_require__(68),has=__webpack_require__(18),IE8_DOM_DEFINE=__webpack_require__(203),nativeGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;exports.f=DESCRIPTORS?nativeGetOwnPropertyDescriptor:function getOwnPropertyDescriptor(O,P){if(O=toIndexedObject(O),P=toPrimitive(P,!0),IE8_DOM_DEFINE)try{return nativeGetOwnPropertyDescriptor(O,P)}catch(error){}if(has(O,P))return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O,P),O[P])}},function(module,exports,__webpack_require__){var path=__webpack_require__(139),global=__webpack_require__(5),aFunction=function(variable){return"function"==typeof variable?variable:void 0};module.exports=function(namespace,method){return arguments.length<2?aFunction(path[namespace])||aFunction(global[namespace]):path[namespace]&&path[namespace][method]||global[namespace]&&global[namespace][method]}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(13),defineProperties=__webpack_require__(212),enumBugKeys=__webpack_require__(141),hiddenKeys=__webpack_require__(71),html=__webpack_require__(213),documentCreateElement=__webpack_require__(137),IE_PROTO=__webpack_require__(89)("IE_PROTO"),Empty=function(){},createDict=function(){var iframeDocument,iframe=documentCreateElement("iframe"),length=enumBugKeys.length;for(iframe.style.display="none",html.appendChild(iframe),iframe.src=String("javascript:"),(iframeDocument=iframe.contentWindow.document).open(),iframeDocument.write("<script>document.F=Object<\/script>"),iframeDocument.close(),createDict=iframeDocument.F;length--;)delete createDict.prototype[enumBugKeys[length]];return createDict()};module.exports=Object.create||function create(O,Properties){var result;return null!==O?(Empty.prototype=anObject(O),result=new Empty,Empty.prototype=null,result[IE_PROTO]=O):result=createDict(),void 0===Properties?result:defineProperties(result,Properties)},hiddenKeys[IE_PROTO]=!0},function(module,exports,__webpack_require__){var $=__webpack_require__(3),from=__webpack_require__(408);$({target:"Array",stat:!0,forced:!__webpack_require__(151)((function(iterable){Array.from(iterable)}))},{from:from})},function(module,exports,__webpack_require__){var redefine=__webpack_require__(30),DatePrototype=Date.prototype,nativeDateToString=DatePrototype.toString,getTime=DatePrototype.getTime;new Date(NaN)+""!="Invalid Date"&&redefine(DatePrototype,"toString",(function toString(){var value=getTime.call(this);return value==value?nativeDateToString.call(this):"Invalid Date"}))},function(module,exports,__webpack_require__){"use strict";var redefine=__webpack_require__(30),anObject=__webpack_require__(13),fails=__webpack_require__(7),flags=__webpack_require__(223),RegExpPrototype=RegExp.prototype,nativeToString=RegExpPrototype.toString,NOT_GENERIC=fails((function(){return"/a/b"!=nativeToString.call({source:"a",flags:"b"})})),INCORRECT_NAME="toString"!=nativeToString.name;(NOT_GENERIC||INCORRECT_NAME)&&redefine(RegExp.prototype,"toString",(function toString(){var R=anObject(this),p=String(R.source),rf=R.flags;return"/"+p+"/"+String(void 0===rf&&R instanceof RegExp&&!("flags"in RegExpPrototype)?flags.call(R):rf)}),{unsafe:!0})},function(module,exports,__webpack_require__){"use strict";(function(global){__webpack_require__(28),__webpack_require__(2),Object.defineProperty(exports,"__esModule",{value:!0}),exports.logger=void 0;var console=global.console,logger={debug:function debug(message){for(var _len=arguments.length,rest=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)rest[_key-1]=arguments[_key];return console.debug.apply(console,[message].concat(rest))},log:function log(message){for(var _len2=arguments.length,rest=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)rest[_key2-1]=arguments[_key2];return console.log.apply(console,[message].concat(rest))},info:function info(message){for(var _len3=arguments.length,rest=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)rest[_key3-1]=arguments[_key3];return console.info.apply(console,[message].concat(rest))},warn:function warn(message){for(var _len4=arguments.length,rest=new Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++)rest[_key4-1]=arguments[_key4];return console.warn.apply(console,[message].concat(rest))},error:function error(message){for(var _len5=arguments.length,rest=new Array(_len5>1?_len5-1:0),_key5=1;_key5<_len5;_key5++)rest[_key5-1]=arguments[_key5];return console.error.apply(console,[message].concat(rest))}};exports.logger=logger}).call(this,__webpack_require__(22))},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(110),getRawTag=__webpack_require__(441),objectToString=__webpack_require__(442),nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(10),has=__webpack_require__(43),$assign=GetIntrinsic("%Object%").assign;module.exports=function assign(target,source){if($assign)return $assign(target,source);for(var key in source)has(source,key)&&(target[key]=source[key]);return target}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(195)},function(module,exports){module.exports=function(bitmap,value){return{enumerable:!(1&bitmap),configurable:!(2&bitmap),writable:!(4&bitmap),value:value}}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(9);module.exports=function(input,PREFERRED_STRING){if(!isObject(input))return input;var fn,val;if(PREFERRED_STRING&&"function"==typeof(fn=input.toString)&&!isObject(val=fn.call(input)))return val;if("function"==typeof(fn=input.valueOf)&&!isObject(val=fn.call(input)))return val;if(!PREFERRED_STRING&&"function"==typeof(fn=input.toString)&&!isObject(val=fn.call(input)))return val;throw TypeError("Can't convert object to primitive value")}},function(module,exports,__webpack_require__){var IS_PURE=__webpack_require__(70),store=__webpack_require__(375);(module.exports=function(key,value){return store[key]||(store[key]=void 0!==value?value:{})})("versions",[]).push({version:"3.4.0",mode:IS_PURE?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(module,exports){module.exports=!1},function(module,exports){module.exports={}},function(module,exports,__webpack_require__){var classof=__webpack_require__(38);module.exports=Array.isArray||function isArray(arg){return"Array"==classof(arg)}},function(module,exports,__webpack_require__){var internalObjectKeys=__webpack_require__(207),enumBugKeys=__webpack_require__(141);module.exports=Object.keys||function keys(O){return internalObjectKeys(O,enumBugKeys)}},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(49);module.exports=function(fn,that,length){if(aFunction(fn),void 0===that)return fn;switch(length){case 0:return function(){return fn.call(that)};case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},function(module,exports,__webpack_require__){"use strict";var fails=__webpack_require__(7);module.exports=function(METHOD_NAME,argument){var method=[][METHOD_NAME];return!method||!fails((function(){method.call(null,argument||function(){throw 1},1)}))}},function(module,exports){module.exports={}},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(3),$map=__webpack_require__(48).map;$({target:"Array",proto:!0,forced:!__webpack_require__(94)("map")},{map:function map(callbackfn){return $map(this,callbackfn,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){var $=__webpack_require__(3),fails=__webpack_require__(7),toObject=__webpack_require__(32),nativeGetPrototypeOf=__webpack_require__(148),CORRECT_PROTOTYPE_GETTER=__webpack_require__(217);$({target:"Object",stat:!0,forced:fails((function(){nativeGetPrototypeOf(1)})),sham:!CORRECT_PROTOTYPE_GETTER},{getPrototypeOf:function getPrototypeOf(it){return nativeGetPrototypeOf(toObject(it))}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(14),__webpack_require__(2),__webpack_require__(26),__webpack_require__(15),Object.defineProperty(exports,"__esModule",{value:!0});var _exportNames={};exports.default=void 0;var _index=__webpack_require__(411);Object.keys(_index).forEach((function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _index[key]}}))}));var _makeDecorator=__webpack_require__(417);Object.keys(_makeDecorator).forEach((function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _makeDecorator[key]}}))}));var _types=__webpack_require__(228);Object.keys(_types).forEach((function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _types[key]}}))}));var _storybookChannelMock=__webpack_require__(418);Object.keys(_storybookChannelMock).forEach((function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _storybookChannelMock[key]}}))}));var _hooks=__webpack_require__(422);Object.keys(_hooks).forEach((function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _hooks[key]}}))}));var _default=_index.addons;exports.default=_default},function(module,exports,__webpack_require__){var hiddenKeys=__webpack_require__(71),isObject=__webpack_require__(9),has=__webpack_require__(18),defineProperty=__webpack_require__(19).f,uid=__webpack_require__(90),FREEZING=__webpack_require__(233),METADATA=uid("meta"),id=0,isExtensible=Object.isExtensible||function(){return!0},setMetadata=function(it){defineProperty(it,METADATA,{value:{objectID:"O"+ ++id,weakData:{}}})},meta=module.exports={REQUIRED:!1,fastKey:function(it,create){if(!isObject(it))return"symbol"==typeof it?it:("string"==typeof it?"S":"P")+it;if(!has(it,METADATA)){if(!isExtensible(it))return"F";if(!create)return"E";setMetadata(it)}return it[METADATA].objectID},getWeakData:function(it,create){if(!has(it,METADATA)){if(!isExtensible(it))return!0;if(!create)return!1;setMetadata(it)}return it[METADATA].weakData},onFreeze:function(it){return FREEZING&&meta.REQUIRED&&isExtensible(it)&&!has(it,METADATA)&&setMetadata(it),it}};hiddenKeys[METADATA]=!0},function(module,exports,__webpack_require__){"use strict";var events;__webpack_require__(2),Object.defineProperty(exports,"__esModule",{value:!0}),exports.DOCS_RENDERED=exports.STORY_THREW_EXCEPTION=exports.STORY_CHANGED=exports.STORY_ERRORED=exports.STORY_MISSING=exports.STORY_RENDERED=exports.STORY_RENDER=exports.STORY_ADDED=exports.STORY_INIT=exports.REGISTER_SUBSCRIPTION=exports.FORCE_RE_RENDER=exports.PREVIEW_KEYDOWN=exports.SELECT_STORY=exports.STORIES_CONFIGURED=exports.SET_STORIES=exports.GET_STORIES=exports.SET_CURRENT_STORY=exports.GET_CURRENT_STORY=exports.CHANNEL_CREATED=exports.default=void 0,function(events){events.CHANNEL_CREATED="channelCreated",events.GET_CURRENT_STORY="getCurrentStory",events.SET_CURRENT_STORY="setCurrentStory",events.GET_STORIES="getStories",events.SET_STORIES="setStories",events.STORIES_CONFIGURED="storiesConfigured",events.SELECT_STORY="selectStory",events.PREVIEW_KEYDOWN="previewKeydown",events.STORY_ADDED="storyAdded",events.STORY_CHANGED="storyChanged",events.STORY_UNCHANGED="storyUnchanged",events.FORCE_RE_RENDER="forceReRender",events.REGISTER_SUBSCRIPTION="registerSubscription",events.STORY_INIT="storyInit",events.STORY_RENDER="storyRender",events.STORY_RENDERED="storyRendered",events.STORY_MISSING="storyMissing",events.STORY_ERRORED="storyErrored",events.STORY_THREW_EXCEPTION="storyThrewException",events.DOCS_RENDERED="docsRendered"}(events||(events={}));var _default=events;exports.default=_default;var CHANNEL_CREATED=events.CHANNEL_CREATED,GET_CURRENT_STORY=events.GET_CURRENT_STORY,SET_CURRENT_STORY=events.SET_CURRENT_STORY,GET_STORIES=events.GET_STORIES,SET_STORIES=events.SET_STORIES,STORIES_CONFIGURED=events.STORIES_CONFIGURED,SELECT_STORY=events.SELECT_STORY,PREVIEW_KEYDOWN=events.PREVIEW_KEYDOWN,FORCE_RE_RENDER=events.FORCE_RE_RENDER,REGISTER_SUBSCRIPTION=events.REGISTER_SUBSCRIPTION,STORY_INIT=events.STORY_INIT,STORY_ADDED=events.STORY_ADDED,STORY_RENDER=events.STORY_RENDER,STORY_RENDERED=events.STORY_RENDERED,STORY_MISSING=events.STORY_MISSING,STORY_ERRORED=events.STORY_ERRORED,STORY_CHANGED=events.STORY_CHANGED,STORY_THREW_EXCEPTION=events.STORY_THREW_EXCEPTION,DOCS_RENDERED=events.DOCS_RENDERED;exports.DOCS_RENDERED=DOCS_RENDERED,exports.STORY_THREW_EXCEPTION=STORY_THREW_EXCEPTION,exports.STORY_CHANGED=STORY_CHANGED,exports.STORY_ERRORED=STORY_ERRORED,exports.STORY_MISSING=STORY_MISSING,exports.STORY_RENDERED=STORY_RENDERED,exports.STORY_RENDER=STORY_RENDER,exports.STORY_ADDED=STORY_ADDED,exports.STORY_INIT=STORY_INIT,exports.REGISTER_SUBSCRIPTION=REGISTER_SUBSCRIPTION,exports.FORCE_RE_RENDER=FORCE_RE_RENDER,exports.PREVIEW_KEYDOWN=PREVIEW_KEYDOWN,exports.SELECT_STORY=SELECT_STORY,exports.STORIES_CONFIGURED=STORIES_CONFIGURED,exports.SET_STORIES=SET_STORIES,exports.GET_STORIES=GET_STORIES,exports.SET_CURRENT_STORY=SET_CURRENT_STORY,exports.GET_CURRENT_STORY=GET_CURRENT_STORY,exports.CHANNEL_CREATED=CHANNEL_CREATED},function(module,exports,__webpack_require__){"use strict";var fixRegExpWellKnownSymbolLogic=__webpack_require__(107),anObject=__webpack_require__(13),toLength=__webpack_require__(31),requireObjectCoercible=__webpack_require__(35),advanceStringIndex=__webpack_require__(157),regExpExec=__webpack_require__(108);fixRegExpWellKnownSymbolLogic("match",1,(function(MATCH,nativeMatch,maybeCallNative){return[function match(regexp){var O=requireObjectCoercible(this),matcher=null==regexp?void 0:regexp[MATCH];return void 0!==matcher?matcher.call(regexp,O):new RegExp(regexp)[MATCH](String(O))},function(regexp){var res=maybeCallNative(nativeMatch,regexp,this);if(res.done)return res.value;var rx=anObject(regexp),S=String(this);if(!rx.global)return regExpExec(rx,S);var fullUnicode=rx.unicode;rx.lastIndex=0;for(var result,A=[],n=0;null!==(result=regExpExec(rx,S));){var matchStr=String(result[0]);A[n]=matchStr,""===matchStr&&(rx.lastIndex=advanceStringIndex(S,toLength(rx.lastIndex),fullUnicode)),n++}return 0===n?null:A}]}))},function(module,exports){module.exports=function eq(value,other){return value===other||value!=value&&other!=other}},function(module,exports,__webpack_require__){"use strict";var fnToStr=Function.prototype.toString,constructorRegex=/^\s*class\b/,isES6ClassFn=function isES6ClassFunction(value){try{var fnStr=fnToStr.call(value);return constructorRegex.test(fnStr)}catch(e){return!1}},toStr=Object.prototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;module.exports=function isCallable(value){if(!value)return!1;if("function"!=typeof value&&"object"!=typeof value)return!1;if("function"==typeof value&&!value.prototype)return!0;if(hasToStringTag)return function tryFunctionToStr(value){try{return!isES6ClassFn(value)&&(fnToStr.call(value),!0)}catch(e){return!1}}(value);if(isES6ClassFn(value))return!1;var strClass=toStr.call(value);return"[object Function]"===strClass||"[object GeneratorFunction]"===strClass}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(23),$Function=__webpack_require__(10)("%Function%"),$apply=$Function.apply,$call=$Function.call;module.exports=function callBind(){return bind.apply($call,arguments)},module.exports.apply=function applyBind(){return bind.apply($apply,arguments)}},function(module,exports,__webpack_require__){"use strict";var nativePropertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor&&!nativePropertyIsEnumerable.call({1:2},1);exports.f=NASHORN_BUG?function propertyIsEnumerable(V){var descriptor=getOwnPropertyDescriptor(this,V);return!!descriptor&&descriptor.enumerable}:nativePropertyIsEnumerable},function(module,exports,__webpack_require__){var fails=__webpack_require__(7),classof=__webpack_require__(38),split="".split;module.exports=fails((function(){return!Object("z").propertyIsEnumerable(0)}))?function(it){return"String"==classof(it)?split.call(it,""):Object(it)}:Object},function(module,exports,__webpack_require__){var shared=__webpack_require__(69),uid=__webpack_require__(90),keys=shared("keys");module.exports=function(key){return keys[key]||(keys[key]=uid(key))}},function(module,exports){var id=0,postfix=Math.random();module.exports=function(key){return"Symbol("+String(void 0===key?"":key)+")_"+(++id+postfix).toString(36)}},function(module,exports,__webpack_require__){var internalObjectKeys=__webpack_require__(207),hiddenKeys=__webpack_require__(141).concat("length","prototype");exports.f=Object.getOwnPropertyNames||function getOwnPropertyNames(O){return internalObjectKeys(O,hiddenKeys)}},function(module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(argument){return isNaN(argument=+argument)?0:(argument>0?floor:ceil)(argument)}},function(module,exports,__webpack_require__){var fails=__webpack_require__(7),replacement=/#|\.prototype\./,isForced=function(feature,detection){var value=data[normalize(feature)];return value==POLYFILL||value!=NATIVE&&("function"==typeof detection?fails(detection):!!detection)},normalize=isForced.normalize=function(string){return String(string).replace(replacement,".").toLowerCase()},data=isForced.data={},NATIVE=isForced.NATIVE="N",POLYFILL=isForced.POLYFILL="P";module.exports=isForced},function(module,exports,__webpack_require__){var fails=__webpack_require__(7),wellKnownSymbol=__webpack_require__(8),V8_VERSION=__webpack_require__(144),SPECIES=wellKnownSymbol("species");module.exports=function(METHOD_NAME){return V8_VERSION>=51||!fails((function(){var array=[];return(array.constructor={})[SPECIES]=function(){return{foo:1}},1!==array[METHOD_NAME](Boolean).foo}))}},function(module,exports,__webpack_require__){var getBuiltIn=__webpack_require__(58);module.exports=getBuiltIn("navigator","userAgent")||""},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(3),$find=__webpack_require__(48).find,addToUnscopables=__webpack_require__(146),SKIPS_HOLES=!0;"find"in[]&&Array(1).find((function(){SKIPS_HOLES=!1})),$({target:"Array",proto:!0,forced:SKIPS_HOLES},{find:function find(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables("find")},function(module,exports,__webpack_require__){var $=__webpack_require__(3),$entries=__webpack_require__(222).entries;$({target:"Object",stat:!0},{entries:function entries(O){return $entries(O)}})},function(module,exports,__webpack_require__){"use strict";var Internal,OwnPromiseCapability,PromiseWrapper,nativeThen,$=__webpack_require__(3),IS_PURE=__webpack_require__(70),global=__webpack_require__(5),getBuiltIn=__webpack_require__(58),NativePromise=__webpack_require__(412),redefine=__webpack_require__(30),redefineAll=__webpack_require__(99),setToStringTag=__webpack_require__(47),setSpecies=__webpack_require__(225),isObject=__webpack_require__(9),aFunction=__webpack_require__(49),anInstance=__webpack_require__(100),classof=__webpack_require__(38),iterate=__webpack_require__(101),checkCorrectnessOfIteration=__webpack_require__(151),speciesConstructor=__webpack_require__(226),task=__webpack_require__(155).set,microtask=__webpack_require__(413),promiseResolve=__webpack_require__(414),hostReportErrors=__webpack_require__(415),newPromiseCapabilityModule=__webpack_require__(227),perform=__webpack_require__(416),InternalStateModule=__webpack_require__(45),isForced=__webpack_require__(93),wellKnownSymbol=__webpack_require__(8),V8_VERSION=__webpack_require__(144),SPECIES=wellKnownSymbol("species"),PROMISE="Promise",getInternalState=InternalStateModule.get,setInternalState=InternalStateModule.set,getInternalPromiseState=InternalStateModule.getterFor(PROMISE),PromiseConstructor=NativePromise,TypeError=global.TypeError,document=global.document,process=global.process,$fetch=getBuiltIn("fetch"),newPromiseCapability=newPromiseCapabilityModule.f,newGenericPromiseCapability=newPromiseCapability,IS_NODE="process"==classof(process),DISPATCH_EVENT=!!(document&&document.createEvent&&global.dispatchEvent),FORCED=isForced(PROMISE,(function(){if(66===V8_VERSION)return!0;if(!IS_NODE&&"function"!=typeof PromiseRejectionEvent)return!0;if(IS_PURE&&!PromiseConstructor.prototype.finally)return!0;if(V8_VERSION>=51&&/native code/.test(PromiseConstructor))return!1;var promise=PromiseConstructor.resolve(1),FakePromise=function(exec){exec((function(){}),(function(){}))};return(promise.constructor={})[SPECIES]=FakePromise,!(promise.then((function(){}))instanceof FakePromise)})),INCORRECT_ITERATION=FORCED||!checkCorrectnessOfIteration((function(iterable){PromiseConstructor.all(iterable).catch((function(){}))})),isThenable=function(it){var then;return!(!isObject(it)||"function"!=typeof(then=it.then))&&then},notify=function(promise,state,isReject){if(!state.notified){state.notified=!0;var chain=state.reactions;microtask((function(){for(var value=state.value,ok=1==state.state,index=0;chain.length>index;){var result,then,exited,reaction=chain[index++],handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,domain=reaction.domain;try{handler?(ok||(2===state.rejection&&onHandleUnhandled(promise,state),state.rejection=1),!0===handler?result=value:(domain&&domain.enter(),result=handler(value),domain&&(domain.exit(),exited=!0)),result===reaction.promise?reject(TypeError("Promise-chain cycle")):(then=isThenable(result))?then.call(result,resolve,reject):resolve(result)):reject(value)}catch(error){domain&&!exited&&domain.exit(),reject(error)}}state.reactions=[],state.notified=!1,isReject&&!state.rejection&&onUnhandled(promise,state)}))}},dispatchEvent=function(name,promise,reason){var event,handler;DISPATCH_EVENT?((event=document.createEvent("Event")).promise=promise,event.reason=reason,event.initEvent(name,!1,!0),global.dispatchEvent(event)):event={promise:promise,reason:reason},(handler=global["on"+name])?handler(event):"unhandledrejection"===name&&hostReportErrors("Unhandled promise rejection",reason)},onUnhandled=function(promise,state){task.call(global,(function(){var result,value=state.value;if(isUnhandled(state)&&(result=perform((function(){IS_NODE?process.emit("unhandledRejection",value,promise):dispatchEvent("unhandledrejection",promise,value)})),state.rejection=IS_NODE||isUnhandled(state)?2:1,result.error))throw result.value}))},isUnhandled=function(state){return 1!==state.rejection&&!state.parent},onHandleUnhandled=function(promise,state){task.call(global,(function(){IS_NODE?process.emit("rejectionHandled",promise):dispatchEvent("rejectionhandled",promise,state.value)}))},bind=function(fn,promise,state,unwrap){return function(value){fn(promise,state,value,unwrap)}},internalReject=function(promise,state,value,unwrap){state.done||(state.done=!0,unwrap&&(state=unwrap),state.value=value,state.state=2,notify(promise,state,!0))},internalResolve=function(promise,state,value,unwrap){if(!state.done){state.done=!0,unwrap&&(state=unwrap);try{if(promise===value)throw TypeError("Promise can't be resolved itself");var then=isThenable(value);then?microtask((function(){var wrapper={done:!1};try{then.call(value,bind(internalResolve,promise,wrapper,state),bind(internalReject,promise,wrapper,state))}catch(error){internalReject(promise,wrapper,error,state)}})):(state.value=value,state.state=1,notify(promise,state,!1))}catch(error){internalReject(promise,{done:!1},error,state)}}};FORCED&&(PromiseConstructor=function Promise(executor){anInstance(this,PromiseConstructor,PROMISE),aFunction(executor),Internal.call(this);var state=getInternalState(this);try{executor(bind(internalResolve,this,state),bind(internalReject,this,state))}catch(error){internalReject(this,state,error)}},(Internal=function Promise(executor){setInternalState(this,{type:PROMISE,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=redefineAll(PromiseConstructor.prototype,{then:function then(onFulfilled,onRejected){var state=getInternalPromiseState(this),reaction=newPromiseCapability(speciesConstructor(this,PromiseConstructor));return reaction.ok="function"!=typeof onFulfilled||onFulfilled,reaction.fail="function"==typeof onRejected&&onRejected,reaction.domain=IS_NODE?process.domain:void 0,state.parent=!0,state.reactions.push(reaction),0!=state.state&&notify(this,state,!1),reaction.promise},catch:function(onRejected){return this.then(void 0,onRejected)}}),OwnPromiseCapability=function(){var promise=new Internal,state=getInternalState(promise);this.promise=promise,this.resolve=bind(internalResolve,promise,state),this.reject=bind(internalReject,promise,state)},newPromiseCapabilityModule.f=newPromiseCapability=function(C){return C===PromiseConstructor||C===PromiseWrapper?new OwnPromiseCapability(C):newGenericPromiseCapability(C)},IS_PURE||"function"!=typeof NativePromise||(nativeThen=NativePromise.prototype.then,redefine(NativePromise.prototype,"then",(function then(onFulfilled,onRejected){var that=this;return new PromiseConstructor((function(resolve,reject){nativeThen.call(that,resolve,reject)})).then(onFulfilled,onRejected)}),{unsafe:!0}),"function"==typeof $fetch&&$({global:!0,enumerable:!0,forced:!0},{fetch:function fetch(input){return promiseResolve(PromiseConstructor,$fetch.apply(global,arguments))}}))),$({global:!0,wrap:!0,forced:FORCED},{Promise:PromiseConstructor}),setToStringTag(PromiseConstructor,PROMISE,!1,!0),setSpecies(PROMISE),PromiseWrapper=getBuiltIn(PROMISE),$({target:PROMISE,stat:!0,forced:FORCED},{reject:function reject(r){var capability=newPromiseCapability(this);return capability.reject.call(void 0,r),capability.promise}}),$({target:PROMISE,stat:!0,forced:IS_PURE||FORCED},{resolve:function resolve(x){return promiseResolve(IS_PURE&&this===PromiseWrapper?PromiseConstructor:this,x)}}),$({target:PROMISE,stat:!0,forced:INCORRECT_ITERATION},{all:function all(iterable){var C=this,capability=newPromiseCapability(C),resolve=capability.resolve,reject=capability.reject,result=perform((function(){var $promiseResolve=aFunction(C.resolve),values=[],counter=0,remaining=1;iterate(iterable,(function(promise){var index=counter++,alreadyCalled=!1;values.push(void 0),remaining++,$promiseResolve.call(C,promise).then((function(value){alreadyCalled||(alreadyCalled=!0,values[index]=value,--remaining||resolve(values))}),reject)})),--remaining||resolve(values)}));return result.error&&reject(result.value),capability.promise},race:function race(iterable){var C=this,capability=newPromiseCapability(C),reject=capability.reject,result=perform((function(){var $promiseResolve=aFunction(C.resolve);iterate(iterable,(function(promise){$promiseResolve.call(C,promise).then(capability.resolve,reject)}))}));return result.error&&reject(result.value),capability.promise}})},function(module,exports,__webpack_require__){var redefine=__webpack_require__(30);module.exports=function(target,src,options){for(var key in src)redefine(target,key,src[key],options);return target}},function(module,exports){module.exports=function(it,Constructor,name){if(!(it instanceof Constructor))throw TypeError("Incorrect "+(name?name+" ":"")+"invocation");return it}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(13),isArrayIteratorMethod=__webpack_require__(220),toLength=__webpack_require__(31),bind=__webpack_require__(74),getIteratorMethod=__webpack_require__(221),callWithSafeIterationClosing=__webpack_require__(219),Result=function(stopped,result){this.stopped=stopped,this.result=result};(module.exports=function(iterable,fn,that,AS_ENTRIES,IS_ITERATOR){var iterator,iterFn,index,length,result,next,step,boundFunction=bind(fn,that,AS_ENTRIES?2:1);if(IS_ITERATOR)iterator=iterable;else{if("function"!=typeof(iterFn=getIteratorMethod(iterable)))throw TypeError("Target is not iterable");if(isArrayIteratorMethod(iterFn)){for(index=0,length=toLength(iterable.length);length>index;index++)if((result=AS_ENTRIES?boundFunction(anObject(step=iterable[index])[0],step[1]):boundFunction(iterable[index]))&&result instanceof Result)return result;return new Result(!1)}iterator=iterFn.call(iterable)}for(next=iterator.next;!(step=next.call(iterator)).done;)if("object"==typeof(result=callWithSafeIterationClosing(iterator,boundFunction,step.value,AS_ENTRIES))&&result&&result instanceof Result)return result;return new Result(!1)}).stop=function(result){return new Result(!0,result)}},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(12),defineProperty=__webpack_require__(19).f,FunctionPrototype=Function.prototype,FunctionPrototypeToString=FunctionPrototype.toString,nameRE=/^\s*function ([^ (]*)/;!DESCRIPTORS||"name"in FunctionPrototype||defineProperty(FunctionPrototype,"name",{configurable:!0,get:function(){try{return FunctionPrototypeToString.call(this).match(nameRE)[1]}catch(error){return""}}})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(3),$filter=__webpack_require__(48).filter;$({target:"Array",proto:!0,forced:!__webpack_require__(94)("filter")},{filter:function filter(callbackfn){return $filter(this,callbackfn,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){__webpack_require__(3)({target:"Function",proto:!0},{bind:__webpack_require__(424)})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(427)},function(module,exports,__webpack_require__){"use strict";var re1,re2,regexpFlags=__webpack_require__(223),nativeExec=RegExp.prototype.exec,nativeReplace=String.prototype.replace,patchedExec=nativeExec,UPDATES_LAST_INDEX_WRONG=(re1=/a/,re2=/b*/g,nativeExec.call(re1,"a"),nativeExec.call(re2,"a"),0!==re1.lastIndex||0!==re2.lastIndex),NPCG_INCLUDED=void 0!==/()??/.exec("")[1];(UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED)&&(patchedExec=function exec(str){var lastIndex,reCopy,match,i,re=this;return NPCG_INCLUDED&&(reCopy=new RegExp("^"+re.source+"$(?!\\s)",regexpFlags.call(re))),UPDATES_LAST_INDEX_WRONG&&(lastIndex=re.lastIndex),match=nativeExec.call(re,str),UPDATES_LAST_INDEX_WRONG&&match&&(re.lastIndex=re.global?match.index+match[0].length:lastIndex),NPCG_INCLUDED&&match&&match.length>1&&nativeReplace.call(match[0],reCopy,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(match[i]=void 0)})),match}),module.exports=patchedExec},function(module,exports,__webpack_require__){"use strict";var createNonEnumerableProperty=__webpack_require__(29),redefine=__webpack_require__(30),fails=__webpack_require__(7),wellKnownSymbol=__webpack_require__(8),regexpExec=__webpack_require__(106),SPECIES=wellKnownSymbol("species"),REPLACE_SUPPORTS_NAMED_GROUPS=!fails((function(){var re=/./;return re.exec=function(){var result=[];return result.groups={a:"7"},result},"7"!=="".replace(re,"$<a>")})),SPLIT_WORKS_WITH_OVERWRITTEN_EXEC=!fails((function(){var re=/(?:)/,originalExec=re.exec;re.exec=function(){return originalExec.apply(this,arguments)};var result="ab".split(re);return 2!==result.length||"a"!==result[0]||"b"!==result[1]}));module.exports=function(KEY,length,exec,sham){var SYMBOL=wellKnownSymbol(KEY),DELEGATES_TO_SYMBOL=!fails((function(){var O={};return O[SYMBOL]=function(){return 7},7!=""[KEY](O)})),DELEGATES_TO_EXEC=DELEGATES_TO_SYMBOL&&!fails((function(){var execCalled=!1,re=/a/;return"split"===KEY&&((re={}).constructor={},re.constructor[SPECIES]=function(){return re},re.flags="",re[SYMBOL]=/./[SYMBOL]),re.exec=function(){return execCalled=!0,null},re[SYMBOL](""),!execCalled}));if(!DELEGATES_TO_SYMBOL||!DELEGATES_TO_EXEC||"replace"===KEY&&!REPLACE_SUPPORTS_NAMED_GROUPS||"split"===KEY&&!SPLIT_WORKS_WITH_OVERWRITTEN_EXEC){var nativeRegExpMethod=/./[SYMBOL],methods=exec(SYMBOL,""[KEY],(function(nativeMethod,regexp,str,arg2,forceStringMethod){return regexp.exec===regexpExec?DELEGATES_TO_SYMBOL&&!forceStringMethod?{done:!0,value:nativeRegExpMethod.call(regexp,str,arg2)}:{done:!0,value:nativeMethod.call(str,regexp,arg2)}:{done:!1}})),stringMethod=methods[0],regexMethod=methods[1];redefine(String.prototype,KEY,stringMethod),redefine(RegExp.prototype,SYMBOL,2==length?function(string,arg){return regexMethod.call(string,this,arg)}:function(string){return regexMethod.call(string,this)}),sham&&createNonEnumerableProperty(RegExp.prototype[SYMBOL],"sham",!0)}}},function(module,exports,__webpack_require__){var classof=__webpack_require__(38),regexpExec=__webpack_require__(106);module.exports=function(R,S){var exec=R.exec;if("function"==typeof exec){var result=exec.call(R,S);if("object"!=typeof result)throw TypeError("RegExp exec method returned something other than an Object or null");return result}if("RegExp"!==classof(R))throw TypeError("RegExp#exec called on incompatible receiver");return regexpExec.call(R,S)}},function(module,exports,__webpack_require__){var baseToString=__webpack_require__(439);module.exports=function toString(value){return null==value?"":baseToString(value)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(33).Symbol;module.exports=Symbol},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(64),isObjectLike=__webpack_require__(52),symbolTag="[object Symbol]";module.exports=function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&baseGetTag(value)==symbolTag}},function(module,exports,__webpack_require__){var listCacheClear=__webpack_require__(456),listCacheDelete=__webpack_require__(457),listCacheGet=__webpack_require__(458),listCacheHas=__webpack_require__(459),listCacheSet=__webpack_require__(460);function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,module.exports=ListCache},function(module,exports,__webpack_require__){var eq=__webpack_require__(84);module.exports=function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(53)(Object,"create");module.exports=nativeCreate},function(module,exports,__webpack_require__){var isKeyable=__webpack_require__(478);module.exports=function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(163),isLength=__webpack_require__(252);module.exports=function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}},function(module,exports,__webpack_require__){__webpack_require__(3)({target:"Object",stat:!0,sham:!__webpack_require__(12)},{create:__webpack_require__(59)})},function(module,exports,__webpack_require__){__webpack_require__(3)({target:"Object",stat:!0},{setPrototypeOf:__webpack_require__(149)})},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){__webpack_require__.d(__webpack_exports__,"a",(function(){return json}));var vega_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);function json(data,format){const prop=format&&format.property?Object(vega_util__WEBPACK_IMPORTED_MODULE_0__.t)(format.property):vega_util__WEBPACK_IMPORTED_MODULE_0__.x;return Object(vega_util__WEBPACK_IMPORTED_MODULE_0__.F)(data)&&!function isBuffer(_){return!("function"!=typeof Buffer||!Object(vega_util__WEBPACK_IMPORTED_MODULE_0__.D)(Buffer.isBuffer))&&Buffer.isBuffer(_)}(data)?function parseJSON(data,format){return format&&format.copy?JSON.parse(JSON.stringify(data)):data}(prop(data)):prop(JSON.parse(data))}json.responseType="json"}).call(this,__webpack_require__(173).Buffer)},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){__webpack_require__.d(__webpack_exports__,"a",(function(){return json}));var vega_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);function json(data,format){const prop=format&&format.property?Object(vega_util__WEBPACK_IMPORTED_MODULE_0__.t)(format.property):vega_util__WEBPACK_IMPORTED_MODULE_0__.x;return Object(vega_util__WEBPACK_IMPORTED_MODULE_0__.F)(data)&&!function isBuffer(_){return!("function"!=typeof Buffer||!Object(vega_util__WEBPACK_IMPORTED_MODULE_0__.D)(Buffer.isBuffer))&&Buffer.isBuffer(_)}(data)?function parseJSON(data,format){return format&&format.copy?JSON.parse(JSON.stringify(data)):data}(prop(data)):prop(JSON.parse(data))}json.responseType="json"}).call(this,__webpack_require__(173).Buffer)},function(module,__webpack_exports__,__webpack_require__){"use strict";var core_namespaceObject={};__webpack_require__.r(core_namespaceObject),__webpack_require__.d(core_namespaceObject,"JsonPatchError",(function(){return JsonPatchError})),__webpack_require__.d(core_namespaceObject,"deepClone",(function(){return deepClone})),__webpack_require__.d(core_namespaceObject,"getValueByPointer",(function(){return getValueByPointer})),__webpack_require__.d(core_namespaceObject,"applyOperation",(function(){return applyOperation})),__webpack_require__.d(core_namespaceObject,"applyPatch",(function(){return applyPatch})),__webpack_require__.d(core_namespaceObject,"applyReducer",(function(){return applyReducer})),__webpack_require__.d(core_namespaceObject,"validator",(function(){return validator})),__webpack_require__.d(core_namespaceObject,"validate",(function(){return validate})),__webpack_require__.d(core_namespaceObject,"_areEquals",(function(){return _areEquals}));var duplex_namespaceObject={};__webpack_require__.r(duplex_namespaceObject),__webpack_require__.d(duplex_namespaceObject,"unobserve",(function(){return unobserve})),__webpack_require__.d(duplex_namespaceObject,"observe",(function(){return observe})),__webpack_require__.d(duplex_namespaceObject,"generate",(function(){return duplex_generate})),__webpack_require__.d(duplex_namespaceObject,"compare",(function(){return duplex_compare}));var vega_transforms_namespaceObject={};__webpack_require__.r(vega_transforms_namespaceObject),__webpack_require__.d(vega_transforms_namespaceObject,"aggregate",(function(){return Aggregate})),__webpack_require__.d(vega_transforms_namespaceObject,"bin",(function(){return Bin})),__webpack_require__.d(vega_transforms_namespaceObject,"collect",(function(){return Collect})),__webpack_require__.d(vega_transforms_namespaceObject,"compare",(function(){return Compare})),__webpack_require__.d(vega_transforms_namespaceObject,"countpattern",(function(){return CountPattern})),__webpack_require__.d(vega_transforms_namespaceObject,"cross",(function(){return Cross})),__webpack_require__.d(vega_transforms_namespaceObject,"density",(function(){return Density})),__webpack_require__.d(vega_transforms_namespaceObject,"dotbin",(function(){return DotBin})),__webpack_require__.d(vega_transforms_namespaceObject,"expression",(function(){return Expression})),__webpack_require__.d(vega_transforms_namespaceObject,"extent",(function(){return Extent})),__webpack_require__.d(vega_transforms_namespaceObject,"facet",(function(){return Facet})),__webpack_require__.d(vega_transforms_namespaceObject,"field",(function(){return Field})),__webpack_require__.d(vega_transforms_namespaceObject,"filter",(function(){return Filter})),__webpack_require__.d(vega_transforms_namespaceObject,"flatten",(function(){return Flatten})),__webpack_require__.d(vega_transforms_namespaceObject,"fold",(function(){return Fold})),__webpack_require__.d(vega_transforms_namespaceObject,"formula",(function(){return Formula})),__webpack_require__.d(vega_transforms_namespaceObject,"generate",(function(){return Generate})),__webpack_require__.d(vega_transforms_namespaceObject,"impute",(function(){return Impute})),__webpack_require__.d(vega_transforms_namespaceObject,"joinaggregate",(function(){return JoinAggregate})),__webpack_require__.d(vega_transforms_namespaceObject,"kde",(function(){return KDE})),__webpack_require__.d(vega_transforms_namespaceObject,"key",(function(){return Key})),__webpack_require__.d(vega_transforms_namespaceObject,"load",(function(){return Load})),__webpack_require__.d(vega_transforms_namespaceObject,"lookup",(function(){return Lookup})),__webpack_require__.d(vega_transforms_namespaceObject,"multiextent",(function(){return MultiExtent})),__webpack_require__.d(vega_transforms_namespaceObject,"multivalues",(function(){return MultiValues})),__webpack_require__.d(vega_transforms_namespaceObject,"params",(function(){return Params})),__webpack_require__.d(vega_transforms_namespaceObject,"pivot",(function(){return Pivot})),__webpack_require__.d(vega_transforms_namespaceObject,"prefacet",(function(){return PreFacet})),__webpack_require__.d(vega_transforms_namespaceObject,"project",(function(){return Project})),__webpack_require__.d(vega_transforms_namespaceObject,"proxy",(function(){return Proxy})),__webpack_require__.d(vega_transforms_namespaceObject,"quantile",(function(){return Quantile})),__webpack_require__.d(vega_transforms_namespaceObject,"relay",(function(){return Relay})),__webpack_require__.d(vega_transforms_namespaceObject,"sample",(function(){return Sample})),__webpack_require__.d(vega_transforms_namespaceObject,"sequence",(function(){return Sequence})),__webpack_require__.d(vega_transforms_namespaceObject,"sieve",(function(){return Sieve})),__webpack_require__.d(vega_transforms_namespaceObject,"subflow",(function(){return Subflow})),__webpack_require__.d(vega_transforms_namespaceObject,"timeunit",(function(){return TimeUnit})),__webpack_require__.d(vega_transforms_namespaceObject,"tupleindex",(function(){return TupleIndex})),__webpack_require__.d(vega_transforms_namespaceObject,"values",(function(){return Values})),__webpack_require__.d(vega_transforms_namespaceObject,"window",(function(){return Window}));var vega_view_transforms_namespaceObject={};__webpack_require__.r(vega_view_transforms_namespaceObject),__webpack_require__.d(vega_view_transforms_namespaceObject,"bound",(function(){return Bound})),__webpack_require__.d(vega_view_transforms_namespaceObject,"identifier",(function(){return Identifier})),__webpack_require__.d(vega_view_transforms_namespaceObject,"mark",(function(){return Mark})),__webpack_require__.d(vega_view_transforms_namespaceObject,"overlap",(function(){return Overlap})),__webpack_require__.d(vega_view_transforms_namespaceObject,"render",(function(){return Render})),__webpack_require__.d(vega_view_transforms_namespaceObject,"viewlayout",(function(){return ViewLayout}));var d3_interpolate_src_namespaceObject={};__webpack_require__.r(d3_interpolate_src_namespaceObject),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolate",(function(){return src_value})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateArray",(function(){return src_array})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateBasis",(function(){return src_basis})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateBasisClosed",(function(){return src_basisClosed})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateDate",(function(){return src_date})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateDiscrete",(function(){return discrete})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateHue",(function(){return src_hue})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateNumber",(function(){return src_number})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateObject",(function(){return src_object})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateRound",(function(){return src_round})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateString",(function(){return src_string})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateTransformCss",(function(){return interpolateTransformCss})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateTransformSvg",(function(){return interpolateTransformSvg})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateZoom",(function(){return zoom})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateRgb",(function(){return src_rgb})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateRgbBasis",(function(){return rgbBasis})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateRgbBasisClosed",(function(){return rgbBasisClosed})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateHsl",(function(){return src_hsl})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateHslLong",(function(){return hslLong})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateLab",(function(){return lab_lab})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateHcl",(function(){return src_hcl})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateHclLong",(function(){return hclLong})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateCubehelix",(function(){return src_cubehelix})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"interpolateCubehelixLong",(function(){return cubehelixLong})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"piecewise",(function(){return piecewise_piecewise})),__webpack_require__.d(d3_interpolate_src_namespaceObject,"quantize",(function(){return src_quantize}));var vega_encode_namespaceObject={};__webpack_require__.r(vega_encode_namespaceObject),__webpack_require__.d(vega_encode_namespaceObject,"axisticks",(function(){return AxisTicks})),__webpack_require__.d(vega_encode_namespaceObject,"datajoin",(function(){return DataJoin})),__webpack_require__.d(vega_encode_namespaceObject,"encode",(function(){return Encode})),__webpack_require__.d(vega_encode_namespaceObject,"legendentries",(function(){return LegendEntries})),__webpack_require__.d(vega_encode_namespaceObject,"linkpath",(function(){return LinkPath})),__webpack_require__.d(vega_encode_namespaceObject,"pie",(function(){return Pie})),__webpack_require__.d(vega_encode_namespaceObject,"scale",(function(){return Scale})),__webpack_require__.d(vega_encode_namespaceObject,"sortitems",(function(){return SortItems})),__webpack_require__.d(vega_encode_namespaceObject,"stack",(function(){return Stack})),__webpack_require__.d(vega_encode_namespaceObject,"validTicks",(function(){return validTicks}));var vega_geo_namespaceObject={};__webpack_require__.r(vega_geo_namespaceObject),__webpack_require__.d(vega_geo_namespaceObject,"contour",(function(){return Contour})),__webpack_require__.d(vega_geo_namespaceObject,"geojson",(function(){return GeoJSON})),__webpack_require__.d(vega_geo_namespaceObject,"geopath",(function(){return GeoPath})),__webpack_require__.d(vega_geo_namespaceObject,"geopoint",(function(){return GeoPoint})),__webpack_require__.d(vega_geo_namespaceObject,"geoshape",(function(){return GeoShape})),__webpack_require__.d(vega_geo_namespaceObject,"graticule",(function(){return Graticule})),__webpack_require__.d(vega_geo_namespaceObject,"heatmap",(function(){return Heatmap})),__webpack_require__.d(vega_geo_namespaceObject,"isocontour",(function(){return Isocontour})),__webpack_require__.d(vega_geo_namespaceObject,"kde2d",(function(){return KDE2D})),__webpack_require__.d(vega_geo_namespaceObject,"projection",(function(){return Projection}));var vega_force_namespaceObject={};__webpack_require__.r(vega_force_namespaceObject),__webpack_require__.d(vega_force_namespaceObject,"force",(function(){return Force}));var vega_hierarchy_namespaceObject={};__webpack_require__.r(vega_hierarchy_namespaceObject),__webpack_require__.d(vega_hierarchy_namespaceObject,"nest",(function(){return Nest})),__webpack_require__.d(vega_hierarchy_namespaceObject,"pack",(function(){return Pack})),__webpack_require__.d(vega_hierarchy_namespaceObject,"partition",(function(){return Partition})),__webpack_require__.d(vega_hierarchy_namespaceObject,"stratify",(function(){return Stratify})),__webpack_require__.d(vega_hierarchy_namespaceObject,"tree",(function(){return Tree})),__webpack_require__.d(vega_hierarchy_namespaceObject,"treelinks",(function(){return TreeLinks})),__webpack_require__.d(vega_hierarchy_namespaceObject,"treemap",(function(){return Treemap}));var vega_regression_namespaceObject={};__webpack_require__.r(vega_regression_namespaceObject),__webpack_require__.d(vega_regression_namespaceObject,"loess",(function(){return Loess})),__webpack_require__.d(vega_regression_namespaceObject,"regression",(function(){return Regression}));var vega_voronoi_namespaceObject={};__webpack_require__.r(vega_voronoi_namespaceObject),__webpack_require__.d(vega_voronoi_namespaceObject,"voronoi",(function(){return Voronoi_Voronoi}));var vega_wordcloud_namespaceObject={};__webpack_require__.r(vega_wordcloud_namespaceObject),__webpack_require__.d(vega_wordcloud_namespaceObject,"wordcloud",(function(){return Wordcloud}));var vega_crossfilter_namespaceObject={};__webpack_require__.r(vega_crossfilter_namespaceObject),__webpack_require__.d(vega_crossfilter_namespaceObject,"crossfilter",(function(){return CrossFilter})),__webpack_require__.d(vega_crossfilter_namespaceObject,"resolvefilter",(function(){return ResolveFilter}));var vega_namespaceObject={};__webpack_require__.r(vega_namespaceObject),__webpack_require__.d(vega_namespaceObject,"version",(function(){return vega_package.a})),__webpack_require__.d(vega_namespaceObject,"Dataflow",(function(){return Dataflow})),__webpack_require__.d(vega_namespaceObject,"EventStream",(function(){return EventStream})),__webpack_require__.d(vega_namespaceObject,"Parameters",(function(){return Parameters})),__webpack_require__.d(vega_namespaceObject,"Pulse",(function(){return Pulse})),__webpack_require__.d(vega_namespaceObject,"MultiPulse",(function(){return MultiPulse})),__webpack_require__.d(vega_namespaceObject,"Operator",(function(){return Operator})),__webpack_require__.d(vega_namespaceObject,"Transform",(function(){return Transform})),__webpack_require__.d(vega_namespaceObject,"changeset",(function(){return ChangeSet_changeset})),__webpack_require__.d(vega_namespaceObject,"ingest",(function(){return ingest})),__webpack_require__.d(vega_namespaceObject,"isTuple",(function(){return isTuple})),__webpack_require__.d(vega_namespaceObject,"definition",(function(){return register_definition})),__webpack_require__.d(vega_namespaceObject,"transform",(function(){return register_transform})),__webpack_require__.d(vega_namespaceObject,"transforms",(function(){return register_transforms})),__webpack_require__.d(vega_namespaceObject,"tupleid",(function(){return tupleid})),__webpack_require__.d(vega_namespaceObject,"scale",(function(){return scales_scale})),__webpack_require__.d(vega_namespaceObject,"scheme",(function(){return schemes_scheme})),__webpack_require__.d(vega_namespaceObject,"interpolate",(function(){return interpolate_interpolate})),__webpack_require__.d(vega_namespaceObject,"interpolateColors",(function(){return interpolateColors})),__webpack_require__.d(vega_namespaceObject,"interpolateRange",(function(){return interpolateRange})),__webpack_require__.d(vega_namespaceObject,"quantizeInterpolator",(function(){return quantizeInterpolator})),__webpack_require__.d(vega_namespaceObject,"projection",(function(){return projections_projection})),__webpack_require__.d(vega_namespaceObject,"View",(function(){return View})),__webpack_require__.d(vega_namespaceObject,"expressionFunction",(function(){return expressionFunction})),__webpack_require__.d(vega_namespaceObject,"formatLocale",(function(){return src_defaultLocale_defaultLocale})),__webpack_require__.d(vega_namespaceObject,"timeFormatLocale",(function(){return defaultLocale_defaultLocale})),__webpack_require__.d(vega_namespaceObject,"parse",(function(){return src_parse})),__webpack_require__.d(vega_namespaceObject,"runtime",(function(){return src_dataflow})),__webpack_require__.d(vega_namespaceObject,"runtimeContext",(function(){return src_context})),__webpack_require__.d(vega_namespaceObject,"bandwidthNRD",(function(){return src_bandwidth})),__webpack_require__.d(vega_namespaceObject,"bin",(function(){return src_bin})),__webpack_require__.d(vega_namespaceObject,"bootstrapCI",(function(){return bootstrapCI})),__webpack_require__.d(vega_namespaceObject,"dotbin",(function(){return dotbin})),__webpack_require__.d(vega_namespaceObject,"quantiles",(function(){return quantiles})),__webpack_require__.d(vega_namespaceObject,"quartiles",(function(){return quartiles})),__webpack_require__.d(vega_namespaceObject,"random",(function(){return random_random})),__webpack_require__.d(vega_namespaceObject,"setRandom",(function(){return setRandom})),__webpack_require__.d(vega_namespaceObject,"randomLCG",(function(){return lcg})),__webpack_require__.d(vega_namespaceObject,"randomInteger",(function(){return integer})),__webpack_require__.d(vega_namespaceObject,"randomKDE",(function(){return src_kde})),__webpack_require__.d(vega_namespaceObject,"randomLogNormal",(function(){return lognormal})),__webpack_require__.d(vega_namespaceObject,"sampleLogNormal",(function(){return sampleLogNormal})),__webpack_require__.d(vega_namespaceObject,"densityLogNormal",(function(){return densityLogNormal})),__webpack_require__.d(vega_namespaceObject,"cumulativeLogNormal",(function(){return cumulativeLogNormal})),__webpack_require__.d(vega_namespaceObject,"quantileLogNormal",(function(){return quantileLogNormal})),__webpack_require__.d(vega_namespaceObject,"randomMixture",(function(){return mixture})),__webpack_require__.d(vega_namespaceObject,"randomNormal",(function(){return src_normal})),__webpack_require__.d(vega_namespaceObject,"sampleNormal",(function(){return sampleNormal})),__webpack_require__.d(vega_namespaceObject,"densityNormal",(function(){return densityNormal})),__webpack_require__.d(vega_namespaceObject,"cumulativeNormal",(function(){return cumulativeNormal})),__webpack_require__.d(vega_namespaceObject,"quantileNormal",(function(){return quantileNormal})),__webpack_require__.d(vega_namespaceObject,"randomUniform",(function(){return uniform})),__webpack_require__.d(vega_namespaceObject,"sampleUniform",(function(){return sampleUniform})),__webpack_require__.d(vega_namespaceObject,"densityUniform",(function(){return densityUniform})),__webpack_require__.d(vega_namespaceObject,"cumulativeUniform",(function(){return cumulativeUniform})),__webpack_require__.d(vega_namespaceObject,"quantileUniform",(function(){return quantileUniform})),__webpack_require__.d(vega_namespaceObject,"regressionLinear",(function(){return linear})),__webpack_require__.d(vega_namespaceObject,"regressionLog",(function(){return log})),__webpack_require__.d(vega_namespaceObject,"regressionExp",(function(){return exp})),__webpack_require__.d(vega_namespaceObject,"regressionPow",(function(){return pow})),__webpack_require__.d(vega_namespaceObject,"regressionQuad",(function(){return regression_quad})),__webpack_require__.d(vega_namespaceObject,"regressionPoly",(function(){return poly})),__webpack_require__.d(vega_namespaceObject,"regressionLoess",(function(){return regression_loess})),__webpack_require__.d(vega_namespaceObject,"sampleCurve",(function(){return sampleCurve})),__webpack_require__.d(vega_namespaceObject,"timeUnits",(function(){return units_timeUnits})),__webpack_require__.d(vega_namespaceObject,"timeFloor",(function(){return timeFloor})),__webpack_require__.d(vega_namespaceObject,"utcFloor",(function(){return utcFloor})),__webpack_require__.d(vega_namespaceObject,"timeUnitSpecifier",(function(){return timeUnitSpecifier})),__webpack_require__.d(vega_namespaceObject,"timeFormat",(function(){return format_timeFormat})),__webpack_require__.d(vega_namespaceObject,"utcFormat",(function(){return format_utcFormat})),__webpack_require__.d(vega_namespaceObject,"timeInterval",(function(){return timeInterval})),__webpack_require__.d(vega_namespaceObject,"timeOffset",(function(){return timeOffset})),__webpack_require__.d(vega_namespaceObject,"timeSequence",(function(){return timeSequence})),__webpack_require__.d(vega_namespaceObject,"utcInterval",(function(){return utcInterval})),__webpack_require__.d(vega_namespaceObject,"utcOffset",(function(){return utcOffset})),__webpack_require__.d(vega_namespaceObject,"utcSequence",(function(){return utcSequence})),__webpack_require__.d(vega_namespaceObject,"timeBin",(function(){return vega_time_src_bin})),__webpack_require__.d(vega_namespaceObject,"accessor",(function(){return vega_util.f})),__webpack_require__.d(vega_namespaceObject,"accessorName",(function(){return vega_util.h})),__webpack_require__.d(vega_namespaceObject,"accessorFields",(function(){return vega_util.g})),__webpack_require__.d(vega_namespaceObject,"id",(function(){return vega_util.w})),__webpack_require__.d(vega_namespaceObject,"identity",(function(){return vega_util.x})),__webpack_require__.d(vega_namespaceObject,"zero",(function(){return vega_util.jb})),__webpack_require__.d(vega_namespaceObject,"one",(function(){return vega_util.N})),__webpack_require__.d(vega_namespaceObject,"truthy",(function(){return vega_util.fb})),__webpack_require__.d(vega_namespaceObject,"falsy",(function(){return vega_util.r})),__webpack_require__.d(vega_namespaceObject,"logger",(function(){return vega_util.K})),__webpack_require__.d(vega_namespaceObject,"None",(function(){return vega_util.d})),__webpack_require__.d(vega_namespaceObject,"Error",(function(){return vega_util.b})),__webpack_require__.d(vega_namespaceObject,"Warn",(function(){return vega_util.e})),__webpack_require__.d(vega_namespaceObject,"Info",(function(){return vega_util.c})),__webpack_require__.d(vega_namespaceObject,"Debug",(function(){return vega_util.a})),__webpack_require__.d(vega_namespaceObject,"mergeConfig",(function(){return vega_util.M})),__webpack_require__.d(vega_namespaceObject,"writeConfig",(function(){return vega_util.ib})),__webpack_require__.d(vega_namespaceObject,"panLinear",(function(){return vega_util.P})),__webpack_require__.d(vega_namespaceObject,"panLog",(function(){return vega_util.Q})),__webpack_require__.d(vega_namespaceObject,"panPow",(function(){return vega_util.R})),__webpack_require__.d(vega_namespaceObject,"panSymlog",(function(){return vega_util.S})),__webpack_require__.d(vega_namespaceObject,"zoomLinear",(function(){return vega_util.kb})),__webpack_require__.d(vega_namespaceObject,"zoomLog",(function(){return vega_util.lb})),__webpack_require__.d(vega_namespaceObject,"zoomPow",(function(){return vega_util.mb})),__webpack_require__.d(vega_namespaceObject,"zoomSymlog",(function(){return vega_util.nb})),__webpack_require__.d(vega_namespaceObject,"quarter",(function(){return vega_util.U})),__webpack_require__.d(vega_namespaceObject,"utcquarter",(function(){return vega_util.gb})),__webpack_require__.d(vega_namespaceObject,"array",(function(){return vega_util.i})),__webpack_require__.d(vega_namespaceObject,"clampRange",(function(){return vega_util.j})),__webpack_require__.d(vega_namespaceObject,"compare",(function(){return vega_util.k})),__webpack_require__.d(vega_namespaceObject,"constant",(function(){return vega_util.l})),__webpack_require__.d(vega_namespaceObject,"debounce",(function(){return vega_util.m})),__webpack_require__.d(vega_namespaceObject,"error",(function(){return vega_util.n})),__webpack_require__.d(vega_namespaceObject,"extend",(function(){return vega_util.o})),__webpack_require__.d(vega_namespaceObject,"extent",(function(){return vega_util.p})),__webpack_require__.d(vega_namespaceObject,"extentIndex",(function(){return vega_util.q})),__webpack_require__.d(vega_namespaceObject,"fastmap",(function(){return vega_util.s})),__webpack_require__.d(vega_namespaceObject,"field",(function(){return vega_util.t})),__webpack_require__.d(vega_namespaceObject,"flush",(function(){return vega_util.u})),__webpack_require__.d(vega_namespaceObject,"hasOwnProperty",(function(){return vega_util.v})),__webpack_require__.d(vega_namespaceObject,"inherits",(function(){return vega_util.y})),__webpack_require__.d(vega_namespaceObject,"inrange",(function(){return vega_util.z})),__webpack_require__.d(vega_namespaceObject,"isArray",(function(){return vega_util.A})),__webpack_require__.d(vega_namespaceObject,"isBoolean",(function(){return vega_util.B})),__webpack_require__.d(vega_namespaceObject,"isDate",(function(){return vega_util.C})),__webpack_require__.d(vega_namespaceObject,"isFunction",(function(){return vega_util.D})),__webpack_require__.d(vega_namespaceObject,"isNumber",(function(){return vega_util.E})),__webpack_require__.d(vega_namespaceObject,"isObject",(function(){return vega_util.F})),__webpack_require__.d(vega_namespaceObject,"isRegExp",(function(){return vega_util.G})),__webpack_require__.d(vega_namespaceObject,"isString",(function(){return vega_util.H})),__webpack_require__.d(vega_namespaceObject,"key",(function(){return vega_util.I})),__webpack_require__.d(vega_namespaceObject,"lerp",(function(){return vega_util.J})),__webpack_require__.d(vega_namespaceObject,"merge",(function(){return vega_util.L})),__webpack_require__.d(vega_namespaceObject,"pad",(function(){return vega_util.O})),__webpack_require__.d(vega_namespaceObject,"peek",(function(){return vega_util.T})),__webpack_require__.d(vega_namespaceObject,"repeat",(function(){return vega_util.V})),__webpack_require__.d(vega_namespaceObject,"span",(function(){return vega_util.W})),__webpack_require__.d(vega_namespaceObject,"splitAccessPath",(function(){return vega_util.X})),__webpack_require__.d(vega_namespaceObject,"stringValue",(function(){return vega_util.Y})),__webpack_require__.d(vega_namespaceObject,"toBoolean",(function(){return vega_util.Z})),__webpack_require__.d(vega_namespaceObject,"toDate",(function(){return vega_util.ab})),__webpack_require__.d(vega_namespaceObject,"toNumber",(function(){return vega_util.bb})),__webpack_require__.d(vega_namespaceObject,"toString",(function(){return vega_util.db})),__webpack_require__.d(vega_namespaceObject,"toSet",(function(){return vega_util.cb})),__webpack_require__.d(vega_namespaceObject,"truncate",(function(){return vega_util.eb})),__webpack_require__.d(vega_namespaceObject,"visitArray",(function(){return vega_util.hb})),__webpack_require__.d(vega_namespaceObject,"loader",(function(){return vega_loader_index_browser_loader})),__webpack_require__.d(vega_namespaceObject,"read",(function(){return src_read})),__webpack_require__.d(vega_namespaceObject,"inferType",(function(){return type_inferType})),__webpack_require__.d(vega_namespaceObject,"inferTypes",(function(){return type_inferTypes})),__webpack_require__.d(vega_namespaceObject,"typeParsers",(function(){return type_typeParsers})),__webpack_require__.d(vega_namespaceObject,"format",(function(){return src_formats_format})),__webpack_require__.d(vega_namespaceObject,"formats",(function(){return src_formats_formats})),__webpack_require__.d(vega_namespaceObject,"responseType",(function(){return formats_responseType})),__webpack_require__.d(vega_namespaceObject,"Bounds",(function(){return Bounds})),__webpack_require__.d(vega_namespaceObject,"Gradient",(function(){return Gradient})),__webpack_require__.d(vega_namespaceObject,"GroupItem",(function(){return GroupItem})),__webpack_require__.d(vega_namespaceObject,"ResourceLoader",(function(){return ResourceLoader})),__webpack_require__.d(vega_namespaceObject,"Item",(function(){return Item})),__webpack_require__.d(vega_namespaceObject,"Scenegraph",(function(){return Scenegraph})),__webpack_require__.d(vega_namespaceObject,"Handler",(function(){return Handler_Handler})),__webpack_require__.d(vega_namespaceObject,"Renderer",(function(){return Renderer_Renderer})),__webpack_require__.d(vega_namespaceObject,"CanvasHandler",(function(){return CanvasHandler})),__webpack_require__.d(vega_namespaceObject,"CanvasRenderer",(function(){return CanvasRenderer})),__webpack_require__.d(vega_namespaceObject,"SVGHandler",(function(){return SVGHandler})),__webpack_require__.d(vega_namespaceObject,"SVGRenderer",(function(){return SVGRenderer})),__webpack_require__.d(vega_namespaceObject,"SVGStringRenderer",(function(){return SVGStringRenderer})),__webpack_require__.d(vega_namespaceObject,"RenderType",(function(){return RenderType})),__webpack_require__.d(vega_namespaceObject,"renderModule",(function(){return renderModule})),__webpack_require__.d(vega_namespaceObject,"intersect",(function(){return intersect_intersect})),__webpack_require__.d(vega_namespaceObject,"Marks",(function(){return src_marks})),__webpack_require__.d(vega_namespaceObject,"boundClip",(function(){return boundClip})),__webpack_require__.d(vega_namespaceObject,"boundContext",(function(){return boundContext_context})),__webpack_require__.d(vega_namespaceObject,"boundStroke",(function(){return boundStroke})),__webpack_require__.d(vega_namespaceObject,"boundItem",(function(){return boundItem})),__webpack_require__.d(vega_namespaceObject,"boundMark",(function(){return boundMark})),__webpack_require__.d(vega_namespaceObject,"pathCurves",(function(){return curves})),__webpack_require__.d(vega_namespaceObject,"pathSymbols",(function(){return symbols_symbols})),__webpack_require__.d(vega_namespaceObject,"pathRectangle",(function(){return path_rectangle})),__webpack_require__.d(vega_namespaceObject,"pathTrail",(function(){return path_trail})),__webpack_require__.d(vega_namespaceObject,"pathParse",(function(){return path_parse})),__webpack_require__.d(vega_namespaceObject,"pathRender",(function(){return path_render})),__webpack_require__.d(vega_namespaceObject,"point",(function(){return util_point})),__webpack_require__.d(vega_namespaceObject,"domCreate",(function(){return domCreate})),__webpack_require__.d(vega_namespaceObject,"domFind",(function(){return domFind})),__webpack_require__.d(vega_namespaceObject,"domChild",(function(){return domChild})),__webpack_require__.d(vega_namespaceObject,"domClear",(function(){return domClear})),__webpack_require__.d(vega_namespaceObject,"openTag",(function(){return openTag})),__webpack_require__.d(vega_namespaceObject,"closeTag",(function(){return closeTag})),__webpack_require__.d(vega_namespaceObject,"font",(function(){return text_font})),__webpack_require__.d(vega_namespaceObject,"fontFamily",(function(){return fontFamily})),__webpack_require__.d(vega_namespaceObject,"fontSize",(function(){return text_fontSize})),__webpack_require__.d(vega_namespaceObject,"lineHeight",(function(){return lineHeight})),__webpack_require__.d(vega_namespaceObject,"multiLineOffset",(function(){return multiLineOffset})),__webpack_require__.d(vega_namespaceObject,"textMetrics",(function(){return textMetrics})),__webpack_require__.d(vega_namespaceObject,"resetSVGClipId",(function(){return resetSVGClipId})),__webpack_require__.d(vega_namespaceObject,"sceneEqual",(function(){return sceneEqual})),__webpack_require__.d(vega_namespaceObject,"pathEqual",(function(){return pathEqual})),__webpack_require__.d(vega_namespaceObject,"sceneToJSON",(function(){return sceneToJSON})),__webpack_require__.d(vega_namespaceObject,"sceneFromJSON",(function(){return sceneFromJSON})),__webpack_require__.d(vega_namespaceObject,"intersectPath",(function(){return intersectPath})),__webpack_require__.d(vega_namespaceObject,"intersectPoint",(function(){return intersectPoint})),__webpack_require__.d(vega_namespaceObject,"intersectRule",(function(){return intersectRule})),__webpack_require__.d(vega_namespaceObject,"intersectBoxLine",(function(){return intersectBoxLine})),__webpack_require__.d(vega_namespaceObject,"sceneZOrder",(function(){return zorder})),__webpack_require__.d(vega_namespaceObject,"sceneVisit",(function(){return visit_visit})),__webpack_require__.d(vega_namespaceObject,"scenePickVisit",(function(){return pickVisit}));var message_namespaceObject={};__webpack_require__.r(message_namespaceObject),__webpack_require__.d(message_namespaceObject,"invalidSpec",(function(){return invalidSpec})),__webpack_require__.d(message_namespaceObject,"FIT_NON_SINGLE",(function(){return FIT_NON_SINGLE})),__webpack_require__.d(message_namespaceObject,"containerSizeNonSingle",(function(){return containerSizeNonSingle})),__webpack_require__.d(message_namespaceObject,"containerSizeNotCompatibleWithAutosize",(function(){return containerSizeNotCompatibleWithAutosize})),__webpack_require__.d(message_namespaceObject,"droppingFit",(function(){return droppingFit})),__webpack_require__.d(message_namespaceObject,"cannotProjectOnChannelWithoutField",(function(){return cannotProjectOnChannelWithoutField})),__webpack_require__.d(message_namespaceObject,"nearestNotSupportForContinuous",(function(){return nearestNotSupportForContinuous})),__webpack_require__.d(message_namespaceObject,"selectionNotSupported",(function(){return selectionNotSupported})),__webpack_require__.d(message_namespaceObject,"selectionNotFound",(function(){return selectionNotFound})),__webpack_require__.d(message_namespaceObject,"SCALE_BINDINGS_CONTINUOUS",(function(){return SCALE_BINDINGS_CONTINUOUS})),__webpack_require__.d(message_namespaceObject,"noSameUnitLookup",(function(){return noSameUnitLookup})),__webpack_require__.d(message_namespaceObject,"noSuchRepeatedValue",(function(){return noSuchRepeatedValue})),__webpack_require__.d(message_namespaceObject,"columnsNotSupportByRowCol",(function(){return columnsNotSupportByRowCol})),__webpack_require__.d(message_namespaceObject,"CONCAT_CANNOT_SHARE_AXIS",(function(){return CONCAT_CANNOT_SHARE_AXIS})),__webpack_require__.d(message_namespaceObject,"REPEAT_CANNOT_SHARE_AXIS",(function(){return REPEAT_CANNOT_SHARE_AXIS})),__webpack_require__.d(message_namespaceObject,"unrecognizedParse",(function(){return unrecognizedParse})),__webpack_require__.d(message_namespaceObject,"differentParse",(function(){return differentParse})),__webpack_require__.d(message_namespaceObject,"invalidTransformIgnored",(function(){return invalidTransformIgnored})),__webpack_require__.d(message_namespaceObject,"NO_FIELDS_NEEDS_AS",(function(){return NO_FIELDS_NEEDS_AS})),__webpack_require__.d(message_namespaceObject,"encodingOverridden",(function(){return encodingOverridden})),__webpack_require__.d(message_namespaceObject,"projectionOverridden",(function(){return projectionOverridden})),__webpack_require__.d(message_namespaceObject,"primitiveChannelDef",(function(){return primitiveChannelDef})),__webpack_require__.d(message_namespaceObject,"invalidFieldType",(function(){return invalidFieldType})),__webpack_require__.d(message_namespaceObject,"nonZeroScaleUsedWithLengthMark",(function(){return nonZeroScaleUsedWithLengthMark})),__webpack_require__.d(message_namespaceObject,"invalidFieldTypeForCountAggregate",(function(){return invalidFieldTypeForCountAggregate})),__webpack_require__.d(message_namespaceObject,"invalidAggregate",(function(){return invalidAggregate})),__webpack_require__.d(message_namespaceObject,"missingFieldType",(function(){return missingFieldType})),__webpack_require__.d(message_namespaceObject,"droppingColor",(function(){return droppingColor})),__webpack_require__.d(message_namespaceObject,"emptyFieldDef",(function(){return emptyFieldDef})),__webpack_require__.d(message_namespaceObject,"latLongDeprecated",(function(){return latLongDeprecated})),__webpack_require__.d(message_namespaceObject,"LINE_WITH_VARYING_SIZE",(function(){return LINE_WITH_VARYING_SIZE})),__webpack_require__.d(message_namespaceObject,"incompatibleChannel",(function(){return incompatibleChannel})),__webpack_require__.d(message_namespaceObject,"invalidEncodingChannel",(function(){return invalidEncodingChannel})),__webpack_require__.d(message_namespaceObject,"facetChannelShouldBeDiscrete",(function(){return facetChannelShouldBeDiscrete})),__webpack_require__.d(message_namespaceObject,"facetChannelDropped",(function(){return facetChannelDropped})),__webpack_require__.d(message_namespaceObject,"discreteChannelCannotEncode",(function(){return discreteChannelCannotEncode})),__webpack_require__.d(message_namespaceObject,"lineWithRange",(function(){return lineWithRange})),__webpack_require__.d(message_namespaceObject,"orientOverridden",(function(){return orientOverridden})),__webpack_require__.d(message_namespaceObject,"CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN",(function(){return CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN})),__webpack_require__.d(message_namespaceObject,"RANGE_STEP_DEPRECATED",(function(){return RANGE_STEP_DEPRECATED})),__webpack_require__.d(message_namespaceObject,"cannotUseScalePropertyWithNonColor",(function(){return cannotUseScalePropertyWithNonColor})),__webpack_require__.d(message_namespaceObject,"unaggregateDomainHasNoEffectForRawField",(function(){return unaggregateDomainHasNoEffectForRawField})),__webpack_require__.d(message_namespaceObject,"unaggregateDomainWithNonSharedDomainOp",(function(){return unaggregateDomainWithNonSharedDomainOp})),__webpack_require__.d(message_namespaceObject,"unaggregatedDomainWithLogScale",(function(){return unaggregatedDomainWithLogScale})),__webpack_require__.d(message_namespaceObject,"cannotApplySizeToNonOrientedMark",(function(){return cannotApplySizeToNonOrientedMark})),__webpack_require__.d(message_namespaceObject,"scaleTypeNotWorkWithChannel",(function(){return scaleTypeNotWorkWithChannel})),__webpack_require__.d(message_namespaceObject,"scaleTypeNotWorkWithFieldDef",(function(){return scaleTypeNotWorkWithFieldDef})),__webpack_require__.d(message_namespaceObject,"scalePropertyNotWorkWithScaleType",(function(){return scalePropertyNotWorkWithScaleType})),__webpack_require__.d(message_namespaceObject,"scaleTypeNotWorkWithMark",(function(){return scaleTypeNotWorkWithMark})),__webpack_require__.d(message_namespaceObject,"stepDropped",(function(){return stepDropped})),__webpack_require__.d(message_namespaceObject,"mergeConflictingProperty",(function(){return mergeConflictingProperty})),__webpack_require__.d(message_namespaceObject,"mergeConflictingDomainProperty",(function(){return mergeConflictingDomainProperty})),__webpack_require__.d(message_namespaceObject,"independentScaleMeansIndependentGuide",(function(){return independentScaleMeansIndependentGuide})),__webpack_require__.d(message_namespaceObject,"domainSortDropped",(function(){return domainSortDropped})),__webpack_require__.d(message_namespaceObject,"UNABLE_TO_MERGE_DOMAINS",(function(){return UNABLE_TO_MERGE_DOMAINS})),__webpack_require__.d(message_namespaceObject,"MORE_THAN_ONE_SORT",(function(){return MORE_THAN_ONE_SORT})),__webpack_require__.d(message_namespaceObject,"INVALID_CHANNEL_FOR_AXIS",(function(){return INVALID_CHANNEL_FOR_AXIS})),__webpack_require__.d(message_namespaceObject,"cannotStackRangedMark",(function(){return cannotStackRangedMark})),__webpack_require__.d(message_namespaceObject,"cannotStackNonLinearScale",(function(){return cannotStackNonLinearScale})),__webpack_require__.d(message_namespaceObject,"stackNonSummativeAggregate",(function(){return stackNonSummativeAggregate})),__webpack_require__.d(message_namespaceObject,"invalidTimeUnit",(function(){return invalidTimeUnit})),__webpack_require__.d(message_namespaceObject,"dayReplacedWithDate",(function(){return dayReplacedWithDate})),__webpack_require__.d(message_namespaceObject,"droppedDay",(function(){return droppedDay})),__webpack_require__.d(message_namespaceObject,"errorBarCenterAndExtentAreNotNeeded",(function(){return errorBarCenterAndExtentAreNotNeeded})),__webpack_require__.d(message_namespaceObject,"errorBarCenterIsUsedWithWrongExtent",(function(){return errorBarCenterIsUsedWithWrongExtent})),__webpack_require__.d(message_namespaceObject,"errorBarContinuousAxisHasCustomizedAggregate",(function(){return errorBarContinuousAxisHasCustomizedAggregate})),__webpack_require__.d(message_namespaceObject,"errorBarCenterIsNotNeeded",(function(){return errorBarCenterIsNotNeeded})),__webpack_require__.d(message_namespaceObject,"errorBand1DNotSupport",(function(){return errorBand1DNotSupport})),__webpack_require__.d(message_namespaceObject,"channelRequiredForBinned",(function(){return channelRequiredForBinned})),__webpack_require__.d(message_namespaceObject,"domainRequiredForThresholdScale",(function(){return domainRequiredForThresholdScale}));var legend_encode_namespaceObject={};__webpack_require__.r(legend_encode_namespaceObject),__webpack_require__.d(legend_encode_namespaceObject,"symbols",(function(){return encode_symbols})),__webpack_require__.d(legend_encode_namespaceObject,"gradient",(function(){return legend_encode_gradient})),__webpack_require__.d(legend_encode_namespaceObject,"labels",(function(){return encode_labels})),__webpack_require__.d(legend_encode_namespaceObject,"getFirstConditionValue",(function(){return getFirstConditionValue}));var build_src_namespaceObject={};__webpack_require__.r(build_src_namespaceObject),__webpack_require__.d(build_src_namespaceObject,"compile",(function(){return compile})),__webpack_require__.d(build_src_namespaceObject,"extractTransforms",(function(){return extractTransforms})),__webpack_require__.d(build_src_namespaceObject,"normalize",(function(){return normalize_normalize})),__webpack_require__.d(build_src_namespaceObject,"version",(function(){return version}));var vega_themes_build_src_namespaceObject={};__webpack_require__.r(vega_themes_build_src_namespaceObject),__webpack_require__.d(vega_themes_build_src_namespaceObject,"dark",(function(){return theme_dark})),__webpack_require__.d(vega_themes_build_src_namespaceObject,"excel",(function(){return theme_excel})),__webpack_require__.d(vega_themes_build_src_namespaceObject,"fivethirtyeight",(function(){return theme_fivethirtyeight})),__webpack_require__.d(vega_themes_build_src_namespaceObject,"ggplot2",(function(){return theme_ggplot2})),__webpack_require__.d(vega_themes_build_src_namespaceObject,"latimes",(function(){return theme_latimes})),__webpack_require__.d(vega_themes_build_src_namespaceObject,"quartz",(function(){return theme_quartz})),__webpack_require__.d(vega_themes_build_src_namespaceObject,"vox",(function(){return theme_vox})),__webpack_require__.d(vega_themes_build_src_namespaceObject,"urbaninstitute",(function(){return theme_urbaninstitute})),__webpack_require__.d(vega_themes_build_src_namespaceObject,"version",(function(){return src_version}));function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P((function(resolve){resolve(result.value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */
var helpers_extends=function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),_hasOwnProperty=Object.prototype.hasOwnProperty;function helpers_hasOwnProperty(obj,key){return _hasOwnProperty.call(obj,key)}function _objectKeys(obj){if(Array.isArray(obj)){for(var keys=new Array(obj.length),k=0;k<keys.length;k++)keys[k]=""+k;return keys}if(Object.keys)return Object.keys(obj);keys=[];for(var i in obj)helpers_hasOwnProperty(obj,i)&&keys.push(i);return keys}function _deepClone(obj){switch(typeof obj){case"object":return JSON.parse(JSON.stringify(obj));case"undefined":return null;default:return obj}}function isInteger(str){for(var charCode,i=0,len=str.length;i<len;){if(!((charCode=str.charCodeAt(i))>=48&&charCode<=57))return!1;i++}return!0}function escapePathComponent(path){return-1===path.indexOf("/")&&-1===path.indexOf("~")?path:path.replace(/~/g,"~0").replace(/\//g,"~1")}function unescapePathComponent(path){return path.replace(/~1/g,"/").replace(/~0/g,"~")}function patchErrorMessageFormatter(message,args){var messageParts=[message];for(var key in args){var value="object"==typeof args[key]?JSON.stringify(args[key],null,2):args[key];void 0!==value&&messageParts.push(key+": "+value)}return messageParts.join("\n")}var PatchError=function(_super){function PatchError(message,name,index,operation,tree){var _newTarget=this.constructor,_this=_super.call(this,patchErrorMessageFormatter(message,{name:name,index:index,operation:operation,tree:tree}))||this;return _this.name=name,_this.index=index,_this.operation=operation,_this.tree=tree,Object.setPrototypeOf(_this,_newTarget.prototype),_this.message=patchErrorMessageFormatter(message,{name:name,index:index,operation:operation,tree:tree}),_this}return helpers_extends(PatchError,_super),PatchError}(Error),JsonPatchError=PatchError,deepClone=_deepClone,objOps={add:function(obj,key,document){return obj[key]=this.value,{newDocument:document}},remove:function(obj,key,document){var removed=obj[key];return delete obj[key],{newDocument:document,removed:removed}},replace:function(obj,key,document){var removed=obj[key];return obj[key]=this.value,{newDocument:document,removed:removed}},move:function(obj,key,document){var removed=getValueByPointer(document,this.path);removed&&(removed=_deepClone(removed));var originalValue=applyOperation(document,{op:"remove",path:this.from}).removed;return applyOperation(document,{op:"add",path:this.path,value:originalValue}),{newDocument:document,removed:removed}},copy:function(obj,key,document){var valueToCopy=getValueByPointer(document,this.from);return applyOperation(document,{op:"add",path:this.path,value:_deepClone(valueToCopy)}),{newDocument:document}},test:function(obj,key,document){return{newDocument:document,test:_areEquals(obj[key],this.value)}},_get:function(obj,key,document){return this.value=obj[key],{newDocument:document}}},arrOps={add:function(arr,i,document){return isInteger(i)?arr.splice(i,0,this.value):arr[i]=this.value,{newDocument:document,index:i}},remove:function(arr,i,document){return{newDocument:document,removed:arr.splice(i,1)[0]}},replace:function(arr,i,document){var removed=arr[i];return arr[i]=this.value,{newDocument:document,removed:removed}},move:objOps.move,copy:objOps.copy,test:objOps.test,_get:objOps._get};function getValueByPointer(document,pointer){if(""==pointer)return document;var getOriginalDestination={op:"_get",path:pointer};return applyOperation(document,getOriginalDestination),getOriginalDestination.value}function applyOperation(document,operation,validateOperation,mutateDocument,banPrototypeModifications,index){if(void 0===validateOperation&&(validateOperation=!1),void 0===mutateDocument&&(mutateDocument=!0),void 0===banPrototypeModifications&&(banPrototypeModifications=!0),void 0===index&&(index=0),validateOperation&&("function"==typeof validateOperation?validateOperation(operation,0,document,operation.path):validator(operation,0)),""===operation.path){var returnValue={newDocument:document};if("add"===operation.op)return returnValue.newDocument=operation.value,returnValue;if("replace"===operation.op)return returnValue.newDocument=operation.value,returnValue.removed=document,returnValue;if("move"===operation.op||"copy"===operation.op)return returnValue.newDocument=getValueByPointer(document,operation.from),"move"===operation.op&&(returnValue.removed=document),returnValue;if("test"===operation.op){if(returnValue.test=_areEquals(document,operation.value),!1===returnValue.test)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",index,operation,document);return returnValue.newDocument=document,returnValue}if("remove"===operation.op)return returnValue.removed=document,returnValue.newDocument=null,returnValue;if("_get"===operation.op)return operation.value=document,returnValue;if(validateOperation)throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",index,operation,document);return returnValue}mutateDocument||(document=_deepClone(document));var keys=(operation.path||"").split("/"),obj=document,t=1,len=keys.length,existingPathFragment=void 0,key=void 0,validateFunction=void 0;for(validateFunction="function"==typeof validateOperation?validateOperation:validator;;){if(key=keys[t],banPrototypeModifications&&"__proto__"==key)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(validateOperation&&void 0===existingPathFragment&&(void 0===obj[key]?existingPathFragment=keys.slice(0,t).join("/"):t==len-1&&(existingPathFragment=operation.path),void 0!==existingPathFragment&&validateFunction(operation,0,document,existingPathFragment)),t++,Array.isArray(obj)){if("-"===key)key=obj.length;else{if(validateOperation&&!isInteger(key))throw new JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",index,operation,document);isInteger(key)&&(key=~~key)}if(t>=len){if(validateOperation&&"add"===operation.op&&key>obj.length)throw new JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",index,operation,document);if(!1===(returnValue=arrOps[operation.op].call(operation,obj,key,document)).test)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",index,operation,document);return returnValue}}else if(key&&-1!=key.indexOf("~")&&(key=unescapePathComponent(key)),t>=len){if(!1===(returnValue=objOps[operation.op].call(operation,obj,key,document)).test)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",index,operation,document);return returnValue}obj=obj[key]}}function applyPatch(document,patch,validateOperation,mutateDocument,banPrototypeModifications){if(void 0===mutateDocument&&(mutateDocument=!0),void 0===banPrototypeModifications&&(banPrototypeModifications=!0),validateOperation&&!Array.isArray(patch))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");mutateDocument||(document=_deepClone(document));for(var results=new Array(patch.length),i=0,length_1=patch.length;i<length_1;i++)results[i]=applyOperation(document,patch[i],validateOperation,!0,banPrototypeModifications,i),document=results[i].newDocument;return results.newDocument=document,results}function applyReducer(document,operation,index){var operationResult=applyOperation(document,operation);if(!1===operationResult.test)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",index,operation,document);return operationResult.newDocument}function validator(operation,index,document,existingPathFragment){if("object"!=typeof operation||null===operation||Array.isArray(operation))throw new JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",index,operation,document);if(!objOps[operation.op])throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",index,operation,document);if("string"!=typeof operation.path)throw new JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",index,operation,document);if(0!==operation.path.indexOf("/")&&operation.path.length>0)throw new JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",index,operation,document);if(("move"===operation.op||"copy"===operation.op)&&"string"!=typeof operation.from)throw new JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",index,operation,document);if(("add"===operation.op||"replace"===operation.op||"test"===operation.op)&&void 0===operation.value)throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",index,operation,document);if(("add"===operation.op||"replace"===operation.op||"test"===operation.op)&&function hasUndefined(obj){if(void 0===obj)return!0;if(obj)if(Array.isArray(obj)){for(var i=0,len=obj.length;i<len;i++)if(hasUndefined(obj[i]))return!0}else if("object"==typeof obj){var objKeys=_objectKeys(obj),objKeysLength=objKeys.length;for(i=0;i<objKeysLength;i++)if(hasUndefined(obj[objKeys[i]]))return!0}return!1}(operation.value))throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",index,operation,document);if(document)if("add"==operation.op){var pathLen=operation.path.split("/").length,existingPathLen=existingPathFragment.split("/").length;if(pathLen!==existingPathLen+1&&pathLen!==existingPathLen)throw new JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",index,operation,document)}else if("replace"===operation.op||"remove"===operation.op||"_get"===operation.op){if(operation.path!==existingPathFragment)throw new JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",index,operation,document)}else if("move"===operation.op||"copy"===operation.op){var error=validate([{op:"_get",path:operation.from,value:void 0}],document);if(error&&"OPERATION_PATH_UNRESOLVABLE"===error.name)throw new JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",index,operation,document)}}function validate(sequence,document,externalValidator){try{if(!Array.isArray(sequence))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(document)applyPatch(_deepClone(document),_deepClone(sequence),externalValidator||!0);else{externalValidator=externalValidator||validator;for(var i=0;i<sequence.length;i++)externalValidator(sequence[i],i,document,void 0)}}catch(e){if(e instanceof JsonPatchError)return e;throw e}}function _areEquals(a,b){if(a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==typeof b){var i,length,key,arrA=Array.isArray(a),arrB=Array.isArray(b);if(arrA&&arrB){if((length=a.length)!=b.length)return!1;for(i=length;0!=i--;)if(!_areEquals(a[i],b[i]))return!1;return!0}if(arrA!=arrB)return!1;var keys=Object.keys(a);if((length=keys.length)!==Object.keys(b).length)return!1;for(i=length;0!=i--;)if(!b.hasOwnProperty(keys[i]))return!1;for(i=length;0!=i--;)if(!_areEquals(a[key=keys[i]],b[key]))return!1;return!0}return a!=a&&b!=b}
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */
var beforeDict=new WeakMap,Mirror=function Mirror(obj){this.observers=new Map,this.obj=obj},ObserverInfo=function ObserverInfo(callback,observer){this.callback=callback,this.observer=observer};function unobserve(root,observer){observer.unobserve()}function observe(obj,callback){var observer,mirror=function getMirror(obj){return beforeDict.get(obj)}(obj);if(mirror){var observerInfo=function getObserverFromMirror(mirror,callback){return mirror.observers.get(callback)}(mirror,callback);observer=observerInfo&&observerInfo.observer}else mirror=new Mirror(obj),beforeDict.set(obj,mirror);if(observer)return observer;if(observer={},mirror.value=_deepClone(obj),callback){observer.callback=callback,observer.next=null;var dirtyCheck=function(){duplex_generate(observer)},fastCheck=function(){clearTimeout(observer.next),observer.next=setTimeout(dirtyCheck)};"undefined"!=typeof window&&(window.addEventListener("mouseup",fastCheck),window.addEventListener("keyup",fastCheck),window.addEventListener("mousedown",fastCheck),window.addEventListener("keydown",fastCheck),window.addEventListener("change",fastCheck))}return observer.patches=[],observer.object=obj,observer.unobserve=function(){duplex_generate(observer),clearTimeout(observer.next),function removeObserverFromMirror(mirror,observer){mirror.observers.delete(observer.callback)}(mirror,observer),"undefined"!=typeof window&&(window.removeEventListener("mouseup",fastCheck),window.removeEventListener("keyup",fastCheck),window.removeEventListener("mousedown",fastCheck),window.removeEventListener("keydown",fastCheck),window.removeEventListener("change",fastCheck))},mirror.observers.set(callback,new ObserverInfo(callback,observer)),observer}function duplex_generate(observer,invertible){void 0===invertible&&(invertible=!1);var mirror=beforeDict.get(observer.object);_generate(mirror.value,observer.object,observer.patches,"",invertible),observer.patches.length&&applyPatch(mirror.value,observer.patches);var temp=observer.patches;return temp.length>0&&(observer.patches=[],observer.callback&&observer.callback(temp)),temp}function _generate(mirror,obj,patches,path,invertible){if(obj!==mirror){"function"==typeof obj.toJSON&&(obj=obj.toJSON());for(var newKeys=_objectKeys(obj),oldKeys=_objectKeys(mirror),deleted=!1,t=oldKeys.length-1;t>=0;t--){var oldVal=mirror[key=oldKeys[t]];if(!helpers_hasOwnProperty(obj,key)||void 0===obj[key]&&void 0!==oldVal&&!1===Array.isArray(obj))Array.isArray(mirror)===Array.isArray(obj)?(invertible&&patches.push({op:"test",path:path+"/"+escapePathComponent(key),value:_deepClone(oldVal)}),patches.push({op:"remove",path:path+"/"+escapePathComponent(key)}),deleted=!0):(invertible&&patches.push({op:"test",path:path,value:mirror}),patches.push({op:"replace",path:path,value:obj}),!0);else{var newVal=obj[key];"object"==typeof oldVal&&null!=oldVal&&"object"==typeof newVal&&null!=newVal?_generate(oldVal,newVal,patches,path+"/"+escapePathComponent(key),invertible):oldVal!==newVal&&(!0,invertible&&patches.push({op:"test",path:path+"/"+escapePathComponent(key),value:_deepClone(oldVal)}),patches.push({op:"replace",path:path+"/"+escapePathComponent(key),value:_deepClone(newVal)}))}}if(deleted||newKeys.length!=oldKeys.length)for(t=0;t<newKeys.length;t++){var key;helpers_hasOwnProperty(mirror,key=newKeys[t])||void 0===obj[key]||patches.push({op:"add",path:path+"/"+escapePathComponent(key),value:_deepClone(obj[key])})}}}function duplex_compare(tree1,tree2,invertible){void 0===invertible&&(invertible=!1);var patches=[];return _generate(tree1,tree2,patches,"",invertible),patches}Object.assign({},core_namespaceObject,duplex_namespaceObject,{JsonPatchError:PatchError,deepClone:_deepClone,escapePathComponent:escapePathComponent,unescapePathComponent:unescapePathComponent});var json_stringify_pretty_compact=__webpack_require__(123),json_stringify_pretty_compact_default=__webpack_require__.n(json_stringify_pretty_compact),semver=__webpack_require__(174),vega_util=__webpack_require__(0);function UniqueList(idFunc){var $=idFunc||vega_util.x,list=[],ids={};return list.add=function(_){var id=$(_);return ids[id]||(ids[id]=1,list.push(_)),list},list.remove=function(_){var idx,id=$(_);return ids[id]&&(ids[id]=0,(idx=list.indexOf(_))>=0&&list.splice(idx,1)),list},list}var asyncCallback=async function(df,callback){try{await callback(df)}catch(err){df.error(err)}},TUPLE_ID_KEY=Symbol("vega_id"),TUPLE_ID=1;function isTuple(t){return!(!t||!tupleid(t))}function tupleid(t){return t[TUPLE_ID_KEY]}function setid(t,id){return t[TUPLE_ID_KEY]=id,t}function ingest(datum){var t=datum===Object(datum)?datum:{data:datum};return tupleid(t)?t:setid(t,TUPLE_ID++)}function Tuple_derive(t){return rederive(t,ingest({}))}function rederive(t,d){for(var k in t)d[k]=t[k];return d}function replace(t,d){return setid(d,tupleid(t))}function stableCompare(cmp,f){return cmp?f?(a,b)=>cmp(a,b)||tupleid(f(a))-tupleid(f(b)):(a,b)=>cmp(a,b)||tupleid(a)-tupleid(b):null}function isChangeSet(v){return v&&v.constructor===ChangeSet_changeset}function ChangeSet_changeset(){var add=[],rem=[],mod=[],remp=[],modp=[],reflow=!1;return{constructor:ChangeSet_changeset,insert:function(t){for(var d=Object(vega_util.i)(t),i=0,n=d.length;i<n;++i)add.push(d[i]);return this},remove:function(t){for(var a=Object(vega_util.D)(t)?remp:rem,d=Object(vega_util.i)(t),i=0,n=d.length;i<n;++i)a.push(d[i]);return this},modify:function(t,field,value){var m={field:field,value:Object(vega_util.l)(value)};return Object(vega_util.D)(t)?(m.filter=t,modp.push(m)):(m.tuple=t,mod.push(m)),this},encode:function(t,set){return Object(vega_util.D)(t)?modp.push({filter:t,field:set}):mod.push({tuple:t,field:set}),this},reflow:function(){return reflow=!0,this},pulse:function(pulse,tuples){var i,n,m,f,t,id,cur={},out={};for(i=0,n=tuples.length;i<n;++i)cur[tupleid(tuples[i])]=1;for(i=0,n=rem.length;i<n;++i)cur[tupleid(t=rem[i])]=-1;for(i=0,n=remp.length;i<n;++i)f=remp[i],tuples.forEach((function(t){f(t)&&(cur[tupleid(t)]=-1)}));for(i=0,n=add.length;i<n;++i)id=tupleid(t=add[i]),cur[id]?cur[id]=1:pulse.add.push(ingest(add[i]));for(i=0,n=tuples.length;i<n;++i)t=tuples[i],cur[tupleid(t)]<0&&pulse.rem.push(t);function modify(t,f,v){v?t[f]=v(t):pulse.encode=f,reflow||(out[tupleid(t)]=t)}for(i=0,n=mod.length;i<n;++i)t=(m=mod[i]).tuple,f=m.field,(id=cur[tupleid(t)])>0&&(modify(t,f,m.value),pulse.modifies(f));for(i=0,n=modp.length;i<n;++i)m=modp[i],f=m.filter,tuples.forEach((function(t){f(t)&&cur[tupleid(t)]>0&&modify(t,m.field,m.value)})),pulse.modifies(m.field);if(reflow)pulse.mod=rem.length||remp.length?tuples.filter((function(t){return cur[tupleid(t)]>0})):tuples.slice();else for(id in out)pulse.mod.push(out[id]);return pulse}}}var CACHE="_:mod:_";function Parameters(){Object.defineProperty(this,CACHE,{writable:!0,value:{}})}var Parameters_prototype=Parameters.prototype;Parameters_prototype.set=function(name,index,value,force){var o=this,v=o[name],mod=o[CACHE];return null!=index&&index>=0?(v[index]!==value||force)&&(v[index]=value,mod[index+":"+name]=-1,mod[name]=-1):(v!==value||force)&&(o[name]=value,mod[name]=Object(vega_util.A)(value)?1+value.length:-1),o},Parameters_prototype.modified=function(name,index){var k,mod=this[CACHE];if(!arguments.length){for(k in mod)if(mod[k])return!0;return!1}if(Object(vega_util.A)(name)){for(k=0;k<name.length;++k)if(mod[name[k]])return!0;return!1}return null!=index&&index>=0?index+1<mod[name]||!!mod[index+":"+name]:!!mod[name]},Parameters_prototype.clear=function(){return this[CACHE]={},this};var OP_ID=0,NO_PARAMS=new Parameters;function Operator(init,update,params,react){this.id=++OP_ID,this.value=init,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,update&&(this._update=update),params&&this.parameters(params,react)}var Operator_prototype=Operator.prototype;function Operator_flag(bit){return function(state){var f=this.flags;return 0===arguments.length?!!(f&bit):(this.flags=state?f|bit:f&~bit,this)}}Operator_prototype.targets=function(){return this._targets||(this._targets=UniqueList(vega_util.w))},Operator_prototype.set=function(value){return this.value!==value?(this.value=value,1):0},Operator_prototype.skip=Operator_flag(1),Operator_prototype.modified=Operator_flag(2),Operator_prototype.parameters=function(params,react,initonly){react=!1!==react;var name,value,n,i,self=this,argval=self._argval=self._argval||new Parameters,argops=self._argops=self._argops||[],deps=[];function add(name,index,value){value instanceof Operator?(value!==self&&(react&&value.targets().add(self),deps.push(value)),argops.push({op:value,name:name,index:index})):argval.set(name,index,value)}for(name in params)if(value=params[name],"pulse"===name)Object(vega_util.i)(value).forEach((function(op){op instanceof Operator?op!==self&&(op.targets().add(self),deps.push(op)):Object(vega_util.n)("Pulse parameters must be operator instances.")})),self.source=value;else if(Object(vega_util.A)(value))for(argval.set(name,-1,Array(n=value.length)),i=0;i<n;++i)add(name,i,value[i]);else add(name,-1,value);return this.marshall().clear(),initonly&&(argops.initonly=!0),deps},Operator_prototype.marshall=function(stamp){var item,i,n,op,mod,argval=this._argval||NO_PARAMS,argops=this._argops;if(argops){for(i=0,n=argops.length;i<n;++i)mod=(op=(item=argops[i]).op).modified()&&op.stamp===stamp,argval.set(item.name,item.index,op.value,mod);if(argops.initonly){for(i=0;i<n;++i)(item=argops[i]).op.targets().remove(this);this._argops=null,this._update=null}}return argval},Operator_prototype.evaluate=function(pulse){var update=this._update;if(update){var params=this.marshall(pulse.stamp),v=update.call(this,params,pulse);if(params.clear(),v!==this.value)this.value=v;else if(!this.modified())return pulse.StopPropagation}},Operator_prototype.run=function(pulse){return pulse.stamp<this.stamp?pulse.StopPropagation:(this.skip()?(this.skip(!1),rv=0):rv=this.evaluate(pulse),this.pulse=rv||pulse);var rv};var STREAM_ID=0;function EventStream(filter,apply,receive){this.id=++STREAM_ID,this.value=null,receive&&(this.receive=receive),filter&&(this._filter=filter),apply&&(this._apply=apply)}function EventStream_stream(filter,apply,receive){return new EventStream(filter,apply,receive)}var EventStream_prototype=EventStream.prototype;EventStream_prototype._filter=vega_util.fb,EventStream_prototype._apply=vega_util.x,EventStream_prototype.targets=function(){return this._targets||(this._targets=UniqueList(vega_util.w))},EventStream_prototype.consume=function(_){return arguments.length?(this._consume=!!_,this):!!this._consume},EventStream_prototype.receive=function(evt){if(this._filter(evt)){for(var val=this.value=this._apply(evt),trg=this._targets,n=trg?trg.length:0,i=0;i<n;++i)trg[i].receive(val);this._consume&&(evt.preventDefault(),evt.stopPropagation())}},EventStream_prototype.filter=function(filter){var s=EventStream_stream(filter);return this.targets().add(s),s},EventStream_prototype.apply=function(apply){var s=EventStream_stream(null,apply);return this.targets().add(s),s},EventStream_prototype.merge=function(){var s=EventStream_stream();this.targets().add(s);for(var i=0,n=arguments.length;i<n;++i)arguments[i].targets().add(s);return s},EventStream_prototype.throttle=function(pause){var t=-1;return this.filter((function(){var now=Date.now();return now-t>pause?(t=now,1):0}))},EventStream_prototype.debounce=function(delay){var s=EventStream_stream();return this.targets().add(EventStream_stream(null,null,Object(vega_util.m)(delay,(function(e){var df=e.dataflow;s.receive(e),df&&df.run&&df.run()})))),s},EventStream_prototype.between=function(a,b){var active=!1;return a.targets().add(EventStream_stream(null,null,(function(){active=!0}))),b.targets().add(EventStream_stream(null,null,(function(){active=!1}))),this.filter((function(){return active}))};const protocol_re=/^([A-Za-z]+:)?\/\//,allowed_re=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,whitespace_re=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,fileProtocol="file://";async function load(uri,options){const opt=await this.sanitize(uri,options),url=opt.href;return opt.localFile?this.file(url):this.http(url,options)}async function sanitize(uri,options){options=Object(vega_util.o)({},this.options,options);const fileAccess=this.fileAccess,result={href:null};let isFile,loadFile,base;const isAllowed=allowed_re.test(uri.replace(whitespace_re,""));null!=uri&&"string"==typeof uri&&isAllowed||Object(vega_util.n)("Sanitize failure, invalid URI: "+Object(vega_util.Y)(uri));const hasProtocol=protocol_re.test(uri);return(base=options.baseURL)&&!hasProtocol&&(uri.startsWith("/")||"/"===base[base.length-1]||(uri="/"+uri),uri=base+uri),loadFile=(isFile=uri.startsWith(fileProtocol))||"file"===options.mode||"http"!==options.mode&&!hasProtocol&&fileAccess,isFile?uri=uri.slice(fileProtocol.length):uri.startsWith("//")&&("file"===options.defaultProtocol?(uri=uri.slice(2),loadFile=!0):uri=(options.defaultProtocol||"http")+":"+uri),Object.defineProperty(result,"localFile",{value:!!loadFile}),result.href=uri,options.target&&(result.target=options.target+""),options.rel&&(result.rel=options.rel+""),result}function fileLoader(fs){return fs?function(filename){return new Promise((function(accept,reject){fs.readFile(filename,(function(error,data){error?reject(error):accept(data)}))}))}:fileReject}async function fileReject(){Object(vega_util.n)("No file system access.")}function httpLoader(fetch){return fetch?async function(url,options){const opt=Object(vega_util.o)({},this.options.http,options),type=options&&options.response,response=await fetch(url,opt);return response.ok?Object(vega_util.D)(response[type])?response[type]():response.text():Object(vega_util.n)(response.status+""+response.statusText)}:httpReject}async function httpReject(){Object(vega_util.n)("No HTTP fetch method available.")}var typeParsers={boolean:vega_util.Z,integer:vega_util.bb,number:vega_util.bb,date:vega_util.ab,string:vega_util.db,unknown:vega_util.x},typeTests=[function isBoolean(_){return"true"===_||"false"===_||!0===_||!1===_},function type_isInteger(_){return isNumber(_)&&Number.isInteger(+_)},isNumber,function isDate(_){return!Number.isNaN(Date.parse(_))}],typeList=["boolean","integer","number","date"];function inferTypes(data,fields){return fields.reduce((function(types,field){return types[field]=function inferType(values,field){if(!values||!values.length)return"unknown";var value,i,j,_,t=0,n=values.length,m=typeTests.length,a=typeTests.map((function(_,i){return i+1}));for(i=0,n=values.length;i<n;++i)for(value=field?values[i][field]:values[i],j=0;j<m;++j)if(a[j]&&(null!=(_=value)&&_==_)&&!typeTests[j](value)&&(a[j]=0,++t===typeTests.length))return"string";return t=a.reduce((function(u,v){return 0===u?v:u}),0)-1,typeList[t]}(data,field),types}),{})}function isNumber(_){return!(Number.isNaN(+_)||_ instanceof Date)}var EOL={},EOF={},QUOTE=34,NEWLINE=10,RETURN=13;function objectConverter(columns){return new Function("d","return {"+columns.map((function(name,i){return JSON.stringify(name)+": d["+i+"]"})).join(",")+"}")}function inferColumns(rows){var columnSet=Object.create(null),columns=[];return rows.forEach((function(row){for(var column in row)column in columnSet||columns.push(columnSet[column]=column)})),columns}function dsv_pad(value,width){var s=value+"",length=s.length;return length<width?new Array(width-length+1).join(0)+s:s}function formatDate(date){var hours=date.getUTCHours(),minutes=date.getUTCMinutes(),seconds=date.getUTCSeconds(),milliseconds=date.getUTCMilliseconds();return isNaN(date)?"Invalid Date":function dsv_formatYear(year){return year<0?"-"+dsv_pad(-year,6):year>9999?"+"+dsv_pad(year,6):dsv_pad(year,4)}(date.getUTCFullYear())+"-"+dsv_pad(date.getUTCMonth()+1,2)+"-"+dsv_pad(date.getUTCDate(),2)+(milliseconds?"T"+dsv_pad(hours,2)+":"+dsv_pad(minutes,2)+":"+dsv_pad(seconds,2)+"."+dsv_pad(milliseconds,3)+"Z":seconds?"T"+dsv_pad(hours,2)+":"+dsv_pad(minutes,2)+":"+dsv_pad(seconds,2)+"Z":minutes||hours?"T"+dsv_pad(hours,2)+":"+dsv_pad(minutes,2)+"Z":"")}var dsv=function(delimiter){var reFormat=new RegExp('["'+delimiter+"\n\r]"),DELIMITER=delimiter.charCodeAt(0);function parseRows(text,f){var t,rows=[],N=text.length,I=0,n=0,eof=N<=0,eol=!1;function token(){if(eof)return EOF;if(eol)return eol=!1,EOL;var i,c,j=I;if(text.charCodeAt(j)===QUOTE){for(;I++<N&&text.charCodeAt(I)!==QUOTE||text.charCodeAt(++I)===QUOTE;);return(i=I)>=N?eof=!0:(c=text.charCodeAt(I++))===NEWLINE?eol=!0:c===RETURN&&(eol=!0,text.charCodeAt(I)===NEWLINE&&++I),text.slice(j+1,i-1).replace(/""/g,'"')}for(;I<N;){if((c=text.charCodeAt(i=I++))===NEWLINE)eol=!0;else if(c===RETURN)eol=!0,text.charCodeAt(I)===NEWLINE&&++I;else if(c!==DELIMITER)continue;return text.slice(j,i)}return eof=!0,text.slice(j,N)}for(text.charCodeAt(N-1)===NEWLINE&&--N,text.charCodeAt(N-1)===RETURN&&--N;(t=token())!==EOF;){for(var row=[];t!==EOL&&t!==EOF;)row.push(t),t=token();f&&null==(row=f(row,n++))||rows.push(row)}return rows}function preformatBody(rows,columns){return rows.map((function(row){return columns.map((function(column){return formatValue(row[column])})).join(delimiter)}))}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(value){return null==value?"":value instanceof Date?formatDate(value):reFormat.test(value+="")?'"'+value.replace(/"/g,'""')+'"':value}return{parse:function parse(text,f){var convert,columns,rows=parseRows(text,(function(row,i){if(convert)return convert(row,i-1);columns=row,convert=f?function customConverter(columns,f){var object=objectConverter(columns);return function(row,i){return f(object(row),i,columns)}}(row,f):objectConverter(row)}));return rows.columns=columns||[],rows},parseRows:parseRows,format:function format(rows,columns){return null==columns&&(columns=inferColumns(rows)),[columns.map(formatValue).join(delimiter)].concat(preformatBody(rows,columns)).join("\n")},formatBody:function formatBody(rows,columns){return null==columns&&(columns=inferColumns(rows)),preformatBody(rows,columns).join("\n")},formatRows:function formatRows(rows){return rows.map(formatRow).join("\n")}}},csv=dsv(","),tsv=(csv.parse,csv.parseRows,csv.format,csv.formatBody,csv.formatRows,dsv("\t"));tsv.parse,tsv.parseRows,tsv.format,tsv.formatBody,tsv.formatRows;function delimitedFormat(delimiter){const parse=function(data,format){const delim={delimiter:delimiter};return dsv_dsv(data,format?Object(vega_util.o)(format,delim):delim)};return parse.responseType="text",parse}function dsv_dsv(data,format){return format.header&&(data=format.header.map(vega_util.Y).join(format.delimiter)+"\n"+data),dsv(format.delimiter).parse(data+"")}dsv_dsv.responseType="text";var json=__webpack_require__(119),identity=function(x){return x},src_transform=function(transform){if(null==transform)return identity;var x0,y0,kx=transform.scale[0],ky=transform.scale[1],dx=transform.translate[0],dy=transform.translate[1];return function(input,i){i||(x0=y0=0);var j=2,n=input.length,output=new Array(n);for(output[0]=(x0+=input[0])*kx+dx,output[1]=(y0+=input[1])*ky+dy;j<n;)output[j]=input[j],++j;return output}},src_reverse=function(array,n){for(var t,j=array.length,i=j-n;i<--j;)t=array[i],array[i++]=array[j],array[j]=t},src_feature=function(topology,o){return"string"==typeof o&&(o=topology.objects[o]),"GeometryCollection"===o.type?{type:"FeatureCollection",features:o.geometries.map((function(o){return feature_feature(topology,o)}))}:feature_feature(topology,o)};function feature_feature(topology,o){var id=o.id,bbox=o.bbox,properties=null==o.properties?{}:o.properties,geometry=feature_object(topology,o);return null==id&&null==bbox?{type:"Feature",properties:properties,geometry:geometry}:null==bbox?{type:"Feature",id:id,properties:properties,geometry:geometry}:{type:"Feature",id:id,bbox:bbox,properties:properties,geometry:geometry}}function feature_object(topology,o){var transformPoint=src_transform(topology.transform),arcs=topology.arcs;function arc(i,points){points.length&&points.pop();for(var a=arcs[i<0?~i:i],k=0,n=a.length;k<n;++k)points.push(transformPoint(a[k],k));i<0&&src_reverse(points,n)}function point(p){return transformPoint(p)}function line(arcs){for(var points=[],i=0,n=arcs.length;i<n;++i)arc(arcs[i],points);return points.length<2&&points.push(points[0]),points}function ring(arcs){for(var points=line(arcs);points.length<4;)points.push(points[0]);return points}function polygon(arcs){return arcs.map(ring)}return function geometry(o){var coordinates,type=o.type;switch(type){case"GeometryCollection":return{type:type,geometries:o.geometries.map(geometry)};case"Point":coordinates=point(o.coordinates);break;case"MultiPoint":coordinates=o.coordinates.map(point);break;case"LineString":coordinates=line(o.arcs);break;case"MultiLineString":coordinates=o.arcs.map(line);break;case"Polygon":coordinates=polygon(o.arcs);break;case"MultiPolygon":coordinates=o.arcs.map(polygon);break;default:return null}return{type:type,coordinates:coordinates}}(o)}var stitch=function(topology,arcs){var stitchedArcs={},fragmentByStart={},fragmentByEnd={},fragments=[],emptyIndex=-1;function flush(fragmentByEnd,fragmentByStart){for(var k in fragmentByEnd){var f=fragmentByEnd[k];delete fragmentByStart[f.start],delete f.start,delete f.end,f.forEach((function(i){stitchedArcs[i<0?~i:i]=1})),fragments.push(f)}}return arcs.forEach((function(i,j){var t,arc=topology.arcs[i<0?~i:i];arc.length<3&&!arc[1][0]&&!arc[1][1]&&(t=arcs[++emptyIndex],arcs[emptyIndex]=i,arcs[j]=t)})),arcs.forEach((function(i){var f,g,e=function ends(i){var p1,arc=topology.arcs[i<0?~i:i],p0=arc[0];topology.transform?(p1=[0,0],arc.forEach((function(dp){p1[0]+=dp[0],p1[1]+=dp[1]}))):p1=arc[arc.length-1];return i<0?[p1,p0]:[p0,p1]}(i),start=e[0],end=e[1];if(f=fragmentByEnd[start])if(delete fragmentByEnd[f.end],f.push(i),f.end=end,g=fragmentByStart[end]){delete fragmentByStart[g.start];var fg=g===f?f:f.concat(g);fragmentByStart[fg.start=f.start]=fragmentByEnd[fg.end=g.end]=fg}else fragmentByStart[f.start]=fragmentByEnd[f.end]=f;else if(f=fragmentByStart[end])if(delete fragmentByStart[f.start],f.unshift(i),f.start=start,g=fragmentByEnd[start]){delete fragmentByEnd[g.end];var gf=g===f?f:g.concat(f);fragmentByStart[gf.start=g.start]=fragmentByEnd[gf.end=f.end]=gf}else fragmentByStart[f.start]=fragmentByEnd[f.end]=f;else fragmentByStart[(f=[i]).start=start]=fragmentByEnd[f.end=end]=f})),flush(fragmentByEnd,fragmentByStart),flush(fragmentByStart,fragmentByEnd),arcs.forEach((function(i){stitchedArcs[i<0?~i:i]||fragments.push([i])})),fragments},mesh=function(topology){return feature_object(topology,meshArcs.apply(this,arguments))};function meshArcs(topology,object,filter){var arcs,i,n;if(arguments.length>1)arcs=function extractArcs(topology,object,filter){var geom,arcs=[],geomsByArc=[];function extract0(i){var j=i<0?~i:i;(geomsByArc[j]||(geomsByArc[j]=[])).push({i:i,g:geom})}function extract1(arcs){arcs.forEach(extract0)}function extract2(arcs){arcs.forEach(extract1)}return function geometry(o){switch(geom=o,o.type){case"GeometryCollection":o.geometries.forEach(geometry);break;case"LineString":extract1(o.arcs);break;case"MultiLineString":case"Polygon":extract2(o.arcs);break;case"MultiPolygon":!function extract3(arcs){arcs.forEach(extract2)}(o.arcs)}}(object),geomsByArc.forEach(null==filter?function(geoms){arcs.push(geoms[0].i)}:function(geoms){filter(geoms[0].g,geoms[geoms.length-1].g)&&arcs.push(geoms[0].i)}),arcs}(0,object,filter);else for(i=0,arcs=new Array(n=topology.arcs.length);i<n;++i)arcs[i]=i;return{type:"MultiLineString",arcs:stitch(topology,arcs)}}const topojson_filters={interior:(a,b)=>a!==b,exterior:(a,b)=>a===b};function topojson(data,format){let method,object,property,filter;return data=Object(json.a)(data,format),format&&format.feature?(method=src_feature,property=format.feature):format&&format.mesh?(method=mesh,property=format.mesh,filter=topojson_filters[format.filter]):Object(vega_util.n)("Missing TopoJSON feature or mesh parameter."),(object=(object=data.objects[property])?method(data,object,filter):Object(vega_util.n)("Invalid TopoJSON object: "+property))&&object.features||[object]}topojson.responseType="json";const formats_format={dsv:dsv_dsv,csv:delimitedFormat(","),tsv:delimitedFormat("\t"),json:json.a,topojson:topojson};function formats_formats(name,reader){return arguments.length>1?(formats_format[name]=reader,this):Object(vega_util.v)(formats_format,name)?formats_format[name]:null}function responseType(type){const f=formats_formats(type);return f&&f.responseType||"text"}var interval_t0=new Date,interval_t1=new Date;function newInterval(floori,offseti,count,field){function interval(date){return floori(date=0===arguments.length?new Date:new Date(+date)),date}return interval.floor=function(date){return floori(date=new Date(+date)),date},interval.ceil=function(date){return floori(date=new Date(date-1)),offseti(date,1),floori(date),date},interval.round=function(date){var d0=interval(date),d1=interval.ceil(date);return date-d0<d1-date?d0:d1},interval.offset=function(date,step){return offseti(date=new Date(+date),null==step?1:Math.floor(step)),date},interval.range=function(start,stop,step){var previous,range=[];if(start=interval.ceil(start),step=null==step?1:Math.floor(step),!(start<stop&&step>0))return range;do{range.push(previous=new Date(+start)),offseti(start,step),floori(start)}while(previous<start&&start<stop);return range},interval.filter=function(test){return newInterval((function(date){if(date>=date)for(;floori(date),!test(date);)date.setTime(date-1)}),(function(date,step){if(date>=date)if(step<0)for(;++step<=0;)for(;offseti(date,-1),!test(date););else for(;--step>=0;)for(;offseti(date,1),!test(date););}))},count&&(interval.count=function(start,end){return interval_t0.setTime(+start),interval_t1.setTime(+end),floori(interval_t0),floori(interval_t1),Math.floor(count(interval_t0,interval_t1))},interval.every=function(step){return step=Math.floor(step),isFinite(step)&&step>0?step>1?interval.filter(field?function(d){return field(d)%step==0}:function(d){return interval.count(0,d)%step==0}):interval:null}),interval}var durationMinute=6e4,durationWeek=6048e5;function utcWeekday(i){return newInterval((function(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCDate(date.getUTCDate()+7*step)}),(function(start,end){return(end-start)/durationWeek}))}var utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6),utcDay=(utcSunday.range,utcMonday.range,utcTuesday.range,utcWednesday.range,utcThursday.range,utcFriday.range,utcSaturday.range,newInterval((function(date){date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCDate(date.getUTCDate()+step)}),(function(start,end){return(end-start)/864e5}),(function(date){return date.getUTCDate()-1}))),src_utcDay=utcDay;utcDay.range;function weekday(i){return newInterval((function(date){date.setDate(date.getDate()-(date.getDay()+7-i)%7),date.setHours(0,0,0,0)}),(function(date,step){date.setDate(date.getDate()+7*step)}),(function(start,end){return(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*durationMinute)/durationWeek}))}var sunday=weekday(0),monday=weekday(1),tuesday=weekday(2),wednesday=weekday(3),thursday=weekday(4),friday=weekday(5),saturday=weekday(6),day_day=(sunday.range,monday.range,tuesday.range,wednesday.range,thursday.range,friday.range,saturday.range,newInterval((function(date){date.setHours(0,0,0,0)}),(function(date,step){date.setDate(date.getDate()+step)}),(function(start,end){return(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*durationMinute)/864e5}),(function(date){return date.getDate()-1}))),src_day=day_day,year_year=(day_day.range,newInterval((function(date){date.setMonth(0,1),date.setHours(0,0,0,0)}),(function(date,step){date.setFullYear(date.getFullYear()+step)}),(function(start,end){return end.getFullYear()-start.getFullYear()}),(function(date){return date.getFullYear()})));year_year.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval((function(date){date.setFullYear(Math.floor(date.getFullYear()/k)*k),date.setMonth(0,1),date.setHours(0,0,0,0)}),(function(date,step){date.setFullYear(date.getFullYear()+step*k)})):null};var src_year=year_year,utcYear=(year_year.range,newInterval((function(date){date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step)}),(function(start,end){return end.getUTCFullYear()-start.getUTCFullYear()}),(function(date){return date.getUTCFullYear()})));utcYear.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval((function(date){date.setUTCFullYear(Math.floor(date.getUTCFullYear()/k)*k),date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step*k)})):null};var src_utcYear=utcYear;utcYear.range;function localDate(d){if(0<=d.y&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);return date.setFullYear(d.y),date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function utcDate(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));return date.setUTCFullYear(d.y),date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function locale_newDate(y,m,d){return{y:y,m:m,d:d,H:0,M:0,S:0,L:0}}var defaultLocale_locale,timeParse,utcParse,pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function locale_pad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function requote(s){return s.replace(requoteRe,"\\$&")}function formatRe(names){return new RegExp("^(?:"+names.map(requote).join("|")+")","i")}function formatLookup(names){for(var map={},i=-1,n=names.length;++i<n;)map[names[i].toLowerCase()]=i;return map}function parseWeekdayNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1}function parseWeekdayNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.u=+n[0],i+n[0].length):-1}function parseWeekNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.U=+n[0],i+n[0].length):-1}function parseWeekNumberISO(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.V=+n[0],i+n[0].length):-1}function parseWeekNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.W=+n[0],i+n[0].length):-1}function parseFullYear(d,string,i){var n=numberRe.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1}function parseYear(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function parseZone(d,string,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i,i+6));return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function parseQuarter(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.q=3*n[0]-3,i+n[0].length):-1}function parseMonthNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.m=n[0]-1,i+n[0].length):-1}function parseDayOfMonth(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}function parseDayOfYear(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1}function parseHour24(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function parseMinutes(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1}function parseSeconds(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1}function parseMilliseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1}function parseMicroseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+6));return n?(d.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function parseLiteralPercent(d,string,i){var n=percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function parseUnixTimestamp(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.Q=+n[0],i+n[0].length):-1}function parseUnixTimestampSeconds(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.s=+n[0],i+n[0].length):-1}function formatDayOfMonth(d,p){return locale_pad(d.getDate(),p,2)}function formatHour24(d,p){return locale_pad(d.getHours(),p,2)}function formatHour12(d,p){return locale_pad(d.getHours()%12||12,p,2)}function formatDayOfYear(d,p){return locale_pad(1+src_day.count(src_year(d),d),p,3)}function formatMilliseconds(d,p){return locale_pad(d.getMilliseconds(),p,3)}function formatMicroseconds(d,p){return formatMilliseconds(d,p)+"000"}function formatMonthNumber(d,p){return locale_pad(d.getMonth()+1,p,2)}function formatMinutes(d,p){return locale_pad(d.getMinutes(),p,2)}function formatSeconds(d,p){return locale_pad(d.getSeconds(),p,2)}function formatWeekdayNumberMonday(d){var day=d.getDay();return 0===day?7:day}function formatWeekNumberSunday(d,p){return locale_pad(sunday.count(src_year(d)-1,d),p,2)}function formatWeekNumberISO(d,p){var day=d.getDay();return d=day>=4||0===day?thursday(d):thursday.ceil(d),locale_pad(thursday.count(src_year(d),d)+(4===src_year(d).getDay()),p,2)}function formatWeekdayNumberSunday(d){return d.getDay()}function formatWeekNumberMonday(d,p){return locale_pad(monday.count(src_year(d)-1,d),p,2)}function locale_formatYear(d,p){return locale_pad(d.getFullYear()%100,p,2)}function formatFullYear(d,p){return locale_pad(d.getFullYear()%1e4,p,4)}function formatZone(d){var z=d.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+locale_pad(z/60|0,"0",2)+locale_pad(z%60,"0",2)}function formatUTCDayOfMonth(d,p){return locale_pad(d.getUTCDate(),p,2)}function formatUTCHour24(d,p){return locale_pad(d.getUTCHours(),p,2)}function formatUTCHour12(d,p){return locale_pad(d.getUTCHours()%12||12,p,2)}function formatUTCDayOfYear(d,p){return locale_pad(1+src_utcDay.count(src_utcYear(d),d),p,3)}function formatUTCMilliseconds(d,p){return locale_pad(d.getUTCMilliseconds(),p,3)}function formatUTCMicroseconds(d,p){return formatUTCMilliseconds(d,p)+"000"}function formatUTCMonthNumber(d,p){return locale_pad(d.getUTCMonth()+1,p,2)}function formatUTCMinutes(d,p){return locale_pad(d.getUTCMinutes(),p,2)}function formatUTCSeconds(d,p){return locale_pad(d.getUTCSeconds(),p,2)}function formatUTCWeekdayNumberMonday(d){var dow=d.getUTCDay();return 0===dow?7:dow}function formatUTCWeekNumberSunday(d,p){return locale_pad(utcSunday.count(src_utcYear(d)-1,d),p,2)}function formatUTCWeekNumberISO(d,p){var day=d.getUTCDay();return d=day>=4||0===day?utcThursday(d):utcThursday.ceil(d),locale_pad(utcThursday.count(src_utcYear(d),d)+(4===src_utcYear(d).getUTCDay()),p,2)}function formatUTCWeekdayNumberSunday(d){return d.getUTCDay()}function formatUTCWeekNumberMonday(d,p){return locale_pad(utcMonday.count(src_utcYear(d)-1,d),p,2)}function formatUTCYear(d,p){return locale_pad(d.getUTCFullYear()%100,p,2)}function formatUTCFullYear(d,p){return locale_pad(d.getUTCFullYear()%1e4,p,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(d){return+d}function formatUnixTimestampSeconds(d){return Math.floor(+d/1e3)}!function defaultLocale(definition){return defaultLocale_locale=function formatLocale(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths,periodRe=formatRe(locale_periods),periodLookup=formatLookup(locale_periods),weekdayRe=formatRe(locale_weekdays),weekdayLookup=formatLookup(locale_weekdays),shortWeekdayRe=formatRe(locale_shortWeekdays),shortWeekdayLookup=formatLookup(locale_shortWeekdays),monthRe=formatRe(locale_months),monthLookup=formatLookup(locale_months),shortMonthRe=formatRe(locale_shortMonths),shortMonthLookup=formatLookup(locale_shortMonths),formats={a:function formatShortWeekday(d){return locale_shortWeekdays[d.getDay()]},A:function formatWeekday(d){return locale_weekdays[d.getDay()]},b:function formatShortMonth(d){return locale_shortMonths[d.getMonth()]},B:function formatMonth(d){return locale_months[d.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function formatPeriod(d){return locale_periods[+(d.getHours()>=12)]},q:function formatQuarter(d){return 1+~~(d.getMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:locale_formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},utcFormats={a:function formatUTCShortWeekday(d){return locale_shortWeekdays[d.getUTCDay()]},A:function formatUTCWeekday(d){return locale_weekdays[d.getUTCDay()]},b:function formatUTCShortMonth(d){return locale_shortMonths[d.getUTCMonth()]},B:function formatUTCMonth(d){return locale_months[d.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function formatUTCPeriod(d){return locale_periods[+(d.getUTCHours()>=12)]},q:function formatUTCQuarter(d){return 1+~~(d.getUTCMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},parses={a:function parseShortWeekday(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},A:function parseWeekday(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},b:function parseShortMonth(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup[n[0].toLowerCase()],i+n[0].length):-1},B:function parseMonth(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup[n[0].toLowerCase()],i+n[0].length):-1},c:function parseLocaleDateTime(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function parsePeriod(d,string,i){var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup[n[0].toLowerCase()],i+n[0].length):-1},q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function parseLocaleDate(d,string,i){return parseSpecifier(d,locale_date,string,i)},X:function parseLocaleTime(d,string,i){return parseSpecifier(d,locale_time,string,i)},y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function newFormat(specifier,formats){return function(date){var c,pad,format,string=[],i=-1,j=0,n=specifier.length;for(date instanceof Date||(date=new Date(+date));++i<n;)37===specifier.charCodeAt(i)&&(string.push(specifier.slice(j,i)),null!=(pad=pads[c=specifier.charAt(++i)])?c=specifier.charAt(++i):pad="e"===c?" ":"0",(format=formats[c])&&(c=format(date,pad)),string.push(c),j=i+1);return string.push(specifier.slice(j,i)),string.join("")}}function newParse(specifier,Z){return function(string){var week,day,d=locale_newDate(1900,void 0,1);if(parseSpecifier(d,specifier,string+="",0)!=string.length)return null;if("Q"in d)return new Date(d.Q);if("s"in d)return new Date(1e3*d.s+("L"in d?d.L:0));if(!Z||"Z"in d||(d.Z=0),"p"in d&&(d.H=d.H%12+12*d.p),void 0===d.m&&(d.m="q"in d?d.q:0),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(day=(week=utcDate(locale_newDate(d.y,0,1))).getUTCDay(),week=day>4||0===day?utcMonday.ceil(week):utcMonday(week),week=src_utcDay.offset(week,7*(d.V-1)),d.y=week.getUTCFullYear(),d.m=week.getUTCMonth(),d.d=week.getUTCDate()+(d.w+6)%7):(day=(week=localDate(locale_newDate(d.y,0,1))).getDay(),week=day>4||0===day?monday.ceil(week):monday(week),week=src_day.offset(week,7*(d.V-1)),d.y=week.getFullYear(),d.m=week.getMonth(),d.d=week.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),day="Z"in d?utcDate(locale_newDate(d.y,0,1)).getUTCDay():localDate(locale_newDate(d.y,0,1)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(day+5)%7:d.w+7*d.U-(day+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,utcDate(d)):localDate(d)}}function parseSpecifier(d,specifier,string,j){for(var c,parse,i=0,n=specifier.length,m=string.length;i<n;){if(j>=m)return-1;if(37===(c=specifier.charCodeAt(i++))){if(c=specifier.charAt(i++),!(parse=parses[c in pads?specifier.charAt(i++):c])||(j=parse(d,string,j))<0)return-1}else if(c!=string.charCodeAt(j++))return-1}return j}return(formats.x=newFormat(locale_date,formats),formats.X=newFormat(locale_time,formats),formats.c=newFormat(locale_dateTime,formats),utcFormats.x=newFormat(locale_date,utcFormats),utcFormats.X=newFormat(locale_time,utcFormats),utcFormats.c=newFormat(locale_dateTime,utcFormats),{format:function(specifier){var f=newFormat(specifier+="",formats);return f.toString=function(){return specifier},f},parse:function(specifier){var p=newParse(specifier+="",!1);return p.toString=function(){return specifier},p},utcFormat:function(specifier){var f=newFormat(specifier+="",utcFormats);return f.toString=function(){return specifier},f},utcParse:function(specifier){var p=newParse(specifier+="",!0);return p.toString=function(){return specifier},p}})}(definition),defaultLocale_locale.format,timeParse=defaultLocale_locale.parse,defaultLocale_locale.utcFormat,utcParse=defaultLocale_locale.utcParse,defaultLocale_locale}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var index_browser_loader=function(fetch,fs){return function(options){return{options:options||{},sanitize:sanitize,load:load,fileAccess:!!fs,file:fileLoader(fs),http:httpLoader(fetch)}}}("undefined"!=typeof fetch&&fetch,null);const load_parse=function(data,schema,dateParse){const reader=formats_formats((schema=schema||{}).type||"json");return reader||Object(vega_util.n)("Unknown data format type: "+schema.type),data=reader(data,schema),schema.parse&&function read_parse(data,types,dateParse){if(!data.length)return;dateParse=dateParse||timeParse;var parsers,datum,field,i,j,n,m,fields=data.columns||Object.keys(data[0]);"auto"===types&&(types=inferTypes(data,fields));for(fields=Object.keys(types),parsers=fields.map((function(field){var parts,pattern,type=types[field];if(type&&(0===type.indexOf("date:")||0===type.indexOf("utc:")))return("'"===(pattern=(parts=type.split(/:(.+)?/,2))[1])[0]&&"'"===pattern[pattern.length-1]||'"'===pattern[0]&&'"'===pattern[pattern.length-1])&&(pattern=pattern.slice(1,-1)),"utc"===parts[0]?utcParse(pattern):dateParse(pattern);if(!typeParsers[type])throw Error("Illegal format pattern: "+field+":"+type);return typeParsers[type]})),i=0,n=data.length,m=fields.length;i<n;++i)for(datum=data[i],j=0;j<m;++j)field=fields[j],datum[field]=parsers[j](datum[field])}(data,schema.parse,dateParse),Object(vega_util.v)(data,"columns")&&delete data.columns,data};var on_SKIP={skip:!0};function onStream(df,stream,target,update,params,options){var func,op,opt=Object(vega_util.o)({},options,on_SKIP);Object(vega_util.D)(target)||(target=Object(vega_util.l)(target)),void 0===update?func=e=>df.touch(target(e)):Object(vega_util.D)(update)?(op=new Operator(null,update,params,!1),func=e=>{op.evaluate(e);const t=target(e),v=op.value;isChangeSet(v)?df.pulse(t,v,options):df.update(t,v,opt)}):func=e=>df.update(target(e),update,opt),stream.apply(func)}function onOperator(df,source,target,update,params,options){if(void 0===update)source.targets().add(target);else{const opt=options||{},op=new Operator(null,function updater(target,update){return update=Object(vega_util.D)(update)?update:Object(vega_util.l)(update),target?function(_,pulse){const value=update(_,pulse);return target.skip()||(target.skip(value!==this.value).value=value),value}:update}(target,update),params,!1);op.modified(opt.force),op.rank=source.rank,source.targets().add(op),target&&(op.skip(!0),op.value=target.value,op.targets().add(target),df.connect(target,[op]))}}var StopPropagation={};function Pulse(dataflow,stamp,encode){this.dataflow=dataflow,this.stamp=null==stamp?-1:stamp,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=encode||null}var Pulse_prototype=Pulse.prototype;function addFilter(a,b){return a?function(t,i){return a(t,i)&&b(t,i)}:b}function materialize(data,filter){var out=[];return Object(vega_util.hb)(data,filter,(function(_){out.push(_)})),out}function Pulse_filter(pulse,flags){var map={};return pulse.visit(flags,(function(t){map[tupleid(t)]=1})),function(t){return map[tupleid(t)]?null:t}}function MultiPulse(dataflow,stamp,pulses,encode){var pulse,hash,i,n,f,p=this,c=0;for(this.dataflow=dataflow,this.stamp=stamp,this.fields=null,this.encode=encode||null,this.pulses=pulses,i=0,n=pulses.length;i<n;++i)if((pulse=pulses[i]).stamp===stamp){if(pulse.fields)for(f in hash=p.fields||(p.fields={}),pulse.fields)hash[f]=1;pulse.changed(p.ADD)&&(c|=p.ADD),pulse.changed(p.REM)&&(c|=p.REM),pulse.changed(p.MOD)&&(c|=p.MOD)}this.changes=c}Pulse_prototype.StopPropagation=StopPropagation,Pulse_prototype.ADD=1,Pulse_prototype.REM=2,Pulse_prototype.MOD=4,Pulse_prototype.ADD_REM=3,Pulse_prototype.ADD_MOD=5,Pulse_prototype.ALL=7,Pulse_prototype.REFLOW=8,Pulse_prototype.SOURCE=16,Pulse_prototype.NO_SOURCE=32,Pulse_prototype.NO_FIELDS=64,Pulse_prototype.fork=function(flags){return new Pulse(this.dataflow).init(this,flags)},Pulse_prototype.clone=function(){var p=this.fork(7);return p.add=p.add.slice(),p.rem=p.rem.slice(),p.mod=p.mod.slice(),p.source&&(p.source=p.source.slice()),p.materialize(23)},Pulse_prototype.addAll=function(){var p=this;return this.source&&this.source.length!==this.add.length?((p=new Pulse(this.dataflow).init(this)).add=p.source,p):p},Pulse_prototype.init=function(src,flags){var p=this;return p.stamp=src.stamp,p.encode=src.encode,!src.fields||64&flags||(p.fields=src.fields),1&flags?(p.addF=src.addF,p.add=src.add):(p.addF=null,p.add=[]),2&flags?(p.remF=src.remF,p.rem=src.rem):(p.remF=null,p.rem=[]),4&flags?(p.modF=src.modF,p.mod=src.mod):(p.modF=null,p.mod=[]),32&flags?(p.srcF=null,p.source=null):(p.srcF=src.srcF,p.source=src.source),p},Pulse_prototype.runAfter=function(func){this.dataflow.runAfter(func)},Pulse_prototype.changed=function(flags){var f=flags||7;return 1&f&&this.add.length||2&f&&this.rem.length||4&f&&this.mod.length},Pulse_prototype.reflow=function(fork){if(fork)return this.fork(7).reflow();var len=this.add.length,src=this.source&&this.source.length;return src&&src!==len&&(this.mod=this.source,len&&this.filter(4,Pulse_filter(this,1))),this},Pulse_prototype.modifies=function(_){var hash=this.fields||(this.fields={});return Object(vega_util.A)(_)?_.forEach(f=>hash[f]=!0):hash[_]=!0,this},Pulse_prototype.modified=function(_,nomod){var fields=this.fields;return!(!nomod&&!this.mod.length||!fields)&&(arguments.length?Object(vega_util.A)(_)?_.some((function(f){return fields[f]})):fields[_]:!!fields)},Pulse_prototype.filter=function(flags,filter){var p=this;return 1&flags&&(p.addF=addFilter(p.addF,filter)),2&flags&&(p.remF=addFilter(p.remF,filter)),4&flags&&(p.modF=addFilter(p.modF,filter)),16&flags&&(p.srcF=addFilter(p.srcF,filter)),p},Pulse_prototype.materialize=function(flags){var p=this;return 1&(flags=flags||7)&&p.addF&&(p.add=materialize(p.add,p.addF),p.addF=null),2&flags&&p.remF&&(p.rem=materialize(p.rem,p.remF),p.remF=null),4&flags&&p.modF&&(p.mod=materialize(p.mod,p.modF),p.modF=null),16&flags&&p.srcF&&(p.source=p.source.filter(p.srcF),p.srcF=null),p},Pulse_prototype.visit=function(flags,visitor){var src,sum,p=this,v=visitor;return 16&flags?(Object(vega_util.hb)(p.source,p.srcF,v),p):(1&flags&&Object(vega_util.hb)(p.add,p.addF,v),2&flags&&Object(vega_util.hb)(p.rem,p.remF,v),4&flags&&Object(vega_util.hb)(p.mod,p.modF,v),8&flags&&(src=p.source)&&((sum=p.add.length+p.mod.length)===src.length||(sum?Object(vega_util.hb)(src,Pulse_filter(p,5),v):Object(vega_util.hb)(src,p.srcF,v))),p)};var MultiPulse_prototype=Object(vega_util.y)(MultiPulse,Pulse);function reentrant(df){return df.error("Dataflow already running. Use runAsync() to chain invocations."),df}MultiPulse_prototype.fork=function(flags){var p=new Pulse(this.dataflow).init(this,flags&this.NO_FIELDS);return void 0!==flags&&(flags&p.ADD&&this.visit(p.ADD,(function(t){return p.add.push(t)})),flags&p.REM&&this.visit(p.REM,(function(t){return p.rem.push(t)})),flags&p.MOD&&this.visit(p.MOD,(function(t){return p.mod.push(t)}))),p},MultiPulse_prototype.changed=function(flags){return this.changes&flags},MultiPulse_prototype.modified=function(_){var p=this,fields=p.fields;return fields&&p.changes&p.MOD?Object(vega_util.A)(_)?_.some((function(f){return fields[f]})):fields[_]:0},MultiPulse_prototype.filter=function(){Object(vega_util.n)("MultiPulse does not support filtering.")},MultiPulse_prototype.materialize=function(){Object(vega_util.n)("MultiPulse does not support materialization.")},MultiPulse_prototype.visit=function(flags,visitor){var p=this,pulses=p.pulses,n=pulses.length,i=0;if(flags&p.SOURCE)for(;i<n;++i)pulses[i].visit(flags,visitor);else for(;i<n;++i)pulses[i].stamp===p.stamp&&pulses[i].visit(flags,visitor);return p};var NO_OPT={skip:!1,force:!1};function Heap(cmp){var nodes=[];return{clear:()=>nodes=[],size:()=>nodes.length,peek:()=>nodes[0],push:x=>(nodes.push(x),siftdown(nodes,0,nodes.length-1,cmp)),pop:()=>{var item,last=nodes.pop();return nodes.length?(item=nodes[0],nodes[0]=last,function siftup(array,idx,cmp){var ridx,start=idx,end=array.length,item=array[idx],cidx=1+(idx<<1);for(;cidx<end;)(ridx=cidx+1)<end&&cmp(array[cidx],array[ridx])>=0&&(cidx=ridx),array[idx]=array[cidx],cidx=1+((idx=cidx)<<1);return array[idx]=item,siftdown(array,start,idx,cmp)}(nodes,0,cmp)):item=last,item}}}function siftdown(array,start,idx,cmp){var item,parent,pidx;for(item=array[idx];idx>start&&cmp(item,parent=array[pidx=idx-1>>1])<0;)array[idx]=parent,idx=pidx;return array[idx]=item}function Dataflow(){this.logger(Object(vega_util.K)()),this.logLevel(vega_util.b),this._clock=0,this._rank=0;try{this._loader=index_browser_loader()}catch(e){}this._touched=UniqueList(vega_util.w),this._input={},this._pulse=null,this._heap=Heap((a,b)=>a.qrank-b.qrank),this._postrun=[]}var Dataflow_prototype=Dataflow.prototype;function logMethod(method){return function(){return this._log[method].apply(this,arguments)}}function Transform(init,params){Operator.call(this,init,null,params)}Dataflow_prototype.stamp=function(){return this._clock},Dataflow_prototype.loader=function(_){return arguments.length?(this._loader=_,this):this._loader},Dataflow_prototype.cleanThreshold=1e4,Dataflow_prototype.add=function(init,update,params,react){var op,shift=1;return init instanceof Operator?op=init:init&&init.prototype instanceof Operator?op=new init:Object(vega_util.D)(init)?op=new Operator(null,init):(shift=0,op=new Operator(init,update)),this.rank(op),shift&&(react=params,params=update),params&&this.connect(op,op.parameters(params,react)),this.touch(op),op},Dataflow_prototype.connect=function(target,sources){var i,n,targetRank=target.rank;for(i=0,n=sources.length;i<n;++i)if(targetRank<sources[i].rank)return void this.rerank(target)},Dataflow_prototype.rank=function rank(op){op.rank=++this._rank},Dataflow_prototype.rerank=function rerank(op){for(var cur,list,i,queue=[op];queue.length;)if(this.rank(cur=queue.pop()),list=cur._targets)for(i=list.length;--i>=0;)queue.push(cur=list[i]),cur===op&&Object(vega_util.n)("Cycle detected in dataflow graph.")},Dataflow_prototype.pulse=function update_pulse(op,changeset,options){this.touch(op,options||NO_OPT);var p=new Pulse(this,this._clock+(this._pulse?0:1)),t=op.pulse&&op.pulse.source||[];return p.target=op,this._input[op.id]=changeset.pulse(p,t),this},Dataflow_prototype.touch=function update_touch(op,options){var opt=options||NO_OPT;return this._pulse?this._enqueue(op):this._touched.add(op),opt.skip&&op.skip(!0),this},Dataflow_prototype.update=function update_update(op,value,options){var opt=options||NO_OPT;return(op.set(value)||opt.force)&&this.touch(op,opt),this},Dataflow_prototype.changeset=ChangeSet_changeset,Dataflow_prototype.ingest=function load_ingest(target,data,format){return this.pulse(target,this.changeset().insert(load_parse(data,format)))},Dataflow_prototype.parse=load_parse,Dataflow_prototype.preload=async function preload(target,url,format){const df=this,pending=df._pending||function loadPending(df){var accept,pending=new Promise((function(a){accept=a}));return pending.requests=0,pending.done=function(){0==--pending.requests&&(df._pending=null,accept(df))},df._pending=pending}(df);pending.requests+=1;const res=await df.request(url,format);return df.pulse(target,df.changeset().remove(vega_util.fb).insert(res.data||[])),pending.done(),res},Dataflow_prototype.request=async function request(url,format){const df=this;let data,status=0;try{data=await df.loader().load(url,{context:"dataflow",response:responseType(format&&format.type)});try{data=load_parse(data,format)}catch(err){status=-2,df.warn("Data ingestion failed",url,err)}}catch(err){status=-1,df.warn("Loading failed",url,err)}return{data:data,status:status}},Dataflow_prototype.events=function(source,type,filter,apply){for(var sources,df=this,s=EventStream_stream(filter,apply),send=function(e){e.dataflow=df;try{s.receive(e)}catch(error){df.error(error)}finally{df.run()}},i=0,n=(sources="string"==typeof source&&"undefined"!=typeof document?document.querySelectorAll(source):Object(vega_util.i)(source)).length;i<n;++i)sources[i].addEventListener(type,send);return s},Dataflow_prototype.on=function(source,target,update,params,options){return(source instanceof Operator?onOperator:onStream)(this,source,target,update,params,options),this},Dataflow_prototype.evaluate=async function evaluate(encode,prerun,postrun){const df=this,level=df.logLevel();if(df._pulse)return reentrant(df);if(df._pending&&await df._pending,prerun&&await asyncCallback(df,prerun),!df._touched.length)return df.info("Dataflow invoked, but nothing to do."),df;let op,next,dt,error,stamp=++df._clock,count=0;df._pulse=new Pulse(df,stamp,encode),level>=vega_util.c&&(dt=Date.now(),df.debug("-- START PROPAGATION ("+stamp+") -----")),df._touched.forEach(op=>df._enqueue(op,!0)),df._touched=UniqueList(vega_util.w);try{for(;df._heap.size()>0;)(op=df._heap.pop()).rank===op.qrank?((next=op.run(df._getPulse(op,encode))).then&&(next=await next),level>=vega_util.a&&df.debug(op.id,next===StopPropagation?"STOP":next,op),next!==StopPropagation&&op._targets&&op._targets.forEach(op=>df._enqueue(op)),++count):df._enqueue(op,!0)}catch(err){df._heap.clear(),error=err}if(df._input={},df._pulse=null,level>=vega_util.c&&(dt=Date.now()-dt,df.info("> Pulse "+stamp+": "+count+" operators; "+dt+"ms")),error&&(df._postrun=[],df.error(error)),df._postrun.length){const pr=df._postrun.sort((a,b)=>b.priority-a.priority);df._postrun=[];for(let i=0;i<pr.length;++i)await asyncCallback(df,pr[i].callback)}return postrun&&await asyncCallback(df,postrun),df},Dataflow_prototype.run=function run_run(encode,prerun,postrun){return this._pulse?reentrant(this):(this.evaluate(encode,prerun,postrun),this)},Dataflow_prototype.runAsync=async function runAsync(encode,prerun,postrun){for(;this._running;)await this._running;const clear=()=>this._running=null;return(this._running=this.evaluate(encode,prerun,postrun)).then(clear,clear),this._running},Dataflow_prototype.runAfter=function runAfter(callback,enqueue,priority){if(this._pulse||enqueue)this._postrun.push({priority:priority||0,callback:callback});else try{callback(this)}catch(err){this.error(err)}},Dataflow_prototype._enqueue=function enqueue(op,force){var q=op.stamp<this._clock;q&&(op.stamp=this._clock),(q||force)&&(op.qrank=op.rank,this._heap.push(op))},Dataflow_prototype._getPulse=function getPulse(op,encode){var s=op.source,stamp=this._clock;return s&&Object(vega_util.A)(s)?new MultiPulse(this,stamp,s.map(_=>_.pulse),encode):this._input[op.id]||function singlePulse(p,s){if(s&&s.stamp===p.stamp)return s;p=p.fork(),s&&s!==StopPropagation&&(p.source=s.source);return p}(this._pulse,s&&s.pulse)},Dataflow_prototype.logger=function(logger){return arguments.length?(this._log=logger,this):this._log},Dataflow_prototype.error=logMethod("error"),Dataflow_prototype.warn=logMethod("warn"),Dataflow_prototype.info=logMethod("info"),Dataflow_prototype.debug=logMethod("debug"),Dataflow_prototype.logLevel=logMethod("level");var Transform_prototype=Object(vega_util.y)(Transform,Operator);Transform_prototype.run=function(pulse){return pulse.stamp<this.stamp?pulse.StopPropagation:(this.skip()?this.skip(!1):rv=this.evaluate(pulse),(rv=rv||pulse).then?rv=rv.then(_=>this.pulse=_):rv!==pulse.StopPropagation&&(this.pulse=rv),rv);var rv},Transform_prototype.evaluate=function(pulse){var params=this.marshall(pulse.stamp),out=this.transform(params,pulse);return params.clear(),out},Transform_prototype.transform=function(){};var register_transforms={};function register_definition(type){var t=register_transform(type);return t&&t.Definition||null}function register_transform(type){return type=type&&type.toLowerCase(),Object(vega_util.v)(register_transforms,type)?register_transforms[type]:null}function groupkey(fields){return fields&&fields.length?1===fields.length?fields[0]:function multikey(f){return function(x){for(var n=f.length,i=1,k=String(f[0](x));i<n;++i)k+="|"+f[i](x);return k}}(fields):function(){return""}}function measureName(op,field,as){return as||op+(field?"_"+field:"")}var AggregateOps={values:measure({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:measure({name:"count",set:"cell.num"}),__count__:measure({name:"count",set:"this.missing + this.valid"}),missing:measure({name:"missing",set:"this.missing"}),valid:measure({name:"valid",set:"this.valid"}),sum:measure({name:"sum",init:"this.sum = 0;",add:"this.sum += +v;",rem:"this.sum -= v;",set:"this.sum"}),mean:measure({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.valid ? this.mean : undefined"}),average:measure({name:"average",set:"this.valid ? this.mean : undefined",req:["mean"],idx:1}),variance:measure({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : undefined",req:["mean"],idx:1}),variancep:measure({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : undefined",req:["variance"],idx:2}),stdev:measure({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : undefined",req:["variance"],idx:2}),stdevp:measure({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : undefined",req:["variance"],idx:2}),stderr:measure({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : undefined",req:["variance"],idx:2}),distinct:measure({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:measure({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:measure({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:measure({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:measure({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:measure({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:measure({name:"argmin",init:"this.argmin = undefined;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = undefined;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:measure({name:"argmax",init:"this.argmax = undefined;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = undefined;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:measure({name:"min",init:"this.min = undefined;",add:"if (v < this.min || this.min === undefined) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (Number.isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:measure({name:"max",init:"this.max = undefined;",add:"if (v > this.max || this.max === undefined) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (Number.isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},ValidAggregateOps=Object.keys(AggregateOps);function createMeasure(op,name){return AggregateOps[op](name)}function measure(base){return function(out){var m=Object(vega_util.o)({init:"",add:"",rem:"",idx:0},base);return m.out=out||base.name,m}}function compareIndex(a,b){return a.idx-b.idx}function compileMeasures(agg,field){var get=field||vega_util.x,all=function AggregateOps_resolve(agg,stream){var key,map=agg.reduce((function collect(m,a){function helper(r){m[r]||collect(m,m[r]=AggregateOps[r]())}return a.req&&a.req.forEach(helper),stream&&a.str&&a.str.forEach(helper),m}),agg.reduce((function(m,a){return m[a.name]=a,m}),{})),values=[];for(key in map)values.push(map[key]);return values.sort(compareIndex)}(agg,!0),init="var cell = this.cell; this.valid = 0; this.missing = 0;",ctr="this.cell = cell; this.init();",add="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",rem="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",set="var cell = this.cell;";return all.forEach((function(a){init+=a.init,add+=a.add,rem+=a.rem})),agg.slice().sort(compareIndex).forEach((function(a){set+="t["+Object(vega_util.Y)(a.out)+"]="+a.set+";"})),set+="return t;",(ctr=Function("cell",ctr)).prototype.init=Function(init),ctr.prototype.add=Function("v","t",add),ctr.prototype.rem=Function("v","t",rem),ctr.prototype.set=Function("t",set),ctr.prototype.get=get,ctr.fields=agg.map((function(_){return _.out})),ctr}var src_numbers=function*(values,valueof){if(void 0===valueof)for(let value of values)null!=value&&(value=+value)>=value&&(yield value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(value=+value)>=value&&(yield value)}},ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN};function max_max(values,valueof){let max;if(void 0===valueof)for(const value of values)null!=value&&(max<value||void 0===max&&value>=value)&&(max=value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(max<value||void 0===max&&value>=value)&&(max=value)}return max}function min_min(values,valueof){let min;if(void 0===valueof)for(const value of values)null!=value&&(min>value||void 0===min&&value>=value)&&(min=value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(min>value||void 0===min&&value>=value)&&(min=value)}return min}function swap(array,i,j){const t=array[i];array[i]=array[j],array[j]=t}var number=function(x){return null===x?NaN:+x};function quantile_quantile(values,p,valueof){if(n=(values=Float64Array.from(function*number_numbers(values,valueof){if(void 0===valueof)for(let value of values)null!=value&&(value=+value)>=value&&(yield value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(value=+value)>=value&&(yield value)}}(values,valueof))).length){if((p=+p)<=0||n<2)return min_min(values);if(p>=1)return max_max(values);var n,i=(n-1)*p,i0=Math.floor(i),value0=max_max(function quickselect(array,k,left=0,right=array.length-1,compare=ascending){for(;right>left;){if(right-left>600){const n=right-left+1,m=k-left+1,z=Math.log(n),s=.5*Math.exp(2*z/3),sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1);quickselect(array,k,Math.max(left,Math.floor(k-m*s/n+sd)),Math.min(right,Math.floor(k+(n-m)*s/n+sd)),compare)}const t=array[k];let i=left,j=right;for(swap(array,left,k),compare(array[right],t)>0&&swap(array,left,right);i<j;){for(swap(array,i,j),++i,--j;compare(array[i],t)<0;)++i;for(;compare(array[j],t)>0;)--j}0===compare(array[left],t)?swap(array,left,j):swap(array,++j,right),j<=k&&(left=j+1),k<=j&&(right=j-1)}return array}(values,i0).subarray(0,i0+1));return value0+(min_min(values.subarray(i0+1))-value0)*(i-i0)}}function quantileSorted(values,p,valueof=number){if(n=values.length){if((p=+p)<=0||n<2)return+valueof(values[0],0,values);if(p>=1)return+valueof(values[n-1],n-1,values);var n,i=(n-1)*p,i0=Math.floor(i),value0=+valueof(values[i0],i0,values);return value0+(+valueof(values[i0+1],i0+1,values)-value0)*(i-i0)}}var quantiles=function(array,p,f){var values=Float64Array.from(src_numbers(array,f));return values.sort(ascending),p.map(_=>quantileSorted(values,_))},quartiles=function(array,f){return quantiles(array,[.25,.5,.75],f)};function deviation(values,valueof){const v=function variance(values,valueof){let delta,count=0,mean=0,sum=0;if(void 0===valueof)for(let value of values)null!=value&&(value=+value)>=value&&(sum+=(delta=value-mean)*(value-(mean+=delta/++count)));else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(value=+value)>=value&&(sum+=(delta=value-mean)*(value-(mean+=delta/++count)))}if(count>1)return sum/(count-1)}(values,valueof);return v?Math.sqrt(v):v}var src_bandwidth=function(array,f){var n=array.length,v=deviation(array,f),q=quartiles(array,f),h=(q[2]-q[0])/1.34;return 1.06*(v=Math.min(v,h)||v||Math.abs(q[0])||1)*Math.pow(n,-.2)},src_bin=function(_){var step,level,minstep,precision,v,i,n,eps,maxb=_.maxbins||20,base=_.base||10,logb=Math.log(base),div=_.divide||[5,2],min=_.extent[0],max=_.extent[1],span=_.span||max-min||Math.abs(min)||1;if(_.step)step=_.step;else if(_.steps){for(v=span/maxb,i=0,n=_.steps.length;i<n&&_.steps[i]<v;++i);step=_.steps[Math.max(0,i-1)]}else{for(level=Math.ceil(Math.log(maxb)/logb),minstep=_.minstep||0,step=Math.max(minstep,Math.pow(base,Math.round(Math.log(span)/logb)-level));Math.ceil(span/step)>maxb;)step*=base;for(i=0,n=div.length;i<n;++i)(v=step/div[i])>=minstep&&span/v<=maxb&&(step=v)}return precision=(v=Math.log(step))>=0?0:1+~~(-v/logb),eps=Math.pow(base,-precision-1),(_.nice||void 0===_.nice)&&(min=min<(v=Math.floor(min/step+eps)*step)?v-step:v,max=Math.ceil(max/step)*step),{start:min,stop:max===min?min+step:max,step:step}},random_random=Math.random;function setRandom(r){random_random=r}var bootstrapCI=function(array,samples,alpha,f){if(!array.length)return[void 0,void 0];var a,i,j,mu,values=Float64Array.from(src_numbers(array,f)),n=values.length,m=samples;for(j=0,mu=Array(m);j<m;++j){for(a=0,i=0;i<n;++i)a+=values[~~(random_random()*n)];mu[j]=a/n}return mu.sort(ascending),[quantile_quantile(mu,alpha/2),quantile_quantile(mu,1-alpha/2)]},dotbin=function(array,step,smooth,f){f=f||(_=>_);let x,i=0,j=1,n=array.length,v=new Float64Array(n),a=f(array[0]),b=a,w=a+step;for(;j<n;++j){if((x=f(array[j]))>=w){for(b=(a+b)/2;i<j;++i)v[i]=b;w=x+step,a=x}b=x}for(b=(a+b)/2;i<j;++i)v[i]=b;return smooth?function smoothing(v,thresh){let c,d,n=v.length,a=0,b=1;for(;v[a]===v[b];)++b;for(;b<n;){for(c=b+1;v[b]===v[c];)++c;if(v[b]-v[b-1]<thresh){for(d=b+(a+c-b-b>>1);d<b;)v[d++]=v[b];for(;d>b;)v[d--]=v[a]}a=b,b=c}return v}(v,step+step/4):v};var lcg=function(seed){return function(){return(seed=(1103515245*seed+12345)%2147483647)/2147483647}},integer=function(min,max){null==max&&(max=min,min=0);var a,b,d,dist={};return dist.min=function(_){return arguments.length?(d=b-(a=_||0),dist):a},dist.max=function(_){return arguments.length?(d=(b=_||0)-a,dist):b},dist.sample=function(){return a+Math.floor(d*random_random())},dist.pdf=function(x){return x===Math.floor(x)&&x>=a&&x<b?1/d:0},dist.cdf=function(x){var v=Math.floor(x);return v<a?0:v>=b?1:(v-a+1)/d},dist.icdf=function(p){return p>=0&&p<=1?a-1+Math.floor(p*d):NaN},dist.min(min).max(max)};const SQRT2PI=Math.sqrt(2*Math.PI),SQRT2=Math.SQRT2;let nextSample=NaN;function sampleNormal(mean,stdev){mean=mean||0,stdev=null==stdev?1:stdev;let rds,c,x=0,y=0;if(nextSample==nextSample)x=nextSample,nextSample=NaN;else{do{rds=(x=2*random_random()-1)*x+(y=2*random_random()-1)*y}while(0===rds||rds>1);x*=c=Math.sqrt(-2*Math.log(rds)/rds),nextSample=y*c}return mean+x*stdev}function densityNormal(value,mean,stdev){const z=(value-(mean||0))/(stdev=null==stdev?1:stdev);return Math.exp(-.5*z*z)/(stdev*SQRT2PI)}function cumulativeNormal(value,mean,stdev){let cd,z=(value-(mean=mean||0))/(stdev=null==stdev?1:stdev),Z=Math.abs(z);if(Z>37)cd=0;else{let sum,exp=Math.exp(-Z*Z/2);Z<7.07106781186547?(cd=exp*(sum=(sum=(sum=(sum=(sum=(sum=.0352624965998911*Z+.700383064443688)*Z+6.37396220353165)*Z+33.912866078383)*Z+112.079291497871)*Z+221.213596169931)*Z+220.206867912376),cd/=sum=(sum=(sum=(sum=(sum=(sum=(sum=.0883883476483184*Z+1.75566716318264)*Z+16.064177579207)*Z+86.7807322029461)*Z+296.564248779674)*Z+637.333633378831)*Z+793.826512519948)*Z+440.413735824752):cd=exp/(sum=Z+1/(sum=Z+2/(sum=Z+3/(sum=Z+4/(sum=Z+.65)))))/2.506628274631}return z>0?1-cd:cd}function quantileNormal(p,mean,stdev){return p<0||p>1?NaN:(mean||0)+(null==stdev?1:stdev)*SQRT2*function erfinv(x){let p,w=-Math.log((1-x)*(1+x));w<6.25?p=1.6536545626831027+(p=.24015818242558962+(p=(p=(p=.00018673420803405714+(p=(p=(p=4.2347877827932404e-7+(p=(p=(p=1.0512122733215323e-9+(p=(p=(p=26335093153082323e-28+(p=(p=(p=6637638134358324e-30+(p=20972767875968562e-33+(p=(p=11157877678025181e-33+(p=128584807152564e-32+(p=(p=-364441206401782e-35)*(w-=3.125)-16850591381820166e-35)*w)*w)*w-1333171662854621e-31)*w)*w)*w-4054566272975207e-29)*w-8151934197605472e-29)*w)*w-12975133253453532e-27)*w-5415412054294628e-26)*w)*w-4.112633980346984e-9)*w-2.9070369957882005e-8)*w)*w-13654692000834679e-22)*w-13882523362786469e-21)*w)*w-.000740702534166267)*w-.006033670871430149)*w)*w:w<16?(w=Math.sqrt(w)-3.25,p=3.0838856104922208+(p=1.0052589676941592+(p=.005370914553590064+(p=(p=.002491442096107851+(p=(p=.0009532893797373805+(p=(p=24031110387097894e-21+(p=6828485145957318e-20+(p=(p=12475304481671779e-21+(p=29234449089955446e-22+(p=(p=15027403968909828e-22+(p=1.8239629214389228e-8+(p=(p=9.075656193888539e-8+(p=2.2137376921775787e-9)*w)*w-2.7517406297064545e-7)*w)*w)*w-4013867526981546e-21)*w)*w)*w-47318229009055734e-21)*w)*w)*w-.0003550375203628475)*w)*w-.0016882755560235047)*w)*w-.003751208507569241)*w)*w)*w):Number.isFinite(w)?(w=Math.sqrt(w)-5,p=4.849906401408584+(p=1.0103004648645344+(p=(p=(p=7599527703001776e-20+(p=(p=4526062597223154e-21+(p=(p=2.2900482228026655e-7+(p=(p=2.914795345090108e-8+(p=(p=7.61570120807834e-9+(p=(p=1.5076572693500548e-9+(p=(p=-27109920616438573e-27)*w-2.555641816996525e-10)*w)*w-3.789465440126737e-9)*w)*w-1.496002662714924e-8)*w)*w-6.771199775845234e-8)*w)*w-9.9298272942317e-7)*w)*w-1968177810553167e-20)*w)*w-.00021503011930044477)*w-.00013871931833623122)*w)*w):p=1/0;return p*x}(2*p-1)}var src_normal=function(mean,stdev){var mu,sigma,dist={mean:function(_){return arguments.length?(mu=_||0,dist):mu},stdev:function(_){return arguments.length?(sigma=null==_?1:_,dist):sigma},sample:()=>sampleNormal(mu,sigma),pdf:value=>densityNormal(value,mu,sigma),cdf:value=>cumulativeNormal(value,mu,sigma),icdf:p=>quantileNormal(p,mu,sigma)};return dist.mean(mean).stdev(stdev)},src_kde=function(support,bandwidth){var kernel=src_normal(),dist={},n=0;return dist.data=function(_){return arguments.length?(support=_,n=_?_.length:0,dist.bandwidth(bandwidth)):support},dist.bandwidth=function(_){return arguments.length?(!(bandwidth=_)&&support&&(bandwidth=src_bandwidth(support)),dist):bandwidth},dist.sample=function(){return support[~~(random_random()*n)]+bandwidth*kernel.sample()},dist.pdf=function(x){for(var y=0,i=0;i<n;++i)y+=kernel.pdf((x-support[i])/bandwidth);return y/bandwidth/n},dist.cdf=function(x){for(var y=0,i=0;i<n;++i)y+=kernel.cdf((x-support[i])/bandwidth);return y/n},dist.icdf=function(){throw Error("KDE icdf not supported.")},dist.data(support)};function sampleLogNormal(mean,stdev){return mean=mean||0,stdev=null==stdev?1:stdev,Math.exp(mean+sampleNormal()*stdev)}function densityLogNormal(value,mean,stdev){if(value<=0)return 0;mean=mean||0,stdev=null==stdev?1:stdev;const z=(Math.log(value)-mean)/stdev;return Math.exp(-.5*z*z)/(stdev*SQRT2PI*value)}function cumulativeLogNormal(value,mean,stdev){return cumulativeNormal(Math.log(value),mean,stdev)}function quantileLogNormal(p,mean,stdev){return Math.exp(quantileNormal(p,mean,stdev))}var lognormal=function(mean,stdev){var mu,sigma,dist={mean:function(_){return arguments.length?(mu=_||0,dist):mu},stdev:function(_){return arguments.length?(sigma=null==_?1:_,dist):sigma},sample:()=>sampleLogNormal(mu,sigma),pdf:value=>densityLogNormal(value,mu,sigma),cdf:value=>cumulativeLogNormal(value,mu,sigma),icdf:p=>quantileLogNormal(p,mu,sigma)};return dist.mean(mean).stdev(stdev)},mixture=function(dists,weights){var w,dist={},m=0;function normalize(x){var i,w=[],sum=0;for(i=0;i<m;++i)sum+=w[i]=null==x[i]?1:+x[i];for(i=0;i<m;++i)w[i]/=sum;return w}return dist.weights=function(_){return arguments.length?(w=normalize(weights=_||[]),dist):weights},dist.distributions=function(_){return arguments.length?(_?(m=_.length,dists=_):(m=0,dists=[]),dist.weights(weights)):dists},dist.sample=function(){for(var r=random_random(),d=dists[m-1],v=w[0],i=0;i<m-1;v+=w[++i])if(r<v){d=dists[i];break}return d.sample()},dist.pdf=function(x){for(var p=0,i=0;i<m;++i)p+=w[i]*dists[i].pdf(x);return p},dist.cdf=function(x){for(var p=0,i=0;i<m;++i)p+=w[i]*dists[i].cdf(x);return p},dist.icdf=function(){throw Error("Mixture icdf not supported.")},dist.distributions(dists).weights(weights)};function sampleUniform(min,max){return null==max&&(max=null==min?1:min,min=0),min+(max-min)*random_random()}function densityUniform(value,min,max){return null==max&&(max=null==min?1:min,min=0),value>=min&&value<=max?1/(max-min):0}function cumulativeUniform(value,min,max){return null==max&&(max=null==min?1:min,min=0),value<min?0:value>max?1:(value-min)/(max-min)}function quantileUniform(p,min,max){return null==max&&(max=null==min?1:min,min=0),p>=0&&p<=1?min+p*(max-min):NaN}var uniform=function(min,max){var a,b,dist={min:function(_){return arguments.length?(a=_||0,dist):a},max:function(_){return arguments.length?(b=null==_?1:_,dist):b},sample:()=>sampleUniform(a,b),pdf:value=>densityUniform(value,a,b),cdf:value=>cumulativeUniform(value,a,b),icdf:p=>quantileUniform(p,a,b)};return null==max&&(max=null==min?1:min,min=0),dist.min(min).max(max)},ols=function(uX,uY,uXY,uX2){const delta=uX2-uX*uX,slope=Math.abs(delta)<1e-24?0:(uXY-uX*uY)/delta;return[uY-slope*uX,slope]};function points_points(data,x,y,sort){data=data.filter(d=>{let u=x(d),v=y(d);return null!=u&&(u=+u)>=u&&null!=v&&(v=+v)>=v}),sort&&data.sort((a,b)=>x(a)-x(b));const X=new Float64Array(data.length),Y=new Float64Array(data.length);let i=0;for(let d of data)X[i]=x(d),Y[i]=y(d),++i;return[X,Y]}function visitPoints(data,x,y,callback){let u,v,index=-1,i=-1;for(let d of data)u=x(d,++index,data),v=y(d,index,data),null!=u&&(u=+u)>=u&&null!=v&&(v=+v)>=v&&callback(u,v,++i)}var r_squared=function(data,x,y,uY,predict){let SSE=0,SST=0;return visitPoints(data,x,y,(dx,dy)=>{const sse=dy-predict(dx),sst=dy-uY;SSE+=sse*sse,SST+=sst*sst}),1-SSE/SST},linear=function(data,x,y){let X=0,Y=0,XY=0,X2=0,n=0;visitPoints(data,x,y,(dx,dy)=>{X+=dx,Y+=dy,XY+=dx*dy,X2+=dx*dx,++n});const coef=ols(X/n,Y/n,XY/n,X2/n),predict=x=>coef[0]+coef[1]*x;return{coef:coef,predict:predict,rSquared:r_squared(data,x,y,Y/n,predict)}},log=function(data,x,y){let X=0,Y=0,XY=0,X2=0,n=0;visitPoints(data,x,y,(dx,dy)=>{dx=Math.log(dx),X+=dx,Y+=dy,XY+=dx*dy,X2+=dx*dx,++n});const coef=ols(X/n,Y/n,XY/n,X2/n),predict=x=>coef[0]+coef[1]*Math.log(x);return{coef:coef,predict:predict,rSquared:r_squared(data,x,y,Y/n,predict)}},exp=function(data,x,y){let Y=0,YL=0,XY=0,XYL=0,X2Y=0,n=0;visitPoints(data,x,y,(dx,dy)=>{const ly=Math.log(dy),xy=dx*dy;Y+=dy,XY+=xy,X2Y+=dx*xy,YL+=dy*ly,XYL+=xy*ly,++n});const coef=ols(XY/Y,YL/Y,XYL/Y,X2Y/Y),predict=x=>coef[0]*Math.exp(coef[1]*x);return coef[0]=Math.exp(coef[0]),{coef:coef,predict:predict,rSquared:r_squared(data,x,y,Y/n,predict)}},pow=function(data,x,y){let X=0,Y=0,XY=0,X2=0,YS=0,n=0;visitPoints(data,x,y,(dx,dy)=>{const lx=Math.log(dx),ly=Math.log(dy);X+=lx,Y+=ly,XY+=lx*ly,X2+=lx*lx,YS+=dy,++n});const coef=ols(X/n,Y/n,XY/n,X2/n),predict=x=>coef[0]*Math.pow(x,coef[1]);return coef[0]=Math.exp(coef[0]),{coef:coef,predict:predict,rSquared:r_squared(data,x,y,YS/n,predict)}},regression_quad=function(data,x,y){let X=0,Y=0,X2=0,X3=0,X4=0,XY=0,X2Y=0,n=0;visitPoints(data,x,y,(dx,dy)=>{const x2=dx*dx;X+=dx,Y+=dy,X2+=x2,X3+=x2*dx,X4+=x2*x2,XY+=dx*dy,X2Y+=x2*dy,++n});const XX=X2-X*X/n,XX2=X3-X2*X/n,X2X2=X4-X2*X2/n,d=XX*X2X2-XX2*XX2,a=((X2Y-=X2*(Y/=n))*XX-(XY-=X*Y)*XX2)/d,b=(XY*X2X2-X2Y*XX2)/d,c=Y-b*(X/n)-a*(X2/n),predict=x=>a*x*x+b*x+c;return{coef:[c,b,a],predict:predict,rSquared:r_squared(data,x,y,Y,predict)}},poly=function(data,x,y,order){if(1===order)return linear(data,x,y);if(2===order)return regression_quad(data,x,y);const[xv,yv]=points_points(data,x,y),n=xv.length,lhs=[],rhs=[],k=order+1;let i,j,l,v,c,Y=0;for(i=0;i<n;++i)Y+=yv[i];for(i=0;i<k;++i){for(l=0,v=0;l<n;++l)v+=Math.pow(xv[l],i)*yv[l];for(lhs.push(v),c=new Float64Array(k),j=0;j<k;++j){for(l=0,v=0;l<n;++l)v+=Math.pow(xv[l],i+j);c[j]=v}rhs.push(c)}rhs.push(lhs);const coef=function gaussianElimination(matrix){const n=matrix.length-1,coef=[];let i,j,k,r,t;for(i=0;i<n;++i){for(r=i,j=i+1;j<n;++j)Math.abs(matrix[i][j])>Math.abs(matrix[i][r])&&(r=j);for(k=i;k<n+1;++k)t=matrix[k][i],matrix[k][i]=matrix[k][r],matrix[k][r]=t;for(j=i+1;j<n;++j)for(k=n;k>=i;k--)matrix[k][j]-=matrix[k][i]*matrix[i][j]/matrix[i][i]}for(j=n-1;j>=0;--j){for(t=0,k=j+1;k<n;++k)t+=matrix[k][j]*coef[k];coef[j]=(matrix[n][j]-t)/matrix[j][j]}return coef}(rhs),predict=x=>{let y=0,i=0,n=coef.length;for(;i<n;++i)y+=coef[i]*Math.pow(x,i);return y};return{coef:coef,predict:predict,rSquared:r_squared(data,x,y,Y/n,predict)}};var median=function(values,valueof){return quantile_quantile(values,.5,valueof)};var regression_loess=function(data,x,y,bandwidth){const[xv,yv]=points_points(data,x,y,!0),n=xv.length,bw=Math.max(2,~~(bandwidth*n)),yhat=new Float64Array(n),residuals=new Float64Array(n),robustWeights=new Float64Array(n).fill(1);for(let iter=-1;++iter<=2;){const interval=[0,bw-1];for(let i=0;i<n;++i){const dx=xv[i],i0=interval[0],i1=interval[1],edge=dx-xv[i0]>xv[i1]-dx?i0:i1;let W=0,X=0,Y=0,XY=0,X2=0,denom=1/Math.abs(xv[edge]-dx||1);for(let k=i0;k<=i1;++k){const xk=xv[k],yk=yv[k],w=tricube(Math.abs(dx-xk)*denom)*robustWeights[k],xkw=xk*w;W+=w,X+=xkw,Y+=yk*w,XY+=yk*xkw,X2+=xk*xkw}const[a,b]=ols(X/W,Y/W,XY/W,X2/W);yhat[i]=a+b*dx,residuals[i]=Math.abs(yv[i]-yhat[i]),updateInterval(xv,i+1,interval)}if(2===iter)break;const medianResidual=median(residuals);if(Math.abs(medianResidual)<1e-12)break;for(let arg,w,i=0;i<n;++i)arg=residuals[i]/(6*medianResidual),robustWeights[i]=arg>=1?1e-12:(w=1-arg*arg)*w}return function loess_output(xv,yhat){const n=xv.length,out=[];for(let v,i=0,cnt=0,prev=[];i<n;++i)v=xv[i],prev[0]===v?prev[1]+=(yhat[i]-prev[1])/++cnt:(cnt=0,prev=[v,yhat[i]],out.push(prev));return out}(xv,yhat)};function tricube(x){return(x=1-x*x*x)*x*x}function updateInterval(xv,i,interval){let val=xv[i],left=interval[0],right=interval[1]+1;if(!(right>=xv.length))for(;i>left&&xv[right]-val<=val-xv[left];)interval[0]=++left,interval[1]=right,++right}const MIN_RADIANS=.1*Math.PI/180;var sampleCurve=function(f,extent,minSteps,maxSteps){minSteps=minSteps||25,maxSteps=Math.max(minSteps,maxSteps||200);const point=x=>[x,f(x)],minX=extent[0],maxX=extent[1],span=maxX-minX,stop=span/maxSteps,prev=[point(minX)],next=[];if(minSteps===maxSteps){for(let i=1;i<maxSteps;++i)prev.push(point(minX+i/minSteps*span));return prev.push(point(maxX)),prev}next.push(point(maxX));for(let i=minSteps;--i>0;)next.push(point(minX+i/minSteps*span));let p0=prev[0],p1=next[next.length-1];for(;p1;){const pm=point((p0[0]+p1[0])/2);pm[0]-p0[0]>=stop&&angleDelta(p0,pm,p1)>MIN_RADIANS?next.push(pm):(p0=p1,prev.push(p1),next.pop()),p1=next[next.length-1]}return prev};function angleDelta(p,q,r){const a0=Math.atan2(r[1]-p[1],r[0]-p[0]),a1=Math.atan2(q[1]-p[1],q[0]-p[0]);return Math.abs(a0-a1)}function TupleStore(key){this._key=key?Object(vega_util.t)(key):tupleid,this.reset()}var TupleStore_prototype=TupleStore.prototype;function Aggregate(params){Transform.call(this,null,params),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}TupleStore_prototype.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},TupleStore_prototype.add=function(v){this._add.push(v)},TupleStore_prototype.rem=function(v){this._rem.push(v)},TupleStore_prototype.values=function(){if(this._get=null,0===this._rem.length)return this._add;var i,j,v,a=this._add,r=this._rem,k=this._key,n=a.length,m=r.length,x=Array(n-m),map={};for(i=0;i<m;++i)map[k(r[i])]=1;for(i=0,j=0;i<n;++i)map[k(v=a[i])]?map[k(v)]=0:x[j++]=v;return this._rem=[],this._add=x},TupleStore_prototype.distinct=function(get){for(var s,v=this.values(),n=v.length,map={},count=0;--n>=0;)s=get(v[n])+"",Object(vega_util.v)(map,s)||(map[s]=1,++count);return count},TupleStore_prototype.extent=function(get){if(this._get!==get||!this._ext){var v=this.values(),i=Object(vega_util.q)(v,get);this._ext=[v[i[0]],v[i[1]]],this._get=get}return this._ext},TupleStore_prototype.argmin=function(get){return this.extent(get)[0]||{}},TupleStore_prototype.argmax=function(get){return this.extent(get)[1]||{}},TupleStore_prototype.min=function(get){var m=this.extent(get)[0];return null!=m?get(m):void 0},TupleStore_prototype.max=function(get){var m=this.extent(get)[1];return null!=m?get(m):void 0},TupleStore_prototype.quartile=function(get){return this._get===get&&this._q||(this._q=quartiles(this.values(),get),this._get=get),this._q},TupleStore_prototype.q1=function(get){return this.quartile(get)[0]},TupleStore_prototype.q2=function(get){return this.quartile(get)[1]},TupleStore_prototype.q3=function(get){return this.quartile(get)[2]},TupleStore_prototype.ci=function(get){return this._get===get&&this._ci||(this._ci=bootstrapCI(this.values(),1e3,.05,get),this._get=get),this._ci},TupleStore_prototype.ci0=function(get){return this.ci(get)[0]},TupleStore_prototype.ci1=function(get){return this.ci(get)[1]},Aggregate.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:ValidAggregateOps},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var Aggregate_prototype=Object(vega_util.y)(Aggregate,Transform);Aggregate_prototype.transform=function(_,pulse){var aggr=this,out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),mod=_.modified();return aggr.stamp=out.stamp,aggr.value&&(mod||pulse.modified(aggr._inputs,!0))?(aggr._prev=aggr.value,aggr.value=mod?aggr.init(_):{},pulse.visit(pulse.SOURCE,t=>aggr.add(t))):(aggr.value=aggr.value||aggr.init(_),pulse.visit(pulse.REM,t=>aggr.rem(t)),pulse.visit(pulse.ADD,t=>aggr.add(t))),out.modifies(aggr._outputs),aggr._drop=!1!==_.drop,_.cross&&aggr._dims.length>1&&(aggr._drop=!1,aggr.cross()),aggr.changes(out)},Aggregate_prototype.cross=function(){var aggr=this,curr=aggr.value,dims=aggr._dnames,vals=dims.map((function(){return{}})),n=dims.length;function collect(cells){var key,i,t,v;for(key in cells)for(t=cells[key].tuple,i=0;i<n;++i)vals[i][v=t[dims[i]]]=v}collect(aggr._prev),collect(curr),function generate(base,tuple,index){var k,key,name=dims[index],v=vals[index++];for(k in v)tuple[name]=v[k],key=base?base+"|"+k:k,index<n?generate(key,tuple,index):curr[key]||aggr.cell(key,tuple)}("",{},0)},Aggregate_prototype.init=function(_){var inputs=this._inputs=[],outputs=this._outputs=[],inputMap={};function inputVisit(get){for(var f,fields=Object(vega_util.i)(Object(vega_util.g)(get)),i=0,n=fields.length;i<n;++i)inputMap[f=fields[i]]||(inputMap[f]=1,inputs.push(f))}this._dims=Object(vega_util.i)(_.groupby),this._dnames=this._dims.map((function(d){var dname=Object(vega_util.h)(d);return inputVisit(d),outputs.push(dname),dname})),this.cellkey=_.key?_.key:groupkey(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var field,op,m,mname,outname,i,fields=_.fields||[null],ops=_.ops||["count"],as=_.as||[],n=fields.length,map={};for(n!==ops.length&&Object(vega_util.n)("Unmatched number of fields and aggregate ops."),i=0;i<n;++i)field=fields[i],op=ops[i],null==field&&"count"!==op&&Object(vega_util.n)("Null aggregate field specified."),outname=measureName(op,mname=Object(vega_util.h)(field),as[i]),outputs.push(outname),"count"!==op?((m=map[mname])||(inputVisit(field),(m=map[mname]=[]).field=field,this._measures.push(m)),"count"!==op&&(this._countOnly=!1),m.push(createMeasure(op,outname))):this._counts.push(outname);return this._measures=this._measures.map((function(m){return compileMeasures(m,m.field)})),{}},Aggregate_prototype.cellkey=groupkey(),Aggregate_prototype.cell=function(key,t){var cell=this.value[key];return cell?0===cell.num&&this._drop&&cell.stamp<this.stamp?(cell.stamp=this.stamp,this._adds[this._alen++]=cell):cell.stamp<this.stamp&&(cell.stamp=this.stamp,this._mods[this._mlen++]=cell):(cell=this.value[key]=this.newcell(key,t),this._adds[this._alen++]=cell),cell},Aggregate_prototype.newcell=function(key,t){var cell={key:key,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[key]),stamp:this.stamp,store:!1};if(!this._countOnly){var i,measures=this._measures,n=measures.length;for(cell.agg=Array(n),i=0;i<n;++i)cell.agg[i]=new measures[i](cell)}return cell.store&&(cell.data=new TupleStore),cell},Aggregate_prototype.newtuple=function(t,p){var i,n,names=this._dnames,dims=this._dims,x={};for(i=0,n=dims.length;i<n;++i)x[names[i]]=dims[i](t);return p?replace(p.tuple,x):ingest(x)},Aggregate_prototype.add=function(t){var agg,i,n,key=this.cellkey(t),cell=this.cell(key,t);if(cell.num+=1,!this._countOnly)for(cell.store&&cell.data.add(t),i=0,n=(agg=cell.agg).length;i<n;++i)agg[i].add(agg[i].get(t),t)},Aggregate_prototype.rem=function(t){var agg,i,n,key=this.cellkey(t),cell=this.cell(key,t);if(cell.num-=1,!this._countOnly)for(cell.store&&cell.data.rem(t),i=0,n=(agg=cell.agg).length;i<n;++i)agg[i].rem(agg[i].get(t),t)},Aggregate_prototype.celltuple=function(cell){var agg,i,n,tuple=cell.tuple,counts=this._counts;for(cell.store&&cell.data.values(),i=0,n=counts.length;i<n;++i)tuple[counts[i]]=cell.num;if(!this._countOnly)for(i=0,n=(agg=cell.agg).length;i<n;++i)agg[i].set(tuple);return tuple},Aggregate_prototype.changes=function(out){var cell,key,i,n,adds=this._adds,mods=this._mods,prev=this._prev,drop=this._drop,add=out.add,rem=out.rem,mod=out.mod;if(prev)for(key in prev)cell=prev[key],drop&&!cell.num||rem.push(cell.tuple);for(i=0,n=this._alen;i<n;++i)add.push(this.celltuple(adds[i])),adds[i]=null;for(i=0,n=this._mlen;i<n;++i)(0===(cell=mods[i]).num&&drop?rem:mod).push(this.celltuple(cell)),mods[i]=null;return this._alen=this._mlen=0,this._prev=null,out};function Bin(params){Transform.call(this,null,params)}Bin.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var Bin_prototype=Object(vega_util.y)(Bin,Transform);Bin_prototype.transform=function(_,pulse){var flag,band=!1!==_.interval,bins=this._bins(_),start=bins.start,step=bins.step,as=_.as||["bin0","bin1"],b0=as[0],b1=as[1];return flag=_.modified()?(pulse=pulse.reflow(!0)).SOURCE:pulse.modified(Object(vega_util.g)(_.field))?pulse.ADD_MOD:pulse.ADD,pulse.visit(flag,band?function(t){var v=bins(t);t[b0]=v,t[b1]=null==v?null:start+step*(1+(v-start)/step)}:function(t){t[b0]=bins(t)}),pulse.modifies(band?as:b0)},Bin_prototype._bins=function(_){if(this.value&&!_.modified())return this.value;var a,d,field=_.field,bins=src_bin(_),start=bins.start,stop=bins.stop,step=bins.step;null!=(a=_.anchor)&&(d=a-(start+step*Math.floor((a-start)/step)),start+=d,stop+=d);var f=function(t){var v=field(t);return null==v?null:(v=Math.max(start,Math.min(+v,stop-step)),start+step*Math.floor(1e-14+(v-start)/step))};return f.start=start,f.stop=stop,f.step=step,this.value=Object(vega_util.f)(f,Object(vega_util.g)(field),_.name||"bin_"+Object(vega_util.h)(field))};var SortedList=function(idFunc,source,input){var $=idFunc,data=source||[],add=input||[],rem={},cnt=0;return{add:function(t){add.push(t)},remove:function(t){rem[$(t)]=++cnt},size:function(){return data.length},data:function(compare,resort){return cnt&&(data=data.filter((function(t){return!rem[$(t)]})),rem={},cnt=0),resort&&compare&&data.sort(compare),add.length&&(data=compare?Object(vega_util.L)(compare,data,add.sort(compare)):data.concat(add),add=[]),data}}};function Collect(params){Transform.call(this,[],params)}function Compare(params){Operator.call(this,null,Compare_update,params)}function Compare_update(_){return this.value&&!_.modified()?this.value:Object(vega_util.k)(_.fields,_.orders)}function CountPattern(params){Transform.call(this,null,params)}Collect.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},Object(vega_util.y)(Collect,Transform).transform=function(_,pulse){var out=pulse.fork(pulse.ALL),list=SortedList(tupleid,this.value,out.materialize(out.ADD).add),sort=_.sort,mod=pulse.changed()||sort&&(_.modified("sort")||pulse.modified(sort.fields));return out.visit(out.REM,list.remove),this.modified(mod),this.value=out.source=list.data(stableCompare(sort),mod),pulse.source&&pulse.source.root&&(this.value.root=pulse.source.root),out},Object(vega_util.y)(Compare,Operator),CountPattern.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var CountPattern_prototype=Object(vega_util.y)(CountPattern,Transform);function Cross(params){Transform.call(this,null,params)}CountPattern_prototype.transform=function(_,pulse){function process(update){return function(tuple){for(var t,tokens=function tokenize(text,tcase,match){switch(tcase){case"upper":text=text.toUpperCase();break;case"lower":text=text.toLowerCase()}return text.match(match)}(get(tuple),_.case,match)||[],i=0,n=tokens.length;i<n;++i)stop.test(t=tokens[i])||update(t)}}var init=this._parameterCheck(_,pulse),counts=this._counts,match=this._match,stop=this._stop,get=_.field,as=_.as||["text","count"],add=process((function(t){counts[t]=1+(counts[t]||0)})),rem=process((function(t){counts[t]-=1}));return init?pulse.visit(pulse.SOURCE,add):(pulse.visit(pulse.ADD,add),pulse.visit(pulse.REM,rem)),this._finish(pulse,as)},CountPattern_prototype._parameterCheck=function(_,pulse){var init=!1;return!_.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(_.stopwords||"")+"$","i"),init=!0),!_.modified("pattern")&&this._match||(this._match=new RegExp(_.pattern||"[\\w']+","g"),init=!0),(_.modified("field")||pulse.modified(_.field.fields))&&(init=!0),init&&(this._counts={}),init},CountPattern_prototype._finish=function(pulse,as){var w,t,c,counts=this._counts,tuples=this._tuples||(this._tuples={}),text=as[0],count=as[1],out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);for(w in counts)t=tuples[w],c=counts[w]||0,!t&&c?(tuples[w]=t=ingest({}),t[text]=w,t[count]=c,out.add.push(t)):0===c?(t&&out.rem.push(t),counts[w]=null,tuples[w]=null):t[count]!==c&&(t[count]=c,out.mod.push(t));return out.modifies(as)},Cross.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},Object(vega_util.y)(Cross,Transform).transform=function(_,pulse){var out=pulse.fork(pulse.NO_SOURCE),data=this.value,as=_.as||["a","b"],a=as[0],b=as[1];return!data||pulse.changed(pulse.ADD_REM)||_.modified("as")||_.modified("filter")?(data&&(out.rem=data),data=pulse.materialize(pulse.SOURCE).source,out.add=this.value=function Cross_cross(input,a,b,filter){for(var j,left,data=[],t={},n=input.length,i=0;i<n;++i)for(t[a]=left=input[i],j=0;j<n;++j)t[b]=input[j],filter(t)&&(data.push(ingest(t)),(t={})[a]=left);return data}(data,a,b,_.filter||vega_util.fb)):out.mod=data,out.source=this.value,out.modifies(as)};var Distributions={kde:src_kde,mixture:mixture,normal:src_normal,lognormal:lognormal,uniform:uniform},DISTRIBUTIONS="distributions",FUNCTION="function",FIELD="field";function Density(params){Transform.call(this,null,params)}var distributions=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Density_mixture={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:distributions},{name:"weights",type:"number",array:!0}]};function fieldNames(fields,as){return fields?fields.map((function(f,i){return as[i]||Object(vega_util.h)(f)})):null}function util_partition(data,groupby,field){var map,i,n,t,k,g,groups=[],get=function(f){return f(t)};if(null==groupby)groups.push(data.map(field));else for(map={},i=0,n=data.length;i<n;++i)t=data[i],(g=map[k=groupby.map(get)])||(map[k]=g=[],g.dims=k,groups.push(g)),g.push(field(t));return groups}Density.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:distributions.concat(Density_mixture)},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(vega_util.y)(Density,Transform).transform=function(_,pulse){var out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);if(!this.value||pulse.changed()||_.modified()){var dist=function Distributions_parse(def,data){var func=def[FUNCTION];Object(vega_util.v)(Distributions,func)||Object(vega_util.n)("Unknown distribution function: "+func);var d=Distributions[func]();for(var name in def)name===FIELD?d.data((def.from||data()).map(def[name])):name===DISTRIBUTIONS?d[name](def[name].map((function(_){return Distributions_parse(_,data)}))):typeof d[name]===FUNCTION&&d[name](def[name]);return d}(_.distribution,function Density_source(pulse){return function(){return pulse.materialize(pulse.SOURCE).source}}(pulse)),minsteps=_.steps||_.minsteps||25,maxsteps=_.steps||_.maxsteps||200,method=_.method||"pdf";"pdf"!==method&&"cdf"!==method&&Object(vega_util.n)("Invalid density method: "+method),_.extent||dist.data||Object(vega_util.n)("Missing density extent parameter."),method=dist[method];var as=_.as||["value","density"],domain=_.extent||Object(vega_util.p)(dist.data()),values=sampleCurve(method,domain,minsteps,maxsteps).map(v=>{var tuple={};return tuple[as[0]]=v[0],tuple[as[1]]=v[1],ingest(tuple)});this.value&&(out.rem=this.value),this.value=out.add=out.source=values}return out};function DotBin(params){Transform.call(this,null,params)}function Expression(params){Operator.call(this,null,Expression_update,params),this.modified(!0)}function Expression_update(_){var expr=_.expr;return this.value&&!_.modified("expr")?this.value:Object(vega_util.f)(datum=>expr(datum,_),Object(vega_util.g)(expr),Object(vega_util.h)(expr))}function Extent(params){Transform.call(this,[void 0,void 0],params)}function Subflow(pulse,parent){Operator.call(this,pulse),this.parent=parent}DotBin.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]},Object(vega_util.y)(DotBin,Transform).transform=function(_,pulse){if(this.value&&!_.modified()&&!pulse.changed())return pulse;const source=pulse.materialize(pulse.SOURCE).source,groups=util_partition(pulse.source,_.groupby,vega_util.x),smooth=_.smooth||!1,field=_.field,step=_.step||function autostep(data,field){return Object(vega_util.W)(Object(vega_util.p)(data,field))/30}(source,field),sort=stableCompare((a,b)=>field(a)-field(b)),as=_.as||"bin",n=groups.length;let j,min=1/0,max=-1/0,i=0;for(;i<n;++i){const g=groups[i].sort(sort);j=-1;for(const v of dotbin(g,step,smooth,field))v<min&&(min=v),v>max&&(max=v),g[++j][as]=v}return this.value={start:min,stop:max,step:step},pulse.reflow(!0).modifies(as)},Object(vega_util.y)(Expression,Operator),Extent.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},Object(vega_util.y)(Extent,Transform).transform=function(_,pulse){var mod,extent=this.value,field=_.field,min=extent[0],max=extent[1];if(((mod=pulse.changed()||pulse.modified(field.fields)||_.modified("field"))||null==min)&&(min=1/0,max=-1/0),pulse.visit(mod?pulse.SOURCE:pulse.ADD,(function(t){var v=field(t);null!=v&&((v=+v)<min&&(min=v),v>max&&(max=v))})),!Number.isFinite(min)||!Number.isFinite(max)){let name=Object(vega_util.h)(field);name&&(name=` for field "${name}"`),pulse.dataflow.warn(`Infinite extent${name}: [${min}, ${max}]`),min=max=void 0}this.value=[min,max]};var Subflow_prototype=Object(vega_util.y)(Subflow,Operator);function Facet(params){Transform.call(this,{},params),this._keys=Object(vega_util.s)();var a=this._targets=[];a.active=0,a.forEach=function(f){for(var i=0,n=a.active;i<n;++i)f(a[i],i,a)}}Subflow_prototype.connect=function(target){return this.targets().add(target),target.source=this},Subflow_prototype.add=function(t){this.value.add.push(t)},Subflow_prototype.rem=function(t){this.value.rem.push(t)},Subflow_prototype.mod=function(t){this.value.mod.push(t)},Subflow_prototype.init=function(pulse){this.value.init(pulse,pulse.NO_SOURCE)},Subflow_prototype.evaluate=function(){return this.value};var Facet_prototype=Object(vega_util.y)(Facet,Transform);function Field(params){Operator.call(this,null,Field_update,params)}function Field_update(_){return this.value&&!_.modified()?this.value:Object(vega_util.A)(_.name)?Object(vega_util.i)(_.name).map((function(f){return Object(vega_util.t)(f)})):Object(vega_util.t)(_.name,_.as)}function Filter(params){Transform.call(this,Object(vega_util.s)(),params)}function Flatten(params){Transform.call(this,[],params)}function Fold(params){Transform.call(this,[],params)}function Formula(params){Transform.call(this,null,params)}function Generate(params){Transform.call(this,[],params)}Facet_prototype.activate=function(flow){this._targets[this._targets.active++]=flow},Facet_prototype.subflow=function(key,flow,pulse,parent){var df,p,flows=this.value,sf=Object(vega_util.v)(flows,key)&&flows[key];return sf?sf.value.stamp<pulse.stamp&&(sf.init(pulse),this.activate(sf)):(p=parent||(p=this._group[key])&&p.tuple,sf=(df=pulse.dataflow).add(new Subflow(pulse.fork(pulse.NO_SOURCE),this)).connect(flow(df,key,p)),flows[key]=sf,this.activate(sf)),sf},Facet_prototype.transform=function(_,pulse){var df=pulse.dataflow,self=this,key=_.key,flow=_.subflow,cache=this._keys,rekey=_.modified("key");function subflow(key){return self.subflow(key,flow,pulse)}return this._group=_.group||{},this._targets.active=0,pulse.visit(pulse.REM,(function(t){var id=tupleid(t),k=cache.get(id);void 0!==k&&(cache.delete(id),subflow(k).rem(t))})),pulse.visit(pulse.ADD,(function(t){var k=key(t);cache.set(tupleid(t),k),subflow(k).add(t)})),rekey||pulse.modified(key.fields)?pulse.visit(pulse.MOD,(function(t){var id=tupleid(t),k0=cache.get(id),k1=key(t);k0===k1?subflow(k1).mod(t):(cache.set(id,k1),subflow(k0).rem(t),subflow(k1).add(t))})):pulse.changed(pulse.MOD)&&pulse.visit(pulse.MOD,(function(t){subflow(cache.get(tupleid(t))).mod(t)})),rekey&&pulse.visit(pulse.REFLOW,(function(t){var id=tupleid(t),k0=cache.get(id),k1=key(t);k0!==k1&&(cache.set(id,k1),subflow(k0).rem(t),subflow(k1).add(t))})),cache.empty>df.cleanThreshold&&df.runAfter(cache.clean),pulse},Object(vega_util.y)(Field,Operator),Filter.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},Object(vega_util.y)(Filter,Transform).transform=function(_,pulse){var df=pulse.dataflow,cache=this.value,output=pulse.fork(),add=output.add,rem=output.rem,mod=output.mod,test=_.expr,isMod=!0;function revisit(t){var id=tupleid(t),b=test(t,_),s=cache.get(id);b&&s?(cache.delete(id),add.push(t)):b||s?isMod&&b&&!s&&mod.push(t):(cache.set(id,1),rem.push(t))}return pulse.visit(pulse.REM,(function(t){var id=tupleid(t);cache.has(id)?cache.delete(id):rem.push(t)})),pulse.visit(pulse.ADD,(function(t){test(t,_)?add.push(t):cache.set(tupleid(t),1)})),pulse.visit(pulse.MOD,revisit),_.modified()&&(isMod=!1,pulse.visit(pulse.REFLOW,revisit)),cache.empty>df.cleanThreshold&&df.runAfter(cache.clean),output},Flatten.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},Object(vega_util.y)(Flatten,Transform).transform=function(_,pulse){var out=pulse.fork(pulse.NO_SOURCE),fields=_.fields,as=fieldNames(fields,_.as||[]),index=_.index||null,m=as.length;return out.rem=this.value,pulse.visit(pulse.SOURCE,(function(t){for(var j,d,v,arrays=fields.map(f=>f(t)),maxlen=arrays.reduce((l,a)=>Math.max(l,a.length),0),i=0;i<maxlen;++i){for(d=Tuple_derive(t),j=0;j<m;++j)d[as[j]]=null==(v=arrays[j][i])?null:v;index&&(d[index]=i),out.add.push(d)}})),this.value=out.source=out.add,index&&out.modifies(index),out.modifies(as)},Fold.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},Object(vega_util.y)(Fold,Transform).transform=function(_,pulse){var out=pulse.fork(pulse.NO_SOURCE),fields=_.fields,fnames=fields.map(vega_util.h),as=_.as||["key","value"],k=as[0],v=as[1],n=fields.length;return out.rem=this.value,pulse.visit(pulse.SOURCE,(function(t){for(var d,i=0;i<n;++i)(d=Tuple_derive(t))[k]=fnames[i],d[v]=fields[i](t),out.add.push(d)})),this.value=out.source=out.add,out.modifies(as)},Formula.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},Object(vega_util.y)(Formula,Transform).transform=function(_,pulse){var func=_.expr,as=_.as,mod=_.modified(),flag=_.initonly?pulse.ADD:mod?pulse.SOURCE:pulse.modified(func.fields)||pulse.modified(as)?pulse.ADD_MOD:pulse.ADD;return mod&&(pulse=pulse.materialize().reflow(!0)),_.initonly||pulse.modifies(as),pulse.visit(flag,t=>t[as]=func(t,_))},Object(vega_util.y)(Generate,Transform).transform=function(_,pulse){var add,rem,t,data=this.value,out=pulse.fork(pulse.ALL),num=_.size-data.length,gen=_.generator;if(num>0){for(add=[];--num>=0;)add.push(t=ingest(gen(_))),data.push(t);out.add=out.add.length?out.materialize(out.ADD).add.concat(add):add}else rem=data.slice(0,-num),out.rem=out.rem.length?out.materialize(out.REM).rem.concat(rem):rem,data=data.slice(-num);return out.source=this.value=data,out};var Methods={value:"value",median:median,mean:function mean_mean(values,valueof){let count=0,sum=0;if(void 0===valueof)for(let value of values)null!=value&&(value=+value)>=value&&(++count,sum+=value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(value=+value)>=value&&(++count,sum+=value)}if(count)return sum/count},min:min_min,max:max_max},Empty=[];function Impute(params){Transform.call(this,[],params)}function JoinAggregate(params){Aggregate.call(this,params)}Impute.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},Object(vega_util.y)(Impute,Transform).transform=function(_,pulse){var group,value,gVals,kVal,g,i,j,l,n,t,out=pulse.fork(pulse.ALL),impute=function getValue(_){var v,m=_.method||Methods.value;if(null!=Methods[m])return m===Methods.value?(v=void 0!==_.value?_.value:0,function(){return v}):Methods[m];Object(vega_util.n)("Unrecognized imputation method: "+m)}(_),field=function getField(_){var f=_.field;return function(t){return t?f(t):NaN}}(_),fName=Object(vega_util.h)(_.field),kName=Object(vega_util.h)(_.key),gNames=(_.groupby||[]).map(vega_util.h),groups=function Impute_partition(data,groupby,key,keyvals){var gVals,gKey,group,i,j,k,n,t,get=function(f){return f(t)},groups=[],domain=keyvals?keyvals.slice():[],kMap={},gMap={};for(domain.forEach((function(k,i){kMap[k]=i+1})),i=0,n=data.length;i<n;++i)t=data[i],k=key(t),j=kMap[k]||(kMap[k]=domain.push(k)),gKey=(gVals=groupby?groupby.map(get):Empty)+"",(group=gMap[gKey])||(group=gMap[gKey]=[],groups.push(group),group.values=gVals),group[j-1]=t;return groups.domain=domain,groups}(pulse.source,_.groupby,_.key,_.keyvals),curr=[],prev=this.value,m=groups.domain.length;for(g=0,l=groups.length;g<l;++g)for(gVals=(group=groups[g]).values,value=NaN,j=0;j<m;++j)if(null==group[j]){for(kVal=groups.domain[j],t={_impute:!0},i=0,n=gVals.length;i<n;++i)t[gNames[i]]=gVals[i];t[kName]=kVal,t[fName]=Number.isNaN(value)?value=impute(group,field):value,curr.push(ingest(t))}return curr.length&&(out.add=out.materialize(out.ADD).add.concat(curr)),prev.length&&(out.rem=out.materialize(out.REM).rem.concat(prev)),this.value=curr,out},JoinAggregate.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:ValidAggregateOps},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var JoinAggregate_prototype=Object(vega_util.y)(JoinAggregate,Aggregate);function KDE(params){Transform.call(this,null,params)}function Key(params){Operator.call(this,null,Key_update,params)}function Key_update(_){return this.value&&!_.modified()?this.value:Object(vega_util.I)(_.fields,_.flat)}function Load(params){Transform.call(this,[],params)}function Load_output(op,pulse,data){data.forEach(ingest);const out=pulse.fork(pulse.NO_FIELDS&pulse.NO_SOURCE);return out.rem=op.value,op.value=out.add=out.source=data,out}function Lookup(params){Transform.call(this,{},params)}function MultiExtent(params){Operator.call(this,null,MultiExtent_update,params)}function MultiExtent_update(_){if(this.value&&!_.modified())return this.value;var i,n,e,min=1/0,max=-1/0,ext=_.extents;for(i=0,n=ext.length;i<n;++i)(e=ext[i])[0]<min&&(min=e[0]),e[1]>max&&(max=e[1]);return[min,max]}function MultiValues(params){Operator.call(this,null,MultiValues_update,params)}function MultiValues_update(_){return this.value&&!_.modified()?this.value:_.values.reduce((function(data,_){return data.concat(_)}),[])}function Params(params){Transform.call(this,null,params)}function Pivot(params){Aggregate.call(this,params)}JoinAggregate_prototype.transform=function(_,pulse){var cells,aggr=this,mod=_.modified();return aggr.value&&(mod||pulse.modified(aggr._inputs,!0))?(cells=aggr.value=mod?aggr.init(_):{},pulse.visit(pulse.SOURCE,(function(t){aggr.add(t)}))):(cells=aggr.value=aggr.value||this.init(_),pulse.visit(pulse.REM,(function(t){aggr.rem(t)})),pulse.visit(pulse.ADD,(function(t){aggr.add(t)}))),aggr.changes(),pulse.visit(pulse.SOURCE,(function(t){Object(vega_util.o)(t,cells[aggr.cellkey(t)].tuple)})),pulse.reflow(mod).modifies(this._outputs)},JoinAggregate_prototype.changes=function(){var i,n,adds=this._adds,mods=this._mods;for(i=0,n=this._alen;i<n;++i)this.celltuple(adds[i]),adds[i]=null;for(i=0,n=this._mlen;i<n;++i)this.celltuple(mods[i]),mods[i]=null;this._alen=this._mlen=0},KDE.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(vega_util.y)(KDE,Transform).transform=function(_,pulse){var out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);if(!this.value||pulse.changed()||_.modified()){const source=pulse.materialize(pulse.SOURCE).source,groups=util_partition(source,_.groupby,_.field),names=(_.groupby||[]).map(vega_util.h),bandwidth=_.bandwidth,method=_.cumulative?"cdf":"pdf",as=_.as||["value","density"],values=[];let domain=_.extent,minsteps=_.steps||_.minsteps||25,maxsteps=_.steps||_.maxsteps||200;"pdf"!==method&&"cdf"!==method&&Object(vega_util.n)("Invalid density method: "+method),"shared"===_.resolve&&(domain||(domain=Object(vega_util.p)(source,_.field)),minsteps=maxsteps=_.steps||maxsteps),groups.forEach(g=>{const density=src_kde(g,bandwidth)[method],scale=_.counts?g.length:1,local=domain||Object(vega_util.p)(g);sampleCurve(density,local,minsteps,maxsteps).forEach(v=>{const t={};for(let i=0;i<names.length;++i)t[names[i]]=g.dims[i];t[as[0]]=v[0],t[as[1]]=v[1]*scale,values.push(ingest(t))})}),this.value&&(out.rem=this.value),this.value=out.add=out.source=values}return out},Object(vega_util.y)(Key,Operator),Object(vega_util.y)(Load,Transform).transform=function(_,pulse){const df=pulse.dataflow;return _.values?Load_output(this,pulse,df.parse(_.values,_.format)):df.request(_.url,_.format).then(res=>Load_output(this,pulse,Object(vega_util.i)(res.data)))},Lookup.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},Object(vega_util.y)(Lookup,Transform).transform=function(_,pulse){var set,m,out=pulse,as=_.as,keys=_.fields,index=_.index,values=_.values,defaultValue=null==_.default?null:_.default,reset=_.modified(),flag=reset?pulse.SOURCE:pulse.ADD,n=keys.length;return values?(m=values.length,n>1&&!as&&Object(vega_util.n)('Multi-field lookup requires explicit "as" parameter.'),as&&as.length!==n*m&&Object(vega_util.n)('The "as" parameter has too few output field names.'),as=as||values.map(vega_util.h),set=function(t){for(var j,v,i=0,k=0;i<n;++i)if(null==(v=index.get(keys[i](t))))for(j=0;j<m;++j,++k)t[as[k]]=defaultValue;else for(j=0;j<m;++j,++k)t[as[k]]=values[j](v)}):(as||Object(vega_util.n)("Missing output field names."),set=function(t){for(var v,i=0;i<n;++i)v=index.get(keys[i](t)),t[as[i]]=null==v?defaultValue:v}),reset?out=pulse.reflow(!0):flag|=keys.some((function(k){return pulse.modified(k.fields)}))?pulse.MOD:0,pulse.visit(flag,set),out.modifies(as)},Object(vega_util.y)(MultiExtent,Operator),Object(vega_util.y)(MultiValues,Operator),Object(vega_util.y)(Params,Transform),Params.prototype.transform=function(_,pulse){return this.modified(_.modified()),this.value=_,pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS)},Pivot.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:ValidAggregateOps,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};var Pivot_prototype=Object(vega_util.y)(Pivot,Aggregate);function PreFacet(params){Facet.call(this,params)}function Project(params){Transform.call(this,null,params)}function Proxy(params){Transform.call(this,null,params)}Pivot_prototype._transform=Pivot_prototype.transform,Pivot_prototype.transform=function(_,pulse){return this._transform(function aggregateParams(_,pulse){var key=_.field,value=_.value,op=("count"===_.op?"__count__":_.op)||"sum",fields=Object(vega_util.g)(key).concat(Object(vega_util.g)(value)),keys=function pivotKeys(key,limit,pulse){var map={},list=[];return pulse.visit(pulse.SOURCE,(function(t){var k=key(t);map[k]||(map[k]=1,list.push(k))})),list.sort((function(u,v){return(u<v||null==u)&&null!=v?-1:(u>v||null==v)&&null!=u?1:(v=v instanceof Date?+v:v,(u=u instanceof Date?+u:u)!==u&&v==v?-1:v!=v&&u==u?1:0)})),limit?list.slice(0,limit):list}(key,_.limit||0,pulse);pulse.changed()&&_.set("__pivot__",null,null,!0);return{key:_.key,groupby:_.groupby,ops:keys.map((function(){return op})),fields:keys.map((function(k){return function Pivot_get(k,key,value,fields){return Object(vega_util.f)((function(d){return key(d)===k?value(d):NaN}),fields,k+"")}(k,key,value,fields)})),as:keys.map((function(k){return k+""})),modified:_.modified.bind(_)}}(_,pulse),pulse)},Object(vega_util.y)(PreFacet,Facet).transform=function(_,pulse){var self=this,flow=_.subflow,field=_.field;return(_.modified("field")||field&&pulse.modified(Object(vega_util.g)(field)))&&Object(vega_util.n)("PreFacet does not support field modification."),this._targets.active=0,pulse.visit(pulse.MOD,(function(t){var sf=self.subflow(tupleid(t),flow,pulse,t);field?field(t).forEach((function(_){sf.mod(_)})):sf.mod(t)})),pulse.visit(pulse.ADD,(function(t){var sf=self.subflow(tupleid(t),flow,pulse,t);field?field(t).forEach((function(_){sf.add(ingest(_))})):sf.add(t)})),pulse.visit(pulse.REM,(function(t){var sf=self.subflow(tupleid(t),flow,pulse,t);field?field(t).forEach((function(_){sf.rem(_)})):sf.rem(t)})),pulse},Project.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},Object(vega_util.y)(Project,Transform).transform=function(_,pulse){var out,lut,fields=_.fields,as=fieldNames(_.fields,_.as||[]),derive=fields?function(s,t){return function Project_project(s,t,fields,as){for(var i=0,n=fields.length;i<n;++i)t[as[i]]=fields[i](s);return t}(s,t,fields,as)}:rederive;return this.value?lut=this.value:(pulse=pulse.addAll(),lut=this.value={}),out=pulse.fork(pulse.NO_SOURCE),pulse.visit(pulse.REM,(function(t){var id=tupleid(t);out.rem.push(lut[id]),lut[id]=null})),pulse.visit(pulse.ADD,(function(t){var dt=derive(t,ingest({}));lut[tupleid(t)]=dt,out.add.push(dt)})),pulse.visit(pulse.MOD,(function(t){out.mod.push(derive(t,lut[tupleid(t)]))})),out},Object(vega_util.y)(Proxy,Transform).transform=function(_,pulse){return this.value=_.value,_.modified("value")?pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS):pulse.StopPropagation};var src_range=function(start,stop,step){start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,start=0,1):n<3?1:+step;for(var i=-1,n=0|Math.max(0,Math.ceil((stop-start)/step)),range=new Array(n);++i<n;)range[i]=start+i*step;return range};function Quantile(params){Transform.call(this,null,params)}Quantile.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};var Quantile_prototype=Object(vega_util.y)(Quantile,Transform);function Relay(params){Transform.call(this,null,params)}function Sample(params){Transform.call(this,[],params),this.count=0}function Sequence(params){Transform.call(this,null,params)}function Sieve(params){Transform.call(this,null,params),this.modified(!0)}Quantile_prototype.transform=function(_,pulse){var out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),as=_.as||["prob","value"];if(this.value&&!_.modified()&&!pulse.changed())return out.source=this.value,out;const groups=util_partition(pulse.materialize(pulse.SOURCE).source,_.groupby,_.field),names=(_.groupby||[]).map(vega_util.h),values=[],step=_.step||.01,p=_.probs||src_range(step/2,1-1e-14,step),n=p.length;return groups.forEach(g=>{const q=quantiles(g,p);for(let i=0;i<n;++i){const t={};for(let i=0;i<names.length;++i)t[names[i]]=g.dims[i];t[as[0]]=p[i],t[as[1]]=q[i],values.push(ingest(t))}}),this.value&&(out.rem=this.value),this.value=out.add=out.source=values,out},Object(vega_util.y)(Relay,Transform).transform=function(_,pulse){var out,lut;return this.value?lut=this.value:(out=pulse=pulse.addAll(),lut=this.value={}),_.derive&&(out=pulse.fork(pulse.NO_SOURCE),pulse.visit(pulse.REM,t=>{var id=tupleid(t);out.rem.push(lut[id]),lut[id]=null}),pulse.visit(pulse.ADD,t=>{var dt=Tuple_derive(t);lut[tupleid(t)]=dt,out.add.push(dt)}),pulse.visit(pulse.MOD,t=>{var k,dt=lut[tupleid(t)];for(k in t)dt[k]=t[k],out.modifies(k);out.mod.push(dt)})),out},Sample.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},Object(vega_util.y)(Sample,Transform).transform=function(_,pulse){var out=pulse.fork(pulse.NO_SOURCE),mod=_.modified("size"),num=_.size,res=this.value,cnt=this.count,cap=0,map=res.reduce((function(m,t){return m[tupleid(t)]=1,m}),{});function update(t){var p,idx;res.length<num?res.push(t):(idx=~~((cnt+1)*random_random()))<res.length&&idx>=cap&&(p=res[idx],map[tupleid(p)]&&out.rem.push(p),res[idx]=t),++cnt}if(pulse.rem.length&&(pulse.visit(pulse.REM,(function(t){var id=tupleid(t);map[id]&&(map[id]=-1,out.rem.push(t)),--cnt})),res=res.filter((function(t){return-1!==map[tupleid(t)]}))),(pulse.rem.length||mod)&&res.length<num&&pulse.source&&(cap=cnt=res.length,pulse.visit(pulse.SOURCE,(function(t){map[tupleid(t)]||update(t)})),cap=-1),mod&&res.length>num){for(var i=0,n=res.length-num;i<n;++i)map[tupleid(res[i])]=-1,out.rem.push(res[i]);res=res.slice(n)}return pulse.mod.length&&pulse.visit(pulse.MOD,(function(t){map[tupleid(t)]&&out.mod.push(t)})),pulse.add.length&&pulse.visit(pulse.ADD,update),(pulse.add.length||cap<0)&&(out.add=res.filter((function(t){return!map[tupleid(t)]}))),this.count=cnt,this.value=out.source=res,out},Sequence.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},Object(vega_util.y)(Sequence,Transform).transform=function(_,pulse){if(!this.value||_.modified()){var out=pulse.materialize().fork(pulse.MOD),as=_.as||"data";return out.rem=this.value?pulse.rem.concat(this.value):pulse.rem,this.value=src_range(_.start,_.stop,_.step||1).map((function(v){var t={};return t[as]=v,ingest(t)})),out.add=pulse.add.concat(this.value),out}},Object(vega_util.y)(Sieve,Transform).transform=function(_,pulse){return this.value=pulse.source,pulse.changed()?pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS):pulse.StopPropagation};const YEAR="year",QUARTER="quarter",MONTH="month",WEEK="week",units_DATE="date",DAY="day",HOURS="hours",MINUTES="minutes",SECONDS="seconds",MILLISECONDS="milliseconds",UNITS=[YEAR,QUARTER,MONTH,WEEK,units_DATE,DAY,HOURS,MINUTES,SECONDS,MILLISECONDS].reduce((o,u,i)=>(o[u]=1+i,o),{});function units_timeUnits(units){const u=Object(vega_util.i)(units).slice(),m={};return u.length||Object(vega_util.n)("Missing time unit."),u.forEach(unit=>{Object(vega_util.v)(UNITS,unit)?m[unit]=1:Object(vega_util.n)(`Invalid time unit: ${unit}.`)}),(m[WEEK]||m[DAY])&&(m[QUARTER]||m[MONTH]||m[units_DATE])&&Object(vega_util.n)(`Incompatible time units: ${units}`),u.sort((a,b)=>UNITS[a]-UNITS[b]),u}const floor_t0=new Date;function floor_floor(units,step,fn,newDate){const s=step||1,b=Object(vega_util.T)(units),_=(unit,p,key)=>(function floor_skip(f,step,phase){return step<=1?f:phase?(d,y)=>phase+step*Math.floor((f(d,y)-phase)/step):(d,y)=>step*Math.floor(f(d,y)/step)})(fn[key||unit],unit===b&&s,p),t=new Date,u=Object(vega_util.cb)(units),y=u[YEAR]?_(YEAR):Object(vega_util.l)(2012),m=u[MONTH]?_(MONTH):u[QUARTER]?_(QUARTER):vega_util.jb,d=u[WEEK]&&u[DAY]?_(DAY,1,WEEK+DAY):u[WEEK]?_(WEEK,1):u[DAY]?_(DAY,1):u[units_DATE]?_(units_DATE,1):vega_util.N,H=u[HOURS]?_(HOURS):vega_util.jb,M=u[MINUTES]?_(MINUTES):vega_util.jb,S=u[SECONDS]?_(SECONDS):vega_util.jb,L=u[MILLISECONDS]?_(MILLISECONDS):vega_util.jb;return function(v){t.setTime(+v);const year=y(t);return newDate(year,m(t),d(t,year),H(t),M(t),S(t),L(t))}}function floor_weekday(week,day,firstDay){return day+7*week-(firstDay+6)%7}const localGet={[YEAR]:d=>d.getFullYear(),[QUARTER]:d=>3*~~(d.getMonth()/3),[MONTH]:d=>d.getMonth(),[units_DATE]:d=>d.getDate(),[HOURS]:d=>d.getHours(),[MINUTES]:d=>d.getMinutes(),[SECONDS]:d=>d.getSeconds(),[MILLISECONDS]:d=>d.getMilliseconds(),[DAY]:(d,y)=>floor_weekday(1,d.getDay(),localFirst(y)),[WEEK]:(d,y)=>floor_weekday(localWeekNum(d),0,localFirst(y)),[WEEK+DAY]:(d,y)=>floor_weekday(localWeekNum(d),d.getDay(),localFirst(y))};function localYear(y){return floor_t0.setFullYear(y),floor_t0.setMonth(0),floor_t0.setDate(1),floor_t0.setHours(0,0,0,0),floor_t0}function localWeekNum(d){return sunday.count(localYear(d.getFullYear())-1,d)}function localFirst(y){return localYear(y).getDay()}function floor_localDate(y,m,d,H,M,S,L){if(0<=y&&y<100){var date=new Date(-1,m,d,H,M,S,L);return date.setFullYear(y),date}return new Date(y,m,d,H,M,S,L)}function timeFloor(units,step){return floor_floor(units,step||1,localGet,floor_localDate)}const utcGet={[YEAR]:d=>d.getUTCFullYear(),[QUARTER]:d=>3*~~(d.getUTCMonth()/3),[MONTH]:d=>d.getUTCMonth(),[units_DATE]:d=>d.getUTCDate(),[HOURS]:d=>d.getUTCHours(),[MINUTES]:d=>d.getUTCMinutes(),[SECONDS]:d=>d.getUTCSeconds(),[MILLISECONDS]:d=>d.getUTCMilliseconds(),[DAY]:(d,y)=>floor_weekday(1,d.getUTCDay(),utcFirst(y)),[WEEK]:(d,y)=>floor_weekday(utcWeekNum(d),0,utcFirst(y)),[WEEK+DAY]:(d,y)=>floor_weekday(utcWeekNum(d),d.getUTCDay(),utcFirst(y))};function utcWeekNum(d){const y=Date.UTC(d.getUTCFullYear(),0,1);return utcSunday.count(y-1,d)}function utcFirst(y){return floor_t0.setTime(Date.UTC(y,0,1)),floor_t0.getUTCDay()}function floor_utcDate(y,m,d,H,M,S,L){if(0<=y&&y<100){var date=new Date(Date.UTC(-1,m,d,H,M,S,L));return date.setUTCFullYear(d.y),date}return new Date(Date.UTC(y,m,d,H,M,S,L))}function utcFloor(units,step){return floor_floor(units,step||1,utcGet,floor_utcDate)}var month_month=newInterval((function(date){date.setDate(1),date.setHours(0,0,0,0)}),(function(date,step){date.setMonth(date.getMonth()+step)}),(function(start,end){return end.getMonth()-start.getMonth()+12*(end.getFullYear()-start.getFullYear())}),(function(date){return date.getMonth()})),src_month=month_month,hour_hour=(month_month.range,newInterval((function(date){date.setTime(date-date.getMilliseconds()-1e3*date.getSeconds()-date.getMinutes()*durationMinute)}),(function(date,step){date.setTime(+date+36e5*step)}),(function(start,end){return(end-start)/36e5}),(function(date){return date.getHours()}))),src_hour=hour_hour,minute_minute=(hour_hour.range,newInterval((function(date){date.setTime(date-date.getMilliseconds()-1e3*date.getSeconds())}),(function(date,step){date.setTime(+date+step*durationMinute)}),(function(start,end){return(end-start)/durationMinute}),(function(date){return date.getMinutes()}))),src_minute=minute_minute,second_second=(minute_minute.range,newInterval((function(date){date.setTime(date-date.getMilliseconds())}),(function(date,step){date.setTime(+date+1e3*step)}),(function(start,end){return(end-start)/1e3}),(function(date){return date.getUTCSeconds()}))),src_second=second_second,millisecond_millisecond=(second_second.range,newInterval((function(){}),(function(date,step){date.setTime(+date+step)}),(function(start,end){return end-start})));millisecond_millisecond.every=function(k){return k=Math.floor(k),isFinite(k)&&k>0?k>1?newInterval((function(date){date.setTime(Math.floor(date/k)*k)}),(function(date,step){date.setTime(+date+step*k)}),(function(start,end){return(end-start)/k})):millisecond_millisecond:null};var src_millisecond=millisecond_millisecond,utcMonth=(millisecond_millisecond.range,newInterval((function(date){date.setUTCDate(1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCMonth(date.getUTCMonth()+step)}),(function(start,end){return end.getUTCMonth()-start.getUTCMonth()+12*(end.getUTCFullYear()-start.getUTCFullYear())}),(function(date){return date.getUTCMonth()}))),src_utcMonth=utcMonth,utcHour=(utcMonth.range,newInterval((function(date){date.setUTCMinutes(0,0,0)}),(function(date,step){date.setTime(+date+36e5*step)}),(function(start,end){return(end-start)/36e5}),(function(date){return date.getUTCHours()}))),src_utcHour=utcHour,utcMinute=(utcHour.range,newInterval((function(date){date.setUTCSeconds(0,0)}),(function(date,step){date.setTime(+date+step*durationMinute)}),(function(start,end){return(end-start)/durationMinute}),(function(date){return date.getUTCMinutes()}))),src_utcMinute=utcMinute;utcMinute.range;const timeIntervals={[YEAR]:src_year,[QUARTER]:src_month.every(3),[MONTH]:src_month,[WEEK]:sunday,[units_DATE]:src_day,[DAY]:src_day,[HOURS]:src_hour,[MINUTES]:src_minute,[SECONDS]:src_second,[MILLISECONDS]:src_millisecond},utcIntervals={[YEAR]:src_utcYear,[QUARTER]:src_utcMonth.every(3),[MONTH]:src_utcMonth,[WEEK]:utcSunday,[units_DATE]:src_utcDay,[DAY]:src_utcDay,[HOURS]:src_utcHour,[MINUTES]:src_utcMinute,[SECONDS]:src_second,[MILLISECONDS]:src_millisecond};function timeInterval(unit){return timeIntervals[unit]}function utcInterval(unit){return utcIntervals[unit]}function interval_offset(ival,date,step){return ival?ival.offset(date,step):void 0}function timeOffset(unit,date,step){return interval_offset(timeInterval(unit),date,step)}function utcOffset(unit,date,step){return interval_offset(utcInterval(unit),date,step)}function interval_sequence(ival,start,stop,step){return ival?ival.range(start,stop,step):void 0}function timeSequence(unit,start,stop,step){return interval_sequence(timeInterval(unit),start,stop,step)}function utcSequence(unit,start,stop,step){return interval_sequence(utcInterval(unit),start,stop,step)}function locale_localDate(d){if(0<=d.y&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);return date.setFullYear(d.y),date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function locale_utcDate(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));return date.setUTCFullYear(d.y),date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function src_locale_newDate(y,m,d){return{y:y,m:m,d:d,H:0,M:0,S:0,L:0}}var src_defaultLocale_locale,defaultLocale_timeFormat,defaultLocale_timeParse,defaultLocale_utcFormat,defaultLocale_utcParse,locale_pads={"-":"",_:" ",0:"0"},locale_numberRe=/^\s*\d+/,locale_percentRe=/^%/,locale_requoteRe=/[\\^$*+?|[\]().{}]/g;function src_locale_pad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function locale_requote(s){return s.replace(locale_requoteRe,"\\$&")}function locale_formatRe(names){return new RegExp("^(?:"+names.map(locale_requote).join("|")+")","i")}function locale_formatLookup(names){for(var map={},i=-1,n=names.length;++i<n;)map[names[i].toLowerCase()]=i;return map}function locale_parseWeekdayNumberSunday(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1}function locale_parseWeekdayNumberMonday(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+1));return n?(d.u=+n[0],i+n[0].length):-1}function locale_parseWeekNumberSunday(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+2));return n?(d.U=+n[0],i+n[0].length):-1}function locale_parseWeekNumberISO(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+2));return n?(d.V=+n[0],i+n[0].length):-1}function locale_parseWeekNumberMonday(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+2));return n?(d.W=+n[0],i+n[0].length):-1}function locale_parseFullYear(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1}function locale_parseYear(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function locale_parseZone(d,string,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i,i+6));return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function locale_parseQuarter(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+1));return n?(d.q=3*n[0]-3,i+n[0].length):-1}function locale_parseMonthNumber(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+2));return n?(d.m=n[0]-1,i+n[0].length):-1}function locale_parseDayOfMonth(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}function locale_parseDayOfYear(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1}function locale_parseHour24(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function locale_parseMinutes(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1}function locale_parseSeconds(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1}function locale_parseMilliseconds(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1}function locale_parseMicroseconds(d,string,i){var n=locale_numberRe.exec(string.slice(i,i+6));return n?(d.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function locale_parseLiteralPercent(d,string,i){var n=locale_percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function locale_parseUnixTimestamp(d,string,i){var n=locale_numberRe.exec(string.slice(i));return n?(d.Q=+n[0],i+n[0].length):-1}function locale_parseUnixTimestampSeconds(d,string,i){var n=locale_numberRe.exec(string.slice(i));return n?(d.s=+n[0],i+n[0].length):-1}function locale_formatDayOfMonth(d,p){return src_locale_pad(d.getDate(),p,2)}function locale_formatHour24(d,p){return src_locale_pad(d.getHours(),p,2)}function locale_formatHour12(d,p){return src_locale_pad(d.getHours()%12||12,p,2)}function locale_formatDayOfYear(d,p){return src_locale_pad(1+src_day.count(src_year(d),d),p,3)}function locale_formatMilliseconds(d,p){return src_locale_pad(d.getMilliseconds(),p,3)}function locale_formatMicroseconds(d,p){return locale_formatMilliseconds(d,p)+"000"}function locale_formatMonthNumber(d,p){return src_locale_pad(d.getMonth()+1,p,2)}function locale_formatMinutes(d,p){return src_locale_pad(d.getMinutes(),p,2)}function locale_formatSeconds(d,p){return src_locale_pad(d.getSeconds(),p,2)}function locale_formatWeekdayNumberMonday(d){var day=d.getDay();return 0===day?7:day}function locale_formatWeekNumberSunday(d,p){return src_locale_pad(sunday.count(src_year(d)-1,d),p,2)}function locale_formatWeekNumberISO(d,p){var day=d.getDay();return d=day>=4||0===day?thursday(d):thursday.ceil(d),src_locale_pad(thursday.count(src_year(d),d)+(4===src_year(d).getDay()),p,2)}function locale_formatWeekdayNumberSunday(d){return d.getDay()}function locale_formatWeekNumberMonday(d,p){return src_locale_pad(monday.count(src_year(d)-1,d),p,2)}function src_locale_formatYear(d,p){return src_locale_pad(d.getFullYear()%100,p,2)}function locale_formatFullYear(d,p){return src_locale_pad(d.getFullYear()%1e4,p,4)}function locale_formatZone(d){var z=d.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+src_locale_pad(z/60|0,"0",2)+src_locale_pad(z%60,"0",2)}function locale_formatUTCDayOfMonth(d,p){return src_locale_pad(d.getUTCDate(),p,2)}function locale_formatUTCHour24(d,p){return src_locale_pad(d.getUTCHours(),p,2)}function locale_formatUTCHour12(d,p){return src_locale_pad(d.getUTCHours()%12||12,p,2)}function locale_formatUTCDayOfYear(d,p){return src_locale_pad(1+src_utcDay.count(src_utcYear(d),d),p,3)}function locale_formatUTCMilliseconds(d,p){return src_locale_pad(d.getUTCMilliseconds(),p,3)}function locale_formatUTCMicroseconds(d,p){return locale_formatUTCMilliseconds(d,p)+"000"}function locale_formatUTCMonthNumber(d,p){return src_locale_pad(d.getUTCMonth()+1,p,2)}function locale_formatUTCMinutes(d,p){return src_locale_pad(d.getUTCMinutes(),p,2)}function locale_formatUTCSeconds(d,p){return src_locale_pad(d.getUTCSeconds(),p,2)}function locale_formatUTCWeekdayNumberMonday(d){var dow=d.getUTCDay();return 0===dow?7:dow}function locale_formatUTCWeekNumberSunday(d,p){return src_locale_pad(utcSunday.count(src_utcYear(d)-1,d),p,2)}function locale_formatUTCWeekNumberISO(d,p){var day=d.getUTCDay();return d=day>=4||0===day?utcThursday(d):utcThursday.ceil(d),src_locale_pad(utcThursday.count(src_utcYear(d),d)+(4===src_utcYear(d).getUTCDay()),p,2)}function locale_formatUTCWeekdayNumberSunday(d){return d.getUTCDay()}function locale_formatUTCWeekNumberMonday(d,p){return src_locale_pad(utcMonday.count(src_utcYear(d)-1,d),p,2)}function locale_formatUTCYear(d,p){return src_locale_pad(d.getUTCFullYear()%100,p,2)}function locale_formatUTCFullYear(d,p){return src_locale_pad(d.getUTCFullYear()%1e4,p,4)}function locale_formatUTCZone(){return"+0000"}function locale_formatLiteralPercent(){return"%"}function locale_formatUnixTimestamp(d){return+d}function locale_formatUnixTimestampSeconds(d){return Math.floor(+d/1e3)}function defaultLocale_defaultLocale(definition){return src_defaultLocale_locale=function locale_formatLocale(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths,periodRe=locale_formatRe(locale_periods),periodLookup=locale_formatLookup(locale_periods),weekdayRe=locale_formatRe(locale_weekdays),weekdayLookup=locale_formatLookup(locale_weekdays),shortWeekdayRe=locale_formatRe(locale_shortWeekdays),shortWeekdayLookup=locale_formatLookup(locale_shortWeekdays),monthRe=locale_formatRe(locale_months),monthLookup=locale_formatLookup(locale_months),shortMonthRe=locale_formatRe(locale_shortMonths),shortMonthLookup=locale_formatLookup(locale_shortMonths),formats={a:function formatShortWeekday(d){return locale_shortWeekdays[d.getDay()]},A:function formatWeekday(d){return locale_weekdays[d.getDay()]},b:function formatShortMonth(d){return locale_shortMonths[d.getMonth()]},B:function formatMonth(d){return locale_months[d.getMonth()]},c:null,d:locale_formatDayOfMonth,e:locale_formatDayOfMonth,f:locale_formatMicroseconds,H:locale_formatHour24,I:locale_formatHour12,j:locale_formatDayOfYear,L:locale_formatMilliseconds,m:locale_formatMonthNumber,M:locale_formatMinutes,p:function formatPeriod(d){return locale_periods[+(d.getHours()>=12)]},q:function formatQuarter(d){return 1+~~(d.getMonth()/3)},Q:locale_formatUnixTimestamp,s:locale_formatUnixTimestampSeconds,S:locale_formatSeconds,u:locale_formatWeekdayNumberMonday,U:locale_formatWeekNumberSunday,V:locale_formatWeekNumberISO,w:locale_formatWeekdayNumberSunday,W:locale_formatWeekNumberMonday,x:null,X:null,y:src_locale_formatYear,Y:locale_formatFullYear,Z:locale_formatZone,"%":locale_formatLiteralPercent},utcFormats={a:function formatUTCShortWeekday(d){return locale_shortWeekdays[d.getUTCDay()]},A:function formatUTCWeekday(d){return locale_weekdays[d.getUTCDay()]},b:function formatUTCShortMonth(d){return locale_shortMonths[d.getUTCMonth()]},B:function formatUTCMonth(d){return locale_months[d.getUTCMonth()]},c:null,d:locale_formatUTCDayOfMonth,e:locale_formatUTCDayOfMonth,f:locale_formatUTCMicroseconds,H:locale_formatUTCHour24,I:locale_formatUTCHour12,j:locale_formatUTCDayOfYear,L:locale_formatUTCMilliseconds,m:locale_formatUTCMonthNumber,M:locale_formatUTCMinutes,p:function formatUTCPeriod(d){return locale_periods[+(d.getUTCHours()>=12)]},q:function formatUTCQuarter(d){return 1+~~(d.getUTCMonth()/3)},Q:locale_formatUnixTimestamp,s:locale_formatUnixTimestampSeconds,S:locale_formatUTCSeconds,u:locale_formatUTCWeekdayNumberMonday,U:locale_formatUTCWeekNumberSunday,V:locale_formatUTCWeekNumberISO,w:locale_formatUTCWeekdayNumberSunday,W:locale_formatUTCWeekNumberMonday,x:null,X:null,y:locale_formatUTCYear,Y:locale_formatUTCFullYear,Z:locale_formatUTCZone,"%":locale_formatLiteralPercent},parses={a:function parseShortWeekday(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},A:function parseWeekday(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},b:function parseShortMonth(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup[n[0].toLowerCase()],i+n[0].length):-1},B:function parseMonth(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup[n[0].toLowerCase()],i+n[0].length):-1},c:function parseLocaleDateTime(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)},d:locale_parseDayOfMonth,e:locale_parseDayOfMonth,f:locale_parseMicroseconds,H:locale_parseHour24,I:locale_parseHour24,j:locale_parseDayOfYear,L:locale_parseMilliseconds,m:locale_parseMonthNumber,M:locale_parseMinutes,p:function parsePeriod(d,string,i){var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup[n[0].toLowerCase()],i+n[0].length):-1},q:locale_parseQuarter,Q:locale_parseUnixTimestamp,s:locale_parseUnixTimestampSeconds,S:locale_parseSeconds,u:locale_parseWeekdayNumberMonday,U:locale_parseWeekNumberSunday,V:locale_parseWeekNumberISO,w:locale_parseWeekdayNumberSunday,W:locale_parseWeekNumberMonday,x:function parseLocaleDate(d,string,i){return parseSpecifier(d,locale_date,string,i)},X:function parseLocaleTime(d,string,i){return parseSpecifier(d,locale_time,string,i)},y:locale_parseYear,Y:locale_parseFullYear,Z:locale_parseZone,"%":locale_parseLiteralPercent};function newFormat(specifier,formats){return function(date){var c,pad,format,string=[],i=-1,j=0,n=specifier.length;for(date instanceof Date||(date=new Date(+date));++i<n;)37===specifier.charCodeAt(i)&&(string.push(specifier.slice(j,i)),null!=(pad=locale_pads[c=specifier.charAt(++i)])?c=specifier.charAt(++i):pad="e"===c?" ":"0",(format=formats[c])&&(c=format(date,pad)),string.push(c),j=i+1);return string.push(specifier.slice(j,i)),string.join("")}}function newParse(specifier,Z){return function(string){var week,day,d=src_locale_newDate(1900,void 0,1);if(parseSpecifier(d,specifier,string+="",0)!=string.length)return null;if("Q"in d)return new Date(d.Q);if("s"in d)return new Date(1e3*d.s+("L"in d?d.L:0));if(!Z||"Z"in d||(d.Z=0),"p"in d&&(d.H=d.H%12+12*d.p),void 0===d.m&&(d.m="q"in d?d.q:0),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(day=(week=locale_utcDate(src_locale_newDate(d.y,0,1))).getUTCDay(),week=day>4||0===day?utcMonday.ceil(week):utcMonday(week),week=src_utcDay.offset(week,7*(d.V-1)),d.y=week.getUTCFullYear(),d.m=week.getUTCMonth(),d.d=week.getUTCDate()+(d.w+6)%7):(day=(week=locale_localDate(src_locale_newDate(d.y,0,1))).getDay(),week=day>4||0===day?monday.ceil(week):monday(week),week=src_day.offset(week,7*(d.V-1)),d.y=week.getFullYear(),d.m=week.getMonth(),d.d=week.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),day="Z"in d?locale_utcDate(src_locale_newDate(d.y,0,1)).getUTCDay():locale_localDate(src_locale_newDate(d.y,0,1)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(day+5)%7:d.w+7*d.U-(day+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,locale_utcDate(d)):locale_localDate(d)}}function parseSpecifier(d,specifier,string,j){for(var c,parse,i=0,n=specifier.length,m=string.length;i<n;){if(j>=m)return-1;if(37===(c=specifier.charCodeAt(i++))){if(c=specifier.charAt(i++),!(parse=parses[c in locale_pads?specifier.charAt(i++):c])||(j=parse(d,string,j))<0)return-1}else if(c!=string.charCodeAt(j++))return-1}return j}return(formats.x=newFormat(locale_date,formats),formats.X=newFormat(locale_time,formats),formats.c=newFormat(locale_dateTime,formats),utcFormats.x=newFormat(locale_date,utcFormats),utcFormats.X=newFormat(locale_time,utcFormats),utcFormats.c=newFormat(locale_dateTime,utcFormats),{format:function(specifier){var f=newFormat(specifier+="",formats);return f.toString=function(){return specifier},f},parse:function(specifier){var p=newParse(specifier+="",!1);return p.toString=function(){return specifier},p},utcFormat:function(specifier){var f=newFormat(specifier+="",utcFormats);return f.toString=function(){return specifier},f},utcParse:function(specifier){var p=newParse(specifier+="",!0);return p.toString=function(){return specifier},p}})}(definition),defaultLocale_timeFormat=src_defaultLocale_locale.format,defaultLocale_timeParse=src_defaultLocale_locale.parse,defaultLocale_utcFormat=src_defaultLocale_locale.utcFormat,defaultLocale_utcParse=src_defaultLocale_locale.utcParse,src_defaultLocale_locale}defaultLocale_defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const defaultSpecifiers={[YEAR]:"%Y ",[QUARTER]:"Q%q ",[MONTH]:"%b ",[units_DATE]:"%d ",[WEEK]:"W%U ",[DAY]:"%a ",[HOURS]:"%H:00",[MINUTES]:"00:%M",[SECONDS]:":%S",[MILLISECONDS]:".%L",[`${YEAR}-${MONTH}`]:"%Y-%m ",[`${YEAR}-${MONTH}-${units_DATE}`]:"%Y-%m-%d ",[`${HOURS}-${MINUTES}`]:"%H:%M"};function timeUnitSpecifier(units,specifiers){const s=Object(vega_util.o)({},defaultSpecifiers,specifiers),u=units_timeUnits(units),n=u.length;let end,key,fmt="",start=0;for(start=0;start<n;)for(end=u.length;end>start;--end)if(null!=s[key=u.slice(start,end).join("-")]){fmt+=s[key],start=end;break}return fmt.trim()}function format_timeFormat(specifier){return formatter(defaultLocale_timeFormat,timeInterval,specifier)}function format_utcFormat(specifier){return formatter(defaultLocale_utcFormat,utcInterval,specifier)}function formatter(format,interval,specifier){return Object(vega_util.H)(specifier)?format(specifier):function multiFormat(format,interval,spec){spec=spec||{},Object(vega_util.F)(spec)||Object(vega_util.n)(`Invalid time multi-format specifier: ${spec}`);const second=interval(SECONDS),minute=interval(MINUTES),hour=interval(HOURS),day=interval(units_DATE),week=interval(WEEK),month=interval(MONTH),quarter=interval(QUARTER),year=interval(YEAR),L=format(spec[MILLISECONDS]||".%L"),S=format(spec[SECONDS]||":%S"),M=format(spec[MINUTES]||"%I:%M"),H=format(spec[HOURS]||"%I %p"),d=format(spec[units_DATE]||spec[DAY]||"%a %d"),w=format(spec[WEEK]||"%b %d"),m=format(spec[MONTH]||"%B"),q=format(spec[QUARTER]||"%B"),y=format(spec[YEAR]||"%Y");return function(date){return(second(date)<date?L:minute(date)<date?S:hour(date)<date?M:day(date)<date?H:month(date)<date?week(date)<date?d:w:year(date)<date?quarter(date)<date?m:q:y)(date)}}(format,interval,specifier)}var bisector=function(compare){return 1===compare.length&&(compare=function ascendingComparator(f){return function(d,x){return ascending(f(d),x)}}(compare)),{left:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)<0?lo=mid+1:hi=mid}return lo},right:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)>0?hi=mid:lo=mid+1}return lo}}};var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2),src_ticks=function(start,stop,count){var reverse,n,ticks,step,i=-1;if(count=+count,(start=+start)===(stop=+stop)&&count>0)return[start];if((reverse=stop<start)&&(n=start,start=stop,stop=n),0===(step=tickIncrement(start,stop,count))||!isFinite(step))return[];if(step>0)for(start=Math.ceil(start/step),stop=Math.floor(stop/step),ticks=new Array(n=Math.ceil(stop-start+1));++i<n;)ticks[i]=(start+i)*step;else for(start=Math.floor(start*step),stop=Math.ceil(stop*step),ticks=new Array(n=Math.ceil(start-stop+1));++i<n;)ticks[i]=(start-i)/step;return reverse&&ticks.reverse(),ticks};function tickIncrement(start,stop,count){var step=(stop-start)/Math.max(0,count),power=Math.floor(Math.log(step)/Math.LN10),error=step/Math.pow(10,power);return power>=0?(error>=e10?10:error>=e5?5:error>=e2?2:1)*Math.pow(10,power):-Math.pow(10,-power)/(error>=e10?10:error>=e5?5:error>=e2?2:1)}function tickStep(start,stop,count){var step0=Math.abs(stop-start)/Math.max(0,count),step1=Math.pow(10,Math.floor(Math.log(step0)/Math.LN10)),error=step0/step1;return error>=e10?step1*=10:error>=e5?step1*=5:error>=e2&&(step1*=2),stop<start?-step1:step1}const Milli=[YEAR,MONTH,units_DATE,HOURS,MINUTES,SECONDS,MILLISECONDS],Seconds=Milli.slice(0,-1),Minutes=Seconds.slice(0,-1),Hours=Minutes.slice(0,-1),Day=Hours.slice(0,-1),Month=[YEAR,MONTH],Year=[YEAR],intervals=[[Seconds,1,1e3],[Seconds,5,5e3],[Seconds,15,15e3],[Seconds,30,3e4],[Minutes,1,6e4],[Minutes,5,3e5],[Minutes,15,9e5],[Minutes,30,18e5],[Hours,1,36e5],[Hours,3,108e5],[Hours,6,216e5],[Hours,12,432e5],[Day,1,864e5],[[YEAR,WEEK],1,6048e5],[Month,1,2592e6],[Month,3,7776e6],[Year,1,31536e6]];var vega_time_src_bin=function(opt){const ext=opt.extent,max=opt.maxbins||40,target=Math.abs(Object(vega_util.W)(ext))/max;let units,step,i=bisector(i=>i[2]).right(intervals,target);return i===intervals.length?(units=Year,step=tickStep(ext[0]/31536e6,ext[1]/31536e6,max)):i?(units=(i=intervals[target/intervals[i-1][2]<intervals[i][2]/target?i-1:i])[0],step=i[1]):(units=Milli,step=Math.max(tickStep(ext[0],ext[1],max),1)),{units:units,step:step}};function TimeUnit(params){Transform.call(this,null,params)}const OUTPUT=["unit0","unit1"];TimeUnit.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"string",array:!0},{name:"step",type:"number",default:1},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:OUTPUT}]};var TimeUnit_prototype=Object(vega_util.y)(TimeUnit,Transform);function TupleIndex(params){Transform.call(this,Object(vega_util.s)(),params)}function Values(params){Transform.call(this,null,params)}TimeUnit_prototype.transform=function(_,pulse){var field=_.field,band=!1!==_.interval,utc="utc"===_.timezone,floor=this._floor(_,pulse),offset=(utc?utcInterval:timeInterval)(floor.unit).offset,as=_.as||OUTPUT,u0=as[0],u1=as[1],min=floor.start||1/0,max=floor.stop||-1/0,step=floor.step,flag=pulse.ADD;return(_.modified()||pulse.modified(Object(vega_util.g)(_.field)))&&(flag=(pulse=pulse.reflow(!0)).SOURCE,min=1/0,max=-1/0),pulse.visit(flag,(function(t){var a,b,v=field(t);null==v?(t[u0]=null,band&&(t[u1]=null)):(t[u0]=a=b=floor(v),band&&(t[u1]=b=offset(a,step)),a<min&&(min=a),b>max&&(max=b))})),floor.start=min,floor.stop=max,pulse.modifies(band?as:u0)},TimeUnit_prototype._floor=function(_,pulse){const utc="utc"===_.timezone;let{units:units,step:step}=_.units?{units:_.units,step:_.step||1}:vega_time_src_bin({extent:Object(vega_util.p)(pulse.materialize(pulse.SOURCE).source,_.field),maxbins:_.maxbins});units=units_timeUnits(units);const prev=this.value||{},floor=(utc?utcFloor:timeFloor)(units,step);return floor.unit=Object(vega_util.T)(units),floor.units=units,floor.step=step,floor.start=prev.start,floor.stop=prev.stop,this.value=floor},Object(vega_util.y)(TupleIndex,Transform).transform=function(_,pulse){var df=pulse.dataflow,field=_.field,index=this.value,mod=!0;function set(t){index.set(field(t),t)}return _.modified("field")||pulse.modified(field.fields)?(index.clear(),pulse.visit(pulse.SOURCE,set)):pulse.changed()?(pulse.visit(pulse.REM,(function(t){index.delete(field(t))})),pulse.visit(pulse.ADD,set)):mod=!1,this.modified(mod),index.empty>df.cleanThreshold&&df.runAfter(index.clean),pulse.fork()},Object(vega_util.y)(Values,Transform).transform=function(_,pulse){(!this.value||_.modified("field")||_.modified("sort")||pulse.changed()||_.sort&&pulse.modified(_.sort.fields))&&(this.value=(_.sort?pulse.source.slice().sort(stableCompare(_.sort)):pulse.source).map(_.field))};const WindowOps={row_number:function(){return{next:w=>w.index+1}},rank:function(){let rank;return{init:()=>rank=1,next:w=>{let i=w.index,data=w.data;return i&&w.compare(data[i-1],data[i])?rank=i+1:rank}}},dense_rank:function(){let drank;return{init:()=>drank=1,next:w=>{let i=w.index,d=w.data;return i&&w.compare(d[i-1],d[i])?++drank:drank}}},percent_rank:function(){let rank=WindowOps.rank(),next=rank.next;return{init:rank.init,next:w=>(next(w)-1)/(w.data.length-1)}},cume_dist:function(){let cume;return{init:()=>cume=0,next:w=>{let i=w.index,d=w.data,c=w.compare;if(cume<i){for(;i+1<d.length&&!c(d[i],d[i+1]);)++i;cume=i}return(1+cume)/d.length}}},ntile:function(field,num){(num=+num)>0||Object(vega_util.n)("ntile num must be greater than zero.");let cume=WindowOps.cume_dist(),next=cume.next;return{init:cume.init,next:w=>Math.ceil(num*next(w))}},lag:function(field,offset){return offset=+offset||1,{next:w=>{let i=w.index-offset;return i>=0?field(w.data[i]):null}}},lead:function(field,offset){return offset=+offset||1,{next:w=>{let i=w.index+offset,d=w.data;return i<d.length?field(d[i]):null}}},first_value:function(field){return{next:w=>field(w.data[w.i0])}},last_value:function(field){return{next:w=>field(w.data[w.i1-1])}},nth_value:function(field,nth){return(nth=+nth)>0||Object(vega_util.n)("nth_value nth must be greater than zero."),{next:w=>{let i=w.i0+(nth-1);return i<w.i1?field(w.data[i]):null}}},prev_value:function(field){let prev=null;return{next:w=>{let v=field(w.data[w.index]);return null!=v?prev=v:prev}}},next_value:function(field){let v=null,i=-1;return{next:w=>{let d=w.data;return w.index<=i?v:(i=function find(field,data,index){for(let n=data.length;index<n;++index){if(null!=field(data[index]))return index}return-1}(field,d,w.index))<0?(i=d.length,v=null):v=field(d[i])}}}};var ValidWindowOps=Object.keys(WindowOps);function WindowState(_){let self=this,ops=Object(vega_util.i)(_.ops),fields=Object(vega_util.i)(_.fields),params=Object(vega_util.i)(_.params),as=Object(vega_util.i)(_.as),outputs=self.outputs=[],windows=self.windows=[],inputs={},map={},countOnly=!0,counts=[],measures=[];function visitInputs(f){Object(vega_util.i)(Object(vega_util.g)(f)).forEach(_=>inputs[_]=1)}visitInputs(_.sort),ops.forEach((function(op,i){let field=fields[i],mname=Object(vega_util.h)(field),name=measureName(op,mname,as[i]);if(visitInputs(field),outputs.push(name),Object(vega_util.v)(WindowOps,op))windows.push(function WindowOp(op,field,param,as){let fn=WindowOps[op](field,param);return{init:fn.init||vega_util.jb,update:function(w,t){t[as]=fn.next(w)}}}(op,fields[i],params[i],name));else{if(null==field&&"count"!==op&&Object(vega_util.n)("Null aggregate field specified."),"count"===op)return void counts.push(name);countOnly=!1;let m=map[mname];m||((m=map[mname]=[]).field=field,measures.push(m)),m.push(createMeasure(op,name))}})),(counts.length||measures.length)&&(self.cell=function WindowState_cell(measures,counts,countOnly){measures=measures.map(m=>compileMeasures(m,m.field));let cell={num:0,agg:null,store:!1,count:counts};if(!countOnly)for(var n=measures.length,a=cell.agg=Array(n),i=0;i<n;++i)a[i]=new measures[i](cell);if(cell.store)var store=cell.data=new TupleStore;return cell.add=function(t){if(cell.num+=1,!countOnly){store&&store.add(t);for(let i=0;i<n;++i)a[i].add(a[i].get(t),t)}},cell.rem=function(t){if(cell.num-=1,!countOnly){store&&store.rem(t);for(let i=0;i<n;++i)a[i].rem(a[i].get(t),t)}},cell.set=function(t){let i,n;for(store&&store.values(),i=0,n=counts.length;i<n;++i)t[counts[i]]=cell.num;if(!countOnly)for(i=0,n=a.length;i<n;++i)a[i].set(t)},cell.init=function(){cell.num=0,store&&store.reset();for(let i=0;i<n;++i)a[i].init()},cell}(measures,counts,countOnly)),self.inputs=Object.keys(inputs)}const WindowState_prototype=WindowState.prototype;function Window(params){Transform.call(this,{},params),this._mlen=0,this._mods=[]}WindowState_prototype.init=function(){this.windows.forEach(_=>_.init()),this.cell&&this.cell.init()},WindowState_prototype.update=function(w,t){let j,cell=this.cell,wind=this.windows,data=w.data,m=wind&&wind.length;if(cell){for(j=w.p0;j<w.i0;++j)cell.rem(data[j]);for(j=w.p1;j<w.i1;++j)cell.add(data[j]);cell.set(t)}for(j=0;j<m;++j)wind[j].update(w,t)},Window.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:ValidWindowOps.concat(ValidAggregateOps)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var Window_prototype=Object(vega_util.y)(Window,Transform);function processPartition(list,state,cmp,_){var sort=_.sort,range=sort&&!_.ignorePeers,frame=_.frame||[null,0],data=list.data(cmp),n=data.length,i=0,b=range?bisector(sort):null,w={i0:0,i1:0,p0:0,p1:0,index:0,data:data,compare:sort||Object(vega_util.l)(-1)};for(state.init();i<n;++i)setWindow(w,frame,i,n),range&&adjustRange(w,b),state.update(w,data[i])}function setWindow(w,f,i,n){w.p0=w.i0,w.p1=w.i1,w.i0=null==f[0]?0:Math.max(0,i-Math.abs(f[0])),w.i1=null==f[1]?n:Math.min(n,i+Math.abs(f[1])+1),w.index=i}function adjustRange(w,bisect){var r0=w.i0,r1=w.i1-1,c=w.compare,d=w.data,n=d.length-1;r0>0&&!c(d[r0],d[r0-1])&&(w.i0=bisect.left(d,d[r0])),r1<n&&!c(d[r1],d[r1+1])&&(w.i1=bisect.right(d,d[r1]))}Window_prototype.transform=function(_,pulse){var i,n,self=this,state=self.state,mod=_.modified(),cmp=stableCompare(_.sort);this.stamp=pulse.stamp,state&&!mod||(state=self.state=new WindowState(_));var key=groupkey(_.groupby);function group(t){return self.group(key(t))}for(mod||pulse.modified(state.inputs)?(self.value={},pulse.visit(pulse.SOURCE,(function(t){group(t).add(t)}))):(pulse.visit(pulse.REM,(function(t){group(t).remove(t)})),pulse.visit(pulse.ADD,(function(t){group(t).add(t)}))),i=0,n=self._mlen;i<n;++i)processPartition(self._mods[i],state,cmp,_);return self._mlen=0,self._mods=[],pulse.reflow(mod).modifies(state.outputs)},Window_prototype.group=function(key){var group=this.value[key];return group||((group=this.value[key]=SortedList(tupleid)).stamp=-1),group.stamp<this.stamp&&(group.stamp=this.stamp,this._mods[this._mlen++]=group),group};const Top="top",Left="left",Right="right",Bottom="bottom",TopLeft="top-left",TopRight="top-right",BottomLeft="bottom-left",BottomRight="bottom-right",Start="start",Middle="middle",End="end",constants_X="x",constants_Y="y",Group="group",AxisRole="axis",TitleRole="title",FrameRole="frame",ScopeRole="scope",LegendRole="legend",RowHeader="row-header",RowFooter="row-footer",RowTitle="row-title",ColHeader="column-header",ColFooter="column-footer",ColTitle="column-title",Padding="padding",Symbols="symbol",Fit="fit",FitX="fit-x",FitY="fit-y",Pad="pad",None="none",All="all",Each="each",Flush="flush",Column="column",Row="row";function Bounds(b){this.clear(),b&&this.union(b)}var Bounds_prototype=Bounds.prototype;Bounds_prototype.clone=function(){return new Bounds(this)},Bounds_prototype.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},Bounds_prototype.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},Bounds_prototype.equals=function(b){return this.x1===b.x1&&this.y1===b.y1&&this.x2===b.x2&&this.y2===b.y2},Bounds_prototype.set=function(x1,y1,x2,y2){return x2<x1?(this.x2=x1,this.x1=x2):(this.x1=x1,this.x2=x2),y2<y1?(this.y2=y1,this.y1=y2):(this.y1=y1,this.y2=y2),this},Bounds_prototype.add=function(x,y){return x<this.x1&&(this.x1=x),y<this.y1&&(this.y1=y),x>this.x2&&(this.x2=x),y>this.y2&&(this.y2=y),this},Bounds_prototype.expand=function(d){return this.x1-=d,this.y1-=d,this.x2+=d,this.y2+=d,this},Bounds_prototype.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},Bounds_prototype.translate=function(dx,dy){return this.x1+=dx,this.x2+=dx,this.y1+=dy,this.y2+=dy,this},Bounds_prototype.rotate=function(angle,x,y){const p=this.rotatedPoints(angle,x,y);return this.clear().add(p[0],p[1]).add(p[2],p[3]).add(p[4],p[5]).add(p[6],p[7])},Bounds_prototype.rotatedPoints=function(angle,x,y){var{x1:x1,y1:y1,x2:x2,y2:y2}=this,cos=Math.cos(angle),sin=Math.sin(angle),cx=x-x*cos+y*sin,cy=y-x*sin-y*cos;return[cos*x1-sin*y1+cx,sin*x1+cos*y1+cy,cos*x1-sin*y2+cx,sin*x1+cos*y2+cy,cos*x2-sin*y1+cx,sin*x2+cos*y1+cy,cos*x2-sin*y2+cx,sin*x2+cos*y2+cy]},Bounds_prototype.union=function(b){return b.x1<this.x1&&(this.x1=b.x1),b.y1<this.y1&&(this.y1=b.y1),b.x2>this.x2&&(this.x2=b.x2),b.y2>this.y2&&(this.y2=b.y2),this},Bounds_prototype.intersect=function(b){return b.x1>this.x1&&(this.x1=b.x1),b.y1>this.y1&&(this.y1=b.y1),b.x2<this.x2&&(this.x2=b.x2),b.y2<this.y2&&(this.y2=b.y2),this},Bounds_prototype.encloses=function(b){return b&&this.x1<=b.x1&&this.x2>=b.x2&&this.y1<=b.y1&&this.y2>=b.y2},Bounds_prototype.alignsWith=function(b){return b&&(this.x1==b.x1||this.x2==b.x2||this.y1==b.y1||this.y2==b.y2)},Bounds_prototype.intersects=function(b){return b&&!(this.x2<b.x1||this.x1>b.x2||this.y2<b.y1||this.y1>b.y2)},Bounds_prototype.contains=function(x,y){return!(x<this.x1||x>this.x2||y<this.y1||y>this.y2)},Bounds_prototype.width=function(){return this.x2-this.x1},Bounds_prototype.height=function(){return this.y2-this.y1};var gradient_id=0;const patternPrefix="p_";function isGradient(value){return value&&value.gradient}function gradientRef(g,defs,base){let id=g.id,type=g.gradient,prefix="radial"===type?patternPrefix:"";return id||(id=g.id="gradient_"+gradient_id++,"radial"===type?(g.x1=Gradient_get(g.x1,.5),g.y1=Gradient_get(g.y1,.5),g.r1=Gradient_get(g.r1,0),g.x2=Gradient_get(g.x2,.5),g.y2=Gradient_get(g.y2,.5),g.r2=Gradient_get(g.r2,.5),prefix=patternPrefix):(g.x1=Gradient_get(g.x1,0),g.y1=Gradient_get(g.y1,0),g.x2=Gradient_get(g.x2,1),g.y2=Gradient_get(g.y2,0))),defs[id]=g,"url("+(base||"")+"#"+prefix+id+")"}function Gradient_get(val,def){return null!=val?val:def}var Gradient=function(p0,p1){var gradient,stops=[];return gradient={gradient:"linear",x1:p0?p0[0]:0,y1:p0?p0[1]:0,x2:p1?p1[0]:1,y2:p1?p1[1]:0,stops:stops,stop:function(offset,color){return stops.push({offset:offset,color:color}),gradient}}};function Item(mark){this.mark=mark,this.bounds=this.bounds||new Bounds}function GroupItem(mark){Item.call(this,mark),this.items=this.items||[]}function domCanvas(w,h){if("undefined"!=typeof document&&document.createElement){var c=document.createElement("canvas");if(c&&c.getContext)return c.width=w,c.height=h,c}return null}function domImage(){return"undefined"!=typeof Image?Image:null}Object(vega_util.y)(GroupItem,Item);const loader_protocol_re=/^([A-Za-z]+:)?\/\//,loader_allowed_re=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,loader_whitespace_re=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,loader_fileProtocol="file://";async function loader_load(uri,options){const opt=await this.sanitize(uri,options),url=opt.href;return opt.localFile?this.file(url):this.http(url,options)}async function loader_sanitize(uri,options){options=Object(vega_util.o)({},this.options,options);const fileAccess=this.fileAccess,result={href:null};let isFile,loadFile,base;const isAllowed=loader_allowed_re.test(uri.replace(loader_whitespace_re,""));null!=uri&&"string"==typeof uri&&isAllowed||Object(vega_util.n)("Sanitize failure, invalid URI: "+Object(vega_util.Y)(uri));const hasProtocol=loader_protocol_re.test(uri);return(base=options.baseURL)&&!hasProtocol&&(uri.startsWith("/")||"/"===base[base.length-1]||(uri="/"+uri),uri=base+uri),loadFile=(isFile=uri.startsWith(loader_fileProtocol))||"file"===options.mode||"http"!==options.mode&&!hasProtocol&&fileAccess,isFile?uri=uri.slice(loader_fileProtocol.length):uri.startsWith("//")&&("file"===options.defaultProtocol?(uri=uri.slice(2),loadFile=!0):uri=(options.defaultProtocol||"http")+":"+uri),Object.defineProperty(result,"localFile",{value:!!loadFile}),result.href=uri,options.target&&(result.target=options.target+""),options.rel&&(result.rel=options.rel+""),result}function loader_fileLoader(fs){return fs?function(filename){return new Promise((function(accept,reject){fs.readFile(filename,(function(error,data){error?reject(error):accept(data)}))}))}:loader_fileReject}async function loader_fileReject(){Object(vega_util.n)("No file system access.")}function loader_httpLoader(fetch){return fetch?async function(url,options){const opt=Object(vega_util.o)({},this.options.http,options),type=options&&options.response,response=await fetch(url,opt);return response.ok?Object(vega_util.D)(response[type])?response[type]():response.text():Object(vega_util.n)(response.status+""+response.statusText)}:loader_httpReject}async function loader_httpReject(){Object(vega_util.n)("No HTTP fetch method available.")}var type_typeParsers={boolean:vega_util.Z,integer:vega_util.bb,number:vega_util.bb,date:vega_util.ab,string:vega_util.db,unknown:vega_util.x},type_typeTests=[function type_isBoolean(_){return"true"===_||"false"===_||!0===_||!1===_},function src_type_isInteger(_){return type_isNumber(_)&&Number.isInteger(+_)},type_isNumber,function type_isDate(_){return!Number.isNaN(Date.parse(_))}],type_typeList=["boolean","integer","number","date"];function type_inferType(values,field){if(!values||!values.length)return"unknown";var value,i,j,_,t=0,n=values.length,m=type_typeTests.length,a=type_typeTests.map((function(_,i){return i+1}));for(i=0,n=values.length;i<n;++i)for(value=field?values[i][field]:values[i],j=0;j<m;++j)if(a[j]&&(null!=(_=value)&&_==_)&&!type_typeTests[j](value)&&(a[j]=0,++t===type_typeTests.length))return"string";return t=a.reduce((function(u,v){return 0===u?v:u}),0)-1,type_typeList[t]}function type_inferTypes(data,fields){return fields.reduce((function(types,field){return types[field]=type_inferType(data,field),types}),{})}function type_isNumber(_){return!(Number.isNaN(+_)||_ instanceof Date)}function dsv_delimitedFormat(delimiter){const parse=function(data,format){const delim={delimiter:delimiter};return formats_dsv_dsv(data,format?Object(vega_util.o)(format,delim):delim)};return parse.responseType="text",parse}function formats_dsv_dsv(data,format){return format.header&&(data=format.header.map(vega_util.Y).join(format.delimiter)+"\n"+data),dsv(format.delimiter).parse(data+"")}formats_dsv_dsv.responseType="text";var formats_json=__webpack_require__(120);const formats_topojson_filters={interior:(a,b)=>a!==b,exterior:(a,b)=>a===b};function topojson_topojson(data,format){let method,object,property,filter;return data=Object(formats_json.a)(data,format),format&&format.feature?(method=src_feature,property=format.feature):format&&format.mesh?(method=mesh,property=format.mesh,filter=formats_topojson_filters[format.filter]):Object(vega_util.n)("Missing TopoJSON feature or mesh parameter."),(object=(object=data.objects[property])?method(data,object,filter):Object(vega_util.n)("Invalid TopoJSON object: "+property))&&object.features||[object]}topojson_topojson.responseType="json";const src_formats_format={dsv:formats_dsv_dsv,csv:dsv_delimitedFormat(","),tsv:dsv_delimitedFormat("\t"),json:formats_json.a,topojson:topojson_topojson};function src_formats_formats(name,reader){return arguments.length>1?(src_formats_format[name]=reader,this):Object(vega_util.v)(src_formats_format,name)?src_formats_format[name]:null}function formats_responseType(type){const f=src_formats_formats(type);return f&&f.responseType||"text"}var src_read=function(data,schema,dateParse){const reader=src_formats_formats((schema=schema||{}).type||"json");return reader||Object(vega_util.n)("Unknown data format type: "+schema.type),data=reader(data,schema),schema.parse&&function src_read_parse(data,types,dateParse){if(!data.length)return;dateParse=dateParse||defaultLocale_timeParse;var parsers,datum,field,i,j,n,m,fields=data.columns||Object.keys(data[0]);"auto"===types&&(types=type_inferTypes(data,fields));for(fields=Object.keys(types),parsers=fields.map((function(field){var parts,pattern,type=types[field];if(type&&(0===type.indexOf("date:")||0===type.indexOf("utc:")))return("'"===(pattern=(parts=type.split(/:(.+)?/,2))[1])[0]&&"'"===pattern[pattern.length-1]||'"'===pattern[0]&&'"'===pattern[pattern.length-1])&&(pattern=pattern.slice(1,-1)),"utc"===parts[0]?defaultLocale_utcParse(pattern):dateParse(pattern);if(!type_typeParsers[type])throw Error("Illegal format pattern: "+field+":"+type);return type_typeParsers[type]})),i=0,n=data.length,m=fields.length;i<n;++i)for(datum=data[i],j=0;j<m;++j)field=fields[j],datum[field]=parsers[j](datum[field])}(data,schema.parse,dateParse),Object(vega_util.v)(data,"columns")&&delete data.columns,data};var vega_loader_index_browser_loader=function(fetch,fs){return function(options){return{options:options||{},sanitize:loader_sanitize,load:loader_load,fileAccess:!!fs,file:loader_fileLoader(fs),http:loader_httpLoader(fetch)}}}("undefined"!=typeof fetch&&fetch,null);function ResourceLoader(customLoader){this._pending=0,this._loader=customLoader||vega_loader_index_browser_loader()}var ResourceLoader_prototype=ResourceLoader.prototype;function increment(loader){loader._pending+=1}function decrement(loader){loader._pending-=1}function basis_point(that,x,y){that._context.bezierCurveTo((2*that._x0+that._x1)/3,(2*that._y0+that._y1)/3,(that._x0+2*that._x1)/3,(that._y0+2*that._y1)/3,(that._x0+4*that._x1+x)/6,(that._y0+4*that._y1+y)/6)}function Basis(context){this._context=context}ResourceLoader_prototype.pending=function(){return this._pending},ResourceLoader_prototype.sanitizeURL=function(uri){var loader=this;return increment(loader),loader._loader.sanitize(uri,{context:"href"}).then((function(opt){return decrement(loader),opt})).catch((function(){return decrement(loader),null}))},ResourceLoader_prototype.loadImage=function(uri){var loader=this,Image=domImage();return increment(loader),loader._loader.sanitize(uri,{context:"image"}).then((function(opt){var url=opt.href;if(!url||!Image)throw{url:url};var img=new Image;return img.onload=function(){decrement(loader)},img.onerror=function(){decrement(loader)},img.src=url,img})).catch((function(e){return decrement(loader),{complete:!1,width:0,height:0,src:e&&e.url||""}}))},ResourceLoader_prototype.ready=function(){var loader=this;return new Promise((function(accept){!function poll(value){loader.pending()?setTimeout((function(){poll(!0)}),10):accept(value)}(!1)}))},Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:basis_point(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:basis_point(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y}};var noop=function(){};function BasisClosed(context){this._context=context}BasisClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._x2=x,this._y2=y;break;case 1:this._point=2,this._x3=x,this._y3=y;break;case 2:this._point=3,this._x4=x,this._y4=y,this._context.moveTo((this._x0+4*this._x1+x)/6,(this._y0+4*this._y1+y)/6);break;default:basis_point(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y}};function BasisOpen(context){this._context=context}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var x0=(this._x0+4*this._x1+x)/6,y0=(this._y0+4*this._y1+y)/6;this._line?this._context.lineTo(x0,y0):this._context.moveTo(x0,y0);break;case 3:this._point=4;default:basis_point(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y}};function Bundle(context,beta){this._basis=new Basis(context),this._beta=beta}Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var x=this._x,y=this._y,j=x.length-1;if(j>0)for(var t,x0=x[0],y0=y[0],dx=x[j]-x0,dy=y[j]-y0,i=-1;++i<=j;)t=i/j,this._basis.point(this._beta*x[i]+(1-this._beta)*(x0+t*dx),this._beta*y[i]+(1-this._beta)*(y0+t*dy));this._x=this._y=null,this._basis.lineEnd()},point:function(x,y){this._x.push(+x),this._y.push(+y)}};var curve_bundle=function custom(beta){function bundle(context){return 1===beta?new Basis(context):new Bundle(context,beta)}return bundle.beta=function(beta){return custom(+beta)},bundle}(.85);function cardinal_point(that,x,y){that._context.bezierCurveTo(that._x1+that._k*(that._x2-that._x0),that._y1+that._k*(that._y2-that._y0),that._x2+that._k*(that._x1-x),that._y2+that._k*(that._y1-y),that._x2,that._y2)}function Cardinal(context,tension){this._context=context,this._k=(1-tension)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:cardinal_point(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2,this._x1=x,this._y1=y;break;case 2:this._point=3;default:cardinal_point(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var cardinal=function custom(tension){function cardinal(context){return new Cardinal(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal}(0);function CardinalOpen(context,tension){this._context=context,this._k=(1-tension)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:cardinal_point(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var cardinalOpen=function custom(tension){function cardinal(context){return new CardinalOpen(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal}(0);function CardinalClosed(context,tension){this._context=context,this._k=(1-tension)/6}CardinalClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._x3=x,this._y3=y;break;case 1:this._point=2,this._context.moveTo(this._x4=x,this._y4=y);break;case 2:this._point=3,this._x5=x,this._y5=y;break;default:cardinal_point(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var cardinalClosed=function custom(tension){function cardinal(context){return new CardinalClosed(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal}(0),abs=Math.abs,atan2=Math.atan2,math_cos=Math.cos,math_max=Math.max,math_min=Math.min,math_sin=Math.sin,sqrt=Math.sqrt,math_epsilon=1e-12,pi=Math.PI,halfPi=pi/2,tau=2*pi;function asin(x){return x>=1?halfPi:x<=-1?-halfPi:Math.asin(x)}function catmullRom_point(that,x,y){var x1=that._x1,y1=that._y1,x2=that._x2,y2=that._y2;if(that._l01_a>math_epsilon){var a=2*that._l01_2a+3*that._l01_a*that._l12_a+that._l12_2a,n=3*that._l01_a*(that._l01_a+that._l12_a);x1=(x1*a-that._x0*that._l12_2a+that._x2*that._l01_2a)/n,y1=(y1*a-that._y0*that._l12_2a+that._y2*that._l01_2a)/n}if(that._l23_a>math_epsilon){var b=2*that._l23_2a+3*that._l23_a*that._l12_a+that._l12_2a,m=3*that._l23_a*(that._l23_a+that._l12_a);x2=(x2*b+that._x1*that._l23_2a-x*that._l12_2a)/m,y2=(y2*b+that._y1*that._l23_2a-y*that._l12_2a)/m}that._context.bezierCurveTo(x1,y1,x2,y2,that._x2,that._y2)}function CatmullRom(context,alpha){this._context=context,this._alpha=alpha}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3;default:catmullRom_point(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var curve_catmullRom=function custom(alpha){function catmullRom(context){return alpha?new CatmullRom(context,alpha):new Cardinal(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom}(.5);function CatmullRomClosed(context,alpha){this._context=context,this._alpha=alpha}CatmullRomClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=x,this._y3=y;break;case 1:this._point=2,this._context.moveTo(this._x4=x,this._y4=y);break;case 2:this._point=3,this._x5=x,this._y5=y;break;default:catmullRom_point(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var catmullRomClosed=function custom(alpha){function catmullRom(context){return alpha?new CatmullRomClosed(context,alpha):new CardinalClosed(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom}(.5);function CatmullRomOpen(context,alpha){this._context=context,this._alpha=alpha}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:catmullRom_point(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var catmullRomOpen=function custom(alpha){function catmullRom(context){return alpha?new CatmullRomOpen(context,alpha):new CardinalOpen(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom}(.5);function Linear(context){this._context=context}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;default:this._context.lineTo(x,y)}}};var curve_linear=function(context){return new Linear(context)};function LinearClosed(context){this._context=context}LinearClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(x,y){x=+x,y=+y,this._point?this._context.lineTo(x,y):(this._point=1,this._context.moveTo(x,y))}};function monotone_sign(x){return x<0?-1:1}function slope3(that,x2,y2){var h0=that._x1-that._x0,h1=x2-that._x1,s0=(that._y1-that._y0)/(h0||h1<0&&-0),s1=(y2-that._y1)/(h1||h0<0&&-0),p=(s0*h1+s1*h0)/(h0+h1);return(monotone_sign(s0)+monotone_sign(s1))*Math.min(Math.abs(s0),Math.abs(s1),.5*Math.abs(p))||0}function slope2(that,t){var h=that._x1-that._x0;return h?(3*(that._y1-that._y0)/h-t)/2:t}function monotone_point(that,t0,t1){var x0=that._x0,y0=that._y0,x1=that._x1,y1=that._y1,dx=(x1-x0)/3;that._context.bezierCurveTo(x0+dx,y0+dx*t0,x1-dx,y1-dx*t1,x1,y1)}function MonotoneX(context){this._context=context}function MonotoneY(context){this._context=new ReflectContext(context)}function ReflectContext(context){this._context=context}function Natural(context){this._context=context}function controlPoints(x){var i,m,n=x.length-1,a=new Array(n),b=new Array(n),r=new Array(n);for(a[0]=0,b[0]=2,r[0]=x[0]+2*x[1],i=1;i<n-1;++i)a[i]=1,b[i]=4,r[i]=4*x[i]+2*x[i+1];for(a[n-1]=2,b[n-1]=7,r[n-1]=8*x[n-1]+x[n],i=1;i<n;++i)m=a[i]/b[i-1],b[i]-=m,r[i]-=m*r[i-1];for(a[n-1]=r[n-1]/b[n-1],i=n-2;i>=0;--i)a[i]=(r[i]-a[i+1])/b[i];for(b[n-1]=(x[n]+a[n-1])/2,i=0;i<n-1;++i)b[i]=2*x[i+1]-a[i+1];return[a,b]}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:monotone_point(this,this._t0,slope2(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){var t1=NaN;if(y=+y,(x=+x)!==this._x1||y!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3,monotone_point(this,slope2(this,t1=slope3(this,x,y)),t1);break;default:monotone_point(this,this._t0,t1=slope3(this,x,y))}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y,this._t0=t1}}},(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(x,y){MonotoneX.prototype.point.call(this,y,x)},ReflectContext.prototype={moveTo:function(x,y){this._context.moveTo(y,x)},closePath:function(){this._context.closePath()},lineTo:function(x,y){this._context.lineTo(y,x)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._context.bezierCurveTo(y1,x1,y2,x2,y,x)}},Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var x=this._x,y=this._y,n=x.length;if(n)if(this._line?this._context.lineTo(x[0],y[0]):this._context.moveTo(x[0],y[0]),2===n)this._context.lineTo(x[1],y[1]);else for(var px=controlPoints(x),py=controlPoints(y),i0=0,i1=1;i1<n;++i0,++i1)this._context.bezierCurveTo(px[0][i0],py[0][i0],px[1][i0],py[1][i0],x[i1],y[i1]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(x,y){this._x.push(+x),this._y.push(+y)}};function Step(context,t){this._context=context,this._t=t}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,y),this._context.lineTo(x,y);else{var x1=this._x*(1-this._t)+x*this._t;this._context.lineTo(x1,this._y),this._context.lineTo(x1,y)}}this._x=x,this._y=y}};var curves_lookup={basis:{curve:function(context){return new Basis(context)}},"basis-closed":{curve:function(context){return new BasisClosed(context)}},"basis-open":{curve:function(context){return new BasisOpen(context)}},bundle:{curve:curve_bundle,tension:"beta",value:.85},cardinal:{curve:cardinal,tension:"tension",value:0},"cardinal-open":{curve:cardinalOpen,tension:"tension",value:0},"cardinal-closed":{curve:cardinalClosed,tension:"tension",value:0},"catmull-rom":{curve:curve_catmullRom,tension:"alpha",value:.5},"catmull-rom-closed":{curve:catmullRomClosed,tension:"alpha",value:.5},"catmull-rom-open":{curve:catmullRomOpen,tension:"alpha",value:.5},linear:{curve:curve_linear},"linear-closed":{curve:function(context){return new LinearClosed(context)}},monotone:{horizontal:function monotoneY(context){return new MonotoneY(context)},vertical:function monotoneX(context){return new MonotoneX(context)}},natural:{curve:function(context){return new Natural(context)}},step:{curve:function(context){return new Step(context,.5)}},"step-after":{curve:function stepAfter(context){return new Step(context,1)}},"step-before":{curve:function stepBefore(context){return new Step(context,0)}}};function curves(type,orientation,tension){var entry=Object(vega_util.v)(curves_lookup,type)&&curves_lookup[type],curve=null;return entry&&(curve=entry.curve||entry[orientation||"vertical"],entry.tension&&null!=tension&&(curve=curve[entry.tension](tension))),curve}var cmdlen={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},regexp=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],path_parse=function(pathstr){var path,curr,chunks,parsed,param,cmd,len,i,j,n,m,result=[];for(i=0,n=(path=pathstr.slice().replace(regexp[0],"###$1").split(regexp[1]).slice(1)).length;i<n;++i){for(chunks=(curr=path[i]).slice(1).trim().replace(regexp[2],"$1###$2").split(regexp[3]),parsed=[cmd=curr.charAt(0)],j=0,m=chunks.length;j<m;++j)(param=+chunks[j])===param&&parsed.push(param);if(len=cmdlen[cmd.toLowerCase()],parsed.length-1>len)for(j=1,m=parsed.length;j<m;j+=len)result.push([cmd].concat(parsed.slice(j,j+len)));else result.push(parsed)}return result},DegToRad=Math.PI/180,HalfPi=Math.PI/2,Tau=2*Math.PI,HalfSqrt3=Math.sqrt(3)/2,segmentCache={},bezierCache={},join=[].join;function bezier(params){var key=join.call(params);if(bezierCache[key])return bezierCache[key];var cx=params[0],cy=params[1],th0=params[2],th1=params[3],rx=params[4],ry=params[5],sin_th=params[6],cos_th=params[7],a00=cos_th*rx,a01=-sin_th*ry,a10=sin_th*rx,a11=cos_th*ry,cos_th0=Math.cos(th0),sin_th0=Math.sin(th0),cos_th1=Math.cos(th1),sin_th1=Math.sin(th1),th_half=.5*(th1-th0),sin_th_h2=Math.sin(.5*th_half),t=8/3*sin_th_h2*sin_th_h2/Math.sin(th_half),x1=cx+cos_th0-t*sin_th0,y1=cy+sin_th0+t*cos_th0,x3=cx+cos_th1,y3=cy+sin_th1,x2=x3+t*sin_th1,y2=y3-t*cos_th1;return bezierCache[key]=[a00*x1+a01*y1,a10*x1+a11*y1,a00*x2+a01*y2,a10*x2+a11*y2,a00*x3+a01*y3,a10*x3+a11*y3]}var render_temp=["l",0,0,0,0,0,0,0];function render_scale(current,sX,sY){var c=render_temp[0]=current[0];if("a"===c||"A"===c)render_temp[1]=sX*current[1],render_temp[2]=sY*current[2],render_temp[3]=current[3],render_temp[4]=current[4],render_temp[5]=current[5],render_temp[6]=sX*current[6],render_temp[7]=sY*current[7];else if("h"===c||"H"===c)render_temp[1]=sX*current[1];else if("v"===c||"V"===c)render_temp[1]=sY*current[1];else for(var i=1,n=current.length;i<n;++i)render_temp[i]=(i%2==1?sX:sY)*current[i];return render_temp}var path_render=function(context,path,l,t,sX,sY){var current,tempX,tempY,tempControlX,tempControlY,previous=null,x=0,y=0,controlX=0,controlY=0;null==l&&(l=0),null==t&&(t=0),null==sX&&(sX=1),null==sY&&(sY=sX),context.beginPath&&context.beginPath();for(var i=0,len=path.length;i<len;++i){switch(current=path[i],1===sX&&1===sY||(current=render_scale(current,sX,sY)),current[0]){case"l":x+=current[1],y+=current[2],context.lineTo(x+l,y+t);break;case"L":x=current[1],y=current[2],context.lineTo(x+l,y+t);break;case"h":x+=current[1],context.lineTo(x+l,y+t);break;case"H":x=current[1],context.lineTo(x+l,y+t);break;case"v":y+=current[1],context.lineTo(x+l,y+t);break;case"V":y=current[1],context.lineTo(x+l,y+t);break;case"m":x+=current[1],y+=current[2],context.moveTo(x+l,y+t);break;case"M":x=current[1],y=current[2],context.moveTo(x+l,y+t);break;case"c":tempX=x+current[5],tempY=y+current[6],controlX=x+current[3],controlY=y+current[4],context.bezierCurveTo(x+current[1]+l,y+current[2]+t,controlX+l,controlY+t,tempX+l,tempY+t),x=tempX,y=tempY;break;case"C":x=current[5],y=current[6],controlX=current[3],controlY=current[4],context.bezierCurveTo(current[1]+l,current[2]+t,controlX+l,controlY+t,x+l,y+t);break;case"s":tempX=x+current[3],tempY=y+current[4],controlX=2*x-controlX,controlY=2*y-controlY,context.bezierCurveTo(controlX+l,controlY+t,x+current[1]+l,y+current[2]+t,tempX+l,tempY+t),controlX=x+current[1],controlY=y+current[2],x=tempX,y=tempY;break;case"S":tempX=current[3],tempY=current[4],controlX=2*x-controlX,controlY=2*y-controlY,context.bezierCurveTo(controlX+l,controlY+t,current[1]+l,current[2]+t,tempX+l,tempY+t),x=tempX,y=tempY,controlX=current[1],controlY=current[2];break;case"q":tempX=x+current[3],tempY=y+current[4],controlX=x+current[1],controlY=y+current[2],context.quadraticCurveTo(controlX+l,controlY+t,tempX+l,tempY+t),x=tempX,y=tempY;break;case"Q":tempX=current[3],tempY=current[4],context.quadraticCurveTo(current[1]+l,current[2]+t,tempX+l,tempY+t),x=tempX,y=tempY,controlX=current[1],controlY=current[2];break;case"t":tempX=x+current[1],tempY=y+current[2],null===previous[0].match(/[QqTt]/)?(controlX=x,controlY=y):"t"===previous[0]?(controlX=2*x-tempControlX,controlY=2*y-tempControlY):"q"===previous[0]&&(controlX=2*x-controlX,controlY=2*y-controlY),tempControlX=controlX,tempControlY=controlY,context.quadraticCurveTo(controlX+l,controlY+t,tempX+l,tempY+t),y=tempY,controlX=(x=tempX)+current[1],controlY=y+current[2];break;case"T":tempX=current[1],tempY=current[2],controlX=2*x-controlX,controlY=2*y-controlY,context.quadraticCurveTo(controlX+l,controlY+t,tempX+l,tempY+t),x=tempX,y=tempY;break;case"a":drawArc(context,x+l,y+t,[current[1],current[2],current[3],current[4],current[5],current[6]+x+l,current[7]+y+t]),x+=current[6],y+=current[7];break;case"A":drawArc(context,x+l,y+t,[current[1],current[2],current[3],current[4],current[5],current[6]+l,current[7]+t]),x=current[6],y=current[7];break;case"z":case"Z":context.closePath()}previous=current}};function drawArc(context,x,y,coords){for(var seg=function arc_segments(x,y,rx,ry,large,sweep,rotateX,ox,oy){var key=join.call(arguments);if(segmentCache[key])return segmentCache[key];var th=rotateX*DegToRad,sin_th=Math.sin(th),cos_th=Math.cos(th),px=cos_th*(ox-x)*.5+sin_th*(oy-y)*.5,py=cos_th*(oy-y)*.5-sin_th*(ox-x)*.5,pl=px*px/((rx=Math.abs(rx))*rx)+py*py/((ry=Math.abs(ry))*ry);pl>1&&(rx*=pl=Math.sqrt(pl),ry*=pl);var a00=cos_th/rx,a01=sin_th/rx,a10=-sin_th/ry,a11=cos_th/ry,x0=a00*ox+a01*oy,y0=a10*ox+a11*oy,x1=a00*x+a01*y,y1=a10*x+a11*y,sfactor_sq=1/((x1-x0)*(x1-x0)+(y1-y0)*(y1-y0))-.25;sfactor_sq<0&&(sfactor_sq=0);var sfactor=Math.sqrt(sfactor_sq);sweep==large&&(sfactor=-sfactor);var xc=.5*(x0+x1)-sfactor*(y1-y0),yc=.5*(y0+y1)+sfactor*(x1-x0),th0=Math.atan2(y0-yc,x0-xc),th_arc=Math.atan2(y1-yc,x1-xc)-th0;th_arc<0&&1===sweep?th_arc+=Tau:th_arc>0&&0===sweep&&(th_arc-=Tau);for(var segs=Math.ceil(Math.abs(th_arc/(HalfPi+.001))),result=[],i=0;i<segs;++i){var th2=th0+i*th_arc/segs,th3=th0+(i+1)*th_arc/segs;result[i]=[xc,yc,th2,th3,rx,ry,sin_th,cos_th]}return segmentCache[key]=result}(coords[5],coords[6],coords[0],coords[1],coords[3],coords[4],coords[2],x,y),i=0;i<seg.length;++i){var bez=bezier(seg[i]);context.bezierCurveTo(bez[0],bez[1],bez[2],bez[3],bez[4],bez[5])}}var builtins={circle:{draw:function(context,size){var r=Math.sqrt(size)/2;context.moveTo(r,0),context.arc(0,0,r,0,Tau)}},cross:{draw:function(context,size){var r=Math.sqrt(size)/2,s=r/2.5;context.moveTo(-r,-s),context.lineTo(-r,s),context.lineTo(-s,s),context.lineTo(-s,r),context.lineTo(s,r),context.lineTo(s,s),context.lineTo(r,s),context.lineTo(r,-s),context.lineTo(s,-s),context.lineTo(s,-r),context.lineTo(-s,-r),context.lineTo(-s,-s),context.closePath()}},diamond:{draw:function(context,size){var r=Math.sqrt(size)/2;context.moveTo(-r,0),context.lineTo(0,-r),context.lineTo(r,0),context.lineTo(0,r),context.closePath()}},square:{draw:function(context,size){var w=Math.sqrt(size),x=-w/2;context.rect(x,x,w,w)}},arrow:{draw:function(context,size){var r=Math.sqrt(size)/2,s=r/7,t=r/2.5,v=r/8;context.moveTo(-s,r),context.lineTo(s,r),context.lineTo(s,-v),context.lineTo(t,-v),context.lineTo(0,-r),context.lineTo(-t,-v),context.lineTo(-s,-v),context.closePath()}},wedge:{draw:function(context,size){var r=Math.sqrt(size)/2,h=HalfSqrt3*r,o=h-.5773502691896257*r,b=r/4;context.moveTo(0,-h-o),context.lineTo(-b,h-o),context.lineTo(b,h-o),context.closePath()}},triangle:{draw:function(context,size){var r=Math.sqrt(size)/2,h=HalfSqrt3*r,o=h-.5773502691896257*r;context.moveTo(0,-h-o),context.lineTo(-r,h-o),context.lineTo(r,h-o),context.closePath()}},"triangle-up":{draw:function(context,size){var r=Math.sqrt(size)/2,h=HalfSqrt3*r;context.moveTo(0,-h),context.lineTo(-r,h),context.lineTo(r,h),context.closePath()}},"triangle-down":{draw:function(context,size){var r=Math.sqrt(size)/2,h=HalfSqrt3*r;context.moveTo(0,h),context.lineTo(-r,-h),context.lineTo(r,-h),context.closePath()}},"triangle-right":{draw:function(context,size){var r=Math.sqrt(size)/2,h=HalfSqrt3*r;context.moveTo(h,0),context.lineTo(-h,-r),context.lineTo(-h,r),context.closePath()}},"triangle-left":{draw:function(context,size){var r=Math.sqrt(size)/2,h=HalfSqrt3*r;context.moveTo(-h,0),context.lineTo(h,-r),context.lineTo(h,r),context.closePath()}},stroke:{draw:function(context,size){var r=Math.sqrt(size)/2;context.moveTo(-r,0),context.lineTo(r,0)}}};function symbols_symbols(_){return Object(vega_util.v)(builtins,_)?builtins[_]:function customSymbol(path){if(!Object(vega_util.v)(symbols_custom,path)){var parsed=path_parse(path);symbols_custom[path]={draw:function(context,size){path_render(context,parsed,0,0,Math.sqrt(size)/2)}}}return symbols_custom[path]}(_)}var symbols_custom={};var path_pi=Math.PI,path_tau=2*path_pi,tauEpsilon=path_tau-1e-6;function Path(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path_path(){return new Path}Path.prototype=path_path.prototype={constructor:Path,moveTo:function(x,y){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(x,y){this._+="L"+(this._x1=+x)+","+(this._y1=+y)},quadraticCurveTo:function(x1,y1,x,y){this._+="Q"+ +x1+","+ +y1+","+(this._x1=+x)+","+(this._y1=+y)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._+="C"+ +x1+","+ +y1+","+ +x2+","+ +y2+","+(this._x1=+x)+","+(this._y1=+y)},arcTo:function(x1,y1,x2,y2,r){x1=+x1,y1=+y1,x2=+x2,y2=+y2,r=+r;var x0=this._x1,y0=this._y1,x21=x2-x1,y21=y2-y1,x01=x0-x1,y01=y0-y1,l01_2=x01*x01+y01*y01;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=x1)+","+(this._y1=y1);else if(l01_2>1e-6)if(Math.abs(y01*x21-y21*x01)>1e-6&&r){var x20=x2-x0,y20=y2-y0,l21_2=x21*x21+y21*y21,l20_2=x20*x20+y20*y20,l21=Math.sqrt(l21_2),l01=Math.sqrt(l01_2),l=r*Math.tan((path_pi-Math.acos((l21_2+l01_2-l20_2)/(2*l21*l01)))/2),t01=l/l01,t21=l/l21;Math.abs(t01-1)>1e-6&&(this._+="L"+(x1+t01*x01)+","+(y1+t01*y01)),this._+="A"+r+","+r+",0,0,"+ +(y01*x20>x01*y20)+","+(this._x1=x1+t21*x21)+","+(this._y1=y1+t21*y21)}else this._+="L"+(this._x1=x1)+","+(this._y1=y1);else;},arc:function(x,y,r,a0,a1,ccw){x=+x,y=+y,ccw=!!ccw;var dx=(r=+r)*Math.cos(a0),dy=r*Math.sin(a0),x0=x+dx,y0=y+dy,cw=1^ccw,da=ccw?a0-a1:a1-a0;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+x0+","+y0:(Math.abs(this._x1-x0)>1e-6||Math.abs(this._y1-y0)>1e-6)&&(this._+="L"+x0+","+y0),r&&(da<0&&(da=da%path_tau+path_tau),da>tauEpsilon?this._+="A"+r+","+r+",0,1,"+cw+","+(x-dx)+","+(y-dy)+"A"+r+","+r+",0,1,"+cw+","+(this._x1=x0)+","+(this._y1=y0):da>1e-6&&(this._+="A"+r+","+r+",0,"+ +(da>=path_pi)+","+cw+","+(this._x1=x+r*Math.cos(a1))+","+(this._y1=y+r*Math.sin(a1))))},rect:function(x,y,w,h){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)+"h"+ +w+"v"+ +h+"h"+-w+"Z"},toString:function(){return this._}};var src_path=path_path;const C=.448084975506;function rectangleX(d){return d.x}function rectangleY(d){return d.y}function rectangleWidth(d){return d.width}function rectangleHeight(d){return d.height}function rectangle_number(_){return"function"==typeof _?_:()=>+_}function rectangle_clamp(value,min,max){return Math.max(min,Math.min(value,max))}var path_rectangle=function(){var x=rectangleX,y=rectangleY,width=rectangleWidth,height=rectangleHeight,crTL=rectangle_number(0),crTR=crTL,crBL=crTL,crBR=crTL,context=null;function rectangle(_,x0,y0){var buffer,x1=null!=x0?x0:+x.call(this,_),y1=null!=y0?y0:+y.call(this,_),w=+width.call(this,_),h=+height.call(this,_),s=Math.min(w,h)/2,tl=rectangle_clamp(+crTL.call(this,_),0,s),tr=rectangle_clamp(+crTR.call(this,_),0,s),bl=rectangle_clamp(+crBL.call(this,_),0,s),br=rectangle_clamp(+crBR.call(this,_),0,s);if(context||(context=buffer=src_path()),tl<=0&&tr<=0&&bl<=0&&br<=0)context.rect(x1,y1,w,h);else{var x2=x1+w,y2=y1+h;context.moveTo(x1+tl,y1),context.lineTo(x2-tr,y1),context.bezierCurveTo(x2-C*tr,y1,x2,y1+C*tr,x2,y1+tr),context.lineTo(x2,y2-br),context.bezierCurveTo(x2,y2-C*br,x2-C*br,y2,x2-br,y2),context.lineTo(x1+bl,y2),context.bezierCurveTo(x1+C*bl,y2,x1,y2-C*bl,x1,y2-bl),context.lineTo(x1,y1+tl),context.bezierCurveTo(x1,y1+C*tl,x1+C*tl,y1,x1+tl,y1),context.closePath()}if(buffer)return context=null,buffer+""||null}return rectangle.x=function(_){return arguments.length?(x=rectangle_number(_),rectangle):x},rectangle.y=function(_){return arguments.length?(y=rectangle_number(_),rectangle):y},rectangle.width=function(_){return arguments.length?(width=rectangle_number(_),rectangle):width},rectangle.height=function(_){return arguments.length?(height=rectangle_number(_),rectangle):height},rectangle.cornerRadius=function(tl,tr,br,bl){return arguments.length?(crTL=rectangle_number(tl),crTR=null!=tr?rectangle_number(tr):crTL,crBR=null!=br?rectangle_number(br):crTL,crBL=null!=bl?rectangle_number(bl):crTR,rectangle):crTL},rectangle.context=function(_){return arguments.length?(context=null==_?null:_,rectangle):context},rectangle},path_trail=function(){var x,y,size,defined,ready,x1,y1,r1,context=null;function point(x2,y2,w2){var r2=w2/2;if(ready){var ux=y1-y2,uy=x2-x1;if(ux||uy){var ud=Math.sqrt(ux*ux+uy*uy),rx=(ux/=ud)*r1,ry=(uy/=ud)*r1,t=Math.atan2(uy,ux);context.moveTo(x1-rx,y1-ry),context.lineTo(x2-ux*r2,y2-uy*r2),context.arc(x2,y2,r2,t-Math.PI,t),context.lineTo(x1+rx,y1+ry),context.arc(x1,y1,r1,t,t+Math.PI)}else context.arc(x2,y2,r2,0,Tau);context.closePath()}else ready=1;x1=x2,y1=y2,r1=r2}function trail(data){var i,d,buffer,n=data.length,defined0=!1;for(null==context&&(context=buffer=src_path()),i=0;i<=n;++i)!(i<n&&defined(d=data[i],i,data))===defined0&&(defined0=!defined0)&&(ready=0),defined0&&point(+x(d,i,data),+y(d,i,data),+size(d,i,data));if(buffer)return context=null,buffer+""||null}return trail.x=function(_){return arguments.length?(x=_,trail):x},trail.y=function(_){return arguments.length?(y=_,trail):y},trail.size=function(_){return arguments.length?(size=_,trail):size},trail.defined=function(_){return arguments.length?(defined=_,trail):defined},trail.context=function(_){return arguments.length?(context=null==_?null:_,trail):context},trail},src_path_pi=Math.PI,src_path_tau=2*src_path_pi,path_tauEpsilon=src_path_tau-1e-6;function path_Path(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function src_path_path(){return new path_Path}path_Path.prototype=src_path_path.prototype={constructor:path_Path,moveTo:function(x,y){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(x,y){this._+="L"+(this._x1=+x)+","+(this._y1=+y)},quadraticCurveTo:function(x1,y1,x,y){this._+="Q"+ +x1+","+ +y1+","+(this._x1=+x)+","+(this._y1=+y)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._+="C"+ +x1+","+ +y1+","+ +x2+","+ +y2+","+(this._x1=+x)+","+(this._y1=+y)},arcTo:function(x1,y1,x2,y2,r){x1=+x1,y1=+y1,x2=+x2,y2=+y2,r=+r;var x0=this._x1,y0=this._y1,x21=x2-x1,y21=y2-y1,x01=x0-x1,y01=y0-y1,l01_2=x01*x01+y01*y01;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=x1)+","+(this._y1=y1);else if(l01_2>1e-6)if(Math.abs(y01*x21-y21*x01)>1e-6&&r){var x20=x2-x0,y20=y2-y0,l21_2=x21*x21+y21*y21,l20_2=x20*x20+y20*y20,l21=Math.sqrt(l21_2),l01=Math.sqrt(l01_2),l=r*Math.tan((src_path_pi-Math.acos((l21_2+l01_2-l20_2)/(2*l21*l01)))/2),t01=l/l01,t21=l/l21;Math.abs(t01-1)>1e-6&&(this._+="L"+(x1+t01*x01)+","+(y1+t01*y01)),this._+="A"+r+","+r+",0,0,"+ +(y01*x20>x01*y20)+","+(this._x1=x1+t21*x21)+","+(this._y1=y1+t21*y21)}else this._+="L"+(this._x1=x1)+","+(this._y1=y1);else;},arc:function(x,y,r,a0,a1,ccw){x=+x,y=+y,ccw=!!ccw;var dx=(r=+r)*Math.cos(a0),dy=r*Math.sin(a0),x0=x+dx,y0=y+dy,cw=1^ccw,da=ccw?a0-a1:a1-a0;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+x0+","+y0:(Math.abs(this._x1-x0)>1e-6||Math.abs(this._y1-y0)>1e-6)&&(this._+="L"+x0+","+y0),r&&(da<0&&(da=da%src_path_tau+src_path_tau),da>path_tauEpsilon?this._+="A"+r+","+r+",0,1,"+cw+","+(x-dx)+","+(y-dy)+"A"+r+","+r+",0,1,"+cw+","+(this._x1=x0)+","+(this._y1=y0):da>1e-6&&(this._+="A"+r+","+r+",0,"+ +(da>=src_path_pi)+","+cw+","+(this._x1=x+r*Math.cos(a1))+","+(this._y1=y+r*Math.sin(a1))))},rect:function(x,y,w,h){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)+"h"+ +w+"v"+ +h+"h"+-w+"Z"},toString:function(){return this._}};var d3_path_src_path=src_path_path,src_constant=function(x){return function constant(){return x}};function arcInnerRadius(d){return d.innerRadius}function arcOuterRadius(d){return d.outerRadius}function arcStartAngle(d){return d.startAngle}function arcEndAngle(d){return d.endAngle}function arcPadAngle(d){return d&&d.padAngle}function cornerTangents(x0,y0,x1,y1,r1,rc,cw){var x01=x0-x1,y01=y0-y1,lo=(cw?rc:-rc)/sqrt(x01*x01+y01*y01),ox=lo*y01,oy=-lo*x01,x11=x0+ox,y11=y0+oy,x10=x1+ox,y10=y1+oy,x00=(x11+x10)/2,y00=(y11+y10)/2,dx=x10-x11,dy=y10-y11,d2=dx*dx+dy*dy,r=r1-rc,D=x11*y10-x10*y11,d=(dy<0?-1:1)*sqrt(math_max(0,r*r*d2-D*D)),cx0=(D*dy-dx*d)/d2,cy0=(-D*dx-dy*d)/d2,cx1=(D*dy+dx*d)/d2,cy1=(-D*dx+dy*d)/d2,dx0=cx0-x00,dy0=cy0-y00,dx1=cx1-x00,dy1=cy1-y00;return dx0*dx0+dy0*dy0>dx1*dx1+dy1*dy1&&(cx0=cx1,cy0=cy1),{cx:cx0,cy:cy0,x01:-ox,y01:-oy,x11:cx0*(r1/r-1),y11:cy0*(r1/r-1)}}function point_x(p){return p[0]}function point_y(p){return p[1]}var src_line=function(){var x=point_x,y=point_y,defined=src_constant(!0),context=null,curve=curve_linear,output=null;function line(data){var i,d,buffer,n=data.length,defined0=!1;for(null==context&&(output=curve(buffer=d3_path_src_path())),i=0;i<=n;++i)!(i<n&&defined(d=data[i],i,data))===defined0&&((defined0=!defined0)?output.lineStart():output.lineEnd()),defined0&&output.point(+x(d,i,data),+y(d,i,data));if(buffer)return output=null,buffer+""||null}return line.x=function(_){return arguments.length?(x="function"==typeof _?_:src_constant(+_),line):x},line.y=function(_){return arguments.length?(y="function"==typeof _?_:src_constant(+_),line):y},line.defined=function(_){return arguments.length?(defined="function"==typeof _?_:src_constant(!!_),line):defined},line.curve=function(_){return arguments.length?(curve=_,null!=context&&(output=curve(context)),line):curve},line.context=function(_){return arguments.length?(null==_?context=output=null:output=curve(context=_),line):context},line},src_area=function(){var x0=point_x,x1=null,y0=src_constant(0),y1=point_y,defined=src_constant(!0),context=null,curve=curve_linear,output=null;function area(data){var i,j,k,d,buffer,n=data.length,defined0=!1,x0z=new Array(n),y0z=new Array(n);for(null==context&&(output=curve(buffer=d3_path_src_path())),i=0;i<=n;++i){if(!(i<n&&defined(d=data[i],i,data))===defined0)if(defined0=!defined0)j=i,output.areaStart(),output.lineStart();else{for(output.lineEnd(),output.lineStart(),k=i-1;k>=j;--k)output.point(x0z[k],y0z[k]);output.lineEnd(),output.areaEnd()}defined0&&(x0z[i]=+x0(d,i,data),y0z[i]=+y0(d,i,data),output.point(x1?+x1(d,i,data):x0z[i],y1?+y1(d,i,data):y0z[i]))}if(buffer)return output=null,buffer+""||null}function arealine(){return src_line().defined(defined).curve(curve).context(context)}return area.x=function(_){return arguments.length?(x0="function"==typeof _?_:src_constant(+_),x1=null,area):x0},area.x0=function(_){return arguments.length?(x0="function"==typeof _?_:src_constant(+_),area):x0},area.x1=function(_){return arguments.length?(x1=null==_?null:"function"==typeof _?_:src_constant(+_),area):x1},area.y=function(_){return arguments.length?(y0="function"==typeof _?_:src_constant(+_),y1=null,area):y0},area.y0=function(_){return arguments.length?(y0="function"==typeof _?_:src_constant(+_),area):y0},area.y1=function(_){return arguments.length?(y1=null==_?null:"function"==typeof _?_:src_constant(+_),area):y1},area.lineX0=area.lineY0=function(){return arealine().x(x0).y(y0)},area.lineY1=function(){return arealine().x(x0).y(y1)},area.lineX1=function(){return arealine().x(x1).y(y0)},area.defined=function(_){return arguments.length?(defined="function"==typeof _?_:src_constant(!!_),area):defined},area.curve=function(_){return arguments.length?(curve=_,null!=context&&(output=curve(context)),area):curve},area.context=function(_){return arguments.length?(null==_?context=output=null:output=curve(context=_),area):context},area},symbol_circle={draw:function(context,size){var r=Math.sqrt(size/pi);context.moveTo(r,0),context.arc(0,0,r,0,tau)}},kr=(Math.sqrt(1/3),Math.sin(pi/10)/Math.sin(7*pi/10));Math.sin(tau/10),Math.cos(tau/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12);function shapes_value(a,b){return null!=a?a:b}const shapes_x=item=>item.x||0,shapes_y=item=>item.y||0,shapes_def=item=>!(!1===item.defined),arcShape=function(){var innerRadius=arcInnerRadius,outerRadius=arcOuterRadius,cornerRadius=src_constant(0),padRadius=null,startAngle=arcStartAngle,endAngle=arcEndAngle,padAngle=arcPadAngle,context=null;function arc(){var buffer,r,r0=+innerRadius.apply(this,arguments),r1=+outerRadius.apply(this,arguments),a0=startAngle.apply(this,arguments)-halfPi,a1=endAngle.apply(this,arguments)-halfPi,da=abs(a1-a0),cw=a1>a0;if(context||(context=buffer=d3_path_src_path()),r1<r0&&(r=r1,r1=r0,r0=r),r1>math_epsilon)if(da>tau-math_epsilon)context.moveTo(r1*math_cos(a0),r1*math_sin(a0)),context.arc(0,0,r1,a0,a1,!cw),r0>math_epsilon&&(context.moveTo(r0*math_cos(a1),r0*math_sin(a1)),context.arc(0,0,r0,a1,a0,cw));else{var t0,t1,a01=a0,a11=a1,a00=a0,a10=a1,da0=da,da1=da,ap=padAngle.apply(this,arguments)/2,rp=ap>math_epsilon&&(padRadius?+padRadius.apply(this,arguments):sqrt(r0*r0+r1*r1)),rc=math_min(abs(r1-r0)/2,+cornerRadius.apply(this,arguments)),rc0=rc,rc1=rc;if(rp>math_epsilon){var p0=asin(rp/r0*math_sin(ap)),p1=asin(rp/r1*math_sin(ap));(da0-=2*p0)>math_epsilon?(a00+=p0*=cw?1:-1,a10-=p0):(da0=0,a00=a10=(a0+a1)/2),(da1-=2*p1)>math_epsilon?(a01+=p1*=cw?1:-1,a11-=p1):(da1=0,a01=a11=(a0+a1)/2)}var x01=r1*math_cos(a01),y01=r1*math_sin(a01),x10=r0*math_cos(a10),y10=r0*math_sin(a10);if(rc>math_epsilon){var oc,x11=r1*math_cos(a11),y11=r1*math_sin(a11),x00=r0*math_cos(a00),y00=r0*math_sin(a00);if(da<pi&&(oc=function arc_intersect(x0,y0,x1,y1,x2,y2,x3,y3){var x10=x1-x0,y10=y1-y0,x32=x3-x2,y32=y3-y2,t=y32*x10-x32*y10;if(!(t*t<math_epsilon))return[x0+(t=(x32*(y0-y2)-y32*(x0-x2))/t)*x10,y0+t*y10]}(x01,y01,x00,y00,x11,y11,x10,y10))){var ax=x01-oc[0],ay=y01-oc[1],bx=x11-oc[0],by=y11-oc[1],kc=1/math_sin(function acos(x){return x>1?0:x<-1?pi:Math.acos(x)}((ax*bx+ay*by)/(sqrt(ax*ax+ay*ay)*sqrt(bx*bx+by*by)))/2),lc=sqrt(oc[0]*oc[0]+oc[1]*oc[1]);rc0=math_min(rc,(r0-lc)/(kc-1)),rc1=math_min(rc,(r1-lc)/(kc+1))}}da1>math_epsilon?rc1>math_epsilon?(t0=cornerTangents(x00,y00,x01,y01,r1,rc1,cw),t1=cornerTangents(x11,y11,x10,y10,r1,rc1,cw),context.moveTo(t0.cx+t0.x01,t0.cy+t0.y01),rc1<rc?context.arc(t0.cx,t0.cy,rc1,atan2(t0.y01,t0.x01),atan2(t1.y01,t1.x01),!cw):(context.arc(t0.cx,t0.cy,rc1,atan2(t0.y01,t0.x01),atan2(t0.y11,t0.x11),!cw),context.arc(0,0,r1,atan2(t0.cy+t0.y11,t0.cx+t0.x11),atan2(t1.cy+t1.y11,t1.cx+t1.x11),!cw),context.arc(t1.cx,t1.cy,rc1,atan2(t1.y11,t1.x11),atan2(t1.y01,t1.x01),!cw))):(context.moveTo(x01,y01),context.arc(0,0,r1,a01,a11,!cw)):context.moveTo(x01,y01),r0>math_epsilon&&da0>math_epsilon?rc0>math_epsilon?(t0=cornerTangents(x10,y10,x11,y11,r0,-rc0,cw),t1=cornerTangents(x01,y01,x00,y00,r0,-rc0,cw),context.lineTo(t0.cx+t0.x01,t0.cy+t0.y01),rc0<rc?context.arc(t0.cx,t0.cy,rc0,atan2(t0.y01,t0.x01),atan2(t1.y01,t1.x01),!cw):(context.arc(t0.cx,t0.cy,rc0,atan2(t0.y01,t0.x01),atan2(t0.y11,t0.x11),!cw),context.arc(0,0,r0,atan2(t0.cy+t0.y11,t0.cx+t0.x11),atan2(t1.cy+t1.y11,t1.cx+t1.x11),cw),context.arc(t1.cx,t1.cy,rc0,atan2(t1.y11,t1.x11),atan2(t1.y01,t1.x01),!cw))):context.arc(0,0,r0,a10,a00,cw):context.lineTo(x10,y10)}else context.moveTo(0,0);if(context.closePath(),buffer)return context=null,buffer+""||null}return arc.centroid=function(){var r=(+innerRadius.apply(this,arguments)+ +outerRadius.apply(this,arguments))/2,a=(+startAngle.apply(this,arguments)+ +endAngle.apply(this,arguments))/2-pi/2;return[math_cos(a)*r,math_sin(a)*r]},arc.innerRadius=function(_){return arguments.length?(innerRadius="function"==typeof _?_:src_constant(+_),arc):innerRadius},arc.outerRadius=function(_){return arguments.length?(outerRadius="function"==typeof _?_:src_constant(+_),arc):outerRadius},arc.cornerRadius=function(_){return arguments.length?(cornerRadius="function"==typeof _?_:src_constant(+_),arc):cornerRadius},arc.padRadius=function(_){return arguments.length?(padRadius=null==_?null:"function"==typeof _?_:src_constant(+_),arc):padRadius},arc.startAngle=function(_){return arguments.length?(startAngle="function"==typeof _?_:src_constant(+_),arc):startAngle},arc.endAngle=function(_){return arguments.length?(endAngle="function"==typeof _?_:src_constant(+_),arc):endAngle},arc.padAngle=function(_){return arguments.length?(padAngle="function"==typeof _?_:src_constant(+_),arc):padAngle},arc.context=function(_){return arguments.length?(context=null==_?null:_,arc):context},arc}().startAngle(item=>item.startAngle||0).endAngle(item=>item.endAngle||0).padAngle(item=>item.padAngle||0).innerRadius(item=>item.innerRadius||0).outerRadius(item=>item.outerRadius||0).cornerRadius(item=>item.cornerRadius||0),areavShape=src_area().x(shapes_x).y1(shapes_y).y0(item=>(item.y||0)+(item.height||0)).defined(shapes_def),areahShape=src_area().y(shapes_y).x1(shapes_x).x0(item=>(item.x||0)+(item.width||0)).defined(shapes_def),lineShape=src_line().x(shapes_x).y(shapes_y).defined(shapes_def),rectShape=path_rectangle().x(shapes_x).y(shapes_y).width(item=>item.width||0).height(item=>item.height||0).cornerRadius(item=>shapes_value(item.cornerRadiusTopLeft,item.cornerRadius)||0,item=>shapes_value(item.cornerRadiusTopRight,item.cornerRadius)||0,item=>shapes_value(item.cornerRadiusBottomRight,item.cornerRadius)||0,item=>shapes_value(item.cornerRadiusBottomLeft,item.cornerRadius)||0),symbolShape=function(){var type=src_constant(symbol_circle),size=src_constant(64),context=null;function symbol(){var buffer;if(context||(context=buffer=d3_path_src_path()),type.apply(this,arguments).draw(context,+size.apply(this,arguments)),buffer)return context=null,buffer+""||null}return symbol.type=function(_){return arguments.length?(type="function"==typeof _?_:src_constant(_),symbol):type},symbol.size=function(_){return arguments.length?(size="function"==typeof _?_:src_constant(+_),symbol):size},symbol.context=function(_){return arguments.length?(context=null==_?null:_,symbol):context},symbol}().type(item=>symbols_symbols(item.shape||"circle")).size(item=>shapes_value(item.size,64)),trailShape=path_trail().x(shapes_x).y(shapes_y).defined(shapes_def).size(item=>item.size||1);function hasCornerRadius(item){return item.cornerRadius||item.cornerRadiusTopLeft||item.cornerRadiusTopRight||item.cornerRadiusBottomRight||item.cornerRadiusBottomLeft}function shapes_rectangle(context,item,x,y){return rectShape.context(context)(item,x,y)}var boundStroke=function(bounds,item,miter){if(item.stroke&&0!==item.opacity&&0!==item.strokeOpacity){const sw=null!=item.strokeWidth?+item.strokeWidth:1;bounds.expand(sw+(miter?function miterAdjustment(item,strokeWidth){return item.strokeJoin&&"miter"!==item.strokeJoin?0:strokeWidth}(item,sw):0))}return bounds};var boundContext_bounds,circleThreshold=Tau-1e-8;function boundContext_context(_){return boundContext_bounds=_,boundContext_context}function boundContext_noop(){}function boundContext_add(x,y){boundContext_bounds.add(x,y)}boundContext_context.beginPath=boundContext_noop,boundContext_context.closePath=boundContext_noop,boundContext_context.moveTo=boundContext_add,boundContext_context.lineTo=boundContext_add,boundContext_context.rect=function(x,y,w,h){boundContext_add(x,y),boundContext_add(x+w,y+h)},boundContext_context.quadraticCurveTo=function(x1,y1,x2,y2){boundContext_add(x1,y1),boundContext_add(x2,y2)},boundContext_context.bezierCurveTo=function(x1,y1,x2,y2,x3,y3){boundContext_add(x1,y1),boundContext_add(x2,y2),boundContext_add(x3,y3)},boundContext_context.arc=function(cx,cy,r,sa,ea,ccw){if(Math.abs(ea-sa)>circleThreshold)return boundContext_add(cx-r,cy-r),void boundContext_add(cx+r,cy+r);var s,i,x,y,xmin=1/0,xmax=-1/0,ymin=1/0,ymax=-1/0;function update(a){x=r*Math.cos(a),y=r*Math.sin(a),x<xmin&&(xmin=x),x>xmax&&(xmax=x),y<ymin&&(ymin=y),y>ymax&&(ymax=y)}if(update(sa),update(ea),ea!==sa)if((sa%=Tau)<0&&(sa+=Tau),(ea%=Tau)<0&&(ea+=Tau),ea<sa&&(ccw=!ccw,s=sa,sa=ea,ea=s),ccw)for(ea-=Tau,s=sa-sa%HalfPi,i=0;i<4&&s>ea;++i,s-=HalfPi)update(s);else for(s=sa-sa%HalfPi+HalfPi,i=0;i<4&&s<ea;++i,s+=HalfPi)update(s);boundContext_add(cx+xmin,cy+ymin),boundContext_add(cx+xmax,cy+ymax)};var context_context=(context_context=domCanvas(1,1))?context_context.getContext("2d"):null;const intersect_b=new Bounds;function intersectPath(draw){return function(item,brush){if(!context_context)return!0;draw(context_context,item),intersect_b.clear().union(item.bounds).intersect(brush).round();const{x1:x1,y1:y1,x2:x2,y2:y2}=intersect_b;for(let y=y1;y<=y2;++y)for(let x=x1;x<=x2;++x)if(context_context.isPointInPath(x,y))return!0;return!1}}function intersectPoint(item,box){return box.contains(item.x||0,item.y||0)}function intersectRect(item,box){const x=item.x||0,y=item.y||0,w=item.width||0,h=item.height||0;return box.intersects(intersect_b.set(x,y,x+w,y+h))}function intersectRule(item,box){const x=item.x||0,y=item.y||0;return intersectBoxLine(box,x,y,null!=item.x2?item.x2:x,null!=item.y2?item.y2:y)}function intersectBoxLine(box,x,y,u,v){const{x1:x1,y1:y1,x2:x2,y2:y2}=box,dx=u-x,dy=v-y;let p,q,r,e,t0=0,t1=1;for(e=0;e<4;++e){if(0===e&&(p=-dx,q=-(x1-x)),1===e&&(p=dx,q=x2-x),2===e&&(p=-dy,q=-(y1-y)),3===e&&(p=dy,q=y2-y),Math.abs(p)<1e-10&&q<0)return!1;if(r=q/p,p<0){if(r>t1)return!1;r>t0&&(t0=r)}else if(p>0){if(r<t0)return!1;r<t1&&(t1=r)}}return!0}function gradient_v(value,dflt){return null==value?dflt:value}var canvas_color=function(context,item,value){return isGradient(value)?function(context,gradient,bounds){const w=bounds.width(),h=bounds.height(),stop=gradient.stops,n=stop.length,canvasGradient="radial"===gradient.gradient?context.createRadialGradient(bounds.x1+gradient_v(gradient.x1,.5)*w,bounds.y1+gradient_v(gradient.y1,.5)*h,Math.max(w,h)*gradient_v(gradient.r1,0),bounds.x1+gradient_v(gradient.x2,.5)*w,bounds.y1+gradient_v(gradient.y2,.5)*h,Math.max(w,h)*gradient_v(gradient.r2,.5)):context.createLinearGradient(bounds.x1+gradient_v(gradient.x1,0)*w,bounds.y1+gradient_v(gradient.y1,0)*h,bounds.x1+gradient_v(gradient.x2,1)*w,bounds.y1+gradient_v(gradient.y2,0)*h);for(let i=0;i<n;++i)canvasGradient.addColorStop(stop[i].offset,stop[i].color);return canvasGradient}(context,value,item.bounds):value},canvas_fill=function(context,item,opacity){return(opacity*=null==item.fillOpacity?1:item.fillOpacity)>0&&(context.globalAlpha=opacity,context.fillStyle=canvas_color(context,item,item.fill),!0)},stroke_Empty=[],canvas_stroke=function(context,item,opacity){var lw=null!=(lw=item.strokeWidth)?lw:1;return!(lw<=0)&&((opacity*=null==item.strokeOpacity?1:item.strokeOpacity)>0&&(context.globalAlpha=opacity,context.strokeStyle=canvas_color(context,item,item.stroke),context.lineWidth=lw,context.lineCap=item.strokeCap||"butt",context.lineJoin=item.strokeJoin||"miter",context.miterLimit=item.strokeMiterLimit||10,context.setLineDash&&(context.setLineDash(item.strokeDash||stroke_Empty),context.lineDashOffset=item.strokeDashOffset||0),!0))};function visit_compare(a,b){return a.zindex-b.zindex||a.index-b.index}function zorder(scene){if(!scene.zdirty)return scene.zitems;var item,i,n,items=scene.items,output=[];for(i=0,n=items.length;i<n;++i)(item=items[i]).index=i,item.zindex&&output.push(item);return scene.zdirty=!1,scene.zitems=output.sort(visit_compare)}function visit_visit(scene,visitor){var i,n,items=scene.items;if(items&&items.length){var zitems=zorder(scene);if(zitems&&zitems.length){for(i=0,n=items.length;i<n;++i)items[i].zindex||visitor(items[i]);items=zitems}for(i=0,n=items.length;i<n;++i)visitor(items[i])}}function pickVisit(scene,visitor){var hit,i,items=scene.items;if(!items||!items.length)return null;var zitems=zorder(scene);for(zitems&&zitems.length&&(items=zitems),i=items.length;--i>=0;)if(hit=visitor(items[i]))return hit;if(items===zitems)for(i=(items=scene.items).length;--i>=0;)if(!items[i].zindex&&(hit=visitor(items[i])))return hit;return null}function drawAll(path){return function(context,scene,bounds){visit_visit(scene,(function(item){bounds&&!bounds.intersects(item.bounds)||drawPath(path,context,item,item)}))}}function drawPath(path,context,item,items){var opacity=null==item.opacity?1:item.opacity;0!==opacity&&(path(context,items)||(item.fill&&canvas_fill(context,item,opacity)&&context.fill(),item.stroke&&canvas_stroke(context,item,opacity)&&context.stroke()))}function pick_pick(test){return test=test||vega_util.fb,function(context,scene,x,y,gx,gy){return x*=context.pixelRatio,y*=context.pixelRatio,pickVisit(scene,(function(item){var b=item.bounds;if((!b||b.contains(gx,gy))&&b)return test(context,item,x,y,gx,gy)?item:void 0}))}}function hitPath(path,filled){return function(context,o,x,y){var lw,lc,item=Array.isArray(o)?o[0]:o,fill=null==filled?item.fill:filled,stroke=item.stroke&&context.isPointInStroke;return stroke&&(lw=item.strokeWidth,lc=item.strokeCap,context.lineWidth=null!=lw?lw:1,context.lineCap=null!=lc?lc:"butt"),!path(context,o)&&(fill&&context.isPointInPath(x,y)||stroke&&context.isPointInStroke(x,y))}}function pickPath(path){return pick_pick(hitPath(path))}function transform_translate(x,y){return"translate("+x+","+y+")"}function transform_rotate(a){return"rotate("+a+")"}function translateItem(item){return transform_translate(item.x||0,item.y||0)}function transformItem(item){return transform_translate(item.x||0,item.y||0)+(item.angle?" "+transform_rotate(item.angle):"")+(item.scaleX||item.scaleY?" "+function transform_scale(scaleX,scaleY){return"scale("+scaleX+","+scaleY+")"}(item.scaleX||1,item.scaleY||1):"")}var markItemPath=function(type,shape,isect){function draw(context,item){var x=item.x||0,y=item.y||0,a=item.angle||0;context.translate(x,y),a&&context.rotate(a*=DegToRad),context.beginPath(),shape(context,item),a&&context.rotate(-a),context.translate(-x,-y)}return{type:type,tag:"path",nested:!1,attr:function attr(emit,item){emit("transform",transformItem(item)),emit("d",shape(null,item))},bound:function bound(bounds,item){var x=item.x||0,y=item.y||0;return shape(boundContext_context(bounds),item),boundStroke(bounds,item).translate(x,y),item.angle&&bounds.rotate(item.angle*DegToRad,x,y),bounds},draw:drawAll(draw),pick:pickPath(draw),isect:isect||intersectPath(draw)}},marks_arc=markItemPath("arc",(function shapes_arc(context,item){return arcShape.context(context)(item)}));var markMultiItemPath=function(type,shape,tip){function draw(context,items){context.beginPath(),shape(context,items)}var path,hit=hitPath(draw);return{type:type,tag:"path",nested:!0,attr:function attr(emit,item){var items=item.mark.items;items.length&&emit("d",shape(null,items))},bound:function bound(bounds,mark){var items=mark.items;return 0===items.length?bounds:(shape(boundContext_context(bounds),items),boundStroke(bounds,items[0]))},draw:(path=draw,function(context,scene,bounds){!scene.items.length||bounds&&!bounds.intersects(scene.bounds)||drawPath(path,context,scene.items[0],scene.items)}),pick:function pick(context,scene,x,y,gx,gy){var items=scene.items,b=scene.bounds;return!items||!items.length||b&&!b.contains(gx,gy)?null:(x*=context.pixelRatio,y*=context.pixelRatio,hit(context,items,x,y)?items[0]:null)},isect:intersectPoint,tip:tip}},marks_area=markMultiItemPath("area",(function shapes_area(context,items){var item=items[0],interp=item.interpolate||"linear";return("horizontal"===item.orient?areahShape:areavShape).curve(curves(interp,item.orient,item.tension)).context(context)(items)}),(function pickArea(a,p){for(var hit,d,v="horizontal"===a[0].orient?p[1]:p[0],z="horizontal"===a[0].orient?"y":"x",i=a.length,min=1/0;--i>=0;)!1!==a[i].defined&&(d=Math.abs(a[i][z]-v))<min&&(min=d,hit=a[i]);return hit}));function clipGroup(context,group){context.beginPath(),hasCornerRadius(group)?shapes_rectangle(context,group,0,0):context.rect(0,0,group.width||0,group.height||0),context.clip()}var clip_id=1;function resetSVGClipId(){clip_id=1}var svg_clip=function(renderer,item,size){var clip=item.clip,defs=renderer._defs,id=item.clip_id||(item.clip_id="clip"+clip_id++),c=defs.clipping[id]||(defs.clipping[id]={id:id});return Object(vega_util.D)(clip)?c.path=clip(null):hasCornerRadius(size)?c.path=shapes_rectangle(null,size,0,0):(c.width=size.width||0,c.height=size.height||0),"url(#"+id+")"},StrokeOffset=.5;function backgroundPath(context,group){var offset=group.stroke?StrokeOffset:0;context.beginPath(),shapes_rectangle(context,group,offset,offset)}var hitBackground=hitPath(backgroundPath);var marks_group={type:"group",tag:"g",nested:!1,attr:function group_attr(emit,item){emit("transform",translateItem(item))},bound:function group_bound(bounds,group){if(!group.clip&&group.items)for(var items=group.items,j=0,m=items.length;j<m;++j)bounds.union(items[j].bounds);return(group.clip||group.width||group.height)&&!group.noBound&&bounds.add(0,0).add(group.width||0,group.height||0),boundStroke(bounds,group),bounds.translate(group.x||0,group.y||0)},draw:function group_draw(context,scene,bounds){var renderer=this;visit_visit(scene,(function(group){var opacity,gx=group.x||0,gy=group.y||0;context.save(),context.translate(gx,gy),(group.stroke||group.fill)&&(opacity=null==group.opacity?1:group.opacity)>0&&(backgroundPath(context,group),group.fill&&canvas_fill(context,group,opacity)&&context.fill(),group.stroke&&canvas_stroke(context,group,opacity)&&context.stroke()),group.clip&&clipGroup(context,group),bounds&&bounds.translate(-gx,-gy),visit_visit(group,(function(item){renderer.draw(context,item,bounds)})),bounds&&bounds.translate(gx,gy),context.restore()}))},pick:function group_pick(context,scene,x,y,gx,gy){if(scene.bounds&&!scene.bounds.contains(gx,gy)||!scene.items)return null;var handler=this,cx=x*context.pixelRatio,cy=y*context.pixelRatio;return pickVisit(scene,(function(group){var hit,dx,dy,dw,dh,b,c;if((!(b=group.bounds)||b.contains(gx,gy))&&(dx=group.x||0,dy=group.y||0,dw=dx+(group.width||0),dh=dy+(group.height||0),!(c=group.clip)||!(gx<dx||gx>dw||gy<dx||gy>dh))){if(context.save(),context.translate(dx,dy),dx=gx-dx,dy=gy-dy,!c||!hasCornerRadius(group)||hitBackground(context,group,cx,cy))return!(hit=pickVisit(group,(function(mark){return function pickMark(mark,x,y){return(!1!==mark.interactive||"group"===mark.marktype)&&mark.bounds&&mark.bounds.contains(x,y)}(mark,dx,dy)?handler.pick(mark,x,y,dx,dy):null})))&&!1!==scene.interactive&&(group.fill||group.stroke)&&hitBackground(context,group,cx,cy)&&(hit=group),context.restore(),hit||null;context.restore()}}))},isect:intersectRect,background:function background(emit,item){var offset=item.stroke?StrokeOffset:0;emit("class","background"),emit("d",shapes_rectangle(null,item,offset,offset))},foreground:function foreground(emit,item,renderer){emit("clip-path",item.clip?svg_clip(renderer,item,item):null)}};function getImage(item,renderer){var image=item.image;return(!image||item.url&&item.url!==image.url)&&(image={complete:!1,width:0,height:0},renderer.loadImage(item.url).then(image=>{item.image=image,item.image.url=item.url})),image}function imageWidth(item,image){return null!=item.width?item.width:image&&image.width?!1!==item.aspect&&item.height?item.height*image.width/image.height:image.width:0}function imageHeight(item,image){return null!=item.height?item.height:image&&image.height?!1!==item.aspect&&item.width?item.width*image.height/image.width:image.height:0}function imageXOffset(align,w){return"center"===align?w/2:"right"===align?w:0}function imageYOffset(baseline,h){return"middle"===baseline?h/2:"bottom"===baseline?h:0}var marks_image={type:"image",tag:"image",nested:!1,attr:function image_attr(emit,item,renderer){var image=getImage(item,renderer),x=item.x||0,y=item.y||0,w=imageWidth(item,image),h=imageHeight(item,image),a=!1===item.aspect?"none":"xMidYMid";x-=imageXOffset(item.align,w),y-=imageYOffset(item.baseline,h),!image.src&&image.toDataURL?emit("href",image.toDataURL(),"http://www.w3.org/1999/xlink","xlink:href"):emit("href",image.src||"","http://www.w3.org/1999/xlink","xlink:href"),emit("transform",transform_translate(x,y)),emit("width",w),emit("height",h),emit("preserveAspectRatio",a)},bound:function image_bound(bounds,item){var image=item.image,x=item.x||0,y=item.y||0,w=imageWidth(item,image),h=imageHeight(item,image);return x-=imageXOffset(item.align,w),y-=imageYOffset(item.baseline,h),bounds.set(x,y,x+w,y+h)},draw:function image_draw(context,scene,bounds){var renderer=this;visit_visit(scene,(function(item){if(!bounds||bounds.intersects(item.bounds)){var opacity,ar0,ar1,t,image=getImage(item,renderer),x=item.x||0,y=item.y||0,w=imageWidth(item,image),h=imageHeight(item,image);x-=imageXOffset(item.align,w),y-=imageYOffset(item.baseline,h),!1!==item.aspect&&(ar0=image.width/image.height,ar1=item.width/item.height,ar0==ar0&&ar1==ar1&&ar0!==ar1&&(ar1<ar0?(y+=(h-(t=w/ar0))/2,h=t):(x+=(w-(t=h*ar0))/2,w=t))),(image.complete||image.toDataURL)&&(context.globalAlpha=null!=(opacity=item.opacity)?opacity:1,context.imageSmoothingEnabled=!1!==item.smooth,context.drawImage(image,x,y,w,h))}}))},pick:pick_pick(),isect:vega_util.fb,get:getImage,xOffset:imageXOffset,yOffset:imageYOffset},marks_line=markMultiItemPath("line",(function shapes_line(context,items){var item=items[0],interp=item.interpolate||"linear";return lineShape.curve(curves(interp,item.orient,item.tension)).context(context)(items)}),(function pickLine(a,p){for(var dx,dy,t=Math.pow(a[0].strokeWidth||1,2),i=a.length;--i>=0;)if(!1!==a[i].defined&&(dx=a[i].x-p[0])*dx+(dy=a[i].y-p[1])*dy<t)return a[i];return null}));function marks_path_path(context,item){var path=item.path;if(null==path)return!0;var x=item.x||0,y=item.y||0,sx=item.scaleX||1,sy=item.scaleY||1,a=(item.angle||0)*DegToRad,cache=item.pathCache;cache&&cache.path===path||((item.pathCache=cache=path_parse(path)).path=path),a&&context.rotate&&context.translate?(context.translate(x,y),context.rotate(a),path_render(context,cache,0,0,sx,sy),context.rotate(-a),context.translate(-x,-y)):path_render(context,cache,x,y,sx,sy)}var marks_path={type:"path",tag:"path",nested:!1,attr:function path_attr(emit,item){var sx=item.scaleX||1,sy=item.scaleY||1;1===sx&&1===sy||emit("vector-effect","non-scaling-stroke"),emit("transform",transformItem(item)),emit("d",item.path)},bound:function path_bound(bounds,item){return marks_path_path(boundContext_context(bounds),item)?bounds.set(0,0,0,0):boundStroke(bounds,item,!0),item.angle&&bounds.rotate(item.angle*DegToRad,item.x||0,item.y||0),bounds},draw:drawAll(marks_path_path),pick:pickPath(marks_path_path),isect:intersectPath(marks_path_path)};function rect_draw(context,item){context.beginPath(),shapes_rectangle(context,item)}var rect={type:"rect",tag:"path",nested:!1,attr:function rect_attr(emit,item){emit("d",shapes_rectangle(null,item))},bound:function rect_bound(bounds,item){var x,y;return boundStroke(bounds.set(x=item.x||0,y=item.y||0,x+item.width||0,y+item.height||0),item)},draw:drawAll(rect_draw),pick:pickPath(rect_draw),isect:intersectRect};function rule_path(context,item,opacity){var x1,y1,x2,y2;return!(!item.stroke||!canvas_stroke(context,item,opacity))&&(x1=item.x||0,y1=item.y||0,x2=null!=item.x2?item.x2:x1,y2=null!=item.y2?item.y2:y1,context.beginPath(),context.moveTo(x1,y1),context.lineTo(x2,y2),!0)}var currFontHeight,marks_rule={type:"rule",tag:"line",nested:!1,attr:function rule_attr(emit,item){emit("transform",translateItem(item)),emit("x2",null!=item.x2?item.x2-(item.x||0):0),emit("y2",null!=item.y2?item.y2-(item.y||0):0)},bound:function rule_bound(bounds,item){var x1,y1;return boundStroke(bounds.set(x1=item.x||0,y1=item.y||0,null!=item.x2?item.x2:x1,null!=item.y2?item.y2:y1),item)},draw:function rule_draw(context,scene,bounds){visit_visit(scene,(function(item){if(!bounds||bounds.intersects(item.bounds)){var opacity=null==item.opacity?1:item.opacity;opacity&&rule_path(context,item,opacity)&&context.stroke()}}))},pick:pick_pick((function rule_hit(context,item,x,y){return!!context.isPointInStroke&&(rule_path(context,item,1)&&context.isPointInStroke(x,y))})),isect:intersectRule},marks_shape=markItemPath("shape",(function shapes_shape(context,item){return(item.mark.shape||item.shape).context(context)(item)})),marks_symbol=markItemPath("symbol",(function shapes_symbol(context,item){return symbolShape.context(context)(item)}),intersectPoint),textMetrics={height:text_fontSize,measureWidth:measureWidth,estimateWidth:estimateWidth,width:estimateWidth,canvas:useCanvas};function estimateWidth(item,text){return currFontHeight=text_fontSize(item),estimate(textValue(item,text))}function estimate(text){return~~(.8*text.length*currFontHeight)}function measureWidth(item,text){return text_fontSize(item)<=0?0:(context_context.font=text_font(item),text_measure(textValue(item,text)))}function text_measure(text){return context_context.measureText(text).width}function text_fontSize(item){return null!=item.fontSize?item.fontSize:11}function useCanvas(use){textMetrics.width=use&&context_context?measureWidth:estimateWidth}function lineHeight(item){return null!=item.lineHeight?item.lineHeight:text_fontSize(item)+2}function textLines(item){return function lineArray(_){return Object(vega_util.A)(_)?_.length>1?_:_[0]:_}(item.lineBreak&&item.text&&!Object(vega_util.A)(item.text)?item.text.split(item.lineBreak):item.text)}function multiLineOffset(item){const tl=textLines(item);return(Object(vega_util.A)(tl)?tl.length-1:0)*lineHeight(item)}function textValue(item,line){return null==line?"":item.limit>0?function truncate(item,line){var width,limit=+item.limit,text=line+"";textMetrics.width===measureWidth?(context_context.font=text_font(item),width=text_measure):(currFontHeight=text_fontSize(item),width=estimate);if(width(text)<limit)return text;var mid,ellipsis=item.ellipsis||"…",rtl="rtl"===item.dir,lo=0,hi=text.length;if(limit-=width(ellipsis),rtl){for(;lo<hi;)mid=lo+hi>>>1,width(text.slice(mid))>limit?lo=mid+1:hi=mid;return ellipsis+text.slice(lo)}for(;lo<hi;)mid=1+(lo+hi>>>1),width(text.slice(0,mid))<limit?lo=mid:hi=mid-1;return text.slice(0,lo)+ellipsis}(item,line):line+""}function fontFamily(item,quote){var font=item.font;return(quote&&font?String(font).replace(/"/g,"'"):font)||"sans-serif"}function text_font(item,quote){return(item.fontStyle?item.fontStyle+" ":"")+(item.fontVariant?item.fontVariant+" ":"")+(item.fontWeight?item.fontWeight+" ":"")+text_fontSize(item)+"px "+fontFamily(item,quote)}function text_offset(item){var baseline=item.baseline,h=text_fontSize(item);return Math.round("top"===baseline?.79*h:"middle"===baseline?.3*h:"bottom"===baseline?-.21*h:0)}useCanvas(!0);var textAlign={left:"start",center:"middle",right:"end"},tempBounds=new Bounds;function anchorPoint(item){var t,x=item.x||0,y=item.y||0,r=item.radius||0;return r&&(t=(item.theta||0)-HalfPi,x+=r*Math.cos(t),y+=r*Math.sin(t)),tempBounds.x1=x,tempBounds.y1=y,tempBounds}function text_bound(bounds,item,mode){var w,h=textMetrics.height(item),a=item.align,p=anchorPoint(item),x=p.x1,y=p.y1,dx=item.dx||0,dy=(item.dy||0)+text_offset(item)-Math.round(.8*h),tl=textLines(item);if(Object(vega_util.A)(tl)?(h+=lineHeight(item)*(tl.length-1),w=tl.reduce((w,t)=>Math.max(w,textMetrics.width(item,t)),0)):w=textMetrics.width(item,tl),"center"===a?dx-=w/2:"right"===a&&(dx-=w),bounds.set(dx+=x,dy+=y,dx+w,dy+h),item.angle&&!mode)bounds.rotate(item.angle*DegToRad,x,y);else if(2===mode)return bounds.rotatedPoints(item.angle*DegToRad,x,y);return bounds}var src_marks={arc:marks_arc,area:marks_area,group:marks_group,image:marks_image,line:marks_line,path:marks_path,rect:rect,rule:marks_rule,shape:marks_shape,symbol:marks_symbol,text:{type:"text",tag:"text",nested:!1,attr:function text_attr(emit,item){var t,dx=item.dx||0,dy=(item.dy||0)+text_offset(item),p=anchorPoint(item),x=p.x1,y=p.y1,a=item.angle||0;emit("text-anchor",textAlign[item.align]||"start"),a?(t=transform_translate(x,y)+" "+transform_rotate(a),(dx||dy)&&(t+=" "+transform_translate(dx,dy))):t=transform_translate(x+dx,y+dy),emit("transform",t)},bound:text_bound,draw:function text_draw(context,scene,bounds){visit_visit(scene,(function(item){var p,x,y,i,lh,tl,str,opacity=null==item.opacity?1:item.opacity;if(!(bounds&&!bounds.intersects(item.bounds)||0===opacity||item.fontSize<=0||null==item.text||0===item.text.length)){if(context.font=text_font(item),context.textAlign=item.align||"left",x=(p=anchorPoint(item)).x1,y=p.y1,item.angle&&(context.save(),context.translate(x,y),context.rotate(item.angle*DegToRad),x=y=0),x+=item.dx||0,y+=(item.dy||0)+text_offset(item),tl=textLines(item),Object(vega_util.A)(tl))for(lh=lineHeight(item),i=0;i<tl.length;++i)str=textValue(item,tl[i]),item.fill&&canvas_fill(context,item,opacity)&&context.fillText(str,x,y),item.stroke&&canvas_stroke(context,item,opacity)&&context.strokeText(str,x,y),y+=lh;else str=textValue(item,tl),item.fill&&canvas_fill(context,item,opacity)&&context.fillText(str,x,y),item.stroke&&canvas_stroke(context,item,opacity)&&context.strokeText(str,x,y);item.angle&&context.restore()}}))},pick:pick_pick((function text_hit(context,item,x,y,gx,gy){if(item.fontSize<=0)return!1;if(!item.angle)return!0;var p=anchorPoint(item),ax=p.x1,ay=p.y1,b=text_bound(tempBounds,item,1),a=-item.angle*DegToRad,cos=Math.cos(a),sin=Math.sin(a),px=cos*gx-sin*gy+(ax-cos*ax+sin*ay),py=sin*gx+cos*gy+(ay-sin*ax-cos*ay);return b.contains(px,py)})),isect:function intersectText(item,box){var p=text_bound(tempBounds,item,2);return intersectBoxLine(box,p[0],p[1],p[2],p[3])||intersectBoxLine(box,p[0],p[1],p[4],p[5])||intersectBoxLine(box,p[4],p[5],p[6],p[7])||intersectBoxLine(box,p[2],p[3],p[6],p[7])}},trail:markMultiItemPath("trail",(function shapes_trail(context,items){return trailShape.context(context)(items)}),(function pickTrail(a,p){for(var dx,dy,i=a.length;--i>=0;)if(!1!==a[i].defined&&(dx=a[i].x-p[0])*dx+(dy=a[i].y-p[1])*dy<(dx=a[i].size||1)*dx)return a[i];return null}))},boundItem=function(item,func,opt){var type=src_marks[item.mark.marktype],bound=func||type.bound;return type.nested&&(item=item.mark),bound(item.bounds||(item.bounds=new Bounds),item,opt)},DUMMY={mark:null},boundMark=function(mark,bounds,opt){var i,n,item,b,type=src_marks[mark.marktype],bound=type.bound,items=mark.items,hasItems=items&&items.length;if(type.nested)return hasItems?item=items[0]:(DUMMY.mark=mark,item=DUMMY),b=boundItem(item,bound,opt),bounds=bounds&&bounds.union(b)||b;if(bounds=bounds||mark.bounds&&mark.bounds.clear()||new Bounds,hasItems)for(i=0,n=items.length;i<n;++i)bounds.union(boundItem(items[i],bound,opt));return mark.bounds=bounds},serialize_keys=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant"];function sceneToJSON(scene,indent){return JSON.stringify(scene,serialize_keys,indent)}function sceneFromJSON(json){return function serialize_initialize(scene){var parent,i,n,type=scene.marktype,items=scene.items;if(items)for(i=0,n=items.length;i<n;++i)parent=type?"mark":"group",items[i][parent]=scene,items[i].zindex&&(items[i][parent].zdirty=!0),"group"===(type||parent)&&serialize_initialize(items[i]);type&&boundMark(scene);return scene}("string"==typeof json?JSON.parse(json):json)}function Scenegraph(scene){arguments.length?this.root=sceneFromJSON(scene):(this.root=createMark({marktype:"group",name:"root",role:"frame"}),this.root.items=[new GroupItem(this.root)])}var Scenegraph_prototype=Scenegraph.prototype;function createMark(def,group){return{bounds:new Bounds,clip:!!def.clip,group:group,interactive:!1!==def.interactive,items:[],marktype:def.marktype,name:def.name||void 0,role:def.role||void 0,zindex:def.zindex||0}}function domCreate(doc,tag,ns){return!doc&&"undefined"!=typeof document&&document.createElement&&(doc=document),doc?ns?doc.createElementNS(ns,tag):doc.createElement(tag):null}function domFind(el,tag){tag=tag.toLowerCase();for(var nodes=el.childNodes,i=0,n=nodes.length;i<n;++i)if(nodes[i].tagName.toLowerCase()===tag)return nodes[i]}function domChild(el,index,tag,ns){var b,a=el.childNodes[index];return a&&a.tagName.toLowerCase()===tag.toLowerCase()||(b=a||null,a=domCreate(el.ownerDocument,tag,ns),el.insertBefore(a,b)),a}function domClear(el,index){for(var nodes=el.childNodes,curr=nodes.length;curr>index;)el.removeChild(nodes[--curr]);return el}function cssClass(mark){return"mark-"+mark.marktype+(mark.role?" role-"+mark.role:"")+(mark.name?" "+mark.name:"")}Scenegraph_prototype.toJSON=function(indent){return sceneToJSON(this.root,indent||0)},Scenegraph_prototype.mark=function(markdef,group,index){var mark=createMark(markdef,group=group||this.root.items[0]);return group.items[index]=mark,mark.zindex&&(mark.group.zdirty=!0),mark};var util_point=function(event,el){var rect=el.getBoundingClientRect();return[event.clientX-rect.left-(el.clientLeft||0),event.clientY-rect.top-(el.clientTop||0)]};function Handler_Handler(customLoader,customTooltip){this._active=null,this._handlers={},this._loader=customLoader||vega_loader_index_browser_loader(),this._tooltip=customTooltip||defaultTooltip}function defaultTooltip(handler,event,item,value){handler.element().setAttribute("title",value||"")}var Handler_prototype=Handler_Handler.prototype;function Renderer_Renderer(loader){this._el=null,this._bgcolor=null,this._loader=new ResourceLoader(loader)}Handler_prototype.initialize=function(el,origin,obj){return this._el=el,this._obj=obj||null,this.origin(origin)},Handler_prototype.element=function(){return this._el},Handler_prototype.canvas=function(){return this._el&&this._el.firstChild},Handler_prototype.origin=function(origin){return arguments.length?(this._origin=origin||[0,0],this):this._origin.slice()},Handler_prototype.scene=function(scene){return arguments.length?(this._scene=scene,this):this._scene},Handler_prototype.on=function(){},Handler_prototype.off=function(){},Handler_prototype._handlerIndex=function(h,type,handler){for(var i=h?h.length:0;--i>=0;)if(h[i].type===type&&(!handler||h[i].handler===handler))return i;return-1},Handler_prototype.handlers=function(type){var k,h=this._handlers,a=[];if(type)a.push.apply(a,h[this.eventName(type)]);else for(k in h)a.push.apply(a,h[k]);return a},Handler_prototype.eventName=function(name){var i=name.indexOf(".");return i<0?name:name.slice(0,i)},Handler_prototype.handleHref=function(event,item,href){this._loader.sanitize(href,{context:"href"}).then((function(opt){var e=new MouseEvent(event.type,event),a=domCreate(null,"a");for(var name in opt)a.setAttribute(name,opt[name]);a.dispatchEvent(e)})).catch((function(){}))},Handler_prototype.handleTooltip=function(event,item,show){if(item&&null!=item.tooltip){item=function(item,event,el,origin){var mdef,p,mark=item&&item.mark;if(mark&&(mdef=src_marks[mark.marktype]).tip){for((p=util_point(event,el))[0]-=origin[0],p[1]-=origin[1];item=item.mark.group;)p[0]-=item.x||0,p[1]-=item.y||0;item=mdef.tip(mark.items,p)}return item}(item,event,this.canvas(),this._origin);var value=show&&item&&item.tooltip||null;this._tooltip.call(this._obj,this,event,item,value)}},Handler_prototype.getItemBoundingClientRect=function(item){if(el=this.canvas()){for(var el,rect=el.getBoundingClientRect(),origin=this._origin,itemBounds=item.bounds,x=itemBounds.x1+origin[0]+rect.left,y=itemBounds.y1+origin[1]+rect.top,w=itemBounds.width(),h=itemBounds.height();item.mark&&(item=item.mark.group);)x+=item.x||0,y+=item.y||0;return{x:x,y:y,width:w,height:h,left:x,top:y,right:x+w,bottom:y+h}}};var Renderer_prototype=Renderer_Renderer.prototype;Renderer_prototype.initialize=function(el,width,height,origin,scaleFactor){return this._el=el,this.resize(width,height,origin,scaleFactor)},Renderer_prototype.element=function(){return this._el},Renderer_prototype.canvas=function(){return this._el&&this._el.firstChild},Renderer_prototype.background=function(bgcolor){return 0===arguments.length?this._bgcolor:(this._bgcolor=bgcolor,this)},Renderer_prototype.resize=function(width,height,origin,scaleFactor){return this._width=width,this._height=height,this._origin=origin||[0,0],this._scale=scaleFactor||1,this},Renderer_prototype.dirty=function(){},Renderer_prototype.render=function(scene){var r=this;return r._call=function(){r._render(scene)},r._call(),r._call=null,r},Renderer_prototype._render=function(){},Renderer_prototype.renderAsync=function(scene){var r=this.render(scene);return this._ready?this._ready.then((function(){return r})):Promise.resolve(r)},Renderer_prototype._load=function(method,uri){var r=this,p=r._loader[method](uri);if(!r._ready){var call=r._call;r._ready=r._loader.ready().then((function(redraw){redraw&&call(),r._ready=null}))}return p},Renderer_prototype.sanitizeURL=function(uri){return this._load("sanitizeURL",uri)},Renderer_prototype.loadImage=function(uri){return this._load("loadImage",uri)};var TooltipHideEvent="mouseout";function CanvasHandler(loader,tooltip){Handler_Handler.call(this,loader,tooltip),this._down=null,this._touch=null,this._first=!0}var CanvasHandler_prototype=Object(vega_util.y)(CanvasHandler,Handler_Handler);function move(moveEvent,overEvent,outEvent){return function(evt){var a=this._active,p=this.pickEvent(evt);p===a?this.fire(moveEvent,evt):(a&&a.exit||this.fire(outEvent,evt),this._active=p,this.fire(overEvent,evt),this.fire(moveEvent,evt))}}function inactive(type){return function(evt){this.fire(type,evt),this._active=null}}CanvasHandler_prototype.initialize=function(el,origin,obj){var canvas=this._canvas=el&&domFind(el,"canvas");if(canvas){var that=this;this.events.forEach((function(type){canvas.addEventListener(type,(function(evt){CanvasHandler_prototype[type]?CanvasHandler_prototype[type].call(that,evt):that.fire(type,evt)}))}))}return Handler_Handler.prototype.initialize.call(this,el,origin,obj)},CanvasHandler_prototype.canvas=function(){return this._canvas},CanvasHandler_prototype.context=function(){return this._canvas.getContext("2d")},CanvasHandler_prototype.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],CanvasHandler_prototype.DOMMouseScroll=function(evt){this.fire("mousewheel",evt)},CanvasHandler_prototype.mousemove=move("mousemove","mouseover","mouseout"),CanvasHandler_prototype.dragover=move("dragover","dragenter","dragleave"),CanvasHandler_prototype.mouseout=inactive("mouseout"),CanvasHandler_prototype.dragleave=inactive("dragleave"),CanvasHandler_prototype.mousedown=function(evt){this._down=this._active,this.fire("mousedown",evt)},CanvasHandler_prototype.click=function(evt){this._down===this._active&&(this.fire("click",evt),this._down=null)},CanvasHandler_prototype.touchstart=function(evt){this._touch=this.pickEvent(evt.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",evt,!0)},CanvasHandler_prototype.touchmove=function(evt){this.fire("touchmove",evt,!0)},CanvasHandler_prototype.touchend=function(evt){this.fire("touchend",evt,!0),this._touch=null},CanvasHandler_prototype.fire=function(type,evt,touch){var i,len,a=touch?this._touch:this._active,h=this._handlers[type];if(evt.vegaType=type,"click"===type&&a&&a.href?this.handleHref(evt,a,a.href):"mousemove"!==type&&type!==TooltipHideEvent||this.handleTooltip(evt,a,type!==TooltipHideEvent),h)for(i=0,len=h.length;i<len;++i)h[i].handler.call(this._obj,evt,a)},CanvasHandler_prototype.on=function(type,handler){var name=this.eventName(type),h=this._handlers;return this._handlerIndex(h[name],type,handler)<0&&(h[name]||(h[name]=[])).push({type:type,handler:handler}),this},CanvasHandler_prototype.off=function(type,handler){var name=this.eventName(type),h=this._handlers[name],i=this._handlerIndex(h,type,handler);return i>=0&&h.splice(i,1),this},CanvasHandler_prototype.pickEvent=function(evt){var p=util_point(evt,this._canvas),o=this._origin;return this.pick(this._scene,p[0],p[1],p[0]-o[0],p[1]-o[1])},CanvasHandler_prototype.pick=function(scene,x,y,gx,gy){var g=this.context();return src_marks[scene.marktype].pick.call(this,g,scene,x,y,gx,gy)};var pixelRatio=function devicePixelRatio(){return"undefined"!=typeof window&&window.devicePixelRatio||1}();function CanvasRenderer(loader){Renderer_Renderer.call(this,loader),this._redraw=!1,this._dirty=new Bounds}var CanvasRenderer_prototype=Object(vega_util.y)(CanvasRenderer,Renderer_Renderer),CanvasRenderer_base=Renderer_Renderer.prototype,CanvasRenderer_tempBounds=new Bounds;function CanvasRenderer_viewBounds(origin,width,height){return CanvasRenderer_tempBounds.set(0,0,width,height).translate(-origin[0],-origin[1])}function SVGHandler(loader,tooltip){Handler_Handler.call(this,loader,tooltip);var h=this;h._hrefHandler=listener(h,(function(evt,item){item&&item.href&&h.handleHref(evt,item,item.href)})),h._tooltipHandler=listener(h,(function(evt,item){h.handleTooltip(evt,item,evt.type!==TooltipHideEvent)}))}CanvasRenderer_prototype.initialize=function(el,width,height,origin,scaleFactor,options){return this._options=options,this._canvas=domCanvas(1,1,options&&options.type),el&&(domClear(el,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),CanvasRenderer_base.initialize.call(this,el,width,height,origin,scaleFactor)},CanvasRenderer_prototype.resize=function(width,height,origin,scaleFactor){return CanvasRenderer_base.resize.call(this,width,height,origin,scaleFactor),function(canvas,width,height,origin,scaleFactor,opt){var key,inDOM="undefined"!=typeof HTMLElement&&canvas instanceof HTMLElement&&null!=canvas.parentNode,context=canvas.getContext("2d"),ratio=inDOM?pixelRatio:scaleFactor;for(key in canvas.width=width*ratio,canvas.height=height*ratio,opt)context[key]=opt[key];inDOM&&1!==ratio&&(canvas.style.width=width+"px",canvas.style.height=height+"px"),context.pixelRatio=ratio,context.setTransform(ratio,0,0,ratio,ratio*origin[0],ratio*origin[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options&&this._options.context),this._redraw=!0,this},CanvasRenderer_prototype.canvas=function(){return this._canvas},CanvasRenderer_prototype.context=function(){return this._canvas?this._canvas.getContext("2d"):null},CanvasRenderer_prototype.dirty=function(item){var b=function CanvasRenderer_translate(bounds,group){if(null==group)return bounds;for(var b=CanvasRenderer_tempBounds.clear().union(bounds);null!=group;group=group.mark.group)b.translate(group.x||0,group.y||0);return b}(item.bounds,item.mark.group);this._dirty.union(b)},CanvasRenderer_prototype._render=function(scene){var g=this.context(),o=this._origin,w=this._width,h=this._height,b=this._dirty;return g.save(),this._redraw||b.empty()?(this._redraw=!1,b=CanvasRenderer_viewBounds(o,w,h).expand(1)):b=function clipToBounds(g,b,origin){return b.expand(1).round(),b.translate(-origin[0]%1,-origin[1]%1),g.beginPath(),g.rect(b.x1,b.y1,b.width(),b.height()),g.clip(),b}(g,b.intersect(CanvasRenderer_viewBounds(o,w,h)),o),this.clear(-o[0],-o[1],w,h),this.draw(g,scene,b),g.restore(),this._dirty.clear(),this},CanvasRenderer_prototype.draw=function(ctx,scene,bounds){var mark=src_marks[scene.marktype];scene.clip&&function(context,scene){var clip=scene.clip;context.save(),Object(vega_util.D)(clip)?(context.beginPath(),clip(context),context.clip()):clipGroup(context,scene.group)}(ctx,scene),mark.draw.call(this,ctx,scene,bounds),scene.clip&&ctx.restore()},CanvasRenderer_prototype.clear=function(x,y,w,h){var g=this.context();g.clearRect(x,y,w,h),null!=this._bgcolor&&(g.fillStyle=this._bgcolor,g.fillRect(x,y,w,h))};var SVGHandler_prototype=Object(vega_util.y)(SVGHandler,Handler_Handler);function listener(context,handler){return function(evt){var item=evt.target.__data__;evt.vegaType=evt.type,item=Array.isArray(item)?item[0]:item,handler.call(context._obj,evt,item)}}function openTag(tag,attr,raw){var key,val,s="<"+tag;if(attr)for(key in attr)null!=(val=attr[key])&&(s+=" "+key+'="'+val+'"');return raw&&(s+=" "+raw),s+">"}function closeTag(tag){return"</"+tag+">"}SVGHandler_prototype.initialize=function(el,origin,obj){var svg=this._svg;return svg&&(svg.removeEventListener("click",this._hrefHandler),svg.removeEventListener("mousemove",this._tooltipHandler),svg.removeEventListener(TooltipHideEvent,this._tooltipHandler)),this._svg=svg=el&&domFind(el,"svg"),svg&&(svg.addEventListener("click",this._hrefHandler),svg.addEventListener("mousemove",this._tooltipHandler),svg.addEventListener(TooltipHideEvent,this._tooltipHandler)),Handler_Handler.prototype.initialize.call(this,el,origin,obj)},SVGHandler_prototype.canvas=function(){return this._svg},SVGHandler_prototype.on=function(type,handler){var name=this.eventName(type),h=this._handlers;if(this._handlerIndex(h[name],type,handler)<0){var x={type:type,handler:handler,listener:listener(this,handler)};(h[name]||(h[name]=[])).push(x),this._svg&&this._svg.addEventListener(name,x.listener)}return this},SVGHandler_prototype.off=function(type,handler){var name=this.eventName(type),h=this._handlers[name],i=this._handlerIndex(h,type,handler);return i>=0&&(this._svg&&this._svg.removeEventListener(name,h[i].listener),h.splice(i,1)),this};var metadata={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},styles={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},styleProperties=Object.keys(styles),ns=metadata.xmlns;function SVGRenderer(loader){Renderer_Renderer.call(this,loader),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var SVGRenderer_prototype=Object(vega_util.y)(SVGRenderer,Renderer_Renderer),SVGRenderer_base=Renderer_Renderer.prototype;function updateGradient(el,grad,index){var i,n,stop;if("radial"===grad.gradient){var pt=domChild(el,index++,"pattern",ns);pt.setAttribute("id",patternPrefix+grad.id),pt.setAttribute("viewBox","0,0,1,1"),pt.setAttribute("width","100%"),pt.setAttribute("height","100%"),pt.setAttribute("preserveAspectRatio","xMidYMid slice"),(pt=domChild(pt,0,"rect",ns)).setAttribute("width","1"),pt.setAttribute("height","1"),pt.setAttribute("fill","url("+SVGRenderer_href()+"#"+grad.id+")"),(el=domChild(el,index++,"radialGradient",ns)).setAttribute("id",grad.id),el.setAttribute("fx",grad.x1),el.setAttribute("fy",grad.y1),el.setAttribute("fr",grad.r1),el.setAttribute("cx",grad.x2),el.setAttribute("cy",grad.y2),el.setAttribute("r",grad.r2)}else(el=domChild(el,index++,"linearGradient",ns)).setAttribute("id",grad.id),el.setAttribute("x1",grad.x1),el.setAttribute("x2",grad.x2),el.setAttribute("y1",grad.y1),el.setAttribute("y2",grad.y2);for(i=0,n=grad.stops.length;i<n;++i)(stop=domChild(el,i,"stop",ns)).setAttribute("offset",grad.stops[i].offset),stop.setAttribute("stop-color",grad.stops[i].color);return domClear(el,i),index}function updateClipping(el,clip,index){var mask;return(el=domChild(el,index,"clipPath",ns)).setAttribute("id",clip.id),clip.path?(mask=domChild(el,0,"path",ns)).setAttribute("d",clip.path):((mask=domChild(el,0,"rect",ns)).setAttribute("x",0),mask.setAttribute("y",0),mask.setAttribute("width",clip.width),mask.setAttribute("height",clip.height)),index+1}function dirtyParents(item,id){for(;item&&item.dirty!==id;item=item.mark.group){if(item.dirty=id,!item.mark||item.mark.dirty===id)return;item.mark.dirty=id}}function SVGRenderer_bind(item,el,sibling,tag,svg){var doc,node=item._svg;if(!node&&(node=domCreate(doc=el.ownerDocument,tag,ns),item._svg=node,item.mark&&(node.__data__=item,node.__values__={fill:"default"},"g"===tag))){var bg=domCreate(doc,"path",ns);bg.setAttribute("class","background"),node.appendChild(bg),bg.__data__=item;var fg=domCreate(doc,"g",ns);node.appendChild(fg),fg.__data__=item}return(node.ownerSVGElement!==svg||function siblingCheck(node,sibling){return node.parentNode&&node.parentNode.childNodes.length>1&&node.previousSibling!=sibling}(node,sibling))&&el.insertBefore(node,sibling?sibling.nextSibling:el.firstChild),node}SVGRenderer_prototype.initialize=function(el,width,height,padding){return el&&(this._svg=domChild(el,0,"svg",ns),this._svg.setAttribute("class","marks"),domClear(el,1),this._root=domChild(this._svg,0,"g",ns),domClear(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),SVGRenderer_base.initialize.call(this,el,width,height,padding)},SVGRenderer_prototype.background=function(bgcolor){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",bgcolor),SVGRenderer_base.background.apply(this,arguments)},SVGRenderer_prototype.resize=function(width,height,origin,scaleFactor){return SVGRenderer_base.resize.call(this,width,height,origin,scaleFactor),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},SVGRenderer_prototype.canvas=function(){return this._svg},SVGRenderer_prototype.svg=function(){if(!this._svg)return null;var attr={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var key in metadata)attr[key]=metadata[key];var bg=this._bgcolor?openTag("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+closeTag("rect"):"";return openTag("svg",attr)+bg+this._svg.innerHTML+closeTag("svg")},SVGRenderer_prototype._render=function(scene){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,scene),domClear(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},SVGRenderer_prototype.updateDefs=function(){var id,svg=this._svg,defs=this._defs,el=defs.el,index=0;for(id in defs.gradient)el||(defs.el=el=domChild(svg,0,"defs",ns)),index=updateGradient(el,defs.gradient[id],index);for(id in defs.clipping)el||(defs.el=el=domChild(svg,0,"defs",ns)),index=updateClipping(el,defs.clipping[id],index);el&&(0===index?(svg.removeChild(el),defs.el=null):domClear(el,index))},SVGRenderer_prototype._resetDefs=function(){var def=this._defs;def.gradient={},def.clipping={}},SVGRenderer_prototype.dirty=function(item){item.dirty!==this._dirtyID&&(item.dirty=this._dirtyID,this._dirty.push(item))},SVGRenderer_prototype.isDirty=function(item){return this._dirtyAll||!item._svg||item.dirty===this._dirtyID},SVGRenderer_prototype._dirtyCheck=function(){this._dirtyAll=!0;var items=this._dirty;if(!items.length||!this._dirtyID)return!0;var item,mark,type,mdef,i,n,o,id=++this._dirtyID;for(i=0,n=items.length;i<n;++i)(mark=(item=items[i]).mark).marktype!==type&&(type=mark.marktype,mdef=src_marks[type]),mark.zdirty&&mark.dirty!==id&&(this._dirtyAll=!1,dirtyParents(item,id),mark.items.forEach((function(i){i.dirty=id}))),mark.zdirty||(item.exit?(mdef.nested&&mark.items.length?(o=mark.items[0])._svg&&this._update(mdef,o._svg,o):item._svg&&(o=item._svg.parentNode)&&o.removeChild(item._svg),item._svg=null):(item=mdef.nested?mark.items[0]:item)._update!==id&&(item._svg&&item._svg.ownerSVGElement?this._update(mdef,item._svg,item):(this._dirtyAll=!1,dirtyParents(item,id)),item._update=id));return!this._dirtyAll},SVGRenderer_prototype.draw=function(el,scene,prev){if(!this.isDirty(scene))return scene._svg;var parent,renderer=this,svg=this._svg,mdef=src_marks[scene.marktype],events=!1===scene.interactive?"none":null,isGroup="g"===mdef.tag,sibling=null,i=0;function process(item){var dirty=renderer.isDirty(item),node=SVGRenderer_bind(item,parent,sibling,mdef.tag,svg);dirty&&(renderer._update(mdef,node,item),isGroup&&function recurse(renderer,el,group){el=el.lastChild;var prev,idx=0;visit_visit(group,(function(item){prev=renderer.draw(el,item,prev),++idx})),domClear(el,1+idx)}(renderer,node,item)),sibling=node,++i}return(parent=SVGRenderer_bind(scene,el,prev,"g",svg)).setAttribute("class",cssClass(scene)),isGroup||parent.style.setProperty("pointer-events",events),scene.clip?parent.setAttribute("clip-path",svg_clip(renderer,scene,scene.group)):parent.removeAttribute("clip-path"),mdef.nested?scene.items.length&&process(scene.items[0]):visit_visit(scene,process),domClear(parent,i),parent};var SVGRenderer_element=null,SVGRenderer_values=null,mark_extras={group:function(mdef,el,item){SVGRenderer_values=el.__values__,SVGRenderer_element=el.childNodes[1],mdef.foreground(SVGRenderer_emit,item,this),SVGRenderer_element=el.childNodes[0],mdef.background(SVGRenderer_emit,item,this);var value=!1===item.mark.interactive?"none":null;value!==SVGRenderer_values.events&&(SVGRenderer_element.style.setProperty("pointer-events",value),SVGRenderer_values.events=value)},image:function(mdef,el,item){!1===item.smooth?(setStyle(el,"image-rendering","optimizeSpeed"),setStyle(el,"image-rendering","pixelated")):setStyle(el,"image-rendering",null)},text:function(mdef,el,item){var key,value,doc,lh,tl=textLines(item);Object(vega_util.A)(tl)?(key=(value=tl.map(_=>textValue(item,_))).join("\n"))!==SVGRenderer_values.text&&(domClear(el,0),doc=el.ownerDocument,lh=lineHeight(item),value.forEach((t,i)=>{const ts=domCreate(doc,"tspan",ns);ts.__data__=item,ts.textContent=t,i&&(ts.setAttribute("x",0),ts.setAttribute("dy",lh)),el.appendChild(ts)}),SVGRenderer_values.text=key):(value=textValue(item,tl))!==SVGRenderer_values.text&&(el.textContent=value,SVGRenderer_values.text=value),setStyle(el,"font-family",fontFamily(item)),setStyle(el,"font-size",text_fontSize(item)+"px"),setStyle(el,"font-style",item.fontStyle),setStyle(el,"font-variant",item.fontVariant),setStyle(el,"font-weight",item.fontWeight)}};function setStyle(el,name,value){value!==SVGRenderer_values[name]&&(null==value?el.style.removeProperty(name):el.style.setProperty(name,value+""),SVGRenderer_values[name]=value)}function SVGRenderer_emit(name,value,ns){value!==SVGRenderer_values[name]&&(null!=value?ns?SVGRenderer_element.setAttributeNS(ns,name,value):SVGRenderer_element.setAttribute(name,value):ns?SVGRenderer_element.removeAttributeNS(ns,name):SVGRenderer_element.removeAttribute(name),SVGRenderer_values[name]=value)}function SVGRenderer_href(){var loc;return"undefined"==typeof window?"":(loc=window.location).hash?loc.href.slice(0,-loc.hash.length):loc.href}function SVGStringRenderer(loader){Renderer_Renderer.call(this,loader),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}SVGRenderer_prototype._update=function(mdef,el,item){SVGRenderer_element=el,SVGRenderer_values=el.__values__,mdef.attr(SVGRenderer_emit,item,this);var extra=mark_extras[mdef.type];extra&&extra.call(this,mdef,el,item),this.style(SVGRenderer_element,item)},SVGRenderer_prototype.style=function(el,o){var i,n,prop,name,value;if(null!=o)for(i=0,n=styleProperties.length;i<n;++i)value=o[prop=styleProperties[i]],"font"===prop&&(value=fontFamily(o)),value!==SVGRenderer_values[prop]&&(name=styles[prop],null==value?"fill"===name?el.style.setProperty(name,"none"):el.style.removeProperty(name):(isGradient(value)&&(value=gradientRef(value,this._defs.gradient,SVGRenderer_href())),el.style.setProperty(name,value+"")),SVGRenderer_values[prop]=value)};var SVGStringRenderer_object,SVGStringRenderer_prototype=Object(vega_util.y)(SVGStringRenderer,Renderer_Renderer),SVGStringRenderer_base=Renderer_Renderer.prototype;function SVGStringRenderer_emit(name,value,ns,prefixed){SVGStringRenderer_object[prefixed||name]=value}function applyStyles(o,mark,tag,defs){if(null==o)return"";var i,n,prop,name,value,s="";for("bgrect"===tag&&!1===mark.interactive&&(s+="pointer-events: none; "),"image"===tag&&!1===o.smooth&&(s+="image-rendering: optimizeSpeed; image-rendering: pixelated; "),"text"===tag&&(s+="font-family: "+fontFamily(o)+"; ",s+="font-size: "+text_fontSize(o)+"px; ",o.fontStyle&&(s+="font-style: "+o.fontStyle+"; "),o.fontVariant&&(s+="font-variant: "+o.fontVariant+"; "),o.fontWeight&&(s+="font-weight: "+o.fontWeight+"; ")),i=0,n=styleProperties.length;i<n;++i)prop=styleProperties[i],name=styles[prop],null==(value=o[prop])?"fill"===name&&(s+="fill: none; "):"transparent"!==value||"fill"!==name&&"stroke"!==name?(isGradient(value)&&(value=gradientRef(value,defs.gradient,"")),s+=name+": "+value+"; "):s+=name+": none; ";return s?'style="'+s.trim()+'"':null}function escape_text(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}SVGStringRenderer_prototype.resize=function(width,height,origin,scaleFactor){SVGStringRenderer_base.resize.call(this,width,height,origin,scaleFactor);var o=this._origin,t=this._text,attr={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var key in metadata)attr[key]=metadata[key];t.head=openTag("svg",attr);var bg=this._bgcolor;return"transparent"!==bg&&"none"!==bg||(bg=null),t.bg=bg?openTag("rect",{width:this._width,height:this._height,style:"fill: "+bg+";"})+closeTag("rect"):"",t.root=openTag("g",{transform:"translate("+o+")"}),t.foot=closeTag("g")+closeTag("svg"),this},SVGStringRenderer_prototype.background=function(){var rv=SVGStringRenderer_base.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),rv},SVGStringRenderer_prototype.svg=function(){var t=this._text;return t.head+t.bg+t.defs+t.root+t.body+t.foot},SVGStringRenderer_prototype._render=function(scene){return this._text.body=this.mark(scene),this._text.defs=this.buildDefs(),this},SVGStringRenderer_prototype.buildDefs=function(){var i,id,def,tag,stops,all=this._defs,defs="";for(id in all.gradient){for(stops=(def=all.gradient[id]).stops,"radial"===def.gradient?(defs+=openTag(tag="pattern",{id:patternPrefix+id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),defs+=openTag("rect",{width:"1",height:"1",fill:"url(#"+id+")"})+closeTag("rect"),defs+=closeTag(tag),defs+=openTag(tag="radialGradient",{id:id,fx:def.x1,fy:def.y1,fr:def.r1,cx:def.x2,cy:def.y2,r:def.r2})):defs+=openTag(tag="linearGradient",{id:id,x1:def.x1,x2:def.x2,y1:def.y1,y2:def.y2}),i=0;i<stops.length;++i)defs+=openTag("stop",{offset:stops[i].offset,"stop-color":stops[i].color})+closeTag("stop");defs+=closeTag(tag)}for(id in all.clipping)def=all.clipping[id],defs+=openTag("clipPath",{id:id}),def.path?defs+=openTag("path",{d:def.path})+closeTag("path"):defs+=openTag("rect",{x:0,y:0,width:def.width,height:def.height})+closeTag("rect"),defs+=closeTag("clipPath");return defs.length>0?openTag("defs")+defs+closeTag("defs"):""},SVGStringRenderer_prototype.attributes=function(attr,item){return SVGStringRenderer_object={},attr(SVGStringRenderer_emit,item,this),SVGStringRenderer_object},SVGStringRenderer_prototype.href=function(item){var attr,that=this,href=item.href;if(href){if(attr=that._hrefs&&that._hrefs[href])return attr;that.sanitizeURL(href).then((function(attr){attr["xlink:href"]=attr.href,attr.href=null,(that._hrefs||(that._hrefs={}))[href]=attr}))}return null},SVGStringRenderer_prototype.mark=function(scene){var style,renderer=this,mdef=src_marks[scene.marktype],tag=mdef.tag,defs=this._defs,str="";function process(item){var href=renderer.href(item);if(href&&(str+=openTag("a",href)),style="g"!==tag?applyStyles(item,scene,tag,defs):null,str+=openTag(tag,renderer.attributes(mdef.attr,item),style),"text"===tag){const tl=textLines(item);if(Object(vega_util.A)(tl)){const attrs={x:0,dy:lineHeight(item)};for(let i=0;i<tl.length;++i)str+=openTag("tspan",i?attrs:null)+escape_text(textValue(item,tl[i]))+closeTag("tspan")}else str+=escape_text(textValue(item,tl))}else"g"===tag&&(str+=openTag("path",renderer.attributes(mdef.background,item),applyStyles(item,scene,"bgrect",defs))+closeTag("path"),str+=openTag("g",renderer.attributes(mdef.foreground,item))+renderer.markGroup(item)+closeTag("g"));str+=closeTag(tag),href&&(str+=closeTag("a"))}return"g"!==tag&&!1===scene.interactive&&(style='style="pointer-events: none;"'),str+=openTag("g",{class:cssClass(scene),"clip-path":scene.clip?svg_clip(renderer,scene,scene.group):null},style),mdef.nested?scene.items&&scene.items.length&&process(scene.items[0]):visit_visit(scene,process),str+closeTag("g")},SVGStringRenderer_prototype.markGroup=function(scene){var renderer=this,str="";return visit_visit(scene,(function(item){str+=renderer.mark(item)})),str};var RenderType={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},modules={};function renderModule(name,_){return name=String(name||"").toLowerCase(),arguments.length>1?(modules[name]=_,this):modules[name]}function intersect_intersect(scene,bounds,filter){const hits=[],box=(new Bounds).union(bounds),type=scene.marktype;return type?intersectMark(scene,box,filter,hits):"group"===type?intersectGroup(scene,box,filter,hits):Object(vega_util.n)("Intersect scene must be mark node or group item.")}function intersectMark(mark,box,filter,hits){if(function visitMark(mark,box,filter){return mark.bounds&&box.intersects(mark.bounds)&&("group"===mark.marktype||!1!==mark.interactive&&(!filter||filter(mark)))}(mark,box,filter)){const items=mark.items,type=mark.marktype,n=items.length;let i=0;if("group"===type)for(;i<n;++i)intersectGroup(items[i],box,filter,hits);else for(const test=src_marks[type].isect;i<n;++i){let item=items[i];intersectItem(item,box,test)&&hits.push(item)}}return hits}function intersectGroup(group,box,filter,hits){filter&&filter(group.mark)&&intersectItem(group,box,src_marks.group.isect)&&hits.push(group);const marks=group.items,n=marks&&marks.length;if(n){const x=group.x||0,y=group.y||0;box.translate(-x,-y);for(let i=0;i<n;++i)intersectMark(marks[i],box,filter,hits);box.translate(x,y)}return hits}function intersectItem(item,box,test){const bounds=item.bounds;return box.encloses(bounds)||box.intersects(bounds)&&test(item,box)}modules.canvas=modules.png={renderer:CanvasRenderer,headless:CanvasRenderer,handler:CanvasHandler},modules.svg={renderer:SVGRenderer,headless:SVGStringRenderer,handler:SVGHandler},modules.none={};var clipBounds=new Bounds,boundClip=function(mark){var clip=mark.clip;if(Object(vega_util.D)(clip))clip(boundContext_context(clipBounds.clear()));else{if(!clip)return;clipBounds.set(0,0,mark.group.width,mark.group.height)}mark.bounds.intersect(clipBounds)},TOLERANCE=1e-9;function sceneEqual(a,b,key){return a===b||("path"===key?pathEqual(a,b):a instanceof Date&&b instanceof Date?+a==+b:Object(vega_util.E)(a)&&Object(vega_util.E)(b)?Math.abs(a-b)<=TOLERANCE:a&&b&&(Object(vega_util.F)(a)||Object(vega_util.F)(b))?null!=a&&null!=b&&function objectEqual(a,b){var key,i,ka=Object.keys(a),kb=Object.keys(b);if(ka.length!==kb.length)return!1;for(ka.sort(),kb.sort(),i=ka.length-1;i>=0;i--)if(ka[i]!=kb[i])return!1;for(i=ka.length-1;i>=0;i--)if(key=ka[i],!sceneEqual(a[key],b[key],key))return!1;return typeof a==typeof b}(a,b):a==b)}function pathEqual(a,b){return sceneEqual(path_parse(a),path_parse(b))}function Bound(params){Transform.call(this,null,params)}function Bound_boundItem(item,bound,opt){return bound(item.bounds.clear(),item,opt)}Object(vega_util.y)(Bound,Transform).transform=function(_,pulse){var rebound,view=pulse.dataflow,mark=_.mark,type=mark.marktype,entry=src_marks[type],bound=entry.bound,markBounds=mark.bounds;if(entry.nested)mark.items.length&&view.dirty(mark.items[0]),markBounds=Bound_boundItem(mark,bound),mark.items.forEach((function(item){item.bounds.clear().union(markBounds)}));else if(type===Group||_.modified())switch(pulse.visit(pulse.MOD,(function(item){view.dirty(item)})),markBounds.clear(),mark.items.forEach((function(item){markBounds.union(Bound_boundItem(item,bound))})),mark.role){case AxisRole:case LegendRole:case TitleRole:pulse.reflow()}else rebound=pulse.changed(pulse.REM),pulse.visit(pulse.ADD,(function(item){markBounds.union(Bound_boundItem(item,bound))})),pulse.visit(pulse.MOD,(function(item){rebound=rebound||markBounds.alignsWith(item.bounds),view.dirty(item),markBounds.union(Bound_boundItem(item,bound))})),rebound&&(markBounds.clear(),mark.items.forEach((function(item){markBounds.union(item.bounds)})));return boundClip(mark),pulse.modifies("bounds")};var COUNTER_NAME=":vega_identifier:";function Identifier(params){Transform.call(this,0,params)}function Mark(params){Transform.call(this,null,params)}function Overlap(params){Transform.call(this,null,params)}Identifier.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},Object(vega_util.y)(Identifier,Transform).transform=function(_,pulse){var counter=function getCounter(view){var counter=view._signals[COUNTER_NAME];counter||(view._signals[COUNTER_NAME]=counter=view.add(0));return counter}(pulse.dataflow),id=counter.value,as=_.as;return pulse.visit(pulse.ADD,(function(t){t[as]||(t[as]=++id)})),counter.set(this.value=id),pulse},Object(vega_util.y)(Mark,Transform).transform=function(_,pulse){var mark=this.value;mark||((mark=pulse.dataflow.scenegraph().mark(_.markdef,function Mark_lookup(_){var g=_.groups,p=_.parent;return g&&1===g.size?g.get(Object.keys(g.object)[0]):g&&p?g.lookup(p):null}(_),_.index)).group.context=_.context,_.context.group||(_.context.group=mark.group),mark.source=this.source,mark.clip=_.clip,mark.interactive=_.interactive,this.value=mark);var Init=mark.marktype===Group?GroupItem:Item;return pulse.visit(pulse.ADD,(function(item){Init.call(item,mark)})),(_.modified("clip")||_.modified("interactive"))&&(mark.clip=_.clip,mark.interactive=!!_.interactive,mark.zdirty=!0,pulse.reflow()),mark.items=pulse.source,pulse};var Overlap_prototype=Object(vega_util.y)(Overlap,Transform),methods={parity:function(items){return items.filter((item,i)=>i%2?item.opacity=0:1)},greedy:function(items,sep){var a;return items.filter((b,i)=>i&&Overlap_intersect(a.bounds,b.bounds,sep)?b.opacity=0:(a=b,1))}};function Overlap_intersect(a,b,sep){return sep>Math.max(b.x1-a.x2,a.x1-b.x2,b.y1-a.y2,a.y1-b.y2)}function hasOverlap(items,pad){for(var b,i=1,n=items.length,a=items[0].bounds;i<n;a=b,++i)if(Overlap_intersect(a,b=items[i].bounds,pad))return!0}function hasBounds(item){var b=item.bounds;return b.width()>1&&b.height()>1}function Overlap_reset(source){return source.forEach(item=>item.opacity=1),source}function Overlap_reflow(pulse,_){return pulse.reflow(_.modified()).modifies("opacity")}function Render(params){Transform.call(this,null,params)}Overlap_prototype.transform=function(_,pulse){var items,test,bounds,reduce=methods[_.method]||methods.parity,source=pulse.materialize(pulse.SOURCE).source,sep=_.separation||0;if(source&&source.length){if(!_.method)return _.modified("method")&&(Overlap_reset(source),pulse=Overlap_reflow(pulse,_)),pulse;if(_.sort&&(source=source.slice().sort(_.sort)),items=Overlap_reset(source=source.filter(hasBounds)),pulse=Overlap_reflow(pulse,_),items.length>=3&&hasOverlap(items,sep)){do{items=reduce(items,sep)}while(items.length>=3&&hasOverlap(items,sep));items.length<3&&!Object(vega_util.T)(source).opacity&&(items.length>1&&(Object(vega_util.T)(items).opacity=0),Object(vega_util.T)(source).opacity=1)}return _.boundScale&&_.boundTolerance>=0&&(test=function boundTest(scale,orient,tolerance){var range=scale.range(),b=new Bounds;return orient===Top||orient===Bottom?b.set(range[0],-1/0,range[1],1/0):b.set(-1/0,range[0],1/0,range[1]),b.expand(tolerance||1),item=>b.encloses(item.bounds)}(_.boundScale,_.boundOrient,+_.boundTolerance),source.forEach(item=>{test(item)||(item.opacity=0)})),bounds=items[0].mark.bounds.clear(),source.forEach(item=>{item.opacity&&bounds.union(item.bounds)}),pulse}},Object(vega_util.y)(Render,Transform).transform=function(_,pulse){var view=pulse.dataflow;if(pulse.visit(pulse.ALL,(function(item){view.dirty(item)})),pulse.fields&&pulse.fields.zindex){var item=pulse.source&&pulse.source[0];item&&(item.mark.zdirty=!0)}};const util_tempBounds=new Bounds;function util_set(item,property,value){return item[property]===value?0:(item[property]=value,1)}function isYAxis(mark){var orient=mark.items[0].datum.orient;return orient===Left||orient===Right}function axisLayout(view,axis,width,height){var i,s,item=axis.items[0],datum=item.datum,orient=datum.orient,delta=null!=datum.translate?datum.translate:.5,indices=function axisIndices(datum){var index=+datum.grid;return[datum.ticks?index++:-1,datum.labels?index++:-1,index+ +datum.domain]}(datum),range=item.range,offset=item.offset,position=item.position,minExtent=item.minExtent,maxExtent=item.maxExtent,title=datum.title&&item.items[indices[2]].items[0],titlePadding=item.titlePadding,bounds=item.bounds,dl=title&&multiLineOffset(title),x=0,y=0;switch(util_tempBounds.clear().union(bounds),bounds.clear(),(i=indices[0])>-1&&bounds.union(item.items[i].bounds),(i=indices[1])>-1&&bounds.union(item.items[i].bounds),orient){case Top:x=position||0,y=-offset,s=Math.max(minExtent,Math.min(maxExtent,-bounds.y1)),title&&(s=axisTitleLayout(view,title,s,titlePadding,dl,0,-1,bounds)),bounds.add(0,-s).add(range,0);break;case Left:x=-offset,y=position||0,s=Math.max(minExtent,Math.min(maxExtent,-bounds.x1)),title&&(s=axisTitleLayout(view,title,s,titlePadding,dl,1,-1,bounds)),bounds.add(-s,0).add(0,range);break;case Right:x=width+offset,y=position||0,s=Math.max(minExtent,Math.min(maxExtent,bounds.x2)),title&&(s=axisTitleLayout(view,title,s,titlePadding,dl,1,1,bounds)),bounds.add(0,0).add(s,range);break;case Bottom:x=position||0,y=height+offset,s=Math.max(minExtent,Math.min(maxExtent,bounds.y2)),title&&(s=axisTitleLayout(view,title,s,titlePadding,0,0,1,bounds)),bounds.add(0,0).add(range,s);break;default:x=item.x,y=item.y}return boundStroke(bounds.translate(x,y),item),util_set(item,"x",x+delta)|util_set(item,"y",y+delta)&&(item.bounds=util_tempBounds,view.dirty(item),item.bounds=bounds,view.dirty(item)),item.mark.bounds.clear().union(bounds)}function axisTitleLayout(view,title,offset,pad,dl,isYAxis,sign,bounds){var b=title.bounds,dx=0,dy=0;return title.auto?(view.dirty(title),offset+=pad,isYAxis?dx=(title.x||0)-(title.x=sign*(offset+dl)):dy=(title.y||0)-(title.y=sign*(offset+dl)),title.mark.bounds.clear().union(b.translate(-dx,-dy)),view.dirty(title),isYAxis?(bounds.add(0,b.y1).add(0,b.y2),offset+=b.width()):(bounds.add(b.x1,0).add(b.x2,0),offset+=b.height())):bounds.union(b),offset}function bboxFlush(item){return(new Bounds).set(0,0,item.width||0,item.height||0)}function bboxFull(item){var b=item.bounds.clone();return b.empty()?b.set(0,0,0,0):b.translate(-(item.x||0),-(item.y||0))}function grid_get(opt,key,d){var v=Object(vega_util.F)(opt)?opt[key]:opt;return null!=v?v:void 0!==d?d:0}function offsetValue(v){return v<0?Math.ceil(-v):0}function gridLayout(view,groups,opt){var m,i,c,r,b,g,px,py,x,y,offset,dirty=!opt.nodirty,bbox=opt.bounds===Flush?bboxFlush:bboxFull,bounds=util_tempBounds.set(0,0,0,0),alignCol=grid_get(opt.align,Column),alignRow=grid_get(opt.align,Row),padCol=grid_get(opt.padding,Column),padRow=grid_get(opt.padding,Row),ncols=opt.columns||groups.length,nrows=ncols<0?1:Math.ceil(groups.length/ncols),n=groups.length,xOffset=Array(n),xExtent=Array(ncols),xMax=0,yOffset=Array(n),yExtent=Array(nrows),yMax=0,dx=Array(n),dy=Array(n),boxes=Array(n);for(i=0;i<ncols;++i)xExtent[i]=0;for(i=0;i<nrows;++i)yExtent[i]=0;for(i=0;i<n;++i)g=groups[i],b=boxes[i]=bbox(g),g.x=g.x||0,dx[i]=0,g.y=g.y||0,dy[i]=0,c=i%ncols,r=~~(i/ncols),xMax=Math.max(xMax,px=Math.ceil(b.x2)),yMax=Math.max(yMax,py=Math.ceil(b.y2)),xExtent[c]=Math.max(xExtent[c],px),yExtent[r]=Math.max(yExtent[r],py),xOffset[i]=padCol+offsetValue(b.x1),yOffset[i]=padRow+offsetValue(b.y1),dirty&&view.dirty(groups[i]);for(i=0;i<n;++i)i%ncols==0&&(xOffset[i]=0),i<ncols&&(yOffset[i]=0);if(alignCol===Each)for(c=1;c<ncols;++c){for(offset=0,i=c;i<n;i+=ncols)offset<xOffset[i]&&(offset=xOffset[i]);for(i=c;i<n;i+=ncols)xOffset[i]=offset+xExtent[c-1]}else if(alignCol===All){for(offset=0,i=0;i<n;++i)i%ncols&&offset<xOffset[i]&&(offset=xOffset[i]);for(i=0;i<n;++i)i%ncols&&(xOffset[i]=offset+xMax)}else for(alignCol=!1,c=1;c<ncols;++c)for(i=c;i<n;i+=ncols)xOffset[i]+=xExtent[c-1];if(alignRow===Each)for(r=1;r<nrows;++r){for(offset=0,m=(i=r*ncols)+ncols;i<m;++i)offset<yOffset[i]&&(offset=yOffset[i]);for(i=r*ncols;i<m;++i)yOffset[i]=offset+yExtent[r-1]}else if(alignRow===All){for(offset=0,i=ncols;i<n;++i)offset<yOffset[i]&&(offset=yOffset[i]);for(i=ncols;i<n;++i)yOffset[i]=offset+yMax}else for(alignRow=!1,r=1;r<nrows;++r)for(m=(i=r*ncols)+ncols;i<m;++i)yOffset[i]+=yExtent[r-1];for(x=0,i=0;i<n;++i)x=xOffset[i]+(i%ncols?x:0),dx[i]+=x-groups[i].x;for(c=0;c<ncols;++c)for(y=0,i=c;i<n;i+=ncols)y+=yOffset[i],dy[i]+=y-groups[i].y;if(alignCol&&grid_get(opt.center,Column)&&nrows>1)for(i=0;i<n;++i)(x=(b=alignCol===All?xMax:xExtent[i%ncols])-boxes[i].x2-groups[i].x-dx[i])>0&&(dx[i]+=x/2);if(alignRow&&grid_get(opt.center,Row)&&1!==ncols)for(i=0;i<n;++i)(y=(b=alignRow===All?yMax:yExtent[~~(i/ncols)])-boxes[i].y2-groups[i].y-dy[i])>0&&(dy[i]+=y/2);for(i=0;i<n;++i)bounds.union(boxes[i].translate(dx[i],dy[i]));switch(x=grid_get(opt.anchor,constants_X),y=grid_get(opt.anchor,constants_Y),grid_get(opt.anchor,Column)){case End:x-=bounds.width();break;case Middle:x-=bounds.width()/2}switch(grid_get(opt.anchor,Row)){case End:y-=bounds.height();break;case Middle:y-=bounds.height()/2}for(x=Math.round(x),y=Math.round(y),bounds.clear(),i=0;i<n;++i)groups[i].mark.bounds.clear();for(i=0;i<n;++i)(g=groups[i]).x+=dx[i]+=x,g.y+=dy[i]+=y,bounds.union(g.mark.bounds.union(g.bounds.translate(dx[i],dy[i]))),dirty&&view.dirty(g);return bounds}function trellisLayout(view,group,opt){var x,y,x2,y2,anchor,band,offset,views=function gridLayoutGroups(group){for(var mark,items,groups=group.items,n=groups.length,i=0,views={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};i<n;++i)if(items=(mark=groups[i]).items,mark.marktype===Group)switch(mark.role){case AxisRole:case LegendRole:case TitleRole:break;case RowHeader:views.rowheaders.push(...items);break;case RowFooter:views.rowfooters.push(...items);break;case ColHeader:views.colheaders.push(...items);break;case ColFooter:views.colfooters.push(...items);break;case RowTitle:views.rowtitle=items[0];break;case ColTitle:views.coltitle=items[0];break;default:views.marks.push(...items)}return views}(group),groups=views.marks,bbox=opt.bounds===Flush?boundFlush:boundFull,off=opt.offset,ncols=opt.columns||groups.length,nrows=ncols<0?1:Math.ceil(groups.length/ncols),cells=nrows*ncols;const bounds=gridLayout(view,groups,opt);views.rowheaders&&(band=grid_get(opt.headerBand,Row,null),x=grid_layoutHeaders(view,views.rowheaders,groups,ncols,nrows,-grid_get(off,"rowHeader"),grid_min,0,bbox,"x1",0,ncols,1,band)),views.colheaders&&(band=grid_get(opt.headerBand,Column,null),y=grid_layoutHeaders(view,views.colheaders,groups,ncols,ncols,-grid_get(off,"columnHeader"),grid_min,1,bbox,"y1",0,1,ncols,band)),views.rowfooters&&(band=grid_get(opt.footerBand,Row,null),x2=grid_layoutHeaders(view,views.rowfooters,groups,ncols,nrows,grid_get(off,"rowFooter"),grid_max,0,bbox,"x2",ncols-1,ncols,1,band)),views.colfooters&&(band=grid_get(opt.footerBand,Column,null),y2=grid_layoutHeaders(view,views.colfooters,groups,ncols,ncols,grid_get(off,"columnFooter"),grid_max,1,bbox,"y2",cells-ncols,1,ncols,band)),views.rowtitle&&(anchor=grid_get(opt.titleAnchor,Row),offset=grid_get(off,"rowTitle"),offset=anchor===End?x2+offset:x-offset,band=grid_get(opt.titleBand,Row,.5),layoutTitle(view,views.rowtitle,offset,0,bounds,band)),views.coltitle&&(anchor=grid_get(opt.titleAnchor,Column),offset=grid_get(off,"columnTitle"),offset=anchor===End?y2+offset:y-offset,band=grid_get(opt.titleBand,Column,.5),layoutTitle(view,views.coltitle,offset,1,bounds,band))}function boundFlush(item,field){return"x1"===field?item.x||0:"y1"===field?item.y||0:"x2"===field?(item.x||0)+(item.width||0):"y2"===field?(item.y||0)+(item.height||0):void 0}function boundFull(item,field){return item.bounds[field]}function grid_min(a,b){return Math.floor(Math.min(a,b))}function grid_max(a,b){return Math.ceil(Math.max(a,b))}function grid_layoutHeaders(view,headers,groups,ncols,limit,offset,agg,isX,bound,bf,start,stride,back,band){var i,j,k,m,b,h,g,x,y,n=groups.length,init=0,edge=0;if(!n)return init;for(i=start;i<n;i+=stride)groups[i]&&(init=agg(init,bound(groups[i],bf)));if(!headers.length)return init;for(headers.length>limit&&(view.warn("Grid headers exceed limit: "+limit),headers=headers.slice(0,limit)),init+=offset,j=0,m=headers.length;j<m;++j)view.dirty(headers[j]),headers[j].mark.bounds.clear();for(i=start,j=0,m=headers.length;j<m;++j,i+=stride){for(b=(h=headers[j]).mark.bounds,k=i;k>=0&&null==(g=groups[k]);k-=back);isX?(x=null==band?g.x:Math.round(g.bounds.x1+band*g.bounds.width()),y=init):(x=init,y=null==band?g.y:Math.round(g.bounds.y1+band*g.bounds.height())),b.union(h.bounds.translate(x-(h.x||0),y-(h.y||0))),h.x=x,h.y=y,view.dirty(h),edge=agg(edge,b[bf])}return edge}function layoutTitle(view,g,offset,isX,bounds,band){if(g){view.dirty(g);var x=offset,y=offset;isX?x=Math.round(bounds.x1+band*bounds.width()):y=Math.round(bounds.y1+band*bounds.height()),g.bounds.translate(x-(g.x||0),y-(g.y||0)),g.mark.bounds.clear().union(g.bounds),g.x=x,g.y=y,view.dirty(g)}}function legendParams(g,orient,config,xb,yb,w,h){const _=function legend_lookup(config,orient){const opt=config[orient]||{};return(key,d)=>null!=opt[key]?opt[key]:null!=config[key]?config[key]:d}(config,orient),offset=function offsets(legends,value){var max=-1/0;return legends.forEach(item=>{null!=item.offset&&(max=Math.max(max,item.offset))}),max>-1/0?max:value}(g,_("offset",0)),anchor=_("anchor",Start),mult=anchor===End?1:anchor===Middle?.5:0,p={align:Each,bounds:_("bounds",Flush),columns:"vertical"===_("direction")?1:g.length,padding:_("margin",8),center:_("center"),nodirty:!0};switch(orient){case Left:p.anchor={x:Math.floor(xb.x1)-offset,column:End,y:mult*(h||xb.height()+2*xb.y1),row:anchor};break;case Right:p.anchor={x:Math.ceil(xb.x2)+offset,y:mult*(h||xb.height()+2*xb.y1),row:anchor};break;case Top:p.anchor={y:Math.floor(yb.y1)-offset,row:End,x:mult*(w||yb.width()+2*yb.x1),column:anchor};break;case Bottom:p.anchor={y:Math.ceil(yb.y2)+offset,x:mult*(w||yb.width()+2*yb.x1),column:anchor};break;case TopLeft:p.anchor={x:offset,y:offset};break;case TopRight:p.anchor={x:w-offset,y:offset,column:End};break;case BottomLeft:p.anchor={x:offset,y:h-offset,row:End};break;case BottomRight:p.anchor={x:w-offset,y:h-offset,column:End,row:End}}return p}function legendLayout(view,legend){var w,h,item=legend.items[0],datum=item.datum,orient=item.orient,bounds=item.bounds,x=item.x,y=item.y;return item._bounds?item._bounds.clear().union(bounds):item._bounds=bounds.clone(),bounds.clear(),function legendGroupLayout(view,item,entry){var pad=item.padding,ex=pad-entry.x,ey=pad-entry.y;if(item.datum.title){var title=item.items[1].items[0],anchor=title.anchor,tpad=item.titlePadding||0,tx=pad-title.x,ty=pad-title.y;switch(title.orient){case Left:ex+=Math.ceil(title.bounds.width())+tpad;break;case Right:case Bottom:break;default:ey+=title.bounds.height()+tpad}switch((ex||ey)&&legend_translate(view,entry,ex,ey),title.orient){case Left:ty+=legendTitleOffset(item,entry,title,anchor,1,1);break;case Right:tx+=legendTitleOffset(item,entry,title,End,0,0)+tpad,ty+=legendTitleOffset(item,entry,title,anchor,1,1);break;case Bottom:tx+=legendTitleOffset(item,entry,title,anchor,0,0),ty+=legendTitleOffset(item,entry,title,End,-1,0,1)+tpad;break;default:tx+=legendTitleOffset(item,entry,title,anchor,0,0)}(tx||ty)&&legend_translate(view,title,tx,ty),(tx=Math.round(title.bounds.x1-pad))<0&&(legend_translate(view,entry,-tx,0),legend_translate(view,title,-tx,0))}else(ex||ey)&&legend_translate(view,entry,ex,ey)}(view,item,item.items[0].items[0]),bounds=function legendBounds(item,b){return item.items.forEach(_=>b.union(_.bounds)),b.x1=item.padding,b.y1=item.padding,b}(item,bounds),w=2*item.padding,h=2*item.padding,bounds.empty()||(w=Math.ceil(bounds.width()+w),h=Math.ceil(bounds.height()+h)),datum.type===Symbols&&function legendEntryLayout(entries){var widths=entries.reduce((function(w,g){return w[g.column]=Math.max(g.bounds.x2-g.x,w[g.column]||0),w}),{});entries.forEach((function(g){g.width=widths[g.column],g.height=g.bounds.y2-g.y}))}(item.items[0].items[0].items[0].items),orient!==None&&(item.x=x=0,item.y=y=0),item.width=w,item.height=h,boundStroke(bounds.set(x,y,x+w,y+h),item),item.mark.bounds.clear().union(bounds),item}function legendTitleOffset(item,entry,title,anchor,y,lr,noBar){const grad="symbol"!==item.datum.type,vgrad=title.datum.vgrad,s=(!grad||!lr&&vgrad||noBar?entry:entry.items[0]).bounds[y?"y2":"x2"]-item.padding,u=vgrad&&lr?s:0,v=vgrad&&lr?0:s,o=y<=0?0:multiLineOffset(title);return Math.round(anchor===Start?u:anchor===End?v-o:.5*(s-o))}function legend_translate(view,item,dx,dy){item.x+=dx,item.y+=dy,item.bounds.translate(dx,dy),item.mark.bounds.translate(dx,dy),view.dirty(item)}function ViewLayout(params){Transform.call(this,null,params)}Object(vega_util.y)(ViewLayout,Transform).transform=function(_,pulse){var view=pulse.dataflow;return _.mark.items.forEach((function(group){_.layout&&trellisLayout(view,group,_.layout),function layoutGroup(view,group,_){var title,mark,orient,i,n,items=group.items,width=Math.max(0,group.width||0),height=Math.max(0,group.height||0),viewBounds=(new Bounds).set(0,0,width,height),xBounds=viewBounds.clone(),yBounds=viewBounds.clone(),legends=[];for(i=0,n=items.length;i<n;++i)switch((mark=items[i]).role){case AxisRole:(isYAxis(mark)?xBounds:yBounds).union(axisLayout(view,mark,width,height));break;case TitleRole:title=mark;break;case LegendRole:legends.push(legendLayout(view,mark));break;case FrameRole:case ScopeRole:case RowHeader:case RowFooter:case RowTitle:case ColHeader:case ColFooter:case ColTitle:xBounds.union(mark.bounds),yBounds.union(mark.bounds);break;default:viewBounds.union(mark.bounds)}if(legends.length){const l={};legends.forEach(item=>{(orient=item.orient||Right)!==None&&(l[orient]||(l[orient]=[])).push(item)});for(let orient in l){const g=l[orient];gridLayout(view,g,legendParams(g,orient,_.legends,xBounds,yBounds,width,height))}legends.forEach(item=>{const b=item.bounds;if(b.equals(item._bounds)||(item.bounds=item._bounds,view.dirty(item),item.bounds=b,view.dirty(item)),_.autosize&&_.autosize.type===Fit)switch(item.orient){case Left:case Right:viewBounds.add(b.x1,0).add(b.x2,0);break;case Top:case Bottom:viewBounds.add(0,b.y1).add(0,b.y2)}else viewBounds.union(b)})}viewBounds.union(xBounds).union(yBounds),title&&viewBounds.union(function titleLayout(view,mark,width,height,viewBounds){var pos,group=mark.items[0],frame=group.frame,orient=group.orient,anchor=group.anchor,offset=group.offset,padding=group.padding,title=group.items[0].items[0],subtitle=group.items[1]&&group.items[1].items[0],end=orient===Left||orient===Right?height:width,start=0,x=0,y=0,sx=0,sy=0;if(frame!==Group?orient===Left?(start=viewBounds.y2,end=viewBounds.y1):orient===Right?(start=viewBounds.y1,end=viewBounds.y2):(start=viewBounds.x1,end=viewBounds.x2):orient===Left&&(start=height,end=0),pos=anchor===Start?start:anchor===End?end:(start+end)/2,subtitle&&subtitle.text){switch(orient){case Top:case Bottom:sy=title.bounds.height()+padding;break;case Left:sx=title.bounds.width()+padding;break;case Right:sx=-title.bounds.width()-padding}util_tempBounds.clear().union(subtitle.bounds),util_tempBounds.translate(sx-(subtitle.x||0),sy-(subtitle.y||0)),util_set(subtitle,"x",sx)|util_set(subtitle,"y",sy)&&(view.dirty(subtitle),subtitle.bounds.clear().union(util_tempBounds),subtitle.mark.bounds.clear().union(util_tempBounds),view.dirty(subtitle)),util_tempBounds.clear().union(subtitle.bounds)}else util_tempBounds.clear();switch(util_tempBounds.union(title.bounds),orient){case Top:x=pos,y=viewBounds.y1-util_tempBounds.height()-offset;break;case Left:x=viewBounds.x1-util_tempBounds.width()-offset,y=pos;break;case Right:x=viewBounds.x2+util_tempBounds.width()+offset,y=pos;break;case Bottom:x=pos,y=viewBounds.y2+offset;break;default:x=group.x,y=group.y}return util_set(group,"x",x)|util_set(group,"y",y)&&(util_tempBounds.translate(x,y),view.dirty(group),group.bounds.clear().union(util_tempBounds),mark.bounds.clear().union(util_tempBounds),view.dirty(group)),group.bounds}(view,title,width,height,viewBounds));group.clip&&viewBounds.set(0,0,group.width||0,group.height||0);!function viewSizeLayout(view,group,viewBounds,_){var auto=_.autosize||{},type=auto.type,viewWidth=view._width,viewHeight=view._height,padding=view.padding();if(view._autosize<1||!type)return;var width=Math.max(0,group.width||0),left=Math.max(0,Math.ceil(-viewBounds.x1)),right=Math.max(0,Math.ceil(viewBounds.x2-width)),height=Math.max(0,group.height||0),top=Math.max(0,Math.ceil(-viewBounds.y1)),bottom=Math.max(0,Math.ceil(viewBounds.y2-height));auto.contains===Padding&&(viewWidth-=padding.left+padding.right,viewHeight-=padding.top+padding.bottom);type===None?(left=0,top=0,width=viewWidth,height=viewHeight):type===Fit?(width=Math.max(0,viewWidth-left-right),height=Math.max(0,viewHeight-top-bottom)):type===FitX?(width=Math.max(0,viewWidth-left-right),viewHeight=height+top+bottom):type===FitY?(viewWidth=width+left+right,height=Math.max(0,viewHeight-top-bottom)):type===Pad&&(viewWidth=width+left+right,viewHeight=height+top+bottom);view._resizeView(viewWidth,viewHeight,width,height,[left,top],auto.resize)}(view,group,viewBounds,_)}(view,group,_)})),_.modified()&&pulse.reflow(),pulse};var bandSpace=function(count,paddingInner,paddingOuter){var space=count-paddingInner+2*paddingOuter;return count?space>0?space:1:0};const Identity="identity",types_Linear="linear",Log="log",Pow="pow",Sqrt="sqrt",Symlog="symlog",Time="time",UTC="utc",Sequential="sequential",Diverging="diverging",types_Quantile="quantile",Quantize="quantize",Threshold="threshold",Ordinal="ordinal",Point="point",Band="band",BinOrdinal="bin-ordinal";function isQuantile(key){return key===types_Quantile}function isInterpolating(key){return function isSequential(key){return key&&key.startsWith(Sequential)}(key)||function isDiverging(key){return key&&key.startsWith(Diverging)}(key)}function isLogarithmic(key){return key===Log||key.endsWith("-log")}function isContinuous(key){switch(key){case types_Linear:case Log:case Pow:case Sqrt:case Symlog:case Time:case UTC:case Sequential:return!0}return!1}function isDiscrete(key){return key===BinOrdinal||key===Ordinal||key===Band||key===Point}function isDiscretizing(key){return key===BinOrdinal||key===types_Quantile||key===Quantize||key===Threshold}var invertRange=function(scale){return function(_){var t,lo=_[0],hi=_[1];return hi<lo&&(t=lo,lo=hi,hi=t),[scale.invert(lo),scale.invert(hi)]}},invertRangeExtent=function(scale){return function(_){var max,t,i,n,range=scale.range(),lo=_[0],hi=_[1],min=-1;for(hi<lo&&(t=lo,lo=hi,hi=t),i=0,n=range.length;i<n;++i)range[i]>=lo&&range[i]<=hi&&(min<0&&(min=i),max=i);if(!(min<0))return lo=scale.invertExtent(range[min]),hi=scale.invertExtent(range[max]),[void 0===lo[0]?lo[1]:lo[0],void 0===hi[1]?hi[0]:hi[1]]}},ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right,bisectLeft=ascendingBisect.left,d3_array_src_bisect=bisectRight;function initRange(domain,range){switch(arguments.length){case 0:break;case 1:this.range(domain);break;default:this.range(range).domain(domain)}return this}function initInterpolator(domain,interpolator){switch(arguments.length){case 0:break;case 1:"function"==typeof domain?this.interpolator(domain):this.range(domain);break;default:this.domain(domain),"function"==typeof interpolator?this.interpolator(interpolator):this.range(interpolator)}return this}const ordinal_implicit=Symbol("implicit");function ordinal(){var index=new Map,domain=[],range=[],unknown=ordinal_implicit;function scale(d){var key=d+"",i=index.get(key);if(!i){if(unknown!==ordinal_implicit)return unknown;index.set(key,i=domain.push(d))}return range[(i-1)%range.length]}return scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[],index=new Map;for(const value of _){const key=value+"";index.has(key)||index.set(key,domain.push(value))}return scale},scale.range=function(_){return arguments.length?(range=Array.from(_),scale):range.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return ordinal(domain,range).unknown(unknown)},initRange.apply(scale,arguments),scale}function scaleBand_band(){var step,bandwidth,scale=ordinal().unknown(void 0),domain=scale.domain,ordinalRange=scale.range,range=[0,1],round=!1,paddingInner=0,paddingOuter=0,align=.5;function rescale(){var n=domain().length,reverse=range[1]<range[0],start=range[reverse-0],stop=range[1-reverse],space=bandSpace(n,paddingInner,paddingOuter);step=(stop-start)/(space||1),round&&(step=Math.floor(step)),start+=(stop-start-step*(n-paddingInner))*align,bandwidth=step*(1-paddingInner),round&&(start=Math.round(start),bandwidth=Math.round(bandwidth));var values=src_range(n).map((function(i){return start+step*i}));return ordinalRange(reverse?values.reverse():values)}return delete scale.unknown,scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain()},scale.range=function(_){return arguments.length?(range=[+_[0],+_[1]],rescale()):range.slice()},scale.rangeRound=function(_){return range=[+_[0],+_[1]],round=!0,rescale()},scale.bandwidth=function(){return bandwidth},scale.step=function(){return step},scale.round=function(_){return arguments.length?(round=!!_,rescale()):round},scale.padding=function(_){return arguments.length?(paddingOuter=Math.max(0,Math.min(1,_)),paddingInner=paddingOuter,rescale()):paddingInner},scale.paddingInner=function(_){return arguments.length?(paddingInner=Math.max(0,Math.min(1,_)),rescale()):paddingInner},scale.paddingOuter=function(_){return arguments.length?(paddingOuter=Math.max(0,Math.min(1,_)),rescale()):paddingOuter},scale.align=function(_){return arguments.length?(align=Math.max(0,Math.min(1,_)),rescale()):align},scale.invertRange=function(_){if(null!=_[0]&&null!=_[1]){var a,b,t,lo=+_[0],hi=+_[1],reverse=range[1]<range[0],values=reverse?ordinalRange().reverse():ordinalRange(),n=values.length-1;if(lo==lo&&hi==hi&&(hi<lo&&(t=lo,lo=hi,hi=t),!(hi<values[0]||lo>range[1-reverse])))return a=Math.max(0,bisectRight(values,lo)-1),b=lo===hi?a:bisectRight(values,hi)-1,lo-values[a]>bandwidth+1e-10&&++a,reverse&&(t=a,a=n-b,b=n-t),a>b?void 0:domain().slice(a,b+1)}},scale.invert=function(_){var value=scale.invertRange([_,_]);return value?value[0]:value},scale.copy=function(){return scaleBand_band().domain(domain()).range(range).round(round).paddingInner(paddingInner).paddingOuter(paddingOuter).align(align)},rescale()}var formatDecimal=function(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]},src_exponent=function(x){return(x=formatDecimal(Math.abs(x)))?x[1]:NaN},re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match;return new FormatSpecifier({fill:match[1],align:match[2],sign:match[3],symbol:match[4],zero:match[5],width:match[6],comma:match[7],precision:match[8]&&match[8].slice(1),trim:match[9],type:match[10]})}function FormatSpecifier(specifier){this.fill=void 0===specifier.fill?" ":specifier.fill+"",this.align=void 0===specifier.align?">":specifier.align+"",this.sign=void 0===specifier.sign?"-":specifier.sign+"",this.symbol=void 0===specifier.symbol?"":specifier.symbol+"",this.zero=!!specifier.zero,this.width=void 0===specifier.width?void 0:+specifier.width,this.comma=!!specifier.comma,this.precision=void 0===specifier.precision?void 0:+specifier.precision,this.trim=!!specifier.trim,this.type=void 0===specifier.type?"":specifier.type+""}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var prefixExponent,d3_format_src_defaultLocale_locale,defaultLocale_format,defaultLocale_formatPrefix,formatTrim=function(s){out:for(var i1,n=s.length,i=1,i0=-1;i<n;++i)switch(s[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;default:if(i0>0){if(!+s[i])break out;i0=0}}return i0>0?s.slice(0,i0)+s.slice(i1+1):s},formatRounded=function(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")},formatTypes={"%":function(x,p){return(100*x).toFixed(p)},b:function(x){return Math.round(x).toString(2)},c:function(x){return x+""},d:function(x){return Math.round(x).toString(10)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},g:function(x,p){return x.toPrecision(p)},o:function(x){return Math.round(x).toString(8)},p:function(x,p){return formatRounded(100*x,p)},r:formatRounded,s:function(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(exponent/3))))+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimal(x,Math.max(0,p+i-1))[0]},X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}},src_identity=function(x){return x},locale_map=Array.prototype.map,locale_prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],src_locale=function(locale){var grouping,thousands,group=void 0===locale.grouping||void 0===locale.thousands?src_identity:(grouping=locale_map.call(locale.grouping,Number),thousands=locale.thousands+"",function(value,width){for(var i=value.length,t=[],j=0,g=grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=grouping[j=(j+1)%grouping.length];return t.reverse().join(thousands)}),currencyPrefix=void 0===locale.currency?"":locale.currency[0]+"",currencySuffix=void 0===locale.currency?"":locale.currency[1]+"",decimal=void 0===locale.decimal?".":locale.decimal+"",numerals=void 0===locale.numerals?src_identity:function(numerals){return function(value){return value.replace(/[0-9]/g,(function(i){return numerals[+i]}))}}(locale_map.call(locale.numerals,String)),percent=void 0===locale.percent?"%":locale.percent+"",minus=void 0===locale.minus?"-":locale.minus+"",nan=void 0===locale.nan?"NaN":locale.nan+"";function newFormat(specifier){var fill=(specifier=formatSpecifier(specifier)).fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,trim=specifier.trim,type=specifier.type;"n"===type?(comma=!0,type="g"):formatTypes[type]||(void 0===precision&&(precision=12),trim=!0,type="g"),(zero||"0"===fill&&"="===align)&&(zero=!0,fill="0",align="=");var prefix="$"===symbol?currencyPrefix:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currencySuffix:/[%p]/.test(type)?percent:"",formatType=formatTypes[type],maybeSuffix=/[defgprs%]/.test(type);function format(value){var i,n,c,valuePrefix=prefix,valueSuffix=suffix;if("c"===type)valueSuffix=formatType(value)+valueSuffix,value="";else{var valueNegative=(value=+value)<0;if(value=isNaN(value)?nan:formatType(Math.abs(value),precision),trim&&(value=formatTrim(value)),valueNegative&&0==+value&&(valueNegative=!1),valuePrefix=(valueNegative?"("===sign?sign:minus:"-"===sign||"("===sign?"":sign)+valuePrefix,valueSuffix=("s"===type?locale_prefixes[8+prefixExponent/3]:"")+valueSuffix+(valueNegative&&"("===sign?")":""),maybeSuffix)for(i=-1,n=value.length;++i<n;)if(48>(c=value.charCodeAt(i))||c>57){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix,value=value.slice(0,i);break}}comma&&!zero&&(value=group(value,1/0));var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";switch(comma&&zero&&(value=group(padding+value,padding.length?width-valueSuffix.length:1/0),padding=""),align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix}return numerals(value)}return precision=void 0===precision?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),format.toString=function(){return specifier+""},format}return{format:newFormat,formatPrefix:function formatPrefix(specifier,value){var f=newFormat(((specifier=formatSpecifier(specifier)).type="f",specifier)),e=3*Math.max(-8,Math.min(8,Math.floor(src_exponent(value)/3))),k=Math.pow(10,-e),prefix=locale_prefixes[8+e/3];return function(value){return f(k*value)+prefix}}}};function src_defaultLocale_defaultLocale(definition){return d3_format_src_defaultLocale_locale=src_locale(definition),defaultLocale_format=d3_format_src_defaultLocale_locale.format,defaultLocale_formatPrefix=d3_format_src_defaultLocale_locale.formatPrefix,d3_format_src_defaultLocale_locale}src_defaultLocale_defaultLocale({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var src_tickFormat=function(start,stop,count,specifier){var precision,step=tickStep(start,stop,count);switch((specifier=formatSpecifier(null==specifier?",f":specifier)).type){case"s":var value=Math.max(Math.abs(start),Math.abs(stop));return null!=specifier.precision||isNaN(precision=function(step,value){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(src_exponent(value)/3)))-src_exponent(Math.abs(step)))}(step,value))||(specifier.precision=precision),defaultLocale_formatPrefix(specifier,value);case"":case"e":case"g":case"p":case"r":null!=specifier.precision||isNaN(precision=function(step,max){return step=Math.abs(step),max=Math.abs(max)-step,Math.max(0,src_exponent(max)-src_exponent(step))+1}(step,Math.max(Math.abs(start),Math.abs(stop))))||(specifier.precision=precision-("e"===specifier.type));break;case"f":case"%":null!=specifier.precision||isNaN(precision=function(step){return Math.max(0,-src_exponent(Math.abs(step)))}(step))||(specifier.precision=precision-2*("%"===specifier.type))}return defaultLocale_format(specifier)},numbers_map=Array.prototype.map;function numbers_numbers(_){return numbers_map.call(_,(function(x){return+x}))}var slice=Array.prototype.slice;var define=function(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype,prototype.constructor=constructor};function extend(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype}function Color(){}var reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+[reN,reP,reP,reN]+"\\)$"),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatRgb(){return this.rgb().formatRgb()}function color_color(format){var m,l;return format=(format+"").trim().toLowerCase(),(m=reHex.exec(format))?(l=m[1].length,m=parseInt(m[1],16),6===l?rgbn(m):3===l?new Rgb(m>>8&15|m>>4&240,m>>4&15|240&m,(15&m)<<4|15&m,1):8===l?new Rgb(m>>24&255,m>>16&255,m>>8&255,(255&m)/255):4===l?new Rgb(m>>12&15|m>>8&240,m>>8&15|m>>4&240,m>>4&15|240&m,((15&m)<<4|15&m)/255):null):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):"transparent"===format?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,255&n,1)}function rgba(r,g,b,a){return a<=0&&(r=g=b=NaN),new Rgb(r,g,b,a)}function rgbConvert(o){return o instanceof Color||(o=color_color(o)),o?new Rgb((o=o.rgb()).r,o.g,o.b,o.opacity):new Rgb}function color_rgb(r,g,b,opacity){return 1===arguments.length?rgbConvert(r):new Rgb(r,g,b,null==opacity?1:opacity)}function Rgb(r,g,b,opacity){this.r=+r,this.g=+g,this.b=+b,this.opacity=+opacity}function rgb_formatHex(){return"#"+hex(this.r)+hex(this.g)+hex(this.b)}function rgb_formatRgb(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}function hex(value){return((value=Math.max(0,Math.min(255,Math.round(value)||0)))<16?"0":"")+value.toString(16)}function hsla(h,s,l,a){return a<=0?h=s=l=NaN:l<=0||l>=1?h=s=NaN:s<=0&&(h=NaN),new Hsl(h,s,l,a)}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);if(o instanceof Color||(o=color_color(o)),!o)return new Hsl;if(o instanceof Hsl)return o;var r=(o=o.rgb()).r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;return s?(h=r===max?(g-b)/s+6*(g<b):g===max?(b-r)/s+2:(r-g)/s+4,s/=l<.5?max+min:2-max-min,h*=60):s=l>0&&l<1?0:h,new Hsl(h,s,l,o.opacity)}function hsl(h,s,l,opacity){return 1===arguments.length?hslConvert(h):new Hsl(h,s,l,null==opacity?1:opacity)}function Hsl(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function hsl2rgb(h,m1,m2){return 255*(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)}function basis_basis(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6}define(Color,color_color,{copy:function(channels){return Object.assign(new this.constructor,this,channels)},displayable:function(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHsl:function color_formatHsl(){return hslConvert(this).formatHsl()},formatRgb:color_formatRgb,toString:color_formatRgb}),define(Rgb,color_rgb,extend(Color,{brighter:function(k){return k=null==k?1/.7:Math.pow(1/.7,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),define(Hsl,hsl,extend(Color,{brighter:function(k){return k=null==k?1/.7:Math.pow(1/.7,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=this.h%360+360*(this.h<0),s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<.5?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(h<120?h+240:h-120,m1,m2),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===a?")":", "+a+")")}}));var src_basis=function(values){var n=values.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),v1=values[i],v2=values[i+1],v0=i>0?values[i-1]:2*v1-v2,v3=i<n-1?values[i+2]:2*v2-v1;return basis_basis((t-i/n)*n,v0,v1,v2,v3)}},src_basisClosed=function(values){var n=values.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),v0=values[(i+n-1)%n],v1=values[i%n],v2=values[(i+1)%n],v3=values[(i+2)%n];return basis_basis((t-i/n)*n,v0,v1,v2,v3)}},d3_interpolate_src_constant=function(x){return function(){return x}};function color_linear(a,d){return function(t){return a+t*d}}function color_hue(a,b){var d=b-a;return d?color_linear(a,d>180||d<-180?d-360*Math.round(d/360):d):d3_interpolate_src_constant(isNaN(a)?b:a)}function color_gamma(y){return 1==(y=+y)?nogamma:function(a,b){return b-a?function exponential(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}(a,b,y):d3_interpolate_src_constant(isNaN(a)?b:a)}}function nogamma(a,b){var d=b-a;return d?color_linear(a,d):d3_interpolate_src_constant(isNaN(a)?b:a)}var src_rgb=function rgbGamma(y){var color=color_gamma(y);function rgb(start,end){var r=color((start=color_rgb(start)).r,(end=color_rgb(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.r=r(t),start.g=g(t),start.b=b(t),start.opacity=opacity(t),start+""}}return rgb.gamma=rgbGamma,rgb}(1);function rgbSpline(spline){return function(colors){var i,color,n=colors.length,r=new Array(n),g=new Array(n),b=new Array(n);for(i=0;i<n;++i)color=color_rgb(colors[i]),r[i]=color.r||0,g[i]=color.g||0,b[i]=color.b||0;return r=spline(r),g=spline(g),b=spline(b),color.opacity=1,function(t){return color.r=r(t),color.g=g(t),color.b=b(t),color+""}}}var rgbBasis=rgbSpline(src_basis),rgbBasisClosed=rgbSpline(src_basisClosed),src_array=function(a,b){var i,nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(na),c=new Array(nb);for(i=0;i<na;++i)x[i]=src_value(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}},src_date=function(a,b){var d=new Date;return b-=a=+a,function(t){return d.setTime(a+b*t),d}},src_number=function(a,b){return b-=a=+a,function(t){return a+b*t}},src_object=function(a,b){var k,i={},c={};for(k in null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={}),b)k in a?i[k]=src_value(a[k],b[k]):c[k]=b[k];return function(t){for(k in i)c[k]=i[k](t);return c}},reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");var cssNode,cssRoot,cssView,svgNode,src_string=function(a,b){var am,bm,bs,bi=reA.lastIndex=reB.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=reA.exec(a))&&(bm=reB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i:i,x:src_number(am,bm)})),bi=reB.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?function one(b){return function(t){return b(t)+""}}(q[0].x):function string_zero(b){return function(){return b}}(b):(b=q.length,function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})},src_value=function(a,b){var c,t=typeof b;return null==b||"boolean"===t?d3_interpolate_src_constant(b):("number"===t?src_number:"string"===t?(c=color_color(b))?(b=c,src_rgb):src_string:b instanceof color_color?src_rgb:b instanceof Date?src_date:Array.isArray(b)?src_array:"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?src_object:src_number)(a,b)},discrete=function(range){var n=range.length;return function(t){return range[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}},src_hue=function(a,b){var i=color_hue(+a,+b);return function(t){var x=i(t);return x-360*Math.floor(x/360)}},src_round=function(a,b){return b-=a=+a,function(t){return Math.round(a+b*t)}},degrees=180/Math.PI,decompose_identity={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},decompose=function(a,b,c,d,e,f){var scaleX,scaleY,skewX;return(scaleX=Math.sqrt(a*a+b*b))&&(a/=scaleX,b/=scaleX),(skewX=a*c+b*d)&&(c-=a*skewX,d-=b*skewX),(scaleY=Math.sqrt(c*c+d*d))&&(c/=scaleY,d/=scaleY,skewX/=scaleY),a*d<b*c&&(a=-a,b=-b,skewX=-skewX,scaleX=-scaleX),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees,skewX:Math.atan(skewX)*degrees,scaleX:scaleX,scaleY:scaleY}};function interpolateTransform(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":""}return function(a,b){var s=[],q=[];return a=parse(a),b=parse(b),function translate(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:src_number(xa,xb)},{i:i-2,x:src_number(ya,yb)})}else(xb||yb)&&s.push("translate("+xb+pxComma+yb+pxParen)}(a.translateX,a.translateY,b.translateX,b.translateY,s,q),function rotate(a,b,s,q){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:src_number(a,b)})):b&&s.push(pop(s)+"rotate("+b+degParen)}(a.rotate,b.rotate,s,q),function skewX(a,b,s,q){a!==b?q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:src_number(a,b)}):b&&s.push(pop(s)+"skewX("+b+degParen)}(a.skewX,b.skewX,s,q),function scale(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:src_number(xa,xb)},{i:i-2,x:src_number(ya,yb)})}else 1===xb&&1===yb||s.push(pop(s)+"scale("+xb+","+yb+")")}(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q),a=b=null,function(t){for(var o,i=-1,n=q.length;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}}var interpolateTransformCss=interpolateTransform((function parseCss(value){return"none"===value?decompose_identity:(cssNode||(cssNode=document.createElement("DIV"),cssRoot=document.documentElement,cssView=document.defaultView),cssNode.style.transform=value,value=cssView.getComputedStyle(cssRoot.appendChild(cssNode),null).getPropertyValue("transform"),cssRoot.removeChild(cssNode),value=value.slice(7,-1).split(","),decompose(+value[0],+value[1],+value[2],+value[3],+value[4],+value[5]))}),"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform((function parseSvg(value){return null==value?decompose_identity:(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",value),(value=svgNode.transform.baseVal.consolidate())?(value=value.matrix,decompose(value.a,value.b,value.c,value.d,value.e,value.f)):decompose_identity)}),", ",")",")"),rho=Math.SQRT2;function zoom_cosh(x){return((x=Math.exp(x))+1/x)/2}var zoom=function(p0,p1){var i,S,ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy;if(d2<1e-12)S=Math.log(w1/w0)/rho,i=function(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(rho*t*S)]};else{var d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+4*d2)/(2*w0*2*d1),b1=(w1*w1-w0*w0-4*d2)/(2*w1*2*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);S=(r1-r0)/rho,i=function(t){var s=t*S,coshr0=zoom_cosh(r0),u=w0/(2*d1)*(coshr0*function tanh(x){return((x=Math.exp(2*x))-1)/(x+1)}(rho*s+r0)-function zoom_sinh(x){return((x=Math.exp(x))-1/x)/2}(r0));return[ux0+u*dx,uy0+u*dy,w0*coshr0/zoom_cosh(rho*s+r0)]}}return i.duration=1e3*S,i};function hsl_hsl(hue){return function(start,end){var h=hue((start=hsl(start)).h,(end=hsl(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(t),start.opacity=opacity(t),start+""}}}var src_hsl=hsl_hsl(color_hue),hslLong=hsl_hsl(nogamma),deg2rad=Math.PI/180,rad2deg=180/Math.PI,Xn=.96422,Yn=1,Zn=.82521,lab_t0=4/29,lab_t1=6/29,lab_t2=3*lab_t1*lab_t1,t3=lab_t1*lab_t1*lab_t1;function labConvert(o){if(o instanceof Lab)return new Lab(o.l,o.a,o.b,o.opacity);if(o instanceof Hcl)return hcl2lab(o);o instanceof Rgb||(o=rgbConvert(o));var x,z,r=rgb2lrgb(o.r),g=rgb2lrgb(o.g),b=rgb2lrgb(o.b),y=xyz2lab((.2225045*r+.7168786*g+.0606169*b)/Yn);return r===g&&g===b?x=z=y:(x=xyz2lab((.4360747*r+.3850649*g+.1430804*b)/Xn),z=xyz2lab((.0139322*r+.0971045*g+.7141733*b)/Zn)),new Lab(116*y-16,500*(x-y),200*(y-z),o.opacity)}function lab(l,a,b,opacity){return 1===arguments.length?labConvert(l):new Lab(l,a,b,null==opacity?1:opacity)}function Lab(l,a,b,opacity){this.l=+l,this.a=+a,this.b=+b,this.opacity=+opacity}function xyz2lab(t){return t>t3?Math.pow(t,1/3):t/lab_t2+lab_t0}function lab2xyz(t){return t>lab_t1?t*t*t:lab_t2*(t-lab_t0)}function lrgb2rgb(x){return 255*(x<=.0031308?12.92*x:1.055*Math.pow(x,1/2.4)-.055)}function rgb2lrgb(x){return(x/=255)<=.04045?x/12.92:Math.pow((x+.055)/1.055,2.4)}function hclConvert(o){if(o instanceof Hcl)return new Hcl(o.h,o.c,o.l,o.opacity);if(o instanceof Lab||(o=labConvert(o)),0===o.a&&0===o.b)return new Hcl(NaN,0<o.l&&o.l<100?0:NaN,o.l,o.opacity);var h=Math.atan2(o.b,o.a)*rad2deg;return new Hcl(h<0?h+360:h,Math.sqrt(o.a*o.a+o.b*o.b),o.l,o.opacity)}function hcl(h,c,l,opacity){return 1===arguments.length?hclConvert(h):new Hcl(h,c,l,null==opacity?1:opacity)}function Hcl(h,c,l,opacity){this.h=+h,this.c=+c,this.l=+l,this.opacity=+opacity}function hcl2lab(o){if(isNaN(o.h))return new Lab(o.l,0,0,o.opacity);var h=o.h*deg2rad;return new Lab(o.l,Math.cos(h)*o.c,Math.sin(h)*o.c,o.opacity)}function lab_lab(start,end){var l=nogamma((start=lab(start)).l,(end=lab(end)).l),a=nogamma(start.a,end.a),b=nogamma(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.l=l(t),start.a=a(t),start.b=b(t),start.opacity=opacity(t),start+""}}function hcl_hcl(hue){return function(start,end){var h=hue((start=hcl(start)).h,(end=hcl(end)).h),c=nogamma(start.c,end.c),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.c=c(t),start.l=l(t),start.opacity=opacity(t),start+""}}}define(Lab,lab,extend(Color,{brighter:function(k){return new Lab(this.l+18*(null==k?1:k),this.a,this.b,this.opacity)},darker:function(k){return new Lab(this.l-18*(null==k?1:k),this.a,this.b,this.opacity)},rgb:function(){var y=(this.l+16)/116,x=isNaN(this.a)?y:y+this.a/500,z=isNaN(this.b)?y:y-this.b/200;return new Rgb(lrgb2rgb(3.1338561*(x=Xn*lab2xyz(x))-1.6168667*(y=Yn*lab2xyz(y))-.4906146*(z=Zn*lab2xyz(z))),lrgb2rgb(-.9787684*x+1.9161415*y+.033454*z),lrgb2rgb(.0719453*x-.2289914*y+1.4052427*z),this.opacity)}})),define(Hcl,hcl,extend(Color,{brighter:function(k){return new Hcl(this.h,this.c,this.l+18*(null==k?1:k),this.opacity)},darker:function(k){return new Hcl(this.h,this.c,this.l-18*(null==k?1:k),this.opacity)},rgb:function(){return hcl2lab(this).rgb()}}));var src_hcl=hcl_hcl(color_hue),hclLong=hcl_hcl(nogamma),cubehelix_C=-.29227,cubehelix_D=-.90649,E=1.97294,ED=E*cubehelix_D,EB=1.78277*E,BC_DA=1.78277*cubehelix_C- -.14861*cubehelix_D;function cubehelix_cubehelix(h,s,l,opacity){return 1===arguments.length?function cubehelixConvert(o){if(o instanceof Cubehelix)return new Cubehelix(o.h,o.s,o.l,o.opacity);o instanceof Rgb||(o=rgbConvert(o));var r=o.r/255,g=o.g/255,b=o.b/255,l=(BC_DA*b+ED*r-EB*g)/(BC_DA+ED-EB),bl=b-l,k=(E*(g-l)-cubehelix_C*bl)/cubehelix_D,s=Math.sqrt(k*k+bl*bl)/(E*l*(1-l)),h=s?Math.atan2(k,bl)*rad2deg-120:NaN;return new Cubehelix(h<0?h+360:h,s,l,o.opacity)}(h):new Cubehelix(h,s,l,null==opacity?1:opacity)}function Cubehelix(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function src_cubehelix_cubehelix(hue){return function cubehelixGamma(y){function cubehelix(start,end){var h=hue((start=cubehelix_cubehelix(start)).h,(end=cubehelix_cubehelix(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(Math.pow(t,y)),start.opacity=opacity(t),start+""}}return y=+y,cubehelix.gamma=cubehelixGamma,cubehelix}(1)}define(Cubehelix,cubehelix_cubehelix,extend(Color,{brighter:function(k){return k=null==k?1/.7:Math.pow(1/.7,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=isNaN(this.h)?0:(this.h+120)*deg2rad,l=+this.l,a=isNaN(this.s)?0:this.s*l*(1-l),cosh=Math.cos(h),sinh=Math.sin(h);return new Rgb(255*(l+a*(-.14861*cosh+1.78277*sinh)),255*(l+a*(cubehelix_C*cosh+cubehelix_D*sinh)),255*(l+a*(E*cosh)),this.opacity)}}));var src_cubehelix=src_cubehelix_cubehelix(color_hue),cubehelixLong=src_cubehelix_cubehelix(nogamma);function piecewise_piecewise(interpolate,values){for(var i=0,n=values.length-1,v=values[0],I=new Array(n<0?0:n);i<n;)I[i]=interpolate(v,v=values[++i]);return function(t){var i=Math.max(0,Math.min(n-1,Math.floor(t*=n)));return I[i](t-i)}}var src_quantize=function(interpolator,n){for(var samples=new Array(n),i=0;i<n;++i)samples[i]=interpolator(i/(n-1));return samples},d3_scale_src_constant=function(x){return function(){return x}},d3_scale_src_number=function(x){return+x},continuous_unit=[0,1];function continuous_identity(x){return x}function continuous_normalize(a,b){return(b-=a=+a)?function(x){return(x-a)/b}:d3_scale_src_constant(isNaN(b)?NaN:.5)}function bimap(domain,range,interpolate){var d0=domain[0],d1=domain[1],r0=range[0],r1=range[1];return d1<d0?(d0=continuous_normalize(d1,d0),r0=interpolate(r1,r0)):(d0=continuous_normalize(d0,d1),r0=interpolate(r0,r1)),function(x){return r0(d0(x))}}function polymap(domain,range,interpolate){var j=Math.min(domain.length,range.length)-1,d=new Array(j),r=new Array(j),i=-1;for(domain[j]<domain[0]&&(domain=domain.slice().reverse(),range=range.slice().reverse());++i<j;)d[i]=continuous_normalize(domain[i],domain[i+1]),r[i]=interpolate(range[i],range[i+1]);return function(x){var i=d3_array_src_bisect(domain,x,1,j)-1;return r[i](d[i](x))}}function continuous_copy(source,target){return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp()).unknown(source.unknown())}function transformer(){var transform,untransform,unknown,piecewise,output,input,domain=continuous_unit,range=continuous_unit,interpolate=src_value,clamp=continuous_identity;function rescale(){var n=Math.min(domain.length,range.length);return clamp!==continuous_identity&&(clamp=function clamper(a,b){var t;return a>b&&(t=a,a=b,b=t),function(x){return Math.max(a,Math.min(b,x))}}(domain[0],domain[n-1])),piecewise=n>2?polymap:bimap,output=input=null,scale}function scale(x){return isNaN(x=+x)?unknown:(output||(output=piecewise(domain.map(transform),range,interpolate)))(transform(clamp(x)))}return scale.invert=function(y){return clamp(untransform((input||(input=piecewise(range,domain.map(transform),src_number)))(y)))},scale.domain=function(_){return arguments.length?(domain=Array.from(_,d3_scale_src_number),rescale()):domain.slice()},scale.range=function(_){return arguments.length?(range=Array.from(_),rescale()):range.slice()},scale.rangeRound=function(_){return range=Array.from(_),interpolate=src_round,rescale()},scale.clamp=function(_){return arguments.length?(clamp=!!_||continuous_identity,rescale()):clamp!==continuous_identity},scale.interpolate=function(_){return arguments.length?(interpolate=_,rescale()):interpolate},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},function(t,u){return transform=t,untransform=u,rescale()}}function continuous(){return transformer()(continuous_identity,continuous_identity)}function linearish(scale){var domain=scale.domain;return scale.ticks=function(count){var d=domain();return src_ticks(d[0],d[d.length-1],null==count?10:count)},scale.tickFormat=function(count,specifier){var d=domain();return src_tickFormat(d[0],d[d.length-1],null==count?10:count,specifier)},scale.nice=function(count){null==count&&(count=10);var step,d=domain(),i0=0,i1=d.length-1,start=d[i0],stop=d[i1];return stop<start&&(step=start,start=stop,stop=step,step=i0,i0=i1,i1=step),(step=tickIncrement(start,stop,count))>0?step=tickIncrement(start=Math.floor(start/step)*step,stop=Math.ceil(stop/step)*step,count):step<0&&(step=tickIncrement(start=Math.ceil(start*step)/step,stop=Math.floor(stop*step)/step,count)),step>0?(d[i0]=Math.floor(start/step)*step,d[i1]=Math.ceil(stop/step)*step,domain(d)):step<0&&(d[i0]=Math.ceil(start*step)/step,d[i1]=Math.floor(stop*step)/step,domain(d)),scale},scale}var src_nice=function(domain,interval){var t,i0=0,i1=(domain=domain.slice()).length-1,x0=domain[i0],x1=domain[i1];return x1<x0&&(t=i0,i0=i1,i1=t,t=x0,x0=x1,x1=t),domain[i0]=interval.floor(x0),domain[i1]=interval.ceil(x1),domain};function transformLog(x){return Math.log(x)}function transformExp(x){return Math.exp(x)}function transformLogn(x){return-Math.log(-x)}function transformExpn(x){return-Math.exp(-x)}function pow10(x){return isFinite(x)?+("1e"+x):x<0?0:x}function reflect(f){return function(x){return-f(-x)}}function loggish(transform){var logs,pows,scale=transform(transformLog,transformExp),domain=scale.domain,base=10;function rescale(){return logs=function logp(base){return base===Math.E?Math.log:10===base&&Math.log10||2===base&&Math.log2||(base=Math.log(base),function(x){return Math.log(x)/base})}(base),pows=function powp(base){return 10===base?pow10:base===Math.E?Math.exp:function(x){return Math.pow(base,x)}}(base),domain()[0]<0?(logs=reflect(logs),pows=reflect(pows),transform(transformLogn,transformExpn)):transform(transformLog,transformExp),scale}return scale.base=function(_){return arguments.length?(base=+_,rescale()):base},scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain()},scale.ticks=function(count){var r,d=domain(),u=d[0],v=d[d.length-1];(r=v<u)&&(i=u,u=v,v=i);var p,k,t,i=logs(u),j=logs(v),n=null==count?10:+count,z=[];if(!(base%1)&&j-i<n){if(i=Math.floor(i),j=Math.ceil(j),u>0){for(;i<=j;++i)for(k=1,p=pows(i);k<base;++k)if(!((t=p*k)<u)){if(t>v)break;z.push(t)}}else for(;i<=j;++i)for(k=base-1,p=pows(i);k>=1;--k)if(!((t=p*k)<u)){if(t>v)break;z.push(t)}z.length||(z=src_ticks(u,v,n))}else z=src_ticks(i,j,Math.min(j-i,n)).map(pows);return r?z.reverse():z},scale.tickFormat=function(count,specifier){if(null==specifier&&(specifier=10===base?".0e":","),"function"!=typeof specifier&&(specifier=defaultLocale_format(specifier)),count===1/0)return specifier;null==count&&(count=10);var k=Math.max(1,base*count/scale.ticks().length);return function(d){var i=d/pows(Math.round(logs(d)));return i*base<base-.5&&(i*=base),i<=k?specifier(d):""}},scale.nice=function(){return domain(src_nice(domain(),{floor:function(x){return pows(Math.floor(logs(x)))},ceil:function(x){return pows(Math.ceil(logs(x)))}}))},scale}function transformPow(exponent){return function(x){return x<0?-Math.pow(-x,exponent):Math.pow(x,exponent)}}function transformSqrt(x){return x<0?-Math.sqrt(-x):Math.sqrt(x)}function transformSquare(x){return x<0?-x*x:x*x}function powish(transform){var scale=transform(continuous_identity,continuous_identity),exponent=1;function rescale(){return 1===exponent?transform(continuous_identity,continuous_identity):.5===exponent?transform(transformSqrt,transformSquare):transform(transformPow(exponent),transformPow(1/exponent))}return scale.exponent=function(_){return arguments.length?(exponent=+_,rescale()):exponent},linearish(scale)}function pow_pow(){var scale=powish(transformer());return scale.copy=function(){return continuous_copy(scale,pow_pow()).exponent(scale.exponent())},initRange.apply(scale,arguments),scale}function transformSymlog(c){return function(x){return Math.sign(x)*Math.log1p(Math.abs(x/c))}}function transformSymexp(c){return function(x){return Math.sign(x)*Math.expm1(Math.abs(x))*c}}function symlogish(transform){var c=1,scale=transform(transformSymlog(c),transformSymexp(c));return scale.constant=function(_){return arguments.length?transform(transformSymlog(c=+_),transformSymexp(c)):c},linearish(scale)}function src_locale_localDate(d){if(0<=d.y&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);return date.setFullYear(d.y),date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function src_locale_utcDate(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));return date.setUTCFullYear(d.y),date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function d3_time_format_src_locale_newDate(y,m,d){return{y:y,m:m,d:d,H:0,M:0,S:0,L:0}}var d3_time_format_src_defaultLocale_locale,src_defaultLocale_timeFormat,src_defaultLocale_utcFormat,src_locale_pads={"-":"",_:" ",0:"0"},src_locale_numberRe=/^\s*\d+/,src_locale_percentRe=/^%/,src_locale_requoteRe=/[\\^$*+?|[\]().{}]/g;function d3_time_format_src_locale_pad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function src_locale_requote(s){return s.replace(src_locale_requoteRe,"\\$&")}function src_locale_formatRe(names){return new RegExp("^(?:"+names.map(src_locale_requote).join("|")+")","i")}function src_locale_formatLookup(names){for(var map={},i=-1,n=names.length;++i<n;)map[names[i].toLowerCase()]=i;return map}function src_locale_parseWeekdayNumberSunday(d,string,i){var n=src_locale_numberRe.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1}function src_locale_parseWeekdayNumberMonday(d,string,i){var n=src_locale_numberRe.exec(string.slice(i,i+1));return n?(d.u=+n[0],i+n[0].length):-1}function src_locale_parseWeekNumberSunday(d,string,i){var n=src_locale_numberRe.exec(string.slice(i,i+2));return n?(d.U=+n[0],i+n[0].length):-1}function src_locale_parseWeekNumberISO(d,string,i){var n=src_locale_numberRe.exec(string.slice(i,i+2));return n?(d.V=+n[0],i+n[0].length):-1}function src_locale_parseWeekNumberMonday(d,string,i){var n=src_locale_numberRe.exec(string.slice(i,i+2));return n?(d.W=+n[0],i+n[0].length):-1}function src_locale_parseFullYear(d,string,i){var n=src_locale_numberRe.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1}function src_locale_parseYear(d,string,i){var n=src_locale_numberRe.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function src_locale_parseZone(d,string,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i,i+6));return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function src_locale_parseQuarter(d,string,i){var n=src_locale_numberRe.exec(string.slice(i,i+1));return n?(d.q=3*n[0]-3,i+n[0].length):-1}function src_locale_parseMonthNumber(d,string,i){var n=src_locale_numberRe.exec(string.slice(i,i+2));return n?(d.m=n[0]-1,i+n[0].length):-1}function src_locale_parseDayOfMonth(d,string,i){var n=src_locale_numberRe.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}function src_locale_parseDayOfYear(d,string,i){var n=src_locale_numberRe.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1}function src_locale_parseHour24(d,string,i){var n=src_locale_numberRe.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function src_locale_parseMinutes(d,string,i){var n=src_locale_numberRe.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1}function src_locale_parseSeconds(d,string,i){var n=src_locale_numberRe.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1}function src_locale_parseMilliseconds(d,string,i){var n=src_locale_numberRe.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1}function src_locale_parseMicroseconds(d,string,i){var n=src_locale_numberRe.exec(string.slice(i,i+6));return n?(d.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function src_locale_parseLiteralPercent(d,string,i){var n=src_locale_percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function src_locale_parseUnixTimestamp(d,string,i){var n=src_locale_numberRe.exec(string.slice(i));return n?(d.Q=+n[0],i+n[0].length):-1}function src_locale_parseUnixTimestampSeconds(d,string,i){var n=src_locale_numberRe.exec(string.slice(i));return n?(d.s=+n[0],i+n[0].length):-1}function src_locale_formatDayOfMonth(d,p){return d3_time_format_src_locale_pad(d.getDate(),p,2)}function src_locale_formatHour24(d,p){return d3_time_format_src_locale_pad(d.getHours(),p,2)}function src_locale_formatHour12(d,p){return d3_time_format_src_locale_pad(d.getHours()%12||12,p,2)}function src_locale_formatDayOfYear(d,p){return d3_time_format_src_locale_pad(1+src_day.count(src_year(d),d),p,3)}function src_locale_formatMilliseconds(d,p){return d3_time_format_src_locale_pad(d.getMilliseconds(),p,3)}function src_locale_formatMicroseconds(d,p){return src_locale_formatMilliseconds(d,p)+"000"}function src_locale_formatMonthNumber(d,p){return d3_time_format_src_locale_pad(d.getMonth()+1,p,2)}function src_locale_formatMinutes(d,p){return d3_time_format_src_locale_pad(d.getMinutes(),p,2)}function src_locale_formatSeconds(d,p){return d3_time_format_src_locale_pad(d.getSeconds(),p,2)}function src_locale_formatWeekdayNumberMonday(d){var day=d.getDay();return 0===day?7:day}function src_locale_formatWeekNumberSunday(d,p){return d3_time_format_src_locale_pad(sunday.count(src_year(d)-1,d),p,2)}function src_locale_formatWeekNumberISO(d,p){var day=d.getDay();return d=day>=4||0===day?thursday(d):thursday.ceil(d),d3_time_format_src_locale_pad(thursday.count(src_year(d),d)+(4===src_year(d).getDay()),p,2)}function src_locale_formatWeekdayNumberSunday(d){return d.getDay()}function src_locale_formatWeekNumberMonday(d,p){return d3_time_format_src_locale_pad(monday.count(src_year(d)-1,d),p,2)}function d3_time_format_src_locale_formatYear(d,p){return d3_time_format_src_locale_pad(d.getFullYear()%100,p,2)}function src_locale_formatFullYear(d,p){return d3_time_format_src_locale_pad(d.getFullYear()%1e4,p,4)}function src_locale_formatZone(d){var z=d.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+d3_time_format_src_locale_pad(z/60|0,"0",2)+d3_time_format_src_locale_pad(z%60,"0",2)}function src_locale_formatUTCDayOfMonth(d,p){return d3_time_format_src_locale_pad(d.getUTCDate(),p,2)}function src_locale_formatUTCHour24(d,p){return d3_time_format_src_locale_pad(d.getUTCHours(),p,2)}function src_locale_formatUTCHour12(d,p){return d3_time_format_src_locale_pad(d.getUTCHours()%12||12,p,2)}function src_locale_formatUTCDayOfYear(d,p){return d3_time_format_src_locale_pad(1+src_utcDay.count(src_utcYear(d),d),p,3)}function src_locale_formatUTCMilliseconds(d,p){return d3_time_format_src_locale_pad(d.getUTCMilliseconds(),p,3)}function src_locale_formatUTCMicroseconds(d,p){return src_locale_formatUTCMilliseconds(d,p)+"000"}function src_locale_formatUTCMonthNumber(d,p){return d3_time_format_src_locale_pad(d.getUTCMonth()+1,p,2)}function src_locale_formatUTCMinutes(d,p){return d3_time_format_src_locale_pad(d.getUTCMinutes(),p,2)}function src_locale_formatUTCSeconds(d,p){return d3_time_format_src_locale_pad(d.getUTCSeconds(),p,2)}function src_locale_formatUTCWeekdayNumberMonday(d){var dow=d.getUTCDay();return 0===dow?7:dow}function src_locale_formatUTCWeekNumberSunday(d,p){return d3_time_format_src_locale_pad(utcSunday.count(src_utcYear(d)-1,d),p,2)}function src_locale_formatUTCWeekNumberISO(d,p){var day=d.getUTCDay();return d=day>=4||0===day?utcThursday(d):utcThursday.ceil(d),d3_time_format_src_locale_pad(utcThursday.count(src_utcYear(d),d)+(4===src_utcYear(d).getUTCDay()),p,2)}function src_locale_formatUTCWeekdayNumberSunday(d){return d.getUTCDay()}function src_locale_formatUTCWeekNumberMonday(d,p){return d3_time_format_src_locale_pad(utcMonday.count(src_utcYear(d)-1,d),p,2)}function src_locale_formatUTCYear(d,p){return d3_time_format_src_locale_pad(d.getUTCFullYear()%100,p,2)}function src_locale_formatUTCFullYear(d,p){return d3_time_format_src_locale_pad(d.getUTCFullYear()%1e4,p,4)}function src_locale_formatUTCZone(){return"+0000"}function src_locale_formatLiteralPercent(){return"%"}function src_locale_formatUnixTimestamp(d){return+d}function src_locale_formatUnixTimestampSeconds(d){return Math.floor(+d/1e3)}!function d3_time_format_src_defaultLocale_defaultLocale(definition){return d3_time_format_src_defaultLocale_locale=function src_locale_formatLocale(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths,periodRe=src_locale_formatRe(locale_periods),periodLookup=src_locale_formatLookup(locale_periods),weekdayRe=src_locale_formatRe(locale_weekdays),weekdayLookup=src_locale_formatLookup(locale_weekdays),shortWeekdayRe=src_locale_formatRe(locale_shortWeekdays),shortWeekdayLookup=src_locale_formatLookup(locale_shortWeekdays),monthRe=src_locale_formatRe(locale_months),monthLookup=src_locale_formatLookup(locale_months),shortMonthRe=src_locale_formatRe(locale_shortMonths),shortMonthLookup=src_locale_formatLookup(locale_shortMonths),formats={a:function formatShortWeekday(d){return locale_shortWeekdays[d.getDay()]},A:function formatWeekday(d){return locale_weekdays[d.getDay()]},b:function formatShortMonth(d){return locale_shortMonths[d.getMonth()]},B:function formatMonth(d){return locale_months[d.getMonth()]},c:null,d:src_locale_formatDayOfMonth,e:src_locale_formatDayOfMonth,f:src_locale_formatMicroseconds,H:src_locale_formatHour24,I:src_locale_formatHour12,j:src_locale_formatDayOfYear,L:src_locale_formatMilliseconds,m:src_locale_formatMonthNumber,M:src_locale_formatMinutes,p:function formatPeriod(d){return locale_periods[+(d.getHours()>=12)]},q:function formatQuarter(d){return 1+~~(d.getMonth()/3)},Q:src_locale_formatUnixTimestamp,s:src_locale_formatUnixTimestampSeconds,S:src_locale_formatSeconds,u:src_locale_formatWeekdayNumberMonday,U:src_locale_formatWeekNumberSunday,V:src_locale_formatWeekNumberISO,w:src_locale_formatWeekdayNumberSunday,W:src_locale_formatWeekNumberMonday,x:null,X:null,y:d3_time_format_src_locale_formatYear,Y:src_locale_formatFullYear,Z:src_locale_formatZone,"%":src_locale_formatLiteralPercent},utcFormats={a:function formatUTCShortWeekday(d){return locale_shortWeekdays[d.getUTCDay()]},A:function formatUTCWeekday(d){return locale_weekdays[d.getUTCDay()]},b:function formatUTCShortMonth(d){return locale_shortMonths[d.getUTCMonth()]},B:function formatUTCMonth(d){return locale_months[d.getUTCMonth()]},c:null,d:src_locale_formatUTCDayOfMonth,e:src_locale_formatUTCDayOfMonth,f:src_locale_formatUTCMicroseconds,H:src_locale_formatUTCHour24,I:src_locale_formatUTCHour12,j:src_locale_formatUTCDayOfYear,L:src_locale_formatUTCMilliseconds,m:src_locale_formatUTCMonthNumber,M:src_locale_formatUTCMinutes,p:function formatUTCPeriod(d){return locale_periods[+(d.getUTCHours()>=12)]},q:function formatUTCQuarter(d){return 1+~~(d.getUTCMonth()/3)},Q:src_locale_formatUnixTimestamp,s:src_locale_formatUnixTimestampSeconds,S:src_locale_formatUTCSeconds,u:src_locale_formatUTCWeekdayNumberMonday,U:src_locale_formatUTCWeekNumberSunday,V:src_locale_formatUTCWeekNumberISO,w:src_locale_formatUTCWeekdayNumberSunday,W:src_locale_formatUTCWeekNumberMonday,x:null,X:null,y:src_locale_formatUTCYear,Y:src_locale_formatUTCFullYear,Z:src_locale_formatUTCZone,"%":src_locale_formatLiteralPercent},parses={a:function parseShortWeekday(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},A:function parseWeekday(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},b:function parseShortMonth(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup[n[0].toLowerCase()],i+n[0].length):-1},B:function parseMonth(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup[n[0].toLowerCase()],i+n[0].length):-1},c:function parseLocaleDateTime(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)},d:src_locale_parseDayOfMonth,e:src_locale_parseDayOfMonth,f:src_locale_parseMicroseconds,H:src_locale_parseHour24,I:src_locale_parseHour24,j:src_locale_parseDayOfYear,L:src_locale_parseMilliseconds,m:src_locale_parseMonthNumber,M:src_locale_parseMinutes,p:function parsePeriod(d,string,i){var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup[n[0].toLowerCase()],i+n[0].length):-1},q:src_locale_parseQuarter,Q:src_locale_parseUnixTimestamp,s:src_locale_parseUnixTimestampSeconds,S:src_locale_parseSeconds,u:src_locale_parseWeekdayNumberMonday,U:src_locale_parseWeekNumberSunday,V:src_locale_parseWeekNumberISO,w:src_locale_parseWeekdayNumberSunday,W:src_locale_parseWeekNumberMonday,x:function parseLocaleDate(d,string,i){return parseSpecifier(d,locale_date,string,i)},X:function parseLocaleTime(d,string,i){return parseSpecifier(d,locale_time,string,i)},y:src_locale_parseYear,Y:src_locale_parseFullYear,Z:src_locale_parseZone,"%":src_locale_parseLiteralPercent};function newFormat(specifier,formats){return function(date){var c,pad,format,string=[],i=-1,j=0,n=specifier.length;for(date instanceof Date||(date=new Date(+date));++i<n;)37===specifier.charCodeAt(i)&&(string.push(specifier.slice(j,i)),null!=(pad=src_locale_pads[c=specifier.charAt(++i)])?c=specifier.charAt(++i):pad="e"===c?" ":"0",(format=formats[c])&&(c=format(date,pad)),string.push(c),j=i+1);return string.push(specifier.slice(j,i)),string.join("")}}function newParse(specifier,Z){return function(string){var week,day,d=d3_time_format_src_locale_newDate(1900,void 0,1);if(parseSpecifier(d,specifier,string+="",0)!=string.length)return null;if("Q"in d)return new Date(d.Q);if("s"in d)return new Date(1e3*d.s+("L"in d?d.L:0));if(!Z||"Z"in d||(d.Z=0),"p"in d&&(d.H=d.H%12+12*d.p),void 0===d.m&&(d.m="q"in d?d.q:0),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(day=(week=src_locale_utcDate(d3_time_format_src_locale_newDate(d.y,0,1))).getUTCDay(),week=day>4||0===day?utcMonday.ceil(week):utcMonday(week),week=src_utcDay.offset(week,7*(d.V-1)),d.y=week.getUTCFullYear(),d.m=week.getUTCMonth(),d.d=week.getUTCDate()+(d.w+6)%7):(day=(week=src_locale_localDate(d3_time_format_src_locale_newDate(d.y,0,1))).getDay(),week=day>4||0===day?monday.ceil(week):monday(week),week=src_day.offset(week,7*(d.V-1)),d.y=week.getFullYear(),d.m=week.getMonth(),d.d=week.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),day="Z"in d?src_locale_utcDate(d3_time_format_src_locale_newDate(d.y,0,1)).getUTCDay():src_locale_localDate(d3_time_format_src_locale_newDate(d.y,0,1)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(day+5)%7:d.w+7*d.U-(day+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,src_locale_utcDate(d)):src_locale_localDate(d)}}function parseSpecifier(d,specifier,string,j){for(var c,parse,i=0,n=specifier.length,m=string.length;i<n;){if(j>=m)return-1;if(37===(c=specifier.charCodeAt(i++))){if(c=specifier.charAt(i++),!(parse=parses[c in src_locale_pads?specifier.charAt(i++):c])||(j=parse(d,string,j))<0)return-1}else if(c!=string.charCodeAt(j++))return-1}return j}return(formats.x=newFormat(locale_date,formats),formats.X=newFormat(locale_time,formats),formats.c=newFormat(locale_dateTime,formats),utcFormats.x=newFormat(locale_date,utcFormats),utcFormats.X=newFormat(locale_time,utcFormats),utcFormats.c=newFormat(locale_dateTime,utcFormats),{format:function(specifier){var f=newFormat(specifier+="",formats);return f.toString=function(){return specifier},f},parse:function(specifier){var p=newParse(specifier+="",!1);return p.toString=function(){return specifier},p},utcFormat:function(specifier){var f=newFormat(specifier+="",utcFormats);return f.toString=function(){return specifier},f},utcParse:function(specifier){var p=newParse(specifier+="",!0);return p.toString=function(){return specifier},p}})}(definition),src_defaultLocale_timeFormat=d3_time_format_src_defaultLocale_locale.format,d3_time_format_src_defaultLocale_locale.parse,src_defaultLocale_utcFormat=d3_time_format_src_defaultLocale_locale.utcFormat,d3_time_format_src_defaultLocale_locale.utcParse,d3_time_format_src_defaultLocale_locale}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var time_durationSecond=1e3,time_durationMinute=60*time_durationSecond,time_durationHour=60*time_durationMinute,time_durationDay=24*time_durationHour,time_durationWeek=7*time_durationDay,time_durationMonth=30*time_durationDay,time_durationYear=365*time_durationDay;function time_date(t){return new Date(t)}function time_number(t){return t instanceof Date?+t:+new Date(+t)}function calendar(year,month,week,day,hour,minute,second,millisecond,format){var scale=continuous(),invert=scale.invert,domain=scale.domain,formatMillisecond=format(".%L"),formatSecond=format(":%S"),formatMinute=format("%I:%M"),formatHour=format("%I %p"),formatDay=format("%a %d"),formatWeek=format("%b %d"),formatMonth=format("%B"),formatYear=format("%Y"),tickIntervals=[[second,1,time_durationSecond],[second,5,5*time_durationSecond],[second,15,15*time_durationSecond],[second,30,30*time_durationSecond],[minute,1,time_durationMinute],[minute,5,5*time_durationMinute],[minute,15,15*time_durationMinute],[minute,30,30*time_durationMinute],[hour,1,time_durationHour],[hour,3,3*time_durationHour],[hour,6,6*time_durationHour],[hour,12,12*time_durationHour],[day,1,time_durationDay],[day,2,2*time_durationDay],[week,1,time_durationWeek],[month,1,time_durationMonth],[month,3,3*time_durationMonth],[year,1,time_durationYear]];function tickFormat(date){return(second(date)<date?formatMillisecond:minute(date)<date?formatSecond:hour(date)<date?formatMinute:day(date)<date?formatHour:month(date)<date?week(date)<date?formatDay:formatWeek:year(date)<date?formatMonth:formatYear)(date)}function tickInterval(interval,start,stop){if(null==interval&&(interval=10),"number"==typeof interval){var step,target=Math.abs(stop-start)/interval,i=bisector((function(i){return i[2]})).right(tickIntervals,target);return i===tickIntervals.length?(step=tickStep(start/time_durationYear,stop/time_durationYear,interval),interval=year):i?(step=(i=tickIntervals[target/tickIntervals[i-1][2]<tickIntervals[i][2]/target?i-1:i])[1],interval=i[0]):(step=Math.max(tickStep(start,stop,interval),1),interval=millisecond),interval.every(step)}return interval}return scale.invert=function(y){return new Date(invert(y))},scale.domain=function(_){return arguments.length?domain(Array.from(_,time_number)):domain().map(time_date)},scale.ticks=function(interval){var t,d=domain(),t0=d[0],t1=d[d.length-1],r=t1<t0;return r&&(t=t0,t0=t1,t1=t),t=(t=tickInterval(interval,t0,t1))?t.range(t0,t1+1):[],r?t.reverse():t},scale.tickFormat=function(count,specifier){return null==specifier?tickFormat:format(specifier)},scale.nice=function(interval){var d=domain();return(interval=tickInterval(interval,d[0],d[d.length-1]))?domain(src_nice(d,interval)):scale},scale.copy=function(){return continuous_copy(scale,calendar(year,month,week,day,hour,minute,second,millisecond,format))},scale}function sequential_transformer(){var t0,t1,k10,transform,unknown,x0=0,x1=1,interpolator=continuous_identity,clamp=!1;function scale(x){return isNaN(x=+x)?unknown:interpolator(0===k10?.5:(x=(transform(x)-t0)*k10,clamp?Math.max(0,Math.min(1,x)):x))}function range(interpolate){return function(_){var r0,r1;return arguments.length?([r0,r1]=_,interpolator=interpolate(r0,r1),scale):[interpolator(0),interpolator(1)]}}return scale.domain=function(_){return arguments.length?([x0,x1]=_,t0=transform(x0=+x0),t1=transform(x1=+x1),k10=t0===t1?0:1/(t1-t0),scale):[x0,x1]},scale.clamp=function(_){return arguments.length?(clamp=!!_,scale):clamp},scale.interpolator=function(_){return arguments.length?(interpolator=_,scale):interpolator},scale.range=range(src_value),scale.rangeRound=range(src_round),scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},function(t){return transform=t,t0=t(x0),t1=t(x1),k10=t0===t1?0:1/(t1-t0),scale}}function sequential_copy(source,target){return target.domain(source.domain()).interpolator(source.interpolator()).clamp(source.clamp()).unknown(source.unknown())}function sequential(){var scale=linearish(sequential_transformer()(continuous_identity));return scale.copy=function(){return sequential_copy(scale,sequential())},initInterpolator.apply(scale,arguments)}function sequentialPow(){var scale=powish(sequential_transformer());return scale.copy=function(){return sequential_copy(scale,sequentialPow()).exponent(scale.exponent())},initInterpolator.apply(scale,arguments)}function diverging_transformer(){var t0,t1,t2,k10,k21,transform,unknown,x0=0,x1=.5,x2=1,s=1,interpolator=continuous_identity,clamp=!1;function scale(x){return isNaN(x=+x)?unknown:(x=.5+((x=+transform(x))-t1)*(s*x<s*t1?k10:k21),interpolator(clamp?Math.max(0,Math.min(1,x)):x))}function range(interpolate){return function(_){var r0,r1,r2;return arguments.length?([r0,r1,r2]=_,interpolator=piecewise_piecewise(interpolate,[r0,r1,r2]),scale):[interpolator(0),interpolator(.5),interpolator(1)]}}return scale.domain=function(_){return arguments.length?([x0,x1,x2]=_,t0=transform(x0=+x0),t1=transform(x1=+x1),t2=transform(x2=+x2),k10=t0===t1?0:.5/(t1-t0),k21=t1===t2?0:.5/(t2-t1),s=t1<t0?-1:1,scale):[x0,x1,x2]},scale.clamp=function(_){return arguments.length?(clamp=!!_,scale):clamp},scale.interpolator=function(_){return arguments.length?(interpolator=_,scale):interpolator},scale.range=range(src_value),scale.rangeRound=range(src_round),scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},function(t){return transform=t,t0=t(x0),t1=t(x1),t2=t(x2),k10=t0===t1?0:.5/(t1-t0),k21=t1===t2?0:.5/(t2-t1),s=t1<t0?-1:1,scale}}function divergingPow(){var scale=powish(diverging_transformer());return scale.copy=function(){return sequential_copy(scale,divergingPow()).exponent(scale.exponent())},initInterpolator.apply(scale,arguments)}function scales_scale(type,scale){return arguments.length>1?(scales_scales[type]=function create(type,constructor){return function scale(){var s=constructor();return s.invertRange||(s.invertRange=s.invert?invertRange(s):s.invertExtent?invertRangeExtent(s):void 0),s.type=type,s}}(type,scale),this):Object(vega_util.v)(scales_scales,type)?scales_scales[type]:void 0}var scales_scales={[Identity]:function identity_identity(domain){var unknown;function scale(x){return isNaN(x=+x)?unknown:x}return scale.invert=scale,scale.domain=scale.range=function(_){return arguments.length?(domain=Array.from(_,d3_scale_src_number),scale):domain.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return identity_identity(domain).unknown(unknown)},domain=arguments.length?Array.from(domain,d3_scale_src_number):[0,1],linearish(scale)},[types_Linear]:function linear_linear(){var scale=continuous();return scale.copy=function(){return continuous_copy(scale,linear_linear())},initRange.apply(scale,arguments),linearish(scale)},[Log]:function log_log(){var scale=loggish(transformer()).domain([1,10]);return scale.copy=function(){return continuous_copy(scale,log_log()).base(scale.base())},initRange.apply(scale,arguments),scale},[Pow]:pow_pow,[Sqrt]:function pow_sqrt(){return pow_pow.apply(null,arguments).exponent(.5)},[Symlog]:function symlog(){var scale=symlogish(transformer());return scale.copy=function(){return continuous_copy(scale,symlog()).constant(scale.constant())},initRange.apply(scale,arguments)},[Time]:function(){return initRange.apply(calendar(src_year,src_month,sunday,src_day,src_hour,src_minute,src_second,src_millisecond,src_defaultLocale_timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},[UTC]:function(){return initRange.apply(calendar(src_utcYear,src_utcMonth,utcSunday,src_utcDay,src_utcHour,src_utcMinute,src_second,src_millisecond,src_defaultLocale_utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},[Sequential]:sequential,[Sequential+"-"+types_Linear]:sequential,[Sequential+"-"+Log]:function sequentialLog(){var scale=loggish(sequential_transformer()).domain([1,10]);return scale.copy=function(){return sequential_copy(scale,sequentialLog()).base(scale.base())},initInterpolator.apply(scale,arguments)},[Sequential+"-"+Pow]:sequentialPow,[Sequential+"-"+Sqrt]:function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)},[Sequential+"-"+Symlog]:function sequentialSymlog(){var scale=symlogish(sequential_transformer());return scale.copy=function(){return sequential_copy(scale,sequentialSymlog()).constant(scale.constant())},initInterpolator.apply(scale,arguments)},[Diverging+"-"+types_Linear]:function diverging(){var scale=linearish(diverging_transformer()(continuous_identity));return scale.copy=function(){return sequential_copy(scale,diverging())},initInterpolator.apply(scale,arguments)},[Diverging+"-"+Log]:function divergingLog(){var scale=loggish(diverging_transformer()).domain([.1,1,10]);return scale.copy=function(){return sequential_copy(scale,divergingLog()).base(scale.base())},initInterpolator.apply(scale,arguments)},[Diverging+"-"+Pow]:divergingPow,[Diverging+"-"+Sqrt]:function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)},[Diverging+"-"+Symlog]:function divergingSymlog(){var scale=symlogish(diverging_transformer());return scale.copy=function(){return sequential_copy(scale,divergingSymlog()).constant(scale.constant())},initInterpolator.apply(scale,arguments)},[types_Quantile]:function src_quantile_quantile(){var unknown,domain=[],range=[],thresholds=[];function rescale(){var i=0,n=Math.max(1,range.length);for(thresholds=new Array(n-1);++i<n;)thresholds[i-1]=quantile_quantile(domain,i/n);return scale}function scale(x){return isNaN(x=+x)?unknown:range[d3_array_src_bisect(thresholds,x)]}return scale.invertExtent=function(y){var i=range.indexOf(y);return i<0?[NaN,NaN]:[i>0?thresholds[i-1]:domain[0],i<thresholds.length?thresholds[i]:domain[domain.length-1]]},scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[];for(let d of _)null==d||isNaN(d=+d)||domain.push(d);return domain.sort(ascending),rescale()},scale.range=function(_){return arguments.length?(range=Array.from(_),rescale()):range.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.quantiles=function(){return thresholds.slice()},scale.copy=function(){return src_quantile_quantile().domain(domain).range(range).unknown(unknown)},initRange.apply(scale,arguments)},[Quantize]:function quantize_quantize(){var unknown,x0=0,x1=1,n=1,domain=[.5],range=[0,1];function scale(x){return x<=x?range[d3_array_src_bisect(domain,x,0,n)]:unknown}function rescale(){var i=-1;for(domain=new Array(n);++i<n;)domain[i]=((i+1)*x1-(i-n)*x0)/(n+1);return scale}return scale.domain=function(_){return arguments.length?([x0,x1]=_,x0=+x0,x1=+x1,rescale()):[x0,x1]},scale.range=function(_){return arguments.length?(n=(range=Array.from(_)).length-1,rescale()):range.slice()},scale.invertExtent=function(y){var i=range.indexOf(y);return i<0?[NaN,NaN]:i<1?[x0,domain[0]]:i>=n?[domain[n-1],x1]:[domain[i-1],domain[i]]},scale.unknown=function(_){return arguments.length?(unknown=_,scale):scale},scale.thresholds=function(){return domain.slice()},scale.copy=function(){return quantize_quantize().domain([x0,x1]).range(range).unknown(unknown)},initRange.apply(linearish(scale),arguments)},[Threshold]:function threshold_threshold(){var unknown,domain=[.5],range=[0,1],n=1;function scale(x){return x<=x?range[d3_array_src_bisect(domain,x,0,n)]:unknown}return scale.domain=function(_){return arguments.length?(domain=Array.from(_),n=Math.min(domain.length,range.length-1),scale):domain.slice()},scale.range=function(_){return arguments.length?(range=Array.from(_),n=Math.min(domain.length,range.length-1),scale):range.slice()},scale.invertExtent=function(y){var i=range.indexOf(y);return[domain[i-1],domain[i]]},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return threshold_threshold().domain(domain).range(range).unknown(unknown)},initRange.apply(scale,arguments)},[BinOrdinal]:function scaleBinOrdinal(){var domain=[],range=[];function scale(x){return null==x||x!=x?void 0:range[(d3_array_src_bisect(domain,x)-1)%range.length]}return scale.domain=function(_){return arguments.length?(domain=numbers_numbers(_),scale):domain.slice()},scale.range=function(_){return arguments.length?(range=slice.call(_),scale):range.slice()},scale.tickFormat=function(count,specifier){return src_tickFormat(domain[0],Object(vega_util.T)(domain),null==count?10:count,specifier)},scale.copy=function(){return scaleBinOrdinal().domain(scale.domain()).range(scale.range())},scale},[Ordinal]:ordinal,[Band]:scaleBand_band,[Point]:function scaleBand_point(){return function pointish(scale){var copy=scale.copy;return scale.padding=scale.paddingOuter,delete scale.paddingInner,scale.copy=function(){return pointish(copy())},scale}(scaleBand_band().paddingInner(1))}};for(var scales_key in scales_scales)scales_scale(scales_key,scales_scales[scales_key]);const scaleProps=["clamp","base","constant","exponent"];function interpolateRange(interpolator,range){var start=range[0],span=Object(vega_util.T)(range)-start;return function(i){return interpolator(start+i*span)}}function interpolateColors(colors,type,gamma){return piecewise_piecewise(interpolate_interpolate(type||"rgb",gamma),colors)}function quantizeInterpolator(interpolator,count){for(var samples=new Array(count),n=count+1,i=0;i<count;)samples[i]=interpolator(++i/n);return samples}function scaleFraction(scale,min,max){var i,t,s,delta=max-min;return delta&&Number.isFinite(delta)?(i=(t=scale.type).indexOf("-"),t=i<0?t:t.slice(i+1),s=scales_scale(t)().domain([min,max]).range([0,1]),scaleProps.forEach(m=>scale[m]?s[m](scale[m]()):0),s):Object(vega_util.l)(.5)}function interpolate_interpolate(type,gamma){var interp=d3_interpolate_src_namespaceObject[function interpolate_method(type){return"interpolate"+type.toLowerCase().split("-").map((function(s){return s[0].toUpperCase()+s.slice(1)})).join("")}(type)];return null!=gamma&&interp&&interp.gamma?interp.gamma(gamma):interp}function schemes_colors(palette){for(var n=palette.length/6|0,c=new Array(n),i=0;i<n;)c[i]="#"+palette.slice(6*i,6*++i);return c}function schemes_apply(_,f){for(let k in _)schemes_scheme(k,f(_[k]))}const schemes={};function schemes_scheme(name,scheme){return name=name&&name.toLowerCase(),arguments.length>1?(schemes[name]=scheme,this):schemes[name]}function tickCount(scale,count,minStep){var step;return Object(vega_util.E)(count)&&(scale.bins&&(count=Math.max(count,scale.bins.length)),null!=minStep&&(count=Math.min(count,~~(Object(vega_util.W)(scale.domain())/minStep)||1))),Object(vega_util.F)(count)&&(step=count.step,count=count.interval),Object(vega_util.H)(count)&&(count=scale.type===Time?timeInterval(count):scale.type==UTC?utcInterval(count):Object(vega_util.n)("Only time and utc scales accept interval strings."),step&&(count=count.every(step))),count}function validTicks(scale,ticks,count){var range=scale.range(),lo=Math.floor(range[0]),hi=Math.ceil(Object(vega_util.T)(range));if(lo>hi&&(range=hi,hi=lo,lo=range),ticks=ticks.filter((function(v){return v=scale(v),lo<=v&&v<=hi})),count>0&&ticks.length>1){for(var endpoints=[ticks[0],Object(vega_util.T)(ticks)];ticks.length>count&&ticks.length>=3;)ticks=ticks.filter((function(_,i){return!(i%2)}));ticks.length<3&&(ticks=endpoints)}return ticks}function tickValues(scale,count){return scale.bins?validTicks(scale,scale.bins):scale.ticks?scale.ticks(count):scale.domain()}function ticks_tickFormat(scale,count,specifier,formatType,noSkip){var type=scale.type,format=type===Time||formatType===Time?format_timeFormat(specifier):type===UTC||formatType===UTC?format_utcFormat(specifier):scale.tickFormat?scale.tickFormat(count,specifier):specifier?defaultLocale_format(specifier):String;if(isLogarithmic(type)){var logfmt=function variablePrecision(specifier){var s=formatSpecifier(specifier||",");if(null==s.precision){switch(s.precision=12,s.type){case"%":s.precision-=2;break;case"e":s.precision-=1}return function trimZeroes(format,decimalChar){return function(x){var idx,end,str=format(x),dec=str.indexOf(decimalChar);if(dec<0)return str;for(end=(idx=function rightmostDigit(str,dec){var c,i=str.lastIndexOf("e");if(i>0)return i;for(i=str.length;--i>dec;)if((c=str.charCodeAt(i))>=48&&c<=57)return i+1}(str,dec))<str.length?str.slice(idx):"";--idx>dec;)if("0"!==str[idx]){++idx;break}return str.slice(0,idx)+end}}(defaultLocale_format(s),defaultLocale_format(".1f")(1)[1])}return defaultLocale_format(s)}(specifier);format=noSkip||scale.bins?logfmt:function ticks_filter(sourceFormat,targetFormat){return _=>sourceFormat(_)?targetFormat(_):""}(format,logfmt)}return format}function AxisTicks(params){Transform.call(this,null,params)}function DataJoin(params){Transform.call(this,null,params)}function defaultItemCreate(){return ingest({})}function isExit(t){return t.exit}function Encode(params){Transform.call(this,null,params)}schemes_apply({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},schemes_colors),schemes_apply({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},_=>interpolateColors(schemes_colors(_))),Object(vega_util.y)(AxisTicks,Transform).transform=function(_,pulse){if(this.value&&!_.modified())return pulse.StopPropagation;var out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),ticks=this.value,scale=_.scale,count=tickCount(scale,null==_.count?_.values?_.values.length:10:_.count,_.minstep),format=_.format||ticks_tickFormat(scale,count,_.formatSpecifier,_.formatType,!!_.values),values=_.values?validTicks(scale,_.values,count):tickValues(scale,count);return ticks&&(out.rem=ticks),ticks=values.map((function(value,i){return ingest({index:i/(values.length-1||1),value:value,label:format(value)})})),_.extra&&ticks.length&&ticks.push(ingest({index:-1,extra:{value:ticks[0].value},label:""})),out.source=ticks,out.add=ticks,this.value=ticks,out},Object(vega_util.y)(DataJoin,Transform).transform=function(_,pulse){var df=pulse.dataflow,out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),item=_.item||defaultItemCreate,key=_.key||tupleid,map=this.value;return Object(vega_util.A)(out.encode)&&(out.encode=null),map&&(_.modified("key")||pulse.modified(key))&&Object(vega_util.n)("DataJoin does not support modified key function or fields."),map||(pulse=pulse.addAll(),this.value=map=Object(vega_util.s)().test(isExit),map.lookup=function(t){return map.get(key(t))}),pulse.visit(pulse.ADD,(function(t){var k=key(t),x=map.get(k);x?x.exit?(map.empty--,out.add.push(x)):out.mod.push(x):(map.set(k,x=item(t)),out.add.push(x)),x.datum=t,x.exit=!1})),pulse.visit(pulse.MOD,(function(t){var k=key(t),x=map.get(k);x&&(x.datum=t,out.mod.push(x))})),pulse.visit(pulse.REM,(function(t){var k=key(t),x=map.get(k);t!==x.datum||x.exit||(out.rem.push(x),x.exit=!0,++map.empty)})),pulse.changed(pulse.ADD_MOD)&&out.modifies("datum"),_.clean&&map.empty>df.cleanThreshold&&df.runAfter(map.clean),out},Object(vega_util.y)(Encode,Transform).transform=function(_,pulse){var out=pulse.fork(pulse.ADD_REM),fmod=_.mod||!1,encoders=_.encoders,encode=pulse.encode;if(Object(vega_util.A)(encode)){if(!out.changed()&&!encode.every((function(e){return encoders[e]})))return pulse.StopPropagation;encode=encode[0],out.encode=null}var reenter="enter"===encode,update=encoders.update||vega_util.r,enter=encoders.enter||vega_util.r,exit=encoders.exit||vega_util.r,set=(encode&&!reenter?encoders[encode]:update)||vega_util.r;if(pulse.changed(pulse.ADD)&&(pulse.visit(pulse.ADD,(function(t){enter(t,_),update(t,_)})),out.modifies(enter.output),out.modifies(update.output),set!==vega_util.r&&set!==update&&(pulse.visit(pulse.ADD,(function(t){set(t,_)})),out.modifies(set.output))),pulse.changed(pulse.REM)&&exit!==vega_util.r&&(pulse.visit(pulse.REM,(function(t){exit(t,_)})),out.modifies(exit.output)),reenter||set!==vega_util.r){var flag=pulse.MOD|(_.modified()?pulse.REFLOW:0);reenter?(pulse.visit(flag,(function(t){var mod=enter(t,_)||fmod;(set(t,_)||mod)&&out.mod.push(t)})),out.mod.length&&out.modifies(enter.output)):pulse.visit(flag,(function(t){(set(t,_)||fmod)&&out.mod.push(t)})),out.mod.length&&out.modifies(set.output)}return out.changed()?out:pulse.StopPropagation};var legend_types_Symbols="symbol",Discrete="discrete";const labels_symbols={[types_Quantile]:"quantiles",[Quantize]:"thresholds",[Threshold]:"domain"},labels_formats={[types_Quantile]:"quantiles",[Quantize]:"domain"};function labelValues(scale,count){return scale.bins?function binValues(bins){const values=bins.slice(0,-1);return values.max=Object(vega_util.T)(bins),values}(scale.bins):labels_symbols[scale.type]?function thresholdValues(thresholds){const values=[-1/0].concat(thresholds);return values.max=1/0,values}(scale[labels_symbols[scale.type]]()):tickValues(scale,count)}function labelFormat(scale,count,type,specifier,formatType,noSkip){const format=labels_formats[scale.type]&&formatType!==Time&&formatType!==UTC?function thresholdFormat(scale,specifier){var i,_=scale[labels_formats[scale.type]](),n=_.length,d=n>1?_[1]-_[0]:_[0];for(i=1;i<n;++i)d=Math.min(d,_[i]-_[i-1]);return src_tickFormat(0,d,30,specifier)}(scale,specifier):ticks_tickFormat(scale,count,specifier,formatType,noSkip);return type===legend_types_Symbols&&function isDiscreteRange(scale){return labels_symbols[scale.type]||scale.bins}(scale)?function formatRange(format){return function(value,index,array){var limit=array[index+1]||array.max||1/0,lo=formatValue(value,format),hi=formatValue(limit,format);return lo&&hi?lo+"–"+hi:hi?"< "+hi:"≥ "+lo}}(format):type===Discrete?function formatDiscrete(format){return function(value,index){return index?format(value):null}}(format):function formatPoint(format){return function(value){return format(value)}}(format)}function formatValue(value,format){return Number.isFinite(value)?format(value):null}function LegendEntries(params){Transform.call(this,[],params)}Object(vega_util.y)(LegendEntries,Transform).transform=function(_,pulse){if(null!=this.value&&!_.modified())return pulse.StopPropagation;var domain,fraction,size,offset,ellipsis,out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),items=this.value,type=_.type||legend_types_Symbols,scale=_.scale,limit=+_.limit,count=tickCount(scale,null==_.count?5:_.count,_.minstep),format=_.format||labelFormat(scale,count,type,_.formatSpecifier,_.formatType,!!_.values),values=_.values||labelValues(scale,count);return items&&(out.rem=items),type===legend_types_Symbols?(limit&&values.length>limit?(pulse.dataflow.warn("Symbol legend count exceeds limit, filtering items."),items=values.slice(0,limit-1),ellipsis=!0):items=values,Object(vega_util.D)(size=_.size)?(_.values||0!==scale(items[0])||(items=items.slice(1)),offset=items.reduce((function(max,value){return Math.max(max,size(value,_))}),0)):size=Object(vega_util.l)(offset=size||8),items=items.map((function(value,index){return ingest({index:index,label:format(value,index,values),value:value,offset:offset,size:size(value,_)})})),ellipsis&&(ellipsis=values[items.length],items.push(ingest({index:items.length,label:`…${values.length-items.length} entries`,value:ellipsis,offset:offset,size:size(ellipsis,_)})))):"gradient"===type?(domain=scale.domain(),fraction=scaleFraction(scale,domain[0],Object(vega_util.T)(domain)),values.length<3&&!_.values&&domain[0]!==Object(vega_util.T)(domain)&&(values=[domain[0],Object(vega_util.T)(domain)]),items=values.map((function(value,index){return ingest({index:index,label:format(value,index,values),value:value,perc:fraction(value)})}))):(size=values.length-1,fraction=function labelFraction(scale){var domain=scale.domain(),count=domain.length-1,lo=+domain[0],hi=+Object(vega_util.T)(domain),span=hi-lo;if(scale.type===Threshold){var adjust=count?span/count:.1;span=(hi+=adjust)-(lo-=adjust)}return function(value){return(value-lo)/span}}(scale),items=values.map((function(value,index){return ingest({index:index,label:format(value,index,values),value:value,perc:index?fraction(value):0,perc2:index===size?1:fraction(values[index+1])})}))),out.source=items,out.add=items,this.value=items,out};var Paths=Object(vega_util.s)({line:LinkPath_line,"line-radial":function lineR(sa,sr,ta,tr){return LinkPath_line(sr*Math.cos(sa),sr*Math.sin(sa),tr*Math.cos(ta),tr*Math.sin(ta))},arc:LinkPath_arc,"arc-radial":function arcR(sa,sr,ta,tr){return LinkPath_arc(sr*Math.cos(sa),sr*Math.sin(sa),tr*Math.cos(ta),tr*Math.sin(ta))},curve:LinkPath_curve,"curve-radial":function curveR(sa,sr,ta,tr){return LinkPath_curve(sr*Math.cos(sa),sr*Math.sin(sa),tr*Math.cos(ta),tr*Math.sin(ta))},"orthogonal-horizontal":function orthoX(sx,sy,tx,ty){return"M"+sx+","+sy+"V"+ty+"H"+tx},"orthogonal-vertical":function orthoY(sx,sy,tx,ty){return"M"+sx+","+sy+"H"+tx+"V"+ty},"orthogonal-radial":function orthoR(sa,sr,ta,tr){var sc=Math.cos(sa),ss=Math.sin(sa),tc=Math.cos(ta),ts=Math.sin(ta),sf=Math.abs(ta-sa)>Math.PI?ta<=sa:ta>sa;return"M"+sr*sc+","+sr*ss+"A"+sr+","+sr+" 0 0,"+(sf?1:0)+" "+sr*tc+","+sr*ts+"L"+tr*tc+","+tr*ts},"diagonal-horizontal":function diagonalX(sx,sy,tx,ty){var m=(sx+tx)/2;return"M"+sx+","+sy+"C"+m+","+sy+" "+m+","+ty+" "+tx+","+ty},"diagonal-vertical":function diagonalY(sx,sy,tx,ty){var m=(sy+ty)/2;return"M"+sx+","+sy+"C"+sx+","+m+" "+tx+","+m+" "+tx+","+ty},"diagonal-radial":function diagonalR(sa,sr,ta,tr){var sc=Math.cos(sa),ss=Math.sin(sa),tc=Math.cos(ta),ts=Math.sin(ta),mr=(sr+tr)/2;return"M"+sr*sc+","+sr*ss+"C"+mr*sc+","+mr*ss+" "+mr*tc+","+mr*ts+" "+tr*tc+","+tr*ts}});function sourceX(t){return t.source.x}function sourceY(t){return t.source.y}function targetX(t){return t.target.x}function targetY(t){return t.target.y}function LinkPath(params){Transform.call(this,{},params)}function LinkPath_line(sx,sy,tx,ty){return"M"+sx+","+sy+"L"+tx+","+ty}function LinkPath_arc(sx,sy,tx,ty){var dx=tx-sx,dy=ty-sy,rr=Math.sqrt(dx*dx+dy*dy)/2;return"M"+sx+","+sy+"A"+rr+","+rr+" "+180*Math.atan2(dy,dx)/Math.PI+" 0 1 "+tx+","+ty}function LinkPath_curve(sx,sy,tx,ty){var dx=tx-sx,dy=ty-sy,ix=.2*(dx+dy),iy=.2*(dy-dx);return"M"+sx+","+sy+"C"+(sx+ix)+","+(sy+iy)+" "+(tx+iy)+","+(ty-ix)+" "+tx+","+ty}function sum_sum(values,valueof){let sum=0;if(void 0===valueof)for(let value of values)(value=+value)&&(sum+=value);else{let index=-1;for(let value of values)(value=+valueof(value,++index,values))&&(sum+=value)}return sum}function Pie(params){Transform.call(this,null,params)}LinkPath.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},Object(vega_util.y)(LinkPath,Transform).transform=function(_,pulse){var sx=_.sourceX||sourceX,sy=_.sourceY||sourceY,tx=_.targetX||targetX,ty=_.targetY||targetY,as=_.as||"path",orient=_.orient||"vertical",shape=_.shape||"line",path=Paths.get(shape+"-"+orient)||Paths.get(shape);return path||Object(vega_util.n)("LinkPath unsupported type: "+_.shape+(_.orient?"-"+_.orient:"")),pulse.visit(pulse.SOURCE,(function(t){t[as]=path(sx(t),sy(t),tx(t),ty(t))})),pulse.reflow(_.modified()).modifies(as)},Pie.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},Object(vega_util.y)(Pie,Transform).transform=function(_,pulse){var i,t,v,as=_.as||["startAngle","endAngle"],startAngle=as[0],endAngle=as[1],field=_.field||vega_util.N,start=_.startAngle||0,stop=null!=_.endAngle?_.endAngle:2*Math.PI,data=pulse.source,values=data.map(field),n=values.length,a=start,k=(stop-start)/sum_sum(values),index=src_range(n);for(_.sort&&index.sort((function(a,b){return values[a]-values[b]})),i=0;i<n;++i)v=values[index[i]],(t=data[index[i]])[startAngle]=a,t[endAngle]=a+=v*k;return this.value=values,pulse.reflow(_.modified()).modifies(as)};var DEFAULT_COUNT=5;function includePad(type){return isContinuous(type)&&type!==Sequential}var Scale_SKIP=Object(vega_util.cb)(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Scale(params){Transform.call(this,null,params),this.modified(!0)}function domainCheck(type,domain,df){isLogarithmic(type)&&(Math.abs(domain.reduce((function(s,v){return s+(v<0?-1:v>0?1:0)}),0))!==domain.length&&df.warn("Log scale domain includes zero: "+Object(vega_util.Y)(domain)));return domain}function adjustScheme(scheme,extent,reverse){return Object(vega_util.D)(scheme)&&(extent||reverse)?interpolateRange(scheme,flip(extent||[0,1],reverse)):scheme}function flip(array,reverse){return reverse?array.slice().reverse():array}function SortItems(params){Transform.call(this,null,params)}Object(vega_util.y)(Scale,Transform).transform=function(_,pulse){var df=pulse.dataflow,scale=this.value,key=function scaleKey(_){var n,t=_.type,d="";if(t===Sequential)return Sequential+"-"+types_Linear;(function isContinuousColor(_){const t=_.type;return isContinuous(t)&&t!==Time&&t!==UTC&&(_.scheme||_.range&&_.range.length&&_.range.every(vega_util.H))})(_)&&(n=_.rawDomain?_.rawDomain.length:_.domain?_.domain.length+ +(null!=_.domainMid):0,d=2===n?Sequential+"-":3===n?Diverging+"-":"");return(d+t||types_Linear).toLowerCase()}(_);for(key in scale&&key===scale.type||(this.value=scale=scales_scale(key)()),_)if(!Scale_SKIP[key]){if("padding"===key&&includePad(scale.type))continue;Object(vega_util.D)(scale[key])?scale[key](_[key]):df.warn("Unsupported scale property: "+key)}return function configureRange(scale,_,count){var type=scale.type,round=_.round||!1,range=_.range;if(null!=_.rangeStep)range=function configureRangeStep(type,_,count){type!==Band&&type!==Point&&Object(vega_util.n)("Only band and point scales support rangeStep.");var outer=(null!=_.paddingOuter?_.paddingOuter:_.padding)||0,inner=type===Point?1:(null!=_.paddingInner?_.paddingInner:_.padding)||0;return[0,_.rangeStep*bandSpace(count,inner,outer)]}(type,_,count);else if(_.scheme&&(range=function configureScheme(type,_,count){var name,scheme,extent=_.schemeExtent;Object(vega_util.A)(_.scheme)?scheme=interpolateColors(_.scheme,_.interpolate,_.interpolateGamma):(name=_.scheme.toLowerCase(),(scheme=schemes_scheme(name))||Object(vega_util.n)(`Unrecognized scheme name: ${_.scheme}`));return count=type===Threshold?count+1:type===BinOrdinal?count-1:type===types_Quantile||type===Quantize?+_.schemeCount||DEFAULT_COUNT:count,isInterpolating(type)?adjustScheme(scheme,extent,_.reverse):Object(vega_util.D)(scheme)?quantizeInterpolator(adjustScheme(scheme,extent),count):type===Ordinal?scheme:scheme.slice(0,count)}(type,_,count),Object(vega_util.D)(range))){if(scale.interpolator)return scale.interpolator(range);Object(vega_util.n)(`Scale type ${type} does not support interpolating color schemes.`)}if(range&&isInterpolating(type))return scale.interpolator(interpolateColors(flip(range,_.reverse),_.interpolate,_.interpolateGamma));range&&_.interpolate&&scale.interpolate?scale.interpolate(interpolate_interpolate(_.interpolate,_.interpolateGamma)):Object(vega_util.D)(scale.round)?scale.round(round):Object(vega_util.D)(scale.rangeRound)&&scale.interpolate(round?src_round:src_value);range&&scale.range(flip(range,_.reverse))}(scale,_,function configureBins(scale,_,count){let bins=_.bins;if(bins&&!Object(vega_util.A)(bins)){let domain=scale.domain(),lo=domain[0],hi=Object(vega_util.T)(domain),start=null==bins.start?lo:bins.start,stop=null==bins.stop?hi:bins.stop,step=bins.step;step||Object(vega_util.n)("Scale bins parameter missing step property."),start<lo&&(start=step*Math.ceil(lo/step)),stop>hi&&(stop=step*Math.floor(hi/step)),bins=src_range(start,stop+step/2,step)}bins?scale.bins=bins:scale.bins&&delete scale.bins;scale.type===BinOrdinal&&(bins?_.domain||_.domainRaw||(scale.domain(bins),count=bins.length):scale.bins=scale.domain());return count}(scale,_,function configureDomain(scale,_,df){var raw=function rawDomain(scale,raw,df){return raw?(scale.domain(domainCheck(scale.type,raw,df)),raw.length):-1}(scale,_.domainRaw,df);if(raw>-1)return raw;var n,mid,domain=_.domain,type=scale.type,zero=_.zero||void 0===_.zero&&function includeZero(scale){const type=scale.type;return!scale.bins&&(type===types_Linear||type===Pow||type===Sqrt)}(scale);if(!domain)return 0;includePad(type)&&_.padding&&domain[0]!==Object(vega_util.T)(domain)&&(domain=function padDomain(type,domain,range,pad,exponent,constant){var span=Math.abs(Object(vega_util.T)(range)-range[0]),frac=span/(span-2*pad),d=type===Log?Object(vega_util.lb)(domain,null,frac):type===Sqrt?Object(vega_util.mb)(domain,null,frac,.5):type===Pow?Object(vega_util.mb)(domain,null,frac,exponent||1):type===Symlog?Object(vega_util.nb)(domain,null,frac,constant||1):Object(vega_util.kb)(domain,null,frac);return(domain=domain.slice())[0]=d[0],domain[domain.length-1]=d[1],domain}(type,domain,_.range,_.padding,_.exponent,_.constant));(zero||null!=_.domainMin||null!=_.domainMax||null!=_.domainMid)&&(n=(domain=domain.slice()).length-1||1,zero&&(domain[0]>0&&(domain[0]=0),domain[n]<0&&(domain[n]=0)),null!=_.domainMin&&(domain[0]=_.domainMin),null!=_.domainMax&&(domain[n]=_.domainMax),null!=_.domainMid&&(((mid=_.domainMid)<domain[0]||mid>domain[n])&&df.warn("Scale domainMid exceeds domain min or max.",mid),domain.splice(n,0,mid)));scale.domain(domainCheck(type,domain,df)),type===Ordinal&&scale.unknown(_.domainImplicit?ordinal_implicit:void 0);_.nice&&scale.nice&&scale.nice(!0!==_.nice&&tickCount(scale,_.nice)||null);return domain.length}(scale,_,df))),pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS)},Object(vega_util.y)(SortItems,Transform).transform=function(_,pulse){var mod=_.modified("sort")||pulse.changed(pulse.ADD)||pulse.modified(_.sort.fields)||pulse.modified("datum");return mod&&pulse.source.sort(stableCompare(_.sort)),this.modified(mod),pulse};var DefOutput=["y0","y1"];function Stack(params){Transform.call(this,null,params)}function stackCenter(group,max,field,y0,y1){for(var t,last=(max-group.sum)/2,m=group.length,j=0;j<m;++j)(t=group[j])[y0]=last,t[y1]=last+=Math.abs(field(t))}function stackNormalize(group,max,field,y0,y1){for(var t,scale=1/group.sum,last=0,m=group.length,j=0,v=0;j<m;++j)(t=group[j])[y0]=last,t[y1]=last=scale*(v+=Math.abs(field(t)))}function stackZero(group,max,field,y0,y1){for(var v,t,lastPos=0,lastNeg=0,m=group.length,j=0;j<m;++j)(v=+field(t=group[j]))<0?(t[y0]=lastNeg,t[y1]=lastNeg+=v):(t[y0]=lastPos,t[y1]=lastPos+=v)}function contours_noop(){}Stack.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:DefOutput}]},Object(vega_util.y)(Stack,Transform).transform=function(_,pulse){var groups,i,n,max,as=_.as||DefOutput,y0=as[0],y1=as[1],sort=stableCompare(_.sort),field=_.field||vega_util.N,stack="center"===_.offset?stackCenter:"normalize"===_.offset?stackNormalize:stackZero;for(groups=function Stack_partition(data,groupby,sort,field){var map,i,n,m,t,k,g,s,max,groups=[],get=function(f){return f(t)};if(null==groupby)groups.push(data.slice());else for(map={},i=0,n=data.length;i<n;++i)t=data[i],k=groupby.map(get),(g=map[k])||(map[k]=g=[],groups.push(g)),g.push(t);for(k=0,max=0,m=groups.length;k<m;++k){for(g=groups[k],i=0,s=0,n=g.length;i<n;++i)s+=Math.abs(field(g[i]));g.sum=s,s>max&&(max=s),sort&&g.sort(sort)}return groups.max=max,groups}(pulse.source,_.groupby,sort,field),i=0,n=groups.length,max=groups.max;i<n;++i)stack(groups[i],max,field,y0,y1);return pulse.reflow(_.modified()).modifies(as)};const cases=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];var util_contours=function(){var dx=1,dy=1,smooth=smoothLinear;function contours(values,tz){return tz.map(value=>contour(values,value))}function contour(values,value){var polygons=[],holes=[];return function isorings(values,value,callback){var x,y,t0,t1,t2,t3,fragmentByStart=new Array,fragmentByEnd=new Array;x=y=-1,t1=values[0]>=value,cases[t1<<1].forEach(stitch);for(;++x<dx-1;)t0=t1,t1=values[x+1]>=value,cases[t0|t1<<1].forEach(stitch);cases[t1<<0].forEach(stitch);for(;++y<dy-1;){for(x=-1,t1=values[y*dx+dx]>=value,t2=values[y*dx]>=value,cases[t1<<1|t2<<2].forEach(stitch);++x<dx-1;)t0=t1,t1=values[y*dx+dx+x+1]>=value,t3=t2,t2=values[y*dx+x+1]>=value,cases[t0|t1<<1|t2<<2|t3<<3].forEach(stitch);cases[t1|t2<<3].forEach(stitch)}x=-1,t2=values[y*dx]>=value,cases[t2<<2].forEach(stitch);for(;++x<dx-1;)t3=t2,t2=values[y*dx+x+1]>=value,cases[t2<<2|t3<<3].forEach(stitch);function stitch(line){var f,g,start=[line[0][0]+x,line[0][1]+y],end=[line[1][0]+x,line[1][1]+y],startIndex=index(start),endIndex=index(end);(f=fragmentByEnd[startIndex])?(g=fragmentByStart[endIndex])?(delete fragmentByEnd[f.end],delete fragmentByStart[g.start],f===g?(f.ring.push(end),callback(f.ring)):fragmentByStart[f.start]=fragmentByEnd[g.end]={start:f.start,end:g.end,ring:f.ring.concat(g.ring)}):(delete fragmentByEnd[f.end],f.ring.push(end),fragmentByEnd[f.end=endIndex]=f):(f=fragmentByStart[endIndex])?(g=fragmentByEnd[startIndex])?(delete fragmentByStart[f.start],delete fragmentByEnd[g.end],f===g?(f.ring.push(end),callback(f.ring)):fragmentByStart[g.start]=fragmentByEnd[f.end]={start:g.start,end:f.end,ring:g.ring.concat(f.ring)}):(delete fragmentByStart[f.start],f.ring.unshift(start),fragmentByStart[f.start=startIndex]=f):fragmentByStart[startIndex]=fragmentByEnd[endIndex]={start:startIndex,end:endIndex,ring:[start,end]}}cases[t2<<3].forEach(stitch)}(values,value,(function(ring){smooth(ring,values,value),function contours_area(ring){var i=0,n=ring.length,area=ring[n-1][1]*ring[0][0]-ring[n-1][0]*ring[0][1];for(;++i<n;)area+=ring[i-1][1]*ring[i][0]-ring[i-1][0]*ring[i][1];return area}(ring)>0?polygons.push([ring]):holes.push(ring)})),holes.forEach((function(hole){for(var polygon,i=0,n=polygons.length;i<n;++i)if(-1!==contours_contains((polygon=polygons[i])[0],hole))return void polygon.push(hole)})),{type:"MultiPolygon",value:value,coordinates:polygons}}function index(point){return 2*point[0]+point[1]*(dx+1)*4}function smoothLinear(ring,values,value){ring.forEach((function(point){var v0,x=point[0],y=point[1],xt=0|x,yt=0|y,v1=values[yt*dx+xt];x>0&&x<dx&&xt===x&&(v0=values[yt*dx+xt-1],point[0]=x+(value-v0)/(v1-v0)-.5),y>0&&y<dy&&yt===y&&(v0=values[(yt-1)*dx+xt],point[1]=y+(value-v0)/(v1-v0)-.5)}))}return contours.contour=contour,contours.size=function(_){if(!arguments.length)return[dx,dy];var _0=Math.ceil(_[0]),_1=Math.ceil(_[1]);return _0>0&&_1>0||Object(vega_util.n)("invalid size"),dx=_0,dy=_1,contours},contours.smooth=function(_){return arguments.length?(smooth=_?smoothLinear:contours_noop,contours):smooth===smoothLinear},contours};function contours_contains(ring,hole){for(var c,i=-1,n=hole.length;++i<n;)if(c=ringContains(ring,hole[i]))return c;return 0}function ringContains(ring,point){for(var x=point[0],y=point[1],contains=-1,i=0,n=ring.length,j=n-1;i<n;j=i++){var pi=ring[i],xi=pi[0],yi=pi[1],pj=ring[j],xj=pj[0],yj=pj[1];if(segmentContains(pi,pj,point))return 0;yi>y!=yj>y&&x<(xj-xi)*(y-yi)/(yj-yi)+xi&&(contains=-contains)}return contains}function segmentContains(a,b,c){var i;return function collinear(a,b,c){return(b[0]-a[0])*(c[1]-a[1])==(c[0]-a[0])*(b[1]-a[1])}(a,b,c)&&function within(p,q,r){return p<=q&&q<=r||r<=q&&q<=p}(a[i=+(a[0]===b[0])],c[i],b[i])}var util_quantize=function(k,nice,zero){return function(values){var ex=Object(vega_util.p)(values),start=zero?Math.min(ex[0],0):ex[0],stop=ex[1],span=stop-start,step=nice?tickStep(start,stop,k):span/(k+1);return src_range(step,stop,step)}};function Isocontour(params){Transform.call(this,null,params)}function Isocontour_transform(grid,scale){const x1=grid.x1||0,y1=grid.y1||0,s=null!=scale?scale:grid.scale||1;function transformPolygon(coordinates){coordinates.forEach(transformRing)}function transformRing(coordinates){coordinates.forEach(transformPoint)}function transformPoint(coordinates){coordinates[0]=(coordinates[0]-x1)*s,coordinates[1]=(coordinates[1]-y1)*s}return function(geometry){return geometry.coordinates.forEach(transformPolygon),geometry}}Isocontour.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},Object(vega_util.y)(Isocontour,Transform).transform=function(_,pulse){if(this.value&&!pulse.changed()&&!_.modified())return pulse.StopPropagation;var out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),source=pulse.materialize(pulse.SOURCE).source,field=_.field||vega_util.x,contour=util_contours().smooth(!1!==_.smooth),tz=_.thresholds||function levels(values,f,_){const q=util_quantize(_.levels||10,_.nice,!1!==_.zero);return"shared"!==_.resolve?q:q(values.map(t=>max_max(f(t).values)))}(source,field,_),as=null===_.as?null:_.as||"contour",values=[];return source.forEach(t=>{const grid=field(t),paths=contour.size([grid.width,grid.height])(grid.values,Object(vega_util.A)(tz)?tz:tz(grid.values));if(_.scale||grid.x1||grid.y1||grid.scale){var s=_.scale;paths.forEach(Isocontour_transform(grid,Object(vega_util.D)(s)?s(t,_):s))}paths.forEach(p=>{values.push(rederive(t,ingest(null!=as?{[as]:p}:p)))})}),this.value&&(out.rem=this.value),this.value=out.source=out.add=values,out};Math.random;Math.sqrt(2*Math.PI),Math.SQRT2;Math.PI;function density2D_radius(bw,data,f){const v=bw>=0?bw:(void 0)(data,f);return Math.round((Math.sqrt(4*v*v+1)-1)/2)}function density2D_number(_){return Object(vega_util.D)(_)?_:Object(vega_util.l)(+_)}var density2D=function(){var x=d=>d[0],y=d=>d[1],weight=vega_util.N,bandwidth=[-1,-1],dx=960,dy=500,k=2;function density(data,counts){const rx=density2D_radius(bandwidth[0],data,x)>>k,ry=density2D_radius(bandwidth[1],data,y)>>k,ox=rx?rx+2:0,oy=ry?ry+2:0,n=2*ox+(dx>>k),m=2*oy+(dy>>k),values0=new Float32Array(n*m),values1=new Float32Array(n*m);let values=values0;data.forEach(d=>{const xi=ox+(+x(d)>>k),yi=oy+(+y(d)>>k);xi>=0&&xi<n&&yi>=0&&yi<m&&(values0[xi+yi*n]+=+weight(d))}),rx>0&&ry>0?(blurX(n,m,values0,values1,rx),blurY(n,m,values1,values0,ry),blurX(n,m,values0,values1,rx),blurY(n,m,values1,values0,ry),blurX(n,m,values0,values1,rx),blurY(n,m,values1,values0,ry)):rx>0?(blurX(n,m,values0,values1,rx),blurX(n,m,values1,values0,rx),blurX(n,m,values0,values1,rx),values=values1):ry>0&&(blurY(n,m,values0,values1,ry),blurY(n,m,values1,values0,ry),blurY(n,m,values0,values1,ry),values=values1);let s=counts?Math.pow(2,-2*k):1/sum_sum(values);for(let i=0,sz=n*m;i<sz;++i)values[i]*=s;return{values:values,scale:1<<k,width:n,height:m,x1:ox,y1:oy,x2:ox+(dx>>k),y2:oy+(dy>>k)}}return density.x=function(_){return arguments.length?(x=density2D_number(_),density):x},density.y=function(_){return arguments.length?(y=density2D_number(_),density):y},density.weight=function(_){return arguments.length?(weight=density2D_number(_),density):weight},density.size=function(_){if(!arguments.length)return[dx,dy];var _0=Math.ceil(_[0]),_1=Math.ceil(_[1]);return _0>=0||_0>=0||Object(vega_util.n)("invalid size"),dx=_0,dy=_1,density},density.cellSize=function(_){return arguments.length?((_=+_)>=1||Object(vega_util.n)("invalid cell size"),k=Math.floor(Math.log(_)/Math.LN2),density):1<<k},density.bandwidth=function(_){return arguments.length?(1===(_=Object(vega_util.i)(_)).length&&(_=[+_[0],+_[0]]),2!==_.length&&Object(vega_util.n)("invalid bandwidth"),bandwidth=_,density):bandwidth},density};function blurX(n,m,source,target,r){const w=1+(r<<1);for(let j=0;j<m;++j)for(let i=0,sr=0;i<n+r;++i)i<n&&(sr+=source[i+j*n]),i>=r&&(i>=w&&(sr-=source[i-w+j*n]),target[i-r+j*n]=sr/Math.min(i+1,n-1+w-i,w))}function blurY(n,m,source,target,r){const w=1+(r<<1);for(let i=0;i<n;++i)for(let j=0,sr=0;j<m+r;++j)j<m&&(sr+=source[i+j*n]),j>=r&&(j>=w&&(sr-=source[i+(j-w)*n]),target[i+(j-r)*n]=sr/Math.min(j+1,m-1+w-j,w))}function KDE2D(params){Transform.call(this,null,params)}KDE2D.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};var KDE2D_prototype=Object(vega_util.y)(KDE2D,Transform);const PARAMS=["x","y","weight","size","cellSize","bandwidth"];function KDE2D_params(obj,_){return PARAMS.forEach(param=>null!=_[param]?obj[param](_[param]):0),obj}function Contour(params){Transform.call(this,null,params)}KDE2D_prototype.transform=function(_,pulse){if(this.value&&!pulse.changed()&&!_.modified())return pulse.StopPropagation;var values,out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),groups=function KDE2D_partition(data,groupby){var map,i,n,t,k,g,groups=[],get=f=>f(t);if(null==groupby)groups.push(data);else for(map={},i=0,n=data.length;i<n;++i)t=data[i],k=groupby.map(get),(g=map[k])||(map[k]=g=[],g.dims=k,groups.push(g)),g.push(t);return groups}(pulse.materialize(pulse.SOURCE).source,_.groupby),names=(_.groupby||[]).map(vega_util.h),kde=KDE2D_params(density2D(),_),as=_.as||"grid";return values=groups.map(g=>ingest(function set(t,vals){for(let i=0;i<names.length;++i)t[names[i]]=vals[i];return t}({[as]:kde(g,_.counts)},g.dims))),this.value&&(out.rem=this.value),this.value=out.source=out.add=values,out},Contour.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},Object(vega_util.y)(Contour,Transform).transform=function(_,pulse){if(this.value&&!pulse.changed()&&!_.modified())return pulse.StopPropagation;var grid,post,out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),contour=util_contours().smooth(!1!==_.smooth),values=_.values,thresh=_.thresholds||util_quantize(_.count||10,_.nice,!!values),size=_.size;return values||(values=pulse.materialize(pulse.SOURCE).source,post=Isocontour_transform(grid=KDE2D_params(density2D(),_)(values,!0)),size=[grid.width,grid.height],values=grid.values),thresh=Object(vega_util.A)(thresh)?thresh:thresh(values),values=contour.size(size)(values,thresh),post&&values.forEach(post),this.value&&(out.rem=this.value),this.value=out.source=out.add=(values||[]).map(ingest),out};var Feature="Feature",FeatureCollection="FeatureCollection";function GeoJSON(params){Transform.call(this,null,params)}GeoJSON.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},Object(vega_util.y)(GeoJSON,Transform).transform=function(_,pulse){var mod,features=this._features,points=this._points,fields=_.fields,lon=fields&&fields[0],lat=fields&&fields[1],geojson=_.geojson||!fields&&vega_util.x,flag=pulse.ADD;mod=_.modified()||pulse.changed(pulse.REM)||pulse.modified(Object(vega_util.g)(geojson))||lon&&pulse.modified(Object(vega_util.g)(lon))||lat&&pulse.modified(Object(vega_util.g)(lat)),this.value&&!mod||(flag=pulse.SOURCE,this._features=features=[],this._points=points=[]),geojson&&pulse.visit(flag,(function(t){features.push(geojson(t))})),lon&&lat&&(pulse.visit(flag,(function(t){var x=lon(t),y=lat(t);null!=x&&null!=y&&(x=+x)===x&&(y=+y)===y&&points.push([x,y])})),features=features.concat({type:Feature,geometry:{type:"MultiPoint",coordinates:points}})),this.value={type:FeatureCollection,features:features}};var d3_geo_src_identity=function(x){return x};function streamGeometry(geometry,stream){geometry&&streamGeometryType.hasOwnProperty(geometry.type)&&streamGeometryType[geometry.type](geometry,stream)}var streamObjectType={Feature:function(object,stream){streamGeometry(object.geometry,stream)},FeatureCollection:function(object,stream){for(var features=object.features,i=-1,n=features.length;++i<n;)streamGeometry(features[i].geometry,stream)}},streamGeometryType={Sphere:function(object,stream){stream.sphere()},Point:function(object,stream){object=object.coordinates,stream.point(object[0],object[1],object[2])},MultiPoint:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)object=coordinates[i],stream.point(object[0],object[1],object[2])},LineString:function(object,stream){streamLine(object.coordinates,stream,0)},MultiLineString:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamLine(coordinates[i],stream,0)},Polygon:function(object,stream){streamPolygon(object.coordinates,stream)},MultiPolygon:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamPolygon(coordinates[i],stream)},GeometryCollection:function(object,stream){for(var geometries=object.geometries,i=-1,n=geometries.length;++i<n;)streamGeometry(geometries[i],stream)}};function streamLine(coordinates,stream,closed){var coordinate,i=-1,n=coordinates.length-closed;for(stream.lineStart();++i<n;)coordinate=coordinates[i],stream.point(coordinate[0],coordinate[1],coordinate[2]);stream.lineEnd()}function streamPolygon(coordinates,stream){var i=-1,n=coordinates.length;for(stream.polygonStart();++i<n;)streamLine(coordinates[i],stream,1);stream.polygonEnd()}var src_stream=function(object,stream){object&&streamObjectType.hasOwnProperty(object.type)?streamObjectType[object.type](object,stream):streamGeometry(object,stream)},adder=function(){return new Adder};function Adder(){this.reset()}Adder.prototype={constructor:Adder,reset:function(){this.s=this.t=0},add:function(y){adder_add(adder_temp,y,this.t),adder_add(this,adder_temp.s,this.s),this.s?this.t+=adder_temp.t:this.s=adder_temp.t},valueOf:function(){return this.s}};var adder_temp=new Adder;function adder_add(adder,a,b){var x=adder.s=a+b,bv=x-a,av=x-bv;adder.t=a-av+(b-bv)}var src_math_epsilon=1e-6,math_pi=Math.PI,math_halfPi=math_pi/2,quarterPi=math_pi/4,math_tau=2*math_pi,math_degrees=180/math_pi,radians=math_pi/180,math_abs=Math.abs,atan=Math.atan,math_atan2=Math.atan2,src_math_cos=Math.cos,math_exp=(Math.ceil,Math.exp),math_log=(Math.floor,Math.log),math_pow=Math.pow,src_math_sin=Math.sin,math_sign=Math.sign||function(x){return x>0?1:x<0?-1:0},math_sqrt=Math.sqrt,tan=Math.tan;function math_acos(x){return x>1?0:x<-1?math_pi:Math.acos(x)}function math_asin(x){return x>1?math_halfPi:x<-1?-math_halfPi:Math.asin(x)}function noop_noop(){}var area_x00,area_y00,area_x0,area_y0,areaSum=adder(),areaRingSum=adder(),areaStream={point:noop_noop,lineStart:noop_noop,lineEnd:noop_noop,polygonStart:function(){areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){areaStream.lineStart=areaStream.lineEnd=areaStream.point=noop_noop,areaSum.add(math_abs(areaRingSum)),areaRingSum.reset()},result:function(){var area=areaSum/2;return areaSum.reset(),area}};function areaRingStart(){areaStream.point=areaPointFirst}function areaPointFirst(x,y){areaStream.point=areaPoint,area_x00=area_x0=x,area_y00=area_y0=y}function areaPoint(x,y){areaRingSum.add(area_y0*x-area_x0*y),area_x0=x,area_y0=y}function areaRingEnd(){areaPoint(area_x00,area_y00)}var path_area=areaStream,bounds_x0=1/0,bounds_y0=bounds_x0,bounds_x1=-bounds_x0,bounds_y1=bounds_x1;var centroid_x00,centroid_y00,centroid_x0,centroid_y0,path_bounds={point:function boundsPoint(x,y){x<bounds_x0&&(bounds_x0=x);x>bounds_x1&&(bounds_x1=x);y<bounds_y0&&(bounds_y0=y);y>bounds_y1&&(bounds_y1=y)},lineStart:noop_noop,lineEnd:noop_noop,polygonStart:noop_noop,polygonEnd:noop_noop,result:function(){var bounds=[[bounds_x0,bounds_y0],[bounds_x1,bounds_y1]];return bounds_x1=bounds_y1=-(bounds_y0=bounds_x0=1/0),bounds}},centroid_X0=0,centroid_Y0=0,Z0=0,centroid_X1=0,centroid_Y1=0,Z1=0,centroid_X2=0,Y2=0,Z2=0,centroidStream={point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.point=centroidPoint,centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd},result:function(){var centroid=Z2?[centroid_X2/Z2,Y2/Z2]:Z1?[centroid_X1/Z1,centroid_Y1/Z1]:Z0?[centroid_X0/Z0,centroid_Y0/Z0]:[NaN,NaN];return centroid_X0=centroid_Y0=Z0=centroid_X1=centroid_Y1=Z1=centroid_X2=Y2=Z2=0,centroid}};function centroidPoint(x,y){centroid_X0+=x,centroid_Y0+=y,++Z0}function centroidLineStart(){centroidStream.point=centroidPointFirstLine}function centroidPointFirstLine(x,y){centroidStream.point=centroidPointLine,centroidPoint(centroid_x0=x,centroid_y0=y)}function centroidPointLine(x,y){var dx=x-centroid_x0,dy=y-centroid_y0,z=math_sqrt(dx*dx+dy*dy);centroid_X1+=z*(centroid_x0+x)/2,centroid_Y1+=z*(centroid_y0+y)/2,Z1+=z,centroidPoint(centroid_x0=x,centroid_y0=y)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidPointFirstRing}function centroidRingEnd(){centroidPointRing(centroid_x00,centroid_y00)}function centroidPointFirstRing(x,y){centroidStream.point=centroidPointRing,centroidPoint(centroid_x00=centroid_x0=x,centroid_y00=centroid_y0=y)}function centroidPointRing(x,y){var dx=x-centroid_x0,dy=y-centroid_y0,z=math_sqrt(dx*dx+dy*dy);centroid_X1+=z*(centroid_x0+x)/2,centroid_Y1+=z*(centroid_y0+y)/2,Z1+=z,centroid_X2+=(z=centroid_y0*x-centroid_x0*y)*(centroid_x0+x),Y2+=z*(centroid_y0+y),Z2+=3*z,centroidPoint(centroid_x0=x,centroid_y0=y)}var centroid=centroidStream;function PathContext(context){this._context=context}PathContext.prototype={_radius:4.5,pointRadius:function(_){return this._radius=_,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(x,y){switch(this._point){case 0:this._context.moveTo(x,y),this._point=1;break;case 1:this._context.lineTo(x,y);break;default:this._context.moveTo(x+this._radius,y),this._context.arc(x,y,this._radius,0,math_tau)}},result:noop_noop};var lengthRing,measure_x00,measure_y00,measure_x0,measure_y0,lengthSum=adder(),lengthStream={point:noop_noop,lineStart:function(){lengthStream.point=lengthPointFirst},lineEnd:function(){lengthRing&&lengthPoint(measure_x00,measure_y00),lengthStream.point=noop_noop},polygonStart:function(){lengthRing=!0},polygonEnd:function(){lengthRing=null},result:function(){var length=+lengthSum;return lengthSum.reset(),length}};function lengthPointFirst(x,y){lengthStream.point=lengthPoint,measure_x00=measure_x0=x,measure_y00=measure_y0=y}function lengthPoint(x,y){measure_x0-=x,measure_y0-=y,lengthSum.add(math_sqrt(measure_x0*measure_x0+measure_y0*measure_y0)),measure_x0=x,measure_y0=y}var path_measure=lengthStream;function PathString(){this._string=[]}function string_circle(radius){return"m0,"+radius+"a"+radius+","+radius+" 0 1,1 0,"+-2*radius+"a"+radius+","+radius+" 0 1,1 0,"+2*radius+"z"}PathString.prototype={_radius:4.5,_circle:string_circle(4.5),pointRadius:function(_){return(_=+_)!==this._radius&&(this._radius=_,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(x,y){switch(this._point){case 0:this._string.push("M",x,",",y),this._point=1;break;case 1:this._string.push("L",x,",",y);break;default:null==this._circle&&(this._circle=string_circle(this._radius)),this._string.push("M",x,",",y,this._circle)}},result:function(){if(this._string.length){var result=this._string.join("");return this._string=[],result}return null}};var d3_geo_src_path=function(projection,context){var projectionStream,contextStream,pointRadius=4.5;function path(object){return object&&("function"==typeof pointRadius&&contextStream.pointRadius(+pointRadius.apply(this,arguments)),src_stream(object,projectionStream(contextStream))),contextStream.result()}return path.area=function(object){return src_stream(object,projectionStream(path_area)),path_area.result()},path.measure=function(object){return src_stream(object,projectionStream(path_measure)),path_measure.result()},path.bounds=function(object){return src_stream(object,projectionStream(path_bounds)),path_bounds.result()},path.centroid=function(object){return src_stream(object,projectionStream(centroid)),centroid.result()},path.projection=function(_){return arguments.length?(projectionStream=null==_?(projection=null,d3_geo_src_identity):(projection=_).stream,path):projection},path.context=function(_){return arguments.length?(contextStream=null==_?(context=null,new PathString):new PathContext(context=_),"function"!=typeof pointRadius&&contextStream.pointRadius(pointRadius),path):context},path.pointRadius=function(_){return arguments.length?(pointRadius="function"==typeof _?_:(contextStream.pointRadius(+_),+_),path):pointRadius},path.projection(projection).context(context)},clip_buffer=function(){var line,lines=[];return{point:function(x,y){line.push([x,y])},lineStart:function(){lines.push(line=[])},lineEnd:noop_noop,rejoin:function(){lines.length>1&&lines.push(lines.pop().concat(lines.shift()))},result:function(){var result=lines;return lines=[],line=null,result}}},pointEqual=function(a,b){return math_abs(a[0]-b[0])<src_math_epsilon&&math_abs(a[1]-b[1])<src_math_epsilon};function Intersection(point,points,other,entry){this.x=point,this.z=points,this.o=other,this.e=entry,this.v=!1,this.n=this.p=null}var rejoin=function(segments,compareIntersection,startInside,interpolate,stream){var i,n,subject=[],clip=[];if(segments.forEach((function(segment){if(!((n=segment.length-1)<=0)){var n,x,p0=segment[0],p1=segment[n];if(pointEqual(p0,p1)){for(stream.lineStart(),i=0;i<n;++i)stream.point((p0=segment[i])[0],p0[1]);stream.lineEnd()}else subject.push(x=new Intersection(p0,segment,null,!0)),clip.push(x.o=new Intersection(p0,null,x,!1)),subject.push(x=new Intersection(p1,segment,null,!1)),clip.push(x.o=new Intersection(p1,null,x,!0))}})),subject.length){for(clip.sort(compareIntersection),rejoin_link(subject),rejoin_link(clip),i=0,n=clip.length;i<n;++i)clip[i].e=startInside=!startInside;for(var points,point,start=subject[0];;){for(var current=start,isSubject=!0;current.v;)if((current=current.n)===start)return;points=current.z,stream.lineStart();do{if(current.v=current.o.v=!0,current.e){if(isSubject)for(i=0,n=points.length;i<n;++i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.n.x,1,stream);current=current.n}else{if(isSubject)for(points=current.p.z,i=points.length-1;i>=0;--i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.p.x,-1,stream);current=current.p}points=(current=current.o).z,isSubject=!isSubject}while(!current.v);stream.lineEnd()}}};function rejoin_link(array){if(n=array.length){for(var n,b,i=0,a=array[0];++i<n;)a.n=b=array[i],b.p=a,a=b;a.n=b=array[0],b.p=a}}function cartesian_spherical(cartesian){return[math_atan2(cartesian[1],cartesian[0]),math_asin(cartesian[2])]}function cartesian_cartesian(spherical){var lambda=spherical[0],phi=spherical[1],cosPhi=src_math_cos(phi);return[cosPhi*src_math_cos(lambda),cosPhi*src_math_sin(lambda),src_math_sin(phi)]}function cartesianDot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function cartesianAddInPlace(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function cartesianScale(vector,k){return[vector[0]*k,vector[1]*k,vector[2]*k]}function cartesianNormalizeInPlace(d){var l=math_sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=l,d[1]/=l,d[2]/=l}var polygonContains_sum=adder();function longitude(point){return math_abs(point[0])<=math_pi?point[0]:math_sign(point[0])*((math_abs(point[0])+math_pi)%math_tau-math_pi)}function merge_merge(arrays){return Array.from(function*merge_flatten(arrays){for(const array of arrays)yield*array}(arrays))}var src_clip=function(pointVisible,clipLine,interpolate,start){return function(sink){var polygon,segments,ring,line=clipLine(sink),ringBuffer=clip_buffer(),ringSink=clipLine(ringBuffer),polygonStarted=!1,clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){clip.point=pointRing,clip.lineStart=ringStart,clip.lineEnd=ringEnd,segments=[],polygon=[]},polygonEnd:function(){clip.point=point,clip.lineStart=lineStart,clip.lineEnd=lineEnd,segments=merge_merge(segments);var startInside=function(polygon,point){var lambda=longitude(point),phi=point[1],sinPhi=src_math_sin(phi),normal=[src_math_sin(lambda),-src_math_cos(lambda),0],angle=0,winding=0;polygonContains_sum.reset(),1===sinPhi?phi=math_halfPi+src_math_epsilon:-1===sinPhi&&(phi=-math_halfPi-src_math_epsilon);for(var i=0,n=polygon.length;i<n;++i)if(m=(ring=polygon[i]).length)for(var ring,m,point0=ring[m-1],lambda0=longitude(point0),phi0=point0[1]/2+quarterPi,sinPhi0=src_math_sin(phi0),cosPhi0=src_math_cos(phi0),j=0;j<m;++j,lambda0=lambda1,sinPhi0=sinPhi1,cosPhi0=cosPhi1,point0=point1){var point1=ring[j],lambda1=longitude(point1),phi1=point1[1]/2+quarterPi,sinPhi1=src_math_sin(phi1),cosPhi1=src_math_cos(phi1),delta=lambda1-lambda0,sign=delta>=0?1:-1,absDelta=sign*delta,antimeridian=absDelta>math_pi,k=sinPhi0*sinPhi1;if(polygonContains_sum.add(math_atan2(k*sign*src_math_sin(absDelta),cosPhi0*cosPhi1+k*src_math_cos(absDelta))),angle+=antimeridian?delta+sign*math_tau:delta,antimeridian^lambda0>=lambda^lambda1>=lambda){var arc=cartesianCross(cartesian_cartesian(point0),cartesian_cartesian(point1));cartesianNormalizeInPlace(arc);var intersection=cartesianCross(normal,arc);cartesianNormalizeInPlace(intersection);var phiArc=(antimeridian^delta>=0?-1:1)*math_asin(intersection[2]);(phi>phiArc||phi===phiArc&&(arc[0]||arc[1]))&&(winding+=antimeridian^delta>=0?1:-1)}}return(angle<-src_math_epsilon||angle<src_math_epsilon&&polygonContains_sum<-src_math_epsilon)^1&winding}(polygon,start);segments.length?(polygonStarted||(sink.polygonStart(),polygonStarted=!0),rejoin(segments,clip_compareIntersection,startInside,interpolate,sink)):startInside&&(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd()),polygonStarted&&(sink.polygonEnd(),polygonStarted=!1),segments=polygon=null},sphere:function(){sink.polygonStart(),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd(),sink.polygonEnd()}};function point(lambda,phi){pointVisible(lambda,phi)&&sink.point(lambda,phi)}function pointLine(lambda,phi){line.point(lambda,phi)}function lineStart(){clip.point=pointLine,line.lineStart()}function lineEnd(){clip.point=point,line.lineEnd()}function pointRing(lambda,phi){ring.push([lambda,phi]),ringSink.point(lambda,phi)}function ringStart(){ringSink.lineStart(),ring=[]}function ringEnd(){pointRing(ring[0][0],ring[0][1]),ringSink.lineEnd();var i,m,segment,point,clean=ringSink.clean(),ringSegments=ringBuffer.result(),n=ringSegments.length;if(ring.pop(),polygon.push(ring),ring=null,n)if(1&clean){if((m=(segment=ringSegments[0]).length-1)>0){for(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),i=0;i<m;++i)sink.point((point=segment[i])[0],point[1]);sink.lineEnd()}}else n>1&&2&clean&&ringSegments.push(ringSegments.pop().concat(ringSegments.shift())),segments.push(ringSegments.filter(validSegment))}return clip}};function validSegment(segment){return segment.length>1}function clip_compareIntersection(a,b){return((a=a.x)[0]<0?a[1]-math_halfPi-src_math_epsilon:math_halfPi-a[1])-((b=b.x)[0]<0?b[1]-math_halfPi-src_math_epsilon:math_halfPi-b[1])}var clip_antimeridian=src_clip((function(){return!0}),(function clipAntimeridianLine(stream){var clean,lambda0=NaN,phi0=NaN,sign0=NaN;return{lineStart:function(){stream.lineStart(),clean=1},point:function(lambda1,phi1){var sign1=lambda1>0?math_pi:-math_pi,delta=math_abs(lambda1-lambda0);math_abs(delta-math_pi)<src_math_epsilon?(stream.point(lambda0,phi0=(phi0+phi1)/2>0?math_halfPi:-math_halfPi),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),stream.point(lambda1,phi0),clean=0):sign0!==sign1&&delta>=math_pi&&(math_abs(lambda0-sign0)<src_math_epsilon&&(lambda0-=sign0*src_math_epsilon),math_abs(lambda1-sign1)<src_math_epsilon&&(lambda1-=sign1*src_math_epsilon),phi0=function clipAntimeridianIntersect(lambda0,phi0,lambda1,phi1){var cosPhi0,cosPhi1,sinLambda0Lambda1=src_math_sin(lambda0-lambda1);return math_abs(sinLambda0Lambda1)>src_math_epsilon?atan((src_math_sin(phi0)*(cosPhi1=src_math_cos(phi1))*src_math_sin(lambda1)-src_math_sin(phi1)*(cosPhi0=src_math_cos(phi0))*src_math_sin(lambda0))/(cosPhi0*cosPhi1*sinLambda0Lambda1)):(phi0+phi1)/2}(lambda0,phi0,lambda1,phi1),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),clean=0),stream.point(lambda0=lambda1,phi0=phi1),sign0=sign1},lineEnd:function(){stream.lineEnd(),lambda0=phi0=NaN},clean:function(){return 2-clean}}}),(function clipAntimeridianInterpolate(from,to,direction,stream){var phi;if(null==from)phi=direction*math_halfPi,stream.point(-math_pi,phi),stream.point(0,phi),stream.point(math_pi,phi),stream.point(math_pi,0),stream.point(math_pi,-phi),stream.point(0,-phi),stream.point(-math_pi,-phi),stream.point(-math_pi,0),stream.point(-math_pi,phi);else if(math_abs(from[0]-to[0])>src_math_epsilon){var lambda=from[0]<to[0]?math_pi:-math_pi;phi=direction*lambda/2,stream.point(-lambda,phi),stream.point(0,phi),stream.point(lambda,phi)}else stream.point(to[0],to[1])}),[-math_pi,-math_halfPi]);var compose=function(a,b){function compose(x,y){return x=a(x,y),b(x[0],x[1])}return a.invert&&b.invert&&(compose.invert=function(x,y){return(x=b.invert(x,y))&&a.invert(x[0],x[1])}),compose};function rotationIdentity(lambda,phi){return[math_abs(lambda)>math_pi?lambda+Math.round(-lambda/math_tau)*math_tau:lambda,phi]}function rotateRadians(deltaLambda,deltaPhi,deltaGamma){return(deltaLambda%=math_tau)?deltaPhi||deltaGamma?compose(rotationLambda(deltaLambda),rotationPhiGamma(deltaPhi,deltaGamma)):rotationLambda(deltaLambda):deltaPhi||deltaGamma?rotationPhiGamma(deltaPhi,deltaGamma):rotationIdentity}function forwardRotationLambda(deltaLambda){return function(lambda,phi){return[(lambda+=deltaLambda)>math_pi?lambda-math_tau:lambda<-math_pi?lambda+math_tau:lambda,phi]}}function rotationLambda(deltaLambda){var rotation=forwardRotationLambda(deltaLambda);return rotation.invert=forwardRotationLambda(-deltaLambda),rotation}function rotationPhiGamma(deltaPhi,deltaGamma){var cosDeltaPhi=src_math_cos(deltaPhi),sinDeltaPhi=src_math_sin(deltaPhi),cosDeltaGamma=src_math_cos(deltaGamma),sinDeltaGamma=src_math_sin(deltaGamma);function rotation(lambda,phi){var cosPhi=src_math_cos(phi),x=src_math_cos(lambda)*cosPhi,y=src_math_sin(lambda)*cosPhi,z=src_math_sin(phi),k=z*cosDeltaPhi+x*sinDeltaPhi;return[math_atan2(y*cosDeltaGamma-k*sinDeltaGamma,x*cosDeltaPhi-z*sinDeltaPhi),math_asin(k*cosDeltaGamma+y*sinDeltaGamma)]}return rotation.invert=function(lambda,phi){var cosPhi=src_math_cos(phi),x=src_math_cos(lambda)*cosPhi,y=src_math_sin(lambda)*cosPhi,z=src_math_sin(phi),k=z*cosDeltaGamma-y*sinDeltaGamma;return[math_atan2(y*cosDeltaGamma+z*sinDeltaGamma,x*cosDeltaPhi+k*sinDeltaPhi),math_asin(k*cosDeltaPhi-x*sinDeltaPhi)]},rotation}rotationIdentity.invert=rotationIdentity;var src_rotation=function(rotate){function forward(coordinates){return(coordinates=rotate(coordinates[0]*radians,coordinates[1]*radians))[0]*=math_degrees,coordinates[1]*=math_degrees,coordinates}return rotate=rotateRadians(rotate[0]*radians,rotate[1]*radians,rotate.length>2?rotate[2]*radians:0),forward.invert=function(coordinates){return(coordinates=rotate.invert(coordinates[0]*radians,coordinates[1]*radians))[0]*=math_degrees,coordinates[1]*=math_degrees,coordinates},forward};function circleStream(stream,radius,delta,direction,t0,t1){if(delta){var cosRadius=src_math_cos(radius),sinRadius=src_math_sin(radius),step=direction*delta;null==t0?(t0=radius+direction*math_tau,t1=radius-step/2):(t0=circleRadius(cosRadius,t0),t1=circleRadius(cosRadius,t1),(direction>0?t0<t1:t0>t1)&&(t0+=direction*math_tau));for(var point,t=t0;direction>0?t>t1:t<t1;t-=step)point=cartesian_spherical([cosRadius,-sinRadius*src_math_cos(t),-sinRadius*src_math_sin(t)]),stream.point(point[0],point[1])}}function circleRadius(cosRadius,point){(point=cartesian_cartesian(point))[0]-=cosRadius,cartesianNormalizeInPlace(point);var radius=math_acos(-point[1]);return((-point[2]<0?-radius:radius)+math_tau-src_math_epsilon)%math_tau}var clip_circle=function(radius){var cr=src_math_cos(radius),delta=6*radians,smallRadius=cr>0,notHemisphere=math_abs(cr)>src_math_epsilon;function visible(lambda,phi){return src_math_cos(lambda)*src_math_cos(phi)>cr}function intersect(a,b,two){var n1=[1,0,0],n2=cartesianCross(cartesian_cartesian(a),cartesian_cartesian(b)),n2n2=cartesianDot(n2,n2),n1n2=n2[0],determinant=n2n2-n1n2*n1n2;if(!determinant)return!two&&a;var c1=cr*n2n2/determinant,c2=-cr*n1n2/determinant,n1xn2=cartesianCross(n1,n2),A=cartesianScale(n1,c1);cartesianAddInPlace(A,cartesianScale(n2,c2));var u=n1xn2,w=cartesianDot(A,u),uu=cartesianDot(u,u),t2=w*w-uu*(cartesianDot(A,A)-1);if(!(t2<0)){var t=math_sqrt(t2),q=cartesianScale(u,(-w-t)/uu);if(cartesianAddInPlace(q,A),q=cartesian_spherical(q),!two)return q;var z,lambda0=a[0],lambda1=b[0],phi0=a[1],phi1=b[1];lambda1<lambda0&&(z=lambda0,lambda0=lambda1,lambda1=z);var delta=lambda1-lambda0,polar=math_abs(delta-math_pi)<src_math_epsilon;if(!polar&&phi1<phi0&&(z=phi0,phi0=phi1,phi1=z),polar||delta<src_math_epsilon?polar?phi0+phi1>0^q[1]<(math_abs(q[0]-lambda0)<src_math_epsilon?phi0:phi1):phi0<=q[1]&&q[1]<=phi1:delta>math_pi^(lambda0<=q[0]&&q[0]<=lambda1)){var q1=cartesianScale(u,(-w+t)/uu);return cartesianAddInPlace(q1,A),[q,cartesian_spherical(q1)]}}}function code(lambda,phi){var r=smallRadius?radius:math_pi-radius,code=0;return lambda<-r?code|=1:lambda>r&&(code|=2),phi<-r?code|=4:phi>r&&(code|=8),code}return src_clip(visible,(function clipLine(stream){var point0,c0,v0,v00,clean;return{lineStart:function(){v00=v0=!1,clean=1},point:function(lambda,phi){var point2,point1=[lambda,phi],v=visible(lambda,phi),c=smallRadius?v?0:code(lambda,phi):v?code(lambda+(lambda<0?math_pi:-math_pi),phi):0;if(!point0&&(v00=v0=v)&&stream.lineStart(),v!==v0&&(!(point2=intersect(point0,point1))||pointEqual(point0,point2)||pointEqual(point1,point2))&&(point1[0]+=src_math_epsilon,point1[1]+=src_math_epsilon,v=visible(point1[0],point1[1])),v!==v0)clean=0,v?(stream.lineStart(),point2=intersect(point1,point0),stream.point(point2[0],point2[1])):(point2=intersect(point0,point1),stream.point(point2[0],point2[1]),stream.lineEnd()),point0=point2;else if(notHemisphere&&point0&&smallRadius^v){var t;c&c0||!(t=intersect(point1,point0,!0))||(clean=0,smallRadius?(stream.lineStart(),stream.point(t[0][0],t[0][1]),stream.point(t[1][0],t[1][1]),stream.lineEnd()):(stream.point(t[1][0],t[1][1]),stream.lineEnd(),stream.lineStart(),stream.point(t[0][0],t[0][1])))}!v||point0&&pointEqual(point0,point1)||stream.point(point1[0],point1[1]),point0=point1,v0=v,c0=c},lineEnd:function(){v0&&stream.lineEnd(),point0=null},clean:function(){return clean|(v00&&v0)<<1}}}),(function interpolate(from,to,direction,stream){circleStream(stream,radius,delta,direction,from,to)}),smallRadius?[0,-radius]:[-math_pi,radius-math_pi])},clip_line=function(a,b,x0,y0,x1,y1){var r,ax=a[0],ay=a[1],t0=0,t1=1,dx=b[0]-ax,dy=b[1]-ay;if(r=x0-ax,dx||!(r>0)){if(r/=dx,dx<0){if(r<t0)return;r<t1&&(t1=r)}else if(dx>0){if(r>t1)return;r>t0&&(t0=r)}if(r=x1-ax,dx||!(r<0)){if(r/=dx,dx<0){if(r>t1)return;r>t0&&(t0=r)}else if(dx>0){if(r<t0)return;r<t1&&(t1=r)}if(r=y0-ay,dy||!(r>0)){if(r/=dy,dy<0){if(r<t0)return;r<t1&&(t1=r)}else if(dy>0){if(r>t1)return;r>t0&&(t0=r)}if(r=y1-ay,dy||!(r<0)){if(r/=dy,dy<0){if(r>t1)return;r>t0&&(t0=r)}else if(dy>0){if(r<t0)return;r<t1&&(t1=r)}return t0>0&&(a[0]=ax+t0*dx,a[1]=ay+t0*dy),t1<1&&(b[0]=ax+t1*dx,b[1]=ay+t1*dy),!0}}}}},clipMax=1e9,clipMin=-clipMax;function clipRectangle(x0,y0,x1,y1){function visible(x,y){return x0<=x&&x<=x1&&y0<=y&&y<=y1}function interpolate(from,to,direction,stream){var a=0,a1=0;if(null==from||(a=corner(from,direction))!==(a1=corner(to,direction))||comparePoint(from,to)<0^direction>0)do{stream.point(0===a||3===a?x0:x1,a>1?y1:y0)}while((a=(a+direction+4)%4)!==a1);else stream.point(to[0],to[1])}function corner(p,direction){return math_abs(p[0]-x0)<src_math_epsilon?direction>0?0:3:math_abs(p[0]-x1)<src_math_epsilon?direction>0?2:1:math_abs(p[1]-y0)<src_math_epsilon?direction>0?1:0:direction>0?3:2}function compareIntersection(a,b){return comparePoint(a.x,b.x)}function comparePoint(a,b){var ca=corner(a,1),cb=corner(b,1);return ca!==cb?ca-cb:0===ca?b[1]-a[1]:1===ca?a[0]-b[0]:2===ca?a[1]-b[1]:b[0]-a[0]}return function(stream){var segments,polygon,ring,x__,y__,v__,x_,y_,v_,first,clean,activeStream=stream,bufferStream=clip_buffer(),clipStream={point:point,lineStart:function lineStart(){clipStream.point=linePoint,polygon&&polygon.push(ring=[]);first=!0,v_=!1,x_=y_=NaN},lineEnd:function lineEnd(){segments&&(linePoint(x__,y__),v__&&v_&&bufferStream.rejoin(),segments.push(bufferStream.result()));clipStream.point=point,v_&&activeStream.lineEnd()},polygonStart:function polygonStart(){activeStream=bufferStream,segments=[],polygon=[],clean=!0},polygonEnd:function polygonEnd(){var startInside=function polygonInside(){for(var winding=0,i=0,n=polygon.length;i<n;++i)for(var a0,a1,ring=polygon[i],j=1,m=ring.length,point=ring[0],b0=point[0],b1=point[1];j<m;++j)a0=b0,a1=b1,point=ring[j],b0=point[0],b1=point[1],a1<=y1?b1>y1&&(b0-a0)*(y1-a1)>(b1-a1)*(x0-a0)&&++winding:b1<=y1&&(b0-a0)*(y1-a1)<(b1-a1)*(x0-a0)&&--winding;return winding}(),cleanInside=clean&&startInside,visible=(segments=merge_merge(segments)).length;(cleanInside||visible)&&(stream.polygonStart(),cleanInside&&(stream.lineStart(),interpolate(null,null,1,stream),stream.lineEnd()),visible&&rejoin(segments,compareIntersection,startInside,interpolate,stream),stream.polygonEnd());activeStream=stream,segments=polygon=ring=null}};function point(x,y){visible(x,y)&&activeStream.point(x,y)}function linePoint(x,y){var v=visible(x,y);if(polygon&&ring.push([x,y]),first)x__=x,y__=y,v__=v,first=!1,v&&(activeStream.lineStart(),activeStream.point(x,y));else if(v&&v_)activeStream.point(x,y);else{var a=[x_=Math.max(clipMin,Math.min(clipMax,x_)),y_=Math.max(clipMin,Math.min(clipMax,y_))],b=[x=Math.max(clipMin,Math.min(clipMax,x)),y=Math.max(clipMin,Math.min(clipMax,y))];clip_line(a,b,x0,y0,x1,y1)?(v_||(activeStream.lineStart(),activeStream.point(a[0],a[1])),activeStream.point(b[0],b[1]),v||activeStream.lineEnd(),clean=!1):v&&(activeStream.lineStart(),activeStream.point(x,y),clean=!1)}x_=x,y_=y,v_=v}return clipStream}}function transform_transformer(methods){return function(stream){var s=new TransformStream;for(var key in methods)s[key]=methods[key];return s.stream=stream,s}}function TransformStream(){}function fit_fit(projection,fitBounds,object){var clip=projection.clipExtent&&projection.clipExtent();return projection.scale(150).translate([0,0]),null!=clip&&projection.clipExtent(null),src_stream(object,projection.stream(path_bounds)),fitBounds(path_bounds.result()),null!=clip&&projection.clipExtent(clip),projection}function fitExtent(projection,extent,object){return fit_fit(projection,(function(b){var w=extent[1][0]-extent[0][0],h=extent[1][1]-extent[0][1],k=Math.min(w/(b[1][0]-b[0][0]),h/(b[1][1]-b[0][1])),x=+extent[0][0]+(w-k*(b[1][0]+b[0][0]))/2,y=+extent[0][1]+(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,y])}),object)}function fitSize(projection,size,object){return fitExtent(projection,[[0,0],size],object)}function fitWidth(projection,width,object){return fit_fit(projection,(function(b){var w=+width,k=w/(b[1][0]-b[0][0]),x=(w-k*(b[1][0]+b[0][0]))/2,y=-k*b[0][1];projection.scale(150*k).translate([x,y])}),object)}function fitHeight(projection,height,object){return fit_fit(projection,(function(b){var h=+height,k=h/(b[1][1]-b[0][1]),x=-k*b[0][0],y=(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,y])}),object)}TransformStream.prototype={constructor:TransformStream,point:function(x,y){this.stream.point(x,y)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var resample_maxDepth=16,cosMinDistance=src_math_cos(30*radians),resample=function(project,delta2){return+delta2?function resample_resample(project,delta2){function resampleLineTo(x0,y0,lambda0,a0,b0,c0,x1,y1,lambda1,a1,b1,c1,depth,stream){var dx=x1-x0,dy=y1-y0,d2=dx*dx+dy*dy;if(d2>4*delta2&&depth--){var a=a0+a1,b=b0+b1,c=c0+c1,m=math_sqrt(a*a+b*b+c*c),phi2=math_asin(c/=m),lambda2=math_abs(math_abs(c)-1)<src_math_epsilon||math_abs(lambda0-lambda1)<src_math_epsilon?(lambda0+lambda1)/2:math_atan2(b,a),p=project(lambda2,phi2),x2=p[0],y2=p[1],dx2=x2-x0,dy2=y2-y0,dz=dy*dx2-dx*dy2;(dz*dz/d2>delta2||math_abs((dx*dx2+dy*dy2)/d2-.5)>.3||a0*a1+b0*b1+c0*c1<cosMinDistance)&&(resampleLineTo(x0,y0,lambda0,a0,b0,c0,x2,y2,lambda2,a/=m,b/=m,c,depth,stream),stream.point(x2,y2),resampleLineTo(x2,y2,lambda2,a,b,c,x1,y1,lambda1,a1,b1,c1,depth,stream))}}return function(stream){var lambda00,x00,y00,a00,b00,c00,lambda0,x0,y0,a0,b0,c0,resampleStream={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){stream.polygonStart(),resampleStream.lineStart=ringStart},polygonEnd:function(){stream.polygonEnd(),resampleStream.lineStart=lineStart}};function point(x,y){x=project(x,y),stream.point(x[0],x[1])}function lineStart(){x0=NaN,resampleStream.point=linePoint,stream.lineStart()}function linePoint(lambda,phi){var c=cartesian_cartesian([lambda,phi]),p=project(lambda,phi);resampleLineTo(x0,y0,lambda0,a0,b0,c0,x0=p[0],y0=p[1],lambda0=lambda,a0=c[0],b0=c[1],c0=c[2],resample_maxDepth,stream),stream.point(x0,y0)}function lineEnd(){resampleStream.point=point,stream.lineEnd()}function ringStart(){lineStart(),resampleStream.point=ringPoint,resampleStream.lineEnd=ringEnd}function ringPoint(lambda,phi){linePoint(lambda00=lambda,phi),x00=x0,y00=y0,a00=a0,b00=b0,c00=c0,resampleStream.point=linePoint}function ringEnd(){resampleLineTo(x0,y0,lambda0,a0,b0,c0,x00,y00,lambda00,a00,b00,c00,resample_maxDepth,stream),resampleStream.lineEnd=lineEnd,lineEnd()}return resampleStream}}(project,delta2):function resampleNone(project){return transform_transformer({point:function(x,y){x=project(x,y),this.stream.point(x[0],x[1])}})}(project)};var transformRadians=transform_transformer({point:function(x,y){this.stream.point(x*radians,y*radians)}});function scaleTranslate(k,dx,dy){function transform(x,y){return[dx+k*x,dy-k*y]}return transform.invert=function(x,y){return[(x-dx)/k,(dy-y)/k]},transform}function scaleTranslateRotate(k,dx,dy,alpha){var cosAlpha=src_math_cos(alpha),sinAlpha=src_math_sin(alpha),a=cosAlpha*k,b=sinAlpha*k,ai=cosAlpha/k,bi=sinAlpha/k,ci=(sinAlpha*dy-cosAlpha*dx)/k,fi=(sinAlpha*dx+cosAlpha*dy)/k;function transform(x,y){return[a*x-b*y+dx,dy-b*x-a*y]}return transform.invert=function(x,y){return[ai*x-bi*y+ci,fi-bi*x-ai*y]},transform}function projection_projection(project){return projectionMutator((function(){return project}))()}function projectionMutator(projectAt){var project,rotate,y0,x1,y1,projectResample,projectTransform,projectRotateTransform,cache,cacheStream,k=150,x=480,y=250,lambda=0,phi=0,deltaLambda=0,deltaPhi=0,deltaGamma=0,alpha=0,theta=null,preclip=clip_antimeridian,x0=null,postclip=d3_geo_src_identity,delta2=.5;function projection(point){return projectRotateTransform(point[0]*radians,point[1]*radians)}function invert(point){return(point=projectRotateTransform.invert(point[0],point[1]))&&[point[0]*math_degrees,point[1]*math_degrees]}function recenter(){var center=scaleTranslateRotate(k,0,0,alpha).apply(null,project(lambda,phi)),transform=(alpha?scaleTranslateRotate:scaleTranslate)(k,x-center[0],y-center[1],alpha);return rotate=rotateRadians(deltaLambda,deltaPhi,deltaGamma),projectTransform=compose(project,transform),projectRotateTransform=compose(rotate,projectTransform),projectResample=resample(projectTransform,delta2),reset()}function reset(){return cache=cacheStream=null,projection}return projection.stream=function(stream){return cache&&cacheStream===stream?cache:cache=transformRadians(function transformRotate(rotate){return transform_transformer({point:function(x,y){var r=rotate(x,y);return this.stream.point(r[0],r[1])}})}(rotate)(preclip(projectResample(postclip(cacheStream=stream)))))},projection.preclip=function(_){return arguments.length?(preclip=_,theta=void 0,reset()):preclip},projection.postclip=function(_){return arguments.length?(postclip=_,x0=y0=x1=y1=null,reset()):postclip},projection.clipAngle=function(_){return arguments.length?(preclip=+_?clip_circle(theta=_*radians):(theta=null,clip_antimeridian),reset()):theta*math_degrees},projection.clipExtent=function(_){return arguments.length?(postclip=null==_?(x0=y0=x1=y1=null,d3_geo_src_identity):clipRectangle(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reset()):null==x0?null:[[x0,y0],[x1,y1]]},projection.scale=function(_){return arguments.length?(k=+_,recenter()):k},projection.translate=function(_){return arguments.length?(x=+_[0],y=+_[1],recenter()):[x,y]},projection.center=function(_){return arguments.length?(lambda=_[0]%360*radians,phi=_[1]%360*radians,recenter()):[lambda*math_degrees,phi*math_degrees]},projection.rotate=function(_){return arguments.length?(deltaLambda=_[0]%360*radians,deltaPhi=_[1]%360*radians,deltaGamma=_.length>2?_[2]%360*radians:0,recenter()):[deltaLambda*math_degrees,deltaPhi*math_degrees,deltaGamma*math_degrees]},projection.angle=function(_){return arguments.length?(alpha=_%360*radians,recenter()):alpha*math_degrees},projection.precision=function(_){return arguments.length?(projectResample=resample(projectTransform,delta2=_*_),reset()):math_sqrt(delta2)},projection.fitExtent=function(extent,object){return fitExtent(projection,extent,object)},projection.fitSize=function(size,object){return fitSize(projection,size,object)},projection.fitWidth=function(width,object){return fitWidth(projection,width,object)},projection.fitHeight=function(height,object){return fitHeight(projection,height,object)},function(){return project=projectAt.apply(this,arguments),projection.invert=project.invert&&invert,recenter()}}function conicProjection(projectAt){var phi0=0,phi1=math_pi/3,m=projectionMutator(projectAt),p=m(phi0,phi1);return p.parallels=function(_){return arguments.length?m(phi0=_[0]*radians,phi1=_[1]*radians):[phi0*math_degrees,phi1*math_degrees]},p}function conicEqualAreaRaw(y0,y1){var sy0=src_math_sin(y0),n=(sy0+src_math_sin(y1))/2;if(math_abs(n)<src_math_epsilon)return function cylindricalEqualAreaRaw(phi0){var cosPhi0=src_math_cos(phi0);function forward(lambda,phi){return[lambda*cosPhi0,src_math_sin(phi)/cosPhi0]}return forward.invert=function(x,y){return[x/cosPhi0,math_asin(y*cosPhi0)]},forward}(y0);var c=1+sy0*(2*n-sy0),r0=math_sqrt(c)/n;function project(x,y){var r=math_sqrt(c-2*n*src_math_sin(y))/n;return[r*src_math_sin(x*=n),r0-r*src_math_cos(x)]}return project.invert=function(x,y){var r0y=r0-y;return[math_atan2(x,math_abs(r0y))/n*math_sign(r0y),math_asin((c-(x*x+r0y*r0y)*n*n)/(2*n))]},project}var conicEqualArea=function(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])},albers=function(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function azimuthalRaw(scale){return function(x,y){var cx=src_math_cos(x),cy=src_math_cos(y),k=scale(cx*cy);return[k*cy*src_math_sin(x),k*src_math_sin(y)]}}function azimuthalInvert(angle){return function(x,y){var z=math_sqrt(x*x+y*y),c=angle(z),sc=src_math_sin(c),cc=src_math_cos(c);return[math_atan2(x*sc,z*cc),math_asin(z&&y*sc/z)]}}var azimuthalEqualAreaRaw=azimuthalRaw((function(cxcy){return math_sqrt(2/(1+cxcy))}));azimuthalEqualAreaRaw.invert=azimuthalInvert((function(z){return 2*math_asin(z/2)}));var azimuthalEquidistantRaw=azimuthalRaw((function(c){return(c=math_acos(c))&&c/src_math_sin(c)}));azimuthalEquidistantRaw.invert=azimuthalInvert((function(z){return z}));function mercatorRaw(lambda,phi){return[lambda,math_log(tan((math_halfPi+phi)/2))]}mercatorRaw.invert=function(x,y){return[x,2*atan(math_exp(y))-math_halfPi]};function mercatorProjection(project){var y0,x1,y1,m=projection_projection(project),center=m.center,scale=m.scale,translate=m.translate,clipExtent=m.clipExtent,x0=null;function reclip(){var k=math_pi*scale(),t=m(src_rotation(m.rotate()).invert([0,0]));return clipExtent(null==x0?[[t[0]-k,t[1]-k],[t[0]+k,t[1]+k]]:project===mercatorRaw?[[Math.max(t[0]-k,x0),y0],[Math.min(t[0]+k,x1),y1]]:[[x0,Math.max(t[1]-k,y0)],[x1,Math.min(t[1]+k,y1)]])}return m.scale=function(_){return arguments.length?(scale(_),reclip()):scale()},m.translate=function(_){return arguments.length?(translate(_),reclip()):translate()},m.center=function(_){return arguments.length?(center(_),reclip()):center()},m.clipExtent=function(_){return arguments.length?(null==_?x0=y0=x1=y1=null:(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reclip()):null==x0?null:[[x0,y0],[x1,y1]]},reclip()}function tany(y){return tan((math_halfPi+y)/2)}function conicConformalRaw(y0,y1){var cy0=src_math_cos(y0),n=y0===y1?src_math_sin(y0):math_log(cy0/src_math_cos(y1))/math_log(tany(y1)/tany(y0)),f=cy0*math_pow(tany(y0),n)/n;if(!n)return mercatorRaw;function project(x,y){f>0?y<-math_halfPi+src_math_epsilon&&(y=-math_halfPi+src_math_epsilon):y>math_halfPi-src_math_epsilon&&(y=math_halfPi-src_math_epsilon);var r=f/math_pow(tany(y),n);return[r*src_math_sin(n*x),f-r*src_math_cos(n*x)]}return project.invert=function(x,y){var fy=f-y,r=math_sign(n)*math_sqrt(x*x+fy*fy);return[math_atan2(x,math_abs(fy))/n*math_sign(fy),2*atan(math_pow(f/r,1/n))-math_halfPi]},project}function equirectangularRaw(lambda,phi){return[lambda,phi]}equirectangularRaw.invert=equirectangularRaw;function conicEquidistantRaw(y0,y1){var cy0=src_math_cos(y0),n=y0===y1?src_math_sin(y0):(cy0-src_math_cos(y1))/(y1-y0),g=cy0/n+y0;if(math_abs(n)<src_math_epsilon)return equirectangularRaw;function project(x,y){var gy=g-y,nx=n*x;return[gy*src_math_sin(nx),g-gy*src_math_cos(nx)]}return project.invert=function(x,y){var gy=g-y;return[math_atan2(x,math_abs(gy))/n*math_sign(gy),g-math_sign(n)*math_sqrt(x*x+gy*gy)]},project}var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,equalEarth_M=math_sqrt(3)/2;function equalEarthRaw(lambda,phi){var l=math_asin(equalEarth_M*src_math_sin(phi)),l2=l*l,l6=l2*l2*l2;return[lambda*src_math_cos(l)/(equalEarth_M*(A1+3*A2*l2+l6*(7*A3+9*A4*l2))),l*(A1+A2*l2+l6*(A3+A4*l2))]}equalEarthRaw.invert=function(x,y){for(var delta,l=y,l2=l*l,l6=l2*l2*l2,i=0;i<12&&(l6=(l2=(l-=delta=(l*(A1+A2*l2+l6*(A3+A4*l2))-y)/(A1+3*A2*l2+l6*(7*A3+9*A4*l2)))*l)*l2*l2,!(math_abs(delta)<1e-12));++i);return[equalEarth_M*x*(A1+3*A2*l2+l6*(7*A3+9*A4*l2))/src_math_cos(l),math_asin(src_math_sin(l)/equalEarth_M)]};function gnomonicRaw(x,y){var cy=src_math_cos(y),k=src_math_cos(x)*cy;return[cy*src_math_sin(x)/k,src_math_sin(y)/k]}gnomonicRaw.invert=azimuthalInvert(atan);function identity_scaleTranslate(kx,ky,tx,ty){return 1===kx&&1===ky&&0===tx&&0===ty?d3_geo_src_identity:transform_transformer({point:function(x,y){this.stream.point(x*kx+tx,y*ky+ty)}})}function naturalEarth1Raw(lambda,phi){var phi2=phi*phi,phi4=phi2*phi2;return[lambda*(.8707-.131979*phi2+phi4*(phi4*(.003971*phi2-.001529*phi4)-.013791)),phi*(1.007226+phi2*(.015085+phi4*(.028874*phi2-.044475-.005916*phi4)))]}naturalEarth1Raw.invert=function(x,y){var delta,phi=y,i=25;do{var phi2=phi*phi,phi4=phi2*phi2;phi-=delta=(phi*(1.007226+phi2*(.015085+phi4*(.028874*phi2-.044475-.005916*phi4)))-y)/(1.007226+phi2*(.045255+phi4*(.259866*phi2-.311325-.005916*11*phi4)))}while(math_abs(delta)>src_math_epsilon&&--i>0);return[x/(.8707+(phi2=phi*phi)*(phi2*(phi2*phi2*phi2*(.003971-.001529*phi2)-.013791)-.131979)),phi]};function orthographicRaw(x,y){return[src_math_cos(y)*src_math_sin(x),src_math_sin(y)]}orthographicRaw.invert=azimuthalInvert(math_asin);function stereographicRaw(x,y){var cy=src_math_cos(y),k=1+src_math_cos(x)*cy;return[cy*src_math_sin(x)/k,src_math_sin(y)/k]}stereographicRaw.invert=azimuthalInvert((function(z){return 2*atan(z)}));function transverseMercatorRaw(lambda,phi){return[math_log(tan((math_halfPi+phi)/2)),-lambda]}transverseMercatorRaw.invert=function(x,y){return[-y,2*atan(math_exp(x))-math_halfPi]};var defaultPath=d3_geo_src_path(),projectionProperties=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function projections_projection(type,proj){if(!type||"string"!=typeof type)throw new Error("Projection type must be a name string.");return type=type.toLowerCase(),arguments.length>1?(projections_projections[type]=function projections_create(type,constructor){return function projection(){var p=constructor();return p.type=type,p.path=d3_geo_src_path().projection(p),p.copy=p.copy||function(){var c=projection();return projectionProperties.forEach((function(prop){p[prop]&&c[prop](p[prop]())})),c.path.pointRadius(p.path.pointRadius()),c},p}}(type,proj),this):projections_projections[type]||null}function getProjectionPath(proj){return proj&&proj.path||defaultPath}var projections_projections={albers:albers,albersusa:function(){var cache,cacheStream,lower48Point,alaskaPoint,hawaiiPoint,point,lower48=albers(),alaska=conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),hawaii=conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),pointStream={point:function(x,y){point=[x,y]}};function albersUsa(coordinates){var x=coordinates[0],y=coordinates[1];return point=null,lower48Point.point(x,y),point||(alaskaPoint.point(x,y),point)||(hawaiiPoint.point(x,y),point)}function reset(){return cache=cacheStream=null,albersUsa}return albersUsa.invert=function(coordinates){var k=lower48.scale(),t=lower48.translate(),x=(coordinates[0]-t[0])/k,y=(coordinates[1]-t[1])/k;return(y>=.12&&y<.234&&x>=-.425&&x<-.214?alaska:y>=.166&&y<.234&&x>=-.214&&x<-.115?hawaii:lower48).invert(coordinates)},albersUsa.stream=function(stream){return cache&&cacheStream===stream?cache:cache=function multiplex(streams){var n=streams.length;return{point:function(x,y){for(var i=-1;++i<n;)streams[i].point(x,y)},sphere:function(){for(var i=-1;++i<n;)streams[i].sphere()},lineStart:function(){for(var i=-1;++i<n;)streams[i].lineStart()},lineEnd:function(){for(var i=-1;++i<n;)streams[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<n;)streams[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<n;)streams[i].polygonEnd()}}}([lower48.stream(cacheStream=stream),alaska.stream(stream),hawaii.stream(stream)])},albersUsa.precision=function(_){return arguments.length?(lower48.precision(_),alaska.precision(_),hawaii.precision(_),reset()):lower48.precision()},albersUsa.scale=function(_){return arguments.length?(lower48.scale(_),alaska.scale(.35*_),hawaii.scale(_),albersUsa.translate(lower48.translate())):lower48.scale()},albersUsa.translate=function(_){if(!arguments.length)return lower48.translate();var k=lower48.scale(),x=+_[0],y=+_[1];return lower48Point=lower48.translate(_).clipExtent([[x-.455*k,y-.238*k],[x+.455*k,y+.238*k]]).stream(pointStream),alaskaPoint=alaska.translate([x-.307*k,y+.201*k]).clipExtent([[x-.425*k+src_math_epsilon,y+.12*k+src_math_epsilon],[x-.214*k-src_math_epsilon,y+.234*k-src_math_epsilon]]).stream(pointStream),hawaiiPoint=hawaii.translate([x-.205*k,y+.212*k]).clipExtent([[x-.214*k+src_math_epsilon,y+.166*k+src_math_epsilon],[x-.115*k-src_math_epsilon,y+.234*k-src_math_epsilon]]).stream(pointStream),reset()},albersUsa.fitExtent=function(extent,object){return fitExtent(albersUsa,extent,object)},albersUsa.fitSize=function(size,object){return fitSize(albersUsa,size,object)},albersUsa.fitWidth=function(width,object){return fitWidth(albersUsa,width,object)},albersUsa.fitHeight=function(height,object){return fitHeight(albersUsa,height,object)},albersUsa.scale(1070)},azimuthalequalarea:function(){return projection_projection(azimuthalEqualAreaRaw).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return projection_projection(azimuthalEquidistantRaw).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])},conicequalarea:conicEqualArea,conicequidistant:function(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])},equalEarth:function(){return projection_projection(equalEarthRaw).scale(177.158)},equirectangular:function(){return projection_projection(equirectangularRaw).scale(152.63)},gnomonic:function(){return projection_projection(gnomonicRaw).scale(144.049).clipAngle(60)},identity:function(){var y0,x1,y1,cache,cacheStream,projection,k=1,tx=0,ty=0,sx=1,sy=1,transform=d3_geo_src_identity,x0=null,postclip=d3_geo_src_identity;function reset(){return cache=cacheStream=null,projection}return projection={stream:function(stream){return cache&&cacheStream===stream?cache:cache=transform(postclip(cacheStream=stream))},postclip:function(_){return arguments.length?(postclip=_,x0=y0=x1=y1=null,reset()):postclip},clipExtent:function(_){return arguments.length?(postclip=null==_?(x0=y0=x1=y1=null,d3_geo_src_identity):clipRectangle(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reset()):null==x0?null:[[x0,y0],[x1,y1]]},scale:function(_){return arguments.length?(transform=identity_scaleTranslate((k=+_)*sx,k*sy,tx,ty),reset()):k},translate:function(_){return arguments.length?(transform=identity_scaleTranslate(k*sx,k*sy,tx=+_[0],ty=+_[1]),reset()):[tx,ty]},reflectX:function(_){return arguments.length?(transform=identity_scaleTranslate(k*(sx=_?-1:1),k*sy,tx,ty),reset()):sx<0},reflectY:function(_){return arguments.length?(transform=identity_scaleTranslate(k*sx,k*(sy=_?-1:1),tx,ty),reset()):sy<0},fitExtent:function(extent,object){return fitExtent(projection,extent,object)},fitSize:function(size,object){return fitSize(projection,size,object)},fitWidth:function(width,object){return fitWidth(projection,width,object)},fitHeight:function(height,object){return fitHeight(projection,height,object)}}},mercator:function(){return mercatorProjection(mercatorRaw).scale(961/math_tau)},naturalEarth1:function(){return projection_projection(naturalEarth1Raw).scale(175.295)},orthographic:function(){return projection_projection(orthographicRaw).scale(249.5).clipAngle(90+src_math_epsilon)},stereographic:function(){return projection_projection(stereographicRaw).scale(250).clipAngle(142)},transversemercator:function(){var m=mercatorProjection(transverseMercatorRaw),center=m.center,rotate=m.rotate;return m.center=function(_){return arguments.length?center([-_[1],_[0]]):[(_=center())[1],-_[0]]},m.rotate=function(_){return arguments.length?rotate([_[0],_[1],_.length>2?_[2]+90:90]):[(_=rotate())[0],_[1],_[2]-90]},rotate([0,0,90]).scale(159.155)}};for(var projections_key in projections_projections)projections_projection(projections_key,projections_projections[projections_key]);function GeoPath(params){Transform.call(this,null,params)}function GeoPoint(params){Transform.call(this,null,params)}function GeoShape(params){Transform.call(this,null,params)}GeoPath.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},Object(vega_util.y)(GeoPath,Transform).transform=function(_,pulse){var out=pulse.fork(pulse.ALL),path=this.value,field=_.field||vega_util.x,as=_.as||"path",flag=out.SOURCE;!path||_.modified()?(this.value=path=getProjectionPath(_.projection),out.materialize().reflow()):flag=field===vega_util.x||pulse.modified(field.fields)?out.ADD_MOD:out.ADD;var prev=function initPath(path,pointRadius){var prev=path.pointRadius();path.context(null),null!=pointRadius&&path.pointRadius(pointRadius);return prev}(path,_.pointRadius);return out.visit(flag,(function set(t){t[as]=path(field(t))})),path.pointRadius(prev),out.modifies(as)},GeoPoint.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},Object(vega_util.y)(GeoPoint,Transform).transform=function(_,pulse){var mod,proj=_.projection,lon=_.fields[0],lat=_.fields[1],as=_.as||["x","y"],x=as[0],y=as[1];function set(t){var xy=proj([lon(t),lat(t)]);xy?(t[x]=xy[0],t[y]=xy[1]):(t[x]=void 0,t[y]=void 0)}return _.modified()?pulse=pulse.materialize().reflow(!0).visit(pulse.SOURCE,set):(mod=pulse.modified(lon.fields)||pulse.modified(lat.fields),pulse.visit(mod?pulse.ADD_MOD:pulse.ADD,set)),pulse.modifies(as)},GeoShape.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},Object(vega_util.y)(GeoShape,Transform).transform=function(_,pulse){var out=pulse.fork(pulse.ALL),shape=this.value,as=_.as||"shape",flag=out.ADD;return shape&&!_.modified()||(this.value=shape=function shapeGenerator(path,field,pointRadius){var shape=null==pointRadius?function(_){return path(field(_))}:function(_){var prev=path.pointRadius(),value=path.pointRadius(pointRadius)(field(_));return path.pointRadius(prev),value};return shape.context=function(_){return path.context(_),shape},shape}(getProjectionPath(_.projection),_.field||Object(vega_util.t)("datum"),_.pointRadius),out.materialize().reflow(),flag=out.SOURCE),out.visit(flag,(function(t){t[as]=shape})),out.modifies(as)};var src_ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN};var compare;1===(compare=src_ascending).length&&(compare=function bisector_ascendingComparator(f){return function(d,x){return src_ascending(f(d),x)}}(compare));var array_array=Array.prototype,d3_array_src_range=(array_array.slice,array_array.map,function(start,stop,step){start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,start=0,1):n<3?1:+step;for(var i=-1,n=0|Math.max(0,Math.ceil((stop-start)/step)),range=new Array(n);++i<n;)range[i]=start+i*step;return range});Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var d3_geo_src_math_epsilon=1e-6,src_math_abs=(Math.PI,Math.abs),math_ceil=(Math.atan,Math.atan2,Math.cos,Math.ceil);Math.exp,Math.floor,Math.log,Math.pow,Math.sin,Math.sign,Math.sqrt,Math.tan;function graticuleX(y0,y1,dy){var y=d3_array_src_range(y0,y1-d3_geo_src_math_epsilon,dy).concat(y1);return function(x){return y.map((function(y){return[x,y]}))}}function graticuleY(x0,x1,dx){var x=d3_array_src_range(x0,x1-d3_geo_src_math_epsilon,dx).concat(x1);return function(y){return x.map((function(x){return[x,y]}))}}function graticule_graticule(){var x1,x0,X1,X0,y1,y0,Y1,Y0,x,y,X,Y,dx=10,dy=dx,DX=90,DY=360,precision=2.5;function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return d3_array_src_range(math_ceil(X0/DX)*DX,X1,DX).map(X).concat(d3_array_src_range(math_ceil(Y0/DY)*DY,Y1,DY).map(Y)).concat(d3_array_src_range(math_ceil(x0/dx)*dx,x1,dx).filter((function(x){return src_math_abs(x%DX)>d3_geo_src_math_epsilon})).map(x)).concat(d3_array_src_range(math_ceil(y0/dy)*dy,y1,dy).filter((function(y){return src_math_abs(y%DY)>d3_geo_src_math_epsilon})).map(y))}return graticule.lines=function(){return lines().map((function(coordinates){return{type:"LineString",coordinates:coordinates}}))},graticule.outline=function(){return{type:"Polygon",coordinates:[X(X0).concat(Y(Y1).slice(1),X(X1).reverse().slice(1),Y(Y0).reverse().slice(1))]}},graticule.extent=function(_){return arguments.length?graticule.extentMajor(_).extentMinor(_):graticule.extentMinor()},graticule.extentMajor=function(_){return arguments.length?(X0=+_[0][0],X1=+_[1][0],Y0=+_[0][1],Y1=+_[1][1],X0>X1&&(_=X0,X0=X1,X1=_),Y0>Y1&&(_=Y0,Y0=Y1,Y1=_),graticule.precision(precision)):[[X0,Y0],[X1,Y1]]},graticule.extentMinor=function(_){return arguments.length?(x0=+_[0][0],x1=+_[1][0],y0=+_[0][1],y1=+_[1][1],x0>x1&&(_=x0,x0=x1,x1=_),y0>y1&&(_=y0,y0=y1,y1=_),graticule.precision(precision)):[[x0,y0],[x1,y1]]},graticule.step=function(_){return arguments.length?graticule.stepMajor(_).stepMinor(_):graticule.stepMinor()},graticule.stepMajor=function(_){return arguments.length?(DX=+_[0],DY=+_[1],graticule):[DX,DY]},graticule.stepMinor=function(_){return arguments.length?(dx=+_[0],dy=+_[1],graticule):[dx,dy]},graticule.precision=function(_){return arguments.length?(precision=+_,x=graticuleX(y0,y1,90),y=graticuleY(x0,x1,precision),X=graticuleX(Y0,Y1,90),Y=graticuleY(X0,X1,precision),graticule):precision},graticule.extentMajor([[-180,-90+d3_geo_src_math_epsilon],[180,90-d3_geo_src_math_epsilon]]).extentMinor([[-180,-80-d3_geo_src_math_epsilon],[180,80+d3_geo_src_math_epsilon]])}function Graticule(params){Transform.call(this,[],params),this.generator=graticule_graticule()}function Heatmap(params){Transform.call(this,null,params)}function dependency(f){if(!Object(vega_util.D)(f))return!1;const set=Object(vega_util.cb)(Object(vega_util.g)(f));return set.$x||set.$y||set.$value||set.$max}function Projection(params){Transform.call(this,null,params),this.modified(!0)}function Projection_set(proj,key,value){Object(vega_util.D)(proj[key])&&proj[key](value)}Graticule.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},Object(vega_util.y)(Graticule,Transform).transform=function(_,pulse){var t,src=this.value,gen=this.generator;if(!src.length||_.modified())for(var prop in _)Object(vega_util.D)(gen[prop])&&gen[prop](_[prop]);return t=gen(),src.length?pulse.mod.push(replace(src[0],t)):pulse.add.push(ingest(t)),src[0]=t,pulse},Heatmap.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},Object(vega_util.y)(Heatmap,Transform).transform=function(_,pulse){if(!pulse.changed()&&!_.modified())return pulse.StopPropagation;var source=pulse.materialize(pulse.SOURCE).source,shared="shared"===_.resolve,field=_.field||vega_util.x,opacity=function opacity_(opacity,_){let f;Object(vega_util.D)(opacity)?(f=obj=>opacity(obj,_)).dep=dependency(opacity):opacity?f=Object(vega_util.l)(opacity):(f=obj=>obj.$value/obj.$max||0).dep=!0;return f}(_.opacity,_),color=function color_(color,_){let f;Object(vega_util.D)(color)?(f=obj=>color_rgb(color(obj,_))).dep=dependency(color):f=Object(vega_util.l)(color_rgb(color||"#888"));return f}(_.color,_),as=_.as||"image",obj={$x:0,$y:0,$value:0,$max:shared?max_max(source.map(t=>max_max(field(t).values))):0};return source.forEach(t=>{const v=field(t),o=Object(vega_util.o)({},t,obj);shared||(o.$max=max_max(v.values||[])),t[as]=function toCanvas(grid,obj,color,opacity){const n=grid.width,m=grid.height,x1=grid.x1||0,y1=grid.y1||0,x2=grid.x2||n,y2=grid.y2||m,val=grid.values,value=val?i=>val[i]:vega_util.jb,can=domCanvas(x2-x1,y2-y1),ctx=can.getContext("2d"),img=ctx.getImageData(0,0,x2-x1,y2-y1),pix=img.data;for(let j=y1,k=0;j<y2;++j){obj.$y=j-y1;for(let i=x1,r=j*n;i<x2;++i,k+=4){obj.$x=i-x1,obj.$value=value(i+r);const v=color(obj);pix[k+0]=v.r,pix[k+1]=v.g,pix[k+2]=v.b,pix[k+3]=~~(255*opacity(obj))}}return ctx.putImageData(img,0,0),can}(v,o,color.dep?color:Object(vega_util.l)(color(o)),opacity.dep?opacity:Object(vega_util.l)(opacity(o)))}),pulse.reflow(!0).modifies(as)},Object(vega_util.y)(Projection,Transform).transform=function(_,pulse){var proj=this.value;return!proj||_.modified("type")?(this.value=proj=function Projection_create(type){var constructor=projections_projection((type||"mercator").toLowerCase());constructor||Object(vega_util.n)("Unrecognized projection type: "+type);return constructor()}(_.type),projectionProperties.forEach((function(prop){null!=_[prop]&&Projection_set(proj,prop,_[prop])}))):projectionProperties.forEach((function(prop){_.modified(prop)&&Projection_set(proj,prop,_[prop])})),null!=_.pointRadius&&proj.path.pointRadius(_.pointRadius),_.fit&&function Projection_fit(proj,_){var data=function collectGeoJSON(data){return 1===(data=Object(vega_util.i)(data)).length?data[0]:{type:FeatureCollection,features:data.reduce((a,f)=>a.concat(function featurize(f){return f.type===FeatureCollection?f.features:Object(vega_util.i)(f).filter(d=>null!=d).map(d=>d.type===Feature?d:{type:Feature,geometry:d})}(f)),[])}}(_.fit);_.extent?proj.fitExtent(_.extent,data):_.size&&proj.fitSize(_.size,data)}(proj,_),pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS)};function add_add(tree,x,y,d){if(isNaN(x)||isNaN(y))return tree;var parent,xm,ym,xp,yp,right,bottom,i,j,node=tree._root,leaf={data:d},x0=tree._x0,y0=tree._y0,x1=tree._x1,y1=tree._y1;if(!node)return tree._root=leaf,tree;for(;node.length;)if((right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym,parent=node,!(node=node[i=bottom<<1|right]))return parent[i]=leaf,tree;if(xp=+tree._x.call(null,node.data),yp=+tree._y.call(null,node.data),x===xp&&y===yp)return leaf.next=node,parent?parent[i]=leaf:tree._root=leaf,tree;do{parent=parent?parent[i]=new Array(4):tree._root=new Array(4),(right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym}while((i=bottom<<1|right)==(j=(yp>=ym)<<1|xp>=xm));return parent[j]=node,parent[i]=leaf,tree}var src_quad=function(node,x0,y0,x1,y1){this.node=node,this.x0=x0,this.y0=y0,this.x1=x1,this.y1=y1};function defaultX(d){return d[0]}function defaultY(d){return d[1]}function quadtree(nodes,x,y){var tree=new Quadtree(null==x?defaultX:x,null==y?defaultY:y,NaN,NaN,NaN,NaN);return null==nodes?tree:tree.addAll(nodes)}function Quadtree(x,y,x0,y0,x1,y1){this._x=x,this._y=y,this._x0=x0,this._y0=y0,this._x1=x1,this._y1=y1,this._root=void 0}function leaf_copy(leaf){for(var copy={data:leaf.data},next=copy;leaf=leaf.next;)next=next.next={data:leaf.data};return copy}var treeProto=quadtree.prototype=Quadtree.prototype;treeProto.copy=function(){var nodes,child,copy=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),node=this._root;if(!node)return copy;if(!node.length)return copy._root=leaf_copy(node),copy;for(nodes=[{source:node,target:copy._root=new Array(4)}];node=nodes.pop();)for(var i=0;i<4;++i)(child=node.source[i])&&(child.length?nodes.push({source:child,target:node.target[i]=new Array(4)}):node.target[i]=leaf_copy(child));return copy},treeProto.add=function(d){var x=+this._x.call(null,d),y=+this._y.call(null,d);return add_add(this.cover(x,y),x,y,d)},treeProto.addAll=function addAll(data){var d,i,x,y,n=data.length,xz=new Array(n),yz=new Array(n),x0=1/0,y0=1/0,x1=-1/0,y1=-1/0;for(i=0;i<n;++i)isNaN(x=+this._x.call(null,d=data[i]))||isNaN(y=+this._y.call(null,d))||(xz[i]=x,yz[i]=y,x<x0&&(x0=x),x>x1&&(x1=x),y<y0&&(y0=y),y>y1&&(y1=y));if(x0>x1||y0>y1)return this;for(this.cover(x0,y0).cover(x1,y1),i=0;i<n;++i)add_add(this,xz[i],yz[i],data[i]);return this},treeProto.cover=function(x,y){if(isNaN(x=+x)||isNaN(y=+y))return this;var x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1;if(isNaN(x0))x1=(x0=Math.floor(x))+1,y1=(y0=Math.floor(y))+1;else{for(var parent,i,z=x1-x0,node=this._root;x0>x||x>=x1||y0>y||y>=y1;)switch(i=(y<y0)<<1|x<x0,(parent=new Array(4))[i]=node,node=parent,z*=2,i){case 0:x1=x0+z,y1=y0+z;break;case 1:x0=x1-z,y1=y0+z;break;case 2:x1=x0+z,y0=y1-z;break;case 3:x0=x1-z,y0=y1-z}this._root&&this._root.length&&(this._root=node)}return this._x0=x0,this._y0=y0,this._x1=x1,this._y1=y1,this},treeProto.data=function(){var data=[];return this.visit((function(node){if(!node.length)do{data.push(node.data)}while(node=node.next)})),data},treeProto.extent=function(_){return arguments.length?this.cover(+_[0][0],+_[0][1]).cover(+_[1][0],+_[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},treeProto.find=function(x,y,radius){var data,x1,y1,x2,y2,q,i,x0=this._x0,y0=this._y0,x3=this._x1,y3=this._y1,quads=[],node=this._root;for(node&&quads.push(new src_quad(node,x0,y0,x3,y3)),null==radius?radius=1/0:(x0=x-radius,y0=y-radius,x3=x+radius,y3=y+radius,radius*=radius);q=quads.pop();)if(!(!(node=q.node)||(x1=q.x0)>x3||(y1=q.y0)>y3||(x2=q.x1)<x0||(y2=q.y1)<y0))if(node.length){var xm=(x1+x2)/2,ym=(y1+y2)/2;quads.push(new src_quad(node[3],xm,ym,x2,y2),new src_quad(node[2],x1,ym,xm,y2),new src_quad(node[1],xm,y1,x2,ym),new src_quad(node[0],x1,y1,xm,ym)),(i=(y>=ym)<<1|x>=xm)&&(q=quads[quads.length-1],quads[quads.length-1]=quads[quads.length-1-i],quads[quads.length-1-i]=q)}else{var dx=x-+this._x.call(null,node.data),dy=y-+this._y.call(null,node.data),d2=dx*dx+dy*dy;if(d2<radius){var d=Math.sqrt(radius=d2);x0=x-d,y0=y-d,x3=x+d,y3=y+d,data=node.data}}return data},treeProto.remove=function(d){if(isNaN(x=+this._x.call(null,d))||isNaN(y=+this._y.call(null,d)))return this;var parent,retainer,previous,next,x,y,xm,ym,right,bottom,i,j,node=this._root,x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1;if(!node)return this;if(node.length)for(;;){if((right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym,parent=node,!(node=node[i=bottom<<1|right]))return this;if(!node.length)break;(parent[i+1&3]||parent[i+2&3]||parent[i+3&3])&&(retainer=parent,j=i)}for(;node.data!==d;)if(previous=node,!(node=node.next))return this;return(next=node.next)&&delete node.next,previous?(next?previous.next=next:delete previous.next,this):parent?(next?parent[i]=next:delete parent[i],(node=parent[0]||parent[1]||parent[2]||parent[3])&&node===(parent[3]||parent[2]||parent[1]||parent[0])&&!node.length&&(retainer?retainer[j]=node:this._root=node),this):(this._root=next,this)},treeProto.removeAll=function removeAll(data){for(var i=0,n=data.length;i<n;++i)this.remove(data[i]);return this},treeProto.root=function(){return this._root},treeProto.size=function(){var size=0;return this.visit((function(node){if(!node.length)do{++size}while(node=node.next)})),size},treeProto.visit=function(callback){var q,child,x0,y0,x1,y1,quads=[],node=this._root;for(node&&quads.push(new src_quad(node,this._x0,this._y0,this._x1,this._y1));q=quads.pop();)if(!callback(node=q.node,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1)&&node.length){var xm=(x0+x1)/2,ym=(y0+y1)/2;(child=node[3])&&quads.push(new src_quad(child,xm,ym,x1,y1)),(child=node[2])&&quads.push(new src_quad(child,x0,ym,xm,y1)),(child=node[1])&&quads.push(new src_quad(child,xm,y0,x1,ym)),(child=node[0])&&quads.push(new src_quad(child,x0,y0,xm,ym))}return this},treeProto.visitAfter=function(callback){var q,quads=[],next=[];for(this._root&&quads.push(new src_quad(this._root,this._x0,this._y0,this._x1,this._y1));q=quads.pop();){var node=q.node;if(node.length){var child,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1,xm=(x0+x1)/2,ym=(y0+y1)/2;(child=node[0])&&quads.push(new src_quad(child,x0,y0,xm,ym)),(child=node[1])&&quads.push(new src_quad(child,xm,y0,x1,ym)),(child=node[2])&&quads.push(new src_quad(child,x0,ym,xm,y1)),(child=node[3])&&quads.push(new src_quad(child,xm,ym,x1,y1))}next.push(q)}for(;q=next.pop();)callback(q.node,q.x0,q.y0,q.x1,q.y1);return this},treeProto.x=function(_){return arguments.length?(this._x=_,this):this._x},treeProto.y=function(_){return arguments.length?(this._y=_,this):this._y};var d3_force_src_constant=function(x){return function(){return x}},jiggle=function(){return 1e-6*(Math.random()-.5)};function collide_x(d){return d.x+d.vx}function collide_y(d){return d.y+d.vy}function link_index(d){return d.index}function link_find(nodeById,nodeId){var node=nodeById.get(nodeId);if(!node)throw new Error("missing: "+nodeId);return node}var dispatch_noop={value:function(){}};function dispatch(){for(var t,i=0,n=arguments.length,_={};i<n;++i){if(!(t=arguments[i]+"")||t in _)throw new Error("illegal type: "+t);_[t]=[]}return new Dispatch(_)}function Dispatch(_){this._=_}function parseTypenames(typenames,types){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");if(i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:name}}))}function dispatch_get(type,name){for(var c,i=0,n=type.length;i<n;++i)if((c=type[i]).name===name)return c.value}function dispatch_set(type,name,callback){for(var i=0,n=type.length;i<n;++i)if(type[i].name===name){type[i]=dispatch_noop,type=type.slice(0,i).concat(type.slice(i+1));break}return null!=callback&&type.push({name:name,value:callback}),type}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(typename,callback){var t,_=this._,T=parseTypenames(typename+"",_),i=-1,n=T.length;if(!(arguments.length<2)){if(null!=callback&&"function"!=typeof callback)throw new Error("invalid callback: "+callback);for(;++i<n;)if(t=(typename=T[i]).type)_[t]=dispatch_set(_[t],typename.name,callback);else if(null==callback)for(t in _)_[t]=dispatch_set(_[t],typename.name,null);return this}for(;++i<n;)if((t=(typename=T[i]).type)&&(t=dispatch_get(_[t],typename.name)))return t},copy:function(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch(copy)},call:function(type,that){if((n=arguments.length-2)>0)for(var n,t,args=new Array(n),i=0;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(i=0,n=(t=this._[type]).length;i<n;++i)t[i].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)}};var taskHead,taskTail,src_dispatch=dispatch,timer_frame=0,timeout=0,timer_interval=0,pokeDelay=1e3,clockLast=0,clockNow=0,clockSkew=0,clock="object"==typeof performance&&performance.now?performance:Date,setFrame="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}function timer(callback,delay,time){var t=new Timer;return t.restart(callback,delay,time),t}function wake(){clockNow=(clockLast=clock.now())+clockSkew,timer_frame=timeout=0;try{!function timerFlush(){now(),++timer_frame;for(var e,t=taskHead;t;)(e=clockNow-t._time)>=0&&t._call.call(null,e),t=t._next;--timer_frame}()}finally{timer_frame=0,function nap(){var t0,t2,t1=taskHead,time=1/0;for(;t1;)t1._call?(time>t1._time&&(time=t1._time),t0=t1,t1=t1._next):(t2=t1._next,t1._next=null,t1=t0?t0._next=t2:taskHead=t2);taskTail=t0,sleep(time)}(),clockNow=0}}function poke(){var now=clock.now(),delay=now-clockLast;delay>pokeDelay&&(clockSkew-=delay,clockLast=now)}function sleep(time){timer_frame||(timeout&&(timeout=clearTimeout(timeout)),time-clockNow>24?(time<1/0&&(timeout=setTimeout(wake,time-clock.now()-clockSkew)),timer_interval&&(timer_interval=clearInterval(timer_interval))):(timer_interval||(clockLast=clock.now(),timer_interval=setInterval(poke,pokeDelay)),timer_frame=1,setFrame(wake)))}Timer.prototype=timer.prototype={constructor:Timer,restart:function(callback,delay,time){if("function"!=typeof callback)throw new TypeError("callback is not a function");time=(null==time?now():+time)+(null==delay?0:+delay),this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=callback,this._time=time,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function simulation_x(d){return d.x}function simulation_y(d){return d.y}var initialRadius=10,initialAngle=Math.PI*(3-Math.sqrt(5)),src_simulation=function(nodes){var simulation,alpha=1,alphaMin=.001,alphaDecay=1-Math.pow(alphaMin,1/300),alphaTarget=0,velocityDecay=.6,forces=new Map,stepper=timer(step),event=src_dispatch("tick","end");function step(){tick(),event.call("tick",simulation),alpha<alphaMin&&(stepper.stop(),event.call("end",simulation))}function tick(iterations){var i,node,n=nodes.length;void 0===iterations&&(iterations=1);for(var k=0;k<iterations;++k)for(alpha+=(alphaTarget-alpha)*alphaDecay,forces.forEach((function(force){force(alpha)})),i=0;i<n;++i)null==(node=nodes[i]).fx?node.x+=node.vx*=velocityDecay:(node.x=node.fx,node.vx=0),null==node.fy?node.y+=node.vy*=velocityDecay:(node.y=node.fy,node.vy=0);return simulation}function initializeNodes(){for(var node,i=0,n=nodes.length;i<n;++i){if((node=nodes[i]).index=i,null!=node.fx&&(node.x=node.fx),null!=node.fy&&(node.y=node.fy),isNaN(node.x)||isNaN(node.y)){var radius=initialRadius*Math.sqrt(i),angle=i*initialAngle;node.x=radius*Math.cos(angle),node.y=radius*Math.sin(angle)}(isNaN(node.vx)||isNaN(node.vy))&&(node.vx=node.vy=0)}}function initializeForce(force){return force.initialize&&force.initialize(nodes),force}return null==nodes&&(nodes=[]),initializeNodes(),simulation={tick:tick,restart:function(){return stepper.restart(step),simulation},stop:function(){return stepper.stop(),simulation},nodes:function(_){return arguments.length?(nodes=_,initializeNodes(),forces.forEach(initializeForce),simulation):nodes},alpha:function(_){return arguments.length?(alpha=+_,simulation):alpha},alphaMin:function(_){return arguments.length?(alphaMin=+_,simulation):alphaMin},alphaDecay:function(_){return arguments.length?(alphaDecay=+_,simulation):+alphaDecay},alphaTarget:function(_){return arguments.length?(alphaTarget=+_,simulation):alphaTarget},velocityDecay:function(_){return arguments.length?(velocityDecay=1-_,simulation):1-velocityDecay},force:function(name,_){return arguments.length>1?(null==_?forces.delete(name):forces.set(name,initializeForce(_)),simulation):forces.get(name)},find:function(x,y,radius){var dx,dy,d2,node,closest,i=0,n=nodes.length;for(null==radius?radius=1/0:radius*=radius,i=0;i<n;++i)(d2=(dx=x-(node=nodes[i]).x)*dx+(dy=y-node.y)*dy)<radius&&(closest=node,radius=d2);return closest},on:function(name,_){return arguments.length>1?(event.on(name,_),simulation):event.on(name)}}},ForceMap={center:function(x,y){var nodes;function force(){var i,node,n=nodes.length,sx=0,sy=0;for(i=0;i<n;++i)sx+=(node=nodes[i]).x,sy+=node.y;for(sx=sx/n-x,sy=sy/n-y,i=0;i<n;++i)(node=nodes[i]).x-=sx,node.y-=sy}return null==x&&(x=0),null==y&&(y=0),force.initialize=function(_){nodes=_},force.x=function(_){return arguments.length?(x=+_,force):x},force.y=function(_){return arguments.length?(y=+_,force):y},force},collide:function(radius){var nodes,radii,strength=1,iterations=1;function force(){for(var i,tree,node,xi,yi,ri,ri2,n=nodes.length,k=0;k<iterations;++k)for(tree=quadtree(nodes,collide_x,collide_y).visitAfter(prepare),i=0;i<n;++i)node=nodes[i],ri=radii[node.index],ri2=ri*ri,xi=node.x+node.vx,yi=node.y+node.vy,tree.visit(apply);function apply(quad,x0,y0,x1,y1){var data=quad.data,rj=quad.r,r=ri+rj;if(!data)return x0>xi+r||x1<xi-r||y0>yi+r||y1<yi-r;if(data.index>node.index){var x=xi-data.x-data.vx,y=yi-data.y-data.vy,l=x*x+y*y;l<r*r&&(0===x&&(l+=(x=jiggle())*x),0===y&&(l+=(y=jiggle())*y),l=(r-(l=Math.sqrt(l)))/l*strength,node.vx+=(x*=l)*(r=(rj*=rj)/(ri2+rj)),node.vy+=(y*=l)*r,data.vx-=x*(r=1-r),data.vy-=y*r)}}}function prepare(quad){if(quad.data)return quad.r=radii[quad.data.index];for(var i=quad.r=0;i<4;++i)quad[i]&&quad[i].r>quad.r&&(quad.r=quad[i].r)}function initialize(){if(nodes){var i,node,n=nodes.length;for(radii=new Array(n),i=0;i<n;++i)node=nodes[i],radii[node.index]=+radius(node,i,nodes)}}return"function"!=typeof radius&&(radius=d3_force_src_constant(null==radius?1:+radius)),force.initialize=function(_){nodes=_,initialize()},force.iterations=function(_){return arguments.length?(iterations=+_,force):iterations},force.strength=function(_){return arguments.length?(strength=+_,force):strength},force.radius=function(_){return arguments.length?(radius="function"==typeof _?_:d3_force_src_constant(+_),initialize(),force):radius},force},nbody:function(){var nodes,node,alpha,strengths,strength=d3_force_src_constant(-30),distanceMin2=1,distanceMax2=1/0,theta2=.81;function force(_){var i,n=nodes.length,tree=quadtree(nodes,simulation_x,simulation_y).visitAfter(accumulate);for(alpha=_,i=0;i<n;++i)node=nodes[i],tree.visit(apply)}function initialize(){if(nodes){var i,node,n=nodes.length;for(strengths=new Array(n),i=0;i<n;++i)node=nodes[i],strengths[node.index]=+strength(node,i,nodes)}}function accumulate(quad){var q,c,x,y,i,strength=0,weight=0;if(quad.length){for(x=y=i=0;i<4;++i)(q=quad[i])&&(c=Math.abs(q.value))&&(strength+=q.value,weight+=c,x+=c*q.x,y+=c*q.y);quad.x=x/weight,quad.y=y/weight}else{(q=quad).x=q.data.x,q.y=q.data.y;do{strength+=strengths[q.data.index]}while(q=q.next)}quad.value=strength}function apply(quad,x1,_,x2){if(!quad.value)return!0;var x=quad.x-node.x,y=quad.y-node.y,w=x2-x1,l=x*x+y*y;if(w*w/theta2<l)return l<distanceMax2&&(0===x&&(l+=(x=jiggle())*x),0===y&&(l+=(y=jiggle())*y),l<distanceMin2&&(l=Math.sqrt(distanceMin2*l)),node.vx+=x*quad.value*alpha/l,node.vy+=y*quad.value*alpha/l),!0;if(!(quad.length||l>=distanceMax2)){(quad.data!==node||quad.next)&&(0===x&&(l+=(x=jiggle())*x),0===y&&(l+=(y=jiggle())*y),l<distanceMin2&&(l=Math.sqrt(distanceMin2*l)));do{quad.data!==node&&(w=strengths[quad.data.index]*alpha/l,node.vx+=x*w,node.vy+=y*w)}while(quad=quad.next)}}return force.initialize=function(_){nodes=_,initialize()},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:d3_force_src_constant(+_),initialize(),force):strength},force.distanceMin=function(_){return arguments.length?(distanceMin2=_*_,force):Math.sqrt(distanceMin2)},force.distanceMax=function(_){return arguments.length?(distanceMax2=_*_,force):Math.sqrt(distanceMax2)},force.theta=function(_){return arguments.length?(theta2=_*_,force):Math.sqrt(theta2)},force},link:function(links){var strengths,distances,nodes,count,bias,id=link_index,strength=function defaultStrength(link){return 1/Math.min(count[link.source.index],count[link.target.index])},distance=d3_force_src_constant(30),iterations=1;function force(alpha){for(var k=0,n=links.length;k<iterations;++k)for(var link,source,target,x,y,l,b,i=0;i<n;++i)source=(link=links[i]).source,x=(target=link.target).x+target.vx-source.x-source.vx||jiggle(),y=target.y+target.vy-source.y-source.vy||jiggle(),x*=l=((l=Math.sqrt(x*x+y*y))-distances[i])/l*alpha*strengths[i],y*=l,target.vx-=x*(b=bias[i]),target.vy-=y*b,source.vx+=x*(b=1-b),source.vy+=y*b}function initialize(){if(nodes){var i,link,n=nodes.length,m=links.length,nodeById=new Map(nodes.map((d,i)=>[id(d,i,nodes),d]));for(i=0,count=new Array(n);i<m;++i)(link=links[i]).index=i,"object"!=typeof link.source&&(link.source=link_find(nodeById,link.source)),"object"!=typeof link.target&&(link.target=link_find(nodeById,link.target)),count[link.source.index]=(count[link.source.index]||0)+1,count[link.target.index]=(count[link.target.index]||0)+1;for(i=0,bias=new Array(m);i<m;++i)link=links[i],bias[i]=count[link.source.index]/(count[link.source.index]+count[link.target.index]);strengths=new Array(m),initializeStrength(),distances=new Array(m),initializeDistance()}}function initializeStrength(){if(nodes)for(var i=0,n=links.length;i<n;++i)strengths[i]=+strength(links[i],i,links)}function initializeDistance(){if(nodes)for(var i=0,n=links.length;i<n;++i)distances[i]=+distance(links[i],i,links)}return null==links&&(links=[]),force.initialize=function(_){nodes=_,initialize()},force.links=function(_){return arguments.length?(links=_,initialize(),force):links},force.id=function(_){return arguments.length?(id=_,force):id},force.iterations=function(_){return arguments.length?(iterations=+_,force):iterations},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:d3_force_src_constant(+_),initializeStrength(),force):strength},force.distance=function(_){return arguments.length?(distance="function"==typeof _?_:d3_force_src_constant(+_),initializeDistance(),force):distance},force},x:function(x){var nodes,strengths,xz,strength=d3_force_src_constant(.1);function force(alpha){for(var node,i=0,n=nodes.length;i<n;++i)(node=nodes[i]).vx+=(xz[i]-node.x)*strengths[i]*alpha}function initialize(){if(nodes){var i,n=nodes.length;for(strengths=new Array(n),xz=new Array(n),i=0;i<n;++i)strengths[i]=isNaN(xz[i]=+x(nodes[i],i,nodes))?0:+strength(nodes[i],i,nodes)}}return"function"!=typeof x&&(x=d3_force_src_constant(null==x?0:+x)),force.initialize=function(_){nodes=_,initialize()},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:d3_force_src_constant(+_),initialize(),force):strength},force.x=function(_){return arguments.length?(x="function"==typeof _?_:d3_force_src_constant(+_),initialize(),force):x},force},y:function(y){var nodes,strengths,yz,strength=d3_force_src_constant(.1);function force(alpha){for(var node,i=0,n=nodes.length;i<n;++i)(node=nodes[i]).vy+=(yz[i]-node.y)*strengths[i]*alpha}function initialize(){if(nodes){var i,n=nodes.length;for(strengths=new Array(n),yz=new Array(n),i=0;i<n;++i)strengths[i]=isNaN(yz[i]=+y(nodes[i],i,nodes))?0:+strength(nodes[i],i,nodes)}}return"function"!=typeof y&&(y=d3_force_src_constant(null==y?0:+y)),force.initialize=function(_){nodes=_,initialize()},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:d3_force_src_constant(+_),initialize(),force):strength},force.y=function(_){return arguments.length?(y="function"==typeof _?_:d3_force_src_constant(+_),initialize(),force):y},force}},Forces="forces",ForceParams=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],ForceConfig=["static","iterations"],ForceOutput=["x","y","vx","vy"];function Force(params){Transform.call(this,null,params)}Force.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:ForceOutput}]};var Force_prototype=Object(vega_util.y)(Force,Transform);function setup(sim,_,init,pulse){var i,n,p,name,f=Object(vega_util.i)(_.forces);for(i=0,n=ForceParams.length;i<n;++i)(p=ForceParams[i])!==Forces&&_.modified(p)&&sim[p](_[p]);for(i=0,n=f.length;i<n;++i)name=Forces+i,(p=init||_.modified(Forces,i)?getForce(f[i]):pulse&&modified(f[i],pulse)?sim.force(name):null)&&sim.force(name,p);for(n=sim.numForces||0;i<n;++i)sim.force(Forces+i,null);return sim.numForces=f.length,sim}function modified(f,pulse){var k,v;for(k in f)if(Object(vega_util.D)(v=f[k])&&pulse.modified(Object(vega_util.g)(v)))return 1;return 0}function getForce(_){var f,p;for(p in Object(vega_util.v)(ForceMap,_.force)||Object(vega_util.n)("Unrecognized force: "+_.force),f=ForceMap[_.force](),_)Object(vega_util.D)(f[p])&&setForceParam(f[p],_[p],_);return f}function setForceParam(f,v,_){f(Object(vega_util.D)(v)?function(d){return v(d,_)}:v)}Force_prototype.transform=function(_,pulse){var sim=this.value,change=pulse.changed(pulse.ADD_REM),params=_.modified(ForceParams),iters=_.iterations||300;if(sim?(change&&(pulse.modifies("index"),sim.nodes(pulse.source)),(params||pulse.changed(pulse.MOD))&&setup(sim,_,0,pulse)):(this.value=sim=function Force_simulation(nodes,_){var sim=src_simulation(nodes),stopped=!1,stop=sim.stop,restart=sim.restart;return sim.stopped=function(){return stopped},sim.restart=function(){return stopped=!1,restart()},sim.stop=function(){return stopped=!0,stop()},setup(sim,_,!0).on("end",(function(){stopped=!0}))}(pulse.source,_),sim.on("tick",function rerun(df,op){return function(){df.touch(op).run()}}(pulse.dataflow,this)),_.static||(change=!0,sim.tick()),pulse.modifies("index")),params||change||_.modified(ForceConfig)||pulse.changed()&&_.restart)if(sim.alpha(Math.max(sim.alpha(),_.alpha||1)).alphaDecay(1-Math.pow(sim.alphaMin(),1/iters)),_.static)for(sim.stop();--iters>=0;)sim.tick();else if(sim.stopped()&&sim.restart(),!change)return pulse.StopPropagation;return this.finish(_,pulse)},Force_prototype.finish=function(_,pulse){for(var arg,dataflow=pulse.dataflow,args=this._argops,j=0,m=args.length;j<m;++j)if((arg=args[j]).name===Forces&&"link"===arg.op._argval.force)for(var op,ops=arg.op._argops,i=0,n=ops.length;i<n;++i)if("links"===ops[i].name&&(op=ops[i].op.source)){dataflow.pulse(op,dataflow.changeset().reflow());break}return pulse.reflow(_.modified()).modifies(ForceOutput)};var src_lookup=function(tree,key,filter){var map={};return tree.each((function(node){var t=node.data;filter(t)&&(map[key(t)]=node)})),tree.lookup=map,tree};function defaultSeparation(a,b){return a.parent===b.parent?1:2}function meanXReduce(x,c){return x+c.x}function maxYReduce(y,c){return Math.max(y,c.y)}function count_count(node){var sum=0,children=node.children,i=children&&children.length;if(i)for(;--i>=0;)sum+=children[i].value;else sum=1;node.value=sum}function hierarchy(data,children){var node,child,childs,i,n,root=new Node(data),valued=+data.value&&(root.value=data.value),nodes=[root];for(null==children&&(children=defaultChildren);node=nodes.pop();)if(valued&&(node.value=+node.data.value),(childs=children(node.data))&&(n=childs.length))for(node.children=new Array(n),i=n-1;i>=0;--i)nodes.push(child=node.children[i]=new Node(childs[i])),child.parent=node,child.depth=node.depth+1;return root.eachBefore(computeHeight)}function defaultChildren(d){return d.children}function copyData(node){node.data=node.data.data}function computeHeight(node){var height=0;do{node.height=height}while((node=node.parent)&&node.height<++height)}function Node(data){this.data=data,this.depth=this.height=0,this.parent=null}Node.prototype=hierarchy.prototype={constructor:Node,count:function(){return this.eachAfter(count_count)},each:function(callback){var current,children,i,n,node=this,next=[node];do{for(current=next.reverse(),next=[];node=current.pop();)if(callback(node),children=node.children)for(i=0,n=children.length;i<n;++i)next.push(children[i])}while(next.length);return this},eachAfter:function(callback){for(var children,i,n,node=this,nodes=[node],next=[];node=nodes.pop();)if(next.push(node),children=node.children)for(i=0,n=children.length;i<n;++i)nodes.push(children[i]);for(;node=next.pop();)callback(node);return this},eachBefore:function(callback){for(var children,i,node=this,nodes=[node];node=nodes.pop();)if(callback(node),children=node.children)for(i=children.length-1;i>=0;--i)nodes.push(children[i]);return this},sum:function(value){return this.eachAfter((function(node){for(var sum=+value(node.data)||0,children=node.children,i=children&&children.length;--i>=0;)sum+=children[i].value;node.value=sum}))},sort:function(compare){return this.eachBefore((function(node){node.children&&node.children.sort(compare)}))},path:function(end){for(var start=this,ancestor=function leastCommonAncestor(a,b){if(a===b)return a;var aNodes=a.ancestors(),bNodes=b.ancestors(),c=null;a=aNodes.pop(),b=bNodes.pop();for(;a===b;)c=a,a=aNodes.pop(),b=bNodes.pop();return c}(start,end),nodes=[start];start!==ancestor;)start=start.parent,nodes.push(start);for(var k=nodes.length;end!==ancestor;)nodes.splice(k,0,end),end=end.parent;return nodes},ancestors:function(){for(var node=this,nodes=[node];node=node.parent;)nodes.push(node);return nodes},descendants:function(){var nodes=[];return this.each((function(node){nodes.push(node)})),nodes},leaves:function(){var leaves=[];return this.eachBefore((function(node){node.children||leaves.push(node)})),leaves},links:function(){var root=this,links=[];return root.each((function(node){node!==root&&links.push({source:node.parent,target:node})})),links},copy:function node_copy(){return hierarchy(this).eachBefore(copyData)}};var src_array_slice=Array.prototype.slice;var enclose=function(circles){for(var p,e,i=0,n=(circles=function array_shuffle(array){for(var t,i,m=array.length;m;)i=Math.random()*m--|0,t=array[m],array[m]=array[i],array[i]=t;return array}(src_array_slice.call(circles))).length,B=[];i<n;)p=circles[i],e&&enclosesWeak(e,p)?++i:(e=encloseBasis(B=extendBasis(B,p)),i=0);return e};function extendBasis(B,p){var i,j;if(enclosesWeakAll(p,B))return[p];for(i=0;i<B.length;++i)if(enclosesNot(p,B[i])&&enclosesWeakAll(encloseBasis2(B[i],p),B))return[B[i],p];for(i=0;i<B.length-1;++i)for(j=i+1;j<B.length;++j)if(enclosesNot(encloseBasis2(B[i],B[j]),p)&&enclosesNot(encloseBasis2(B[i],p),B[j])&&enclosesNot(encloseBasis2(B[j],p),B[i])&&enclosesWeakAll(encloseBasis3(B[i],B[j],p),B))return[B[i],B[j],p];throw new Error}function enclosesNot(a,b){var dr=a.r-b.r,dx=b.x-a.x,dy=b.y-a.y;return dr<0||dr*dr<dx*dx+dy*dy}function enclosesWeak(a,b){var dr=a.r-b.r+1e-6,dx=b.x-a.x,dy=b.y-a.y;return dr>0&&dr*dr>dx*dx+dy*dy}function enclosesWeakAll(a,B){for(var i=0;i<B.length;++i)if(!enclosesWeak(a,B[i]))return!1;return!0}function encloseBasis(B){switch(B.length){case 1:return function encloseBasis1(a){return{x:a.x,y:a.y,r:a.r}}(B[0]);case 2:return encloseBasis2(B[0],B[1]);case 3:return encloseBasis3(B[0],B[1],B[2])}}function encloseBasis2(a,b){var x1=a.x,y1=a.y,r1=a.r,x2=b.x,y2=b.y,r2=b.r,x21=x2-x1,y21=y2-y1,r21=r2-r1,l=Math.sqrt(x21*x21+y21*y21);return{x:(x1+x2+x21/l*r21)/2,y:(y1+y2+y21/l*r21)/2,r:(l+r1+r2)/2}}function encloseBasis3(a,b,c){var x1=a.x,y1=a.y,r1=a.r,x2=b.x,y2=b.y,r2=b.r,x3=c.x,y3=c.y,r3=c.r,a2=x1-x2,a3=x1-x3,b2=y1-y2,b3=y1-y3,c2=r2-r1,c3=r3-r1,d1=x1*x1+y1*y1-r1*r1,d2=d1-x2*x2-y2*y2+r2*r2,d3=d1-x3*x3-y3*y3+r3*r3,ab=a3*b2-a2*b3,xa=(b2*d3-b3*d2)/(2*ab)-x1,xb=(b3*c2-b2*c3)/ab,ya=(a3*d2-a2*d3)/(2*ab)-y1,yb=(a2*c3-a3*c2)/ab,A=xb*xb+yb*yb-1,B=2*(r1+xa*xb+ya*yb),C=xa*xa+ya*ya-r1*r1,r=-(A?(B+Math.sqrt(B*B-4*A*C))/(2*A):C/B);return{x:x1+xa+xb*r,y:y1+ya+yb*r,r:r}}function siblings_place(b,a,c){var x,a2,y,b2,dx=b.x-a.x,dy=b.y-a.y,d2=dx*dx+dy*dy;d2?(a2=a.r+c.r,a2*=a2,b2=b.r+c.r,a2>(b2*=b2)?(x=(d2+b2-a2)/(2*d2),y=Math.sqrt(Math.max(0,b2/d2-x*x)),c.x=b.x-x*dx-y*dy,c.y=b.y-x*dy+y*dx):(x=(d2+a2-b2)/(2*d2),y=Math.sqrt(Math.max(0,a2/d2-x*x)),c.x=a.x+x*dx-y*dy,c.y=a.y+x*dy+y*dx)):(c.x=a.x+c.r,c.y=a.y)}function intersects(a,b){var dr=a.r+b.r-1e-6,dx=b.x-a.x,dy=b.y-a.y;return dr>0&&dr*dr>dx*dx+dy*dy}function score(node){var a=node._,b=node.next._,ab=a.r+b.r,dx=(a.x*b.r+b.x*a.r)/ab,dy=(a.y*b.r+b.y*a.r)/ab;return dx*dx+dy*dy}function siblings_Node(circle){this._=circle,this.next=null,this.previous=null}function packEnclose(circles){if(!(n=circles.length))return 0;var a,b,c,n,aa,ca,i,j,k,sj,sk;if((a=circles[0]).x=0,a.y=0,!(n>1))return a.r;if(b=circles[1],a.x=-b.r,b.x=a.r,b.y=0,!(n>2))return a.r+b.r;siblings_place(b,a,c=circles[2]),a=new siblings_Node(a),b=new siblings_Node(b),c=new siblings_Node(c),a.next=c.previous=b,b.next=a.previous=c,c.next=b.previous=a;pack:for(i=3;i<n;++i){siblings_place(a._,b._,c=circles[i]),c=new siblings_Node(c),j=b.next,k=a.previous,sj=b._.r,sk=a._.r;do{if(sj<=sk){if(intersects(j._,c._)){b=j,a.next=b,b.previous=a,--i;continue pack}sj+=j._.r,j=j.next}else{if(intersects(k._,c._)){(a=k).next=b,b.previous=a,--i;continue pack}sk+=k._.r,k=k.previous}}while(j!==k.next);for(c.previous=a,c.next=b,a.next=b.previous=b=c,aa=score(a);(c=c.next)!==b;)(ca=score(c))<aa&&(a=c,aa=ca);b=a.next}for(a=[b._],c=b;(c=c.next)!==b;)a.push(c._);for(c=enclose(a),i=0;i<n;++i)(a=circles[i]).x-=c.x,a.y-=c.y;return c.r}function optional(f){return null==f?null:required(f)}function required(f){if("function"!=typeof f)throw new Error;return f}function constantZero(){return 0}var d3_hierarchy_src_constant=function(x){return function(){return x}};function defaultRadius(d){return Math.sqrt(d.value)}function radiusLeaf(radius){return function(node){node.children||(node.r=Math.max(0,+radius(node)||0))}}function packChildren(padding,k){return function(node){if(children=node.children){var children,i,e,n=children.length,r=padding(node)*k||0;if(r)for(i=0;i<n;++i)children[i].r+=r;if(e=packEnclose(children),r)for(i=0;i<n;++i)children[i].r-=r;node.r=e+r}}}function translateChild(k){return function(node){var parent=node.parent;node.r*=k,parent&&(node.x=parent.x+k*node.x,node.y=parent.y+k*node.y)}}var treemap_round=function(node){node.x0=Math.round(node.x0),node.y0=Math.round(node.y0),node.x1=Math.round(node.x1),node.y1=Math.round(node.y1)},dice=function(parent,x0,y0,x1,y1){for(var node,nodes=parent.children,i=-1,n=nodes.length,k=parent.value&&(x1-x0)/parent.value;++i<n;)(node=nodes[i]).y0=y0,node.y1=y1,node.x0=x0,node.x1=x0+=node.value*k},keyPrefix="$",preroot={depth:-1},ambiguous={};function defaultId(d){return d.id}function defaultParentId(d){return d.parentId}var src_stratify=function(){var id=defaultId,parentId=defaultParentId;function stratify(data){var d,i,root,parent,node,nodeId,nodeKey,n=data.length,nodes=new Array(n),nodeByKey={};for(i=0;i<n;++i)d=data[i],node=nodes[i]=new Node(d),null!=(nodeId=id(d,i,data))&&(nodeId+="")&&(nodeByKey[nodeKey=keyPrefix+(node.id=nodeId)]=nodeKey in nodeByKey?ambiguous:node);for(i=0;i<n;++i)if(node=nodes[i],null!=(nodeId=parentId(data[i],i,data))&&(nodeId+="")){if(!(parent=nodeByKey[keyPrefix+nodeId]))throw new Error("missing: "+nodeId);if(parent===ambiguous)throw new Error("ambiguous: "+nodeId);parent.children?parent.children.push(node):parent.children=[node],node.parent=parent}else{if(root)throw new Error("multiple roots");root=node}if(!root)throw new Error("no root");if(root.parent=preroot,root.eachBefore((function(node){node.depth=node.parent.depth+1,--n})).eachBefore(computeHeight),root.parent=null,n>0)throw new Error("cycle");return root}return stratify.id=function(x){return arguments.length?(id=required(x),stratify):id},stratify.parentId=function(x){return arguments.length?(parentId=required(x),stratify):parentId},stratify};function tree_defaultSeparation(a,b){return a.parent===b.parent?1:2}function nextLeft(v){var children=v.children;return children?children[0]:v.t}function nextRight(v){var children=v.children;return children?children[children.length-1]:v.t}function moveSubtree(wm,wp,shift){var change=shift/(wp.i-wm.i);wp.c-=change,wp.s+=shift,wm.c+=change,wp.z+=shift,wp.m+=shift}function nextAncestor(vim,v,ancestor){return vim.a.parent===v.parent?vim.a:ancestor}function TreeNode(node,i){this._=node,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=i}TreeNode.prototype=Object.create(Node.prototype);var treemap_slice=function(parent,x0,y0,x1,y1){for(var node,nodes=parent.children,i=-1,n=nodes.length,k=parent.value&&(y1-y0)/parent.value;++i<n;)(node=nodes[i]).x0=x0,node.x1=x1,node.y0=y0,node.y1=y0+=node.value*k},squarify_phi=(1+Math.sqrt(5))/2;function squarifyRatio(ratio,parent,x0,y0,x1,y1){for(var row,nodeValue,dx,dy,sumValue,minValue,maxValue,newRatio,minRatio,alpha,beta,rows=[],nodes=parent.children,i0=0,i1=0,n=nodes.length,value=parent.value;i0<n;){dx=x1-x0,dy=y1-y0;do{sumValue=nodes[i1++].value}while(!sumValue&&i1<n);for(minValue=maxValue=sumValue,beta=sumValue*sumValue*(alpha=Math.max(dy/dx,dx/dy)/(value*ratio)),minRatio=Math.max(maxValue/beta,beta/minValue);i1<n;++i1){if(sumValue+=nodeValue=nodes[i1].value,nodeValue<minValue&&(minValue=nodeValue),nodeValue>maxValue&&(maxValue=nodeValue),beta=sumValue*sumValue*alpha,(newRatio=Math.max(maxValue/beta,beta/minValue))>minRatio){sumValue-=nodeValue;break}minRatio=newRatio}rows.push(row={value:sumValue,dice:dx<dy,children:nodes.slice(i0,i1)}),row.dice?dice(row,x0,y0,x1,value?y0+=dy*sumValue/value:y1):treemap_slice(row,x0,y0,value?x0+=dx*sumValue/value:x1,y1),value-=sumValue,i0=i1}return rows}var squarify=function custom(ratio){function squarify(parent,x0,y0,x1,y1){squarifyRatio(ratio,parent,x0,y0,x1,y1)}return squarify.ratio=function(x){return custom((x=+x)>1?x:1)},squarify}(squarify_phi),treemap_resquarify=function custom(ratio){function resquarify(parent,x0,y0,x1,y1){if((rows=parent._squarify)&&rows.ratio===ratio)for(var rows,row,nodes,i,n,j=-1,m=rows.length,value=parent.value;++j<m;){for(nodes=(row=rows[j]).children,i=row.value=0,n=nodes.length;i<n;++i)row.value+=nodes[i].value;row.dice?dice(row,x0,y0,x1,y0+=(y1-y0)*row.value/value):treemap_slice(row,x0,y0,x0+=(x1-x0)*row.value/value,y1),value-=row.value}else parent._squarify=rows=squarifyRatio(ratio,parent,x0,y0,x1,y1),rows.ratio=ratio}return resquarify.ratio=function(x){return custom((x=+x)>1?x:1)},resquarify}(squarify_phi);function Nest(params){Transform.call(this,null,params)}function Nest_children(n){return n.values}function nest(){var nest,keys=[];return nest={entries:array=>(function entries(map,depth){if(++depth>keys.length)return map;var k,array=[];for(k in map)array.push({key:k,values:entries(map[k],depth)});return array})(function apply(array,depth){if(depth>=keys.length)return array;for(var keyValue,value,values,i=-1,n=array.length,key=keys[depth++],valuesByKey={},result={};++i<n;)(values=valuesByKey[keyValue=key(value=array[i])+""])?values.push(value):valuesByKey[keyValue]=[value];for(keyValue in valuesByKey)result[keyValue]=apply(valuesByKey[keyValue],depth);return result}(array,0),0),key:d=>(keys.push(d),nest)}}function HierarchyLayout(params){Transform.call(this,null,params)}function HierarchyLayout_defaultSeparation(a,b){return a.parent===b.parent?1:2}Nest.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]},Object(vega_util.y)(Nest,Transform).transform=function(_,pulse){pulse.source||Object(vega_util.n)("Nest transform requires an upstream data source.");var gen=_.generate,mod=_.modified(),out=pulse.clone(),tree=this.value;return(!tree||mod||pulse.changed())&&(tree&&tree.each(node=>{node.children&&isTuple(node.data)&&out.rem.push(node.data)}),this.value=tree=hierarchy({values:Object(vega_util.i)(_.keys).reduce((n,k)=>(n.key(k),n),nest()).entries(out.source)},Nest_children),gen&&tree.each(node=>{node.children&&(node=ingest(node.data),out.add.push(node),out.source.push(node))}),src_lookup(tree,tupleid,tupleid)),out.source.root=tree,out},Object(vega_util.y)(HierarchyLayout,Transform).transform=function(_,pulse){pulse.source&&pulse.source.root||Object(vega_util.n)(this.constructor.name+" transform requires a backing tree data source.");var layout=this.layout(_.method),fields=this.fields,root=pulse.source.root,as=_.as||fields;_.field?root.sum(_.field):root.count(),_.sort&&root.sort(stableCompare(_.sort,d=>d.data)),function setParams(layout,params,_){for(var p,i=0,n=params.length;i<n;++i)(p=params[i])in _&&layout[p](_[p])}(layout,this.params,_),layout.separation&&layout.separation(!1!==_.separation?HierarchyLayout_defaultSeparation:vega_util.N);try{this.value=layout(root)}catch(err){Object(vega_util.n)(err)}return root.each((function(node){!function setFields(node,fields,as){for(var t=node.data,i=0,n=fields.length-1;i<n;++i)t[as[i]]=node[fields[i]];t[as[n]]=node.children?node.children.length:0}(node,fields,as)})),pulse.reflow(_.modified()).modifies(as).modifies("leaf")};var Pack_Output=["x","y","r","depth","children"];function Pack(params){HierarchyLayout.call(this,params)}Pack.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Pack_Output.length,default:Pack_Output}]};var Pack_prototype=Object(vega_util.y)(Pack,HierarchyLayout);Pack_prototype.layout=function(){var radius=null,dx=1,dy=1,padding=constantZero;function pack(root){return root.x=dx/2,root.y=dy/2,radius?root.eachBefore(radiusLeaf(radius)).eachAfter(packChildren(padding,.5)).eachBefore(translateChild(1)):root.eachBefore(radiusLeaf(defaultRadius)).eachAfter(packChildren(constantZero,1)).eachAfter(packChildren(padding,root.r/Math.min(dx,dy))).eachBefore(translateChild(Math.min(dx,dy)/(2*root.r))),root}return pack.radius=function(x){return arguments.length?(radius=optional(x),pack):radius},pack.size=function(x){return arguments.length?(dx=+x[0],dy=+x[1],pack):[dx,dy]},pack.padding=function(x){return arguments.length?(padding="function"==typeof x?x:d3_hierarchy_src_constant(+x),pack):padding},pack},Pack_prototype.params=["radius","size","padding"],Pack_prototype.fields=Pack_Output;var Partition_Output=["x0","y0","x1","y1","depth","children"];function Partition(params){HierarchyLayout.call(this,params)}Partition.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Partition_Output.length,default:Partition_Output}]};var Partition_prototype=Object(vega_util.y)(Partition,HierarchyLayout);function Stratify(params){Transform.call(this,null,params)}Partition_prototype.layout=function(){var dx=1,dy=1,padding=0,round=!1;function partition(root){var n=root.height+1;return root.x0=root.y0=padding,root.x1=dx,root.y1=dy/n,root.eachBefore(function positionNode(dy,n){return function(node){node.children&&dice(node,node.x0,dy*(node.depth+1)/n,node.x1,dy*(node.depth+2)/n);var x0=node.x0,y0=node.y0,x1=node.x1-padding,y1=node.y1-padding;x1<x0&&(x0=x1=(x0+x1)/2),y1<y0&&(y0=y1=(y0+y1)/2),node.x0=x0,node.y0=y0,node.x1=x1,node.y1=y1}}(dy,n)),round&&root.eachBefore(treemap_round),root}return partition.round=function(x){return arguments.length?(round=!!x,partition):round},partition.size=function(x){return arguments.length?(dx=+x[0],dy=+x[1],partition):[dx,dy]},partition.padding=function(x){return arguments.length?(padding=+x,partition):padding},partition},Partition_prototype.params=["size","round","padding"],Partition_prototype.fields=Partition_Output,Stratify.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},Object(vega_util.y)(Stratify,Transform).transform=function(_,pulse){pulse.source||Object(vega_util.n)("Stratify transform requires an upstream data source.");var tree=this.value,mod=_.modified(),out=pulse.fork(pulse.ALL).materialize(pulse.SOURCE),run=!this.value||mod||pulse.changed(pulse.ADD_REM)||pulse.modified(_.key.fields)||pulse.modified(_.parentKey.fields);return out.source=out.source.slice(),run&&(tree=out.source.length?src_lookup(src_stratify().id(_.key).parentId(_.parentKey)(out.source),_.key,vega_util.fb):src_lookup(src_stratify()([{}]),_.key,_.key)),out.source.root=this.value=tree,out};var Layouts={tidy:function(){var separation=tree_defaultSeparation,dx=1,dy=1,nodeSize=null;function tree(root){var t=function treeRoot(root){for(var node,child,children,i,n,tree=new TreeNode(root,0),nodes=[tree];node=nodes.pop();)if(children=node._.children)for(node.children=new Array(n=children.length),i=n-1;i>=0;--i)nodes.push(child=node.children[i]=new TreeNode(children[i],i)),child.parent=node;return(tree.parent=new TreeNode(null,0)).children=[tree],tree}(root);if(t.eachAfter(firstWalk),t.parent.m=-t.z,t.eachBefore(secondWalk),nodeSize)root.eachBefore(sizeNode);else{var left=root,right=root,bottom=root;root.eachBefore((function(node){node.x<left.x&&(left=node),node.x>right.x&&(right=node),node.depth>bottom.depth&&(bottom=node)}));var s=left===right?1:separation(left,right)/2,tx=s-left.x,kx=dx/(right.x+s+tx),ky=dy/(bottom.depth||1);root.eachBefore((function(node){node.x=(node.x+tx)*kx,node.y=node.depth*ky}))}return root}function firstWalk(v){var children=v.children,siblings=v.parent.children,w=v.i?siblings[v.i-1]:null;if(children){!function executeShifts(v){for(var w,shift=0,change=0,children=v.children,i=children.length;--i>=0;)(w=children[i]).z+=shift,w.m+=shift,shift+=w.s+(change+=w.c)}(v);var midpoint=(children[0].z+children[children.length-1].z)/2;w?(v.z=w.z+separation(v._,w._),v.m=v.z-midpoint):v.z=midpoint}else w&&(v.z=w.z+separation(v._,w._));v.parent.A=function apportion(v,w,ancestor){if(w){for(var shift,vip=v,vop=v,vim=w,vom=vip.parent.children[0],sip=vip.m,sop=vop.m,sim=vim.m,som=vom.m;vim=nextRight(vim),vip=nextLeft(vip),vim&&vip;)vom=nextLeft(vom),(vop=nextRight(vop)).a=v,(shift=vim.z+sim-vip.z-sip+separation(vim._,vip._))>0&&(moveSubtree(nextAncestor(vim,v,ancestor),v,shift),sip+=shift,sop+=shift),sim+=vim.m,sip+=vip.m,som+=vom.m,sop+=vop.m;vim&&!nextRight(vop)&&(vop.t=vim,vop.m+=sim-sop),vip&&!nextLeft(vom)&&(vom.t=vip,vom.m+=sip-som,ancestor=v)}return ancestor}(v,w,v.parent.A||siblings[0])}function secondWalk(v){v._.x=v.z+v.parent.m,v.m+=v.parent.m}function sizeNode(node){node.x*=dx,node.y=node.depth*dy}return tree.separation=function(x){return arguments.length?(separation=x,tree):separation},tree.size=function(x){return arguments.length?(nodeSize=!1,dx=+x[0],dy=+x[1],tree):nodeSize?null:[dx,dy]},tree.nodeSize=function(x){return arguments.length?(nodeSize=!0,dx=+x[0],dy=+x[1],tree):nodeSize?[dx,dy]:null},tree},cluster:function(){var separation=defaultSeparation,dx=1,dy=1,nodeSize=!1;function cluster(root){var previousNode,x=0;root.eachAfter((function(node){var children=node.children;children?(node.x=function meanX(children){return children.reduce(meanXReduce,0)/children.length}(children),node.y=function maxY(children){return 1+children.reduce(maxYReduce,0)}(children)):(node.x=previousNode?x+=separation(node,previousNode):0,node.y=0,previousNode=node)}));var left=function leafLeft(node){for(var children;children=node.children;)node=children[0];return node}(root),right=function leafRight(node){for(var children;children=node.children;)node=children[children.length-1];return node}(root),x0=left.x-separation(left,right)/2,x1=right.x+separation(right,left)/2;return root.eachAfter(nodeSize?function(node){node.x=(node.x-root.x)*dx,node.y=(root.y-node.y)*dy}:function(node){node.x=(node.x-x0)/(x1-x0)*dx,node.y=(1-(root.y?node.y/root.y:1))*dy})}return cluster.separation=function(x){return arguments.length?(separation=x,cluster):separation},cluster.size=function(x){return arguments.length?(nodeSize=!1,dx=+x[0],dy=+x[1],cluster):nodeSize?null:[dx,dy]},cluster.nodeSize=function(x){return arguments.length?(nodeSize=!0,dx=+x[0],dy=+x[1],cluster):nodeSize?[dx,dy]:null},cluster}},Tree_Output=["x","y","depth","children"];function Tree(params){HierarchyLayout.call(this,params)}Tree.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Tree_Output.length,default:Tree_Output}]};var Tree_prototype=Object(vega_util.y)(Tree,HierarchyLayout);function TreeLinks(params){Transform.call(this,[],params)}Tree_prototype.layout=function(method){var m=method||"tidy";if(Object(vega_util.v)(Layouts,m))return Layouts[m]();Object(vega_util.n)("Unrecognized Tree layout method: "+m)},Tree_prototype.params=["size","nodeSize"],Tree_prototype.fields=Tree_Output,TreeLinks.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},Object(vega_util.y)(TreeLinks,Transform).transform=function(_,pulse){var links=this.value,tree=pulse.source&&pulse.source.root,out=pulse.fork(pulse.NO_SOURCE),lut={};return tree||Object(vega_util.n)("TreeLinks transform requires a tree data source."),pulse.changed(pulse.ADD_REM)?(out.rem=links,pulse.visit(pulse.SOURCE,(function(t){lut[tupleid(t)]=1})),tree.each((function(node){var t=node.data,p=node.parent&&node.parent.data;p&&lut[tupleid(t)]&&lut[tupleid(p)]&&out.add.push(ingest({source:p,target:t}))})),this.value=out.add):pulse.changed(pulse.MOD)&&(pulse.visit(pulse.MOD,(function(t){lut[tupleid(t)]=1})),links.forEach((function(link){(lut[tupleid(link.source)]||lut[tupleid(link.target)])&&out.mod.push(link)}))),out};var Tiles={binary:function(parent,x0,y0,x1,y1){var i,sum,nodes=parent.children,n=nodes.length,sums=new Array(n+1);for(sums[0]=sum=i=0;i<n;++i)sums[i+1]=sum+=nodes[i].value;!function partition(i,j,value,x0,y0,x1,y1){if(i>=j-1){var node=nodes[i];return node.x0=x0,node.y0=y0,node.x1=x1,void(node.y1=y1)}var valueOffset=sums[i],valueTarget=value/2+valueOffset,k=i+1,hi=j-1;for(;k<hi;){var mid=k+hi>>>1;sums[mid]<valueTarget?k=mid+1:hi=mid}valueTarget-sums[k-1]<sums[k]-valueTarget&&i+1<k&&--k;var valueLeft=sums[k]-valueOffset,valueRight=value-valueLeft;if(x1-x0>y1-y0){var xk=(x0*valueRight+x1*valueLeft)/value;partition(i,k,valueLeft,x0,y0,xk,y1),partition(k,j,valueRight,xk,y0,x1,y1)}else{var yk=(y0*valueRight+y1*valueLeft)/value;partition(i,k,valueLeft,x0,y0,x1,yk),partition(k,j,valueRight,x0,yk,x1,y1)}}(0,n,parent.value,x0,y0,x1,y1)},dice:dice,slice:treemap_slice,slicedice:function(parent,x0,y0,x1,y1){(1&parent.depth?treemap_slice:dice)(parent,x0,y0,x1,y1)},squarify:squarify,resquarify:treemap_resquarify},Treemap_Output=["x0","y0","x1","y1","depth","children"];function Treemap(params){HierarchyLayout.call(this,params)}Treemap.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Treemap_Output.length,default:Treemap_Output}]};var Treemap_prototype=Object(vega_util.y)(Treemap,HierarchyLayout);Treemap_prototype.layout=function(){var x=function(){var tile=squarify,round=!1,dx=1,dy=1,paddingStack=[0],paddingInner=constantZero,paddingTop=constantZero,paddingRight=constantZero,paddingBottom=constantZero,paddingLeft=constantZero;function treemap(root){return root.x0=root.y0=0,root.x1=dx,root.y1=dy,root.eachBefore(positionNode),paddingStack=[0],round&&root.eachBefore(treemap_round),root}function positionNode(node){var p=paddingStack[node.depth],x0=node.x0+p,y0=node.y0+p,x1=node.x1-p,y1=node.y1-p;x1<x0&&(x0=x1=(x0+x1)/2),y1<y0&&(y0=y1=(y0+y1)/2),node.x0=x0,node.y0=y0,node.x1=x1,node.y1=y1,node.children&&(p=paddingStack[node.depth+1]=paddingInner(node)/2,x0+=paddingLeft(node)-p,y0+=paddingTop(node)-p,(x1-=paddingRight(node)-p)<x0&&(x0=x1=(x0+x1)/2),(y1-=paddingBottom(node)-p)<y0&&(y0=y1=(y0+y1)/2),tile(node,x0,y0,x1,y1))}return treemap.round=function(x){return arguments.length?(round=!!x,treemap):round},treemap.size=function(x){return arguments.length?(dx=+x[0],dy=+x[1],treemap):[dx,dy]},treemap.tile=function(x){return arguments.length?(tile=required(x),treemap):tile},treemap.padding=function(x){return arguments.length?treemap.paddingInner(x).paddingOuter(x):treemap.paddingInner()},treemap.paddingInner=function(x){return arguments.length?(paddingInner="function"==typeof x?x:d3_hierarchy_src_constant(+x),treemap):paddingInner},treemap.paddingOuter=function(x){return arguments.length?treemap.paddingTop(x).paddingRight(x).paddingBottom(x).paddingLeft(x):treemap.paddingTop()},treemap.paddingTop=function(x){return arguments.length?(paddingTop="function"==typeof x?x:d3_hierarchy_src_constant(+x),treemap):paddingTop},treemap.paddingRight=function(x){return arguments.length?(paddingRight="function"==typeof x?x:d3_hierarchy_src_constant(+x),treemap):paddingRight},treemap.paddingBottom=function(x){return arguments.length?(paddingBottom="function"==typeof x?x:d3_hierarchy_src_constant(+x),treemap):paddingBottom},treemap.paddingLeft=function(x){return arguments.length?(paddingLeft="function"==typeof x?x:d3_hierarchy_src_constant(+x),treemap):paddingLeft},treemap}();return x.ratio=function(_){var t=x.tile();t.ratio&&x.tile(t.ratio(_))},x.method=function(_){Object(vega_util.v)(Tiles,_)?x.tile(Tiles[_]):Object(vega_util.n)("Unrecognized Treemap layout method: "+_)},x},Treemap_prototype.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],Treemap_prototype.fields=Treemap_Output;var vega_regression_src_partition=function(data,groupby){var map,i,n,t,k,g,groups=[],get=function(f){return f(t)};if(null==groupby)groups.push(data);else for(map={},i=0,n=data.length;i<n;++i)t=data[i],(g=map[k=groupby.map(get)])||(map[k]=g=[],g.dims=k,groups.push(g)),g.push(t);return groups};function Loess(params){Transform.call(this,null,params)}Loess.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},Object(vega_util.y)(Loess,Transform).transform=function(_,pulse){var out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);if(!this.value||pulse.changed()||_.modified()){const source=pulse.materialize(pulse.SOURCE).source,groups=vega_regression_src_partition(source,_.groupby),names=(_.groupby||[]).map(vega_util.h),m=names.length,as=_.as||[Object(vega_util.h)(_.x),Object(vega_util.h)(_.y)],values=[];groups.forEach(g=>{regression_loess(g,_.x,_.y,_.bandwidth||.3).forEach(p=>{const t={};for(let i=0;i<m;++i)t[names[i]]=g.dims[i];t[as[0]]=p[0],t[as[1]]=p[1],values.push(ingest(t))})}),this.value&&(out.rem=this.value),this.value=out.add=out.source=values}return out};const Regression_Methods={linear:linear,log:log,exp:exp,pow:pow,quad:regression_quad,poly:poly};function Regression(params){Transform.call(this,null,params)}Regression.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(Regression_Methods)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},Object(vega_util.y)(Regression,Transform).transform=function(_,pulse){var out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);if(!this.value||pulse.changed()||_.modified()){const source=pulse.materialize(pulse.SOURCE).source,groups=vega_regression_src_partition(source,_.groupby),names=(_.groupby||[]).map(vega_util.h),method=_.method||"linear",order=_.order||3,dof=function degreesOfFreedom(method,order){return"poly"===method?order:"quad"===method?2:1}(method,order),as=_.as||[Object(vega_util.h)(_.x),Object(vega_util.h)(_.y)],fit=Regression_Methods[method],values=[];let domain=_.extent;Object(vega_util.v)(Regression_Methods,method)||Object(vega_util.n)("Invalid regression method: "+method),null!=domain&&"log"===method&&domain[0]<=0&&(pulse.dataflow.warn("Ignoring extent with values <= 0 for log regression."),domain=null),groups.forEach(g=>{if(g.length<=dof)return void pulse.dataflow.warn("Skipping regression with more parameters than data points.");const model=fit(g,_.x,_.y,order);if(_.params)return void values.push(ingest({keys:g.dims,coef:model.coef,rSquared:model.rSquared}));const dom=domain||Object(vega_util.p)(g,_.x),add=p=>{const t={};for(let i=0;i<names.length;++i)t[names[i]]=g.dims[i];t[as[0]]=p[0],t[as[1]]=p[1],values.push(ingest(t))};"linear"===method?dom.forEach(x=>add([x,model.predict(x)])):sampleCurve(model.predict,dom,25,200).forEach(add)}),this.value&&(out.rem=this.value),this.value=out.add=out.source=values}return out};const delaunator_EPSILON=Math.pow(2,-52),EDGE_STACK=new Uint32Array(512);class Delaunator{static from(points,getX=defaultGetX,getY=defaultGetY){const n=points.length,coords=new Float64Array(2*n);for(let i=0;i<n;i++){const p=points[i];coords[2*i]=getX(p),coords[2*i+1]=getY(p)}return new Delaunator(coords)}constructor(coords){const n=coords.length>>1;if(n>0&&"number"!=typeof coords[0])throw new Error("Expected coords to contain numbers.");this.coords=coords;const maxTriangles=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*maxTriangles),this._halfedges=new Int32Array(3*maxTriangles),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:coords,_hullPrev:hullPrev,_hullNext:hullNext,_hullTri:hullTri,_hullHash:hullHash}=this,n=coords.length>>1;let minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0;for(let i=0;i<n;i++){const x=coords[2*i],y=coords[2*i+1];x<minX&&(minX=x),y<minY&&(minY=y),x>maxX&&(maxX=x),y>maxY&&(maxY=y),this._ids[i]=i}const cx=(minX+maxX)/2,cy=(minY+maxY)/2;let i0,i1,i2,minDist=1/0;for(let i=0;i<n;i++){const d=delaunator_dist(cx,cy,coords[2*i],coords[2*i+1]);d<minDist&&(i0=i,minDist=d)}const i0x=coords[2*i0],i0y=coords[2*i0+1];minDist=1/0;for(let i=0;i<n;i++){if(i===i0)continue;const d=delaunator_dist(i0x,i0y,coords[2*i],coords[2*i+1]);d<minDist&&d>0&&(i1=i,minDist=d)}let i1x=coords[2*i1],i1y=coords[2*i1+1],minRadius=1/0;for(let i=0;i<n;i++){if(i===i0||i===i1)continue;const r=circumradius(i0x,i0y,i1x,i1y,coords[2*i],coords[2*i+1]);r<minRadius&&(i2=i,minRadius=r)}let i2x=coords[2*i2],i2y=coords[2*i2+1];if(minRadius===1/0){for(let i=0;i<n;i++)this._dists[i]=coords[2*i]-coords[0]||coords[2*i+1]-coords[1];quicksort(this._ids,this._dists,0,n-1);const hull=new Uint32Array(n);let j=0;for(let i=0,d0=-1/0;i<n;i++){const id=this._ids[i];this._dists[id]>d0&&(hull[j++]=id,d0=this._dists[id])}return this.hull=hull.subarray(0,j),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(delaunator_orient(i0x,i0y,i1x,i1y,i2x,i2y)){const i=i1,x=i1x,y=i1y;i1=i2,i1x=i2x,i1y=i2y,i2=i,i2x=x,i2y=y}const center=function circumcenter(ax,ay,bx,by,cx,cy){const dx=bx-ax,dy=by-ay,ex=cx-ax,ey=cy-ay,bl=dx*dx+dy*dy,cl=ex*ex+ey*ey,d=.5/(dx*ey-dy*ex);return{x:ax+(ey*bl-dy*cl)*d,y:ay+(dx*cl-ex*bl)*d}}(i0x,i0y,i1x,i1y,i2x,i2y);this._cx=center.x,this._cy=center.y;for(let i=0;i<n;i++)this._dists[i]=delaunator_dist(coords[2*i],coords[2*i+1],center.x,center.y);quicksort(this._ids,this._dists,0,n-1),this._hullStart=i0;let hullSize=3;hullNext[i0]=hullPrev[i2]=i1,hullNext[i1]=hullPrev[i0]=i2,hullNext[i2]=hullPrev[i1]=i0,hullTri[i0]=0,hullTri[i1]=1,hullTri[i2]=2,hullHash.fill(-1),hullHash[this._hashKey(i0x,i0y)]=i0,hullHash[this._hashKey(i1x,i1y)]=i1,hullHash[this._hashKey(i2x,i2y)]=i2,this.trianglesLen=0,this._addTriangle(i0,i1,i2,-1,-1,-1);for(let xp,yp,k=0;k<this._ids.length;k++){const i=this._ids[k],x=coords[2*i],y=coords[2*i+1];if(k>0&&Math.abs(x-xp)<=delaunator_EPSILON&&Math.abs(y-yp)<=delaunator_EPSILON)continue;if(xp=x,yp=y,i===i0||i===i1||i===i2)continue;let start=0;for(let j=0,key=this._hashKey(x,y);j<this._hashSize&&(-1===(start=hullHash[(key+j)%this._hashSize])||start===hullNext[start]);j++);let q,e=start=hullPrev[start];for(;q=hullNext[e],!delaunator_orient(x,y,coords[2*e],coords[2*e+1],coords[2*q],coords[2*q+1]);)if((e=q)===start){e=-1;break}if(-1===e)continue;let t=this._addTriangle(e,i,hullNext[e],-1,-1,hullTri[e]);hullTri[i]=this._legalize(t+2),hullTri[e]=t,hullSize++;let n=hullNext[e];for(;q=hullNext[n],delaunator_orient(x,y,coords[2*n],coords[2*n+1],coords[2*q],coords[2*q+1]);)t=this._addTriangle(n,i,q,hullTri[i],-1,hullTri[n]),hullTri[i]=this._legalize(t+2),hullNext[n]=n,hullSize--,n=q;if(e===start)for(;delaunator_orient(x,y,coords[2*(q=hullPrev[e])],coords[2*q+1],coords[2*e],coords[2*e+1]);)t=this._addTriangle(q,i,e,-1,hullTri[e],hullTri[q]),this._legalize(t+2),hullTri[q]=t,hullNext[e]=e,hullSize--,e=q;this._hullStart=hullPrev[i]=e,hullNext[e]=hullPrev[n]=i,hullNext[i]=n,hullHash[this._hashKey(x,y)]=i,hullHash[this._hashKey(coords[2*e],coords[2*e+1])]=e}this.hull=new Uint32Array(hullSize);for(let i=0,e=this._hullStart;i<hullSize;i++)this.hull[i]=e,e=hullNext[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(x,y){return Math.floor(function pseudoAngle(dx,dy){const p=dx/(Math.abs(dx)+Math.abs(dy));return(dy>0?3-p:1+p)/4}(x-this._cx,y-this._cy)*this._hashSize)%this._hashSize}_legalize(a){const{_triangles:triangles,_halfedges:halfedges,coords:coords}=this;let i=0,ar=0;for(;;){const b=halfedges[a],a0=a-a%3;if(ar=a0+(a+2)%3,-1===b){if(0===i)break;a=EDGE_STACK[--i];continue}const b0=b-b%3,al=a0+(a+1)%3,bl=b0+(b+2)%3,p0=triangles[ar],pr=triangles[a],pl=triangles[al],p1=triangles[bl];if(inCircle(coords[2*p0],coords[2*p0+1],coords[2*pr],coords[2*pr+1],coords[2*pl],coords[2*pl+1],coords[2*p1],coords[2*p1+1])){triangles[a]=p1,triangles[b]=p0;const hbl=halfedges[bl];if(-1===hbl){let e=this._hullStart;do{if(this._hullTri[e]===bl){this._hullTri[e]=a;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(a,hbl),this._link(b,halfedges[ar]),this._link(ar,bl);const br=b0+(b+1)%3;i<EDGE_STACK.length&&(EDGE_STACK[i++]=br)}else{if(0===i)break;a=EDGE_STACK[--i]}}return ar}_link(a,b){this._halfedges[a]=b,-1!==b&&(this._halfedges[b]=a)}_addTriangle(i0,i1,i2,a,b,c){const t=this.trianglesLen;return this._triangles[t]=i0,this._triangles[t+1]=i1,this._triangles[t+2]=i2,this._link(t,a),this._link(t+1,b),this._link(t+2,c),this.trianglesLen+=3,t}}function delaunator_dist(ax,ay,bx,by){const dx=ax-bx,dy=ay-by;return dx*dx+dy*dy}function orientIfSure(px,py,rx,ry,qx,qy){const l=(ry-py)*(qx-px),r=(rx-px)*(qy-py);return Math.abs(l-r)>=33306690738754716e-32*Math.abs(l+r)?l-r:0}function delaunator_orient(rx,ry,qx,qy,px,py){return(orientIfSure(px,py,rx,ry,qx,qy)||orientIfSure(rx,ry,qx,qy,px,py)||orientIfSure(qx,qy,px,py,rx,ry))<0}function inCircle(ax,ay,bx,by,cx,cy,px,py){const dx=ax-px,dy=ay-py,ex=bx-px,ey=by-py,fx=cx-px,fy=cy-py,bp=ex*ex+ey*ey,cp=fx*fx+fy*fy;return dx*(ey*cp-bp*fy)-dy*(ex*cp-bp*fx)+(dx*dx+dy*dy)*(ex*fy-ey*fx)<0}function circumradius(ax,ay,bx,by,cx,cy){const dx=bx-ax,dy=by-ay,ex=cx-ax,ey=cy-ay,bl=dx*dx+dy*dy,cl=ex*ex+ey*ey,d=.5/(dx*ey-dy*ex),x=(ey*bl-dy*cl)*d,y=(dx*cl-ex*bl)*d;return x*x+y*y}function quicksort(ids,dists,left,right){if(right-left<=20)for(let i=left+1;i<=right;i++){const temp=ids[i],tempDist=dists[temp];let j=i-1;for(;j>=left&&dists[ids[j]]>tempDist;)ids[j+1]=ids[j--];ids[j+1]=temp}else{let i=left+1,j=right;delaunator_swap(ids,left+right>>1,i),dists[ids[left]]>dists[ids[right]]&&delaunator_swap(ids,left,right),dists[ids[i]]>dists[ids[right]]&&delaunator_swap(ids,i,right),dists[ids[left]]>dists[ids[i]]&&delaunator_swap(ids,left,i);const temp=ids[i],tempDist=dists[temp];for(;;){do{i++}while(dists[ids[i]]<tempDist);do{j--}while(dists[ids[j]]>tempDist);if(j<i)break;delaunator_swap(ids,i,j)}ids[left+1]=ids[j],ids[j]=temp,right-i+1>=j-left?(quicksort(ids,dists,i,right),quicksort(ids,dists,left,j-1)):(quicksort(ids,dists,left,j-1),quicksort(ids,dists,i,right))}}function delaunator_swap(arr,i,j){const tmp=arr[i];arr[i]=arr[j],arr[j]=tmp}function defaultGetX(p){return p[0]}function defaultGetY(p){return p[1]}const d3_delaunay_src_path_epsilon=1e-6;class src_path_Path{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(x,y){this._+=`M${this._x0=this._x1=+x},${this._y0=this._y1=+y}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(x,y){this._+=`L${this._x1=+x},${this._y1=+y}`}arc(x,y,r){const x0=(x=+x)+(r=+r),y0=y=+y;if(r<0)throw new Error("negative radius");null===this._x1?this._+=`M${x0},${y0}`:(Math.abs(this._x1-x0)>d3_delaunay_src_path_epsilon||Math.abs(this._y1-y0)>d3_delaunay_src_path_epsilon)&&(this._+="L"+x0+","+y0),r&&(this._+=`A${r},${r},0,1,1,${x-r},${y}A${r},${r},0,1,1,${this._x1=x0},${this._y1=y0}`)}rect(x,y,w,h){this._+=`M${this._x0=this._x1=+x},${this._y0=this._y1=+y}h${+w}v${+h}h${-w}Z`}value(){return this._||null}}class Polygon{constructor(){this._=[]}moveTo(x,y){this._.push([x,y])}closePath(){this._.push(this._[0].slice())}lineTo(x,y){this._.push([x,y])}value(){return this._.length?this._:null}}class voronoi_Voronoi{constructor(delaunay,[xmin,ymin,xmax,ymax]=[0,0,960,500]){if(!((xmax=+xmax)>=(xmin=+xmin)&&(ymax=+ymax)>=(ymin=+ymin)))throw new Error("invalid bounds");this.delaunay=delaunay,this._circumcenters=new Float64Array(2*delaunay.points.length),this.vectors=new Float64Array(2*delaunay.points.length),this.xmax=xmax,this.xmin=xmin,this.ymax=ymax,this.ymin=ymin,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:points,hull:hull,triangles:triangles},vectors:vectors}=this,circumcenters=this.circumcenters=this._circumcenters.subarray(0,triangles.length/3*2);for(let x,y,i=0,j=0,n=triangles.length;i<n;i+=3,j+=2){const t1=2*triangles[i],t2=2*triangles[i+1],t3=2*triangles[i+2],x1=points[t1],y1=points[t1+1],x2=points[t2],y2=points[t2+1],x3=points[t3],y3=points[t3+1],dx=x2-x1,dy=y2-y1,ex=x3-x1,ey=y3-y1,bl=dx*dx+dy*dy,cl=ex*ex+ey*ey,ab=2*(dx*ey-dy*ex);if(ab)if(Math.abs(ab)<1e-8)x=(x1+x3)/2,y=(y1+y3)/2;else{const d=1/ab;x=x1+(ey*bl-dy*cl)*d,y=y1+(dx*cl-ex*bl)*d}else x=(x1+x3)/2-1e8*ey,y=(y1+y3)/2+1e8*ex;circumcenters[j]=x,circumcenters[j+1]=y}let p0,x0,y0,h=hull[hull.length-1],p1=4*h,x1=points[2*h],y1=points[2*h+1];vectors.fill(0);for(let i=0;i<hull.length;++i)p0=p1,x0=x1,y0=y1,p1=4*(h=hull[i]),x1=points[2*h],y1=points[2*h+1],vectors[p0+2]=vectors[p1]=y0-y1,vectors[p0+3]=vectors[p1+1]=x1-x0}render(context){const buffer=null==context?context=new src_path_Path:void 0,{delaunay:{halfedges:halfedges,inedges:inedges,hull:hull},circumcenters:circumcenters,vectors:vectors}=this;if(hull.length<=1)return null;for(let i=0,n=halfedges.length;i<n;++i){const j=halfedges[i];if(j<i)continue;const ti=2*Math.floor(i/3),tj=2*Math.floor(j/3),xi=circumcenters[ti],yi=circumcenters[ti+1],xj=circumcenters[tj],yj=circumcenters[tj+1];this._renderSegment(xi,yi,xj,yj,context)}let h0,h1=hull[hull.length-1];for(let i=0;i<hull.length;++i){h0=h1,h1=hull[i];const t=2*Math.floor(inedges[h1]/3),x=circumcenters[t],y=circumcenters[t+1],v=4*h0,p=this._project(x,y,vectors[v+2],vectors[v+3]);p&&this._renderSegment(x,y,p[0],p[1],context)}return buffer&&buffer.value()}renderBounds(context){const buffer=null==context?context=new src_path_Path:void 0;return context.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),buffer&&buffer.value()}renderCell(i,context){const buffer=null==context?context=new src_path_Path:void 0,points=this._clip(i);if(null===points)return;context.moveTo(points[0],points[1]);let n=points.length;for(;points[0]===points[n-2]&&points[1]===points[n-1]&&n>1;)n-=2;for(let i=2;i<n;i+=2)points[i]===points[i-2]&&points[i+1]===points[i-1]||context.lineTo(points[i],points[i+1]);return context.closePath(),buffer&&buffer.value()}*cellPolygons(){const{delaunay:{points:points}}=this;for(let i=0,n=points.length/2;i<n;++i){const cell=this.cellPolygon(i);cell&&(yield cell)}}cellPolygon(i){const polygon=new Polygon;return this.renderCell(i,polygon),polygon.value()}_renderSegment(x0,y0,x1,y1,context){let S;const c0=this._regioncode(x0,y0),c1=this._regioncode(x1,y1);0===c0&&0===c1?(context.moveTo(x0,y0),context.lineTo(x1,y1)):(S=this._clipSegment(x0,y0,x1,y1,c0,c1))&&(context.moveTo(S[0],S[1]),context.lineTo(S[2],S[3]))}contains(i,x,y){return(x=+x)==x&&(y=+y)==y&&this.delaunay._step(i,x,y)===i}_cell(i){const{circumcenters:circumcenters,delaunay:{inedges:inedges,halfedges:halfedges,triangles:triangles}}=this,e0=inedges[i];if(-1===e0)return null;const points=[];let e=e0;do{const t=Math.floor(e/3);if(points.push(circumcenters[2*t],circumcenters[2*t+1]),triangles[e=e%3==2?e-2:e+1]!==i)break;e=halfedges[e]}while(e!==e0&&-1!==e);return points}_clip(i){if(0===i&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const points=this._cell(i);if(null===points)return null;const{vectors:V}=this,v=4*i;return V[v]||V[v+1]?this._clipInfinite(i,points,V[v],V[v+1],V[v+2],V[v+3]):this._clipFinite(i,points)}_clipFinite(i,points){const n=points.length;let x0,y0,c0,e0,e1,P=null,x1=points[n-2],y1=points[n-1],c1=this._regioncode(x1,y1);for(let j=0;j<n;j+=2)if(x0=x1,y0=y1,x1=points[j],y1=points[j+1],c0=c1,c1=this._regioncode(x1,y1),0===c0&&0===c1)e0=e1,e1=0,P?P.push(x1,y1):P=[x1,y1];else{let S,sx0,sy0,sx1,sy1;if(0===c0){if(null===(S=this._clipSegment(x0,y0,x1,y1,c0,c1)))continue;[sx0,sy0,sx1,sy1]=S}else{if(null===(S=this._clipSegment(x1,y1,x0,y0,c1,c0)))continue;[sx1,sy1,sx0,sy0]=S,e0=e1,e1=this._edgecode(sx0,sy0),e0&&e1&&this._edge(i,e0,e1,P,P.length),P?P.push(sx0,sy0):P=[sx0,sy0]}e0=e1,e1=this._edgecode(sx1,sy1),e0&&e1&&this._edge(i,e0,e1,P,P.length),P?P.push(sx1,sy1):P=[sx1,sy1]}if(P)e0=e1,e1=this._edgecode(P[0],P[1]),e0&&e1&&this._edge(i,e0,e1,P,P.length);else if(this.contains(i,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return P}_clipSegment(x0,y0,x1,y1,c0,c1){for(;;){if(0===c0&&0===c1)return[x0,y0,x1,y1];if(c0&c1)return null;let x,y,c=c0||c1;8&c?(x=x0+(x1-x0)*(this.ymax-y0)/(y1-y0),y=this.ymax):4&c?(x=x0+(x1-x0)*(this.ymin-y0)/(y1-y0),y=this.ymin):2&c?(y=y0+(y1-y0)*(this.xmax-x0)/(x1-x0),x=this.xmax):(y=y0+(y1-y0)*(this.xmin-x0)/(x1-x0),x=this.xmin),c0?(x0=x,y0=y,c0=this._regioncode(x0,y0)):(x1=x,y1=y,c1=this._regioncode(x1,y1))}}_clipInfinite(i,points,vx0,vy0,vxn,vyn){let p,P=Array.from(points);if((p=this._project(P[0],P[1],vx0,vy0))&&P.unshift(p[0],p[1]),(p=this._project(P[P.length-2],P[P.length-1],vxn,vyn))&&P.push(p[0],p[1]),P=this._clipFinite(i,P))for(let c0,j=0,n=P.length,c1=this._edgecode(P[n-2],P[n-1]);j<n;j+=2)c0=c1,c1=this._edgecode(P[j],P[j+1]),c0&&c1&&(j=this._edge(i,c0,c1,P,j),n=P.length);else this.contains(i,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(P=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return P}_edge(i,e0,e1,P,j){for(;e0!==e1;){let x,y;switch(e0){case 5:e0=4;continue;case 4:e0=6,x=this.xmax,y=this.ymin;break;case 6:e0=2;continue;case 2:e0=10,x=this.xmax,y=this.ymax;break;case 10:e0=8;continue;case 8:e0=9,x=this.xmin,y=this.ymax;break;case 9:e0=1;continue;case 1:e0=5,x=this.xmin,y=this.ymin}P[j]===x&&P[j+1]===y||!this.contains(i,x,y)||(P.splice(j,0,x,y),j+=2)}if(P.length>4)for(let i=0;i<P.length;i+=2){const j=(i+2)%P.length,k=(i+4)%P.length;(P[i]===P[j]&&P[j]===P[k]||P[i+1]===P[j+1]&&P[j+1]===P[k+1])&&(P.splice(j,2),i-=2)}return j}_project(x0,y0,vx,vy){let c,x,y,t=1/0;if(vy<0){if(y0<=this.ymin)return null;(c=(this.ymin-y0)/vy)<t&&(y=this.ymin,x=x0+(t=c)*vx)}else if(vy>0){if(y0>=this.ymax)return null;(c=(this.ymax-y0)/vy)<t&&(y=this.ymax,x=x0+(t=c)*vx)}if(vx>0){if(x0>=this.xmax)return null;(c=(this.xmax-x0)/vx)<t&&(x=this.xmax,y=y0+(t=c)*vy)}else if(vx<0){if(x0<=this.xmin)return null;(c=(this.xmin-x0)/vx)<t&&(x=this.xmin,y=y0+(t=c)*vy)}return[x,y]}_edgecode(x,y){return(x===this.xmin?1:x===this.xmax?2:0)|(y===this.ymin?4:y===this.ymax?8:0)}_regioncode(x,y){return(x<this.xmin?1:x>this.xmax?2:0)|(y<this.ymin?4:y>this.ymax?8:0)}}const delaunay_tau=2*Math.PI;function pointX(p){return p[0]}function pointY(p){return p[1]}function jitter(x,y,r){return[x+Math.sin(x+y)*r,y+Math.cos(x-y)*r]}class delaunay_Delaunay{constructor(points){this._delaunator=new Delaunator(points),this.inedges=new Int32Array(points.length/2),this._hullIndex=new Int32Array(points.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const d=this._delaunator,points=this.points;if(d.hull&&d.hull.length>2&&function delaunay_collinear(d){const{triangles:triangles,coords:coords}=d;for(let i=0;i<triangles.length;i+=3){const a=2*triangles[i],b=2*triangles[i+1],c=2*triangles[i+2];if((coords[c]-coords[a])*(coords[b+1]-coords[a+1])-(coords[b]-coords[a])*(coords[c+1]-coords[a+1])>1e-10)return!1}return!0}(d)){this.collinear=Int32Array.from({length:points.length/2},(_,i)=>i).sort((i,j)=>points[2*i]-points[2*j]||points[2*i+1]-points[2*j+1]);const e=this.collinear[0],f=this.collinear[this.collinear.length-1],bounds=[points[2*e],points[2*e+1],points[2*f],points[2*f+1]],r=1e-8*Math.sqrt((bounds[3]-bounds[1])**2+(bounds[2]-bounds[0])**2);for(let i=0,n=points.length/2;i<n;++i){const p=jitter(points[2*i],points[2*i+1],r);points[2*i]=p[0],points[2*i+1]=p[1]}this._delaunator=new Delaunator(points)}else delete this.collinear;const halfedges=this.halfedges=this._delaunator.halfedges,hull=this.hull=this._delaunator.hull,triangles=this.triangles=this._delaunator.triangles,inedges=this.inedges.fill(-1),hullIndex=this._hullIndex.fill(-1);for(let e=0,n=halfedges.length;e<n;++e){const p=triangles[e%3==2?e-2:e+1];-1!==halfedges[e]&&-1!==inedges[p]||(inedges[p]=e)}for(let i=0,n=hull.length;i<n;++i)hullIndex[hull[i]]=i;hull.length<=2&&hull.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=hull[0],this.triangles[1]=hull[1],this.triangles[2]=hull[1],inedges[hull[0]]=1,2===hull.length&&(inedges[hull[1]]=0))}voronoi(bounds){return new voronoi_Voronoi(this,bounds)}*neighbors(i){const{inedges:inedges,hull:hull,_hullIndex:_hullIndex,halfedges:halfedges,triangles:triangles}=this;if(this.collinear){const l=this.collinear.indexOf(i);return l>0&&(yield this.collinear[l-1]),void(l<this.collinear.length-1&&(yield this.collinear[l+1]))}const e0=inedges[i];if(-1===e0)return;let e=e0,p0=-1;do{if(yield p0=triangles[e],triangles[e=e%3==2?e-2:e+1]!==i)return;if(-1===(e=halfedges[e])){const p=hull[(_hullIndex[i]+1)%hull.length];return void(p!==p0&&(yield p))}}while(e!==e0)}find(x,y,i=0){if((x=+x)!=x||(y=+y)!=y)return-1;const i0=i;let c;for(;(c=this._step(i,x,y))>=0&&c!==i&&c!==i0;)i=c;return c}_step(i,x,y){const{inedges:inedges,hull:hull,_hullIndex:_hullIndex,halfedges:halfedges,triangles:triangles,points:points}=this;if(-1===inedges[i]||!points.length)return(i+1)%(points.length>>1);let c=i,dc=(x-points[2*i])**2+(y-points[2*i+1])**2;const e0=inedges[i];let e=e0;do{let t=triangles[e];const dt=(x-points[2*t])**2+(y-points[2*t+1])**2;if(dt<dc&&(dc=dt,c=t),triangles[e=e%3==2?e-2:e+1]!==i)break;if(-1===(e=halfedges[e])){if((e=hull[(_hullIndex[i]+1)%hull.length])!==t&&(x-points[2*e])**2+(y-points[2*e+1])**2<dc)return e;break}}while(e!==e0);return c}render(context){const buffer=null==context?context=new src_path_Path:void 0,{points:points,halfedges:halfedges,triangles:triangles}=this;for(let i=0,n=halfedges.length;i<n;++i){const j=halfedges[i];if(j<i)continue;const ti=2*triangles[i],tj=2*triangles[j];context.moveTo(points[ti],points[ti+1]),context.lineTo(points[tj],points[tj+1])}return this.renderHull(context),buffer&&buffer.value()}renderPoints(context,r=2){const buffer=null==context?context=new src_path_Path:void 0,{points:points}=this;for(let i=0,n=points.length;i<n;i+=2){const x=points[i],y=points[i+1];context.moveTo(x+r,y),context.arc(x,y,r,0,delaunay_tau)}return buffer&&buffer.value()}renderHull(context){const buffer=null==context?context=new src_path_Path:void 0,{hull:hull,points:points}=this,h=2*hull[0],n=hull.length;context.moveTo(points[h],points[h+1]);for(let i=1;i<n;++i){const h=2*hull[i];context.lineTo(points[h],points[h+1])}return context.closePath(),buffer&&buffer.value()}hullPolygon(){const polygon=new Polygon;return this.renderHull(polygon),polygon.value()}renderTriangle(i,context){const buffer=null==context?context=new src_path_Path:void 0,{points:points,triangles:triangles}=this,t0=2*triangles[i*=3],t1=2*triangles[i+1],t2=2*triangles[i+2];return context.moveTo(points[t0],points[t0+1]),context.lineTo(points[t1],points[t1+1]),context.lineTo(points[t2],points[t2+1]),context.closePath(),buffer&&buffer.value()}*trianglePolygons(){const{triangles:triangles}=this;for(let i=0,n=triangles.length/3;i<n;++i)yield this.trianglePolygon(i)}trianglePolygon(i){const polygon=new Polygon;return this.renderTriangle(i,polygon),polygon.value()}}function Voronoi_Voronoi(params){Transform.call(this,null,params)}delaunay_Delaunay.from=function(points,fx=pointX,fy=pointY,that){return new delaunay_Delaunay("length"in points?function flatArray(points,fx,fy,that){const n=points.length,array=new Float64Array(2*n);for(let i=0;i<n;++i){const p=points[i];array[2*i]=fx.call(that,p,i,points),array[2*i+1]=fy.call(that,p,i,points)}return array}(points,fx,fy,that):Float64Array.from(function*flatIterable(points,fx,fy,that){let i=0;for(const p of points)yield fx.call(that,p,i,points),yield fy.call(that,p,i,points),++i}(points,fx,fy,that)))},Voronoi_Voronoi.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Voronoi_prototype=Object(vega_util.y)(Voronoi_Voronoi,Transform),defaultExtent=[-1e5,-1e5,1e5,1e5];function toPathString(p){const x=p[0][0],y=p[0][1];let n=p.length-1;for(;p[n][0]===x&&p[n][1]===y;--n);return"M"+p.slice(0,n+1).join("L")+"Z"}Voronoi_prototype.transform=function(_,pulse){const as=_.as||"path",data=pulse.source;if(!data||!data.length)return pulse;let s=_.size;s=s?[0,0,s[0],s[1]]:(s=_.extent)?[s[0][0],s[0][1],s[1][0],s[1][1]]:defaultExtent;const voronoi=this.value=delaunay_Delaunay.from(data,_.x,_.y).voronoi(s);for(let i=0,n=data.length;i<n;++i){const polygon=voronoi.cellPolygon(i);data[i][as]=polygon?toPathString(polygon):null}return pulse.reflow(_.modified()).modifies(as)};var cloudRadians=Math.PI/180,CloudLayout_cw=64,ch=2048,CloudLayout=function(){var text,font,fontSize,fontStyle,fontWeight,rotate,padding,size=[256,256],spiral=archimedeanSpiral,words=[],random=Math.random,cloud={};function place(board,tag,bounds){for(var dxdy,dx,dy,a,b,startX=tag.x,startY=tag.y,maxDelta=Math.sqrt(size[0]*size[0]+size[1]*size[1]),s=spiral(size),dt=random()<.5?1:-1,t=-dt;(dxdy=s(t+=dt))&&(dx=~~dxdy[0],dy=~~dxdy[1],!(Math.min(Math.abs(dx),Math.abs(dy))>=maxDelta));)if(tag.x=startX+dx,tag.y=startY+dy,!(tag.x+tag.x0<0||tag.y+tag.y0<0||tag.x+tag.x1>size[0]||tag.y+tag.y1>size[1]||bounds&&cloudCollide(tag,board,size[0])||bounds&&(b=bounds,!((a=tag).x+a.x1>b[0].x&&a.x+a.x0<b[1].x&&a.y+a.y1>b[0].y&&a.y+a.y0<b[1].y)))){for(var last,sprite=tag.sprite,w=tag.width>>5,sw=size[0]>>5,lx=tag.x-(w<<4),sx=127&lx,msx=32-sx,h=tag.y1-tag.y0,x=(tag.y+tag.y0)*sw+(lx>>5),j=0;j<h;j++){last=0;for(var i=0;i<=w;i++)board[x+i]|=last<<msx|(i<w?(last=sprite[j*w+i])>>>sx:0);x+=sw}return tag.sprite=null,!0}return!1}return cloud.layout=function(){for(var contextAndRatio=function getContext(canvas){canvas.width=canvas.height=1;var ratio=Math.sqrt(canvas.getContext("2d").getImageData(0,0,1,1).data.length>>2);canvas.width=(CloudLayout_cw<<5)/ratio,canvas.height=ch/ratio;var context=canvas.getContext("2d");return context.fillStyle=context.strokeStyle="red",context.textAlign="center",{context:context,ratio:ratio}}(domCanvas()),board=function zeroArray(n){var a=[],i=-1;for(;++i<n;)a[i]=0;return a}((size[0]>>5)*size[1]),bounds=null,n=words.length,i=-1,tags=[],data=words.map((function(d){return{text:text(d),font:font(d),style:fontStyle(d),weight:fontWeight(d),rotate:rotate(d),size:~~fontSize(d),padding:padding(d),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:d}})).sort((function(a,b){return b.size-a.size}));++i<n;){var d=data[i];d.x=size[0]*(random()+.5)>>1,d.y=size[1]*(random()+.5)>>1,cloudSprite(contextAndRatio,d,data,i),d.hasText&&place(board,d,bounds)&&(tags.push(d),bounds?cloudBounds(bounds,d):bounds=[{x:d.x+d.x0,y:d.y+d.y0},{x:d.x+d.x1,y:d.y+d.y1}],d.x-=size[0]>>1,d.y-=size[1]>>1)}return tags},cloud.words=function(_){return arguments.length?(words=_,cloud):words},cloud.size=function(_){return arguments.length?(size=[+_[0],+_[1]],cloud):size},cloud.font=function(_){return arguments.length?(font=functor(_),cloud):font},cloud.fontStyle=function(_){return arguments.length?(fontStyle=functor(_),cloud):fontStyle},cloud.fontWeight=function(_){return arguments.length?(fontWeight=functor(_),cloud):fontWeight},cloud.rotate=function(_){return arguments.length?(rotate=functor(_),cloud):rotate},cloud.text=function(_){return arguments.length?(text=functor(_),cloud):text},cloud.spiral=function(_){return arguments.length?(spiral=spirals[_]||_,cloud):spiral},cloud.fontSize=function(_){return arguments.length?(fontSize=functor(_),cloud):fontSize},cloud.padding=function(_){return arguments.length?(padding=functor(_),cloud):padding},cloud.random=function(_){return arguments.length?(random=_,cloud):random},cloud};function cloudSprite(contextAndRatio,d,data,di){if(!d.sprite){var c=contextAndRatio.context,ratio=contextAndRatio.ratio;c.clearRect(0,0,(CloudLayout_cw<<5)/ratio,ch/ratio);var w,w32,h,i,j,x=0,y=0,maxh=0,n=data.length;for(--di;++di<n;){if(d=data[di],c.save(),c.font=d.style+" "+d.weight+" "+~~((d.size+1)/ratio)+"px "+d.font,w=c.measureText(d.text+"m").width*ratio,h=d.size<<1,d.rotate){var sr=Math.sin(d.rotate*cloudRadians),cr=Math.cos(d.rotate*cloudRadians),wcr=w*cr,wsr=w*sr,hcr=h*cr,hsr=h*sr;w=Math.max(Math.abs(wcr+hsr),Math.abs(wcr-hsr))+31>>5<<5,h=~~Math.max(Math.abs(wsr+hcr),Math.abs(wsr-hcr))}else w=w+31>>5<<5;if(h>maxh&&(maxh=h),x+w>=CloudLayout_cw<<5&&(x=0,y+=maxh,maxh=0),y+h>=ch)break;c.translate((x+(w>>1))/ratio,(y+(h>>1))/ratio),d.rotate&&c.rotate(d.rotate*cloudRadians),c.fillText(d.text,0,0),d.padding&&(c.lineWidth=2*d.padding,c.strokeText(d.text,0,0)),c.restore(),d.width=w,d.height=h,d.xoff=x,d.yoff=y,d.x1=w>>1,d.y1=h>>1,d.x0=-d.x1,d.y0=-d.y1,d.hasText=!0,x+=w}for(var pixels=c.getImageData(0,0,(CloudLayout_cw<<5)/ratio,ch/ratio).data,sprite=[];--di>=0;)if((d=data[di]).hasText){for(w32=(w=d.width)>>5,h=d.y1-d.y0,i=0;i<h*w32;i++)sprite[i]=0;if(null==(x=d.xoff))return;y=d.yoff;var seen=0,seenRow=-1;for(j=0;j<h;j++){for(i=0;i<w;i++){var k=w32*j+(i>>5),m=pixels[(y+j)*(CloudLayout_cw<<5)+(x+i)<<2]?1<<31-i%32:0;sprite[k]|=m,seen|=m}seen?seenRow=j:(d.y0++,h--,j--,y++)}d.y1=d.y0+seenRow,d.sprite=sprite.slice(0,(d.y1-d.y0)*w32)}}}function cloudCollide(tag,board,sw){sw>>=5;for(var last,sprite=tag.sprite,w=tag.width>>5,lx=tag.x-(w<<4),sx=127&lx,msx=32-sx,h=tag.y1-tag.y0,x=(tag.y+tag.y0)*sw+(lx>>5),j=0;j<h;j++){last=0;for(var i=0;i<=w;i++)if((last<<msx|(i<w?(last=sprite[j*w+i])>>>sx:0))&board[x+i])return!0;x+=sw}return!1}function cloudBounds(bounds,d){var b0=bounds[0],b1=bounds[1];d.x+d.x0<b0.x&&(b0.x=d.x+d.x0),d.y+d.y0<b0.y&&(b0.y=d.y+d.y0),d.x+d.x1>b1.x&&(b1.x=d.x+d.x1),d.y+d.y1>b1.y&&(b1.y=d.y+d.y1)}function archimedeanSpiral(size){var e=size[0]/size[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function functor(d){return"function"==typeof d?d:function(){return d}}var spirals={archimedean:archimedeanSpiral,rectangular:function rectangularSpiral(size){var dx=4*size[0]/size[1],x=0,y=0;return function(t){var sign=t<0?-1:1;switch(Math.sqrt(1+4*sign*t)-sign&3){case 0:x+=dx;break;case 1:y+=4;break;case 2:x-=dx;break;default:y-=4}return[x,y]}}},Wordcloud_Output=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Wordcloud_Params=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Wordcloud(params){Transform.call(this,CloudLayout(),params)}function array8(n){return new Uint8Array(n)}function array16(n){return new Uint16Array(n)}function array32(n){return new Uint32Array(n)}function Bitmaps_array(n,m,array){var copy=(m<257?array8:m<65537?array16:array32)(n);return array&&copy.set(array),copy}Wordcloud.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Wordcloud_Output}]},Object(vega_util.y)(Wordcloud,Transform).transform=function(_,pulse){!_.size||_.size[0]&&_.size[1]||Object(vega_util.n)("Wordcloud size dimensions must be non-zero.");var mod=_.modified();if(mod||pulse.changed(pulse.ADD_REM)||Wordcloud_Params.some((function modp(param){var p=_[param];return Object(vega_util.D)(p)&&pulse.modified(p.fields)}))){var range,data=pulse.materialize(pulse.SOURCE).source,layout=this.value,as=_.as||Wordcloud_Output,fontSize=_.fontSize||14;if(Object(vega_util.D)(fontSize)?range=_.fontSizeRange:fontSize=Object(vega_util.l)(fontSize),range){var fsize=fontSize,sizeScale=scales_scale("sqrt")().domain(Object(vega_util.p)(data,fsize)).range(range);fontSize=function(x){return sizeScale(fsize(x))}}data.forEach((function(t){t[as[0]]=NaN,t[as[1]]=NaN,t[as[3]]=0}));for(var w,t,words=layout.words(data).text(_.text).size(_.size||[500,500]).padding(_.padding||1).spiral(_.spiral||"archimedean").rotate(_.rotate||0).font(_.font||"sans-serif").fontStyle(_.fontStyle||"normal").fontWeight(_.fontWeight||"normal").fontSize(fontSize).random(random_random).layout(),size=layout.size(),dx=size[0]>>1,dy=size[1]>>1,i=0,n=words.length;i<n;++i)(t=(w=words[i]).datum)[as[0]]=w.x+dx,t[as[1]]=w.y+dy,t[as[2]]=w.font,t[as[3]]=w.size,t[as[4]]=w.style,t[as[5]]=w.weight,t[as[6]]=w.rotate;return pulse.reflow(mod).modifies(as)}};var Dimension=function(index,i,query){var bit=1<<i;return{one:bit,zero:~bit,range:query.slice(),bisect:index.bisect,index:index.index,size:index.size,onAdd:function(added,curr){var i,range=this.bisect(this.range,added.value),idx=added.index,lo=range[0],hi=range[1],n1=idx.length;for(i=0;i<lo;++i)curr[idx[i]]|=bit;for(i=hi;i<n1;++i)curr[idx[i]]|=bit;return this}}},src_permute=function(source,keys){return Array.from(keys,key=>source[key])};function SortedIndex(){var index=array32(0),value=[],size=0;return{insert:function insert(key,data,base){if(!data.length)return[];var oldv,oldi,i,n0=size,n1=data.length,addv=Array(n1),addi=array32(n1);for(i=0;i<n1;++i)addv[i]=key(data[i]),addi[i]=i;if(addv=function SortedIndex_sort(values,index){return values.sort.call(index,(function(a,b){var x=values[a],y=values[b];return x<y?-1:x>y?1:0})),src_permute(values,index)}(addv,addi),n0)oldv=value,oldi=index,value=Array(n0+n1),index=array32(n0+n1),function SortedIndex_merge(base,value0,index0,n0,value1,index1,n1,value,index){var i,i0=0,i1=0;for(i=0;i0<n0&&i1<n1;++i)value0[i0]<value1[i1]?(value[i]=value0[i0],index[i]=index0[i0++]):(value[i]=value1[i1],index[i]=index1[i1++]+base);for(;i0<n0;++i0,++i)value[i]=value0[i0],index[i]=index0[i0];for(;i1<n1;++i1,++i)value[i]=value1[i1],index[i]=index1[i1]+base}(base,oldv,oldi,n0,addv,addi,n1,value,index);else{if(base>0)for(i=0;i<n1;++i)addi[i]+=base;value=addv,index=addi}return size=n0+n1,{index:addi,value:addv}},remove:function remove(num,map){var idx,i,j,n=size;for(i=0;!map[index[i]]&&i<n;++i);for(j=i;i<n;++i)map[idx=index[i]]||(index[j]=idx,value[j]=value[i],++j);size=n-num},bisect:function bisect(range,array){var n;return array?n=array.length:(array=value,n=size),[bisectLeft(array,range[0],0,n),bisectRight(array,range[1],0,n)]},reindex:function reindex(map){for(var i=0,n=size;i<n;++i)index[i]=map[index[i]]},index:function(){return index},size:function(){return size}}}function CrossFilter(params){Transform.call(this,function Bitmaps(){var width=8,data=[],seen=array32(0),curr=Bitmaps_array(0,width),prev=Bitmaps_array(0,width);return{data:function(){return data},seen:function(){return seen=function lengthen(array,length,copy){return array.length>=length?array:((copy=copy||new array.constructor(length)).set(array),copy)}(seen,data.length)},add:function(array){for(var t,i=0,j=data.length,n=array.length;i<n;++i)(t=array[i])._index=j++,data.push(t)},remove:function(num,map){var t,i,j,n=data.length,copy=Array(n-num),reindex=data;for(i=0;!map[i]&&i<n;++i)copy[i]=data[i],reindex[i]=i;for(j=i;i<n;++i)t=data[i],map[i]?reindex[i]=-1:(reindex[i]=j,curr[j]=curr[i],prev[j]=prev[i],copy[j]=t,t._index=j++),curr[i]=0;return data=copy,reindex},size:function(){return data.length},curr:function(){return curr},prev:function(){return prev},reset:function(k){prev[k]=curr[k]},all:function(){return width<257?255:width<65537?65535:4294967295},set:function(k,one){curr[k]|=one},clear:function(k,one){curr[k]&=~one},resize:function(n,m){(n>curr.length||m>width)&&(width=Math.max(m,width),curr=Bitmaps_array(n,width,curr),prev=Bitmaps_array(n,width))}}}(),params),this._indices=null,this._dims=null}CrossFilter.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var CrossFilter_prototype=Object(vega_util.y)(CrossFilter,Transform);function ResolveFilter(params){Transform.call(this,null,params)}CrossFilter_prototype.transform=function(_,pulse){return this._dims?_.modified("fields")||_.fields.some((function(f){return pulse.modified(f.fields)}))?this.reinit(_,pulse):this.eval(_,pulse):this.init(_,pulse)},CrossFilter_prototype.init=function(_,pulse){for(var key,index,fields=_.fields,query=_.query,indices=this._indices={},dims=this._dims=[],m=query.length,i=0;i<m;++i)index=indices[key=fields[i].fname]||(indices[key]=SortedIndex()),dims.push(Dimension(index,i,query[i]));return this.eval(_,pulse)},CrossFilter_prototype.reinit=function(_,pulse){var add,index,key,mods,remMap,modMap,i,n,f,output=pulse.materialize().fork(),fields=_.fields,query=_.query,indices=this._indices,dims=this._dims,bits=this.value,curr=bits.curr(),prev=bits.prev(),all=bits.all(),out=output.rem=output.add,mod=output.mod,m=query.length,adds={};if(prev.set(curr),pulse.rem.length&&(remMap=this.remove(_,pulse,output)),pulse.add.length&&bits.add(pulse.add),pulse.mod.length)for(modMap={},i=0,n=(mods=pulse.mod).length;i<n;++i)modMap[mods[i]._index]=1;for(i=0;i<m;++i)f=fields[i],(!dims[i]||_.modified("fields",i)||pulse.modified(f.fields))&&((add=adds[key=f.fname])||(indices[key]=index=SortedIndex(),adds[key]=add=index.insert(f,pulse.source,0)),dims[i]=Dimension(index,i,query[i]).onAdd(add,curr));for(i=0,n=bits.data().length;i<n;++i)remMap[i]||(prev[i]!==curr[i]?out.push(i):modMap[i]&&curr[i]!==all&&mod.push(i));return bits.mask=(1<<m)-1,output},CrossFilter_prototype.eval=function(_,pulse){var output=pulse.materialize().fork(),m=this._dims.length,mask=0;return pulse.rem.length&&(this.remove(_,pulse,output),mask|=(1<<m)-1),_.modified("query")&&!_.modified("fields")&&(mask|=this.update(_,pulse,output)),pulse.add.length&&(this.insert(_,pulse,output),mask|=(1<<m)-1),pulse.mod.length&&(this.modify(pulse,output),mask|=(1<<m)-1),this.value.mask=mask,output},CrossFilter_prototype.insert=function(_,pulse,output){var j,key,add,tuples=pulse.add,bits=this.value,dims=this._dims,indices=this._indices,fields=_.fields,adds={},out=output.add,k=bits.size(),n=k+tuples.length,m=dims.length;bits.resize(n,m),bits.add(tuples);var curr=bits.curr(),prev=bits.prev(),all=bits.all();for(j=0;j<m;++j)add=adds[key=fields[j].fname]||(adds[key]=indices[key].insert(fields[j],tuples,k)),dims[j].onAdd(add,curr);for(;k<n;++k)prev[k]=all,curr[k]!==all&&out.push(k)},CrossFilter_prototype.modify=function(pulse,output){var i,n,k,out=output.mod,bits=this.value,curr=bits.curr(),all=bits.all(),tuples=pulse.mod;for(i=0,n=tuples.length;i<n;++i)curr[k=tuples[i]._index]!==all&&out.push(k)},CrossFilter_prototype.remove=function(_,pulse,output){var i,n,k,f,indices=this._indices,bits=this.value,curr=bits.curr(),prev=bits.prev(),all=bits.all(),map={},out=output.rem,tuples=pulse.rem;for(i=0,n=tuples.length;i<n;++i)map[k=tuples[i]._index]=1,prev[k]=f=curr[k],curr[k]=all,f!==all&&out.push(k);for(k in indices)indices[k].remove(n,map);return this.reindex(pulse,n,map),map},CrossFilter_prototype.reindex=function(pulse,num,map){var indices=this._indices,bits=this.value;pulse.runAfter((function(){var indexMap=bits.remove(num,map);for(var key in indices)indices[key].reindex(indexMap)}))},CrossFilter_prototype.update=function(_,pulse,output){var i,q,dims=this._dims,query=_.query,stamp=pulse.stamp,m=dims.length,mask=0;for(output.filters=0,q=0;q<m;++q)_.modified("query",q)&&(i=q,++mask);if(1===mask)mask=dims[i].one,this.incrementOne(dims[i],query[i],output.add,output.rem);else for(q=0,mask=0;q<m;++q)_.modified("query",q)&&(mask|=dims[q].one,this.incrementAll(dims[q],query[q],stamp,output.add),output.rem=output.add);return mask},CrossFilter_prototype.incrementAll=function(dim,query,stamp,out){var i,j,k,bits=this.value,seen=bits.seen(),curr=bits.curr(),prev=bits.prev(),index=dim.index(),old=dim.bisect(dim.range),range=dim.bisect(query),lo1=range[0],hi1=range[1],lo0=old[0],hi0=old[1],one=dim.one;if(lo1<lo0)for(i=lo1,j=Math.min(lo0,hi1);i<j;++i)seen[k=index[i]]!==stamp&&(prev[k]=curr[k],seen[k]=stamp,out.push(k)),curr[k]^=one;else if(lo1>lo0)for(i=lo0,j=Math.min(lo1,hi0);i<j;++i)seen[k=index[i]]!==stamp&&(prev[k]=curr[k],seen[k]=stamp,out.push(k)),curr[k]^=one;if(hi1>hi0)for(i=Math.max(lo1,hi0),j=hi1;i<j;++i)seen[k=index[i]]!==stamp&&(prev[k]=curr[k],seen[k]=stamp,out.push(k)),curr[k]^=one;else if(hi1<hi0)for(i=Math.max(lo0,hi1),j=hi0;i<j;++i)seen[k=index[i]]!==stamp&&(prev[k]=curr[k],seen[k]=stamp,out.push(k)),curr[k]^=one;dim.range=query.slice()},CrossFilter_prototype.incrementOne=function(dim,query,add,rem){var i,j,k,curr=this.value.curr(),index=dim.index(),old=dim.bisect(dim.range),range=dim.bisect(query),lo1=range[0],hi1=range[1],lo0=old[0],hi0=old[1],one=dim.one;if(lo1<lo0)for(i=lo1,j=Math.min(lo0,hi1);i<j;++i)curr[k=index[i]]^=one,add.push(k);else if(lo1>lo0)for(i=lo0,j=Math.min(lo1,hi0);i<j;++i)curr[k=index[i]]^=one,rem.push(k);if(hi1>hi0)for(i=Math.max(lo1,hi0),j=hi1;i<j;++i)curr[k=index[i]]^=one,add.push(k);else if(hi1<hi0)for(i=Math.max(lo0,hi1),j=hi0;i<j;++i)curr[k=index[i]]^=one,rem.push(k);dim.range=query.slice()},ResolveFilter.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},Object(vega_util.y)(ResolveFilter,Transform).transform=function(_,pulse){var ignore=~(_.ignore||0),bitmap=_.filter,mask=bitmap.mask;if(0==(mask&ignore))return pulse.StopPropagation;var output=pulse.fork(pulse.ALL),data=bitmap.data(),curr=bitmap.curr(),prev=bitmap.prev(),pass=function(k){return curr[k]&ignore?null:data[k]};return output.filter(output.MOD,pass),mask&mask-1?(output.filter(output.ADD,(function(k){var c=curr[k]&ignore;return!c&&c^prev[k]&ignore?data[k]:null})),output.filter(output.REM,(function(k){var c=curr[k]&ignore;return c&&!(c^c^prev[k]&ignore)?data[k]:null}))):(output.filter(output.ADD,pass),output.filter(output.REM,(function(k){return(curr[k]&ignore)===mask?data[k]:null}))),output.filter(output.SOURCE,(function(t){return pass(t._index)}))};var vega_package=__webpack_require__(270),src_cursor=function(view){var cursor=view._signals.cursor;cursor||(view._signals.cursor=cursor=view.add({user:"default",item:null})),view.on(view.events("view","mousemove"),cursor,(function(_,event){var value=cursor.value,user=value?Object(vega_util.H)(value)?value:value.user:"default",item=event.item&&event.item.cursor||null;return value&&user===value.user&&item==value.item?value:{user:user,item:item}})),view.add(null,(function(_){var user=_.cursor,item=this.value;return Object(vega_util.H)(user)||(item=user.item,user=user.user),function setCursor(cursor){"undefined"!=typeof document&&document.body&&(document.body.style.cursor=cursor)}(user&&"default"!==user?user:item||user),item}),{cursor:cursor})};function dataref(view,name){var data=view._runtime.data;return Object(vega_util.v)(data,name)||Object(vega_util.n)("Unrecognized data set: "+name),data[name]}function change(name,changes){isChangeSet(changes)||Object(vega_util.n)("Second argument to changes must be a changeset.");var dataset=dataref(this,name);return dataset.modified=!0,this.pulse(dataset.input,changes)}function render_size_width(view){var padding=view.padding();return Math.max(0,view._viewWidth+padding.left+padding.right)}function render_size_height(view){var padding=view.padding();return Math.max(0,view._viewHeight+padding.top+padding.bottom)}function render_size_offset(view){var padding=view.padding(),origin=view._origin;return[padding.left+origin[0],padding.top+origin[1]]}var events_extend=function(view,event,item){var p,e,translate,r=view._renderer,el=r&&r.canvas();return el&&(translate=render_size_offset(view),e=event.changedTouches?event.changedTouches[0]:event,(p=util_point(e,el))[0]-=translate[0],p[1]-=translate[1]),event.dataflow=view,event.item=item,event.vega=function extension(view,item,point){var itemGroup=item?"group"===item.mark.marktype?item:item.mark.group:null;function group(name){var i,g=itemGroup;if(name)for(i=item;i;i=i.mark.group)if(i.mark.name===name){g=i;break}return g&&g.mark&&g.mark.interactive?g:{}}function xy(item){if(!item)return point;Object(vega_util.H)(item)&&(item=group(item));for(var p=point.slice();item;)p[0]-=item.x||0,p[1]-=item.y||0,item=item.mark&&item.mark.group;return p}return{view:Object(vega_util.l)(view),item:Object(vega_util.l)(item||{}),group:group,xy:xy,x:function(item){return xy(item)[0]},y:function(item){return xy(item)[1]}}}(view,item,p),event};const VIEW="view",TIMER="timer",WINDOW="window",NO_TRAP={trap:!1};function permit(view,key,type){const rule=view._eventConfig&&view._eventConfig[key];return!(!1===rule||Object(vega_util.F)(rule)&&!rule[type])||(view.warn(`Blocked ${key} ${type} event listener.`),!1)}function itemFilter(event){return event.item}function markTarget(event){return event.item.mark.source}function invoke(name){return function(_,event){return event.vega.view().changeset().encode(event.item,name)}}var src_element=function(tag,attr,text){var el=document.createElement(tag);for(var key in attr)el.setAttribute(key,attr[key]);return null!=text&&(el.textContent=text),el},BindClass="vega-bind",NameClass="vega-bind-name",RadioClass="vega-bind-radio",OptionClass="vega-option-",src_bind=function(view,el,binding){if(el){var param=binding.param,bind=binding.state;return bind||(bind=binding.state={elements:null,active:!1,set:null,update:function(value){value!==view.signal(param.signal)&&view.runAsync(null,(function(){bind.source=!0,view.signal(param.signal,value)}))}},param.debounce&&(bind.update=Object(vega_util.m)(param.debounce,bind.update))),function bind_generate(bind,el,param,value){var div=src_element("div",{class:BindClass});div.appendChild(src_element("span",{class:NameClass},param.name||param.signal)),el.appendChild(div);var input=bind_form;switch(param.input){case"checkbox":input=bind_checkbox;break;case"select":input=bind_select;break;case"radio":input=bind_radio;break;case"range":input=bind_range}input(bind,div,param,value)}(bind,el,param,view.signal(param.signal)),bind.active||(view.on(view._signals[param.signal],null,(function(){bind.source?bind.source=!1:bind.set(view.signal(param.signal))})),bind.active=!0),bind}};function bind_form(bind,el,param,value){var node=src_element("input");for(var key in param)"signal"!==key&&"element"!==key&&node.setAttribute("input"===key?"type":key,param[key]);node.setAttribute("name",param.signal),node.value=value,el.appendChild(node),node.addEventListener("input",(function(){bind.update(node.value)})),bind.elements=[node],bind.set=function(value){node.value=value}}function bind_checkbox(bind,el,param,value){var attr={type:"checkbox",name:param.signal};value&&(attr.checked=!0);var node=src_element("input",attr);el.appendChild(node),node.addEventListener("change",(function(){bind.update(node.checked)})),bind.elements=[node],bind.set=function(value){node.checked=!!value||null}}function bind_select(bind,el,param,value){var node=src_element("select",{name:param.signal});param.options.forEach((function(option){var attr={value:option};valuesEqual(option,value)&&(attr.selected=!0),node.appendChild(src_element("option",attr,option+""))})),el.appendChild(node),node.addEventListener("change",(function(){bind.update(param.options[node.selectedIndex])})),bind.elements=[node],bind.set=function(value){for(var i=0,n=param.options.length;i<n;++i)if(valuesEqual(param.options[i],value))return void(node.selectedIndex=i)}}function bind_radio(bind,el,param,value){var group=src_element("span",{class:RadioClass});el.appendChild(group),bind.elements=param.options.map((function(option){var id=OptionClass+param.signal+"-"+option,attr={id:id,type:"radio",name:param.signal,value:option};valuesEqual(option,value)&&(attr.checked=!0);var input=src_element("input",attr);return input.addEventListener("change",(function(){bind.update(option)})),group.appendChild(input),group.appendChild(src_element("label",{for:id},option+"")),input})),bind.set=function(value){for(var nodes=bind.elements,i=0,n=nodes.length;i<n;++i)valuesEqual(nodes[i].value,value)&&(nodes[i].checked=!0)}}function bind_range(bind,el,param,value){value=void 0!==value?value:(+param.max+ +param.min)/2;var max=null!=param.max?param.max:Math.max(100,+value)||100,min=param.min||Math.min(0,max,+value)||0,step=param.step||tickStep(min,max,100),node=src_element("input",{type:"range",name:param.signal,min:min,max:max,step:step});node.value=value;var label=src_element("label",{},+value);function update(){label.textContent=node.value,bind.update(+node.value)}el.appendChild(node),el.appendChild(label),node.addEventListener("input",update),node.addEventListener("change",update),bind.elements=[node],bind.set=function(value){node.value=value,label.textContent=value}}function valuesEqual(a,b){return a===b||a+""==b+""}var initialize_renderer=function(view,r,el,constructor,scaleFactor,opt){return(r=r||new constructor(view.loader())).initialize(el,render_size_width(view),render_size_height(view),render_size_offset(view),scaleFactor,opt).background(view._background)},trap=function(view,fn){return fn?function(){try{fn.apply(this,arguments)}catch(error){view.error(error)}}:null};function initialize_lookup(view,el){if("string"==typeof el){if("undefined"==typeof document)return view.error("DOM document instance not found."),null;if(!(el=document.querySelector(el)))return view.error("Signal bind element not found: "+el),null}if(el)try{el.innerHTML=""}catch(e){el=null,view.error(e)}return el}var render_headless=async function(view,type,scaleFactor,opt){const module=renderModule(type),ctr=module&&module.headless;return ctr||Object(vega_util.n)("Unrecognized renderer type: "+type),await view.runAsync(),initialize_renderer(view,null,null,ctr,scaleFactor,opt).renderAsync(view._scenegraph.root)};var TokenName,parser_source,parser_index,parser_length,lookahead,RawCode="RawCode",Literal="Literal",Property="Property",ast_Identifier="Identifier",ArrayExpression="ArrayExpression",BinaryExpression="BinaryExpression",CallExpression="CallExpression",ConditionalExpression="ConditionalExpression",LogicalExpression="LogicalExpression",MemberExpression="MemberExpression",ObjectExpression="ObjectExpression",UnaryExpression="UnaryExpression";function ASTNode(type){this.type=type}ASTNode.prototype.visit=function(visitor){var c,i,n;if(visitor(this))return 1;for(i=0,n=(c=function ast_children(node){switch(node.type){case ArrayExpression:return node.elements;case BinaryExpression:case LogicalExpression:return[node.left,node.right];case CallExpression:var args=node.arguments.slice();return args.unshift(node.callee),args;case ConditionalExpression:return[node.test,node.consequent,node.alternate];case MemberExpression:return[node.object,node.property];case ObjectExpression:return node.properties;case Property:return[node.key,node.value];case UnaryExpression:return[node.argument];case ast_Identifier:case Literal:case RawCode:default:return[]}}(this)).length;i<n;++i)if(c[i].visit(visitor))return 1};var TokenBooleanLiteral=1,TokenEOF=2,TokenIdentifier=3,TokenKeyword=4,TokenNullLiteral=5,TokenNumericLiteral=6,TokenPunctuator=7,TokenStringLiteral=8;(TokenName={})[TokenBooleanLiteral]="Boolean",TokenName[TokenEOF]="<end>",TokenName[TokenIdentifier]="Identifier",TokenName[TokenKeyword]="Keyword",TokenName[TokenNullLiteral]="Null",TokenName[TokenNumericLiteral]="Numeric",TokenName[TokenPunctuator]="Punctuator",TokenName[TokenStringLiteral]="String",TokenName[9]="RegularExpression";var SyntaxArrayExpression="ArrayExpression",SyntaxBinaryExpression="BinaryExpression",SyntaxCallExpression="CallExpression",SyntaxConditionalExpression="ConditionalExpression",SyntaxIdentifier="Identifier",SyntaxLiteral="Literal",SyntaxLogicalExpression="LogicalExpression",SyntaxMemberExpression="MemberExpression",SyntaxObjectExpression="ObjectExpression",SyntaxProperty="Property",SyntaxUnaryExpression="UnaryExpression",MessageUnexpectedToken="Unexpected token %0",MessageUnexpectedNumber="Unexpected number",MessageUnexpectedString="Unexpected string",MessageUnexpectedIdentifier="Unexpected identifier",MessageUnexpectedReserved="Unexpected reserved word",MessageUnexpectedEOS="Unexpected end of input",MessageInvalidRegExp="Invalid regular expression",MessageUnterminatedRegExp="Invalid regular expression: missing /",MessageStrictOctalLiteral="Octal literals are not allowed in strict mode.",MessageStrictDuplicateProperty="Duplicate data property in object literal not allowed in strict mode",ILLEGAL="ILLEGAL",DISABLED="Disabled.",RegexNonAsciiIdentifierStart=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),RegexNonAsciiIdentifierPart=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function assert(condition,message){if(!condition)throw new Error("ASSERT: "+message)}function isDecimalDigit(ch){return ch>=48&&ch<=57}function isHexDigit(ch){return"0123456789abcdefABCDEF".indexOf(ch)>=0}function isOctalDigit(ch){return"01234567".indexOf(ch)>=0}function isWhiteSpace(ch){return 32===ch||9===ch||11===ch||12===ch||160===ch||ch>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(ch)>=0}function isLineTerminator(ch){return 10===ch||13===ch||8232===ch||8233===ch}function isIdentifierStart(ch){return 36===ch||95===ch||ch>=65&&ch<=90||ch>=97&&ch<=122||92===ch||ch>=128&&RegexNonAsciiIdentifierStart.test(String.fromCharCode(ch))}function isIdentifierPart(ch){return 36===ch||95===ch||ch>=65&&ch<=90||ch>=97&&ch<=122||ch>=48&&ch<=57||92===ch||ch>=128&&RegexNonAsciiIdentifierPart.test(String.fromCharCode(ch))}var keywords={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function skipComment(){for(var ch;parser_index<parser_length&&(isWhiteSpace(ch=parser_source.charCodeAt(parser_index))||isLineTerminator(ch));)++parser_index}function scanHexEscape(prefix){var i,len,ch,code=0;for(len="u"===prefix?4:2,i=0;i<len;++i)parser_index<parser_length&&isHexDigit(parser_source[parser_index])?(ch=parser_source[parser_index++],code=16*code+"0123456789abcdef".indexOf(ch.toLowerCase())):throwError({},MessageUnexpectedToken,ILLEGAL);return String.fromCharCode(code)}function scanUnicodeCodePointEscape(){var ch,code,cu1,cu2;for(code=0,"}"===(ch=parser_source[parser_index])&&throwError({},MessageUnexpectedToken,ILLEGAL);parser_index<parser_length&&isHexDigit(ch=parser_source[parser_index++]);)code=16*code+"0123456789abcdef".indexOf(ch.toLowerCase());return(code>1114111||"}"!==ch)&&throwError({},MessageUnexpectedToken,ILLEGAL),code<=65535?String.fromCharCode(code):(cu1=55296+(code-65536>>10),cu2=56320+(code-65536&1023),String.fromCharCode(cu1,cu2))}function getEscapedIdentifier(){var ch,id;for(ch=parser_source.charCodeAt(parser_index++),id=String.fromCharCode(ch),92===ch&&(117!==parser_source.charCodeAt(parser_index)&&throwError({},MessageUnexpectedToken,ILLEGAL),++parser_index,(ch=scanHexEscape("u"))&&"\\"!==ch&&isIdentifierStart(ch.charCodeAt(0))||throwError({},MessageUnexpectedToken,ILLEGAL),id=ch);parser_index<parser_length&&isIdentifierPart(ch=parser_source.charCodeAt(parser_index));)++parser_index,id+=String.fromCharCode(ch),92===ch&&(id=id.substr(0,id.length-1),117!==parser_source.charCodeAt(parser_index)&&throwError({},MessageUnexpectedToken,ILLEGAL),++parser_index,(ch=scanHexEscape("u"))&&"\\"!==ch&&isIdentifierPart(ch.charCodeAt(0))||throwError({},MessageUnexpectedToken,ILLEGAL),id+=ch);return id}function scanIdentifier(){var start,id;return start=parser_index,{type:1===(id=92===parser_source.charCodeAt(parser_index)?getEscapedIdentifier():function getIdentifier(){var start,ch;for(start=parser_index++;parser_index<parser_length;){if(92===(ch=parser_source.charCodeAt(parser_index)))return parser_index=start,getEscapedIdentifier();if(!isIdentifierPart(ch))break;++parser_index}return parser_source.slice(start,parser_index)}()).length?TokenIdentifier:keywords.hasOwnProperty(id)?TokenKeyword:"null"===id?TokenNullLiteral:"true"===id||"false"===id?TokenBooleanLiteral:TokenIdentifier,value:id,start:start,end:parser_index}}function scanPunctuator(){var code2,ch2,ch3,ch4,start=parser_index,code=parser_source.charCodeAt(parser_index),ch1=parser_source[parser_index];switch(code){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++parser_index,{type:TokenPunctuator,value:String.fromCharCode(code),start:start,end:parser_index};default:if(61===(code2=parser_source.charCodeAt(parser_index+1)))switch(code){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return parser_index+=2,{type:TokenPunctuator,value:String.fromCharCode(code)+String.fromCharCode(code2),start:start,end:parser_index};case 33:case 61:return parser_index+=2,61===parser_source.charCodeAt(parser_index)&&++parser_index,{type:TokenPunctuator,value:parser_source.slice(start,parser_index),start:start,end:parser_index}}}return">>>="===(ch4=parser_source.substr(parser_index,4))?{type:TokenPunctuator,value:ch4,start:start,end:parser_index+=4}:">>>"===(ch3=ch4.substr(0,3))||"<<="===ch3||">>="===ch3?{type:TokenPunctuator,value:ch3,start:start,end:parser_index+=3}:ch1===(ch2=ch3.substr(0,2))[1]&&"+-<>&|".indexOf(ch1)>=0||"=>"===ch2?{type:TokenPunctuator,value:ch2,start:start,end:parser_index+=2}:"<>=!+-*%&|^/".indexOf(ch1)>=0?{type:TokenPunctuator,value:ch1,start:start,end:++parser_index}:void throwError({},MessageUnexpectedToken,ILLEGAL)}function scanNumericLiteral(){var number,start,ch;if(assert(isDecimalDigit((ch=parser_source[parser_index]).charCodeAt(0))||"."===ch,"Numeric literal must start with a decimal digit or a decimal point"),start=parser_index,number="","."!==ch){if(number=parser_source[parser_index++],ch=parser_source[parser_index],"0"===number){if("x"===ch||"X"===ch)return++parser_index,function scanHexLiteral(start){for(var number="";parser_index<parser_length&&isHexDigit(parser_source[parser_index]);)number+=parser_source[parser_index++];return 0===number.length&&throwError({},MessageUnexpectedToken,ILLEGAL),isIdentifierStart(parser_source.charCodeAt(parser_index))&&throwError({},MessageUnexpectedToken,ILLEGAL),{type:TokenNumericLiteral,value:parseInt("0x"+number,16),start:start,end:parser_index}}(start);if(isOctalDigit(ch))return function scanOctalLiteral(start){for(var number="0"+parser_source[parser_index++];parser_index<parser_length&&isOctalDigit(parser_source[parser_index]);)number+=parser_source[parser_index++];return(isIdentifierStart(parser_source.charCodeAt(parser_index))||isDecimalDigit(parser_source.charCodeAt(parser_index)))&&throwError({},MessageUnexpectedToken,ILLEGAL),{type:TokenNumericLiteral,value:parseInt(number,8),octal:!0,start:start,end:parser_index}}(start);ch&&isDecimalDigit(ch.charCodeAt(0))&&throwError({},MessageUnexpectedToken,ILLEGAL)}for(;isDecimalDigit(parser_source.charCodeAt(parser_index));)number+=parser_source[parser_index++];ch=parser_source[parser_index]}if("."===ch){for(number+=parser_source[parser_index++];isDecimalDigit(parser_source.charCodeAt(parser_index));)number+=parser_source[parser_index++];ch=parser_source[parser_index]}if("e"===ch||"E"===ch)if(number+=parser_source[parser_index++],"+"!==(ch=parser_source[parser_index])&&"-"!==ch||(number+=parser_source[parser_index++]),isDecimalDigit(parser_source.charCodeAt(parser_index)))for(;isDecimalDigit(parser_source.charCodeAt(parser_index));)number+=parser_source[parser_index++];else throwError({},MessageUnexpectedToken,ILLEGAL);return isIdentifierStart(parser_source.charCodeAt(parser_index))&&throwError({},MessageUnexpectedToken,ILLEGAL),{type:TokenNumericLiteral,value:parseFloat(number),start:start,end:parser_index}}function scanRegExp(){var start,body,flags,value;return lookahead=null,skipComment(),start=parser_index,body=function scanRegExpBody(){var ch,str,classMarker,terminated;for(assert("/"===(ch=parser_source[parser_index]),"Regular expression literal must start with a slash"),str=parser_source[parser_index++],classMarker=!1,terminated=!1;parser_index<parser_length;)if(str+=ch=parser_source[parser_index++],"\\"===ch)isLineTerminator((ch=parser_source[parser_index++]).charCodeAt(0))&&throwError({},MessageUnterminatedRegExp),str+=ch;else if(isLineTerminator(ch.charCodeAt(0)))throwError({},MessageUnterminatedRegExp);else if(classMarker)"]"===ch&&(classMarker=!1);else{if("/"===ch){terminated=!0;break}"["===ch&&(classMarker=!0)}return terminated||throwError({},MessageUnterminatedRegExp),{value:str.substr(1,str.length-2),literal:str}}(),flags=function scanRegExpFlags(){var ch,str,flags;for(str="",flags="";parser_index<parser_length&&isIdentifierPart((ch=parser_source[parser_index]).charCodeAt(0));)++parser_index,"\\"===ch&&parser_index<parser_length?throwError({},MessageUnexpectedToken,ILLEGAL):(flags+=ch,str+=ch);return flags.search(/[^gimuy]/g)>=0&&throwError({},MessageInvalidRegExp,flags),{value:flags,literal:str}}(),value=function testRegExp(pattern,flags){var tmp=pattern;flags.indexOf("u")>=0&&(tmp=tmp.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function($0,$1){if(parseInt($1,16)<=1114111)return"x";throwError({},MessageInvalidRegExp)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(tmp)}catch(e){throwError({},MessageInvalidRegExp)}try{return new RegExp(pattern,flags)}catch(exception){return null}}(body.value,flags.value),{literal:body.literal+flags.literal,value:value,regex:{pattern:body.value,flags:flags.value},start:start,end:parser_index}}function advance(){var ch;return skipComment(),parser_index>=parser_length?{type:TokenEOF,start:parser_index,end:parser_index}:isIdentifierStart(ch=parser_source.charCodeAt(parser_index))?scanIdentifier():40===ch||41===ch||59===ch?scanPunctuator():39===ch||34===ch?function scanStringLiteral(){var quote,start,ch,code,str="",octal=!1;for(assert("'"===(quote=parser_source[parser_index])||'"'===quote,"String literal must starts with a quote"),start=parser_index,++parser_index;parser_index<parser_length;){if((ch=parser_source[parser_index++])===quote){quote="";break}if("\\"===ch)if((ch=parser_source[parser_index++])&&isLineTerminator(ch.charCodeAt(0)))"\r"===ch&&"\n"===parser_source[parser_index]&&++parser_index;else switch(ch){case"u":case"x":"{"===parser_source[parser_index]?(++parser_index,str+=scanUnicodeCodePointEscape()):str+=scanHexEscape(ch);break;case"n":str+="\n";break;case"r":str+="\r";break;case"t":str+="\t";break;case"b":str+="\b";break;case"f":str+="\f";break;case"v":str+="\v";break;default:isOctalDigit(ch)?(0!==(code="01234567".indexOf(ch))&&(octal=!0),parser_index<parser_length&&isOctalDigit(parser_source[parser_index])&&(octal=!0,code=8*code+"01234567".indexOf(parser_source[parser_index++]),"0123".indexOf(ch)>=0&&parser_index<parser_length&&isOctalDigit(parser_source[parser_index])&&(code=8*code+"01234567".indexOf(parser_source[parser_index++]))),str+=String.fromCharCode(code)):str+=ch}else{if(isLineTerminator(ch.charCodeAt(0)))break;str+=ch}}return""!==quote&&throwError({},MessageUnexpectedToken,ILLEGAL),{type:TokenStringLiteral,value:str,octal:octal,start:start,end:parser_index}}():46===ch?isDecimalDigit(parser_source.charCodeAt(parser_index+1))?scanNumericLiteral():scanPunctuator():isDecimalDigit(ch)?scanNumericLiteral():scanPunctuator()}function lex(){var token;return parser_index=(token=lookahead).end,lookahead=advance(),parser_index=token.end,token}function peek(){var pos;pos=parser_index,lookahead=advance(),parser_index=pos}function finishBinaryExpression(operator,left,right){var node=new ASTNode("||"===operator||"&&"===operator?SyntaxLogicalExpression:SyntaxBinaryExpression);return node.operator=operator,node.left=left,node.right=right,node}function finishCallExpression(callee,args){var node=new ASTNode(SyntaxCallExpression);return node.callee=callee,node.arguments=args,node}function finishIdentifier(name){var node=new ASTNode(SyntaxIdentifier);return node.name=name,node}function finishLiteral(token){var node=new ASTNode(SyntaxLiteral);return node.value=token.value,node.raw=parser_source.slice(token.start,token.end),token.regex&&("//"===node.raw&&(node.raw="/(?:)/"),node.regex=token.regex),node}function finishMemberExpression(accessor,object,property){var node=new ASTNode(SyntaxMemberExpression);return node.computed="["===accessor,node.object=object,node.property=property,node.computed||(property.member=!0),node}function finishProperty(kind,key,value){var node=new ASTNode(SyntaxProperty);return node.key=key,node.value=value,node.kind=kind,node}function throwError(token,messageFormat){var error,args=Array.prototype.slice.call(arguments,2),msg=messageFormat.replace(/%(\d)/g,(function(whole,index){return assert(index<args.length,"Message reference must be in range"),args[index]}));throw(error=new Error(msg)).index=parser_index,error.description=msg,error}function throwUnexpected(token){token.type===TokenEOF&&throwError(token,MessageUnexpectedEOS),token.type===TokenNumericLiteral&&throwError(token,MessageUnexpectedNumber),token.type===TokenStringLiteral&&throwError(token,MessageUnexpectedString),token.type===TokenIdentifier&&throwError(token,MessageUnexpectedIdentifier),token.type===TokenKeyword&&throwError(token,MessageUnexpectedReserved),throwError(token,MessageUnexpectedToken,token.value)}function expect(value){var token=lex();token.type===TokenPunctuator&&token.value===value||throwUnexpected(token)}function match(value){return lookahead.type===TokenPunctuator&&lookahead.value===value}function matchKeyword(keyword){return lookahead.type===TokenKeyword&&lookahead.value===keyword}function parseArrayInitialiser(){var elements=[];for(parser_index=lookahead.start,expect("[");!match("]");)match(",")?(lex(),elements.push(null)):(elements.push(parseConditionalExpression()),match("]")||expect(","));return lex(),function finishArrayExpression(elements){var node=new ASTNode(SyntaxArrayExpression);return node.elements=elements,node}(elements)}function parseObjectPropertyKey(){var token;return parser_index=lookahead.start,(token=lex()).type===TokenStringLiteral||token.type===TokenNumericLiteral?(token.octal&&throwError(token,MessageStrictOctalLiteral),finishLiteral(token)):finishIdentifier(token.value)}function parseObjectProperty(){var token,key,id;return parser_index=lookahead.start,(token=lookahead).type===TokenIdentifier?(id=parseObjectPropertyKey(),expect(":"),finishProperty("init",id,parseConditionalExpression())):token.type!==TokenEOF&&token.type!==TokenPunctuator?(key=parseObjectPropertyKey(),expect(":"),finishProperty("init",key,parseConditionalExpression())):void throwUnexpected(token)}function parseObjectInitialiser(){var property,key,properties=[],map={},toString=String;for(parser_index=lookahead.start,expect("{");!match("}");)key="$"+((property=parseObjectProperty()).key.type===SyntaxIdentifier?property.key.name:toString(property.key.value)),Object.prototype.hasOwnProperty.call(map,key)?throwError({},MessageStrictDuplicateProperty):map[key]=!0,properties.push(property),match("}")||expect(",");return expect("}"),function finishObjectExpression(properties){var node=new ASTNode(SyntaxObjectExpression);return node.properties=properties,node}(properties)}var legalKeywords={if:1,this:1};function parsePrimaryExpression(){var type,token,expr;if(match("("))return function parseGroupExpression(){var expr;return expect("("),expr=parseExpression(),expect(")"),expr}();if(match("["))return parseArrayInitialiser();if(match("{"))return parseObjectInitialiser();if(type=lookahead.type,parser_index=lookahead.start,type===TokenIdentifier||legalKeywords[lookahead.value])expr=finishIdentifier(lex().value);else if(type===TokenStringLiteral||type===TokenNumericLiteral)lookahead.octal&&throwError(lookahead,MessageStrictOctalLiteral),expr=finishLiteral(lex());else{if(type===TokenKeyword)throw new Error(DISABLED);type===TokenBooleanLiteral?((token=lex()).value="true"===token.value,expr=finishLiteral(token)):type===TokenNullLiteral?((token=lex()).value=null,expr=finishLiteral(token)):match("/")||match("/=")?(expr=finishLiteral(scanRegExp()),peek()):throwUnexpected(lex())}return expr}function parseArguments(){var args=[];if(expect("("),!match(")"))for(;parser_index<parser_length&&(args.push(parseConditionalExpression()),!match(")"));)expect(",");return expect(")"),args}function parseNonComputedProperty(){var token;return parser_index=lookahead.start,function isIdentifierName(token){return token.type===TokenIdentifier||token.type===TokenKeyword||token.type===TokenBooleanLiteral||token.type===TokenNullLiteral}(token=lex())||throwUnexpected(token),finishIdentifier(token.value)}function parseComputedMember(){var expr;return expect("["),expr=parseExpression(),expect("]"),expr}function parsePostfixExpression(){var expr=function parseLeftHandSideExpressionAllowCall(){var expr;for(expr=parsePrimaryExpression();;)if(match("."))expect("."),expr=finishMemberExpression(".",expr,parseNonComputedProperty());else if(match("("))expr=finishCallExpression(expr,parseArguments());else{if(!match("["))break;expr=finishMemberExpression("[",expr,parseComputedMember())}return expr}();if(lookahead.type===TokenPunctuator&&(match("++")||match("--")))throw new Error(DISABLED);return expr}function parseUnaryExpression(){var token,expr;if(lookahead.type!==TokenPunctuator&&lookahead.type!==TokenKeyword)expr=parsePostfixExpression();else{if(match("++")||match("--"))throw new Error(DISABLED);if(match("+")||match("-")||match("~")||match("!"))token=lex(),expr=parseUnaryExpression(),expr=function finishUnaryExpression(operator,argument){var node=new ASTNode(SyntaxUnaryExpression);return node.operator=operator,node.argument=argument,node.prefix=!0,node}(token.value,expr);else{if(matchKeyword("delete")||matchKeyword("void")||matchKeyword("typeof"))throw new Error(DISABLED);expr=parsePostfixExpression()}}return expr}function binaryPrecedence(token){var prec=0;if(token.type!==TokenPunctuator&&token.type!==TokenKeyword)return 0;switch(token.value){case"||":prec=1;break;case"&&":prec=2;break;case"|":prec=3;break;case"^":prec=4;break;case"&":prec=5;break;case"==":case"!=":case"===":case"!==":prec=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":prec=7;break;case"<<":case">>":case">>>":prec=8;break;case"+":case"-":prec=9;break;case"*":case"/":case"%":prec=11}return prec}function parseConditionalExpression(){var expr,consequent;return expr=function parseBinaryExpression(){var marker,markers,expr,token,prec,stack,right,operator,left,i;if(marker=lookahead,left=parseUnaryExpression(),0===(prec=binaryPrecedence(token=lookahead)))return left;for(token.prec=prec,lex(),markers=[marker,lookahead],stack=[left,token,right=parseUnaryExpression()];(prec=binaryPrecedence(lookahead))>0;){for(;stack.length>2&&prec<=stack[stack.length-2].prec;)right=stack.pop(),operator=stack.pop().value,left=stack.pop(),markers.pop(),expr=finishBinaryExpression(operator,left,right),stack.push(expr);(token=lex()).prec=prec,stack.push(token),markers.push(lookahead),expr=parseUnaryExpression(),stack.push(expr)}for(expr=stack[i=stack.length-1],markers.pop();i>1;)markers.pop(),expr=finishBinaryExpression(stack[i-1].value,stack[i-2],expr),i-=2;return expr}(),match("?")&&(lex(),consequent=parseConditionalExpression(),expect(":"),expr=function finishConditionalExpression(test,consequent,alternate){var node=new ASTNode(SyntaxConditionalExpression);return node.test=test,node.consequent=consequent,node.alternate=alternate,node}(expr,consequent,parseConditionalExpression())),expr}function parseExpression(){var expr=parseConditionalExpression();if(match(","))throw new Error(DISABLED);return expr}var parser=function(code){parser_index=0,parser_length=(parser_source=code).length,lookahead=null,peek();var expr=parseExpression();if(lookahead.type!==TokenEOF)throw new Error("Unexpect token after expression.");return expr},src_constants={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},src_functions=function(codegen){function fn(name,cast,type){return function(args){return function fncall(name,args,cast,type){var obj=codegen(args[0]);return cast&&(obj=cast+"("+obj+")",0===cast.lastIndexOf("new ",0)&&(obj="("+obj+")")),obj+"."+name+(type<0?"":0===type?"()":"("+args.slice(1).map(codegen).join(",")+")")}(name,args,cast,type)}}var DATE="new Date";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(args){args.length<3&&Object(vega_util.n)("Missing arguments to clamp function."),args.length>3&&Object(vega_util.n)("Too many arguments to clamp function.");var a=args.map(codegen);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:DATE,date:fn("getDate",DATE,0),day:fn("getDay",DATE,0),year:fn("getFullYear",DATE,0),month:fn("getMonth",DATE,0),hours:fn("getHours",DATE,0),minutes:fn("getMinutes",DATE,0),seconds:fn("getSeconds",DATE,0),milliseconds:fn("getMilliseconds",DATE,0),time:fn("getTime",DATE,0),timezoneoffset:fn("getTimezoneOffset",DATE,0),utcdate:fn("getUTCDate",DATE,0),utcday:fn("getUTCDay",DATE,0),utcyear:fn("getUTCFullYear",DATE,0),utcmonth:fn("getUTCMonth",DATE,0),utchours:fn("getUTCHours",DATE,0),utcminutes:fn("getUTCMinutes",DATE,0),utcseconds:fn("getUTCSeconds",DATE,0),utcmilliseconds:fn("getUTCMilliseconds",DATE,0),length:fn("length",null,-1),join:fn("join",null),indexof:fn("indexOf",null),lastindexof:fn("lastIndexOf",null),slice:fn("slice",null),reverse:function(args){return"("+codegen(args[0])+").slice().reverse()"},parseFloat:"parseFloat",parseInt:"parseInt",upper:fn("toUpperCase","String",0),lower:fn("toLowerCase","String",0),substring:fn("substring","String"),split:fn("split","String"),replace:fn("replace","String"),trim:fn("trim","String",0),regexp:"RegExp",test:fn("test","RegExp"),if:function(args){args.length<3&&Object(vega_util.n)("Missing arguments to if function."),args.length>3&&Object(vega_util.n)("Too many arguments to if function.");var a=args.map(codegen);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}};const Intersect="intersect",Union="union",VlMulti="vlMulti",Or="or",And="and";var TYPE_ENUM="E",TYPE_RANGE_INC="R",TYPE_RANGE_EXC="R-E",TYPE_RANGE_LE="R-LE",TYPE_RANGE_RE="R-RE",UNIT_INDEX="index:unit";function testPoint(datum,entry){for(var dval,f,fields=entry.fields,values=entry.values,n=fields.length,i=0;i<n;++i)if((f=fields[i]).getter=vega_util.t.getter||Object(vega_util.t)(f.field),dval=f.getter(datum),Object(vega_util.C)(dval)&&(dval=Object(vega_util.bb)(dval)),Object(vega_util.C)(values[i])&&(values[i]=Object(vega_util.bb)(values[i])),Object(vega_util.C)(values[i][0])&&(values[i]=values[i].map(vega_util.bb)),f.type===TYPE_ENUM){if(Object(vega_util.A)(values[i])?values[i].indexOf(dval)<0:dval!==values[i])return!1}else if(f.type===TYPE_RANGE_INC){if(!Object(vega_util.z)(dval,values[i]))return!1}else if(f.type===TYPE_RANGE_RE){if(!Object(vega_util.z)(dval,values[i],!0,!1))return!1}else if(f.type===TYPE_RANGE_EXC){if(!Object(vega_util.z)(dval,values[i],!1,!1))return!1}else if(f.type===TYPE_RANGE_LE&&!Object(vega_util.z)(dval,values[i],!1,!0))return!1;return!0}var selectionResolve_ops={E_union:function(base,value){if(!base.length)return value;for(var i=0,n=value.length;i<n;++i)base.indexOf(value[i])<0&&base.push(value[i]);return base},E_intersect:function(base,value){return base.length?base.filter((function(v){return value.indexOf(v)>=0})):value},R_union:function(base,value){var lo=Object(vega_util.bb)(value[0]),hi=Object(vega_util.bb)(value[1]);return lo>hi&&(lo=value[1],hi=value[0]),base.length?(base[0]>lo&&(base[0]=lo),base[1]<hi&&(base[1]=hi),base):[lo,hi]},R_intersect:function(base,value){var lo=Object(vega_util.bb)(value[0]),hi=Object(vega_util.bb)(value[1]);return lo>hi&&(lo=value[1],hi=value[0]),base.length?hi<base[0]||base[1]<lo?[]:(base[0]<lo&&(base[0]=lo),base[1]>hi&&(base[1]=hi),base):[lo,hi]}};const DataPrefix=":",IndexPrefix="@";function selectionVisitor(name,args,scope,params){args[0].type!==Literal&&Object(vega_util.n)("First argument to selection functions must be a string literal.");const data=args[0].value,op=args.length>=2&&Object(vega_util.T)(args).value,indexName=IndexPrefix+"unit",dataName=DataPrefix+data;op!==Intersect||Object(vega_util.v)(params,indexName)||(params[indexName]=scope.getData(data).indataRef(scope,"unit")),Object(vega_util.v)(params,dataName)||(params[dataName]=scope.getData(data).tuplesRef())}function channel_luminance_value(channelValue){const val=channelValue/255;return val<=.03928?val/12.92:Math.pow((val+.055)/1.055,2.4)}function luminance(color){const c=color_rgb(color);return.2126*channel_luminance_value(c.r)+.7152*channel_luminance_value(c.g)+.0722*channel_luminance_value(c.b)}function src_data_data(name){const data=this.context.data[name];return data?data.values.value:[]}const formatCache={};function format_formatter(type,method,specifier){let k=type+":"+specifier,e=formatCache[k];return e&&e[0]===method||(formatCache[k]=e=[method,method(specifier)]),e[1]}function src_format_timeFormat(_,specifier){return format_formatter("timeFormat",format_timeFormat,specifier)(_)}var dateObj=new Date(2e3,0,1);function format_time(month,day,specifier){return Number.isInteger(month)&&Number.isInteger(day)?(dateObj.setYear(2e3),dateObj.setMonth(month),dateObj.setDate(day),src_format_timeFormat(dateObj,specifier)):""}function getScale(name,ctx){let s;return Object(vega_util.D)(name)?name:Object(vega_util.H)(name)?(s=ctx.scales[name])&&s.value:void 0}var area_lambda00,phi00,area_lambda0,area_cosPhi0,area_sinPhi0,area_areaRingSum=adder(),area_areaSum=adder(),area_areaStream={point:noop_noop,lineStart:noop_noop,lineEnd:noop_noop,polygonStart:function(){area_areaRingSum.reset(),area_areaStream.lineStart=area_areaRingStart,area_areaStream.lineEnd=area_areaRingEnd},polygonEnd:function(){var areaRing=+area_areaRingSum;area_areaSum.add(areaRing<0?math_tau+areaRing:areaRing),this.lineStart=this.lineEnd=this.point=noop_noop},sphere:function(){area_areaSum.add(math_tau)}};function area_areaRingStart(){area_areaStream.point=area_areaPointFirst}function area_areaRingEnd(){area_areaPoint(area_lambda00,phi00)}function area_areaPointFirst(lambda,phi){area_areaStream.point=area_areaPoint,area_lambda00=lambda,phi00=phi,area_lambda0=lambda*=radians,area_cosPhi0=src_math_cos(phi=(phi*=radians)/2+quarterPi),area_sinPhi0=src_math_sin(phi)}function area_areaPoint(lambda,phi){var dLambda=(lambda*=radians)-area_lambda0,sdLambda=dLambda>=0?1:-1,adLambda=sdLambda*dLambda,cosPhi=src_math_cos(phi=(phi*=radians)/2+quarterPi),sinPhi=src_math_sin(phi),k=area_sinPhi0*sinPhi,u=area_cosPhi0*cosPhi+k*src_math_cos(adLambda),v=k*sdLambda*src_math_sin(adLambda);area_areaRingSum.add(math_atan2(v,u)),area_lambda0=lambda,area_cosPhi0=cosPhi,area_sinPhi0=sinPhi}var bounds_lambda0,bounds_phi0,bounds_lambda1,bounds_phi1,bounds_lambda2,bounds_lambda00,bounds_phi00,bounds_p0,ranges,bounds_range,deltaSum=adder(),bounds_boundsStream={point:bounds_boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){bounds_boundsStream.point=boundsRingPoint,bounds_boundsStream.lineStart=boundsRingStart,bounds_boundsStream.lineEnd=boundsRingEnd,deltaSum.reset(),area_areaStream.polygonStart()},polygonEnd:function(){area_areaStream.polygonEnd(),bounds_boundsStream.point=bounds_boundsPoint,bounds_boundsStream.lineStart=boundsLineStart,bounds_boundsStream.lineEnd=boundsLineEnd,area_areaRingSum<0?(bounds_lambda0=-(bounds_lambda1=180),bounds_phi0=-(bounds_phi1=90)):deltaSum>src_math_epsilon?bounds_phi1=90:deltaSum<-src_math_epsilon&&(bounds_phi0=-90),bounds_range[0]=bounds_lambda0,bounds_range[1]=bounds_lambda1},sphere:function(){bounds_lambda0=-(bounds_lambda1=180),bounds_phi0=-(bounds_phi1=90)}};function bounds_boundsPoint(lambda,phi){ranges.push(bounds_range=[bounds_lambda0=lambda,bounds_lambda1=lambda]),phi<bounds_phi0&&(bounds_phi0=phi),phi>bounds_phi1&&(bounds_phi1=phi)}function bounds_linePoint(lambda,phi){var p=cartesian_cartesian([lambda*radians,phi*radians]);if(bounds_p0){var normal=cartesianCross(bounds_p0,p),inflection=cartesianCross([normal[1],-normal[0],0],normal);cartesianNormalizeInPlace(inflection),inflection=cartesian_spherical(inflection);var phii,delta=lambda-bounds_lambda2,sign=delta>0?1:-1,lambdai=inflection[0]*math_degrees*sign,antimeridian=math_abs(delta)>180;antimeridian^(sign*bounds_lambda2<lambdai&&lambdai<sign*lambda)?(phii=inflection[1]*math_degrees)>bounds_phi1&&(bounds_phi1=phii):antimeridian^(sign*bounds_lambda2<(lambdai=(lambdai+360)%360-180)&&lambdai<sign*lambda)?(phii=-inflection[1]*math_degrees)<bounds_phi0&&(bounds_phi0=phii):(phi<bounds_phi0&&(bounds_phi0=phi),phi>bounds_phi1&&(bounds_phi1=phi)),antimeridian?lambda<bounds_lambda2?bounds_angle(bounds_lambda0,lambda)>bounds_angle(bounds_lambda0,bounds_lambda1)&&(bounds_lambda1=lambda):bounds_angle(lambda,bounds_lambda1)>bounds_angle(bounds_lambda0,bounds_lambda1)&&(bounds_lambda0=lambda):bounds_lambda1>=bounds_lambda0?(lambda<bounds_lambda0&&(bounds_lambda0=lambda),lambda>bounds_lambda1&&(bounds_lambda1=lambda)):lambda>bounds_lambda2?bounds_angle(bounds_lambda0,lambda)>bounds_angle(bounds_lambda0,bounds_lambda1)&&(bounds_lambda1=lambda):bounds_angle(lambda,bounds_lambda1)>bounds_angle(bounds_lambda0,bounds_lambda1)&&(bounds_lambda0=lambda)}else ranges.push(bounds_range=[bounds_lambda0=lambda,bounds_lambda1=lambda]);phi<bounds_phi0&&(bounds_phi0=phi),phi>bounds_phi1&&(bounds_phi1=phi),bounds_p0=p,bounds_lambda2=lambda}function boundsLineStart(){bounds_boundsStream.point=bounds_linePoint}function boundsLineEnd(){bounds_range[0]=bounds_lambda0,bounds_range[1]=bounds_lambda1,bounds_boundsStream.point=bounds_boundsPoint,bounds_p0=null}function boundsRingPoint(lambda,phi){if(bounds_p0){var delta=lambda-bounds_lambda2;deltaSum.add(math_abs(delta)>180?delta+(delta>0?360:-360):delta)}else bounds_lambda00=lambda,bounds_phi00=phi;area_areaStream.point(lambda,phi),bounds_linePoint(lambda,phi)}function boundsRingStart(){area_areaStream.lineStart()}function boundsRingEnd(){boundsRingPoint(bounds_lambda00,bounds_phi00),area_areaStream.lineEnd(),math_abs(deltaSum)>src_math_epsilon&&(bounds_lambda0=-(bounds_lambda1=180)),bounds_range[0]=bounds_lambda0,bounds_range[1]=bounds_lambda1,bounds_p0=null}function bounds_angle(lambda0,lambda1){return(lambda1-=lambda0)<0?lambda1+360:lambda1}function rangeCompare(a,b){return a[0]-b[0]}function rangeContains(range,x){return range[0]<=range[1]?range[0]<=x&&x<=range[1]:x<range[0]||range[1]<x}var W0,W1,src_centroid_X0,src_centroid_Y0,centroid_Z0,src_centroid_X1,src_centroid_Y1,centroid_Z1,src_centroid_X2,centroid_Y2,centroid_Z2,centroid_lambda00,centroid_phi00,src_centroid_x0,src_centroid_y0,z0,centroid_centroidStream={sphere:noop_noop,point:centroid_centroidPoint,lineStart:centroid_centroidLineStart,lineEnd:centroid_centroidLineEnd,polygonStart:function(){centroid_centroidStream.lineStart=centroid_centroidRingStart,centroid_centroidStream.lineEnd=centroid_centroidRingEnd},polygonEnd:function(){centroid_centroidStream.lineStart=centroid_centroidLineStart,centroid_centroidStream.lineEnd=centroid_centroidLineEnd}};function centroid_centroidPoint(lambda,phi){lambda*=radians;var cosPhi=src_math_cos(phi*=radians);centroidPointCartesian(cosPhi*src_math_cos(lambda),cosPhi*src_math_sin(lambda),src_math_sin(phi))}function centroidPointCartesian(x,y,z){src_centroid_X0+=(x-src_centroid_X0)/++W0,src_centroid_Y0+=(y-src_centroid_Y0)/W0,centroid_Z0+=(z-centroid_Z0)/W0}function centroid_centroidLineStart(){centroid_centroidStream.point=centroidLinePointFirst}function centroidLinePointFirst(lambda,phi){lambda*=radians;var cosPhi=src_math_cos(phi*=radians);src_centroid_x0=cosPhi*src_math_cos(lambda),src_centroid_y0=cosPhi*src_math_sin(lambda),z0=src_math_sin(phi),centroid_centroidStream.point=centroidLinePoint,centroidPointCartesian(src_centroid_x0,src_centroid_y0,z0)}function centroidLinePoint(lambda,phi){lambda*=radians;var cosPhi=src_math_cos(phi*=radians),x=cosPhi*src_math_cos(lambda),y=cosPhi*src_math_sin(lambda),z=src_math_sin(phi),w=math_atan2(math_sqrt((w=src_centroid_y0*z-z0*y)*w+(w=z0*x-src_centroid_x0*z)*w+(w=src_centroid_x0*y-src_centroid_y0*x)*w),src_centroid_x0*x+src_centroid_y0*y+z0*z);W1+=w,src_centroid_X1+=w*(src_centroid_x0+(src_centroid_x0=x)),src_centroid_Y1+=w*(src_centroid_y0+(src_centroid_y0=y)),centroid_Z1+=w*(z0+(z0=z)),centroidPointCartesian(src_centroid_x0,src_centroid_y0,z0)}function centroid_centroidLineEnd(){centroid_centroidStream.point=centroid_centroidPoint}function centroid_centroidRingStart(){centroid_centroidStream.point=centroidRingPointFirst}function centroid_centroidRingEnd(){centroidRingPoint(centroid_lambda00,centroid_phi00),centroid_centroidStream.point=centroid_centroidPoint}function centroidRingPointFirst(lambda,phi){centroid_lambda00=lambda,centroid_phi00=phi,lambda*=radians,phi*=radians,centroid_centroidStream.point=centroidRingPoint;var cosPhi=src_math_cos(phi);src_centroid_x0=cosPhi*src_math_cos(lambda),src_centroid_y0=cosPhi*src_math_sin(lambda),z0=src_math_sin(phi),centroidPointCartesian(src_centroid_x0,src_centroid_y0,z0)}function centroidRingPoint(lambda,phi){lambda*=radians;var cosPhi=src_math_cos(phi*=radians),x=cosPhi*src_math_cos(lambda),y=cosPhi*src_math_sin(lambda),z=src_math_sin(phi),cx=src_centroid_y0*z-z0*y,cy=z0*x-src_centroid_x0*z,cz=src_centroid_x0*y-src_centroid_y0*x,m=math_sqrt(cx*cx+cy*cy+cz*cz),w=math_asin(m),v=m&&-w/m;src_centroid_X2+=v*cx,centroid_Y2+=v*cy,centroid_Z2+=v*cz,W1+=w,src_centroid_X1+=w*(src_centroid_x0+(src_centroid_x0=x)),src_centroid_Y1+=w*(src_centroid_y0+(src_centroid_y0=y)),centroid_Z1+=w*(z0+(z0=z)),centroidPointCartesian(src_centroid_x0,src_centroid_y0,z0)}function geoMethod(methodName,globalMethod){return function(projection,geojson,group){if(projection){const p=getScale(projection,(group||this).context);return p&&p.path[methodName](geojson)}return globalMethod(geojson)}}const geoArea=geoMethod("area",(function(object){return area_areaSum.reset(),src_stream(object,area_areaStream),2*area_areaSum})),geoBounds=geoMethod("bounds",(function(feature){var i,n,a,b,merged,deltaMax,delta;if(bounds_phi1=bounds_lambda1=-(bounds_lambda0=bounds_phi0=1/0),ranges=[],src_stream(feature,bounds_boundsStream),n=ranges.length){for(ranges.sort(rangeCompare),i=1,merged=[a=ranges[0]];i<n;++i)rangeContains(a,(b=ranges[i])[0])||rangeContains(a,b[1])?(bounds_angle(a[0],b[1])>bounds_angle(a[0],a[1])&&(a[1]=b[1]),bounds_angle(b[0],a[1])>bounds_angle(a[0],a[1])&&(a[0]=b[0])):merged.push(a=b);for(deltaMax=-1/0,i=0,a=merged[n=merged.length-1];i<=n;a=b,++i)b=merged[i],(delta=bounds_angle(a[1],b[0]))>deltaMax&&(deltaMax=delta,bounds_lambda0=b[0],bounds_lambda1=a[1])}return ranges=bounds_range=null,bounds_lambda0===1/0||bounds_phi0===1/0?[[NaN,NaN],[NaN,NaN]]:[[bounds_lambda0,bounds_phi0],[bounds_lambda1,bounds_phi1]]})),geoCentroid=geoMethod("centroid",(function(object){W0=W1=src_centroid_X0=src_centroid_Y0=centroid_Z0=src_centroid_X1=src_centroid_Y1=centroid_Z1=src_centroid_X2=centroid_Y2=centroid_Z2=0,src_stream(object,centroid_centroidStream);var x=src_centroid_X2,y=centroid_Y2,z=centroid_Z2,m=x*x+y*y+z*z;return m<1e-12&&(x=src_centroid_X1,y=src_centroid_Y1,z=centroid_Z1,W1<src_math_epsilon&&(x=src_centroid_X0,y=src_centroid_Y0,z=centroid_Z0),(m=x*x+y*y+z*z)<1e-12)?[NaN,NaN]:[math_atan2(y,x)*math_degrees,math_asin(z/math_sqrt(m))*math_degrees]}));function src_log_log(df,method,args){try{df[method].apply(df,["EXPRESSION"].concat([].slice.call(args)))}catch(err){df.warn(err)}return args[args.length-1]}function equal(a,b){return a===b||a!=a&&b!=b||(Object(vega_util.A)(a)?!(!Object(vega_util.A)(b)||a.length!==b.length)&&function equalArray(a,b){for(let i=0,n=a.length;i<n;++i)if(!equal(a[i],b[i]))return!1;return!0}(a,b):!(!Object(vega_util.F)(a)||!Object(vega_util.F)(b))&&equalObject(a,b))}function equalObject(a,b){for(let key in a)if(!equal(a[key],b[key]))return!1;return!0}function removePredicate(props){return _=>equalObject(props,_)}const EMPTY={};function tree_datum(d){return d.data}function treeNodes(name,context){const tree=src_data_data.call(context,name);return tree.root&&tree.root.lookup||EMPTY}const _window="undefined"!=typeof window&&window||null;const prefix_DataPrefix=":",prefix_IndexPrefix="@",ScalePrefix="%";function dataVisitor(name,args,scope,params){args[0].type!==Literal&&Object(vega_util.n)("First argument to data functions must be a string literal.");const data=args[0].value,dataName=prefix_DataPrefix+data;if(!Object(vega_util.v)(dataName,params))try{params[dataName]=scope.getData(data).tuplesRef()}catch(err){}}function scaleVisitor(name,args,scope,params){if(args[0].type===Literal)addScaleDependency(scope,params,args[0].value);else if(args[0].type===ast_Identifier)for(name in scope.scales)addScaleDependency(scope,params,name)}function addScaleDependency(scope,params,name){const scaleName=ScalePrefix+name;if(!Object(vega_util.v)(params,scaleName))try{params[scaleName]=scope.scaleRef(name)}catch(err){}}const functionContext={random:function(){return random_random()},cumulativeNormal:cumulativeNormal,cumulativeLogNormal:cumulativeLogNormal,cumulativeUniform:cumulativeUniform,densityNormal:densityNormal,densityLogNormal:densityLogNormal,densityUniform:densityUniform,quantileNormal:quantileNormal,quantileLogNormal:quantileLogNormal,quantileUniform:quantileUniform,sampleNormal:sampleNormal,sampleLogNormal:sampleLogNormal,sampleUniform:sampleUniform,isArray:vega_util.A,isBoolean:vega_util.B,isDate:vega_util.C,isDefined:function(_){return void 0!==_},isNumber:vega_util.E,isObject:vega_util.F,isRegExp:vega_util.G,isString:vega_util.H,isTuple:isTuple,isValid:function(_){return null!=_&&_==_},toBoolean:vega_util.Z,toDate:vega_util.ab,toNumber:vega_util.bb,toString:vega_util.db,flush:vega_util.u,lerp:vega_util.J,merge:function(){var args=[].slice.call(arguments);return args.unshift({}),vega_util.o.apply(null,args)},pad:vega_util.O,peek:vega_util.T,span:vega_util.W,inrange:vega_util.z,truncate:vega_util.eb,rgb:color_rgb,lab:lab,hcl:hcl,hsl:hsl,luminance:luminance,contrast:function contrast(color1,color2){const lum1=luminance(color1),lum2=luminance(color2);return(Math.max(lum1,lum2)+.05)/(Math.min(lum1,lum2)+.05)},sequence:src_range,format:function format_format(_,specifier){return format_formatter("format",defaultLocale_format,specifier)(_)},utcFormat:function src_format_utcFormat(_,specifier){return format_formatter("utcFormat",format_utcFormat,specifier)(_)},utcParse:function format_utcParse(_,specifier){return format_formatter("utcParse",defaultLocale_utcParse,specifier)(_)},utcOffset:utcOffset,utcSequence:utcSequence,timeFormat:src_format_timeFormat,timeParse:function format_timeParse(_,specifier){return format_formatter("timeParse",defaultLocale_timeParse,specifier)(_)},timeOffset:timeOffset,timeSequence:timeSequence,timeUnitSpecifier:timeUnitSpecifier,monthFormat:function monthFormat(month){return format_time(month,1,"%B")},monthAbbrevFormat:function monthAbbrevFormat(month){return format_time(month,1,"%b")},dayFormat:function dayFormat(day){return format_time(0,2+day,"%A")},dayAbbrevFormat:function dayAbbrevFormat(day){return format_time(0,2+day,"%a")},quarter:vega_util.U,utcquarter:vega_util.gb,warn:function warn(){return src_log_log(this.context.dataflow,"warn",arguments)},info:function info(){return src_log_log(this.context.dataflow,"info",arguments)},debug:function debug(){return src_log_log(this.context.dataflow,"debug",arguments)},extent:vega_util.p,inScope:function(item){let group=this.context.group,value=!1;if(group)for(;item;){if(item===group){value=!0;break}item=item.mark.group}return value},intersect:function(b,opt,group){if(!b)return[];const[u,v]=b,box=(new Bounds).set(u[0],u[1],v[0],v[1]);return intersect_intersect(group||this.context.dataflow.scenegraph().root,box,function intersect_filter(opt){let p=null;if(opt){const types=Object(vega_util.i)(opt.marktype),names=Object(vega_util.i)(opt.markname);p=_=>(!types.length||types.some(t=>_.marktype===t))&&(!names.length||names.some(s=>_.name===s))}return p}(opt))},clampRange:vega_util.j,pinchDistance:function pinchDistance(event){const t=event.touches,dx=t[0].clientX-t[1].clientX,dy=t[0].clientY-t[1].clientY;return Math.sqrt(dx*dx+dy*dy)},pinchAngle:function pinchAngle(event){const t=event.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function screen(){return _window?_window.screen:{}},containerSize:function containerSize(){const view=this.context.dataflow,el=view.container&&view.container();return el?[el.clientWidth,el.clientHeight]:[void 0,void 0]},windowSize:function windowSize(){return _window?[_window.innerWidth,_window.innerHeight]:[void 0,void 0]},bandspace:function bandspace(count,paddingInner,paddingOuter){return bandSpace(count||0,paddingInner||0,paddingOuter||0)},setdata:function setdata(name,tuples){const df=this.context.dataflow,input=this.context.data[name].input;return df.pulse(input,df.changeset().remove(vega_util.fb).insert(tuples)),1},pathShape:function pathShape(path){let p=null;return function(context){return context?path_render(context,p=p||path_parse(path)):path}},panLinear:vega_util.P,panLog:vega_util.Q,panPow:vega_util.R,panSymlog:vega_util.S,zoomLinear:vega_util.kb,zoomLog:vega_util.lb,zoomPow:vega_util.mb,zoomSymlog:vega_util.nb,encode:function(item,name,retval){if(item){const df=this.context.dataflow,target=item.mark.source;df.pulse(target,df.changeset().encode(item,name))}return void 0!==retval?retval:item},modify:function(name,insert,remove,toggle,modify,values){let predicate,key,df=this.context.dataflow,data=this.context.data[name],input=data.input,changes=data.changes,stamp=df.stamp();if(!1===df._trigger||!(input.value.length||insert||toggle))return 0;if((!changes||changes.stamp<stamp)&&(data.changes=changes=df.changeset(),changes.stamp=stamp,df.runAfter((function(){data.modified=!0,df.pulse(input,changes).run()}),!0,1)),remove&&(predicate=!0===remove?vega_util.fb:Object(vega_util.A)(remove)||isTuple(remove)?remove:removePredicate(remove),changes.remove(predicate)),insert&&changes.insert(insert),toggle&&(predicate=removePredicate(toggle),input.value.some(predicate)?changes.remove(predicate):changes.insert(toggle)),modify)for(key in values)changes.modify(modify,key,values[key]);return 1}},eventFunctions=["view","item","group","xy","x","y"],eventPrefix="event.vega.",thisPrefix="this.",astVisitors={};function expressionFunction(name,fn,visitor){return 1===arguments.length?functionContext[name]:(functionContext[name]=fn,visitor&&(astVisitors[name]=visitor),codeGenerator&&(codeGenerator.functions[name]=thisPrefix+name),this)}expressionFunction("bandwidth",(function scale_bandwidth(name,group){const s=getScale(name,(group||this).context);return s&&s.bandwidth?s.bandwidth():0}),scaleVisitor),expressionFunction("copy",(function scale_copy(name,group){const s=getScale(name,(group||this).context);return s?s.copy():void 0}),scaleVisitor),expressionFunction("domain",(function scale_domain(name,group){const s=getScale(name,(group||this).context);return s?s.domain():[]}),scaleVisitor),expressionFunction("range",(function scale_range(name,group){const s=getScale(name,(group||this).context);return s&&s.range?s.range():[]}),scaleVisitor),expressionFunction("invert",(function scale_invert(name,range,group){const s=getScale(name,(group||this).context);return s?Object(vega_util.A)(range)?(s.invertRange||s.invert)(range):(s.invert||s.invertExtent)(range):void 0}),scaleVisitor),expressionFunction("scale",(function scale_scale(name,value,group){const s=getScale(name,(group||this).context);return s&&void 0!==value?s(value):void 0}),scaleVisitor),expressionFunction("gradient",(function(scale,p0,p1,count,group){scale=getScale(scale,(group||this).context);const gradient=Gradient(p0,p1);let stops=scale.domain(),min=stops[0],max=Object(vega_util.T)(stops),fraction=vega_util.x;return max-min?fraction=scaleFraction(scale,min,max):scale=(scale.interpolator?scales_scale("sequential")().interpolator(scale.interpolator()):scales_scale("linear")().interpolate(scale.interpolate()).range(scale.range())).domain([min=0,max=1]),scale.ticks&&(min!==(stops=scale.ticks(+count||15))[0]&&stops.unshift(min),max!==Object(vega_util.T)(stops)&&stops.push(max)),stops.forEach(_=>gradient.stop(fraction(_),scale(_))),gradient}),scaleVisitor),expressionFunction("geoArea",geoArea,scaleVisitor),expressionFunction("geoBounds",geoBounds,scaleVisitor),expressionFunction("geoCentroid",geoCentroid,scaleVisitor),expressionFunction("geoShape",(function geoShape(projection,geojson,group){const p=getScale(projection,(group||this).context);return function(context){return p?p.path.context(context)(geojson):""}}),scaleVisitor),expressionFunction("indata",(function indata(name,field,value){const index=this.context.data[name]["index:"+field],entry=index?index.value.get(value):void 0;return entry?entry.count:entry}),(function indataVisitor(name,args,scope,params){args[0].type!==Literal&&Object(vega_util.n)("First argument to indata must be a string literal."),args[1].type!==Literal&&Object(vega_util.n)("Second argument to indata must be a string literal.");const data=args[0].value,field=args[1].value,indexName=prefix_IndexPrefix+field;Object(vega_util.v)(indexName,params)||(params[indexName]=scope.getData(data).indataRef(scope,field))})),expressionFunction("data",src_data_data,dataVisitor),expressionFunction("treePath",(function treePath(name,source,target){const nodes=treeNodes(name,this),s=nodes[source],t=nodes[target];return s&&t?s.path(t).map(tree_datum):void 0}),dataVisitor),expressionFunction("treeAncestors",(function treeAncestors(name,node){const n=treeNodes(name,this)[node];return n?n.ancestors().map(tree_datum):void 0}),dataVisitor),expressionFunction("vlSelectionTest",(function selectionTest(name,datum,op){for(var entry,miss,count,unit,b,data=this.context.data[name],entries=data?data.values.value:[],unitIdx=data?data[UNIT_INDEX]&&data[UNIT_INDEX].value:void 0,intersect=op===Intersect,n=entries.length,i=0;i<n;++i)if(entry=entries[i],unitIdx&&intersect){if(-1===(count=(miss=miss||{})[unit=entry.unit]||0))continue;if(b=testPoint(datum,entry),miss[unit]=b?-1:++count,b&&1===unitIdx.size)return!0;if(!b&&count===unitIdx.get(unit).count)return!1}else if(intersect^(b=testPoint(datum,entry)))return b;return n&&intersect}),selectionVisitor),expressionFunction("vlSelectionResolve",(function selectionResolve(name,op,isMulti){for(var entry,fields,values,unit,field,res,resUnit,type,union,j,m,data=this.context.data[name],entries=data?data.values.value:[],resolved={},multiRes={},types={},n=entries.length,i=0;i<n;++i){for(unit=(entry=entries[i]).unit,fields=entry.fields,values=entry.values,j=0,m=fields.length;j<m;++j)field=fields[j],resUnit=(res=resolved[field.field]||(resolved[field.field]={}))[unit]||(res[unit]=[]),types[field.field]=type=field.type.charAt(0),union=selectionResolve_ops[type+"_union"],res[unit]=union(resUnit,Object(vega_util.i)(values[j]));isMulti&&(resUnit=multiRes[unit]||(multiRes[unit]=[])).push(Object(vega_util.i)(values).reduce((obj,curr,j)=>(obj[fields[j].field]=curr,obj),{}))}return op=op||Union,Object.keys(resolved).forEach((function(field){resolved[field]=Object.keys(resolved[field]).map(unit=>resolved[field][unit]).reduce((acc,curr)=>void 0===acc?curr:selectionResolve_ops[types[field]+"_"+op](acc,curr))})),entries=Object.keys(multiRes),isMulti&&entries.length&&(resolved[VlMulti]=op===Union?{[Or]:entries.reduce((acc,k)=>(acc.push.apply(acc,multiRes[k]),acc),[])}:{[And]:entries.map(k=>({[Or]:multiRes[k]}))}),resolved}),selectionVisitor);const codegenParams={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(id){return"_["+Object(vega_util.Y)("$"+id)+"]"},functions:function buildFunctions(codegen){const fn=src_functions(codegen);eventFunctions.forEach(name=>fn[name]=eventPrefix+name);for(let name in functionContext)fn[name]=thisPrefix+name;return fn},constants:src_constants,visitors:astVisitors};var codeGenerator=function(opt){var whitelist=(opt=opt||{}).whitelist?Object(vega_util.cb)(opt.whitelist):{},blacklist=opt.blacklist?Object(vega_util.cb)(opt.blacklist):{},constants=opt.constants||src_constants,functions=(opt.functions||src_functions)(visit),globalvar=opt.globalvar,fieldvar=opt.fieldvar,globals={},fields={},memberDepth=0,outputGlobal=Object(vega_util.D)(globalvar)?globalvar:function(id){return globalvar+'["'+id+'"]'};function visit(ast){if(Object(vega_util.H)(ast))return ast;var generator=Generators[ast.type];return null==generator&&Object(vega_util.n)("Unsupported type: "+ast.type),generator(ast)}var Generators={Literal:function(n){return n.raw},Identifier:function(n){var id=n.name;return memberDepth>0?id:Object(vega_util.v)(blacklist,id)?Object(vega_util.n)("Illegal identifier: "+id):Object(vega_util.v)(constants,id)?constants[id]:Object(vega_util.v)(whitelist,id)?id:(globals[id]=1,outputGlobal(id))},MemberExpression:function(n){var d=!n.computed,o=visit(n.object);d&&(memberDepth+=1);var p=visit(n.property);return o===fieldvar&&(fields[function stripQuotes(s){var n=s&&s.length-1;return n&&('"'===s[0]&&'"'===s[n]||"'"===s[0]&&"'"===s[n])?s.slice(1,-1):s}(p)]=1),d&&(memberDepth-=1),o+(d?"."+p:"["+p+"]")},CallExpression:function(n){"Identifier"!==n.callee.type&&Object(vega_util.n)("Illegal callee type: "+n.callee.type);var callee=n.callee.name,args=n.arguments,fn=Object(vega_util.v)(functions,callee)&&functions[callee];return fn||Object(vega_util.n)("Unrecognized function: "+callee),Object(vega_util.D)(fn)?fn(args):fn+"("+args.map(visit).join(",")+")"},ArrayExpression:function(n){return"["+n.elements.map(visit).join(",")+"]"},BinaryExpression:function(n){return"("+visit(n.left)+n.operator+visit(n.right)+")"},UnaryExpression:function(n){return"("+n.operator+visit(n.argument)+")"},ConditionalExpression:function(n){return"("+visit(n.test)+"?"+visit(n.consequent)+":"+visit(n.alternate)+")"},LogicalExpression:function(n){return"("+visit(n.left)+n.operator+visit(n.right)+")"},ObjectExpression:function(n){return"{"+n.properties.map(visit).join(",")+"}"},Property:function(n){memberDepth+=1;var k=visit(n.key);return memberDepth-=1,k+":"+visit(n.value)}};function codegen(ast){var result={code:visit(ast),globals:Object.keys(globals),fields:Object.keys(fields)};return globals={},fields={},result}return codegen.functions=functions,codegen.constants=constants,codegen}(codegenParams);function expression_expression(args,code,ctx){";"!==code[code.length-1]&&(code="return("+code+");");var fn=Function.apply(null,args.concat(code));return ctx&&ctx.functions?fn.bind(ctx.functions):fn}function eventExpression(code,ctx){return expression_expression(["event"],code,ctx)}function encodeExpression(code,ctx){return expression_expression(["item","_"],code,ctx)}function parseParameters(spec,ctx,params){var key,value;for(key in params=params||{},spec)value=spec[key],params[key]=Object(vega_util.A)(value)?value.map((function(v){return parseParameter(v,ctx,params)})):parseParameter(value,ctx,params);return params}function parseParameter(spec,ctx,params){if(!spec||!Object(vega_util.F)(spec))return spec;for(var p,i=0,n=PARSERS.length;i<n;++i)if(p=PARSERS[i],Object(vega_util.v)(spec,p.key))return p.parse(spec,ctx,params);return spec}var PARSERS=[{key:"$ref",parse:function getOperator(_,ctx){return ctx.get(_.$ref)||Object(vega_util.n)("Operator not defined: "+_.$ref)}},{key:"$key",parse:function getKey(_,ctx){var k="k:"+_.$key+"_"+!!_.$flat;return ctx.fn[k]||(ctx.fn[k]=Object(vega_util.I)(_.$key,_.$flat))}},{key:"$expr",parse:function getExpression(_,ctx,params){_.$params&&parseParameters(_.$params,ctx,params);var k="e:"+_.$expr+"_"+_.$name;return ctx.fn[k]||(ctx.fn[k]=Object(vega_util.f)(function parameterExpression(code,ctx){return expression_expression(["datum","_"],code,ctx)}(_.$expr,ctx),_.$fields,_.$name))}},{key:"$field",parse:function parameters_getField(_,ctx){if(!_.$field)return null;var k="f:"+_.$field+"_"+_.$name;return ctx.fn[k]||(ctx.fn[k]=Object(vega_util.t)(_.$field,_.$name))}},{key:"$encode",parse:function getEncode(_,ctx){var name,enc,spec=_.$encode,encode={};for(name in spec)enc=spec[name],encode[name]=Object(vega_util.f)(encodeExpression(enc.$expr,ctx),enc.$fields),encode[name].output=enc.$output;return encode}},{key:"$compare",parse:function getCompare(_,ctx){var k="c:"+_.$compare+"_"+_.$order,c=Object(vega_util.i)(_.$compare).map((function(_){return _&&_.$tupleid?tupleid:_}));return ctx.fn[k]||(ctx.fn[k]=Object(vega_util.k)(c,_.$order))}},{key:"$context",parse:function parameters_getContext(_,ctx){return ctx}},{key:"$subflow",parse:function getSubflow(_,ctx){var spec=_.$subflow;return function(dataflow,key,parent){var subctx=src_dataflow(spec,ctx.fork()),op=subctx.get(spec.operators[0].id),p=subctx.signals.parent;return p&&p.set(parent),op}}},{key:"$tupleid",parse:function getTupleId(){return tupleid}}];function canonicalType(type){return(type+"").toLowerCase()}var src_operator=function(spec,ctx){!function isOperator(type){return"operator"===canonicalType(type)}(spec.type)&&spec.type?ctx.transform(spec,spec.type):ctx.operator(spec,spec.update?function operatorExpression(code,ctx){return expression_expression(["_"],code,ctx)}(spec.update,ctx):null)};var src_update=function(spec,ctx){var srcid=Object(vega_util.F)(srcid=spec.source)?srcid.$ref:srcid,source=ctx.get(srcid),target=null,update=spec.update,params=void 0;source||Object(vega_util.n)("Source not defined: "+spec.source),target=spec.target&&spec.target.$expr?eventExpression(spec.target.$expr,ctx):ctx.get(spec.target),update&&update.$expr&&(update.$params&&(params=parseParameters(update.$params,ctx)),update=function handlerExpression(code,ctx){return expression_expression(["_","event"],code,ctx)}(update.$expr,ctx)),ctx.update(spec,source,target,update,params)},src_dataflow=function(spec,ctx){var operators=spec.operators||[];return spec.background&&(ctx.background=spec.background),spec.eventConfig&&(ctx.eventConfig=spec.eventConfig),operators.forEach((function(entry){src_operator(entry,ctx)})),operators.forEach((function(entry){!function parseOperatorParameters(spec,ctx){if(spec.params){var op=ctx.get(spec.id);op||Object(vega_util.n)("Invalid operator id: "+spec.id),ctx.dataflow.connect(op,op.parameters(parseParameters(spec.params,ctx),spec.react,spec.initonly))}}(entry,ctx)})),(spec.streams||[]).forEach((function(entry){!function(spec,ctx){var args,filter=null!=spec.filter?eventExpression(spec.filter,ctx):void 0,stream=null!=spec.stream?ctx.get(spec.stream):void 0;spec.source?stream=ctx.events(spec.source,spec.type,filter):spec.merge&&(stream=(args=spec.merge.map(ctx.get.bind(ctx)))[0].merge.apply(args[0],args.slice(1))),spec.between&&(args=spec.between.map(ctx.get.bind(ctx)),stream=stream.between(args[0],args[1])),spec.filter&&(stream=stream.filter(filter)),null!=spec.throttle&&(stream=stream.throttle(+spec.throttle)),null!=spec.debounce&&(stream=stream.debounce(+spec.debounce)),null==stream&&Object(vega_util.n)("Invalid stream definition: "+JSON.stringify(spec)),spec.consume&&stream.consume(!0),ctx.stream(spec,stream)}(entry,ctx)})),(spec.updates||[]).forEach((function(entry){src_update(entry,ctx)})),ctx.resolve()},state_SKIP={skip:!0};var src_context=function(df,transforms,functions){return new Context(df,transforms,functions)};function Context(df,transforms,functions){this.dataflow=df,this.transforms=transforms,this.events=df.events.bind(df),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},functions&&(this.functions=Object.create(functions),this.functions.context=this)}function ContextFork(ctx){this.dataflow=ctx.dataflow,this.transforms=ctx.transforms,this.functions=ctx.functions,this.events=ctx.events,this.signals=Object.create(ctx.signals),this.scales=Object.create(ctx.scales),this.nodes=Object.create(ctx.nodes),this.data=Object.create(ctx.data),this.fn=Object.create(ctx.fn),ctx.functions&&(this.functions=Object.create(ctx.functions),this.functions.context=this)}Context.prototype=ContextFork.prototype={fork:function(){var ctx=new ContextFork(this);return(this.subcontext||(this.subcontext=[])).push(ctx),ctx},get:function(id){return this.nodes[id]},set:function(id,node){return this.nodes[id]=node},add:function(spec,op){var data,ctx=this,df=ctx.dataflow;if(ctx.set(spec.id,op),function isCollect(type){return"collect"===canonicalType(type)}(spec.type)&&(data=spec.value)&&(data.$ingest?df.ingest(op,data.$ingest,data.$format):data.$request?df.preload(op,data.$request,data.$format):df.pulse(op,df.changeset().insert(data))),spec.root&&(ctx.root=op),spec.parent){var p=ctx.get(spec.parent.$ref);p?(df.connect(p,[op]),op.targets().add(p)):(ctx.unresolved=ctx.unresolved||[]).push((function(){p=ctx.get(spec.parent.$ref),df.connect(p,[op]),op.targets().add(p)}))}if(spec.signal&&(ctx.signals[spec.signal]=op),spec.scale&&(ctx.scales[spec.scale]=op),spec.data)for(var name in spec.data)data=ctx.data[name]||(ctx.data[name]={}),spec.data[name].forEach((function(role){data[role]=op}))},resolve:function(){return(this.unresolved||[]).forEach((function(fn){fn()})),delete this.unresolved,this},operator:function(spec,update){this.add(spec,this.dataflow.add(spec.value,update))},transform:function(spec,type){this.add(spec,this.dataflow.add(this.transforms[canonicalType(type)]))},stream:function(spec,stream){this.set(spec.id,stream)},update:function(spec,stream,target,update,params){this.dataflow.on(stream,target,update,params,spec.options)},getState:function getState(options){var ctx=this,state={};if(options.signals){var signals=state.signals={};Object.keys(ctx.signals).forEach((function(key){var op=ctx.signals[key];options.signals(key,op)&&(signals[key]=op.value)}))}if(options.data){var data=state.data={};Object.keys(ctx.data).forEach((function(key){var dataset=ctx.data[key];options.data(key,dataset)&&(data[key]=dataset.input.value)}))}return ctx.subcontext&&!1!==options.recurse&&(state.subcontext=ctx.subcontext.map((function(ctx){return ctx.getState(options)}))),state},setState:function setState(state){var ctx=this,df=ctx.dataflow,data=state.data,signals=state.signals;Object.keys(signals||{}).forEach((function(key){df.update(ctx.signals[key],signals[key],state_SKIP)})),Object.keys(data||{}).forEach((function(key){df.pulse(ctx.data[key].input,df.changeset().remove(vega_util.fb).insert(data[key]))})),(state.subcontext||[]).forEach((function(substate,i){var subctx=ctx.subcontext[i];subctx&&subctx.setState(substate)}))}};var src_runtime=function(view,spec,functions){return src_dataflow(spec,src_context(view,register_transforms,functions||functionContext))};var Width="width",Height="height",size_Padding="padding",Skip={skip:!0};function size_viewWidth(view,width){var a=view.autosize(),p=view.padding();return width-(a&&a.contains===size_Padding?p.left+p.right:0)}function size_viewHeight(view,height){var a=view.autosize(),p=view.padding();return height-(a&&a.contains===size_Padding?p.top+p.bottom:0)}function dataTest(name,data){return data.modified&&Object(vega_util.A)(data.input.value)&&name.indexOf("_:vega:_")}function signalTest(name,op){return!("parent"===name||op instanceof register_transforms.proxy)}var src_tooltip=function(handler,event,item,value){var el=handler.element();el&&el.setAttribute("title",function formatTooltip(value){return null==value?"":Object(vega_util.A)(value)?formatArray(value):Object(vega_util.F)(value)&&!Object(vega_util.C)(value)?function formatObject(obj){return Object.keys(obj).map((function(key){var v=obj[key];return key+": "+(Object(vega_util.A)(v)?formatArray(v):tooltip_formatValue(v))})).join("\n")}(value):value+""}(value))};function formatArray(value){return"["+value.map(tooltip_formatValue).join(", ")+"]"}function tooltip_formatValue(value){return Object(vega_util.A)(value)?"[…]":Object(vega_util.F)(value)&&!Object(vega_util.C)(value)?"{…}":value}function View(spec,options){options=options||{},Dataflow.call(this),options.loader&&this.loader(options.loader),options.logger&&this.logger(options.logger),null!=options.logLevel&&this.logLevel(options.logLevel),this._el=null,this._elBind=null,this._renderType=options.renderer||RenderType.Canvas,this._scenegraph=new Scenegraph;var root=this._scenegraph.root;this._renderer=null,this._tooltip=options.tooltip||src_tooltip,this._redraw=!0,this._handler=(new CanvasHandler).scene(root),this._preventDefault=!1,this._timers=[],this._eventListeners=[],this._resizeListeners=[],this._eventConfig=function initializeEventConfig(config){const events=Object(vega_util.o)({defaults:{}},config),unpack=(obj,keys)=>{keys.forEach(k=>{Object(vega_util.A)(obj[k])&&(obj[k]=Object(vega_util.cb)(obj[k]))})};return unpack(events.defaults,["prevent","allow"]),unpack(events,["view","window","selector"]),events}(spec.eventConfig);var ctx=src_runtime(this,spec,options.functions);this._runtime=ctx,this._signals=ctx.signals,this._bind=(spec.bindings||[]).map((function(_){return{state:null,param:Object(vega_util.o)({},_)}})),ctx.root&&ctx.root.set(root),root.source=ctx.data.root.input,this.pulse(ctx.data.root.input,this.changeset().insert(root.items)),this._background=options.background||ctx.background||null,this._width=this.width(),this._height=this.height(),this._viewWidth=size_viewWidth(this,this._width),this._viewHeight=size_viewHeight(this,this._height),this._origin=[0,0],this._resize=0,this._autosize=1,function initializeResize(view){var s=view._signals,w=s[Width],h=s[Height],p=s[size_Padding];function resetSize(){view._autosize=view._resize=1}view._resizeWidth=view.add(null,(function(_){view._width=_.size,view._viewWidth=size_viewWidth(view,_.size),resetSize()}),{size:w}),view._resizeHeight=view.add(null,(function(_){view._height=_.size,view._viewHeight=size_viewHeight(view,_.size),resetSize()}),{size:h});var resizePadding=view.add(null,resetSize,{pad:p});view._resizeWidth.rank=w.rank+1,view._resizeHeight.rank=h.rank+1,resizePadding.rank=p.rank+1}(this),src_cursor(this),options.hover&&this.hover(),options.container&&this.initialize(options.container,options.bind)}var View_prototype=Object(vega_util.y)(View,Dataflow);function lookupSignal(view,name){return Object(vega_util.v)(view._signals,name)?view._signals[name]:Object(vega_util.n)("Unrecognized signal name: "+Object(vega_util.Y)(name))}function findOperatorHandler(op,handler){var h=(op._targets||[]).filter((function(op){var u=op._update;return u&&u.handler===handler}));return h.length?h[0]:null}function addOperatorListener(view,name,op,handler){var h=findOperatorHandler(op,handler);return h||((h=trap(this,(function(){handler(name,op.value)}))).handler=handler,view.on(op,null,h)),view}function removeOperatorListener(view,op,handler){var h=findOperatorHandler(op,handler);return h&&op._targets.remove(h),view}View_prototype.evaluate=async function(encode,prerun,postrun){if(await Dataflow.prototype.evaluate.call(this,encode,prerun),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,function resizeRenderer(view){var origin=render_size_offset(view),w=render_size_width(view),h=render_size_height(view);view._renderer.background(view._background),view._renderer.resize(w,h,origin),view._handler.origin(origin),view._resizeListeners.forEach((function(handler){try{handler(w,h)}catch(error){view.error(error)}}))}(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(e){this.error(e)}return postrun&&asyncCallback(this,postrun),this},View_prototype.dirty=function(item){this._redraw=!0,this._renderer&&this._renderer.dirty(item)},View_prototype.container=function(){return this._el},View_prototype.scenegraph=function(){return this._scenegraph},View_prototype.origin=function(){return this._origin.slice()},View_prototype.signal=function(name,value,options){var op=lookupSignal(this,name);return 1===arguments.length?op.value:this.update(op,value,options)},View_prototype.background=function(_){return arguments.length?(this._background=_,this._resize=1,this):this._background},View_prototype.width=function(_){return arguments.length?this.signal("width",_):this.signal("width")},View_prototype.height=function(_){return arguments.length?this.signal("height",_):this.signal("height")},View_prototype.padding=function(_){return arguments.length?this.signal("padding",_):this.signal("padding")},View_prototype.autosize=function(_){return arguments.length?this.signal("autosize",_):this.signal("autosize")},View_prototype.renderer=function(type){return arguments.length?(renderModule(type)||Object(vega_util.n)("Unrecognized renderer type: "+type),type!==this._renderType&&(this._renderType=type,this._resetRenderer()),this):this._renderType},View_prototype.tooltip=function(handler){return arguments.length?(handler!==this._tooltip&&(this._tooltip=handler,this._resetRenderer()),this):this._tooltip},View_prototype.loader=function(loader){return arguments.length?(loader!==this._loader&&(Dataflow.prototype.loader.call(this,loader),this._resetRenderer()),this):this._loader},View_prototype.resize=function(){return this._autosize=1,this.touch(lookupSignal(this,"autosize"))},View_prototype._resetRenderer=function(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},View_prototype._resizeView=function resizeView(viewWidth,viewHeight,width,height,origin,auto){this.runAfter((function(view){var rerun=0;view._autosize=0,view.width()!==width&&(rerun=1,view.signal(Width,width,Skip),view._resizeWidth.skip(!0)),view.height()!==height&&(rerun=1,view.signal(Height,height,Skip),view._resizeHeight.skip(!0)),view._viewWidth!==viewWidth&&(view._resize=1,view._viewWidth=viewWidth),view._viewHeight!==viewHeight&&(view._resize=1,view._viewHeight=viewHeight),view._origin[0]===origin[0]&&view._origin[1]===origin[1]||(view._resize=1,view._origin=origin),rerun&&view.run("enter"),auto&&view.runAfter(v=>v.resize())}),!1,1)},View_prototype.addEventListener=function(type,handler,options){var callback=handler;return options&&!1===options.trap||((callback=trap(this,handler)).raw=handler),this._handler.on(type,callback),this},View_prototype.removeEventListener=function(type,handler){for(var h,t,handlers=this._handler.handlers(type),i=handlers.length;--i>=0;)if(t=handlers[i].type,h=handlers[i].handler,type===t&&(handler===h||handler===h.raw)){this._handler.off(t,h);break}return this},View_prototype.addResizeListener=function(handler){var l=this._resizeListeners;return l.indexOf(handler)<0&&l.push(handler),this},View_prototype.removeResizeListener=function(handler){var l=this._resizeListeners,i=l.indexOf(handler);return i>=0&&l.splice(i,1),this},View_prototype.addSignalListener=function(name,handler){return addOperatorListener(this,name,lookupSignal(this,name),handler)},View_prototype.removeSignalListener=function(name,handler){return removeOperatorListener(this,lookupSignal(this,name),handler)},View_prototype.addDataListener=function(name,handler){return addOperatorListener(this,name,dataref(this,name).values,handler)},View_prototype.removeDataListener=function(name,handler){return removeOperatorListener(this,dataref(this,name).values,handler)},View_prototype.preventDefault=function(_){return arguments.length?(this._preventDefault=_,this):this._preventDefault},View_prototype.timer=function(callback,delay){this._timers.push(function(callback,delay,time){var t=new Timer,total=delay;return null==delay?(t.restart(callback,delay,time),t):(delay=+delay,time=null==time?now():+time,t.restart((function tick(elapsed){elapsed+=total,t.restart(tick,total+=delay,time),callback(elapsed)}),delay,time),t)}((function tick(elapsed){callback({timestamp:Date.now(),elapsed:elapsed})}),delay))},View_prototype.events=function events_events(source,type,filter){var sources,view=this,s=new EventStream(filter),send=function(e,item){view.runAsync(null,()=>{source===VIEW&&function prevent(view,type){var def=view._eventConfig.defaults,prevent=def.prevent,allow=def.allow;return!1!==prevent&&!0!==allow&&(!0===prevent||!1===allow||(prevent?prevent[type]:allow?!allow[type]:view.preventDefault()))}(view,type)&&e.preventDefault(),s.receive(events_extend(view,e,item))})};if(source===TIMER)permit(view,"timer",type)&&view.timer(send,type);else if(source===VIEW)permit(view,"view",type)&&view.addEventListener(type,send,NO_TRAP);else if(source===WINDOW?permit(view,"window",type)&&"undefined"!=typeof window&&(sources=[window]):"undefined"!=typeof document&&permit(view,"selector",type)&&(sources=document.querySelectorAll(source)),sources){for(var i=0,n=sources.length;i<n;++i)sources[i].addEventListener(type,send);view._eventListeners.push({type:type,sources:sources,handler:send})}else view.warn("Can not resolve event source: "+source);return s},View_prototype.finalize=function(){var n,m,e,tooltip=this._tooltip,timers=this._timers,listeners=this._eventListeners;for(n=timers.length;--n>=0;)timers[n].stop();for(n=listeners.length;--n>=0;)for(m=(e=listeners[n]).sources.length;--m>=0;)e.sources[m].removeEventListener(e.type,e.handler);return tooltip&&tooltip.call(this,this._handler,null,null,null),this},View_prototype.hover=function(hoverSet,leaveSet){return leaveSet=[leaveSet||"update",(hoverSet=[hoverSet||"hover"])[0]],this.on(this.events("view","mouseover",itemFilter),markTarget,invoke(hoverSet)),this.on(this.events("view","mouseout",itemFilter),markTarget,invoke(leaveSet)),this},View_prototype.data=function data_data(name,values){return arguments.length<2?dataref(this,name).values.value:change.call(this,name,ChangeSet_changeset().remove(vega_util.fb).insert(values))},View_prototype.change=change,View_prototype.insert=function data_insert(name,_){return change.call(this,name,ChangeSet_changeset().insert(_))},View_prototype.remove=function data_remove(name,_){return change.call(this,name,ChangeSet_changeset().remove(_))},View_prototype.scale=function src_scale_scale(name){var scales=this._runtime.scales;return Object(vega_util.v)(scales,name)||Object(vega_util.n)("Unrecognized scale or projection: "+name),scales[name].value},View_prototype.initialize=function(el,elBind){var Handler,Renderer,view=this,type=view._renderType,config=view._eventConfig.bind,module=renderModule(type);return el=view._el=el?initialize_lookup(view,el):null,module||view.error("Unrecognized renderer type: "+type),Handler=module.handler||CanvasHandler,Renderer=el?module.renderer:module.headless,view._renderer=Renderer?initialize_renderer(view,view._renderer,el,Renderer):null,view._handler=function(view,prevHandler,el,constructor){var handler=new constructor(view.loader(),trap(view,view.tooltip())).scene(view.scenegraph().root).initialize(el,render_size_offset(view),view);return prevHandler&&prevHandler.handlers().forEach((function(h){handler.on(h.type,h.handler)})),handler}(view,view._handler,el,Handler),view._redraw=!0,el&&"none"!==config&&(elBind=elBind?view._elBind=initialize_lookup(view,elBind):el.appendChild(src_element("div",{class:"vega-bindings"})),view._bind.forEach((function(_){_.param.element&&"container"!==config&&(_.element=initialize_lookup(view,_.param.element))})),view._bind.forEach((function(_){src_bind(view,_.element||elBind,_)}))),view},View_prototype.toImageURL=async function(type,scaleFactor){type!==RenderType.Canvas&&type!==RenderType.SVG&&type!==RenderType.PNG&&Object(vega_util.n)("Unrecognized image type: "+type);const r=await render_headless(this,type,scaleFactor);return type===RenderType.SVG?function toBlobURL(data,mime){var blob=new Blob([data],{type:mime});return window.URL.createObjectURL(blob)}(r.svg(),"image/svg+xml"):r.canvas().toDataURL("image/png")},View_prototype.toCanvas=async function(scaleFactor,opt){return(await render_headless(this,RenderType.Canvas,scaleFactor,opt)).canvas()},View_prototype.toSVG=async function(scaleFactor){return(await render_headless(this,RenderType.SVG,scaleFactor)).svg()},View_prototype.getState=function state_getState(options){return this._runtime.getState(options||{data:dataTest,signals:signalTest,recurse:!0})},View_prototype.setState=function state_setState(state){return this.runAsync(null,v=>{v._trigger=!1,v._runtime.setState(state)},v=>{v._trigger=!0}),this};var parsers_autosize=function(spec,config){return spec=spec||config.autosize,Object(vega_util.F)(spec)?spec:{type:spec||"pad"}},parsers_padding=function(spec,config){return spec=spec||config.padding,Object(vega_util.F)(spec)?{top:padding_number(spec.top),bottom:padding_number(spec.bottom),left:padding_number(spec.left),right:padding_number(spec.right)}:function paddingObject(_){return{top:_,bottom:_,left:_,right:_}}(padding_number(spec))};function padding_number(_){return+_||0}var OUTER_INVALID=["value","update","init","react","bind"];function outerError(prefix,name){Object(vega_util.n)(prefix+' for "outer" push: '+Object(vega_util.Y)(name))}var parsers_signal=function(signal,scope){var name=signal.name;if("outer"===signal.push)scope.signals[name]||outerError("No prior signal definition",name),OUTER_INVALID.forEach((function(prop){void 0!==signal[prop]&&outerError("Invalid property ",prop)}));else{var op=scope.addSignal(name,signal.value);!1===signal.react&&(op.react=!1),signal.bind&&scope.addBinding(name,signal.bind)}},parsers_expression=function(expr,scope,preamble){var ast,gen,params={};try{expr=Object(vega_util.H)(expr)?expr:Object(vega_util.Y)(expr)+"",ast=parser(expr)}catch(err){Object(vega_util.n)("Expression parse error: "+expr)}return ast.visit((function visitor(node){if(node.type===CallExpression){var name=node.callee.name,visit=codegenParams.visitors[name];visit&&visit(name,node.arguments,scope,params)}})),(gen=codeGenerator(ast)).globals.forEach((function(name){var signalName="$"+name;!Object(vega_util.v)(params,signalName)&&scope.getSignal(name)&&(params[signalName]=scope.signalRef(name))})),{$expr:preamble?preamble+"return("+gen.code+");":gen.code,$fields:gen.fields,$params:params}};function Entry(type,value,params,parent){this.id=-1,this.type=type,this.value=value,this.params=params,parent&&(this.parent=parent)}function util_entry(type,value,params,parent){return new Entry(type,value,params,parent)}function util_operator(value,params){return util_entry("operator",value,params)}function util_ref(op){var ref={$ref:op.id};return op.id<0&&(op.refs=op.refs||[]).push(ref),ref}function util_fieldRef(field,name){return name?{$field:field,$name:name}:{$field:field}}var keyFieldRef=util_fieldRef("key");function compareRef(fields,orders){return{$compare:fields,$order:orders}}var Descending="descending";function aggrField(op,field){return(op&&op.signal?"$"+op.signal:op||"")+(op&&field?"_":"")+(field&&field.signal?"$"+field.signal:field||"")}var Scope="scope",util_View="view";function isSignal(_){return _&&_.signal}function util_hasSignal(_){if(isSignal(_))return!0;if(Object(vega_util.F)(_))for(var key in _)if(util_hasSignal(_[key]))return!0;return!1}function util_value(specValue,defaultValue){return null!=specValue?specValue:defaultValue}function deref(v){return v&&v.signal||v}var stream_Timer="timer";function parseStream(stream,scope){return(stream.merge?mergeStream:stream.stream?nestedStream:stream.type?eventStream:Object(vega_util.n)("Invalid stream specification: "+Object(vega_util.Y)(stream)))(stream,scope)}function mergeStream(stream,scope){var entry=streamParameters({merge:stream.merge.map(s=>parseStream(s,scope))},stream,scope);return scope.addStream(entry).id}function nestedStream(stream,scope){var entry=streamParameters({stream:parseStream(stream.stream,scope)},stream,scope);return scope.addStream(entry).id}function eventStream(stream,scope){var id,entry;return stream.type===stream_Timer?(id=scope.event(stream_Timer,stream.throttle),stream={between:stream.between,filter:stream.filter}):id=scope.event(function eventSource(source){return source===Scope?util_View:source||util_View}(stream.source),stream.type),entry=streamParameters({stream:id},stream,scope),1===Object.keys(entry).length?id:scope.addStream(entry).id}function streamParameters(entry,stream,scope){var param=stream.between;return param&&(2!==param.length&&Object(vega_util.n)('Stream "between" parameter must have 2 entries: '+Object(vega_util.Y)(stream)),entry.between=[parseStream(param[0],scope),parseStream(param[1],scope)]),param=stream.filter?[].concat(stream.filter):[],(stream.marktype||stream.markname||stream.markrole)&&param.push(function filterMark(type,name,role){var item="event.item";return item+(type&&"*"!==type?"&&"+item+".mark.marktype==='"+type+"'":"")+(role?"&&"+item+".mark.role==='"+role+"'":"")+(name?"&&"+item+".mark.name==='"+name+"'":"")}(stream.marktype,stream.markname,stream.markrole)),stream.source===Scope&&param.push("inScope(event.item)"),param.length&&(entry.filter=parsers_expression("("+param.join(")&&(")+")").$expr),null!=(param=stream.throttle)&&(entry.throttle=+param),null!=(param=stream.debounce)&&(entry.debounce=+param),stream.consume&&(entry.consume=!0),entry}var DEFAULT_SOURCE,MARKS,event_selector=function(selector,source,marks){return DEFAULT_SOURCE=source||event_selector_VIEW,MARKS=marks||DEFAULT_MARKS,parseMerge(selector.trim()).map(parseSelector)},event_selector_VIEW="view",LBRACK="[",RBRACK="]",LBRACE="{",RBRACE="}",COLON=":",COMMA=",",NAME="@",GT=">",event_selector_ILLEGAL=/[[\]{}]/,DEFAULT_MARKS={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};function event_selector_find(s,i,endChar,pushChar,popChar){for(var c,count=0,n=s.length;i<n;++i){if(c=s[i],!count&&c===endChar)return i;popChar&&popChar.indexOf(c)>=0?--count:pushChar&&pushChar.indexOf(c)>=0&&++count}return i}function parseMerge(s){for(var output=[],start=0,n=s.length,i=0;i<n;)i=event_selector_find(s,i,COMMA,LBRACK+LBRACE,RBRACK+RBRACE),output.push(s.substring(start,i).trim()),start=++i;if(0===output.length)throw"Empty event selector: "+s;return output}function parseSelector(s){return"["===s[0]?function parseBetween(s){var b,stream,n=s.length,i=1;if((i=event_selector_find(s,i,RBRACK,LBRACK,RBRACK))===n)throw"Empty between selector: "+s;if(2!==(b=parseMerge(s.substring(1,i))).length)throw"Between selector must have two elements: "+s;if((s=s.slice(i+1).trim())[0]!==GT)throw"Expected '>' after between selector: "+s;if(b=b.map(parseSelector),(stream=parseSelector(s.slice(1).trim())).between)return{between:b,stream:stream};stream.between=b;return stream}(s):function event_selector_parseStream(s){var j,filter,stream={source:DEFAULT_SOURCE},source=[],throttle=[0,0],markname=0,start=0,n=s.length,i=0;if(s[n-1]===RBRACE){if(!((i=s.lastIndexOf(LBRACE))>=0))throw"Unmatched right brace: "+s;try{throttle=function parseThrottle(s){var a=s.split(COMMA);if(!s.length||a.length>2)throw s;return a.map((function(_){var x=+_;if(x!=x)throw s;return x}))}(s.substring(i+1,n-1))}catch(e){throw"Invalid throttle specification: "+s}s=s.slice(0,i).trim(),n=s.length,i=0}if(!n)throw s;s[0]===NAME&&(markname=++i);(j=event_selector_find(s,i,COLON))<n&&(source.push(s.substring(start,j).trim()),start=i=++j);if((i=event_selector_find(s,i,LBRACK))===n)source.push(s.substring(start,n).trim());else if(source.push(s.substring(start,i).trim()),filter=[],(start=++i)===n)throw"Unmatched left bracket: "+s;for(;i<n;){if((i=event_selector_find(s,i,RBRACK))===n)throw"Unmatched left bracket: "+s;if(filter.push(s.substring(start,i).trim()),i<n-1&&s[++i]!==LBRACK)throw"Expected left bracket: "+s;start=++i}if(!(n=source.length)||event_selector_ILLEGAL.test(source[n-1]))throw"Invalid event selector: "+s;n>1?(stream.type=source[1],markname?stream.markname=source[0].slice(1):!function isMarkType(type){return MARKS[type]}(source[0])?stream.source=source[0]:stream.marktype=source[0]):stream.type=source[0];"!"===stream.type.slice(-1)&&(stream.consume=!0,stream.type=stream.type.slice(0,-1));null!=filter&&(stream.filter=filter);throttle[0]&&(stream.throttle=throttle[0]);throttle[1]&&(stream.debounce=throttle[1]);return stream}(s)}var parsers_update=function(spec,scope,target){var events=spec.events,update=spec.update,encode=spec.encode,sources=[],entry={target:target};events||Object(vega_util.n)("Signal update missing events specification."),Object(vega_util.H)(events)&&(events=event_selector(events,scope.isSubscope()?Scope:util_View)),events=Object(vega_util.i)(events).filter(s=>s.signal||s.scale?(sources.push(s),0):1),sources.length>1&&(sources=[mergeSources(sources)]),events.length&&sources.push(events.length>1?{merge:events}:events[0]),null!=encode&&(update&&Object(vega_util.n)("Signal encode and update are mutually exclusive."),update="encode(item(),"+Object(vega_util.Y)(encode)+")"),entry.update=Object(vega_util.H)(update)?parsers_expression(update,scope,"var datum=event.item&&event.item.datum;"):null!=update.expr?parsers_expression(update.expr,scope,"var datum=event.item&&event.item.datum;"):null!=update.value?update.value:null!=update.signal?{$expr:"_.value",$params:{value:scope.signalRef(update.signal)}}:Object(vega_util.n)("Invalid signal update specification."),spec.force&&(entry.options={force:!0}),sources.forEach((function(source){scope.addUpdate(Object(vega_util.o)(function streamSource(stream,scope){return{source:stream.signal?scope.signalRef(stream.signal):stream.scale?scope.scaleRef(stream.scale):parseStream(stream,scope)}}(source,scope),entry))}))};function mergeSources(sources){return{signal:"["+sources.map(s=>s.scale?'scale("'+s.scale+'")':s.signal)+"]"}}function transforms_transform(name){return function(params,value,parent){return util_entry(name,value,params||void 0,parent)}}var transforms_Aggregate=transforms_transform("aggregate"),transforms_AxisTicks=transforms_transform("axisticks"),transforms_Bound=transforms_transform("bound"),transforms_Collect=transforms_transform("collect"),transforms_Compare=transforms_transform("compare"),transforms_DataJoin=transforms_transform("datajoin"),transforms_Encode=transforms_transform("encode"),transforms_Expression=transforms_transform("expression"),transforms_Facet=(transforms_transform("extent"),transforms_transform("facet")),transforms_Field=transforms_transform("field"),transforms_Key=transforms_transform("key"),transforms_LegendEntries=transforms_transform("legendentries"),transforms_Load=transforms_transform("load"),transforms_Mark=transforms_transform("mark"),transforms_MultiExtent=transforms_transform("multiextent"),transforms_MultiValues=transforms_transform("multivalues"),transforms_Overlap=transforms_transform("overlap"),transforms_Params=transforms_transform("params"),transforms_PreFacet=transforms_transform("prefacet"),transforms_Projection=transforms_transform("projection"),transforms_Proxy=transforms_transform("proxy"),transforms_Relay=transforms_transform("relay"),transforms_Render=transforms_transform("render"),transforms_Scale=transforms_transform("scale"),transforms_Sieve=transforms_transform("sieve"),transforms_SortItems=transforms_transform("sortitems"),transforms_ViewLayout=transforms_transform("viewlayout"),transforms_Values=transforms_transform("values"),FIELD_REF_ID=0,MULTIDOMAIN_SORT_OPS={min:"min",max:"max",count:"sum"};function initScale(spec,scope){var type=spec.type||"linear";(function isValidScaleType(type){switch(type){case Identity:case types_Linear:case Log:case Pow:case Sqrt:case Symlog:case Time:case UTC:case Sequential:case types_Quantile:case Quantize:case Threshold:case Ordinal:case Point:case Band:case BinOrdinal:return!0}return!1})(type)||Object(vega_util.n)("Unrecognized scale type: "+Object(vega_util.Y)(type)),scope.addScale(spec.name,{type:type,domain:void 0})}function parseScale(spec,scope){var key,params=scope.getScale(spec.name).params;for(key in params.domain=parseScaleDomain(spec.domain,spec,scope),null!=spec.range&&(params.range=function parseScaleRange(spec,scope,params){var range=spec.range,config=scope.config.range;if(range.signal)return scope.signalRef(range.signal);if(Object(vega_util.H)(range)){if(config&&Object(vega_util.v)(config,range))return spec=Object(vega_util.o)({},spec,{range:config[range]}),parseScaleRange(spec,scope,params);"width"===range?range=[0,{signal:"width"}]:"height"===range?range=isDiscrete(spec.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Object(vega_util.n)("Unrecognized scale range value: "+Object(vega_util.Y)(range))}else{if(range.scheme)return params.scheme=Object(vega_util.A)(range.scheme)?parseArray(range.scheme,scope):parseLiteral(range.scheme,scope),range.extent&&(params.schemeExtent=parseArray(range.extent,scope)),void(range.count&&(params.schemeCount=parseLiteral(range.count,scope)));if(range.step)return void(params.rangeStep=parseLiteral(range.step,scope));if(isDiscrete(spec.type)&&!Object(vega_util.A)(range))return parseScaleDomain(range,spec,scope);Object(vega_util.A)(range)||Object(vega_util.n)("Unsupported range type: "+Object(vega_util.Y)(range))}return range.map(v=>(Object(vega_util.A)(v)?parseArray:parseLiteral)(v,scope))}(spec,scope,params)),null!=spec.interpolate&&function parseScaleInterpolate(interpolate,params){params.interpolate=parseLiteral(interpolate.type||interpolate),null!=interpolate.gamma&&(params.interpolateGamma=parseLiteral(interpolate.gamma))}(spec.interpolate,params),null!=spec.nice&&(params.nice=function parseScaleNice(nice){return Object(vega_util.F)(nice)?{interval:parseLiteral(nice.interval),step:parseLiteral(nice.step)}:parseLiteral(nice)}(spec.nice)),null!=spec.bins&&(params.bins=function parseScaleBins(v,scope){return v.signal||Object(vega_util.A)(v)?parseArray(v,scope):scope.objectProperty(v)}(spec.bins,scope)),spec)Object(vega_util.v)(params,key)||"name"===key||(params[key]=parseLiteral(spec[key],scope))}function parseLiteral(v,scope){return Object(vega_util.F)(v)?v.signal?scope.signalRef(v.signal):Object(vega_util.n)("Unsupported object: "+Object(vega_util.Y)(v)):v}function parseArray(v,scope){return v.signal?scope.signalRef(v.signal):v.map(v=>parseLiteral(v,scope))}function dataLookupError(name){Object(vega_util.n)("Can not find data set: "+Object(vega_util.Y)(name))}function parseScaleDomain(domain,spec,scope){if(domain)return domain.signal?scope.signalRef(domain.signal):(Object(vega_util.A)(domain)?explicitDomain:domain.fields?multipleDomain:singularDomain)(domain,spec,scope);null==spec.domainMin&&null==spec.domainMax||Object(vega_util.n)("No scale domain defined for domainMin/domainMax to override.")}function explicitDomain(domain,spec,scope){return domain.map((function(v){return parseLiteral(v,scope)}))}function singularDomain(domain,spec,scope){var data=scope.getData(domain.data);return data||dataLookupError(domain.data),isDiscrete(spec.type)?data.valuesRef(scope,domain.field,parseSort(domain.sort,!1)):isQuantile(spec.type)?data.domainRef(scope,domain.field):data.extentRef(scope,domain.field)}function multipleDomain(domain,spec,scope){var data=domain.data,fields=domain.fields.reduce((function(dom,d){return d=Object(vega_util.H)(d)?{data:data,field:d}:Object(vega_util.A)(d)||d.signal?function scale_fieldRef(data,scope){var name="_:vega:_"+FIELD_REF_ID++,coll=transforms_Collect({});if(Object(vega_util.A)(data))coll.value={$ingest:data};else if(data.signal){var code="setdata("+Object(vega_util.Y)(name)+","+data.signal+")";coll.params.input=scope.signalRef(code)}return scope.addDataPipeline(name,[coll,transforms_Sieve({})]),{data:name,field:"data"}}(d,scope):d,dom.push(d),dom}),[]);return(isDiscrete(spec.type)?ordinalMultipleDomain:isQuantile(spec.type)?quantileMultipleDomain:numericMultipleDomain)(domain,scope,fields)}function ordinalMultipleDomain(domain,scope,fields){var counts,p,a,c,v,sort=parseSort(domain.sort,!0);return counts=fields.map((function(f){var data=scope.getData(f.data);return data||dataLookupError(f.data),data.countsRef(scope,f.field,sort)})),p={groupby:keyFieldRef,pulse:counts},sort&&(a=sort.op||"count",v=sort.field?aggrField(a,sort.field):"count",p.ops=[MULTIDOMAIN_SORT_OPS[a]],p.fields=[scope.fieldRef(v)],p.as=[v]),a=scope.add(transforms_Aggregate(p)),c=scope.add(transforms_Collect({pulse:util_ref(a)})),v=scope.add(transforms_Values({field:keyFieldRef,sort:scope.sortRef(sort),pulse:util_ref(c)})),util_ref(v)}function parseSort(sort,multidomain){return sort&&(sort.field||sort.op?sort.field||"count"===sort.op?multidomain&&sort.field&&sort.op&&!MULTIDOMAIN_SORT_OPS[sort.op]&&Object(vega_util.n)("Multiple domain scales can not be sorted using "+sort.op):Object(vega_util.n)("No field provided for sort aggregate op: "+sort.op):Object(vega_util.F)(sort)?sort.field="key":sort={field:"key"}),sort}function quantileMultipleDomain(domain,scope,fields){var values=fields.map((function(f){var data=scope.getData(f.data);return data||dataLookupError(f.data),data.domainRef(scope,f.field)}));return util_ref(scope.add(transforms_MultiValues({values:values})))}function numericMultipleDomain(domain,scope,fields){var extents=fields.map((function(f){var data=scope.getData(f.data);return data||dataLookupError(f.data),data.extentRef(scope,f.field)}));return util_ref(scope.add(transforms_MultiExtent({extents:extents})))}function projection_parseParameter(_,name,scope){return Object(vega_util.A)(_)?_.map((function(_){return projection_parseParameter(_,name,scope)})):Object(vega_util.F)(_)?_.signal?scope.signalRef(_.signal):"fit"===name?_:Object(vega_util.n)("Unsupported parameter object: "+Object(vega_util.Y)(_)):_}const Vertical="vertical",constants_Start="start",constants_End="end",Value="value",GuideLabelStyle="guide-label",GroupTitleStyle="group-title",GroupSubtitleStyle="group-subtitle",constants_Symbols="symbol",constants_Gradient="gradient",constants_Discrete="discrete",LegendScales=["size","shape","fill","stroke","strokeWidth","strokeDash","opacity"],constants_Skip={name:1,style:1,interactive:1},constants_zero={value:0},constants_one={value:1};var adjust_spatial_Skip=Object(vega_util.cb)(["rule"]),Swap=Object(vega_util.cb)(["group","image","rect"]),adjust_spatial=function(encode,marktype){var code="";return adjust_spatial_Skip[marktype]?code:(encode.x2&&(encode.x?(Swap[marktype]&&(code+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),code+="o.width=o.x2-o.x;"):code+="o.x=o.x2-(o.width||0);"),encode.xc&&(code+="o.x=o.xc-(o.width||0)/2;"),encode.y2&&(encode.y?(Swap[marktype]&&(code+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),code+="o.height=o.y2-o.y;"):code+="o.y=o.y2-(o.height||0);"),encode.yc&&(code+="o.y=o.yc-(o.height||0)/2;"),code)},encode_expression=function(code,scope,params,fields){var expr=parsers_expression(code,scope);return expr.$fields.forEach((function(name){fields[name]=1})),Object(vega_util.o)(params,expr.$params),expr.$expr},encode_field=function(ref,scope,params,fields){return function field_resolve(ref,scope,params,fields){var object,level,field;if(ref.signal)object="datum",field=encode_expression(ref.signal,scope,params,fields);else if(ref.group||ref.parent){for(level=Math.max(1,ref.level||1),object="item";level-- >0;)object+=".mark.group";ref.parent?(field=ref.parent,object+=".datum"):field=ref.group}else ref.datum?(object="datum",field=ref.datum):Object(vega_util.n)("Invalid field reference: "+Object(vega_util.Y)(ref));ref.signal||(Object(vega_util.H)(field)?(fields[field]=1,field=Object(vega_util.X)(field).map(vega_util.Y).join("][")):field=field_resolve(field,scope,params,fields));return object+"["+field+"]"}(Object(vega_util.F)(ref)?ref:{datum:ref},scope,params,fields)};var encode_property=function(property,scope,params,fields){return Object(vega_util.F)(property)?"("+encode_entry(null,property,scope,params,fields)+")":property},encode_scale=function(enc,value,scope,params,fields){var interp,func,flag,scale=scale_getScale(enc.scale,scope,params,fields);return null!=enc.range?(func=scale+".range()",value=0===(interp=+enc.range)?func+"[0]":"($="+func+","+(1===interp?"$[$.length-1]":"$[0]+"+interp+"*($[$.length-1]-$[0])")+")"):(void 0!==value&&(value=scale+"("+value+")"),enc.band&&(flag=function hasBandwidth(name,scope){if(!Object(vega_util.H)(name))return-1;var type=scope.scaleType(name);return"band"===type||"point"===type?1:0}(enc.scale,scope))&&(func=scale+".bandwidth",interp=enc.band.signal?func+"()*"+encode_property(enc.band,scope,params,fields):func+"()"+(1===(interp=+enc.band)?"":"*"+interp),flag<0&&(interp="("+func+"?"+interp+":0)"),value=(value?value+"+":"")+interp,enc.extra&&(value="(datum.extra?"+scale+"(datum.extra.value):"+value+")")),null==value&&(value="0")),value};function scale_getScale(name,scope,params,fields){var scaleName;if(Object(vega_util.H)(name))scaleName=ScalePrefix+name,Object(vega_util.v)(params,scaleName)||(params[scaleName]=scope.scaleRef(name)),scaleName=Object(vega_util.Y)(scaleName);else{for(scaleName in scope.scales)params[ScalePrefix+scaleName]=scope.scaleRef(scaleName);scaleName=Object(vega_util.Y)(ScalePrefix)+"+"+(name.signal?"("+encode_expression(name.signal,scope,params,fields)+")":encode_field(name,scope,params,fields))}return"_["+scaleName+"]"}var encode_entry=function(channel,enc,scope,params,fields){if(null!=enc.gradient)return function(enc,scope,params,fields){return"this.gradient("+scale_getScale(enc.gradient,scope,params,fields)+","+Object(vega_util.Y)(enc.start)+","+Object(vega_util.Y)(enc.stop)+","+Object(vega_util.Y)(enc.count)+")"}(enc,scope,params,fields);var value=enc.signal?encode_expression(enc.signal,scope,params,fields):enc.color?function(enc,scope,params,fields){function color(type,x,y,z){return"this."+type+"("+[encode_entry(null,x,scope,params,fields),encode_entry(null,y,scope,params,fields),encode_entry(null,z,scope,params,fields)].join(",")+").toString()"}return enc.c?color("hcl",enc.h,enc.c,enc.l):enc.h||enc.s?color("hsl",enc.h,enc.s,enc.l):enc.l||enc.a?color("lab",enc.l,enc.a,enc.b):enc.r||enc.g||enc.b?color("rgb",enc.r,enc.g,enc.b):null}(enc.color,scope,params,fields):null!=enc.field?encode_field(enc.field,scope,params,fields):void 0!==enc.value?Object(vega_util.Y)(enc.value):void 0;return null!=enc.scale&&(value=encode_scale(enc,value,scope,params,fields)),void 0===value&&(value=null),null!=enc.exponent&&(value="Math.pow("+value+","+encode_property(enc.exponent,scope,params,fields)+")"),null!=enc.mult&&(value+="*"+encode_property(enc.mult,scope,params,fields)),null!=enc.offset&&(value+="+"+encode_property(enc.offset,scope,params,fields)),enc.round&&(value="Math.round("+value+")"),value},encode_set=function(obj,key,value){const o=obj+"["+Object(vega_util.Y)(key)+"]";return`$=${value};if(${o}!==$)${o}=$,m=1;`},encode_rule=function(channel,rules,scope,params,fields){var code="";return rules.forEach((function(rule){var value=encode_entry(channel,rule,scope,params,fields);code+=rule.test?encode_expression(rule.test,scope,params,fields)+"?"+value+":":value})),":"===Object(vega_util.T)(code)&&(code+="null"),encode_set("o",channel,code)};function parseEncode(encode,marktype,params,scope){var channel,enc,value,fields={},code="var o=item,datum=o.datum,m=0,$;";for(channel in encode)enc=encode[channel],Object(vega_util.A)(enc)?code+=encode_rule(channel,enc,scope,params,fields):(value=encode_entry(channel,enc,scope,params,fields),code+=encode_set("o",channel,value));return code+=adjust_spatial(encode,marktype),{$expr:code+="return m;",$fields:Object.keys(fields),$output:Object.keys(encode)}}var MarkRole="mark",roles_FrameRole="frame",TitleTextRole="title-text",TitleSubtitleRole="title-subtitle";function encoder(_){return Object(vega_util.F)(_)&&!Object(vega_util.A)(_)?Object(vega_util.o)({},_):{value:_}}function addEncode(object,name,value,set){return null!=value?(Object(vega_util.F)(value)&&!Object(vega_util.A)(value)?object.update[name]=value:object[set||"enter"][name]={value:value},1):0}function addEncoders(object,enter,update){for(let name in enter)addEncode(object,name,enter[name]);for(let name in update)addEncode(object,name,update[name],"update")}function extendEncode(encode,extra,skip){for(var name in extra)skip&&Object(vega_util.v)(skip,name)||(encode[name]=Object(vega_util.o)(encode[name]||{},extra[name]));return encode}function encode_util_encoders(encode,type,role,style,scope,params){var enc,key;for(key in(params=params||{}).encoders={$encode:enc={}},encode=function applyDefaults(encode,type,role,style,config){var update,key,props,defaults={},enter={};"legend"!=role&&0!==String(role).indexOf("axis")||(role=null);for(key in props=role===roles_FrameRole?config.group:role===MarkRole?Object(vega_util.o)({},config.mark,config[type]):null)has(key,encode)||("fill"===key||"stroke"===key)&&(has("fill",encode)||has("stroke",encode))||applyDefault(defaults,key,props[key]);for(key in Object(vega_util.i)(style).forEach((function(name){var props=config.style&&config.style[name];for(var key in props)has(key,encode)||applyDefault(defaults,key,props[key])})),encode=Object(vega_util.o)({},encode),defaults)(props=defaults[key]).signal?(update=update||{})[key]=props:enter[key]=props;encode.enter=Object(vega_util.o)(enter,encode.enter),update&&(encode.update=Object(vega_util.o)(update,encode.update));return encode}(encode,type,role,style,scope.config))enc[key]=parseEncode(encode[key],type,params,scope);return params}function applyDefault(defaults,key,value){defaults[key]=value&&value.signal?{signal:value.signal}:{value:value}}function has(key,encode){return encode&&(encode.enter&&encode.enter[key]||encode.update&&encode.update[key])}var guide_mark=function(type,role,style,key,dataRef,encode,extras){return{type:type,name:extras?extras.name:void 0,role:role,style:extras&&extras.style||style,key:key,from:dataRef,interactive:!(!extras||!extras.interactive),encode:extendEncode(encode,extras,constants_Skip)}};function guide_util_lookup(spec,config){const _=(name,dflt)=>util_value(spec[name],util_value(config[name],dflt));return _.isVertical=s=>Vertical===util_value(spec.direction,config.direction||(s?config.symbolDirection:config.gradientDirection)),_.gradientLength=()=>util_value(spec.gradientLength,config.gradientLength||config.gradientWidth),_.gradientThickness=()=>util_value(spec.gradientThickness,config.gradientThickness||config.gradientHeight),_.entryColumns=()=>util_value(spec.columns,util_value(config.columns,+_.isVertical(!0))),_}function getEncoding(name,encode){var v=encode&&(encode.update&&encode.update[name]||encode.enter&&encode.enter[name]);return v&&v.signal?v:v?v.value:null}function anchorExpr(s,e,m){return`item.anchor === "${constants_Start}" ? ${s} : item.anchor === "${constants_End}" ? ${e} : ${m}`}const alignExpr=anchorExpr(Object(vega_util.Y)("left"),Object(vega_util.Y)("right"),Object(vega_util.Y)("center"));var GroupMark="group",TextMark="text",legend_gradient=function(spec,scale,config,userEncode){var encode,enter,start,stop,width,height,_=guide_util_lookup(spec,config),vertical=_.isVertical(),thickness=_.gradientThickness(),length=_.gradientLength();return vertical?(start=[0,1],stop=[0,0],width=thickness,height=length):(start=[0,0],stop=[1,0],width=length,height=thickness),addEncoders(encode={enter:enter={opacity:constants_zero,x:constants_zero,y:constants_zero,width:encoder(width),height:encoder(height)},update:Object(vega_util.o)({},enter,{opacity:constants_one,fill:{gradient:scale,start:start,stop:stop}}),exit:{opacity:constants_zero}},{stroke:_("gradientStrokeColor"),strokeWidth:_("gradientStrokeWidth")},{opacity:_("gradientOpacity")}),guide_mark("rect","legend-gradient",null,void 0,void 0,encode,userEncode)},legend_gradient_discrete=function(spec,scale,config,userEncode,dataRef){var encode,enter,u,v,uu,vv,_=guide_util_lookup(spec,config),vertical=_.isVertical(),thickness=_.gradientThickness(),length=_.gradientLength(),adjust="";return vertical?(u="y",uu="y2",v="x",vv="width",adjust="1-"):(u="x",uu="x2",v="y",vv="height"),(enter={opacity:constants_zero,fill:{scale:scale,field:Value}})[u]={signal:adjust+"datum.perc",mult:length},enter[v]=constants_zero,enter[uu]={signal:adjust+"datum.perc2",mult:length},enter[vv]=encoder(thickness),addEncoders(encode={enter:enter,update:Object(vega_util.o)({},enter,{opacity:constants_one}),exit:{opacity:constants_zero}},{stroke:_("gradientStrokeColor"),strokeWidth:_("gradientStrokeWidth")},{opacity:_("gradientOpacity")}),guide_mark("rect","legend-band",null,Value,dataRef,encode,userEncode)};var legend_gradient_labels=function(spec,config,userEncode,dataRef){var encode,enter,update,u,v,_=guide_util_lookup(spec,config),vertical=_.isVertical(),thickness=encoder(_.gradientThickness()),length=_.gradientLength(),overlap=_("labelOverlap"),separation=_("labelSeparation"),adjust="";return addEncoders(encode={enter:enter={opacity:constants_zero},update:update={opacity:constants_one,text:{field:"label"}},exit:{opacity:constants_zero}},{fill:_("labelColor"),fillOpacity:_("labelOpacity"),font:_("labelFont"),fontSize:_("labelFontSize"),fontStyle:_("labelFontStyle"),fontWeight:_("labelFontWeight"),limit:util_value(spec.labelLimit,config.gradientLabelLimit)}),vertical?(enter.align={value:"left"},enter.baseline=update.baseline={signal:'datum.perc<=0?"bottom":datum.perc>=1?"top":"middle"'},u="y",v="x",adjust="1-"):(enter.align=update.align={signal:'datum.perc<=0?"left":datum.perc>=1?"right":"center"'},enter.baseline={value:"top"},u="x",v="y"),enter[u]=update[u]={signal:adjust+"datum.perc",mult:length},enter[v]=update[v]=thickness,thickness.offset=util_value(spec.labelOffset,config.gradientLabelOffset)||0,spec=guide_mark(TextMark,"legend-label",GuideLabelStyle,Value,dataRef,encode,userEncode),overlap&&(spec.overlap={separation:separation,method:overlap,order:"datum.index"}),spec},guide_group=function(role,style,name,dataRef,interactive,encode,marks,layout){return{type:GroupMark,name:name,role:role,style:style,from:dataRef,interactive:interactive||!1,encode:encode,marks:marks,layout:layout}},legend_symbol_groups=function(spec,config,userEncode,dataRef,columns){var enter,update,labelOffset,symbols,labels,nrows,sort,_=guide_util_lookup(spec,config),entries=userEncode.entries,interactive=!(!entries||!entries.interactive),name=entries?entries.name:void 0,height=_("clipHeight"),symbolOffset=_("symbolOffset"),valueRef={data:"value"},encode={},xSignal=`${columns} ? datum.offset : datum.size`,yEncode=height?encoder(height):{field:"size"},index="datum.index",ncols=`max(1, ${columns})`;yEncode.mult=.5,encode={enter:enter={opacity:constants_zero,x:{signal:xSignal,mult:.5,offset:symbolOffset},y:yEncode},update:update={opacity:constants_one,x:enter.x,y:enter.y},exit:{opacity:constants_zero}};var baseFill=null,baseStroke=null;return spec.fill||(baseFill=config.symbolBaseFillColor,baseStroke=config.symbolBaseStrokeColor),addEncoders(encode,{fill:_("symbolFillColor",baseFill),shape:_("symbolType"),size:_("symbolSize"),stroke:_("symbolStrokeColor",baseStroke),strokeDash:_("symbolDash"),strokeDashOffset:_("symbolDashOffset"),strokeWidth:_("symbolStrokeWidth")},{opacity:_("symbolOpacity")}),LegendScales.forEach((function(scale){spec[scale]&&(update[scale]=enter[scale]={scale:spec[scale],field:Value})})),symbols=guide_mark("symbol","legend-symbol",null,Value,valueRef,encode,userEncode.symbols),height&&(symbols.clip=!0),(labelOffset=encoder(symbolOffset)).offset=_("labelOffset"),addEncoders(encode={enter:enter={opacity:constants_zero,x:{signal:xSignal,offset:labelOffset},y:yEncode},update:update={opacity:constants_one,text:{field:"label"},x:enter.x,y:enter.y},exit:{opacity:constants_zero}},{align:_("labelAlign"),baseline:_("labelBaseline"),fill:_("labelColor"),fillOpacity:_("labelOpacity"),font:_("labelFont"),fontSize:_("labelFontSize"),fontStyle:_("labelFontStyle"),fontWeight:_("labelFontWeight"),limit:_("labelLimit")}),labels=guide_mark(TextMark,"legend-label",GuideLabelStyle,Value,valueRef,encode,userEncode.labels),encode={enter:{noBound:{value:!height},width:constants_zero,height:height?encoder(height):constants_zero,opacity:constants_zero},exit:{opacity:constants_zero},update:update={opacity:constants_one,row:{signal:null},column:{signal:null}}},_.isVertical(!0)?(nrows=`ceil(item.mark.items.length / ${ncols})`,update.row.signal=`${index}%${nrows}`,update.column.signal=`floor(${index} / ${nrows})`,sort={field:["row",index]}):(update.row.signal=`floor(${index} / ${ncols})`,update.column.signal=`${index} % ${ncols}`,sort={field:index}),update.column.signal=`${columns}?${update.column.signal}:${index}`,(spec=guide_group("scope",null,name,dataRef={facet:{data:dataRef,name:"value",groupby:"index"}},interactive,extendEncode(encode,entries,constants_Skip),[symbols,labels])).sort=sort,spec};const isL='item.orient === "left"',isR='item.orient === "right"',isLR=`(${isL} || ${isR})`,isVG=`datum.vgrad && ${isLR}`,legend_title_baseline=anchorExpr('"top"','"bottom"','"middle"'),exprAlign=`datum.vgrad && ${isR} ? (${anchorExpr('"right"','"left"','"center"')}) : (${isLR} && !(datum.vgrad && ${isL})) ? "left" : ${alignExpr}`,exprAnchor=`item._anchor || (${isLR} ? "middle" : "start")`,exprAngle=`${isVG} ? (${isL} ? -90 : 90) : 0`,exprBaseline=`${isLR} ? (datum.vgrad ? (${isR} ? "bottom" : "top") : ${legend_title_baseline}) : "top"`;var marks_clip=function(clip,scope){var expr;return Object(vega_util.F)(clip)&&(clip.signal?expr=clip.signal:clip.path?expr="pathShape("+clip_param(clip.path)+")":clip.sphere&&(expr="geoShape("+clip_param(clip.sphere)+', {type: "Sphere"})')),expr?scope.signalRef(expr):!!clip};function clip_param(value){return Object(vega_util.F)(value)&&value.signal?value.signal:Object(vega_util.Y)(value)}var marks_role=function(spec){var role=spec.role||"";return role.indexOf("axis")&&role.indexOf("legend")&&role.indexOf("title")?spec.type===GroupMark?"scope":role||MarkRole:role},marks_definition=function(spec){return{marktype:spec.type,name:spec.name||void 0,role:spec.role||marks_role(spec),zindex:+spec.zindex||void 0}},marks_interactive=function(spec,scope){return spec&&spec.signal?scope.signalRef(spec.signal):!1!==spec},parsers_transform=function(spec,scope){var def=register_definition(spec.type);def||Object(vega_util.n)("Unrecognized transform type: "+Object(vega_util.Y)(spec.type));var t=util_entry(def.type.toLowerCase(),null,transform_parseParameters(def,spec,scope));return spec.signal&&scope.addSignal(spec.signal,scope.proxy(t)),t.metadata=def.metadata||{},t};function transform_parseParameters(def,spec,scope){var pdef,i,n,params={};for(i=0,n=def.params.length;i<n;++i)params[(pdef=def.params[i]).name]=transform_parseParameter(pdef,spec,scope);return params}function transform_parseParameter(def,spec,scope){var type=def.type,value=spec[def.name];return"index"===type?function parseIndexParameter(def,spec,scope){Object(vega_util.H)(spec.from)||Object(vega_util.n)('Lookup "from" parameter must be a string literal.');return scope.getData(spec.from).lookupRef(scope,spec.key)}(0,spec,scope):void 0!==value?"param"===type?function parseSubParameters(def,spec,scope){var value=spec[def.name];return def.array?(Object(vega_util.A)(value)||Object(vega_util.n)("Expected an array of sub-parameters. Instead: "+Object(vega_util.Y)(value)),value.map((function(v){return parseSubParameter(def,v,scope)}))):parseSubParameter(def,value,scope)}(def,spec,scope):"projection"===type?scope.projectionRef(spec[def.name]):def.array&&!isSignal(value)?value.map((function(v){return parameterValue(def,v,scope)})):parameterValue(def,value,scope):void(def.required&&Object(vega_util.n)("Missing required "+Object(vega_util.Y)(spec.type)+" parameter: "+Object(vega_util.Y)(def.name)))}function parameterValue(def,value,scope){var type=def.type;if(isSignal(value))return transform_isExpr(type)?Object(vega_util.n)("Expression references can not be signals."):isField(type)?scope.fieldRef(value):isCompare(type)?scope.compareRef(value):scope.signalRef(value.signal);var expr=def.expr||isField(type);return expr&&function outerExpr(_){return _&&_.expr}(value)?scope.exprRef(value.expr,value.as):expr&&function outerField(_){return _&&_.field}(value)?util_fieldRef(value.field,value.as):transform_isExpr(type)?parsers_expression(value,scope):function isData(_){return"data"===_}(type)?util_ref(scope.getData(value).values):isField(type)?util_fieldRef(value):isCompare(type)?scope.compareRef(value):value}function parseSubParameter(def,value,scope){var params,pdef,k,i,n;for(i=0,n=def.params.length;i<n;++i){for(k in(pdef=def.params[i]).key)if(pdef.key[k]!==value[k]){pdef=null;break}if(pdef)break}return pdef||Object(vega_util.n)("Unsupported parameter: "+Object(vega_util.Y)(value)),params=Object(vega_util.o)(transform_parseParameters(pdef,value,scope),pdef.key),util_ref(scope.add(transforms_Params(params)))}function transform_isExpr(_){return"expr"===_}function isField(_){return"field"===_}function isCompare(_){return"compare"===_}function getDataRef(from,scope){return from.$ref?from:from.data&&from.data.$ref?from.data:util_ref(scope.getData(from.data).output)}function DataScope(scope,input,output,values,aggr){this.scope=scope,this.input=input,this.output=output,this.values=values,this.aggregate=aggr,this.index={}}DataScope.fromEntries=function(scope,entries){var n=entries.length,i=1,input=entries[0],values=entries[n-1],output=entries[n-2],aggr=null;for(input&&"load"===input.type&&(input=entries[1]),scope.add(entries[0]);i<n;++i)entries[i].params.pulse=util_ref(entries[i-1]),scope.add(entries[i]),"aggregate"===entries[i].type&&(aggr=entries[i]);return new DataScope(scope,input,output,values,aggr)};var DataScope_prototype=DataScope.prototype;function fieldKey(field){return Object(vega_util.H)(field)?field:null}function addSortField(scope,p,sort){var s,as=aggrField(sort.op,sort.field);if(p.ops){for(var i=0,n=p.as.length;i<n;++i)if(p.as[i]===as)return}else p.ops=["count"],p.fields=[null],p.as=["count"];sort.op&&(p.ops.push((s=sort.op.signal)?scope.signalRef(s):sort.op),p.fields.push(scope.fieldRef(sort.field)),p.as.push(as))}function DataScope_cache(scope,ds,name,optype,field,counts,index){var v,op,cache=ds[name]||(ds[name]={}),sort=function sortKey(sort){return Object(vega_util.F)(sort)?(sort.order===Descending?"-":"+")+aggrField(sort.op,sort.field):""}(counts),k=fieldKey(field);if(null!=k&&(scope=ds.scope,v=cache[k+=sort?"|"+sort:""]),!v){var params=counts?{field:keyFieldRef,pulse:ds.countsRef(scope,field,counts)}:{field:scope.fieldRef(field),pulse:util_ref(ds.output)};sort&&(params.sort=scope.sortRef(counts)),op=scope.add(util_entry(optype,void 0,params)),index&&(ds.index[field]=op),v=util_ref(op),null!=k&&(cache[k]=v)}return v}DataScope_prototype.countsRef=function(scope,field,sort){var v,a,p,cache=this.counts||(this.counts={}),k=fieldKey(field);return null!=k&&(scope=this.scope,v=cache[k]),v?sort&&sort.field&&addSortField(scope,v.agg.params,sort):(p={groupby:scope.fieldRef(field,"key"),pulse:util_ref(this.output)},sort&&sort.field&&addSortField(scope,p,sort),a=scope.add(transforms_Aggregate(p)),v=scope.add(transforms_Collect({pulse:util_ref(a)})),v={agg:a,ref:util_ref(v)},null!=k&&(cache[k]=v)),v.ref},DataScope_prototype.tuplesRef=function(){return util_ref(this.values)},DataScope_prototype.extentRef=function(scope,field){return DataScope_cache(scope,this,"extent","extent",field,!1)},DataScope_prototype.domainRef=function(scope,field){return DataScope_cache(scope,this,"domain","values",field,!1)},DataScope_prototype.valuesRef=function(scope,field,sort){return DataScope_cache(scope,this,"vals","values",field,sort||!0)},DataScope_prototype.lookupRef=function(scope,field){return DataScope_cache(scope,this,"lookup","tupleindex",field,!1)},DataScope_prototype.indataRef=function(scope,field){return DataScope_cache(scope,this,"indata","tupleindex",field,!0,!0)};var trigger=function(spec,scope,name){var update,expr,remove=spec.remove,insert=spec.insert,toggle=spec.toggle,modify=spec.modify,values=spec.values,op=scope.add(util_operator());update="if("+spec.trigger+',modify("'+name+'",'+[insert,remove,toggle,modify,values].map((function(_){return null==_?"null":_})).join(",")+"),0)",expr=parsers_expression(update,scope),op.update=expr.$expr,op.params=expr.$params},parsers_mark=function(spec,scope){var ops,op,input,store,enc,bound,render,sieve,name,joinRef,markRef,encodeRef,layoutRef,boundRef,role=marks_role(spec),group=spec.type===GroupMark,facet=spec.from&&spec.from.facet,layout=spec.layout||"scope"===role||role===roles_FrameRole,nested=role===MarkRole||layout||facet,overlap=spec.overlap;input=function(from,group,scope){var facet,key,op,dataRef,parent;return from?(facet=from.facet)&&(group||Object(vega_util.n)("Only group marks can be faceted."),null!=facet.field?dataRef=parent=getDataRef(facet,scope):(from.data?parent=util_ref(scope.getData(from.data).aggregate):((op=parsers_transform(Object(vega_util.o)({type:"aggregate",groupby:Object(vega_util.i)(facet.groupby)},facet.aggregate),scope)).params.key=scope.keyRef(facet.groupby),op.params.pulse=getDataRef(facet,scope),dataRef=parent=util_ref(scope.add(op))),key=scope.keyRef(facet.groupby,!0))):dataRef=util_ref(scope.add(transforms_Collect(null,[{}]))),dataRef||(dataRef=getDataRef(from,scope)),{key:key,pulse:dataRef,parent:parent}}(spec.from,group,scope),joinRef=util_ref(op=scope.add(transforms_DataJoin({key:input.key||(spec.key?util_fieldRef(spec.key):void 0),pulse:input.pulse,clean:!group}))),op=store=scope.add(transforms_Collect({pulse:joinRef})),op=scope.add(transforms_Mark({markdef:marks_definition(spec),interactive:marks_interactive(spec.interactive,scope),clip:marks_clip(spec.clip,scope),context:{$context:!0},groups:scope.lookup(),parent:scope.signals.parent?scope.signalRef("parent"):null,index:scope.markpath(),pulse:util_ref(op)})),markRef=util_ref(op),(op=enc=scope.add(transforms_Encode(encode_util_encoders(spec.encode,spec.type,role,spec.style,scope,{mod:!1,pulse:markRef})))).params.parent=scope.encode(),spec.transform&&spec.transform.forEach((function(_){const tx=parsers_transform(_,scope),md=tx.metadata;(md.generates||md.changes)&&Object(vega_util.n)("Mark transforms should not generate new data."),md.nomod||(enc.params.mod=!0),tx.params.pulse=util_ref(op),scope.add(op=tx)})),spec.sort&&(op=scope.add(transforms_SortItems({sort:scope.compareRef(spec.sort),pulse:util_ref(op)}))),encodeRef=util_ref(op),(facet||layout)&&(layoutRef=util_ref(layout=scope.add(transforms_ViewLayout({layout:scope.objectProperty(spec.layout),legends:scope.legends,mark:markRef,pulse:encodeRef})))),boundRef=util_ref(bound=scope.add(transforms_Bound({mark:markRef,pulse:layoutRef||encodeRef}))),group&&(nested&&((ops=scope.operators).pop(),layout&&ops.pop()),scope.pushState(encodeRef,layoutRef||boundRef,joinRef),facet?function(spec,scope,group){var subscope,source,values,op,facet=spec.from.facet,name=facet.name,data=getDataRef(facet,scope);facet.name||Object(vega_util.n)("Facet must have a name: "+Object(vega_util.Y)(facet)),facet.data||Object(vega_util.n)("Facet must reference a data set: "+Object(vega_util.Y)(facet)),facet.field?op=scope.add(transforms_PreFacet({field:scope.fieldRef(facet.field),pulse:data})):facet.groupby?op=scope.add(transforms_Facet({key:scope.keyRef(facet.groupby),group:util_ref(scope.proxy(group.parent)),pulse:data})):Object(vega_util.n)("Facet must specify groupby or field: "+Object(vega_util.Y)(facet)),source=(subscope=scope.fork()).add(transforms_Collect()),values=subscope.add(transforms_Sieve({pulse:util_ref(source)})),subscope.addData(name,new DataScope(subscope,source,source,values)),subscope.addSignal("parent",null),op.params.subflow={$subflow:parsers_spec(spec,subscope).toRuntime()}}(spec,scope,input):nested?function(spec,scope,input){var op=scope.add(transforms_PreFacet({pulse:input.pulse})),subscope=scope.fork();subscope.add(transforms_Sieve()),subscope.addSignal("parent",null),op.params.subflow={$subflow:parsers_spec(spec,subscope).toRuntime()}}(spec,scope,input):parsers_spec(spec,scope),scope.popState(),nested&&(layout&&ops.push(layout),ops.push(bound))),overlap&&(boundRef=function parseOverlap(overlap,source,scope){var tol,method=overlap.method,bound=overlap.bound,sep=overlap.separation,params={separation:isSignal(sep)?scope.signalRef(sep.signal):sep,method:isSignal(method)?scope.signalRef(method.signal):method,pulse:source};overlap.order&&(params.sort=scope.compareRef({field:overlap.order}));bound&&(tol=bound.tolerance,params.boundTolerance=isSignal(tol)?scope.signalRef(tol.signal):+tol,params.boundScale=scope.scaleRef(bound.scale),params.boundOrient=bound.orient);return util_ref(scope.add(transforms_Overlap(params)))}(overlap,boundRef,scope)),render=scope.add(transforms_Render({pulse:boundRef})),sieve=scope.add(transforms_Sieve({pulse:util_ref(render)},void 0,scope.parent())),null!=spec.name&&(name=spec.name,scope.addData(name,new DataScope(scope,store,render,sieve)),spec.on&&spec.on.forEach((function(on){(on.insert||on.remove||on.toggle)&&Object(vega_util.n)("Marks only support modify triggers."),trigger(on,scope,name)})))};var parsers_legend=function(spec,scope){var entryEncode,entryLayout,params,children,type,datum,dataRef,entryRef,group,config=scope.config.legend,encode=spec.encode||{},legendEncode=encode.legend||{},name=legendEncode.name||void 0,interactive=legendEncode.interactive,style=legendEncode.style,_=guide_util_lookup(spec,config),scale=LegendScales.reduce((function(a,b){return a||spec[b]}),0);return scale||Object(vega_util.n)("Missing valid scale for legend."),type=function legend_legendType(spec,scaleType){var type=spec.type||constants_Symbols;spec.type||1!==function scaleCount(spec){return LegendScales.reduce((function(count,type){return count+(spec[type]?1:0)}),0)}(spec)||!spec.fill&&!spec.stroke||(type=isContinuous(scaleType)?constants_Gradient:isDiscretizing(scaleType)?constants_Discrete:constants_Symbols);return type!==constants_Gradient?type:isDiscretizing(scaleType)?constants_Discrete:constants_Gradient}(spec,scope.scaleType(scale)),datum={title:null!=spec.title,type:type,vgrad:"symbol"!==type&&_.isVertical()},dataRef=util_ref(scope.add(transforms_Collect(null,[datum]))),legendEncode=extendEncode(function buildLegendEncode(_,config){var encode={enter:{},update:{}};return addEncoders(encode,{orient:_("orient"),offset:_("offset"),padding:_("padding"),titlePadding:_("titlePadding"),cornerRadius:_("cornerRadius"),fill:_("fillColor"),stroke:_("strokeColor"),strokeWidth:config.strokeWidth,strokeDash:config.strokeDash,x:_("legendX"),y:_("legendY")}),encode}(_,config),legendEncode,constants_Skip),entryEncode={enter:{x:{value:0},y:{value:0}}},entryRef=util_ref(scope.add(transforms_LegendEntries(params={type:type,scale:scope.scaleRef(scale),count:scope.objectProperty(_("tickCount")),limit:scope.property(_("symbolLimit")),values:scope.objectProperty(spec.values),minstep:scope.property(spec.tickMinStep),formatType:scope.property(spec.formatType),formatSpecifier:scope.property(spec.format)}))),type===constants_Gradient?(children=[legend_gradient(spec,scale,config,encode.gradient),legend_gradient_labels(spec,config,encode.labels,entryRef)],params.count=params.count||scope.signalRef(`max(2,2*floor((${deref(_.gradientLength())})/100))`)):type===constants_Discrete?children=[legend_gradient_discrete(spec,scale,config,encode.gradient,entryRef),legend_gradient_labels(spec,config,encode.labels,entryRef)]:(entryLayout=function legendSymbolLayout(spec,config){const _=guide_util_lookup(spec,config);return{align:_("gridAlign"),columns:_.entryColumns(),center:{row:!0,column:!1},padding:{row:_("rowPadding"),column:_("columnPadding")}}}(spec,config),children=[legend_symbol_groups(spec,config,encode,entryRef,deref(entryLayout.columns))],params.size=function sizeExpression(spec,scope,marks){var size=deref(getChannel("size",spec,marks)),strokeWidth=deref(getChannel("strokeWidth",spec,marks)),fontSize=deref(function getFontSize(encode,scope,style){return getEncoding("fontSize",encode)||function getStyle(name,scope,style){var s=scope.config.style[style];return s&&s[name]}("fontSize",scope,style)}(marks[1].encode,scope,GuideLabelStyle));return parsers_expression(`max(ceil(sqrt(${size})+${strokeWidth}),${fontSize})`,scope)}(spec,scope,children[0].marks)),children=[guide_group("legend-entry",null,null,dataRef,interactive,entryEncode,children,entryLayout)],datum.title&&children.push(function(spec,config,userEncode,dataRef){var encode,_=guide_util_lookup(spec,config);return addEncoders(encode={enter:{opacity:constants_zero},update:{opacity:constants_one,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:constants_zero}},{orient:_("titleOrient"),_anchor:_("titleAnchor"),anchor:{signal:exprAnchor},angle:{signal:exprAngle},align:{signal:exprAlign},baseline:{signal:exprBaseline},text:spec.title,fill:_("titleColor"),fillOpacity:_("titleOpacity"),font:_("titleFont"),fontSize:_("titleFontSize"),fontStyle:_("titleFontStyle"),fontWeight:_("titleFontWeight"),limit:_("titleLimit"),lineHeight:_("titleLineHeight")},{align:_("titleAlign"),baseline:_("titleBaseline")}),guide_mark(TextMark,"legend-title","guide-title",null,dataRef,encode,userEncode)}(spec,config,encode.title,dataRef)),group=guide_group("legend",style,name,dataRef,interactive,legendEncode,children),spec.zindex&&(group.zindex=spec.zindex),parsers_mark(group,scope)};function getChannel(name,spec,marks){return spec[name]?`scale("${spec[name]}",datum)`:getEncoding(name,marks[0].encode)}const angleExpr='item.orient==="left"?-90:item.orient==="right"?90:0';var parsers_title=function(spec,scope){var dataRef,group,_=guide_util_lookup(spec=Object(vega_util.H)(spec)?{text:spec}:spec,scope.config.title),encode=spec.encode||{},userEncode=encode.group||{},name=userEncode.name||void 0,interactive=userEncode.interactive,style=userEncode.style,children=[];return dataRef=util_ref(scope.add(transforms_Collect(null,[{}]))),children.push(function buildTitle(spec,_,userEncode,dataRef){var zero={value:0},text=spec.text,encode={enter:{opacity:zero},update:{opacity:{value:1}},exit:{opacity:zero}};return addEncoders(encode,{text:text,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:_("dx"),dy:_("dy"),fill:_("color"),font:_("font"),fontSize:_("fontSize"),fontStyle:_("fontStyle"),fontWeight:_("fontWeight"),lineHeight:_("lineHeight")},{align:_("align"),angle:_("angle"),baseline:_("baseline")}),guide_mark(TextMark,TitleTextRole,GroupTitleStyle,null,dataRef,encode,userEncode)}(spec,_,function titleEncode(spec){const encode=spec.encode;return encode&&encode.title||Object(vega_util.o)({name:spec.name,interactive:spec.interactive,style:spec.style},encode)}(spec),dataRef)),spec.subtitle&&children.push(function buildSubTitle(spec,_,userEncode,dataRef){var zero={value:0},text=spec.subtitle,encode={enter:{opacity:zero},update:{opacity:{value:1}},exit:{opacity:zero}};return addEncoders(encode,{text:text,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:_("dx"),dy:_("dy"),fill:_("subtitleColor"),font:_("subtitleFont"),fontSize:_("subtitleFontSize"),fontStyle:_("subtitleFontStyle"),fontWeight:_("subtitleFontWeight"),lineHeight:_("subtitleLineHeight")},{align:_("align"),angle:_("angle"),baseline:_("baseline")}),guide_mark(TextMark,TitleSubtitleRole,GroupSubtitleStyle,null,dataRef,encode,userEncode)}(spec,_,encode.subtitle,dataRef)),group=guide_group("title",style,name,dataRef,interactive,function groupEncode(_,userEncode){var encode={enter:{},update:{}};return addEncoders(encode,{orient:_("orient"),anchor:_("anchor"),align:{signal:alignExpr},angle:{signal:angleExpr},limit:_("limit"),frame:_("frame"),offset:_("offset")||0,padding:_("subtitlePadding")}),extendEncode(encode,userEncode,constants_Skip)}(_,userEncode),children),spec.zindex&&(group.zindex=spec.zindex),parsers_mark(group,scope)};function parseData(data,scope){var transforms=[];data.transform&&data.transform.forEach((function(tx){transforms.push(parsers_transform(tx,scope))})),data.on&&data.on.forEach((function(on){trigger(on,scope,data.name)})),scope.addDataPipeline(data.name,function analyze(data,scope,ops){var upstream,i,n,t,m,output=[],source=null,modify=!1,generate=!1;data.values?util_hasSignal(data.values)||util_hasSignal(data.format)?(output.push(data_load(scope,data)),output.push(source=collect())):output.push(source=collect({$ingest:data.values,$format:data.format})):data.url?util_hasSignal(data.url)||util_hasSignal(data.format)?(output.push(data_load(scope,data)),output.push(source=collect())):output.push(source=collect({$request:data.url,$format:data.format})):data.source&&(source=upstream=Object(vega_util.i)(data.source).map((function(d){return util_ref(scope.getData(d).output)})),output.push(null));for(i=0,n=ops.length;i<n;++i)t=ops[i],m=t.metadata,source||m.source||output.push(source=collect()),output.push(t),m.generates&&(generate=!0),m.modifies&&!generate&&(modify=!0),m.source?source=t:m.changes&&(source=null);upstream&&(n=upstream.length-1,output[0]=transforms_Relay({derive:modify,pulse:n?upstream:upstream[0]}),(modify||n)&&output.splice(1,0,collect()));source||output.push(collect());return output.push(transforms_Sieve({})),output}(data,scope,transforms))}function collect(values){var s=transforms_Collect({},values);return s.metadata={source:!0},s}function data_load(scope,data){return transforms_Load({url:data.url?scope.property(data.url):void 0,values:data.values?scope.property(data.values):void 0,format:scope.objectProperty(data.format)})}function axis_domain_position(spec,pos){return{scale:spec.scale,range:pos}}var axis_grid=function(spec,config,userEncode,dataRef,band){var encode,enter,exit,update,tickPos,u,v,v2,s,_=guide_util_lookup(spec,config),orient=spec.orient,vscale=spec.gridScale,sign="left"===orient||"top"===orient?1:-1,offset=function axis_grid_offsetValue(offset,sign){if(1===sign);else if(Object(vega_util.F)(offset)){for(var entry=offset=Object(vega_util.o)({},offset);null!=entry.mult;){if(!Object(vega_util.F)(entry.mult))return entry.mult*=sign,offset;entry=entry.mult=Object(vega_util.o)({},entry.mult)}entry.mult=sign}else offset=sign*(offset||0);return offset}(spec.offset,sign);return addEncoders(encode={enter:enter={opacity:constants_zero},update:update={opacity:constants_one},exit:exit={opacity:constants_zero}},{stroke:_("gridColor"),strokeDash:_("gridDash"),strokeDashOffset:_("gridDashOffset"),strokeOpacity:_("gridOpacity"),strokeWidth:_("gridWidth")}),tickPos={scale:spec.scale,field:Value,band:band.band,extra:band.extra,offset:band.offset,round:_("tickRound")},"top"===orient||"bottom"===orient?(u="x",v="y",s="height"):(u="y",v="x",s="width"),v2=v+"2",update[u]=enter[u]=exit[u]=tickPos,vscale?(update[v]=enter[v]={scale:vscale,range:0,mult:sign,offset:offset},update[v2]=enter[v2]={scale:vscale,range:1,mult:sign,offset:offset}):(update[v]=enter[v]={value:0,offset:offset},update[v2]=enter[v2]={signal:s,mult:sign,offset:offset}),guide_mark("rule","axis-grid",null,Value,dataRef,encode,userEncode)};function flushExpr(scale,threshold,a,b,c){return{signal:'flush(range("'+scale+'"), scale("'+scale+'", datum.value), '+threshold+","+a+","+b+","+c+")"}}var parsers_axis=function(spec,scope){var datum,dataRef,ticksRef,size,group,children,config=function(spec,scope){var config=scope.config,orient=spec.orient,xy="top"===orient||"bottom"===orient?config.axisX:config.axisY,or=config["axis"+orient[0].toUpperCase()+orient.slice(1)],band="band"===scope.scaleType(spec.scale)&&config.axisBand;return xy||or||band?Object(vega_util.o)({},config.axis,xy,or,band):config.axis}(spec,scope),encode=spec.encode||{},axisEncode=encode.axis||{},name=axisEncode.name||void 0,interactive=axisEncode.interactive,style=axisEncode.style,_=guide_util_lookup(spec,config),band=function tickBand(_){let band,extra,v=_("tickBand"),offset=_("tickOffset");return v?v.signal?(band={signal:`(${v.signal})==='extent'?1:0.5`},extra={signal:`(${v.signal})==='extent'?true:false`},Object(vega_util.F)(offset)||(offset={signal:`(${v.signal})==='extent'?0:${offset}`})):"extent"===v?(band=1,extra=!0,offset=0):(band=.5,extra=!1):(band=_("bandPosition"),extra=_("tickExtra")),{extra:extra,band:band,offset:offset}}(_);return datum={orient:spec.orient,ticks:!!_("ticks"),labels:!!_("labels"),grid:!!_("grid"),domain:!!_("domain"),title:null!=spec.title,translate:_("translate")},dataRef=util_ref(scope.add(transforms_Collect({},[datum]))),axisEncode=extendEncode({update:{offset:encoder(_("offset")||0),position:encoder(util_value(spec.position,0)),titlePadding:encoder(_("titlePadding")),minExtent:encoder(_("minExtent")),maxExtent:encoder(_("maxExtent")),range:{signal:`abs(span(range("${spec.scale}")))`}}},encode.axis,constants_Skip),ticksRef=util_ref(scope.add(transforms_AxisTicks({scale:scope.scaleRef(spec.scale),extra:scope.property(band.extra),count:scope.objectProperty(spec.tickCount),values:scope.objectProperty(spec.values),minstep:scope.property(spec.tickMinStep),formatType:scope.property(spec.formatType),formatSpecifier:scope.property(spec.format)}))),children=[],datum.grid&&children.push(axis_grid(spec,config,encode.grid,ticksRef,band)),datum.ticks&&(size=_("tickSize"),children.push(function(spec,config,userEncode,dataRef,size,band){var encode,enter,exit,update,tickSize,tickPos,_=guide_util_lookup(spec,config),orient=spec.orient,sign="left"===orient||"top"===orient?-1:1;return addEncoders(encode={enter:enter={opacity:constants_zero},update:update={opacity:constants_one},exit:exit={opacity:constants_zero}},{stroke:_("tickColor"),strokeDash:_("tickDash"),strokeDashOffset:_("tickDashOffset"),strokeOpacity:_("tickOpacity"),strokeWidth:_("tickWidth")}),(tickSize=encoder(size)).mult=sign,tickPos={scale:spec.scale,field:Value,band:band.band,extra:band.extra,offset:band.offset,round:_("tickRound")},"top"===orient||"bottom"===orient?(update.y=enter.y=constants_zero,update.y2=enter.y2=tickSize,update.x=enter.x=exit.x=tickPos):(update.x=enter.x=constants_zero,update.x2=enter.x2=tickSize,update.y=enter.y=exit.y=tickPos),guide_mark("rule","axis-tick",null,Value,dataRef,encode,userEncode)}(spec,config,encode.ticks,ticksRef,size,band))),datum.labels&&(size=datum.ticks?size:0,children.push(function(spec,config,userEncode,dataRef,size,band){var encode,enter,tickSize,tickPos,align,baseline,offset,bound,overlap,separation,_=guide_util_lookup(spec,config),orient=spec.orient,sign="left"===orient||"top"===orient?-1:1,isXAxis="top"===orient||"bottom"===orient,scale=spec.scale,flush=deref(_("labelFlush")),flushOffset=deref(_("labelFlushOffset")),flushOn=0===flush||!!flush,labelAlign=_("labelAlign"),labelBaseline=_("labelBaseline");return(tickSize=encoder(size)).mult=sign,tickSize.offset=encoder(_("labelPadding")||0),tickSize.offset.mult=sign,tickPos={scale:scale,field:Value,band:.5,offset:band.offset},isXAxis?(align=labelAlign||(flushOn?flushExpr(scale,flush,'"left"','"right"','"center"'):"center"),baseline=labelBaseline||("top"===orient?"bottom":"top"),offset=!labelAlign):(align=labelAlign||("right"===orient?"left":"right"),baseline=labelBaseline||(flushOn?flushExpr(scale,flush,'"top"','"bottom"','"middle"'):"middle"),offset=!labelBaseline),offset=offset&&flushOn&&flushOffset?flushExpr(scale,flush,"-("+flushOffset+")",flushOffset,0):null,addEncoders(encode={enter:enter={opacity:constants_zero,x:isXAxis?tickPos:tickSize,y:isXAxis?tickSize:tickPos},update:{opacity:constants_one,text:{field:"label"},x:enter.x,y:enter.y},exit:{opacity:constants_zero,x:enter.x,y:enter.y}},{[isXAxis?"dx":"dy"]:offset,align:align,baseline:baseline,angle:_("labelAngle"),fill:_("labelColor"),fillOpacity:_("labelOpacity"),font:_("labelFont"),fontSize:_("labelFontSize"),fontWeight:_("labelFontWeight"),fontStyle:_("labelFontStyle"),limit:_("labelLimit")}),bound=_("labelBound"),overlap=_("labelOverlap"),separation=_("labelSeparation"),spec=guide_mark(TextMark,"axis-label",GuideLabelStyle,Value,dataRef,encode,userEncode),(overlap||bound)&&(spec.overlap={separation:separation,method:overlap,order:"datum.index",bound:bound?{scale:scale,orient:orient,tolerance:bound}:null}),spec}(spec,config,encode.labels,ticksRef,size,band))),datum.domain&&children.push(function(spec,config,userEncode,dataRef){var encode,enter,update,u,u2,v,_=guide_util_lookup(spec,config),orient=spec.orient;return addEncoders(encode={enter:enter={opacity:constants_zero},update:update={opacity:constants_one},exit:{opacity:constants_zero}},{stroke:_("domainColor"),strokeDash:_("domainDash"),strokeDashOffset:_("domainDashOffset"),strokeWidth:_("domainWidth"),strokeOpacity:_("domainOpacity")}),"top"===orient||"bottom"===orient?(u="x",v="y"):(u="y",v="x"),u2=u+"2",enter[v]=constants_zero,update[u]=enter[u]=axis_domain_position(spec,0),update[u2]=enter[u2]=axis_domain_position(spec,1),guide_mark("rule","axis-domain",null,null,dataRef,encode,userEncode)}(spec,config,encode.domain,dataRef)),datum.title&&children.push(function(spec,config,userEncode,dataRef){var encode,enter,update,titlePos,_=guide_util_lookup(spec,config),orient=spec.orient,sign="left"===orient||"top"===orient?-1:1,horizontal="top"===orient||"bottom"===orient;return encode={enter:enter={opacity:constants_zero,anchor:encoder(_("titleAnchor")),align:{signal:alignExpr}},update:update=Object(vega_util.o)({},enter,{opacity:constants_one,text:encoder(spec.title)}),exit:{opacity:constants_zero}},titlePos={signal:`lerp(range("${spec.scale}"), ${anchorExpr(0,1,.5)})`},horizontal?(update.x=titlePos,enter.angle={value:0},enter.baseline={value:"top"===orient?"bottom":"top"}):(update.y=titlePos,enter.angle={value:90*sign},enter.baseline={value:"bottom"}),addEncoders(encode,{angle:_("titleAngle"),baseline:_("titleBaseline"),fill:_("titleColor"),fillOpacity:_("titleOpacity"),font:_("titleFont"),fontSize:_("titleFontSize"),fontStyle:_("titleFontStyle"),fontWeight:_("titleFontWeight"),limit:_("titleLimit"),lineHeight:_("titleLineHeight")},{align:_("titleAlign")}),!addEncode(encode,"x",_("titleX"),"update")&&!horizontal&&!has("x",userEncode)&&(encode.enter.auto={value:!0}),!addEncode(encode,"y",_("titleY"),"update")&&horizontal&&!has("y",userEncode)&&(encode.enter.auto={value:!0}),guide_mark(TextMark,"axis-title","guide-title",null,dataRef,encode,userEncode)}(spec,config,encode.title,dataRef)),group=guide_group("axis",style,name,dataRef,interactive,axisEncode,children),spec.zindex&&(group.zindex=spec.zindex),parsers_mark(group,scope)},parsers_spec=function(spec,scope,preprocessed){var signals=Object(vega_util.i)(spec.signals),scales=Object(vega_util.i)(spec.scales);return preprocessed||signals.forEach(_=>parsers_signal(_,scope)),Object(vega_util.i)(spec.projections).forEach(_=>(function(proj,scope){var config=scope.config.projection||{},params={};for(var name in proj)"name"!==name&&(params[name]=projection_parseParameter(proj[name],name,scope));for(name in config)null==params[name]&&(params[name]=projection_parseParameter(config[name],name,scope));scope.addProjection(proj.name,params)})(_,scope)),scales.forEach(_=>initScale(_,scope)),Object(vega_util.i)(spec.data).forEach(_=>parseData(_,scope)),scales.forEach(_=>parseScale(_,scope)),(preprocessed||signals).forEach(_=>(function(signal,scope){var op=scope.getSignal(signal.name),expr=signal.update;signal.init&&(expr?Object(vega_util.n)("Signals can not include both init and update expressions."):(expr=signal.init,op.initonly=!0)),expr&&(expr=parsers_expression(expr,scope),op.update=expr.$expr,op.params=expr.$params),signal.on&&signal.on.forEach((function(_){parsers_update(_,scope,op.id)}))})(_,scope)),Object(vega_util.i)(spec.axes).forEach(_=>parsers_axis(_,scope)),Object(vega_util.i)(spec.marks).forEach(_=>parsers_mark(_,scope)),Object(vega_util.i)(spec.legends).forEach(_=>parsers_legend(_,scope)),spec.title&&parsers_title(spec.title,scope),scope.parseLambdas(),scope},view_defined=Object(vega_util.cb)(["width","height","padding","autosize"]);function parseView(spec,scope){var op,input,encode,parent,root,signals,config=scope.config;return scope.background=spec.background||config.background,scope.eventConfig=config.events,root=util_ref(scope.root=scope.add(util_operator())),scope.addSignal("width",spec.width||0),scope.addSignal("height",spec.height||0),scope.addSignal("padding",parsers_padding(spec.padding,config)),scope.addSignal("autosize",parsers_autosize(spec.autosize,config)),scope.legends=scope.objectProperty(config.legend&&config.legend.layout),signals=function addSignals(scope,signals,config){if(Object(vega_util.i)(signals).forEach(_=>{view_defined[_.name]||parsers_signal(_,scope)}),!config)return signals;const out=Object(vega_util.i)(signals).slice();return Object(vega_util.i)(config).forEach(_=>{scope.hasOwnSignal(_.name)||(parsers_signal(_,scope),out.push(_))}),out}(scope,spec.signals,config.signals),input=scope.add(transforms_Collect()),encode=extendEncode({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},spec.encode),encode=scope.add(transforms_Encode(encode_util_encoders(encode,GroupMark,roles_FrameRole,spec.style,scope,{pulse:util_ref(input)}))),parent=scope.add(transforms_ViewLayout({layout:scope.objectProperty(spec.layout),legends:scope.legends,autosize:scope.signalRef("autosize"),mark:root,pulse:util_ref(encode)})),scope.operators.pop(),scope.pushState(util_ref(encode),util_ref(parent),null),parsers_spec(spec,scope,signals),scope.operators.push(parent),op=scope.add(transforms_Bound({mark:root,pulse:util_ref(parent)})),op=scope.add(transforms_Render({pulse:util_ref(op)})),op=scope.add(transforms_Sieve({pulse:util_ref(op)})),scope.addData("root",new DataScope(scope,input,input,op)),scope}function Scope_Scope(config){this.config=config,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Subscope(scope){this.config=scope.config,this.legends=scope.legends,this.field=Object.create(scope.field),this.signals=Object.create(scope.signals),this.lambdas=Object.create(scope.lambdas),this.scales=Object.create(scope.scales),this.events=Object.create(scope.events),this.data=Object.create(scope.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++scope._nextsub[0],this._nextsub=scope._nextsub,this._parent=scope._parent.slice(),this._encode=scope._encode.slice(),this._lookup=scope._lookup.slice(),this._markpath=scope._markpath}var Scope_prototype=Scope_Scope.prototype=Subscope.prototype;function propertyLambda(spec){return(Object(vega_util.A)(spec)?arrayLambda:objectLambda)(spec)}function arrayLambda(array){for(var value,code="[",i=0,n=array.length;i<n;++i)value=array[i],code+=(i>0?",":"")+(Object(vega_util.F)(value)?value.signal||propertyLambda(value):Object(vega_util.Y)(value));return code+"]"}function objectLambda(obj){var key,value,code="{",i=0;for(key in obj)value=obj[key],code+=(++i>1?",":"")+Object(vega_util.Y)(key)+":"+(Object(vega_util.F)(value)?value.signal||propertyLambda(value):Object(vega_util.Y)(value));return code+"}"}Scope_prototype.fork=function(){return new Subscope(this)},Scope_prototype.isSubscope=function(){return this._subid>0},Scope_prototype.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},Scope_prototype.id=function(){return(this._subid?this._subid+":":0)+this._id++},Scope_prototype.add=function(op){return this.operators.push(op),op.id=this.id(),op.refs&&(op.refs.forEach((function(ref){ref.$ref=op.id})),op.refs=null),op},Scope_prototype.proxy=function(op){var vref=op instanceof Entry?util_ref(op):op;return this.add(transforms_Proxy({value:vref}))},Scope_prototype.addStream=function(stream){return this.streams.push(stream),stream.id=this.id(),stream},Scope_prototype.addUpdate=function(update){return this.updates.push(update),update},Scope_prototype.finish=function(){var name,ds;for(name in this.root&&(this.root.root=!0),this.signals)this.signals[name].signal=name;for(name in this.scales)this.scales[name].scale=name;function annotate(op,name,type){var data;op&&((data=op.data||(op.data={}))[name]||(data[name]=[])).push(type)}for(name in this.data)for(var field in annotate((ds=this.data[name]).input,name,"input"),annotate(ds.output,name,"output"),annotate(ds.values,name,"values"),ds.index)annotate(ds.index[field],name,"index:"+field);return this},Scope_prototype.pushState=function(encode,parent,lookup){this._encode.push(util_ref(this.add(transforms_Sieve({pulse:encode})))),this._parent.push(parent),this._lookup.push(lookup?util_ref(this.proxy(lookup)):null),this._markpath.push(-1)},Scope_prototype.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},Scope_prototype.parent=function(){return Object(vega_util.T)(this._parent)},Scope_prototype.encode=function(){return Object(vega_util.T)(this._encode)},Scope_prototype.lookup=function(){return Object(vega_util.T)(this._lookup)},Scope_prototype.markpath=function(){var p=this._markpath;return++p[p.length-1]},Scope_prototype.fieldRef=function(field,name){if(Object(vega_util.H)(field))return util_fieldRef(field,name);field.signal||Object(vega_util.n)("Unsupported field reference: "+Object(vega_util.Y)(field));var params,s=field.signal,f=this.field[s];return f||(params={name:this.signalRef(s)},name&&(params.as=name),this.field[s]=f=util_ref(this.add(transforms_Field(params)))),f},Scope_prototype.compareRef=function(cmp){function check(_){return isSignal(_)?(signal=!0,scope.signalRef(_.signal)):function util_isExpr(_){return _&&_.expr}(_)?(signal=!0,scope.exprRef(_.expr)):_}var scope=this,signal=!1,fields=Object(vega_util.i)(cmp.field).map(check),orders=Object(vega_util.i)(cmp.order).map(check);return signal?util_ref(this.add(transforms_Compare({fields:fields,orders:orders}))):compareRef(fields,orders)},Scope_prototype.keyRef=function(fields,flat){var sig=this.signals,signal=!1;return fields=Object(vega_util.i)(fields).map((function check(_){return isSignal(_)?(signal=!0,util_ref(sig[_.signal])):_})),signal?util_ref(this.add(transforms_Key({fields:fields,flat:flat}))):function keyRef(fields,flat){var ref={$key:fields};return flat&&(ref.$flat=!0),ref}(fields,flat)},Scope_prototype.sortRef=function(sort){if(!sort)return sort;var a=aggrField(sort.op,sort.field),o=sort.order||"ascending";return o.signal?util_ref(this.add(transforms_Compare({fields:a,orders:this.signalRef(o.signal)}))):compareRef(a,o)},Scope_prototype.event=function(source,type){var key=source+":"+type;if(!this.events[key]){var id=this.id();this.streams.push({id:id,source:source,type:type}),this.events[key]=id}return this.events[key]},Scope_prototype.hasOwnSignal=function(name){return Object(vega_util.v)(this.signals,name)},Scope_prototype.addSignal=function(name,value){this.hasOwnSignal(name)&&Object(vega_util.n)("Duplicate signal name: "+Object(vega_util.Y)(name));var op=value instanceof Entry?value:this.add(util_operator(value));return this.signals[name]=op},Scope_prototype.getSignal=function(name){return this.signals[name]||Object(vega_util.n)("Unrecognized signal name: "+Object(vega_util.Y)(name)),this.signals[name]},Scope_prototype.signalRef=function(s){return this.signals[s]?util_ref(this.signals[s]):(Object(vega_util.v)(this.lambdas,s)||(this.lambdas[s]=this.add(util_operator(null))),util_ref(this.lambdas[s]))},Scope_prototype.parseLambdas=function(){for(var code=Object.keys(this.lambdas),i=0,n=code.length;i<n;++i){var s=code[i],e=parsers_expression(s,this),op=this.lambdas[s];op.params=e.$params,op.update=e.$expr}},Scope_prototype.property=function(spec){return spec&&spec.signal?this.signalRef(spec.signal):spec},Scope_prototype.objectProperty=function(spec){return spec&&Object(vega_util.F)(spec)?this.signalRef(spec.signal||propertyLambda(spec)):spec},Scope_prototype.exprRef=function(code,name){var params={expr:parsers_expression(code,this)};return name&&(params.expr.$name=name),util_ref(this.add(transforms_Expression(params)))},Scope_prototype.addBinding=function(name,bind){this.bindings||Object(vega_util.n)("Nested signals do not support binding: "+Object(vega_util.Y)(name)),this.bindings.push(Object(vega_util.o)({signal:name},bind))},Scope_prototype.addScaleProj=function(name,transform){Object(vega_util.v)(this.scales,name)&&Object(vega_util.n)("Duplicate scale or projection name: "+Object(vega_util.Y)(name)),this.scales[name]=this.add(transform)},Scope_prototype.addScale=function(name,params){this.addScaleProj(name,transforms_Scale(params))},Scope_prototype.addProjection=function(name,params){this.addScaleProj(name,transforms_Projection(params))},Scope_prototype.getScale=function(name){return this.scales[name]||Object(vega_util.n)("Unrecognized scale name: "+Object(vega_util.Y)(name)),this.scales[name]},Scope_prototype.projectionRef=Scope_prototype.scaleRef=function(name){return util_ref(this.getScale(name))},Scope_prototype.projectionType=Scope_prototype.scaleType=function(name){return this.getScale(name).params.type},Scope_prototype.addData=function(name,dataScope){return Object(vega_util.v)(this.data,name)&&Object(vega_util.n)("Duplicate data set name: "+Object(vega_util.Y)(name)),this.data[name]=dataScope},Scope_prototype.getData=function(name){return this.data[name]||Object(vega_util.n)("Undefined data set name: "+Object(vega_util.Y)(name)),this.data[name]},Scope_prototype.addDataPipeline=function(name,entries){return Object(vega_util.v)(this.data,name)&&Object(vega_util.n)("Duplicate data set name: "+Object(vega_util.Y)(name)),this.addData(name,DataScope.fromEntries(this,entries))};var src_parse=function(spec,config){return Object(vega_util.F)(spec)||Object(vega_util.n)("Input Vega specification must be an object."),parseView(spec,new Scope_Scope(config=Object(vega_util.M)({padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:"#4c78a8"},area:{fill:"#4c78a8"},image:null,line:{stroke:"#4c78a8",strokeWidth:2},path:{stroke:"#4c78a8"},rect:{fill:"#4c78a8"},rule:{stroke:"#000"},shape:{stroke:"#4c78a8"},symbol:{fill:"#4c78a8",size:64},text:{fill:"#000",font:"sans-serif",fontSize:11},style:{"guide-label":{fill:"#000",font:"sans-serif",fontSize:10},"guide-title":{fill:"#000",font:"sans-serif",fontSize:11,fontWeight:"bold"},"group-title":{fill:"#000",font:"sans-serif",fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:"#000",font:"sans-serif",fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:"#ddd"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:"#888",grid:!1,gridWidth:1,gridColor:"#ddd",labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:"#888",tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:"#ddd",gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:"#888",titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}},config,spec.config))).toRuntime()};Object(vega_util.o)(register_transforms,vega_transforms_namespaceObject,vega_view_transforms_namespaceObject,vega_encode_namespaceObject,vega_geo_namespaceObject,vega_force_namespaceObject,vega_hierarchy_namespaceObject,vega_regression_namespaceObject,vega_voronoi_namespaceObject,vega_wordcloud_namespaceObject,vega_crossfilter_namespaceObject);var build_package=__webpack_require__(271);Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function r(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,(function(a,e){return Array.isArray(e)?a.push.apply(a,r.call(e,t-1)):a.push(e),a}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(r){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var clone_clone=__webpack_require__(272),clone_default=__webpack_require__.n(clone_clone),fast_deep_equal=__webpack_require__(273),fast_deep_equal_default=__webpack_require__.n(fast_deep_equal),fast_json_stable_stringify=__webpack_require__(124),fast_json_stable_stringify_default=__webpack_require__.n(fast_json_stable_stringify);function isLogicalOr(op){return!!op.or}function isLogicalAnd(op){return!!op.and}function isLogicalNot(op){return!!op.not}function normalizeLogicalOperand(op,normalizer){return isLogicalNot(op)?{not:normalizeLogicalOperand(op.not,normalizer)}:isLogicalAnd(op)?{and:op.and.map(o=>normalizeLogicalOperand(o,normalizer))}:isLogicalOr(op)?{or:op.or.map(o=>normalizeLogicalOperand(o,normalizer))}:normalizer(op)}const deepEqual=fast_deep_equal_default.a,duplicate=clone_default.a;function util_pick(obj,props){const copy={};for(const prop of props)Object(vega_util.v)(obj,prop)&&(copy[prop]=obj[prop]);return copy}function omit(obj,props){const copy=Object.assign({},obj);for(const prop of props)delete copy[prop];return copy}Set.prototype.toJSON=function(){return`Set(${[...this].map(x=>fast_json_stable_stringify_default()(x)).join(",")})`};const stringify=fast_json_stable_stringify_default.a;function util_hash(a){if(Object(vega_util.E)(a))return a;const str=Object(vega_util.H)(a)?a:fast_json_stable_stringify_default()(a);if(str.length<250)return str;let h=0;for(let i=0;i<str.length;i++){h=(h<<5)-h+str.charCodeAt(i),h&=h}return h}function isNullOrFalse(x){return!1===x||null===x}function util_contains(array,item){return array.indexOf(item)>-1}function some(arr,f){let i=0;for(const[k,a]of arr.entries())if(f(a,k,i++))return!0;return!1}function every(arr,f){let i=0;for(const[k,a]of arr.entries())if(!f(a,k,i++))return!1;return!0}function deepMerge_(dest,src){for(const property of Object.keys(src))Object(vega_util.ib)(dest,property,src[property],!0)}function unique(values,f){const results=[],u={};let v;for(const val of values)(v=f(val))in u||(u[v]=1,results.push(val));return results}function hasIntersection(a,b){for(const key of a)if(b.has(key))return!0;return!1}function prefixGenerator(a){const prefixes=new Set;for(const x of a){const wrappedWithAccessors=Object(vega_util.X)(x).map((y,i)=>0===i?y:`[${y}]`);wrappedWithAccessors.map((_,i)=>wrappedWithAccessors.slice(0,i+1).join("")).forEach(y=>prefixes.add(y))}return prefixes}function fieldIntersection(a,b){return void 0===a||void 0===b||hasIntersection(prefixGenerator(a),prefixGenerator(b))}const util_keys=Object.keys;function util_vals(x){const _vals=[];for(const k in x)Object(vega_util.v)(x,k)&&_vals.push(x[k]);return _vals}function util_isBoolean(b){return!0===b||!1===b}function varName(s){const alphanumericS=s.replace(/\W/g,"_");return(s.match(/^\d+/)?"_":"")+alphanumericS}function logicalExpr(op,cb){return isLogicalNot(op)?"!("+logicalExpr(op.not,cb)+")":isLogicalAnd(op)?"("+op.and.map(and=>logicalExpr(and,cb)).join(") && (")+")":isLogicalOr(op)?"("+op.or.map(or=>logicalExpr(or,cb)).join(") || (")+")":cb(op)}function deleteNestedProperty(obj,orderedProps){if(0===orderedProps.length)return!0;const prop=orderedProps.shift();return deleteNestedProperty(obj[prop],orderedProps)&&delete obj[prop],0===util_keys(obj).length}function titlecase(s){return s.charAt(0).toUpperCase()+s.substr(1)}function accessPathWithDatum(path,datum="datum"){const pieces=Object(vega_util.X)(path),prefixes=[];for(let i=1;i<=pieces.length;i++){const prefix=`[${pieces.slice(0,i).map(vega_util.Y).join("][")}]`;prefixes.push(`${datum}${prefix}`)}return prefixes.join(" && ")}function replacePathInField(path){return`${Object(vega_util.X)(path).map(p=>replaceAll(p,".","\\.")).join("\\.")}`}function replaceAll(string,find,replacement){return string.replace(new RegExp(find.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),replacement)}function removePathFromField(path){return`${Object(vega_util.X)(path).join(".")}`}function accessPathDepth(path){return path?Object(vega_util.X)(path).length:0}function getFirstDefined(...args){for(const arg of args)if(void 0!==arg)return arg}let idCounter=42;function uniqueId(prefix){const id=++idCounter;return prefix?String(prefix)+id:id}function normalizeAngle(angle){return(angle%360+360)%360}const AREA="area",BAR="bar",IMAGE="image",LINE="line",POINT="point",RECT="rect",RULE="rule",TEXT="text",TICK="tick",TRAIL="trail",CIRCLE="circle",SQUARE="square",GEOSHAPE="geoshape",MARK_INDEX={area:1,bar:1,image:1,line:1,point:1,text:1,tick:1,trail:1,rect:1,geoshape:1,rule:1,circle:1,square:1};function isPathMark(m){return util_contains(["line","area","trail"],m)}function isRectBasedMark(m){return util_contains(["rect","bar","image"],m)}const PRIMITIVE_MARKS=util_keys(MARK_INDEX);function isMarkDef(mark){return mark.type}Object(vega_util.cb)(PRIMITIVE_MARKS);const FILL_STROKE_CONFIG=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit","fill","fillOpacity"],VL_ONLY_MARK_CONFIG_PROPERTIES=["filled","color","tooltip","invalid","timeUnitBandPosition","timeUnitBand"],defaultBarConfig={binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},defaultRectConfig={binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5};function isUnitSpec(spec){return!!spec.mark}class base_CompositeMarkNormalizer{constructor(name,run){this.name=name,this.run=run}hasMatchingType(spec){return!!isUnitSpec(spec)&&function getMarkType(m){return isMarkDef(m)?m.type:m}(spec.mark)===this.name}}const AGGREGATE_OP_INDEX={argmax:1,argmin:1,average:1,count:1,distinct:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},MULTIDOMAIN_SORT_OP_INDEX={count:1,min:1,max:1};function isArgminDef(a){return!!a&&!!a.argmin}function isArgmaxDef(a){return!!a&&!!a.argmax}util_keys(AGGREGATE_OP_INDEX);function isAggregateOp(a){return Object(vega_util.H)(a)&&!!AGGREGATE_OP_INDEX[a]}const COUNTING_OPS=["count","valid","missing","distinct"];function isCountingAggregateOp(aggregate){return Object(vega_util.H)(aggregate)&&util_contains(COUNTING_OPS,aggregate)}const SUM_OPS=["count","sum","distinct","valid","missing"],SHARED_DOMAIN_OP_INDEX=Object(vega_util.cb)(["mean","average","median","q1","q3","min","max"]),ROW="row",COLUMN="column",FACET="facet",channel_X="x",channel_Y="y",channel_X2="x2",channel_Y2="y2",LATITUDE="latitude",LONGITUDE="longitude",LATITUDE2="latitude2",LONGITUDE2="longitude2",COLOR="color",FILL="fill",STROKE="stroke",SHAPE="shape",SIZE="size",OPACITY="opacity",FILLOPACITY="fillOpacity",STROKEOPACITY="strokeOpacity",STROKEWIDTH="strokeWidth",channel_TEXT="text",ORDER="order",DETAIL="detail",KEY="key",TOOLTIP="tooltip",HREF="href",URL="url",POSITION_CHANNEL_INDEX={x:1,y:1,x2:1,y2:1};const GEOPOSITION_CHANNEL_INDEX={longitude:1,longitude2:1,latitude:1,latitude2:1};const GEOPOSITION_CHANNELS=util_keys(GEOPOSITION_CHANNEL_INDEX),UNIT_CHANNEL_INDEX=Object.assign(Object.assign(Object.assign({},POSITION_CHANNEL_INDEX),GEOPOSITION_CHANNEL_INDEX),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,size:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1});function isColorChannel(channel){return"color"===channel||"fill"===channel||"stroke"===channel}const FACET_CHANNEL_INDEX={row:1,column:1,facet:1},FACET_CHANNELS=util_keys(FACET_CHANNEL_INDEX),CHANNEL_INDEX=Object.assign(Object.assign({},UNIT_CHANNEL_INDEX),FACET_CHANNEL_INDEX),CHANNELS=util_keys(CHANNEL_INDEX),{order:_o,detail:channel_d,tooltip:_tt1}=CHANNEL_INDEX,SINGLE_DEF_CHANNEL_INDEX=__rest(CHANNEL_INDEX,["order","detail","tooltip"]),{row:channel_r,column:channel_c,facet:channel_f}=SINGLE_DEF_CHANNEL_INDEX,SINGLE_DEF_UNIT_CHANNEL_INDEX=__rest(SINGLE_DEF_CHANNEL_INDEX,["row","column","facet"]);util_keys(SINGLE_DEF_CHANNEL_INDEX),util_keys(SINGLE_DEF_UNIT_CHANNEL_INDEX);function isSingleDefUnitChannel(str){return!!SINGLE_DEF_UNIT_CHANNEL_INDEX[str]}function isChannel(str){return!!CHANNEL_INDEX[str]}const SECONDARY_RANGE_CHANNEL=["x2","y2","latitude2","longitude2"];function isSecondaryRangeChannel(c){return getMainRangeChannel(c)!==c}function getMainRangeChannel(channel){switch(channel){case"x2":return"x";case"y2":return"y";case"latitude2":return"latitude";case"longitude2":return"longitude"}return channel}function getSecondaryRangeChannel(channel){switch(channel){case"x":return"x2";case"y":return"y2";case"latitude":return"latitude2";case"longitude":return"longitude2"}}util_keys(UNIT_CHANNEL_INDEX);const{x:_x,y:_y,x2:_x2,y2:_y2,latitude:_latitude,longitude:_longitude,latitude2:_latitude2,longitude2:_longitude2}=UNIT_CHANNEL_INDEX,NONPOSITION_CHANNEL_INDEX=__rest(UNIT_CHANNEL_INDEX,["x","y","x2","y2","latitude","longitude","latitude2","longitude2"]),NONPOSITION_CHANNELS=util_keys(NONPOSITION_CHANNEL_INDEX),POSITION_SCALE_CHANNEL_INDEX={x:1,y:1},POSITION_SCALE_CHANNELS=util_keys(POSITION_SCALE_CHANNEL_INDEX);function getSizeType(channel){return"x"===channel?"width":"height"}function getPositionScaleChannel(sizeType){return"width"===sizeType?"x":"y"}const{text:_t,tooltip:_tt,href:_hr,url:_u,detail:_dd,key:channel_k,order:_oo}=NONPOSITION_CHANNEL_INDEX,NONPOSITION_SCALE_CHANNEL_INDEX=__rest(NONPOSITION_CHANNEL_INDEX,["text","tooltip","href","url","detail","key","order"]),NONPOSITION_SCALE_CHANNELS=util_keys(NONPOSITION_SCALE_CHANNEL_INDEX);const SCALE_CHANNEL_INDEX=Object.assign(Object.assign({},POSITION_SCALE_CHANNEL_INDEX),NONPOSITION_SCALE_CHANNEL_INDEX),SCALE_CHANNELS=util_keys(SCALE_CHANNEL_INDEX);function isScaleChannel(channel){return!!SCALE_CHANNEL_INDEX[channel]}function supportMark(channel,mark){return function getSupportedMark(channel){switch(channel){case COLOR:case FILL:case STROKE:case DETAIL:case KEY:case TOOLTIP:case HREF:case ORDER:case OPACITY:case FILLOPACITY:case STROKEOPACITY:case STROKEWIDTH:case FACET:case ROW:case COLUMN:return ALL_MARKS;case channel_X:case channel_Y:case LATITUDE:case LONGITUDE:return ALL_MARKS_EXCEPT_GEOSHAPE;case channel_X2:case channel_Y2:case LATITUDE2:case LONGITUDE2:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case SIZE:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case SHAPE:return{point:"always",geoshape:"always"};case channel_TEXT:return{text:"always"};case URL:return{image:"always"}}}(channel)[mark]}const ALL_MARKS={area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:channel_g}=ALL_MARKS,ALL_MARKS_EXCEPT_GEOSHAPE=__rest(ALL_MARKS,["geoshape"]);function rangeType(channel){switch(channel){case channel_X:case channel_Y:case SIZE:case STROKEWIDTH:case OPACITY:case FILLOPACITY:case STROKEOPACITY:case channel_X2:case channel_Y2:return;case FACET:case ROW:case COLUMN:case SHAPE:case channel_TEXT:case TOOLTIP:case HREF:case URL:return"discrete";case COLOR:case FILL:case STROKE:return"flexible";case LATITUDE:case LONGITUDE:case LATITUDE2:case LONGITUDE2:case DETAIL:case KEY:case ORDER:return}}function invalidSpec(spec){return`Invalid specification ${JSON.stringify(spec)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const FIT_NON_SINGLE='Autosize "fit" only works for single views and layered views.';function containerSizeNonSingle(name){return`${"width"==name?"Width":"Height"} "container" only works for single views and layered views.`}function containerSizeNotCompatibleWithAutosize(name){return`${"width"==name?"Width":"Height"} "container" only works well with autosize "fit" or "fit-x".`}function droppingFit(channel){return channel?`Dropping "fit-${channel}" because spec has discrete ${getSizeType(channel)}.`:'Dropping "fit" because spec has discrete size.'}function cannotProjectOnChannelWithoutField(channel){return`Cannot project a selection on encoding channel "${channel}", which has no field.`}function nearestNotSupportForContinuous(mark){return`The "nearest" transform is not supported for ${mark} marks.`}function selectionNotSupported(mark){return`Selection not supported for ${mark} yet.`}function selectionNotFound(name){return`Cannot find a selection named "${name}".`}const SCALE_BINDINGS_CONTINUOUS="Scale bindings are currently only supported for scales with unbinned, continuous domains.";function noSameUnitLookup(name){return`Cannot define and lookup the "${name}" selection in the same view. `+"Try moving the lookup into a second, layered view?"}function noSuchRepeatedValue(field){return`Unknown repeated value "${field}".`}function columnsNotSupportByRowCol(type){return`The "columns" property cannot be used when "${type}" has nested row/column.`}const CONCAT_CANNOT_SHARE_AXIS="Axes cannot be shared in concatenated views yet (https://github.com/vega/vega-lite/issues/2415).",REPEAT_CANNOT_SHARE_AXIS="Axes cannot be shared in repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function unrecognizedParse(p){return`Unrecognized parse "${p}".`}function differentParse(field,local,ancestor){return`An ancestor parsed field "${field}" as ${ancestor} but a child wants to parse the field as ${local}.`}function invalidTransformIgnored(transform){return`Ignoring an invalid transform: ${stringify(transform)}.`}const NO_FIELDS_NEEDS_AS='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function encodingOverridden(channels){return`Layer's shared ${channels.join(",")} channel ${1===channels.length?"is":"are"} overriden.`}function projectionOverridden(opt){const{parentProjection:parentProjection,projection:projection}=opt;return`Layer's shared projection ${stringify(parentProjection)} is overridden by a child projection ${stringify(projection)}.`}function primitiveChannelDef(channel,type,value){return`Channel ${channel} is a ${type}. Converted to {value: ${stringify(value)}}.`}function invalidFieldType(type){return`Invalid field type "${type}".`}function nonZeroScaleUsedWithLengthMark(mark,channel,opt){return`A ${opt.scaleType?`${opt.scaleType} scale`:opt.zeroFalse?"scale with zero=false":"scale with custom domain that excludes zero"} is used to encode ${mark}'s ${channel}. This can be misleading as the ${"x"===channel?"width":"height"} of the ${mark} can be arbitrary based on the scale domain. You may want to use point mark instead.`}function invalidFieldTypeForCountAggregate(type,aggregate){return`Invalid field type "${type}" for aggregate: "${aggregate}", using "quantitative" instead.`}function invalidAggregate(aggregate){return`Invalid aggregation operator "${aggregate}".`}function missingFieldType(channel,newType){return`Missing type for channel "${channel}", using "${newType}" instead.`}function droppingColor(type,opt){const{fill:fill,stroke:stroke}=opt;return`Dropping color ${type} as the plot also has ${fill&&stroke?"fill and stroke":fill?"fill":"stroke"}.`}function emptyFieldDef(fieldDef,channel){return`Dropping ${stringify(fieldDef)} from channel "${channel}" since it does not contain data field or value.`}function latLongDeprecated(channel,type,newChannel){return`${channel}-encoding with type ${type} is deprecated. Replacing with ${newChannel}-encoding.`}const LINE_WITH_VARYING_SIZE="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function incompatibleChannel(channel,markOrFacet,when){return`${channel} dropped as it is incompatible with "${markOrFacet}"${when?` when ${when}`:""}.`}function invalidEncodingChannel(channel){return`${channel}-encoding is dropped as ${channel} is not a valid encoding channel.`}function facetChannelShouldBeDiscrete(channel){return`${channel} encoding should be discrete (ordinal / nominal / binned).`}function facetChannelDropped(channels){return`Facet encoding dropped as ${channels.join(" and ")} ${channels.length>1?"are":"is"} also specified.`}function discreteChannelCannotEncode(channel,type){return`Using discrete channel "${channel}" to encode "${type}" field can be misleading as it does not encode ${"ordinal"===type?"order":"magnitude"}.`}function lineWithRange(hasX2,hasY2){return`Line mark is for continuous lines and thus cannot be used with ${hasX2&&hasY2?"x2 and y2":hasX2?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function orientOverridden(original,actual){return`Specified orient "${original}" overridden with "${actual}".`}const CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN="Custom domain scale cannot be unioned with default field-based domain.",RANGE_STEP_DEPRECATED='Scale\'s "rangeStep" is deprecated and will be removed in Vega-Lite 5.0. Please use "width"/"height": {"step": ...} instead. See https://vega.github.io/vega-lite/docs/size.html.';function cannotUseScalePropertyWithNonColor(prop){return`Cannot use the scale property "${prop}" with non-color channel.`}function unaggregateDomainHasNoEffectForRawField(fieldDef){return`Using unaggregated domain with raw field has no effect (${stringify(fieldDef)}).`}function unaggregateDomainWithNonSharedDomainOp(aggregate){return`Unaggregated domain not applicable for "${aggregate}" since it produces values outside the origin domain of the source data.`}function unaggregatedDomainWithLogScale(fieldDef){return`Unaggregated domain is currently unsupported for log scale (${stringify(fieldDef)}).`}function cannotApplySizeToNonOrientedMark(mark){return`Cannot apply size to non-oriented mark "${mark}".`}function scaleTypeNotWorkWithChannel(channel,scaleType,defaultScaleType){return`Channel "${channel}" does not work with "${scaleType}" scale. We are using "${defaultScaleType}" scale instead.`}function scaleTypeNotWorkWithFieldDef(scaleType,defaultScaleType){return`FieldDef does not work with "${scaleType}" scale. We are using "${defaultScaleType}" scale instead.`}function scalePropertyNotWorkWithScaleType(scaleType,propName,channel){return`${channel}-scale's "${propName}" is dropped as it does not work with ${scaleType} scale.`}function scaleTypeNotWorkWithMark(mark,scaleType){return`Scale type "${scaleType}" does not work with mark "${mark}".`}function stepDropped(channel){return`The step for "${channel}" is dropped because the ${"width"===channel?"x":"y"} is continuous.`}function mergeConflictingProperty(property,propertyOf,v1,v2){return`Conflicting ${propertyOf.toString()} property "${property.toString()}" (${stringify(v1)} and ${stringify(v2)}). Using ${stringify(v1)}.`}function mergeConflictingDomainProperty(property,propertyOf,v1,v2){return`Conflicting ${propertyOf.toString()} property "${property.toString()}" (${stringify(v1)} and ${stringify(v2)}). Using the union of the two domains.`}function independentScaleMeansIndependentGuide(channel){return`Setting the scale to be independent for "${channel}" means we also have to set the guide (axis or legend) to be independent.`}function domainSortDropped(sort){return`Dropping sort property ${stringify(sort)} as unioned domains only support boolean or op "count", "min", and "max".`}const UNABLE_TO_MERGE_DOMAINS="Unable to merge domains.",MORE_THAN_ONE_SORT="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",INVALID_CHANNEL_FOR_AXIS="Invalid channel for axis.";function cannotStackRangedMark(channel){return`Cannot stack "${channel}" if there is already "${channel}2".`}function cannotStackNonLinearScale(scaleType){return`Cannot stack non-linear scale (${scaleType}).`}function stackNonSummativeAggregate(aggregate){return`Stacking is applied even though the aggregate function is non-summative ("${aggregate}").`}function invalidTimeUnit(unitName,value){return`Invalid ${unitName}: ${stringify(value)}.`}function dayReplacedWithDate(fullTimeUnit){return`Time unit "${fullTimeUnit}" is not supported. We are replacing it with ${replaceAll(fullTimeUnit,"day","date")}.`}function droppedDay(d){return`Dropping day from datetime ${stringify(d)} as day cannot be combined with other units.`}function errorBarCenterAndExtentAreNotNeeded(center,extent){return`${extent?"extent ":""}${extent&&center?"and ":""}${center?"center ":""}${extent&&center?"are ":"is "}not needed when data are aggregated.`}function errorBarCenterIsUsedWithWrongExtent(center,extent,mark){return`${center} is not usually used with ${extent} for ${mark}.`}function errorBarContinuousAxisHasCustomizedAggregate(aggregate,compositeMark){return`Continuous axis should not have customized aggregation function ${aggregate}; ${compositeMark} already agregates the axis.`}function errorBarCenterIsNotNeeded(extent,mark){return`Center is not needed to be specified in ${mark} when extent is ${extent}.`}function errorBand1DNotSupport(property){return`1D error band does not support ${property}.`}function channelRequiredForBinned(channel){return`Channel ${channel} is required for "binned" bin.`}function domainRequiredForThresholdScale(channel){return`Domain for ${channel} is required for threshold scale.`}const message=message_namespaceObject,log_main=Object(vega_util.K)(vega_util.e);let log_current=log_main;function log_reset(){return log_current=log_main}function log_warn(...args){log_current.warn(...args)}const SUNDAY_YEAR=2006;function isDateTime(o){return!!(o&&(o.year||o.quarter||o.month||o.date||o.day||o.hours||o.minutes||o.seconds||o.milliseconds))}const MONTHS=["january","february","march","april","may","june","july","august","september","october","november","december"],SHORT_MONTHS=MONTHS.map(m=>m.substr(0,3)),DAYS=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],SHORT_DAYS=DAYS.map(d=>d.substr(0,3));function dateTimeExpr(d,normalize=!1,toJSON=!1){const units=[];if(normalize&&void 0!==d.day&&util_keys(d).length>1&&(log_warn(message.droppedDay(d)),delete(d=duplicate(d)).day),void 0!==d.year?units.push(d.year):void 0!==d.day?units.push(SUNDAY_YEAR):units.push(0),void 0!==d.month){const month=normalize?function normalizeMonth(m){if(Object(vega_util.E)(m))return(m-1).toString();{const lowerM=m.toLowerCase(),monthIndex=MONTHS.indexOf(lowerM);if(-1!==monthIndex)return monthIndex+"";const shortM=lowerM.substr(0,3),shortMonthIndex=SHORT_MONTHS.indexOf(shortM);if(-1!==shortMonthIndex)return shortMonthIndex+"";throw new Error(message.invalidTimeUnit("month",m))}}(d.month):d.month;units.push(month)}else if(void 0!==d.quarter){const quarter=normalize?function normalizeQuarter(q){if(Object(vega_util.E)(q))return q>4&&log_warn(message.invalidTimeUnit("quarter",q)),(q-1).toString();throw new Error(message.invalidTimeUnit("quarter",q))}(d.quarter):d.quarter;units.push(quarter+"*3")}else units.push(0);if(void 0!==d.date)units.push(d.date);else if(void 0!==d.day){const day=normalize?function normalizeDay(d){if(Object(vega_util.E)(d))return d%7+"";{const lowerD=d.toLowerCase(),dayIndex=DAYS.indexOf(lowerD);if(-1!==dayIndex)return dayIndex+"";const shortD=lowerD.substr(0,3),shortDayIndex=SHORT_DAYS.indexOf(shortD);if(-1!==shortDayIndex)return shortDayIndex+"";throw new Error(message.invalidTimeUnit("day",d))}}(d.day):d.day;units.push(day+"+1")}else units.push(1);for(const timeUnit of["hours","minutes","seconds","milliseconds"]){const unit=d[timeUnit];units.push(void 0===unit?0:unit)}const unitsString=units.join(", ");return toJSON?d.utc?new Function(`return +new Date(Date.UTC(${unitsString}))`)():new Function(`return +new Date(${unitsString})`)():d.utc?`utc(${unitsString})`:`datetime(${unitsString})`}var timeunit_TimeUnit;!function(TimeUnit){TimeUnit.YEAR="year",TimeUnit.MONTH="month",TimeUnit.DAY="day",TimeUnit.DATE="date",TimeUnit.HOURS="hours",TimeUnit.MINUTES="minutes",TimeUnit.SECONDS="seconds",TimeUnit.MILLISECONDS="milliseconds",TimeUnit.YEARMONTH="yearmonth",TimeUnit.YEARMONTHDATE="yearmonthdate",TimeUnit.YEARMONTHDATEHOURS="yearmonthdatehours",TimeUnit.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes",TimeUnit.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds",TimeUnit.MONTHDATE="monthdate",TimeUnit.MONTHDATEHOURS="monthdatehours",TimeUnit.HOURSMINUTES="hoursminutes",TimeUnit.HOURSMINUTESSECONDS="hoursminutesseconds",TimeUnit.MINUTESSECONDS="minutesseconds",TimeUnit.SECONDSMILLISECONDS="secondsmilliseconds",TimeUnit.QUARTER="quarter",TimeUnit.YEARQUARTER="yearquarter",TimeUnit.QUARTERMONTH="quartermonth",TimeUnit.YEARQUARTERMONTH="yearquartermonth",TimeUnit.UTCYEAR="utcyear",TimeUnit.UTCMONTH="utcmonth",TimeUnit.UTCDAY="utcday",TimeUnit.UTCDATE="utcdate",TimeUnit.UTCHOURS="utchours",TimeUnit.UTCMINUTES="utcminutes",TimeUnit.UTCSECONDS="utcseconds",TimeUnit.UTCMILLISECONDS="utcmilliseconds",TimeUnit.UTCYEARMONTH="utcyearmonth",TimeUnit.UTCYEARMONTHDATE="utcyearmonthdate",TimeUnit.UTCYEARMONTHDATEHOURS="utcyearmonthdatehours",TimeUnit.UTCYEARMONTHDATEHOURSMINUTES="utcyearmonthdatehoursminutes",TimeUnit.UTCYEARMONTHDATEHOURSMINUTESSECONDS="utcyearmonthdatehoursminutesseconds",TimeUnit.UTCMONTHDATE="utcmonthdate",TimeUnit.UTCMONTHDATEHOURS="utcmonthdatehours",TimeUnit.UTCHOURSMINUTES="utchoursminutes",TimeUnit.UTCHOURSMINUTESSECONDS="utchoursminutesseconds",TimeUnit.UTCMINUTESSECONDS="utcminutesseconds",TimeUnit.UTCSECONDSMILLISECONDS="utcsecondsmilliseconds",TimeUnit.UTCQUARTER="utcquarter",TimeUnit.UTCYEARQUARTER="utcyearquarter",TimeUnit.UTCQUARTERMONTH="utcquartermonth",TimeUnit.UTCYEARQUARTERMONTH="utcyearquartermonth"}(timeunit_TimeUnit||(timeunit_TimeUnit={}));const LOCAL_SINGLE_TIMEUNIT_INDEX={year:1,quarter:1,month:1,day:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},TIMEUNIT_PARTS=util_keys(LOCAL_SINGLE_TIMEUNIT_INDEX);const UTC_SINGLE_TIMEUNIT_INDEX={utcyear:1,utcquarter:1,utcmonth:1,utcday:1,utcdate:1,utchours:1,utcminutes:1,utcseconds:1,utcmilliseconds:1};const UTC_MULTI_TIMEUNIT_INDEX={utcyearquarter:1,utcyearquartermonth:1,utcyearmonth:1,utcyearmonthdate:1,utcyearmonthdatehours:1,utcyearmonthdatehoursminutes:1,utcyearmonthdatehoursminutesseconds:1,utcquartermonth:1,utcmonthdate:1,utcmonthdatehours:1,utchoursminutes:1,utchoursminutesseconds:1,utcminutesseconds:1,utcsecondsmilliseconds:1},UTC_TIMEUNIT_INDEX=Object.assign(Object.assign({},UTC_SINGLE_TIMEUNIT_INDEX),UTC_MULTI_TIMEUNIT_INDEX);function isUTCTimeUnit(t){return!!UTC_TIMEUNIT_INDEX[t]}const TIMEUNIT_INDEX=Object.assign(Object.assign(Object.assign(Object.assign({},LOCAL_SINGLE_TIMEUNIT_INDEX),UTC_SINGLE_TIMEUNIT_INDEX),{yearquarter:1,yearquartermonth:1,yearmonth:1,yearmonthdate:1,yearmonthdatehours:1,yearmonthdatehoursminutes:1,yearmonthdatehoursminutesseconds:1,quartermonth:1,monthdate:1,monthdatehours:1,hoursminutes:1,hoursminutesseconds:1,minutesseconds:1,secondsmilliseconds:1}),UTC_MULTI_TIMEUNIT_INDEX);util_keys(TIMEUNIT_INDEX);function containsTimeUnit(fullTimeUnit,timeUnit){const index=fullTimeUnit.indexOf(timeUnit);return index>-1&&(timeUnit!==timeunit_TimeUnit.SECONDS||0===index||"i"!==fullTimeUnit.charAt(index-1))}function timeunit_fieldExpr(fullTimeUnit,field,{end:end}={end:!1}){const fieldRef=accessPathWithDatum(field),utc=isUTCTimeUnit(fullTimeUnit)?"utc":"";let lastTimeUnit;const d=TIMEUNIT_PARTS.reduce((dateExpr,tu)=>(containsTimeUnit(fullTimeUnit,tu)&&(dateExpr[tu]=function func(timeUnit){return timeUnit===timeunit_TimeUnit.QUARTER?`(${utc}quarter(${fieldRef})-1)`:`${utc}${timeUnit}(${fieldRef})`}(tu),lastTimeUnit=tu),dateExpr),{});return end&&(d[lastTimeUnit]+="+1"),dateTimeExpr(d)}function getDateTimeComponents(timeUnit,shortTimeLabels){if(!timeUnit)return;const dateComponents=[],hasYear=containsTimeUnit(timeUnit,timeunit_TimeUnit.YEAR);containsTimeUnit(timeUnit,timeunit_TimeUnit.MONTH)&&dateComponents.push(!1!==shortTimeLabels?"%b":"%B"),containsTimeUnit(timeUnit,timeunit_TimeUnit.DAY)?dateComponents.push(shortTimeLabels?"%a":"%A"):containsTimeUnit(timeUnit,timeunit_TimeUnit.DATE)&&dateComponents.push("%d"+(hasYear?",":"")),hasYear&&dateComponents.push(shortTimeLabels?"%y":"%Y");const timeComponents=[];containsTimeUnit(timeUnit,timeunit_TimeUnit.HOURS)&&timeComponents.push("%H"),containsTimeUnit(timeUnit,timeunit_TimeUnit.MINUTES)&&timeComponents.push("%M"),containsTimeUnit(timeUnit,timeunit_TimeUnit.SECONDS)&&timeComponents.push("%S"),containsTimeUnit(timeUnit,timeunit_TimeUnit.MILLISECONDS)&&timeComponents.push("%L");const dateTimeComponents=[];return dateComponents.length>0&&dateTimeComponents.push(dateComponents.join(" ")),timeComponents.length>0&&dateTimeComponents.push(timeComponents.join(":")),dateTimeComponents}function normalizeTimeUnit(timeUnit){return"day"!==timeUnit&&timeUnit.indexOf("day")>=0?(log_warn(message.dayReplacedWithDate(timeUnit)),replaceAll(timeUnit,"day","date")):timeUnit}function isFieldEqualPredicate(predicate){return predicate&&!!predicate.field&&void 0!==predicate.equal}function isFieldLTPredicate(predicate){return predicate&&!!predicate.field&&void 0!==predicate.lt}function isFieldLTEPredicate(predicate){return predicate&&!!predicate.field&&void 0!==predicate.lte}function isFieldGTPredicate(predicate){return predicate&&!!predicate.field&&void 0!==predicate.gt}function isFieldGTEPredicate(predicate){return predicate&&!!predicate.field&&void 0!==predicate.gte}function isFieldRangePredicate(predicate){return!!(predicate&&predicate.field&&Object(vega_util.A)(predicate.range)&&2===predicate.range.length)}function isFieldOneOfPredicate(predicate){return predicate&&!!predicate.field&&(Object(vega_util.A)(predicate.oneOf)||Object(vega_util.A)(predicate.in))}function isFieldPredicate(predicate){return isFieldOneOfPredicate(predicate)||isFieldEqualPredicate(predicate)||isFieldRangePredicate(predicate)||isFieldLTPredicate(predicate)||isFieldGTPredicate(predicate)||isFieldLTEPredicate(predicate)||isFieldGTEPredicate(predicate)}function predicateValueExpr(v,timeUnit){return valueExpr(v,{timeUnit:timeUnit,time:!0})}function fieldFilterExpression(predicate,useInRange=!0){const{field:field,timeUnit:timeUnit}=predicate,fieldExpr=timeUnit?"time("+timeunit_fieldExpr(timeUnit,field)+")":vgField(predicate,{expr:"datum"});if(isFieldEqualPredicate(predicate))return fieldExpr+"==="+predicateValueExpr(predicate.equal,timeUnit);if(isFieldLTPredicate(predicate)){return`${fieldExpr}<${predicateValueExpr(predicate.lt,timeUnit)}`}if(isFieldGTPredicate(predicate)){return`${fieldExpr}>${predicateValueExpr(predicate.gt,timeUnit)}`}if(isFieldLTEPredicate(predicate)){return`${fieldExpr}<=${predicateValueExpr(predicate.lte,timeUnit)}`}if(isFieldGTEPredicate(predicate)){return`${fieldExpr}>=${predicateValueExpr(predicate.gte,timeUnit)}`}if(isFieldOneOfPredicate(predicate))return`indexof([${function predicateValuesExpr(vals,timeUnit){return vals.map(v=>predicateValueExpr(v,timeUnit))}(predicate.oneOf,timeUnit).join(",")}], ${fieldExpr}) !== -1`;if(function isFieldValidPredicate(predicate){return predicate&&!!predicate.field&&void 0!==predicate.valid}(predicate))return fieldValidPredicate(fieldExpr,predicate.valid);if(isFieldRangePredicate(predicate)){const lower=predicate.range[0],upper=predicate.range[1];if(null!==lower&&null!==upper&&useInRange)return"inrange("+fieldExpr+", ["+predicateValueExpr(lower,timeUnit)+", "+predicateValueExpr(upper,timeUnit)+"])";const exprs=[];return null!==lower&&exprs.push(`${fieldExpr} >= ${predicateValueExpr(lower,timeUnit)}`),null!==upper&&exprs.push(`${fieldExpr} <= ${predicateValueExpr(upper,timeUnit)}`),exprs.length>0?exprs.join(" && "):"true"}throw new Error(`Invalid field predicate: ${JSON.stringify(predicate)}`)}function fieldValidPredicate(fieldExpr,valid=!0){return valid?`isValid(${fieldExpr}) && isFinite(+${fieldExpr})`:`!isValid(${fieldExpr}) || !isFinite(+${fieldExpr})`}function normalizePredicate(f){return isFieldPredicate(f)&&f.timeUnit?Object.assign(Object.assign({},f),{timeUnit:normalizeTimeUnit(f.timeUnit)}):f}const TYPE_INDEX={quantitative:1,ordinal:1,temporal:1,nominal:1,geojson:1};const QUANTITATIVE="quantitative",ORDINAL="ordinal",TEMPORAL="temporal",NOMINAL="nominal",GEOJSON="geojson";var ScaleType;!function(ScaleType){ScaleType.LINEAR="linear",ScaleType.LOG="log",ScaleType.POW="pow",ScaleType.SQRT="sqrt",ScaleType.SYMLOG="symlog",ScaleType.TIME="time",ScaleType.UTC="utc",ScaleType.QUANTILE="quantile",ScaleType.QUANTIZE="quantize",ScaleType.THRESHOLD="threshold",ScaleType.BIN_ORDINAL="bin-ordinal",ScaleType.ORDINAL="ordinal",ScaleType.POINT="point",ScaleType.BAND="band"}(ScaleType||(ScaleType={}));const SCALE_CATEGORY_INDEX={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},SCALE_TYPES=util_keys(SCALE_CATEGORY_INDEX);function scaleCompatible(scaleType1,scaleType2){const scaleCategory1=SCALE_CATEGORY_INDEX[scaleType1],scaleCategory2=SCALE_CATEGORY_INDEX[scaleType2];return scaleCategory1===scaleCategory2||"ordinal-position"===scaleCategory1&&"time"===scaleCategory2||"ordinal-position"===scaleCategory2&&"time"===scaleCategory1}const SCALE_PRECEDENCE_INDEX={linear:0,log:1,pow:1,sqrt:1,symlog:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function scaleTypePrecedence(scaleType){return SCALE_PRECEDENCE_INDEX[scaleType]}const CONTINUOUS_TO_CONTINUOUS_SCALES=["linear","log","pow","sqrt","symlog","time","utc"],CONTINUOUS_TO_CONTINUOUS_INDEX=Object(vega_util.cb)(CONTINUOUS_TO_CONTINUOUS_SCALES),CONTINUOUS_TO_DISCRETE_INDEX=Object(vega_util.cb)(["quantile","quantize","threshold"]),CONTINUOUS_DOMAIN_SCALES=CONTINUOUS_TO_CONTINUOUS_SCALES.concat(["quantile","quantize","threshold"]),CONTINUOUS_DOMAIN_INDEX=Object(vega_util.cb)(CONTINUOUS_DOMAIN_SCALES),DISCRETE_DOMAIN_INDEX=Object(vega_util.cb)(["ordinal","bin-ordinal","point","band"]);function hasDiscreteDomain(type){return type in DISCRETE_DOMAIN_INDEX}function hasContinuousDomain(type){return type in CONTINUOUS_DOMAIN_INDEX}function isContinuousToContinuous(type){return type in CONTINUOUS_TO_CONTINUOUS_INDEX}function isContinuousToDiscrete(type){return type in CONTINUOUS_TO_DISCRETE_INDEX}function isSelectionDomain(domain){var _a;return null===(_a=domain)||void 0===_a?void 0:_a.selection}const SCALE_PROPERTY_INDEX={type:1,domain:1,align:1,range:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:scale_type,domain:src_scale_domain,range:src_scale_range,scheme:scale_scheme}=(util_keys(SCALE_PROPERTY_INDEX),SCALE_PROPERTY_INDEX),NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTY_INDEX=__rest(SCALE_PROPERTY_INDEX,["type","domain","range","scheme"]),NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES=util_keys(NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTY_INDEX);(function generateScaleTypeIndex(){var _a;const index={};for(const channel of CHANNELS)for(const fieldDefType of util_keys(TYPE_INDEX))for(const scaleType of SCALE_TYPES){const key=generateScaleTypeIndexKey(channel,fieldDefType);channelSupportScaleType(channel,scaleType)&&scaleTypeSupportDataType(scaleType,fieldDefType)&&(index[key]=null!=(_a=index[key])?_a:[],index[key].push(scaleType))}return index})();function scaleTypeSupportProperty(scaleType,propName){switch(propName){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!util_contains(["point","band","identity"],scaleType);case"bins":return!util_contains(["point","band","identity","ordinal"],scaleType);case"round":return isContinuousToContinuous(scaleType)||"band"===scaleType||"point"===scaleType;case"padding":return isContinuousToContinuous(scaleType)||util_contains(["point","band"],scaleType);case"paddingOuter":case"align":return util_contains(["point","band"],scaleType);case"paddingInner":return"band"===scaleType;case"clamp":return isContinuousToContinuous(scaleType);case"nice":return isContinuousToContinuous(scaleType)||"quantize"===scaleType||"threshold"===scaleType;case"exponent":return"pow"===scaleType;case"base":return"log"===scaleType;case"constant":return"symlog"===scaleType;case"zero":return hasContinuousDomain(scaleType)&&!util_contains(["log","time","utc","threshold","quantile"],scaleType)}}function channelScalePropertyIncompatability(channel,propName){switch(propName){case"interpolate":case"scheme":return isColorChannel(channel)?void 0:message.cannotUseScalePropertyWithNonColor(channel);case"align":case"type":case"bins":case"domain":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"reverse":case"round":case"clamp":case"zero":return}}function scaleTypeSupportDataType(specifiedType,fieldDefType){return util_contains([ORDINAL,NOMINAL],fieldDefType)?void 0===specifiedType||hasDiscreteDomain(specifiedType):fieldDefType===TEMPORAL?util_contains([ScaleType.TIME,ScaleType.UTC,void 0],specifiedType):fieldDefType!==QUANTITATIVE||util_contains([ScaleType.LOG,ScaleType.POW,ScaleType.SQRT,ScaleType.SYMLOG,ScaleType.QUANTILE,ScaleType.QUANTIZE,ScaleType.THRESHOLD,ScaleType.LINEAR,void 0],specifiedType)}function channelSupportScaleType(channel,scaleType){switch(channel){case channel_X:case channel_Y:return isContinuousToContinuous(scaleType)||util_contains(["band","point"],scaleType);case SIZE:case STROKEWIDTH:case OPACITY:case FILLOPACITY:case STROKEOPACITY:return isContinuousToContinuous(scaleType)||isContinuousToDiscrete(scaleType)||util_contains(["band","point"],scaleType);case COLOR:case FILL:case STROKE:return"band"!==scaleType;case SHAPE:return"ordinal"===scaleType}return!1}function generateScaleTypeIndexKey(channel,fieldDefType){return channel+"_"+fieldDefType}function extractTitleConfig(titleConfig){const{anchor:anchor,frame:frame,offset:offset,orient:orient,color:color}=titleConfig,titleMarkConfig=__rest(titleConfig,["anchor","frame","offset","orient","color"]);return{mark:Object.assign(Object.assign({},titleMarkConfig),color?{fill:color}:{}),nonMark:Object.assign(Object.assign(Object.assign(Object.assign({},anchor?{anchor:anchor}:{}),frame?{frame:frame}:{}),offset?{offset:offset}:{}),orient?{orient:orient}:{})}}function isText(v){return Object(vega_util.H)(v)||Object(vega_util.A)(v)&&Object(vega_util.H)(v[0])}function getStyles(mark){var _a;return[].concat(mark.type,null!=(_a=mark.style)?_a:[])}function getMarkPropOrConfig(channel,mark,config){return getFirstDefined(mark[channel],getMarkConfig(channel,mark,config))}function getMarkConfig(channel,mark,config,{vgChannel:vgChannel}={}){return getFirstDefined(vgChannel?getStyleConfig(channel,mark,config.style):void 0,getStyleConfig(channel,mark,config.style),vgChannel?config[mark.type][vgChannel]:void 0,config[mark.type][channel],vgChannel?config.mark[vgChannel]:config.mark[channel])}function getStyleConfig(prop,mark,styleConfigIndex){const styles=getStyles(mark);let value;for(const style of styles){const styleConfig=styleConfigIndex[style],p=prop;styleConfig&&void 0!==styleConfig[p]&&(value=styleConfig[p])}return value}function formatSignalRef(fieldDef,specifiedFormat,expr,config){if(isTimeFormatFieldDef(fieldDef)){const isUTCScale=isScaleFieldDef(fieldDef)&&fieldDef.scale&&fieldDef.scale.type===ScaleType.UTC;return{signal:timeFormatExpression(vgField(fieldDef,{expr:expr}),fieldDef.timeUnit,specifiedFormat,config.text.shortTimeLabels,config.timeFormat,isUTCScale,!0)}}{const format=numberFormat(fieldDef,specifiedFormat,config);if(isBinning(fieldDef.bin)){return{signal:binFormatExpression(vgField(fieldDef,{expr:expr}),vgField(fieldDef,{expr:expr,binSuffix:"end"}),format,config)}}return"quantitative"===fieldDef.type||format?{signal:`${formatExpr(vgField(fieldDef,{expr:expr,binSuffix:"range"}),format)}`}:{signal:`''+${vgField(fieldDef,{expr:expr})}`}}}function numberFormat(fieldDef,specifiedFormat,config){return specifiedFormat||(fieldDef.type===QUANTITATIVE?config.numberFormat:void 0)}function formatExpr(field,format){return`format(${field}, "${format||""}")`}function numberFormatExpr(field,specifiedFormat,config){return formatExpr(field,null!=specifiedFormat?specifiedFormat:config.numberFormat)}function binFormatExpression(startField,endField,format,config){return`${fieldValidPredicate(startField,!1)} ? "null" : ${numberFormatExpr(startField,format,config)} + " - " + ${numberFormatExpr(endField,format,config)}`}function timeFormatExpression(field,timeUnit,format,shortTimeLabels,rawTimeFormat,isUTCScale,alwaysReturn=!1){return!timeUnit||format?(format=null!=format?format:rawTimeFormat)||alwaysReturn?`${isUTCScale?"utc":"time"}Format(${field}, '${format}')`:void 0:function formatExpression(timeUnit,field,shortTimeLabels,isUTCScale){if(!timeUnit)return;const dateTimeComponents=getDateTimeComponents(timeUnit,shortTimeLabels);let expression="";return containsTimeUnit(timeUnit,timeunit_TimeUnit.QUARTER)&&(expression=`'Q' + quarter(${field})`),dateTimeComponents.length>0&&(expression&&(expression+=" + ' ' + "),expression+=isUTCScale?`utcFormat(${field}, '${dateTimeComponents.join(" ")}')`:`timeFormat(${field}, '${dateTimeComponents.join(" ")}')`),expression||void 0}(timeUnit,field,shortTimeLabels,isUTCScale)}function sortParams(orderDef,fieldRefOption){return Object(vega_util.i)(orderDef).reduce((s,orderChannelDef)=>{var _a;return s.field.push(vgField(orderChannelDef,fieldRefOption)),s.order.push(null!=(_a=orderChannelDef.sort)?_a:"ascending"),s},{field:[],order:[]})}function mergeTitleFieldDefs(f1,f2){const merged=[...f1];return f2.forEach(fdToMerge=>{for(const fieldDef1 of merged)if(deepEqual(fieldDef1,fdToMerge))return;merged.push(fdToMerge)}),merged}function mergeTitle(title1,title2){return deepEqual(title1,title2)||!title2?title1:title1?[...Object(vega_util.i)(title1),...Object(vega_util.i)(title2)].join(", "):title2}function mergeTitleComponent(v1,v2){const v1Val=v1.value,v2Val=v2.value;if(null==v1Val||null===v2Val)return{explicit:v1.explicit,value:null};if(isText(v1Val)&&isText(v2Val))return{explicit:v1.explicit,value:mergeTitle(v1Val,v2Val)};if(!isText(v1Val)&&!isText(v2Val))return{explicit:v1.explicit,value:mergeTitleFieldDefs(v1Val,v2Val)};throw new Error("It should never reach here")}const DEFAULT_SORT_OP="mean",SORT_BY_CHANNEL_INDEX={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function isSortByChannel(c){return!!SORT_BY_CHANNEL_INDEX[c]}function isSortByEncoding(sort){return!!sort&&!!sort.encoding}function isSortField(sort){return!(!sort||"count"!==sort.op&&!sort.field)}function isSortArray(sort){return!!sort&&Object(vega_util.A)(sort)}function isFacetMapping(f){return!!f.row||!!f.column}function isFacetSpec(spec){return void 0!==spec.facet}function toFieldDefBase(fieldDef){const{field:field,timeUnit:timeUnit,bin:bin,aggregate:aggregate}=fieldDef;return Object.assign(Object.assign(Object.assign(Object.assign({},timeUnit?{timeUnit:timeUnit}:{}),bin?{bin:bin}:{}),aggregate?{aggregate:aggregate}:{}),{field:field})}function isSortableFieldDef(fieldDef){return isTypedFieldDef(fieldDef)&&!!fieldDef.sort}function getBand(channel,fieldDef,fieldDef2,mark,config,{isMidPoint:isMidPoint}={}){const{timeUnit:timeUnit,bin:bin}=fieldDef;if(util_contains(["x","y"],channel)){if(isPositionFieldDef(fieldDef)&&void 0!==fieldDef.band)return fieldDef.band;if(timeUnit&&!fieldDef2)return isMidPoint?getMarkConfig("timeUnitBandPosition",mark,config):isRectBasedMark(mark.type)?getMarkConfig("timeUnitBand",mark,config):0;if(isBinning(bin))return isRectBasedMark(mark.type)&&!isMidPoint?1:.5}}function hasBand(channel,fieldDef,fieldDef2,mark,config){return!!(isBinning(fieldDef.bin)||fieldDef.timeUnit&&isTypedFieldDef(fieldDef)&&"temporal"===fieldDef.type)&&!!getBand(channel,fieldDef,fieldDef2,mark,config)}function isConditionalDef(channelDef){return!!channelDef&&!!channelDef.condition}function hasConditionalFieldDef(channelDef){return!!channelDef&&!!channelDef.condition&&!Object(vega_util.A)(channelDef.condition)&&isFieldDef(channelDef.condition)}function isFieldDef(channelDef){return!(!channelDef||!channelDef.field&&"count"!==channelDef.aggregate)}function isTypedFieldDef(channelDef){return!!channelDef&&(!!channelDef.field&&!!channelDef.type||"count"===channelDef.aggregate)}function isStringFieldDef(channelDef){return isFieldDef(channelDef)&&Object(vega_util.H)(channelDef.field)}function isValueDef(channelDef){return channelDef&&"value"in channelDef&&void 0!==channelDef.value}function isScaleFieldDef(channelDef){return!(!channelDef||!channelDef.scale&&!channelDef.sort)}function isPositionFieldDef(channelDef){return!(!channelDef||!channelDef.axis&&!channelDef.stack&&!channelDef.impute&&void 0===channelDef.band)}function isTextFieldDef(channelDef){return!!channelDef&&!!channelDef.format}function vgField(fieldDef,opt={}){var _a,_b,_c;let field=fieldDef.field;const prefix=opt.prefix;let suffix=opt.suffix,argAccessor="";if(function isCount(fieldDef){return"count"===fieldDef.aggregate}(fieldDef))field=function internalField(name){return function isInternalField(name){return 0===name.indexOf("__")}(name)?name:`__${name}`}("count");else{let fn;if(!opt.nofn)if(function isOpFieldDef(fieldDef){return!!fieldDef.op}(fieldDef))fn=fieldDef.op;else{const{bin:bin,aggregate:aggregate,timeUnit:timeUnit}=fieldDef;isBinning(bin)?(fn=binToString(bin),suffix=(null!=(_a=opt.binSuffix)?_a:"")+(null!=(_b=opt.suffix)?_b:"")):aggregate?isArgmaxDef(aggregate)?(argAccessor=`.${field}`,field=`argmax_${aggregate.argmax}`):isArgminDef(aggregate)?(argAccessor=`.${field}`,field=`argmin_${aggregate.argmin}`):fn=String(aggregate):timeUnit&&(fn=String(timeUnit),suffix=(!util_contains(["range","mid"],opt.binSuffix)&&opt.binSuffix||"")+(null!=(_c=opt.suffix)?_c:""))}fn&&(field=field?`${fn}_${field}`:fn)}return suffix&&(field=`${field}_${suffix}`),prefix&&(field=`${prefix}_${field}`),opt.forAs?field:opt.expr?function flatAccessWithDatum(path,datum="datum"){return`${datum}[${Object(vega_util.Y)(Object(vega_util.X)(path).join("."))}]`}(field,opt.expr)+argAccessor:replacePathInField(field)+argAccessor}function channeldef_isDiscrete(fieldDef){switch(fieldDef.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return!!fieldDef.bin;case"temporal":return!1}throw new Error(message.invalidFieldType(fieldDef.type))}function channeldef_isContinuous(fieldDef){return!channeldef_isDiscrete(fieldDef)}function verbalTitleFormatter(fieldDef,config){const{field:field,bin:bin,timeUnit:timeUnit,aggregate:aggregate}=fieldDef;if("count"===aggregate)return config.countTitle;if(isBinning(bin))return`${field} (binned)`;if(timeUnit){return`${field} (${function getTimeUnitParts(timeUnit){return TIMEUNIT_PARTS.reduce((parts,part)=>containsTimeUnit(timeUnit,part)?[...parts,part]:parts,[])}(timeUnit).join("-")})`}return aggregate?isArgmaxDef(aggregate)?`${field} for max ${aggregate.argmax}`:isArgminDef(aggregate)?`${field} for min ${aggregate.argmin}`:`${titlecase(aggregate)} of ${field}`:field}const defaultTitleFormatter=(fieldDef,config)=>{switch(config.fieldTitle){case"plain":return fieldDef.field;case"functional":return function functionalTitleFormatter(fieldDef){const{aggregate:aggregate,bin:bin,timeUnit:timeUnit,field:field}=fieldDef;if(isArgmaxDef(aggregate))return`${field} for argmax(${aggregate.argmax})`;if(isArgminDef(aggregate))return`${field} for argmin(${aggregate.argmin})`;const fn=aggregate||timeUnit||isBinning(bin)&&"bin";return fn?fn.toUpperCase()+"("+field+")":field}(fieldDef);default:return verbalTitleFormatter(fieldDef,config)}};let titleFormatter=defaultTitleFormatter;function setTitleFormatter(formatter){titleFormatter=formatter}function channeldef_title(fieldDef,config,{allowDisabling:allowDisabling,includeDefault:includeDefault=!0}){var _a,_b;const guideTitle=(null!=(_a=getGuide(fieldDef))?_a:{}).title,def=includeDefault?defaultTitle(fieldDef,config):void 0;return allowDisabling?getFirstDefined(guideTitle,fieldDef.title,def):null!=(_b=null!=guideTitle?guideTitle:fieldDef.title)?_b:def}function getGuide(fieldDef){return isPositionFieldDef(fieldDef)&&fieldDef.axis?fieldDef.axis:function isMarkPropFieldDef(channelDef){return!!channelDef&&!!channelDef.legend}(fieldDef)&&fieldDef.legend?fieldDef.legend:function isFacetFieldDef(channelDef){return!!channelDef&&!!channelDef.header}(fieldDef)&&fieldDef.header?fieldDef.header:void 0}function defaultTitle(fieldDef,config){return titleFormatter(fieldDef,config)}function channeldef_format(fieldDef){var _a;if(isTextFieldDef(fieldDef)&&fieldDef.format)return fieldDef.format;return(null!=(_a=getGuide(fieldDef))?_a:{}).format}function getFieldDef(channelDef){return isFieldDef(channelDef)?channelDef:hasConditionalFieldDef(channelDef)?channelDef.condition:void 0}function getTypedFieldDef(channelDef){return isFieldDef(channelDef)?channelDef:hasConditionalFieldDef(channelDef)?channelDef.condition:void 0}function channeldef_normalize(channelDef,channel){if(Object(vega_util.H)(channelDef)||Object(vega_util.E)(channelDef)||Object(vega_util.B)(channelDef)){const primitiveType=Object(vega_util.H)(channelDef)?"string":Object(vega_util.E)(channelDef)?"number":"boolean";return log_warn(message.primitiveChannelDef(channel,primitiveType,channelDef)),{value:channelDef}}return isFieldDef(channelDef)?normalizeFieldDef(channelDef,channel):hasConditionalFieldDef(channelDef)?Object.assign(Object.assign({},channelDef),{condition:normalizeFieldDef(channelDef.condition,channel)}):channelDef}function normalizeFieldDef(fd,channel){const{aggregate:aggregate,timeUnit:timeUnit,bin:bin,field:field}=fd,fieldDef=Object.assign({},fd);if(!aggregate||isAggregateOp(aggregate)||isArgmaxDef(aggregate)||isArgminDef(aggregate)||(log_warn(message.invalidAggregate(aggregate)),delete fieldDef.aggregate),timeUnit&&(fieldDef.timeUnit=normalizeTimeUnit(timeUnit)),field&&(fieldDef.field=`${field}`),isBinning(bin)&&(fieldDef.bin=normalizeBin(bin,channel)),bin_isBinned(bin)&&!util_contains(POSITION_SCALE_CHANNELS,channel)&&log_warn(`Channel ${channel} should not be used with "binned" bin`),isTypedFieldDef(fieldDef)){const{type:type}=fieldDef,fullType=function getFullName(type){if(type)switch(type=type.toLowerCase()){case"q":case QUANTITATIVE:return"quantitative";case"t":case TEMPORAL:return"temporal";case"o":case ORDINAL:return"ordinal";case"n":case NOMINAL:return"nominal";case GEOJSON:return"geojson"}}(type);type!==fullType&&(fieldDef.type=fullType),"quantitative"!==type&&isCountingAggregateOp(aggregate)&&(log_warn(message.invalidFieldTypeForCountAggregate(type,aggregate)),fieldDef.type="quantitative")}else if(!isSecondaryRangeChannel(channel)){const newType=function defaultType(fieldDef,channel){if(fieldDef.timeUnit)return"temporal";if(isBinning(fieldDef.bin))return"quantitative";switch(rangeType(channel)){case"continuous":return"quantitative";case"discrete":case"flexible":return"nominal";default:return"quantitative"}}(fieldDef,channel);log_warn(message.missingFieldType(channel,newType)),fieldDef.type=newType}if(isTypedFieldDef(fieldDef)){const{compatible:compatible,warning:warning}=function channelCompatibility(fieldDef,channel){const type=fieldDef.type;if("geojson"===type&&"shape"!==channel)return{compatible:!1,warning:`Channel ${channel} should not be used with a geojson data.`};switch(channel){case"row":case"column":case"facet":return channeldef_isContinuous(fieldDef)?{compatible:!1,warning:message.facetChannelShouldBeDiscrete(channel)}:COMPATIBLE;case"x":case"y":case"color":case"fill":case"stroke":case"text":case"detail":case"key":case"tooltip":case"href":case"url":return COMPATIBLE;case"longitude":case"longitude2":case"latitude":case"latitude2":return type!==QUANTITATIVE?{compatible:!1,warning:`Channel ${channel} should be used with a quantitative field only, not ${fieldDef.type} field.`}:COMPATIBLE;case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeWidth":case"size":case"x2":case"y2":return"nominal"!==type||fieldDef.sort?COMPATIBLE:{compatible:!1,warning:`Channel ${channel} should not be used with an unsorted discrete field.`};case"shape":return util_contains(["ordinal","nominal","geojson"],fieldDef.type)?COMPATIBLE:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case"order":return"nominal"!==fieldDef.type||"sort"in fieldDef?COMPATIBLE:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}throw new Error("channelCompatability not implemented for channel "+channel)}(fieldDef,channel);compatible||log_warn(warning)}if(isSortableFieldDef(fieldDef)&&Object(vega_util.H)(fieldDef.sort)){const{sort:sort}=fieldDef;if(isSortByChannel(sort))return Object.assign(Object.assign({},fieldDef),{sort:{encoding:sort}});const sub=sort.substr(1);if("-"===sort.charAt(0)&&isSortByChannel(sub))return Object.assign(Object.assign({},fieldDef),{sort:{encoding:sub,order:"descending"}})}return fieldDef}function normalizeBin(bin,channel){return Object(vega_util.B)(bin)?{maxbins:autoMaxBins(channel)}:"binned"===bin?{binned:!0}:bin.maxbins||bin.step?bin:Object.assign(Object.assign({},bin),{maxbins:autoMaxBins(channel)})}const COMPATIBLE={compatible:!0};function isTimeFormatFieldDef(fieldDef){const guide=getGuide(fieldDef),formatType=guide&&guide.formatType||isTextFieldDef(fieldDef)&&fieldDef.formatType;return"time"===formatType||!formatType&&function isTimeFieldDef(fieldDef){return"temporal"===fieldDef.type||!!fieldDef.timeUnit}(fieldDef)}function valueExpr(v,{timeUnit:timeUnit,type:type,time:time,undefinedIfExprNotRequired:undefinedIfExprNotRequired}){let expr;var t;return isDateTime(v)?expr=dateTimeExpr(v,!0):(Object(vega_util.H)(v)||Object(vega_util.E)(v))&&(timeUnit||"temporal"===type)&&(expr=function isLocalSingleTimeUnit(timeUnit){return!!LOCAL_SINGLE_TIMEUNIT_INDEX[timeUnit]}(timeUnit)?dateTimeExpr({[timeUnit]:v},!0):function isUtcSingleTimeUnit(timeUnit){return!!UTC_SINGLE_TIMEUNIT_INDEX[timeUnit]}(timeUnit)?valueExpr(v,{timeUnit:(t=timeUnit,t.substr(3))}):`datetime(${JSON.stringify(v)})`),expr?time?`time(${expr})`:expr:undefinedIfExprNotRequired?void 0:JSON.stringify(v)}function valueArray(fieldDef,values){const{timeUnit:timeUnit,type:type}=fieldDef;return values.map(v=>{const expr=valueExpr(v,{timeUnit:timeUnit,type:type,undefinedIfExprNotRequired:!0});return void 0!==expr?{signal:expr}:v})}function binRequiresRange(fieldDef,channel){return isBinning(fieldDef.bin)?isScaleChannel(channel)&&util_contains(["ordinal","nominal"],fieldDef.type):(console.warn("Only use this method with binned field defs"),!1)}function binToString(bin){return Object(vega_util.B)(bin)&&(bin=normalizeBin(bin,void 0)),"bin"+util_keys(bin).map(p=>isSelectionExtent(bin[p])?varName(`_${p}_${Object.entries(bin[p])}`):varName(`_${p}_${bin[p]}`)).join("")}function isBinning(bin){return!0===bin||isBinParams(bin)&&!bin.binned}function bin_isBinned(bin){return"binned"===bin||isBinParams(bin)&&!0===bin.binned}function isBinParams(bin){return Object(vega_util.F)(bin)}function isSelectionExtent(extent){var _a;return null===(_a=extent)||void 0===_a?void 0:_a.selection}function autoMaxBins(channel){switch(channel){case ROW:case COLUMN:case SIZE:case COLOR:case FILL:case STROKE:case STROKEWIDTH:case OPACITY:case FILLOPACITY:case STROKEOPACITY:case SHAPE:return 6;default:return 10}}function channelHasField(encoding,channel){const channelDef=encoding&&encoding[channel];return!!channelDef&&(Object(vega_util.A)(channelDef)?some(channelDef,fieldDef=>!!fieldDef.field):isFieldDef(channelDef)||hasConditionalFieldDef(channelDef))}function encoding_isAggregate(encoding){return some(CHANNELS,channel=>{if(channelHasField(encoding,channel)){const channelDef=encoding[channel];if(Object(vega_util.A)(channelDef))return some(channelDef,fieldDef=>!!fieldDef.aggregate);{const fieldDef=getFieldDef(channelDef);return fieldDef&&!!fieldDef.aggregate}}return!1})}function extractTransformsFromEncoding(oldEncoding,config){const groupby=[],bins=[],timeUnits=[],aggregate=[],encoding={};return forEach(oldEncoding,(channelDef,channel)=>{var _a;if(isFieldDef(channelDef)){const{field:field,aggregate:aggOp,timeUnit:timeUnit,bin:bin}=channelDef,remaining=__rest(channelDef,["field","aggregate","timeUnit","bin"]);if(aggOp||timeUnit||bin){const guide=getGuide(channelDef),isTitleDefined=guide&&guide.title;let newField=vgField(channelDef,{forAs:!0});const newFieldDef=Object.assign(Object.assign(Object.assign({},isTitleDefined?[]:{title:channeldef_title(channelDef,config,{allowDisabling:!0})}),remaining),{field:newField}),isPositionChannel="x"===channel||"y"===channel;if(aggOp){let op;if(isArgmaxDef(aggOp)?(op="argmax",newField=vgField({op:"argmax",field:aggOp.argmax},{forAs:!0}),newFieldDef.field=`${newField}.${field}`):isArgminDef(aggOp)?(op="argmin",newField=vgField({op:"argmin",field:aggOp.argmin},{forAs:!0}),newFieldDef.field=`${newField}.${field}`):"boxplot"!==aggOp&&"errorbar"!==aggOp&&"errorband"!==aggOp&&(op=aggOp),op){const aggregateEntry={op:op,as:newField};field&&(aggregateEntry.field=field),aggregate.push(aggregateEntry)}}else if(groupby.push(newField),isTypedFieldDef(channelDef)&&isBinning(bin)){if(bins.push({bin:bin,field:field,as:newField}),groupby.push(vgField(channelDef,{binSuffix:"end"})),binRequiresRange(channelDef,channel)&&groupby.push(vgField(channelDef,{binSuffix:"range"})),isPositionChannel){const secondaryChannel={field:newField+"_end"};encoding[channel+"2"]=secondaryChannel}newFieldDef.bin="binned",isSecondaryRangeChannel(channel)||(newFieldDef.type="quantitative")}else if(timeUnit){timeUnits.push({timeUnit:timeUnit,field:field,as:newField});const format=getDateTimeComponents(timeUnit,config.axis.shortTimeLabels).join(" "),formatType=isTypedFieldDef(channelDef)&&channelDef.type!==TEMPORAL&&"time";"text"===channel||"tooltip"===channel?(newFieldDef.format=null!=(_a=newFieldDef.format)?_a:format,formatType&&(newFieldDef.formatType=formatType)):!function isNonPositionScaleChannel(channel){return!!NONPOSITION_CHANNEL_INDEX[channel]}(channel)?isPositionChannel&&(newFieldDef.axis=Object.assign(Object.assign({format:format},formatType?{formatType:formatType}:{}),newFieldDef.axis)):newFieldDef.legend=Object.assign(Object.assign({format:format},formatType?{formatType:formatType}:{}),newFieldDef.legend)}encoding[channel]=newFieldDef}else groupby.push(field),encoding[channel]=oldEncoding[channel]}else encoding[channel]=oldEncoding[channel]}),{bins:bins,timeUnits:timeUnits,aggregate:aggregate,groupby:groupby,encoding:encoding}}function normalizeEncoding(encoding,markDef){const mark=markDef.type;return util_keys(encoding).reduce((normalizedEncoding,channel)=>{var _a;if(!isChannel(channel))return log_warn(message.invalidEncodingChannel(channel)),normalizedEncoding;if(!function markChannelCompatible(encoding,channel,mark){const markSupported=supportMark(channel,mark);if(!markSupported)return!1;if("binned"===markSupported){const primaryFieldDef=encoding["x2"===channel?"x":"y"];return!!(isFieldDef(primaryFieldDef)&&isFieldDef(encoding[channel])&&bin_isBinned(primaryFieldDef.bin))}return!0}(encoding,channel,mark))return log_warn(message.incompatibleChannel(channel,mark)),normalizedEncoding;if("size"===channel&&"line"===mark){if(null===(_a=getTypedFieldDef(encoding[channel]))||void 0===_a?void 0:_a.aggregate)return log_warn(message.LINE_WITH_VARYING_SIZE),normalizedEncoding}if("color"===channel&&(markDef.filled?"fill"in encoding:"stroke"in encoding))return log_warn(message.droppingColor("encoding",{fill:"fill"in encoding,stroke:"stroke"in encoding})),normalizedEncoding;const channelDef=encoding[channel];if("detail"===channel||"order"===channel&&!Object(vega_util.A)(channelDef)&&!isValueDef(channelDef)||"tooltip"===channel&&Object(vega_util.A)(channelDef))channelDef&&(normalizedEncoding[channel]=(Object(vega_util.A)(channelDef)?channelDef:[channelDef]).reduce((defs,fieldDef)=>(isFieldDef(fieldDef)?defs.push(normalizeFieldDef(fieldDef,channel)):log_warn(message.emptyFieldDef(fieldDef,channel)),defs),[]));else{if("tooltip"===channel&&null===channelDef)normalizedEncoding[channel]=null;else if(!isFieldDef(channelDef)&&!isValueDef(channelDef)&&!isConditionalDef(channelDef))return log_warn(message.emptyFieldDef(channelDef,channel)),normalizedEncoding;normalizedEncoding[channel]=channeldef_normalize(channelDef,channel)}return normalizedEncoding},{})}function fieldDefs(encoding){const arr=[];for(const channel of util_keys(encoding))if(channelHasField(encoding,channel)){const channelDef=encoding[channel],channelDefArray=Object(vega_util.A)(channelDef)?channelDef:[channelDef];for(const def of channelDefArray)isFieldDef(def)?arr.push(def):hasConditionalFieldDef(def)&&arr.push(def.condition)}return arr}function forEach(mapping,f,thisArg){if(mapping)for(const channel of util_keys(mapping)){const el=mapping[channel];Object(vega_util.A)(el)?el.forEach(channelDef=>{f.call(thisArg,channelDef,channel)}):f.call(thisArg,el,channel)}}function encoding_reduce(mapping,f,init,thisArg){return mapping?util_keys(mapping).reduce((r,channel)=>{const map=mapping[channel];return Object(vega_util.A)(map)?map.reduce((r1,channelDef)=>f.call(thisArg,r1,channelDef,channel),r):f.call(thisArg,r,map,channel)},init):init}function pathGroupingFields(mark,encoding){return util_keys(encoding).reduce((details,channel)=>{switch(channel){case"x":case"y":case"href":case"url":case"x2":case"y2":case"latitude":case"longitude":case"latitude2":case"longitude2":case"text":case"shape":case"tooltip":return details;case"order":if("line"===mark||"trail"===mark)return details;case"detail":case"key":{const channelDef=encoding[channel];return(Object(vega_util.A)(channelDef)||isFieldDef(channelDef))&&(Object(vega_util.A)(channelDef)?channelDef:[channelDef]).forEach(fieldDef=>{fieldDef.aggregate||details.push(vgField(fieldDef,{}))}),details}case"size":if("trail"===mark)return details;case"color":case"fill":case"stroke":case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeWidth":{const fieldDef=getTypedFieldDef(encoding[channel]);return fieldDef&&!fieldDef.aggregate&&details.push(vgField(fieldDef,{})),details}}},[])}function getCompositeMarkTooltip(tooltipSummary,continuousAxisChannelDef,encodingWithoutContinuousAxis,withFieldName=!0){if("tooltip"in encodingWithoutContinuousAxis)return{tooltip:encodingWithoutContinuousAxis.tooltip};return{tooltip:[...tooltipSummary.map(({fieldPrefix:fieldPrefix,titlePrefix:titlePrefix})=>({field:fieldPrefix+continuousAxisChannelDef.field,type:continuousAxisChannelDef.type,title:titlePrefix+(withFieldName?" of "+continuousAxisChannelDef.field:"")})),...fieldDefs(encodingWithoutContinuousAxis)]}}function getTitle(continuousAxisChannelDef){const{axis:axis,title:title,field:field}=continuousAxisChannelDef;return axis&&void 0!==axis.title?void 0:getFirstDefined(title,field)}function makeCompositeAggregatePartFactory(compositeMarkDef,continuousAxis,continuousAxisChannelDef,sharedEncoding,compositeMarkConfig){const{scale:scale,axis:axis}=continuousAxisChannelDef;return({partName:partName,mark:mark,positionPrefix:positionPrefix,endPositionPrefix:endPositionPrefix,extraEncoding:extraEncoding={}})=>{const title=getTitle(continuousAxisChannelDef);return partLayerMixins(compositeMarkDef,partName,compositeMarkConfig,{mark:mark,encoding:Object.assign(Object.assign(Object.assign({[continuousAxis]:Object.assign(Object.assign(Object.assign({field:positionPrefix+"_"+continuousAxisChannelDef.field,type:continuousAxisChannelDef.type},void 0!==title?{title:title}:{}),void 0!==scale?{scale:scale}:{}),void 0!==axis?{axis:axis}:{})},Object(vega_util.H)(endPositionPrefix)?{[continuousAxis+"2"]:{field:endPositionPrefix+"_"+continuousAxisChannelDef.field,type:continuousAxisChannelDef.type}}:{}),sharedEncoding),extraEncoding)})}}function partLayerMixins(markDef,part,compositeMarkConfig,partBaseSpec){const{clip:clip,color:color,opacity:opacity}=markDef,mark=markDef.type;return markDef[part]||void 0===markDef[part]&&compositeMarkConfig[part]?[Object.assign(Object.assign({},partBaseSpec),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},compositeMarkConfig[part]),clip?{clip:clip}:{}),color?{color:color}:{}),opacity?{opacity:opacity}:{}),isMarkDef(partBaseSpec.mark)?partBaseSpec.mark:{type:partBaseSpec.mark}),{style:`${mark}-${part}`}),Object(vega_util.B)(markDef[part])?{}:markDef[part])})]:[]}function compositeMarkContinuousAxis(spec,orient,compositeMark){const{encoding:encoding}=spec,continuousAxis="vertical"===orient?"y":"x",continuousAxisChannelDef=encoding[continuousAxis],continuousAxisChannelDef2=encoding[continuousAxis+"2"],continuousAxisChannelDefError=encoding[continuousAxis+"Error"],continuousAxisChannelDefError2=encoding[continuousAxis+"Error2"];return{continuousAxisChannelDef:filterAggregateFromChannelDef(continuousAxisChannelDef,compositeMark),continuousAxisChannelDef2:filterAggregateFromChannelDef(continuousAxisChannelDef2,compositeMark),continuousAxisChannelDefError:filterAggregateFromChannelDef(continuousAxisChannelDefError,compositeMark),continuousAxisChannelDefError2:filterAggregateFromChannelDef(continuousAxisChannelDefError2,compositeMark),continuousAxis:continuousAxis}}function filterAggregateFromChannelDef(continuousAxisChannelDef,compositeMark){if(continuousAxisChannelDef&&continuousAxisChannelDef.aggregate){const{aggregate:aggregate}=continuousAxisChannelDef,continuousAxisWithoutAggregate=__rest(continuousAxisChannelDef,["aggregate"]);return aggregate!==compositeMark&&log_warn(message.errorBarContinuousAxisHasCustomizedAggregate(aggregate,compositeMark)),continuousAxisWithoutAggregate}return continuousAxisChannelDef}function compositeMarkOrient(spec,compositeMark){const{mark:mark,encoding:encoding}=spec;if(isFieldDef(encoding.x)&&channeldef_isContinuous(encoding.x)){if(isFieldDef(encoding.y)&&channeldef_isContinuous(encoding.y)){if(void 0===encoding.x.aggregate&&encoding.y.aggregate===compositeMark)return"vertical";if(void 0===encoding.y.aggregate&&encoding.x.aggregate===compositeMark)return"horizontal";if(encoding.x.aggregate===compositeMark&&encoding.y.aggregate===compositeMark)throw new Error("Both x and y cannot have aggregate");return isMarkDef(mark)&&mark.orient?mark.orient:"vertical"}return"horizontal"}if(isFieldDef(encoding.y)&&channeldef_isContinuous(encoding.y))return"vertical";throw new Error("Need a valid continuous axis for "+compositeMark+"s")}const BOXPLOT="boxplot",BOXPLOT_PARTS=util_keys({box:1,median:1,outliers:1,rule:1,ticks:1}),boxPlotNormalizer=new base_CompositeMarkNormalizer(BOXPLOT,normalizeBoxPlot);function getBoxPlotType(extent){return Object(vega_util.E)(extent)?"tukey":extent}function normalizeBoxPlot(spec,{config:config}){var _a,_b;const{mark:mark,encoding:_encoding,selection:selection,projection:_p}=spec,outerSpec=__rest(spec,["mark","encoding","selection","projection"]),markDef=isMarkDef(mark)?mark:{type:mark};selection&&log_warn(message.selectionNotSupported("boxplot"));const extent=null!=(_a=markDef.extent)?_a:config.boxplot.extent,sizeValue=getFirstDefined(markDef.size,config.boxplot.size),boxPlotType=getBoxPlotType(extent),{transform:transform,continuousAxisChannelDef:continuousAxisChannelDef,continuousAxis:continuousAxis,groupby:groupby,aggregate:aggregate,encodingWithoutContinuousAxis:encodingWithoutContinuousAxis,ticksOrient:ticksOrient,boxOrient:boxOrient,customTooltipWithoutAggregatedField:customTooltipWithoutAggregatedField}=function boxParams(spec,extent,config){const orient=compositeMarkOrient(spec,BOXPLOT),{continuousAxisChannelDef:continuousAxisChannelDef,continuousAxis:continuousAxis}=compositeMarkContinuousAxis(spec,orient,BOXPLOT),continuousFieldName=continuousAxisChannelDef.field,boxPlotType=getBoxPlotType(extent),boxplotSpecificAggregate=[...boxParamsQuartiles(continuousFieldName),{op:"median",field:continuousFieldName,as:"mid_box_"+continuousFieldName},{op:"min",field:continuousFieldName,as:("min-max"===boxPlotType?"lower_whisker_":"min_")+continuousFieldName},{op:"max",field:continuousFieldName,as:("min-max"===boxPlotType?"upper_whisker_":"max_")+continuousFieldName}],postAggregateCalculates="min-max"===boxPlotType||"tukey"===boxPlotType?[]:[{calculate:`datum["upper_box_${continuousFieldName}"] - datum["lower_box_${continuousFieldName}"]`,as:"iqr_"+continuousFieldName},{calculate:`min(datum["upper_box_${continuousFieldName}"] + datum["iqr_${continuousFieldName}"] * ${extent}, datum["max_${continuousFieldName}"])`,as:"upper_whisker_"+continuousFieldName},{calculate:`max(datum["lower_box_${continuousFieldName}"] - datum["iqr_${continuousFieldName}"] * ${extent}, datum["min_${continuousFieldName}"])`,as:"lower_whisker_"+continuousFieldName}],_a=spec.encoding,_b=continuousAxis,oldEncodingWithoutContinuousAxis=(_a[_b],__rest(_a,["symbol"==typeof _b?_b:_b+""])),{customTooltipWithoutAggregatedField:customTooltipWithoutAggregatedField,filteredEncoding:filteredEncoding}=function filterTooltipWithAggregatedField(oldEncoding){const{tooltip:tooltip}=oldEncoding,filteredEncoding=__rest(oldEncoding,["tooltip"]);if(!tooltip)return{filteredEncoding:oldEncoding};let customTooltipWithAggregatedField,customTooltipWithoutAggregatedField;return Object(vega_util.A)(tooltip)?(tooltip.forEach(t=>{t.aggregate?(customTooltipWithAggregatedField||(customTooltipWithAggregatedField=[]),customTooltipWithAggregatedField.push(t)):(customTooltipWithoutAggregatedField||(customTooltipWithoutAggregatedField=[]),customTooltipWithoutAggregatedField.push(t))}),customTooltipWithAggregatedField&&(filteredEncoding.tooltip=customTooltipWithAggregatedField)):tooltip.aggregate?filteredEncoding.tooltip=tooltip:customTooltipWithoutAggregatedField=tooltip,Object(vega_util.A)(customTooltipWithoutAggregatedField)&&1===customTooltipWithoutAggregatedField.length&&(customTooltipWithoutAggregatedField=customTooltipWithoutAggregatedField[0]),{customTooltipWithoutAggregatedField:customTooltipWithoutAggregatedField,filteredEncoding:filteredEncoding}}(oldEncodingWithoutContinuousAxis),{bins:bins,timeUnits:timeUnits,aggregate:aggregate,groupby:groupby,encoding:encodingWithoutContinuousAxis}=extractTransformsFromEncoding(filteredEncoding,config),ticksOrient="vertical"===orient?"horizontal":"vertical",boxOrient=orient;return{transform:[...bins,...timeUnits,{aggregate:[...aggregate,...boxplotSpecificAggregate],groupby:groupby},...postAggregateCalculates],groupby:groupby,aggregate:aggregate,continuousAxisChannelDef:continuousAxisChannelDef,continuousAxis:continuousAxis,encodingWithoutContinuousAxis:encodingWithoutContinuousAxis,ticksOrient:ticksOrient,boxOrient:boxOrient,customTooltipWithoutAggregatedField:customTooltipWithoutAggregatedField}}(spec,extent,config),{color:color,size:size}=encodingWithoutContinuousAxis,encodingWithoutSizeColorAndContinuousAxis=__rest(encodingWithoutContinuousAxis,["color","size"]),makeBoxPlotPart=sharedEncoding=>makeCompositeAggregatePartFactory(markDef,continuousAxis,continuousAxisChannelDef,sharedEncoding,config.boxplot),makeBoxPlotExtent=makeBoxPlotPart(encodingWithoutSizeColorAndContinuousAxis),makeBoxPlotBox=makeBoxPlotPart(encodingWithoutContinuousAxis),makeBoxPlotMidTick=makeBoxPlotPart(Object.assign(Object.assign({},encodingWithoutSizeColorAndContinuousAxis),size?{size:size}:{})),fiveSummaryTooltipEncoding=getCompositeMarkTooltip([{fieldPrefix:"min-max"===boxPlotType?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===boxPlotType?"lower_whisker_":"min_",titlePrefix:"Min"}],continuousAxisChannelDef,encodingWithoutContinuousAxis),endTick={type:"tick",color:"black",opacity:1,orient:ticksOrient,invalid:null},whiskerTooltipEncoding="min-max"===boxPlotType?fiveSummaryTooltipEncoding:getCompositeMarkTooltip([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],continuousAxisChannelDef,encodingWithoutContinuousAxis),whiskerLayers=[...makeBoxPlotExtent({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:whiskerTooltipEncoding}),...makeBoxPlotExtent({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:whiskerTooltipEncoding}),...makeBoxPlotExtent({partName:"ticks",mark:endTick,positionPrefix:"lower_whisker",extraEncoding:whiskerTooltipEncoding}),...makeBoxPlotExtent({partName:"ticks",mark:endTick,positionPrefix:"upper_whisker",extraEncoding:whiskerTooltipEncoding})],boxLayers=[..."tukey"!==boxPlotType?whiskerLayers:[],...makeBoxPlotBox({partName:"box",mark:Object.assign(Object.assign({type:"bar"},sizeValue?{size:sizeValue}:{}),{orient:boxOrient,invalid:null}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:fiveSummaryTooltipEncoding}),...makeBoxPlotMidTick({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},Object(vega_util.F)(config.boxplot.median)&&config.boxplot.median.color?{color:config.boxplot.median.color}:{}),sizeValue?{size:sizeValue}:{}),{orient:ticksOrient}),positionPrefix:"mid_box",extraEncoding:fiveSummaryTooltipEncoding})];let filteredLayersMixins;if("min-max"!==boxPlotType){const lowerBoxExpr=`datum["lower_box_${continuousAxisChannelDef.field}"]`,upperBoxExpr=`datum["upper_box_${continuousAxisChannelDef.field}"]`,iqrExpr=`(${upperBoxExpr} - ${lowerBoxExpr})`,lowerWhiskerExpr=`${lowerBoxExpr} - ${extent} * ${iqrExpr}`,upperWhiskerExpr=`${upperBoxExpr} + ${extent} * ${iqrExpr}`,fieldExpr=`datum["${continuousAxisChannelDef.field}"]`,joinaggregateTransform={joinaggregate:boxParamsQuartiles(continuousAxisChannelDef.field),groupby:groupby};let filteredWhiskerSpec=void 0;"tukey"===boxPlotType&&(filteredWhiskerSpec={transform:[{filter:`(${lowerWhiskerExpr} <= ${fieldExpr}) && (${fieldExpr} <= ${upperWhiskerExpr})`},{aggregate:[{op:"min",field:continuousAxisChannelDef.field,as:"lower_whisker_"+continuousAxisChannelDef.field},{op:"max",field:continuousAxisChannelDef.field,as:"upper_whisker_"+continuousAxisChannelDef.field},{op:"min",field:"lower_box_"+continuousAxisChannelDef.field,as:"lower_box_"+continuousAxisChannelDef.field},{op:"max",field:"upper_box_"+continuousAxisChannelDef.field,as:"upper_box_"+continuousAxisChannelDef.field},...aggregate],groupby:groupby}],layer:whiskerLayers});const{tooltip:tooltip}=encodingWithoutSizeColorAndContinuousAxis,encodingWithoutSizeColorContinuousAxisAndTooltip=__rest(encodingWithoutSizeColorAndContinuousAxis,["tooltip"]),{scale:scale,axis:axis}=continuousAxisChannelDef,title=getTitle(continuousAxisChannelDef),outlierLayersMixins=partLayerMixins(markDef,"outliers",config.boxplot,{transform:[{filter:`(${fieldExpr} < ${lowerWhiskerExpr}) || (${fieldExpr} > ${upperWhiskerExpr})`}],mark:"point",encoding:Object.assign(Object.assign({[continuousAxis]:Object.assign(Object.assign(Object.assign({field:continuousAxisChannelDef.field,type:continuousAxisChannelDef.type},void 0!==title?{title:title}:{}),void 0!==scale?{scale:scale}:{}),void 0!==axis?{axis:axis}:{})},encodingWithoutSizeColorContinuousAxisAndTooltip),customTooltipWithoutAggregatedField?{tooltip:customTooltipWithoutAggregatedField}:{})})[0];outlierLayersMixins&&filteredWhiskerSpec?filteredLayersMixins={transform:[joinaggregateTransform],layer:[outlierLayersMixins,filteredWhiskerSpec]}:outlierLayersMixins?(filteredLayersMixins=outlierLayersMixins).transform.unshift(joinaggregateTransform):filteredWhiskerSpec&&(filteredLayersMixins=filteredWhiskerSpec).transform.unshift(joinaggregateTransform)}return filteredLayersMixins?Object.assign(Object.assign({},outerSpec),{layer:[filteredLayersMixins,{transform:transform,layer:boxLayers}]}):Object.assign(Object.assign({},outerSpec),{transform:(_b=outerSpec.transform,null!=_b?_b:[]).concat(transform),layer:boxLayers})}function boxParamsQuartiles(continousAxisField){return[{op:"q1",field:continousAxisField,as:"lower_box_"+continousAxisField},{op:"q3",field:continousAxisField,as:"upper_box_"+continousAxisField}]}const ERRORBAR="errorbar",ERRORBAR_PARTS=util_keys({ticks:1,rule:1}),errorBarNormalizer=new base_CompositeMarkNormalizer(ERRORBAR,normalizeErrorBar);function normalizeErrorBar(spec,{config:config}){const{transform:transform,continuousAxisChannelDef:continuousAxisChannelDef,continuousAxis:continuousAxis,encodingWithoutContinuousAxis:encodingWithoutContinuousAxis,ticksOrient:ticksOrient,markDef:markDef,outerSpec:outerSpec,tooltipEncoding:tooltipEncoding}=errorBarParams(spec,ERRORBAR,config),makeErrorBarPart=makeCompositeAggregatePartFactory(markDef,continuousAxis,continuousAxisChannelDef,encodingWithoutContinuousAxis,config.errorbar),tick={type:"tick",orient:ticksOrient};return Object.assign(Object.assign({},outerSpec),{transform:transform,layer:[...makeErrorBarPart({partName:"ticks",mark:tick,positionPrefix:"lower",extraEncoding:tooltipEncoding}),...makeErrorBarPart({partName:"ticks",mark:tick,positionPrefix:"upper",extraEncoding:tooltipEncoding}),...makeErrorBarPart({partName:"rule",mark:"rule",positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:tooltipEncoding})]})}function errorBarOrientAndInputType(spec,compositeMark){const{encoding:encoding}=spec;if(function errorBarIsInputTypeRaw(encoding){return(isFieldDef(encoding.x)||isFieldDef(encoding.y))&&!isFieldDef(encoding.x2)&&!isFieldDef(encoding.y2)&&!isFieldDef(encoding.xError)&&!isFieldDef(encoding.xError2)&&!isFieldDef(encoding.yError)&&!isFieldDef(encoding.yError2)}(encoding))return{orient:compositeMarkOrient(spec,compositeMark),inputType:"raw"};const isTypeAggregatedUpperLower=function errorBarIsInputTypeAggregatedUpperLower(encoding){return isFieldDef(encoding.x2)||isFieldDef(encoding.y2)}(encoding),isTypeAggregatedError=function errorBarIsInputTypeAggregatedError(encoding){return isFieldDef(encoding.xError)||isFieldDef(encoding.xError2)||isFieldDef(encoding.yError)||isFieldDef(encoding.yError2)}(encoding),x=encoding.x,y=encoding.y;if(isTypeAggregatedUpperLower){if(isTypeAggregatedError)throw new Error(compositeMark+" cannot be both type aggregated-upper-lower and aggregated-error");const x2=encoding.x2,y2=encoding.y2;if(isFieldDef(x2)&&isFieldDef(y2))throw new Error(compositeMark+" cannot have both x2 and y2");if(isFieldDef(x2)){if(isFieldDef(x)&&channeldef_isContinuous(x))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error("Both x and x2 have to be quantitative in "+compositeMark)}if(isFieldDef(y2)){if(isFieldDef(y)&&channeldef_isContinuous(y))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error("Both y and y2 have to be quantitative in "+compositeMark)}throw new Error("No ranged axis")}{const xError=encoding.xError,xError2=encoding.xError2,yError=encoding.yError,yError2=encoding.yError2;if(isFieldDef(xError2)&&!isFieldDef(xError))throw new Error(compositeMark+" cannot have xError2 without xError");if(isFieldDef(yError2)&&!isFieldDef(yError))throw new Error(compositeMark+" cannot have yError2 without yError");if(isFieldDef(xError)&&isFieldDef(yError))throw new Error(compositeMark+" cannot have both xError and yError with both are quantiative");if(isFieldDef(xError)){if(isFieldDef(x)&&channeldef_isContinuous(x))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(isFieldDef(yError)){if(isFieldDef(y)&&channeldef_isContinuous(y))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function errorBarParams(spec,compositeMark,config){var _a;const{mark:mark,encoding:encoding,selection:selection,projection:_p}=spec,outerSpec=__rest(spec,["mark","encoding","selection","projection"]),markDef=isMarkDef(mark)?mark:{type:mark};selection&&log_warn(message.selectionNotSupported(compositeMark));const{orient:orient,inputType:inputType}=errorBarOrientAndInputType(spec,compositeMark),{continuousAxisChannelDef:continuousAxisChannelDef,continuousAxisChannelDef2:continuousAxisChannelDef2,continuousAxisChannelDefError:continuousAxisChannelDefError,continuousAxisChannelDefError2:continuousAxisChannelDefError2,continuousAxis:continuousAxis}=compositeMarkContinuousAxis(spec,orient,compositeMark),{errorBarSpecificAggregate:errorBarSpecificAggregate,postAggregateCalculates:postAggregateCalculates,tooltipSummary:tooltipSummary,tooltipTitleWithFieldName:tooltipTitleWithFieldName}=function errorBarAggregationAndCalculation(markDef,continuousAxisChannelDef,continuousAxisChannelDef2,continuousAxisChannelDefError,continuousAxisChannelDefError2,inputType,compositeMark,config){let errorBarSpecificAggregate=[],postAggregateCalculates=[];const continuousFieldName=continuousAxisChannelDef.field;let tooltipSummary,tooltipTitleWithFieldName=!1;if("raw"===inputType){const center=markDef.center?markDef.center:markDef.extent?"iqr"===markDef.extent?"median":"mean":config.errorbar.center,extent=markDef.extent?markDef.extent:"mean"===center?"stderr":"iqr";if("median"===center!=("iqr"===extent)&&log_warn(message.errorBarCenterIsUsedWithWrongExtent(center,extent,compositeMark)),"stderr"===extent||"stdev"===extent)errorBarSpecificAggregate=[{op:extent,field:continuousFieldName,as:"extent_"+continuousFieldName},{op:center,field:continuousFieldName,as:"center_"+continuousFieldName}],postAggregateCalculates=[{calculate:`datum["center_${continuousFieldName}"] + datum["extent_${continuousFieldName}"]`,as:"upper_"+continuousFieldName},{calculate:`datum["center_${continuousFieldName}"] - datum["extent_${continuousFieldName}"]`,as:"lower_"+continuousFieldName}],tooltipSummary=[{fieldPrefix:"center_",titlePrefix:titlecase(center)},{fieldPrefix:"upper_",titlePrefix:getTitlePrefix(center,extent,"+")},{fieldPrefix:"lower_",titlePrefix:getTitlePrefix(center,extent,"-")}],tooltipTitleWithFieldName=!0;else{let centerOp,lowerExtentOp,upperExtentOp;markDef.center&&markDef.extent&&log_warn(message.errorBarCenterIsNotNeeded(markDef.extent,compositeMark)),"ci"===extent?(centerOp="mean",lowerExtentOp="ci0",upperExtentOp="ci1"):(centerOp="median",lowerExtentOp="q1",upperExtentOp="q3"),errorBarSpecificAggregate=[{op:lowerExtentOp,field:continuousFieldName,as:"lower_"+continuousFieldName},{op:upperExtentOp,field:continuousFieldName,as:"upper_"+continuousFieldName},{op:centerOp,field:continuousFieldName,as:"center_"+continuousFieldName}],tooltipSummary=[{fieldPrefix:"upper_",titlePrefix:channeldef_title({field:continuousFieldName,aggregate:upperExtentOp,type:"quantitative"},config,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:channeldef_title({field:continuousFieldName,aggregate:lowerExtentOp,type:"quantitative"},config,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:channeldef_title({field:continuousFieldName,aggregate:centerOp,type:"quantitative"},config,{allowDisabling:!1})}]}}else{(markDef.center||markDef.extent)&&log_warn(message.errorBarCenterAndExtentAreNotNeeded(markDef.center,markDef.extent)),"aggregated-upper-lower"===inputType?(tooltipSummary=[],postAggregateCalculates=[{calculate:`datum["${continuousAxisChannelDef2.field}"]`,as:"upper_"+continuousFieldName},{calculate:`datum["${continuousFieldName}"]`,as:"lower_"+continuousFieldName}]):"aggregated-error"===inputType&&(tooltipSummary=[{fieldPrefix:"",titlePrefix:continuousFieldName}],postAggregateCalculates=[{calculate:`datum["${continuousFieldName}"] + datum["${continuousAxisChannelDefError.field}"]`,as:"upper_"+continuousFieldName}],continuousAxisChannelDefError2?postAggregateCalculates.push({calculate:`datum["${continuousFieldName}"] + datum["${continuousAxisChannelDefError2.field}"]`,as:"lower_"+continuousFieldName}):postAggregateCalculates.push({calculate:`datum["${continuousFieldName}"] - datum["${continuousAxisChannelDefError.field}"]`,as:"lower_"+continuousFieldName}));for(const postAggregateCalculate of postAggregateCalculates)tooltipSummary.push({fieldPrefix:postAggregateCalculate.as.substring(0,6),titlePrefix:replaceAll(replaceAll(postAggregateCalculate.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:postAggregateCalculates,errorBarSpecificAggregate:errorBarSpecificAggregate,tooltipSummary:tooltipSummary,tooltipTitleWithFieldName:tooltipTitleWithFieldName}}(markDef,continuousAxisChannelDef,continuousAxisChannelDef2,continuousAxisChannelDefError,continuousAxisChannelDefError2,inputType,compositeMark,config),_b=continuousAxis,_c=(encoding[_b],"x"===continuousAxis?"x2":"y2"),_d=(encoding[_c],"x"===continuousAxis?"xError":"yError"),_e=(encoding[_d],"x"===continuousAxis?"xError2":"yError2"),oldEncodingWithoutContinuousAxis=(encoding[_e],__rest(encoding,["symbol"==typeof _b?_b:_b+"","symbol"==typeof _c?_c:_c+"","symbol"==typeof _d?_d:_d+"","symbol"==typeof _e?_e:_e+""])),{bins:bins,timeUnits:timeUnits,aggregate:oldAggregate,groupby:oldGroupBy,encoding:encodingWithoutContinuousAxis}=extractTransformsFromEncoding(oldEncodingWithoutContinuousAxis,config),aggregate=[...oldAggregate,...errorBarSpecificAggregate],groupby="raw"!==inputType?[]:oldGroupBy,tooltipEncoding=getCompositeMarkTooltip(tooltipSummary,continuousAxisChannelDef,encodingWithoutContinuousAxis,tooltipTitleWithFieldName);return{transform:[...(_a=outerSpec.transform,null!=_a?_a:[]),...bins,...timeUnits,...aggregate.length?[{aggregate:aggregate,groupby:groupby}]:[],...postAggregateCalculates],groupby:groupby,continuousAxisChannelDef:continuousAxisChannelDef,continuousAxis:continuousAxis,encodingWithoutContinuousAxis:encodingWithoutContinuousAxis,ticksOrient:"vertical"===orient?"horizontal":"vertical",markDef:markDef,outerSpec:outerSpec,tooltipEncoding:tooltipEncoding}}function getTitlePrefix(center,extent,operation){return titlecase(center)+" "+operation+" "+extent}const ERRORBAND="errorband",ERRORBAND_PARTS=util_keys({band:1,borders:1}),errorBandNormalizer=new base_CompositeMarkNormalizer(ERRORBAND,normalizeErrorBand);function normalizeErrorBand(spec,{config:config}){const{transform:transform,continuousAxisChannelDef:continuousAxisChannelDef,continuousAxis:continuousAxis,encodingWithoutContinuousAxis:encodingWithoutContinuousAxis,markDef:markDef,outerSpec:outerSpec,tooltipEncoding:tooltipEncoding}=errorBarParams(spec,ERRORBAND,config),errorBandDef=markDef,makeErrorBandPart=makeCompositeAggregatePartFactory(errorBandDef,continuousAxis,continuousAxisChannelDef,encodingWithoutContinuousAxis,config.errorband),is2D=void 0!==spec.encoding.x&&void 0!==spec.encoding.y;let bandMark={type:is2D?"area":"rect"},bordersMark={type:is2D?"line":"rule"};const interpolate=Object.assign(Object.assign({},errorBandDef.interpolate?{interpolate:errorBandDef.interpolate}:{}),errorBandDef.tension&&errorBandDef.interpolate?{interpolate:errorBandDef.tension}:{});return is2D?(bandMark=Object.assign(Object.assign({},bandMark),interpolate),bordersMark=Object.assign(Object.assign({},bordersMark),interpolate)):errorBandDef.interpolate?log_warn(message.errorBand1DNotSupport("interpolate")):errorBandDef.tension&&log_warn(message.errorBand1DNotSupport("tension")),Object.assign(Object.assign({},outerSpec),{transform:transform,layer:[...makeErrorBandPart({partName:"band",mark:bandMark,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:tooltipEncoding}),...makeErrorBandPart({partName:"borders",mark:bordersMark,positionPrefix:"lower",extraEncoding:tooltipEncoding}),...makeErrorBandPart({partName:"borders",mark:bordersMark,positionPrefix:"upper",extraEncoding:tooltipEncoding})]})}const compositeMarkRegistry={};function compositemark_add(mark,run,parts){const normalizer=new base_CompositeMarkNormalizer(mark,run);compositeMarkRegistry[mark]={normalizer:normalizer,parts:parts}}compositemark_add(BOXPLOT,normalizeBoxPlot,BOXPLOT_PARTS),compositemark_add(ERRORBAR,normalizeErrorBar,ERRORBAR_PARTS),compositemark_add(ERRORBAND,normalizeErrorBand,ERRORBAND_PARTS);const VL_ONLY_GUIDE_CONFIG=["shortTimeLabels"],VL_ONLY_LEGEND_CONFIG=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength"],COMMON_LEGEND_PROPERTY_INDEX={clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},SELECTION_ID=(util_keys(COMMON_LEGEND_PROPERTY_INDEX),"_vgsid_"),defaultConfig={single:{on:"click",fields:[SELECTION_ID],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:[SELECTION_ID],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function isConcatSpec(spec){return void 0!==spec.concat}function isVConcatSpec(spec){return void 0!==spec.vconcat}function isHConcatSpec(spec){return void 0!==spec.hconcat}function isRepeatSpec(spec){return void 0!==spec.repeat}function isStep(size){return Object(vega_util.F)(size)&&void 0!==size.step}const COMPOSITION_LAYOUT_PROPERTIES=util_keys({align:1,bounds:1,center:1,columns:1,spacing:1});function getViewConfigContinuousSize(viewConfig,channel){var _a;return null!=(_a=viewConfig[channel])?_a:viewConfig["width"===channel?"continuousWidth":"continuousHeight"]}function getViewConfigDiscreteStep(viewConfig,channel){const size=getViewConfigDiscreteSize(viewConfig,channel);return isStep(size)?size.step:DEFAULT_STEP}function getViewConfigDiscreteSize(viewConfig,channel){var _a;return getFirstDefined(null!=(_a=viewConfig[channel])?_a:viewConfig["width"===channel?"discreteWidth":"discreteHeight"],{step:viewConfig.step})}const DEFAULT_STEP=20;const config_defaultConfig={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:DEFAULT_STEP},mark:{color:"#4c78a8",invalid:"filter",timeUnitBand:1},area:{},bar:defaultBarConfig,circle:{},geoshape:{},image:{},line:{},point:{},rect:defaultRectConfig,rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4},projection:{},axis:{},axisX:{},axisY:{},axisLeft:{},axisRight:{},axisTop:{},axisBottom:{},axisBand:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:defaultConfig,style:{},title:{},facet:{spacing:20},repeat:{spacing:20},concat:{spacing:20}};function initConfig(config){return Object(vega_util.M)({},config_defaultConfig,config)}const MARK_STYLES=["view",...PRIMITIVE_MARKS],VL_ONLY_CONFIG_PROPERTIES=["background","padding","facet","concat","repeat","numberFormat","timeFormat","countTitle","header","scale","selection","overlay"],VL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},{area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],text:["shortTimeLabels"],tick:["bandSize","thickness"]});function stripAndRedirectConfig(config){config=duplicate(config);for(const prop of VL_ONLY_CONFIG_PROPERTIES)delete config[prop];if(config.axis)for(const prop of VL_ONLY_GUIDE_CONFIG)delete config.axis[prop];if(config.legend){for(const prop of VL_ONLY_GUIDE_CONFIG)delete config.legend[prop];for(const prop of VL_ONLY_LEGEND_CONFIG)delete config.legend[prop]}if(config.mark)for(const prop of VL_ONLY_MARK_CONFIG_PROPERTIES)delete config.mark[prop];for(const markType of MARK_STYLES){for(const prop of VL_ONLY_MARK_CONFIG_PROPERTIES)delete config[markType][prop];const vlOnlyMarkSpecificConfigs=VL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX[markType];if(vlOnlyMarkSpecificConfigs)for(const prop of vlOnlyMarkSpecificConfigs)delete config[markType][prop];redirectConfig(config,markType)}for(const m of function getAllCompositeMarks(){return util_keys(compositeMarkRegistry)}())delete config[m];redirectConfig(config,"title","group-title");for(const prop in config)Object(vega_util.F)(config[prop])&&0===util_keys(config[prop]).length&&delete config[prop];return util_keys(config).length>0?config:void 0}function redirectConfig(config,prop,toProp,compositeMarkPart){const propConfig="title"===prop?extractTitleConfig(config.title).mark:compositeMarkPart?config[prop][compositeMarkPart]:config[prop];"view"===prop&&(toProp="cell");const style=Object.assign(Object.assign({},propConfig),config.style[prop]);util_keys(style).length>0&&(config.style[null!=toProp?toProp:prop]=style),compositeMarkPart||delete config[prop]}function isLayerSpec(spec){return void 0!==spec.layer}class map_SpecMapper{map(spec,params){return isFacetSpec(spec)?this.mapFacet(spec,params):isRepeatSpec(spec)?this.mapRepeat(spec,params):isHConcatSpec(spec)?this.mapHConcat(spec,params):isVConcatSpec(spec)?this.mapVConcat(spec,params):isConcatSpec(spec)?this.mapConcat(spec,params):this.mapLayerOrUnit(spec,params)}mapLayerOrUnit(spec,params){if(isLayerSpec(spec))return this.mapLayer(spec,params);if(isUnitSpec(spec))return this.mapUnit(spec,params);throw new Error(message.invalidSpec(spec))}mapLayer(spec,params){return Object.assign(Object.assign({},spec),{layer:spec.layer.map(subspec=>this.mapLayerOrUnit(subspec,params))})}mapHConcat(spec,params){return Object.assign(Object.assign({},spec),{hconcat:spec.hconcat.map(subspec=>this.map(subspec,params))})}mapVConcat(spec,params){return Object.assign(Object.assign({},spec),{vconcat:spec.vconcat.map(subspec=>this.map(subspec,params))})}mapConcat(spec,params){const{concat:concat}=spec,rest=__rest(spec,["concat"]);return Object.assign(Object.assign({},rest),{concat:concat.map(subspec=>this.map(subspec,params))})}mapFacet(spec,params){return Object.assign(Object.assign({},spec),{spec:this.map(spec.spec,params)})}mapRepeat(spec,params){return Object.assign(Object.assign({},spec),{spec:this.map(spec.spec,params)})}}const STACK_OFFSET_INDEX={zero:1,center:1,normalize:1};const STACKABLE_MARKS=[BAR,AREA,RULE,POINT,CIRCLE,SQUARE,LINE,TEXT,TICK],STACK_BY_DEFAULT_MARKS=[BAR,AREA];function stack_stack(m,encoding,opt={}){const mark=isMarkDef(m)?m.type:m;if(!util_contains(STACKABLE_MARKS,mark))return null;const fieldChannel=function potentialStackedChannel(encoding){const xDef=encoding.x,yDef=encoding.y;if(isFieldDef(xDef)&&isFieldDef(yDef))if("quantitative"===xDef.type&&"quantitative"===yDef.type){if(xDef.stack)return"x";if(yDef.stack)return"y";if(!!xDef.aggregate!=!!yDef.aggregate)return xDef.aggregate?"x":"y"}else{if("quantitative"===xDef.type)return"x";if("quantitative"===yDef.type)return"y"}else{if(isFieldDef(xDef)&&"quantitative"===xDef.type)return"x";if(isFieldDef(yDef)&&"quantitative"===yDef.type)return"y"}}(encoding);if(!fieldChannel)return null;const stackedFieldDef=encoding[fieldChannel],stackedField=isStringFieldDef(stackedFieldDef)?vgField(stackedFieldDef,{}):void 0,dimensionChannel="x"===fieldChannel?"y":"x",dimensionDef=encoding[dimensionChannel],dimensionField=isStringFieldDef(dimensionDef)?vgField(dimensionDef,{}):void 0,stackBy=NONPOSITION_CHANNELS.reduce((sc,channel)=>{if("tooltip"!==channel&&channelHasField(encoding,channel)){const channelDef=encoding[channel];(Object(vega_util.A)(channelDef)?channelDef:[channelDef]).forEach(cDef=>{const fieldDef=getTypedFieldDef(cDef);if(fieldDef.aggregate)return;const f=isStringFieldDef(fieldDef)?vgField(fieldDef,{}):void 0;(!f||f!==dimensionField&&f!==stackedField)&&sc.push({channel:channel,fieldDef:fieldDef})})}return sc},[]);let offset;if(void 0!==stackedFieldDef.stack?offset=Object(vega_util.B)(stackedFieldDef.stack)?stackedFieldDef.stack?"zero":null:stackedFieldDef.stack:stackBy.length>0&&util_contains(STACK_BY_DEFAULT_MARKS,mark)&&(offset="zero"),!offset||!function isStackOffset(s){return!!STACK_OFFSET_INDEX[s]}(offset))return null;if(encoding_isAggregate(encoding)&&0===stackBy.length)return null;if(stackedFieldDef.scale&&stackedFieldDef.scale.type&&stackedFieldDef.scale.type!==ScaleType.LINEAR){if(opt.disallowNonLinearStack)return null;log_warn(message.cannotStackNonLinearScale(stackedFieldDef.scale.type))}return channelHasField(encoding,fieldChannel===channel_X?channel_X2:channel_Y2)?(void 0!==stackedFieldDef.stack&&log_warn(message.cannotStackRangedMark(fieldChannel)),null):(stackedFieldDef.aggregate&&!util_contains(SUM_OPS,stackedFieldDef.aggregate)&&log_warn(message.stackNonSummativeAggregate(stackedFieldDef.aggregate)),{groupbyChannel:dimensionDef?dimensionChannel:void 0,fieldChannel:fieldChannel,impute:isPathMark(mark),stackBy:stackBy,offset:offset})}function dropLineAndPoint(markDef){const{point:_point,line:_line}=markDef,mark=__rest(markDef,["point","line"]);return util_keys(mark).length>1?mark:mark.type}function dropLineAndPointFromConfig(config){for(const mark of["line","area","rule","trail"])config[mark]&&(config=Object.assign(Object.assign({},config),{[mark]:omit(config[mark],["point","line"])}));return config}function getPointOverlay(markDef,markConfig={},encoding){return"transparent"===markDef.point?{opacity:0}:markDef.point?Object(vega_util.F)(markDef.point)?markDef.point:{}:void 0!==markDef.point?null:markConfig.point||encoding.shape?Object(vega_util.F)(markConfig.point)?markConfig.point:{}:void 0}function getLineOverlay(markDef,markConfig={}){return markDef.line?!0===markDef.line?{}:markDef.line:void 0!==markDef.line?null:markConfig.line?!0===markConfig.line?{}:markConfig.line:void 0}class pathoverlay_PathOverlayNormalizer{constructor(){this.name="path-overlay"}hasMatchingType(spec,config){if(isUnitSpec(spec)){const{mark:mark,encoding:encoding}=spec,markDef=isMarkDef(mark)?mark:{type:mark};switch(markDef.type){case"line":case"rule":case"trail":return!!getPointOverlay(markDef,config[markDef.type],encoding);case"area":return!!getPointOverlay(markDef,config[markDef.type],encoding)||!!getLineOverlay(markDef,config[markDef.type])}}return!1}run(spec,params,normalize){const{config:config}=params,{selection:selection,projection:projection,encoding:encoding,mark:mark}=spec,outerSpec=__rest(spec,["selection","projection","encoding","mark"]),markDef=isMarkDef(mark)?mark:{type:mark},pointOverlay=getPointOverlay(markDef,config[markDef.type],encoding),lineOverlay="area"===markDef.type&&getLineOverlay(markDef,config[markDef.type]),layer=[Object.assign(Object.assign({},selection?{selection:selection}:{}),{mark:dropLineAndPoint(Object.assign(Object.assign({},markDef),"area"===markDef.type?{opacity:.7}:{})),encoding:omit(encoding,["shape"])})],stackProps=stack_stack(markDef,encoding);let overlayEncoding=encoding;if(stackProps){const{fieldChannel:stackFieldChannel,offset:offset}=stackProps;overlayEncoding=Object.assign(Object.assign({},encoding),{[stackFieldChannel]:Object.assign(Object.assign({},encoding[stackFieldChannel]),offset?{stack:offset}:{})})}return lineOverlay&&layer.push(Object.assign(Object.assign({},projection?{projection:projection}:{}),{mark:Object.assign(Object.assign({type:"line"},util_pick(markDef,["clip","interpolate","tension","tooltip"])),lineOverlay),encoding:overlayEncoding})),pointOverlay&&layer.push(Object.assign(Object.assign({},projection?{projection:projection}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},util_pick(markDef,["clip","tooltip"])),pointOverlay),encoding:overlayEncoding})),normalize(Object.assign(Object.assign({},outerSpec),{layer:layer}),Object.assign(Object.assign({},params),{config:dropLineAndPointFromConfig(config)}))}}class rangestep_RangeStepNormalizer{constructor(){this.name="RangeStep"}hasMatchingType(spec){var _a,_b;if(isUnitSpec(spec)&&spec.encoding)for(const channel of POSITION_SCALE_CHANNELS){const def=spec.encoding[channel];if(def&&isFieldDef(def)&&(null===(_b=null===(_a=def)||void 0===_a?void 0:_a.scale)||void 0===_b?void 0:_b.rangeStep))return!0}return!1}run(spec){var _a,_b;const sizeMixins={};let encoding=Object.assign({},spec.encoding);for(const channel of POSITION_SCALE_CHANNELS){const sizeType=getSizeType(channel),def=encoding[channel];if(def&&isFieldDef(def)&&(null===(_b=null===(_a=def)||void 0===_a?void 0:_a.scale)||void 0===_b?void 0:_b.rangeStep)){const{scale:scale}=def,defWithoutScale=__rest(def,["scale"]),_c=scale,{rangeStep:rangeStep}=_c,scaleWithoutRangeStep=__rest(_c,["rangeStep"]);sizeMixins[sizeType]={step:scale.rangeStep},log_warn(message.RANGE_STEP_DEPRECATED),encoding=Object.assign(Object.assign({},encoding),{[channel]:Object.assign(Object.assign({},defWithoutScale),util_keys(scaleWithoutRangeStep).length?{scale:scaleWithoutRangeStep}:{})})}}return Object.assign(Object.assign(Object.assign({},sizeMixins),spec),{encoding:encoding})}}class ruleforrangedline_RuleForRangedLineNormalizer{constructor(){this.name="RuleForRangedLine"}hasMatchingType(spec){if(isUnitSpec(spec)){const{encoding:encoding,mark:mark}=spec;if("line"===mark)for(const channel of SECONDARY_RANGE_CHANNEL){const mainChannelDef=encoding[getMainRangeChannel(channel)];if(encoding[channel]&&isFieldDef(mainChannelDef)&&!bin_isBinned(mainChannelDef.bin))return!0}}return!1}run(spec,params,normalize){const{encoding:encoding}=spec;return log_warn(message.lineWithRange(!!encoding.x2,!!encoding.y2)),normalize(Object.assign(Object.assign({},spec),{mark:"rule"}),params)}}function mergeEncoding(opt){const{parentEncoding:parentEncoding,encoding:encoding}=opt;if(parentEncoding&&encoding){const overriden=util_keys(parentEncoding).reduce((o,key)=>(encoding[key]&&o.push(key),o),[]);overriden.length>0&&log_warn(message.encodingOverridden(overriden))}const merged=Object.assign(Object.assign({},null!=parentEncoding?parentEncoding:{}),null!=encoding?encoding:{});return util_keys(merged).length>0?merged:void 0}function mergeProjection(opt){const{parentProjection:parentProjection,projection:projection}=opt;return parentProjection&&projection&&log_warn(message.projectionOverridden({parentProjection:parentProjection,projection:projection})),null!=projection?projection:parentProjection}function normalize_normalize(spec,config){void 0===config&&(config=initConfig(spec.config));const normalizedSpec=function normalizeGenericSpec(spec,config={}){return normalize_normalizer.map(spec,{config:config})}(spec,config),{width:width,height:height,autosize:autosize}=spec;return Object.assign(Object.assign({},normalizedSpec),{autosize:normalizeAutoSize(normalizedSpec,{width:width,height:height,autosize:autosize},config)})}const normalize_normalizer=new class core_CoreNormalizer extends map_SpecMapper{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[boxPlotNormalizer,errorBarNormalizer,errorBandNormalizer,new pathoverlay_PathOverlayNormalizer,new ruleforrangedline_RuleForRangedLineNormalizer,new rangestep_RangeStepNormalizer]}map(spec,params){if(isUnitSpec(spec)){const hasRow=channelHasField(spec.encoding,ROW),hasColumn=channelHasField(spec.encoding,COLUMN),hasFacet=channelHasField(spec.encoding,FACET);if(hasRow||hasColumn||hasFacet)return this.mapFacetedUnit(spec,params)}return super.map(spec,params)}mapUnit(spec,params){const{parentEncoding:parentEncoding,parentProjection:parentProjection}=params;if(parentEncoding||parentProjection)return this.mapUnitWithParentEncodingOrProjection(spec,params);const normalizeLayerOrUnit=this.mapLayerOrUnit.bind(this);for(const unitNormalizer of this.nonFacetUnitNormalizers)if(unitNormalizer.hasMatchingType(spec,params.config))return unitNormalizer.run(spec,params,normalizeLayerOrUnit);return spec}mapRepeat(spec,params){const{repeat:repeat}=spec;return!Object(vega_util.A)(repeat)&&spec.columns&&(spec=omit(spec,["columns"]),log_warn(message.columnsNotSupportByRowCol("repeat"))),Object.assign(Object.assign({},spec),{spec:this.map(spec.spec,params)})}mapFacet(spec,params){const{facet:facet}=spec;return isFacetMapping(facet)&&spec.columns&&(spec=omit(spec,["columns"]),log_warn(message.columnsNotSupportByRowCol("facet"))),super.mapFacet(spec,params)}mapUnitWithParentEncodingOrProjection(spec,params){const{encoding:encoding,projection:projection}=spec,{parentEncoding:parentEncoding,parentProjection:parentProjection,config:config}=params,mergedProjection=mergeProjection({parentProjection:parentProjection,projection:projection}),mergedEncoding=mergeEncoding({parentEncoding:parentEncoding,encoding:encoding});return this.mapUnit(Object.assign(Object.assign(Object.assign({},spec),mergedProjection?{projection:mergedProjection}:{}),mergedEncoding?{encoding:mergedEncoding}:{}),{config:config})}mapFacetedUnit(spec,params){const _a=spec.encoding,{row:row,column:column,facet:facet}=_a,encoding=__rest(_a,["row","column","facet"]),{mark:mark,width:width,projection:projection,height:height,selection:selection,encoding:_}=spec,outerSpec=__rest(spec,["mark","width","projection","height","selection","encoding"]),{facetMapping:facetMapping,layout:layout}=this.getFacetMappingAndLayout({row:row,column:column,facet:facet});return this.mapFacet(Object.assign(Object.assign(Object.assign({},outerSpec),layout),{facet:facetMapping,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},projection?{projection:projection}:{}),{mark:mark}),width?{width:width}:{}),height?{height:height}:{}),{encoding:encoding}),selection?{selection:selection}:{})}),params)}getFacetMappingAndLayout(facets){var _a;const{row:row,column:column,facet:facet}=facets;if(row||column){facet&&log_warn(message.facetChannelDropped([...row?[ROW]:[],...column?[COLUMN]:[]]));const facetMapping={},layout={};for(const channel of[ROW,COLUMN]){const def=facets[channel];if(def){const{align:align,center:center,spacing:spacing,columns:columns}=def,defWithoutLayout=__rest(def,["align","center","spacing","columns"]);facetMapping[channel]=defWithoutLayout;for(const prop of["align","center","spacing"])void 0!==def[prop]&&(layout[prop]=null!=(_a=layout[prop])?_a:{},layout[prop][channel]=def[prop])}}return{facetMapping:facetMapping,layout:layout}}{const{align:align,center:center,spacing:spacing,columns:columns}=facet;return{facetMapping:__rest(facet,["align","center","spacing","columns"]),layout:Object.assign(Object.assign(Object.assign(Object.assign({},align?{align:align}:{}),center?{center:center}:{}),spacing?{spacing:spacing}:{}),columns?{columns:columns}:{})}}}mapLayer(spec,_a){var{parentEncoding:parentEncoding,parentProjection:parentProjection}=_a,otherParams=__rest(_a,["parentEncoding","parentProjection"]);const{encoding:encoding,projection:projection}=spec,rest=__rest(spec,["encoding","projection"]),params=Object.assign(Object.assign({},otherParams),{parentEncoding:mergeEncoding({parentEncoding:parentEncoding,encoding:encoding}),parentProjection:mergeProjection({parentProjection:parentProjection,projection:projection})});return super.mapLayer(rest,params)}};function _normalizeAutoSize(autosize){return Object(vega_util.H)(autosize)?{type:autosize}:null!=autosize?autosize:{}}function normalizeAutoSize(spec,sizeInfo,config){let{width:width,height:height}=sizeInfo;const isFitCompatible=isUnitSpec(spec)||isLayerSpec(spec),autosizeDefault={};isFitCompatible?"container"==width&&"container"==height?(autosizeDefault.type="fit",autosizeDefault.contains="padding"):"container"==width?(autosizeDefault.type="fit-x",autosizeDefault.contains="padding"):"container"==height&&(autosizeDefault.type="fit-y",autosizeDefault.contains="padding"):("container"==width&&(log_warn(message.containerSizeNonSingle("width")),width=void 0),"container"==height&&(log_warn(message.containerSizeNonSingle("height")),height=void 0));const autosize=Object.assign(Object.assign(Object.assign({type:"pad"},autosizeDefault),config?_normalizeAutoSize(config.autosize):{}),_normalizeAutoSize(spec.autosize));return"fit"!==autosize.type||isFitCompatible||(log_warn(message.FIT_NON_SINGLE),autosize.type="pad"),"container"==width&&"fit"!=autosize.type&&"fit-x"!=autosize.type&&log_warn(message.containerSizeNotCompatibleWithAutosize("width")),"container"==height&&"fit"!=autosize.type&&"fit-y"!=autosize.type&&log_warn(message.containerSizeNotCompatibleWithAutosize("height")),autosize}const TOP_LEVEL_PROPERTIES=["background","padding"];function extractTopLevelProperties(t){return TOP_LEVEL_PROPERTIES.reduce((o,p)=>(t&&void 0!==t[p]&&(o[p]=t[p]),o),{})}function isUrlData(data){return!!data.url}function isInlineData(data){return!!data.values}function isNamedData(data){return!(!data.name||isUrlData(data)||isInlineData(data)||isGenerator(data))}function isGenerator(data){return data&&(isSequenceGenerator(data)||isSphereGenerator(data)||isGraticuleGenerator(data))}function isSequenceGenerator(data){return!!data.sequence}function isSphereGenerator(data){return!!data.sphere}function isGraticuleGenerator(data){return!!data.graticule}const MAIN="main",RAW="raw";function isFilter(t){return void 0!==t.filter}function isPivot(t){return void 0!==t.pivot}function isDensity(t){return void 0!==t.density}function transform_isQuantile(t){return void 0!==t.quantile}function isRegression(t){return void 0!==t.regression}function isLoess(t){return void 0!==t.loess}function isLookup(t){return void 0!==t.lookup}function isSample(t){return void 0!==t.sample}function isWindow(t){return void 0!==t.window}function isJoinAggregate(t){return void 0!==t.joinaggregate}function isFlatten(t){return void 0!==t.flatten}function isCalculate(t){return void 0!==t.calculate}function isBin(t){return!!t.bin}function isImpute(t){return void 0!==t.impute}function transform_isTimeUnit(t){return void 0!==t.timeUnit}function transform_isAggregate(t){return void 0!==t.aggregate}function isStack(t){return void 0!==t.stack}function isFold(t){return void 0!==t.fold}function isSignalRef(o){return!!o.signal}function isVgRangeStep(range){return!!range.step}function isDataRefDomain(domain){return!Object(vega_util.A)(domain)&&("field"in domain&&"data"in domain)}const VG_MARK_CONFIGS=util_keys({opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeMiterLimit:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,x:1,y:1,x2:1,y2:1,width:1,height:1,aspect:1}),CONDITIONAL_AXIS_PROP_INDEX={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDash"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDash"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickWidth:{part:"ticks",vgProp:"strokeWidth"}};const AXIS_PARTS=["domain","grid","labels","ticks","title"],AXIS_PROPERTY_TYPE={grid:"grid",gridColor:"grid",gridDash:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",domain:"main",domainColor:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontWeight:"main",labelLimit:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",maxExtent:"main",minExtent:"main",offset:"main",position:"main",tickColor:"main",tickExtra:"main",tickOffset:"both",tickOpacity:"main",tickRound:"main",ticks:"main",tickSize:"main",title:"main",titleAlign:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",tickWidth:"both",tickCount:"both",values:"both",scale:"both",zindex:"both"},COMMON_AXIS_PROPERTIES_INDEX={orient:1,bandPosition:1,domain:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,values:1,translate:1,zindex:1},AXIS_PROPERTIES_INDEX=Object.assign(Object.assign({},COMMON_AXIS_PROPERTIES_INDEX),{labelExpr:1,encoding:1});util_keys(AXIS_PROPERTIES_INDEX);function midPointWithPositionInvalidTest(params){const{channel:channel,channelDef:channelDef,markDef:markDef,scale:scale}=params,ref=midPoint(params);return isFieldDef(channelDef)&&!isCountingAggregateOp(channelDef.aggregate)&&scale&&isContinuousToContinuous(scale.get("type"))&&!1===scale.get("zero")?wrapPositionInvalidTest({fieldDef:channelDef,channel:channel,markDef:markDef,ref:ref}):ref}function wrapPositionInvalidTest({fieldDef:fieldDef,channel:channel,markDef:markDef,ref:ref}){return isPathMark(markDef.type)?ref:[fieldInvalidTestValueRef(fieldDef,channel),ref]}function fieldInvalidTestValueRef(fieldDef,channel){const test=fieldInvalidPredicate(fieldDef,!0),zeroValueRef="x"===getMainRangeChannel(channel)?{value:0}:{field:{group:"height"}};return Object.assign({test:test},zeroValueRef)}function fieldInvalidPredicate(field,invalid=!0){return fieldValidPredicate(Object(vega_util.H)(field)?field:vgField(field,{expr:"datum"}),!invalid)}function getOffset(channel,markDef){const markDefOffsetValue=markDef[channel+"Offset"];if(markDefOffsetValue)return markDefOffsetValue}function valueref_bin({channel:channel,fieldDef:fieldDef,scaleName:scaleName,markDef:markDef,band:band,offset:offset}){return wrapPositionInvalidTest({fieldDef:fieldDef,channel:channel,markDef:markDef,ref:interpolatedPositionSignal({scaleName:scaleName,fieldDef:fieldDef,band:band,offset:offset})})}function valueref_fieldRef(fieldDef,scaleName,opt,mixins){const ref=Object.assign(Object.assign({},scaleName?{scale:scaleName}:{}),{field:vgField(fieldDef,opt)});if(mixins){const{offset:offset,band:band}=mixins;return Object.assign(Object.assign(Object.assign({},ref),offset?{offset:offset}:{}),band?{band:band}:{})}return ref}function bandRef(scaleName,band=!0){return{scale:scaleName,band:band}}function interpolatedPositionSignal({scaleName:scaleName,fieldDef:fieldDef,fieldDef2:fieldDef2,offset:offset,startSuffix:startSuffix,band:band=.5}){const expr=0<band&&band<1?"datum":void 0,start=vgField(fieldDef,{expr:expr,suffix:startSuffix}),end=void 0!==fieldDef2?vgField(fieldDef2,{expr:expr}):vgField(fieldDef,{suffix:"end",expr:expr});if(0===band)return Object.assign({scale:scaleName,field:start},offset?{offset:offset}:{});if(1===band)return Object.assign({scale:scaleName,field:end},offset?{offset:offset}:{});{const datum=`${band} * ${start} + ${1-band} * ${end}`;return Object.assign({signal:`scale("${scaleName}", ${datum})`},offset?{offset:offset}:{})}}function midPoint({channel:channel,channelDef:channelDef,channel2Def:channel2Def,markDef:markDef,config:config,scaleName:scaleName,scale:scale,stack:stack,offset:offset,defaultRef:defaultRef}){if(channelDef){if(isFieldDef(channelDef)){if(isTypedFieldDef(channelDef)){const band=getBand(channel,channelDef,channel2Def,markDef,config,{isMidPoint:!0});if(isBinning(channelDef.bin)||band&&channelDef.timeUnit)return util_contains([channel_X,channel_Y],channel)&&util_contains([QUANTITATIVE,TEMPORAL],channelDef.type)?stack&&stack.impute?valueref_fieldRef(channelDef,scaleName,{binSuffix:"mid"},{offset:offset}):interpolatedPositionSignal({scaleName:scaleName,fieldDef:channelDef,band:band,offset:offset}):valueref_fieldRef(channelDef,scaleName,binRequiresRange(channelDef,channel)?{binSuffix:"range"}:{},{offset:offset});if(bin_isBinned(channelDef.bin)){if(isFieldDef(channel2Def))return interpolatedPositionSignal({scaleName:scaleName,fieldDef:channelDef,fieldDef2:channel2Def,band:band,offset:offset});{const channel2=channel===channel_X?channel_X2:channel_Y2;log_warn(message.channelRequiredForBinned(channel2))}}}if(scale){const scaleType=scale.get("type");if(hasDiscreteDomain(scaleType)){if("band"===scaleType){return valueref_fieldRef(channelDef,scaleName,{binSuffix:"range"},{band:getFirstDefined(isPositionFieldDef(channelDef)?channelDef.band:void 0,.5),offset:offset})}return valueref_fieldRef(channelDef,scaleName,{binSuffix:"range"},{offset:offset})}}return valueref_fieldRef(channelDef,scaleName,{},{offset:offset})}if(isValueDef(channelDef)){const value=channelDef.value,offsetMixins=offset?{offset:offset}:{};return Object.assign(Object.assign({},vgValueRef(channel,value)),offsetMixins)}}return Object(vega_util.D)(defaultRef)?defaultRef():defaultRef}function vgValueRef(channel,value){return util_contains(["x","x2"],channel)&&"width"===value?{field:{group:"width"}}:util_contains(["y","y2"],channel)&&"height"===value?{field:{group:"height"}}:{value:value}}function tooltipForEncoding(encoding,config,{reactiveGeom:reactiveGeom}={}){const keyValues=[],usedKey={},toSkip={},expr=reactiveGeom?"datum.datum":"datum",tooltipTuples=[];function add(fDef,channel){const mainChannel=getMainRangeChannel(channel),fieldDef=isTypedFieldDef(fDef)?fDef:Object.assign(Object.assign({},fDef),{type:encoding[mainChannel].type}),key=Object(vega_util.i)(channeldef_title(fieldDef,config,{allowDisabling:!1})).join(", ");let value=valueref_text(fieldDef,config,expr).signal;if("x"===channel||"y"===channel){const channel2="x"===channel?"x2":"y2",fieldDef2=getFieldDef(encoding[channel2]);if(bin_isBinned(fieldDef.bin)&&fieldDef2){value=binFormatExpression(vgField(fieldDef,{expr:expr}),vgField(fieldDef2,{expr:expr}),channeldef_format(fieldDef),config),toSkip[channel2]=!0}}tooltipTuples.push({channel:channel,key:key,value:value})}forEach(encoding,(channelDef,channel)=>{isFieldDef(channelDef)?add(channelDef,channel):hasConditionalFieldDef(channelDef)&&add(channelDef.condition,channel)});for(const{channel:channel,key:key,value:value}of tooltipTuples)toSkip[channel]||usedKey[key]||(keyValues.push(`${Object(vega_util.Y)(key)}: ${value}`),usedKey[key]=!0);return keyValues.length?{signal:`{${keyValues.join(", ")}}`}:void 0}function valueref_text(channelDef,config,expr="datum"){if(channelDef){if(isValueDef(channelDef))return{value:channelDef.value};if(isTypedFieldDef(channelDef))return formatSignalRef(channelDef,channeldef_format(channelDef),expr,config)}}function valueref_mid(sizeRef){return Object.assign(Object.assign({},sizeRef),{mult:.5})}function positionDefault({markDef:markDef,config:config,defaultRef:defaultRef,channel:channel,scaleName:scaleName,scale:scale,mark:mark,checkBarAreaWithoutZero:checkBarAreaWithZero}){return()=>{const mainChannel=getMainRangeChannel(channel),definedValueOrConfig=getFirstDefined(markDef[channel],getMarkConfig(channel,markDef,config));if(void 0!==definedValueOrConfig)return vgValueRef(channel,definedValueOrConfig);if(Object(vega_util.H)(defaultRef)){if(scaleName){const scaleType=scale.get("type");if(util_contains([ScaleType.LOG,ScaleType.TIME,ScaleType.UTC],scaleType))!checkBarAreaWithZero||"bar"!==mark&&"area"!==mark||log_warn(message.nonZeroScaleUsedWithLengthMark(mark,mainChannel,{scaleType:scaleType}));else{if(scale.domainDefinitelyIncludesZero())return{scale:scaleName,value:0};!checkBarAreaWithZero||"bar"!==mark&&"area"!==mark||log_warn(message.nonZeroScaleUsedWithLengthMark(mark,mainChannel,{zeroFalse:!1===scale.explicit.zero}))}}return"zeroOrMin"===defaultRef?"x"===mainChannel?{value:0}:{field:{group:"height"}}:"x"===mainChannel?{field:{group:"width"}}:{value:0}}return defaultRef}}function mixins_color(model){const{markDef:markDef,encoding:encoding,config:config}=model,{filled:filled,type:markType}=markDef,configValue={fill:getMarkConfig("fill",markDef,config),stroke:getMarkConfig("stroke",markDef,config),color:getMarkConfig("color",markDef,config)},transparentIfNeeded=util_contains(["bar","point","circle","square","geoshape"],markType)?"transparent":void 0,defaultFill=getFirstDefined(markDef.fill,!0===filled?markDef.color:void 0,configValue.fill,!0===filled?configValue.color:void 0,transparentIfNeeded),defaultStroke=getFirstDefined(markDef.stroke,!1===filled?markDef.color:void 0,configValue.stroke,!1===filled?configValue.color:void 0),colorVgChannel=filled?"fill":"stroke",fillStrokeMarkDefAndConfig=Object.assign(Object.assign({},defaultFill?{fill:{value:defaultFill}}:{}),defaultStroke?{stroke:{value:defaultStroke}}:{});return markDef.color&&(filled?markDef.fill:markDef.stroke)&&log_warn(message.droppingColor("property",{fill:"fill"in markDef,stroke:"stroke"in markDef})),Object.assign(Object.assign(Object.assign(Object.assign({},fillStrokeMarkDefAndConfig),nonPosition("color",model,{vgChannel:colorVgChannel,defaultValue:filled?defaultFill:defaultStroke})),nonPosition("fill",model,{defaultValue:encoding.fill?defaultFill:void 0})),nonPosition("stroke",model,{defaultValue:encoding.stroke?defaultStroke:void 0}))}function baseEncodeEntry(model,ignore){const{fill:fill,stroke:stroke}="include"===ignore.color?mixins_color(model):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},function markDefProperties(mark,ignore){return VG_MARK_CONFIGS.reduce((m,prop)=>(void 0!==mark[prop]&&"ignore"!==ignore[prop]&&(m[prop]={value:mark[prop]}),m),{})}(model.markDef,ignore)),wrapAllFieldsInvalid(model,"fill",fill)),wrapAllFieldsInvalid(model,"stroke",stroke)),nonPosition("opacity",model)),nonPosition("fillOpacity",model)),nonPosition("strokeOpacity",model)),nonPosition("strokeWidth",model)),mixins_tooltip(model)),mixins_text(model,"href"))}function wrapAllFieldsInvalid(model,channel,valueRef){const{config:config,mark:mark,markDef:markDef}=model;if("hide"===getMarkPropOrConfig("invalid",markDef,config)&&valueRef&&!isPathMark(mark)){const test=allFieldsInvalidPredicate(model,{invalid:!0,channels:SCALE_CHANNELS});if(test)return{[channel]:[{test:test,value:null},...Object(vega_util.i)(valueRef)]}}return valueRef?{[channel]:valueRef}:{}}function valueIfDefined(prop,value){if(void 0!==value)return{[prop]:{value:value}}}function allFieldsInvalidPredicate(model,{invalid:invalid=!1,channels:channels}){const filterIndex=channels.reduce((aggregator,channel)=>{const scaleComponent=model.getScaleComponent(channel);if(scaleComponent){const scaleType=scaleComponent.get("type"),field=model.vgField(channel,{expr:"datum"});field&&hasContinuousDomain(scaleType)&&(aggregator[field]=!0)}return aggregator},{}),fields=util_keys(filterIndex);if(fields.length>0){const op=invalid?"||":"&&";return fields.map(field=>fieldInvalidPredicate(field,invalid)).join(` ${op} `)}}function mixins_defined(model){const{config:config,markDef:markDef}=model;if(getMarkPropOrConfig("invalid",markDef,config)){const signal=allFieldsInvalidPredicate(model,{channels:["x","y"]});if(signal)return{defined:{signal:signal}}}return{}}function nonPosition(channel,model,opt={}){const{markDef:markDef,encoding:encoding,config:config}=model,{vgChannel:vgChannel=channel}=opt;let{defaultRef:defaultRef,defaultValue:defaultValue}=opt;void 0===defaultRef&&(defaultValue=null!=defaultValue?defaultValue:vgChannel===channel?markDef[channel]:getFirstDefined(markDef[channel],markDef[vgChannel],getMarkConfig(channel,markDef,config,{vgChannel:vgChannel})),defaultRef=defaultValue?{value:defaultValue}:void 0);const channelDef=encoding[channel];return wrapCondition(model,channelDef,vgChannel,cDef=>midPoint({channel:channel,channelDef:cDef,markDef:markDef,config:config,scaleName:model.scaleName(channel),scale:model.getScaleComponent(channel),stack:null,defaultRef:defaultRef}))}function wrapCondition(model,channelDef,vgChannel,refFn){const condition=channelDef&&channelDef.condition,valueRef=refFn(channelDef);if(condition){return{[vgChannel]:[...Object(vega_util.i)(condition).map(c=>{const conditionValueRef=refFn(c),test=function isConditionalSelection(c){return c.selection}(c)?parseSelectionPredicate(model,c.selection):predicate_expression(model,c.test);return Object.assign({test:test},conditionValueRef)}),...void 0!==valueRef?[valueRef]:[]]}}return void 0!==valueRef?{[vgChannel]:valueRef}:{}}function mixins_tooltip(model,opt={}){const{encoding:encoding,markDef:markDef,config:config}=model,channelDef=encoding.tooltip;return Object(vega_util.A)(channelDef)?{tooltip:tooltipForEncoding({tooltip:channelDef},config,opt)}:wrapCondition(model,channelDef,"tooltip",cDef=>{const tooltipRefFromChannelDef=valueref_text(cDef,model.config,opt.reactiveGeom?"datum.datum":"datum");if(tooltipRefFromChannelDef)return tooltipRefFromChannelDef;if(null===cDef)return;let markTooltip=getFirstDefined(markDef.tooltip,getMarkConfig("tooltip",markDef,config));return!0===markTooltip&&(markTooltip={content:"encoding"}),Object(vega_util.H)(markTooltip)?{value:markTooltip}:Object(vega_util.F)(markTooltip)?"encoding"===markTooltip.content?tooltipForEncoding(encoding,config,opt):{signal:"datum"}:void 0})}function mixins_text(model,channel="text"){const channelDef=model.encoding[channel];return wrapCondition(model,channelDef,channel,cDef=>valueref_text(cDef,model.config))}function pointPosition(channel,model,defaultRef,{vgChannel:vgChannel}={}){const{encoding:encoding,mark:mark,markDef:markDef,config:config,stack:stack}=model,channelDef=encoding[channel],channel2Def=encoding[channel===channel_X?channel_X2:channel_Y2],scaleName=model.scaleName(channel),scale=model.getScaleComponent(channel),offset=getOffset(channel,model.markDef);return{[null!=vgChannel?vgChannel:channel]:channelDef||!encoding.latitude&&!encoding.longitude?function valueref_position(params){const{channel:channel,channelDef:channelDef,scaleName:scaleName,stack:stack,offset:offset}=params;return isFieldDef(channelDef)&&stack&&channel===stack.fieldChannel?isPositionFieldDef(channelDef)&&void 0!==channelDef.band?interpolatedPositionSignal({scaleName:scaleName,fieldDef:channelDef,startSuffix:"start",band:channelDef.band,offset:0}):valueref_fieldRef(channelDef,scaleName,{suffix:"end"},{offset:offset}):midPointWithPositionInvalidTest(params)}({channel:channel,channelDef:channelDef,channel2Def:channel2Def,markDef:markDef,config:config,scaleName:scaleName,scale:scale,stack:stack,offset:offset,defaultRef:positionDefault({markDef:markDef,config:config,defaultRef:defaultRef,channel:channel,scaleName:scaleName,scale:scale,mark:mark,checkBarAreaWithoutZero:!channel2Def})}):{field:model.getName(channel)}}}const ALIGNED_X_CHANNEL={left:"x",center:"xc",right:"x2"},BASELINED_Y_CHANNEL={top:"y",middle:"yc",bottom:"y2"};function pointOrRangePosition(channel,model,{defaultRef:defaultRef,defaultRef2:defaultRef2,range:range}){return range?rangePosition(channel,model,{defaultRef:defaultRef,defaultRef2:defaultRef2}):pointPosition(channel,model,defaultRef)}function rangePosition(channel,model,{defaultRef:defaultRef,defaultRef2:defaultRef2}){const{markDef:markDef,config:config}=model,sizeChannel="x"===channel?"width":"height",pos2Mixins=function pointPosition2(model,defaultRef,channel){const{encoding:encoding,mark:mark,markDef:markDef,stack:stack,config:config}=model,baseChannel="x2"===channel?"x":"y",sizeChannel="x2"===channel?"width":"height",channelDef=encoding[baseChannel],scaleName=model.scaleName(baseChannel),scale=model.getScaleComponent(baseChannel),offset=getOffset(channel,model.markDef);if(!channelDef&&(encoding.latitude||encoding.longitude))return{[channel]:{field:model.getName(channel)}};const valueRef=function position2({channel:channel,channelDef:channelDef,channel2Def:channel2Def,markDef:markDef,config:config,scaleName:scaleName,scale:scale,stack:stack,offset:offset,defaultRef:defaultRef}){return isFieldDef(channelDef)&&stack&&channel.charAt(0)===stack.fieldChannel.charAt(0)?valueref_fieldRef(channelDef,scaleName,{suffix:"start"},{offset:offset}):midPointWithPositionInvalidTest({channel:channel,channelDef:channel2Def,scaleName:scaleName,scale:scale,stack:stack,markDef:markDef,config:config,offset:offset,defaultRef:defaultRef})}({channel:channel,channelDef:channelDef,channel2Def:encoding[channel],markDef:markDef,config:config,scaleName:scaleName,scale:scale,stack:stack,offset:offset,defaultRef:void 0});if(void 0!==valueRef)return{[channel]:valueRef};return getFirstDefined(position2orSize(channel,markDef),position2orSize(channel,{[channel]:getStyleConfig(channel,markDef,config.style),[sizeChannel]:getStyleConfig(sizeChannel,markDef,config.style)}),position2orSize(channel,config[mark]),position2orSize(channel,config.mark),{[channel]:positionDefault({markDef:markDef,config:config,defaultRef:defaultRef,channel:channel,scaleName:scaleName,scale:scale,mark:mark,checkBarAreaWithoutZero:!encoding[channel]})()})}(model,defaultRef2,"x"===channel?"x2":"y2"),vgChannel=pos2Mixins[sizeChannel]?function alignedChannel(channel,markDef,config){const alignChannel="x"===channel?"align":"baseline",align=getFirstDefined(markDef[alignChannel],getMarkConfig(alignChannel,markDef,config));return"x"===channel?ALIGNED_X_CHANNEL[null!=align?align:"center"]:BASELINED_Y_CHANNEL[null!=align?align:"middle"]}(channel,markDef,config):channel;return Object.assign(Object.assign({},pointPosition(channel,model,defaultRef,{vgChannel:vgChannel})),pos2Mixins)}function position2orSize(channel,markDef){const sizeChannel="x2"===channel?"width":"height";return markDef[channel]?{[channel]:vgValueRef(channel,markDef[channel])}:markDef[sizeChannel]?{[sizeChannel]:{value:markDef[sizeChannel]}}:void 0}var transforms_nearest={has:selCmpt=>"interval"!==selCmpt.type&&selCmpt.nearest,parse:(model,selCmpt)=>{if(selCmpt.events)for(const s of selCmpt.events)s.markname=model.getName("voronoi")},marks:(model,selCmpt,marks)=>{const{x:x,y:y}=selCmpt.project.has,markType=model.mark;if(isPathMark(markType))return log_warn(message.nearestNotSupportForContinuous(markType)),marks;const cellDef={name:model.getName("voronoi"),type:"path",interactive:!0,from:{data:model.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},mixins_tooltip(model,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:x||!y?"datum.datum.x || 0":"0"},y:{expr:y||!x?"datum.datum.y || 0":"0"},size:[model.getSizeSignalRef("width"),model.getSizeSignalRef("height")]}]};let index=0,exists=!1;return marks.forEach((mark,i)=>{var _a;const name=null!=(_a=mark.name)?_a:"";name===model.component.mark[0].name?index=i:name.indexOf("voronoi")>=0&&(exists=!0)}),exists||marks.splice(index+1,0,cellDef),marks}};class DataFlowNode{constructor(parent,debugName){this.debugName=debugName,this._children=[],this._parent=null,parent&&(this.parent=parent)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(parent){this._parent=parent,parent&&parent.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(child,loc){this._children.indexOf(child)>-1?console.warn("Attempt to add the same child twice."):void 0!==loc?this._children.splice(loc,0,child):this._children.push(child)}removeChild(oldChild){const loc=this._children.indexOf(oldChild);return this._children.splice(loc,1),loc}remove(){let loc=this._parent.removeChild(this);for(const child of this._children)child._parent=this._parent,this._parent.addChild(child,loc++)}insertAsParentOf(other){const parent=other.parent;parent.removeChild(this),this.parent=parent,other.parent=this}swapWithParent(){const parent=this._parent,newParent=parent.parent;for(const child of this._children)child.parent=parent;this._children=[],parent.removeChild(this),parent.parent.removeChild(parent),this.parent=newParent,parent.parent=this}}class dataflow_OutputNode extends DataFlowNode{constructor(parent,source,type,refCounts){super(parent,source),this.type=type,this.refCounts=refCounts,this._source=this._name=source,!this.refCounts||this._name in this.refCounts||(this.refCounts[this._name]=0)}clone(){const cloneObj=new this.constructor;return cloneObj.debugName="clone_"+this.debugName,cloneObj._source=this._source,cloneObj._name="clone_"+this._name,cloneObj.type=this.type,cloneObj.refCounts=this.refCounts,cloneObj.refCounts[cloneObj._name]=0,cloneObj}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash=`Output ${uniqueId()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(source){this._source=source}}class timeunit_TimeUnitNode extends DataFlowNode{constructor(parent,formula){super(parent),this.formula=formula}clone(){return new timeunit_TimeUnitNode(null,duplicate(this.formula))}static makeFromEncoding(parent,model){const formula=model.reduceFieldDef((timeUnitComponent,fieldDef,channel)=>{const{timeUnit:timeUnit,field:field}=fieldDef,channelDef2=isUnitModel(model)?model.encoding[getSecondaryRangeChannel(channel)]:void 0,band=isUnitModel(model)&&hasBand(channel,fieldDef,channelDef2,model.markDef,model.config);if(timeUnit){const as=vgField(fieldDef,{forAs:!0});timeUnitComponent[util_hash({as:as,timeUnit:timeUnit,field:field})]=Object.assign({as:as,timeUnit:timeUnit,field:field},band?{band:!0}:{})}return timeUnitComponent},{});return 0===util_keys(formula).length?null:new timeunit_TimeUnitNode(parent,formula)}static makeFromTransform(parent,t){const component=Object.assign({},t);return new timeunit_TimeUnitNode(parent,{[util_hash(component)]:component})}merge(other){this.formula=Object.assign({},this.formula);for(const key in other.formula)this.formula[key]&&!other.formula[key].band||(this.formula[key]=other.formula[key]);for(const child of other.children)other.removeChild(child),child.parent=this;other.remove()}producedFields(){return new Set(util_vals(this.formula).map(f=>f.as))}dependentFields(){return new Set(util_vals(this.formula).map(f=>f.field))}hash(){return`TimeUnit ${util_hash(this.formula)}`}assemble(){const transforms=[];for(const f of util_vals(this.formula)){const{timeUnit:timeUnit,field:field,as:as,band:band}=f;transforms.push({type:"formula",as:as,expr:timeunit_fieldExpr(timeUnit,field)}),band&&transforms.push({type:"formula",as:as+"_end",expr:timeunit_fieldExpr(timeUnit,field,{end:!0})})}return transforms}}const TUPLE_FIELDS="_tuple_fields";class SelectionProjectionComponent{constructor(...items){this.items=items,this.has={}}}var transforms_inputs={has:selCmpt=>"single"===selCmpt.type&&"global"===selCmpt.resolve&&selCmpt.bind&&"scales"!==selCmpt.bind,parse:(model,selCmpt,selDef,origDef)=>{origDef.on||delete selCmpt.events,origDef.clear||delete selCmpt.clear},topLevelSignals:(model,selCmpt,signals)=>{const name=selCmpt.name,proj=selCmpt.project,bind=selCmpt.bind,init=selCmpt.init&&selCmpt.init[0],datum=transforms_nearest.has(selCmpt)?"(item().isVoronoi ? datum.datum : datum)":"datum";return proj.items.forEach((p,i)=>{var _a,_b;const sgname=varName(`${name}_${p.field}`);signals.filter(s=>s.name===sgname).length||signals.unshift(Object.assign(Object.assign({name:sgname},init?{init:assembleInit(init[i])}:{value:null}),{on:selCmpt.events?[{events:selCmpt.events,update:`datum && item().mark.marktype !== 'group' ? ${datum}[${Object(vega_util.Y)(p.field)}] : null`}]:[],bind:(_a=bind[p.field],_b=null!=_a?_a:bind[p.channel],null!=_b?_b:bind)}))}),signals},signals:(model,selCmpt,signals)=>{const name=selCmpt.name,proj=selCmpt.project,signal=signals.filter(s=>s.name===name+TUPLE)[0],fields=name+TUPLE_FIELDS,values=proj.items.map(p=>varName(`${name}_${p.field}`)),valid=values.map(v=>`${v} !== null`).join(" && ");return values.length&&(signal.update=`${valid} ? {fields: ${fields}, values: [${values.join(", ")}]} : null`),delete signal.value,delete signal.on,signals}};var transforms_toggle={has:selCmpt=>"multi"===selCmpt.type&&selCmpt.toggle,signals:(model,selCmpt,signals)=>signals.concat({name:selCmpt.name+"_toggle",value:!1,on:[{events:selCmpt.events,update:selCmpt.toggle}]}),modifyExpr:(model,selCmpt)=>{const tpl=selCmpt.name+TUPLE,signal=selCmpt.name+"_toggle";return`${signal} ? null : ${tpl}, `+("global"===selCmpt.resolve?`${signal} ? null : true, `:`${signal} ? null : {unit: ${selection_unitName(model)}}, `)+`${signal} ? ${tpl} : null`}};const clear={has:selCmpt=>void 0!==selCmpt.clear&&!1!==selCmpt.clear,parse:(model,selCmpt,selDef)=>{selDef.clear&&(selCmpt.clear=Object(vega_util.H)(selDef.clear)?event_selector(selDef.clear,"scope"):selDef.clear)},topLevelSignals:(model,selCmpt,signals)=>(transforms_inputs.has(selCmpt)&&selCmpt.project.items.forEach(proj=>{const idx=signals.findIndex(n=>n.name===varName(`${selCmpt.name}_${proj.field}`));-1!==idx&&signals[idx].on.push({events:selCmpt.clear,update:"null"})}),signals),signals:(model,selCmpt,signals)=>{function addClear(idx,update){-1!==idx&&signals[idx].on&&signals[idx].on.push({events:selCmpt.clear,update:update})}if("interval"===selCmpt.type)selCmpt.project.items.forEach(proj=>{const vIdx=signals.findIndex(n=>n.name===proj.signals.visual);if(addClear(vIdx,"[0, 0]"),-1===vIdx){addClear(signals.findIndex(n=>n.name===proj.signals.data),"null")}});else{let tIdx=signals.findIndex(n=>n.name===selCmpt.name+TUPLE);addClear(tIdx,"null"),transforms_toggle.has(selCmpt)&&addClear(tIdx=signals.findIndex(n=>n.name===selCmpt.name+"_toggle"),"false")}return signals}};var transforms_scales={has:selCmpt=>"interval"===selCmpt.type&&"global"===selCmpt.resolve&&selCmpt.bind&&"scales"===selCmpt.bind,parse:(model,selCmpt)=>{const bound=selCmpt.scales=[];for(const proj of selCmpt.project.items){const channel=proj.channel;if(!isScaleChannel(channel))continue;const scale=model.getScaleComponent(channel),scaleType=scale?scale.get("type"):void 0;if(!scale||!hasContinuousDomain(scaleType)){log_warn(message.SCALE_BINDINGS_CONTINUOUS);continue}const extent={selection:selCmpt.name,field:proj.field};if(scale.set("selectionExtent",extent,!0),bound.push(proj),model.repeater&&model.repeater.row===model.repeater.column){model.getScaleComponent(channel===channel_X?channel_Y:channel_X).set("selectionExtent",extent,!0)}}},topLevelSignals:(model,selCmpt,signals)=>{const bound=selCmpt.scales.filter(proj=>!signals.filter(s=>s.name===proj.signals.data).length);if(!model.parent||isTopLevelLayer(model)||!bound.length)return signals;const namedSg=signals.filter(s=>s.name===selCmpt.name)[0];let update=namedSg.update;if(update.indexOf(VL_SELECTION_RESOLVE)>=0)namedSg.update=`{${bound.map(proj=>`${Object(vega_util.Y)(proj.field)}: ${proj.signals.data}`).join(", ")}}`;else{for(const proj of bound){const mapping=`${Object(vega_util.Y)(proj.field)}: ${proj.signals.data}`;update.indexOf(mapping)<0&&(update=`${update.substring(0,update.length-1)}, ${mapping}}`)}namedSg.update=update}return signals.concat(bound.map(proj=>({name:proj.signals.data})))},signals:(model,selCmpt,signals)=>{if(model.parent&&!isTopLevelLayer(model))for(const proj of selCmpt.scales){const signal=signals.filter(s=>s.name===proj.signals.data)[0];signal.push="outer",delete signal.value,delete signal.update}return signals}};function scales_domain(model,channel){return`domain(${Object(vega_util.Y)(model.scaleName(channel))})`}function isTopLevelLayer(model){var _a;return model.parent&&isLayerModel(model.parent)&&(null!=(_a=!model.parent.parent)?_a:isTopLevelLayer(model.parent.parent))}const ANCHOR="_translate_anchor",DELTA="_translate_delta",translate_translate={has:selCmpt=>"interval"===selCmpt.type&&selCmpt.translate,signals:(model,selCmpt,signals)=>{const name=selCmpt.name,hasScales=transforms_scales.has(selCmpt),anchor=name+ANCHOR,{x:x,y:y}=selCmpt.project.has;let events=event_selector(selCmpt.translate,"scope");return hasScales||(events=events.map(e=>(e.between[0].markname=name+BRUSH,e))),signals.push({name:anchor,value:{},on:[{events:events.map(e=>e.between[0]),update:"{x: x(unit), y: y(unit)"+(void 0!==x?", extent_x: "+(hasScales?scales_domain(model,channel_X):`slice(${x.signals.visual})`):"")+(void 0!==y?", extent_y: "+(hasScales?scales_domain(model,channel_Y):`slice(${y.signals.visual})`):"")+"}"}]},{name:name+DELTA,value:{},on:[{events:events,update:`{x: ${anchor}.x - x(unit), y: ${anchor}.y - y(unit)}`}]}),void 0!==x&&onDelta(model,selCmpt,x,"width",signals),void 0!==y&&onDelta(model,selCmpt,y,"height",signals),signals}};function onDelta(model,selCmpt,proj,size,signals){var _a;const name=selCmpt.name,anchor=name+ANCHOR,delta=name+DELTA,channel=proj.channel,hasScales=transforms_scales.has(selCmpt),signal=signals.filter(s=>s.name===proj.signals[hasScales?"data":"visual"])[0],sizeSg=model.getSizeSignalRef(size).signal,scaleCmpt=model.getScaleComponent(channel),scaleType=scaleCmpt.get("type"),extent=`${anchor}.extent_${channel}`,update=`${hasScales?"log"===scaleType?"panLog":"pow"===scaleType?"panPow":"panLinear":"panLinear"}(${extent}, ${`${hasScales&&channel===channel_X?"-":""}${delta}.${channel} / `+(hasScales?`${sizeSg}`:`span(${extent})`)}`+(hasScales&&"pow"===scaleType?`, ${_a=scaleCmpt.get("exponent"),null!=_a?_a:1}`:"")+")";signal.on.push({events:{signal:delta},update:hasScales?update:`clampRange(${update}, 0, ${sizeSg})`})}const zoom_ANCHOR="_zoom_anchor",zoom_DELTA="_zoom_delta",zoom_zoom={has:selCmpt=>"interval"===selCmpt.type&&selCmpt.zoom,signals:(model,selCmpt,signals)=>{const name=selCmpt.name,hasScales=transforms_scales.has(selCmpt),delta=name+zoom_DELTA,{x:x,y:y}=selCmpt.project.has,sx=Object(vega_util.Y)(model.scaleName(channel_X)),sy=Object(vega_util.Y)(model.scaleName(channel_Y));let events=event_selector(selCmpt.zoom,"scope");return hasScales||(events=events.map(e=>(e.markname=name+BRUSH,e))),signals.push({name:name+zoom_ANCHOR,on:[{events:events,update:hasScales?"{"+[sx?`x: invert(${sx}, x(unit))`:"",sy?`y: invert(${sy}, y(unit))`:""].filter(expr=>!!expr).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:delta,on:[{events:events,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==x&&zoom_onDelta(model,selCmpt,x,"width",signals),void 0!==y&&zoom_onDelta(model,selCmpt,y,"height",signals),signals}};function zoom_onDelta(model,selCmpt,proj,size,signals){var _a;const name=selCmpt.name,channel=proj.channel,hasScales=transforms_scales.has(selCmpt),signal=signals.filter(s=>s.name===proj.signals[hasScales?"data":"visual"])[0],sizeSg=model.getSizeSignalRef(size).signal,scaleCmpt=model.getScaleComponent(channel),scaleType=scaleCmpt.get("type"),base=hasScales?scales_domain(model,channel):signal.name,delta=name+zoom_DELTA,update=`${hasScales?"log"===scaleType?"zoomLog":"pow"===scaleType?"zoomPow":"zoomLinear":"zoomLinear"}(${base}, ${`${name}${zoom_ANCHOR}.${channel}`}, ${delta}`+(hasScales&&"pow"===scaleType?`, ${_a=scaleCmpt.get("exponent"),null!=_a?_a:1}`:"")+")";signal.on.push({events:{signal:delta},update:hasScales?update:`clampRange(${update}, 0, ${sizeSg})`})}const compilers=[{has:()=>!0,parse:(model,selCmpt,selDef)=>{var _a,_b,_c;const name=selCmpt.name,proj=null!=(_a=selCmpt.project)?_a:selCmpt.project=new SelectionProjectionComponent,parsed={},timeUnits={},signals=new Set,signalName=(p,range)=>{const suffix="visual"===range?p.channel:p.field;let sg=varName(`${name}_${suffix}`);for(let counter=1;signals.has(sg);counter++)sg=varName(`${name}_${suffix}_${counter}`);return signals.add(sg),{[range]:sg}};if(!selDef.fields&&!selDef.encodings){const cfg=model.config.selection[selDef.type];if(selDef.init)for(const init of Object(vega_util.i)(selDef.init))for(const key of util_keys(init))isSingleDefUnitChannel(key)?(selDef.encodings||(selDef.encodings=[])).push(key):"interval"===selDef.type?(log_warn('Interval selections should be initialized using "x" and/or "y" keys.'),selDef.encodings=cfg.encodings):(selDef.fields||(selDef.fields=[])).push(key);else selDef.encodings=cfg.encodings,selDef.fields=cfg.fields}for(const field of null!=(_b=selDef.fields)?_b:[]){const p={type:"E",field:field};p.signals=Object.assign({},signalName(p,"data")),proj.items.push(p)}for(const channel of null!=(_c=selDef.encodings)?_c:[]){const fieldDef=model.fieldDef(channel);if(fieldDef){let field=fieldDef.field;if(fieldDef.timeUnit){const component={as:field=model.vgField(channel),field:fieldDef.field,timeUnit:fieldDef.timeUnit};timeUnits[util_hash(component)]=component}if(!parsed[field]){let type="E";if("interval"===selCmpt.type){hasContinuousDomain(model.getScaleComponent(channel).get("type"))&&(type="R")}else fieldDef.bin&&(type="R-RE");const p={field:field,channel:channel,type:type};p.signals=Object.assign(Object.assign({},signalName(p,"data")),signalName(p,"visual")),proj.items.push(parsed[field]=p),proj.has[channel]=parsed[field]}}else log_warn(message.cannotProjectOnChannelWithoutField(channel))}if(selDef.init){const parseInit=i=>proj.items.map(p=>void 0!==i[p.channel]?i[p.channel]:i[p.field]);if("interval"===selDef.type)selCmpt.init=parseInit(selDef.init);else{const init=Object(vega_util.A)(selDef.init)?selDef.init:[selDef.init];selCmpt.init=init.map(parseInit)}}util_keys(timeUnits).length&&(proj.timeUnit=new timeunit_TimeUnitNode(null,timeUnits))},signals:(model,selCmpt,allSignals)=>{const name=selCmpt.name+TUPLE_FIELDS;return allSignals.filter(s=>s.name===name).length?allSignals:allSignals.concat({name:name,value:selCmpt.project.items.map(proj=>{const{signals:signals}=proj,rest=__rest(proj,["signals"]),p=duplicate(rest);return p.field=replacePathInField(p.field),p})})}},transforms_toggle,transforms_scales,translate_translate,zoom_zoom,transforms_inputs,transforms_nearest,clear];function forEachTransform(selCmpt,cb){for(const t of compilers)t.has(selCmpt)&&cb(t)}function assembleInit(init,isExpr=!0,wrap=vega_util.x){if(Object(vega_util.A)(init)){const assembled=init.map(v=>assembleInit(v,isExpr,wrap));return isExpr?`[${assembled.join(", ")}]`:assembled}return isDateTime(init)?wrap(dateTimeExpr(init,!1,!isExpr)):isExpr?wrap(JSON.stringify(init)):init}function assembleUnitSelectionMarks(model,marks){return forEachSelection(model,(selCmpt,selCompiler)=>{marks=selCompiler.marks?selCompiler.marks(model,selCmpt,marks):marks,forEachTransform(selCmpt,txCompiler=>{txCompiler.marks&&(marks=txCompiler.marks(model,selCmpt,marks))})}),marks}function cleanupEmptyOnArray(signals){return signals.map(s=>(s.on&&!s.on.length&&delete s.on,s))}const BRUSH="_brush",SCALE_TRIGGER="_scale_trigger",interval_interval={signals:(model,selCmpt)=>{const name=selCmpt.name,fieldsSg=name+TUPLE_FIELDS,hasScales=transforms_scales.has(selCmpt),signals=[],dataSignals=[],scaleTriggers=[];if(selCmpt.translate&&!hasScales){const filterExpr=`!event.item || event.item.mark.name !== ${Object(vega_util.Y)(name+BRUSH)}`;interval_events(selCmpt,(on,evt)=>{var _a;const filters=Object(vega_util.i)(null!=(_a=evt.between[0].filter)?_a:evt.between[0].filter=[]);return filters.indexOf(filterExpr)<0&&filters.push(filterExpr),on})}selCmpt.project.items.forEach((proj,i)=>{const channel=proj.channel;if(channel!==channel_X&&channel!==channel_Y)return void log_warn("Interval selections only support x and y encoding channels.");const init=selCmpt.init?selCmpt.init[i]:null,cs=function channelSignals(model,selCmpt,proj,init){const channel=proj.channel,vname=proj.signals.visual,dname=proj.signals.data,hasScales=transforms_scales.has(selCmpt),scaleName=Object(vega_util.Y)(model.scaleName(channel)),scale=model.getScaleComponent(channel),scaleType=scale?scale.get("type"):void 0,scaled=str=>`scale(${scaleName}, ${str})`,size=model.getSizeSignalRef(channel===channel_X?"width":"height").signal,coord=`${channel}(unit)`,on=interval_events(selCmpt,(def,evt)=>[...def,{events:evt.between[0],update:`[${coord}, ${coord}]`},{events:evt,update:`[${vname}[0], clamp(${coord}, 0, ${size})]`}]);return on.push({events:{signal:selCmpt.name+SCALE_TRIGGER},update:hasContinuousDomain(scaleType)?`[${scaled(`${dname}[0]`)}, ${scaled(`${dname}[1]`)}]`:"[0, 0]"}),hasScales?[{name:dname,on:[]}]:[Object.assign(Object.assign({name:vname},init?{init:assembleInit(init,!0,scaled)}:{value:[]}),{on:on}),Object.assign(Object.assign({name:dname},init?{init:assembleInit(init)}:{}),{on:[{events:{signal:vname},update:`${vname}[0] === ${vname}[1] ? null : invert(${scaleName}, ${vname})`}]})]}(model,selCmpt,proj,init),dname=proj.signals.data,vname=proj.signals.visual,scaleName=Object(vega_util.Y)(model.scaleName(channel)),toNum=hasContinuousDomain(model.getScaleComponent(channel).get("type"))?"+":"";signals.push(...cs),dataSignals.push(dname),scaleTriggers.push({scaleName:model.scaleName(channel),expr:`(!isArray(${dname}) || `+`(${toNum}invert(${scaleName}, ${vname})[0] === ${toNum}${dname}[0] && `+`${toNum}invert(${scaleName}, ${vname})[1] === ${toNum}${dname}[1]))`})}),hasScales||signals.push({name:name+SCALE_TRIGGER,value:{},on:[{events:scaleTriggers.map(t=>({scale:t.scaleName})),update:scaleTriggers.map(t=>t.expr).join(" && ")+` ? ${name+SCALE_TRIGGER} : {}`}]});const init=selCmpt.init,update=`unit: ${selection_unitName(model)}, fields: ${fieldsSg}, values`;return signals.concat(Object.assign(Object.assign({name:name+TUPLE},init?{init:`{${update}: ${assembleInit(init)}}`}:{}),{on:[{events:[{signal:dataSignals.join(" || ")}],update:dataSignals.join(" && ")+` ? {${update}: [${dataSignals}]} : null`}]}))},modifyExpr:(model,selCmpt)=>{return selCmpt.name+TUPLE+", "+("global"===selCmpt.resolve?"true":`{unit: ${selection_unitName(model)}}`)},marks:(model,selCmpt,marks)=>{const name=selCmpt.name,{x:x,y:y}=selCmpt.project.has,xvname=x&&x.signals.visual,yvname=y&&y.signals.visual,store=`data(${Object(vega_util.Y)(selCmpt.name+STORE)})`;if(transforms_scales.has(selCmpt))return marks;const update={x:void 0!==x?{signal:`${xvname}[0]`}:{value:0},y:void 0!==y?{signal:`${yvname}[0]`}:{value:0},x2:void 0!==x?{signal:`${xvname}[1]`}:{field:{group:"width"}},y2:void 0!==y?{signal:`${yvname}[1]`}:{field:{group:"height"}}};if("global"===selCmpt.resolve)for(const key of util_keys(update))update[key]=[Object.assign({test:`${store}.length && ${store}[0].unit === ${selection_unitName(model)}`},update[key]),{value:0}];const _a=selCmpt.mark,{fill:fill,fillOpacity:fillOpacity}=_a,stroke=__rest(_a,["fill","fillOpacity"]),vgStroke=util_keys(stroke).reduce((def,k)=>(def[k]=[{test:[void 0!==x&&`${xvname}[0] !== ${xvname}[1]`,void 0!==y&&`${yvname}[0] !== ${yvname}[1]`].filter(t=>t).join(" && "),value:stroke[k]},{value:null}],def),{});return[{name:name+BRUSH+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:fill},fillOpacity:{value:fillOpacity}},update:update}},...marks,{name:name+BRUSH,type:"rect",clip:!0,encode:{enter:{fill:{value:"transparent"}},update:Object.assign(Object.assign({},update),vgStroke)}}]}};function interval_events(selCmpt,cb){return selCmpt.events.reduce((on,evt)=>evt.between?cb(on,evt):(log_warn(`${evt} is not an ordered event stream for interval selections.`),on),[])}function singleOrMultiSignals(model,selCmpt){const name=selCmpt.name,fieldsSg=name+TUPLE_FIELDS,proj=selCmpt.project,datum="(item().isVoronoi ? datum.datum : datum)",values=proj.items.map(p=>{const fieldDef=model.fieldDef(p.channel);return fieldDef&&fieldDef.bin?`[${datum}[${Object(vega_util.Y)(model.vgField(p.channel,{}))}], `+`${datum}[${Object(vega_util.Y)(model.vgField(p.channel,{binSuffix:"end"}))}]]`:`${datum}[${Object(vega_util.Y)(p.field)}]`}).join(", "),update=`unit: ${selection_unitName(model)}, fields: ${fieldsSg}, values`;return[{name:name+TUPLE,on:selCmpt.events?[{events:selCmpt.events,update:`datum && item().mark.marktype !== 'group' ? {${update}: [${values}]} : null`,force:!0}]:[]}]}const multi={signals:singleOrMultiSignals,modifyExpr:(model,selCmpt)=>{return selCmpt.name+TUPLE+", "+("global"===selCmpt.resolve?"null":`{unit: ${selection_unitName(model)}}`)}};const single={signals:singleOrMultiSignals,modifyExpr:(model,selCmpt)=>{return selCmpt.name+TUPLE+", "+("global"===selCmpt.resolve?"true":`{unit: ${selection_unitName(model)}}`)}};const STORE="_store",TUPLE="_tuple",MODIFY="_modify",VL_SELECTION_RESOLVE="vlSelectionResolve",selection_compilers={single:single,multi:multi,interval:interval_interval};function forEachSelection(model,cb){const selections=model.component.selection;if(selections)for(const name in selections)if(Object(vega_util.v)(selections,name)){const sel=selections[name];cb(sel,selection_compilers[sel.type])}}function selection_unitName(model,{escape:escape}={escape:!0}){let name=escape?Object(vega_util.Y)(model.name):model.name;const facetModel=function getFacetModel(model){let parent=model.parent;for(;parent&&!isFacetModel(parent);)parent=parent.parent;return parent}(model);if(facetModel){const{facet:facet}=facetModel;for(const channel of FACET_CHANNELS)facet[channel]&&(name+=` + '__facet_${channel}_' + (facet[${Object(vega_util.Y)(facetModel.vgField(channel))}])`)}return name}function requiresSelectionId(model){let identifier=!1;return forEachSelection(model,selCmpt=>{identifier=identifier||selCmpt.project.items.some(proj=>proj.field===SELECTION_ID)}),identifier}function getDependentFields(expression){const ast=parser(expression),dependents=new Set;return ast.visit(node=>{"MemberExpression"===node.type&&function startsWithDatum(node){return"MemberExpression"===node.object.type?startsWithDatum(node.object):"datum"===node.object.name}(node)&&dependents.add(function getName(node){const name=[];return"Identifier"===node.type?[node.name]:"Literal"===node.type?[node.value]:("MemberExpression"===node.type&&(name.push(...getName(node.object)),name.push(...getName(node.property))),name)}(node).slice(1).join("."))}),dependents}class filter_FilterNode extends DataFlowNode{constructor(parent,model,filter){super(parent),this.model=model,this.filter=filter,this.expr=predicate_expression(this.model,this.filter,this),this._dependentFields=getDependentFields(this.expr)}clone(){return new filter_FilterNode(null,this.model,duplicate(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function parseSelectionPredicate(model,selections,dfnode){const stores=[];const predicateStr=logicalExpr(selections,(function expr(name){const vname=varName(name),selCmpt=model.getSelectionComponent(vname,name),store=Object(vega_util.Y)(vname+STORE);if(selCmpt.project.timeUnit){const child=null!=dfnode?dfnode:model.component.data.raw,tunode=selCmpt.project.timeUnit.clone();child.parent?tunode.insertAsParentOf(child):child.parent=tunode}return"none"!==selCmpt.empty&&stores.push(store),`vlSelectionTest(${store}, datum`+("global"===selCmpt.resolve?")":`, ${Object(vega_util.Y)(selCmpt.resolve)})`)}));return(stores.length?"!("+stores.map(s=>`length(data(${s}))`).join(" || ")+") || ":"")+`(${predicateStr})`}function parseSelectionBinExtent(selCmpt,extent){const encoding=extent.encoding;let field=extent.field;if(encoding||field){if(encoding&&!field){const encodings=selCmpt.project.items.filter(p=>p.channel===encoding);!encodings.length||encodings.length>1?(field=selCmpt.project.items[0].field,log_warn((encodings.length?"Multiple ":"No ")+`matching ${Object(vega_util.Y)(encoding)} encoding found for selection ${Object(vega_util.Y)(extent.selection)}. `+`Using "field": ${Object(vega_util.Y)(field)}.`)):field=encodings[0].field}}else field=selCmpt.project.items[0].field,selCmpt.project.items.length>1&&log_warn('A "field" or "encoding" must be specified when using a selection as a scale domain. '+`Using "field": ${Object(vega_util.Y)(field)}.`);return`${selCmpt.name}[${Object(vega_util.Y)(field)}]`}function predicate_expression(model,filterOp,node){return logicalExpr(filterOp,predicate=>Object(vega_util.H)(predicate)?predicate:function isSelectionPredicate(predicate){var _a;return null===(_a=predicate)||void 0===_a?void 0:_a.selection}(predicate)?parseSelectionPredicate(model,predicate.selection,node):fieldFilterExpression(predicate))}function setAxisEncode(axis,part,vgProp,vgRef){var _a,_b,_c;axis.encode=null!=(_a=axis.encode)?_a:{},axis.encode[part]=null!=(_b=axis.encode[part])?_b:{},axis.encode[part].update=null!=(_c=axis.encode[part].update)?_c:{},axis.encode[part].update[vgProp]=vgRef}function assembleAxis(axisCmpt,kind,config,opt={header:!1}){var _a,_b;const _c=axisCmpt.combine(),{orient:orient,scale:scale,labelExpr:labelExpr,title:title,zindex:zindex}=_c,axis=__rest(_c,["orient","scale","labelExpr","title","zindex"]);if(util_keys(axis).forEach(prop=>{const propType=AXIS_PROPERTY_TYPE[prop],propValue=axis[prop];if(propType&&propType!==kind&&"both"!==propType)delete axis[prop];else if(function isConditionalAxisValue(v){return v.condition}(propValue)){const{vgProp:vgProp,part:part}=CONDITIONAL_AXIS_PROP_INDEX[prop],{condition:condition,value:value}=propValue,vgRef=[...(Object(vega_util.A)(condition)?condition:[condition]).map(c=>{const{value:v,test:test}=c;return{test:predicate_expression(null,test),value:v}}),{value:value}];setAxisEncode(axis,part,vgProp,vgRef),delete axis[prop]}}),"grid"===kind){if(!axis.grid)return;if(axis.encode){const{grid:grid}=axis.encode;axis.encode=Object.assign({},grid?{grid:grid}:{}),0===util_keys(axis.encode).length&&delete axis.encode}return Object.assign(Object.assign({scale:scale,orient:orient},axis),{domain:!1,labels:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:getFirstDefined(zindex,0)})}{if(!opt.header&&axisCmpt.mainExtracted)return;if(void 0!==labelExpr){let expr=labelExpr;(null===(_b=null===(_a=axis.encode)||void 0===_a?void 0:_a.labels)||void 0===_b?void 0:_b.update)&&isSignalRef(axis.encode.labels.update.text)&&(expr=replaceAll(labelExpr,"datum.label",axis.encode.labels.update.text.signal)),setAxisEncode(axis,"labels","text",{signal:expr})}if(axis.encode){for(const part of AXIS_PARTS)axisCmpt.hasAxisPart(part)||delete axis.encode[part];0===util_keys(axis.encode).length&&delete axis.encode}const titleString=function assembleTitle(title,config){if(title)return isText(title)?title:title.map(fieldDef=>defaultTitle(fieldDef,config)).join(", ")}(title,config);return Object.assign(Object.assign(Object.assign({scale:scale,orient:orient,grid:!1},titleString?{title:titleString}:{}),axis),{zindex:getFirstDefined(zindex,0)})}}function assembleAxisSignals(model){const{axes:axes}=model.component;for(const channel of POSITION_SCALE_CHANNELS)if(axes[channel])for(const axis of axes[channel])if(!axis.get("gridScale")){const sizeType="x"===channel?"height":"width";return[{name:sizeType,update:model.getSizeSignalRef(sizeType).signal}]}return[]}const HEADER_TITLE_PROPERTIES_MAP={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},HEADER_LABEL_PROPERTIES_MAP={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelLimit:"limit",labelOrient:"orient",labelPadding:"offset"},HEADER_TITLE_PROPERTIES=util_keys(HEADER_TITLE_PROPERTIES_MAP),HEADER_LABEL_PROPERTIES=util_keys(HEADER_LABEL_PROPERTIES_MAP);function getAxisConfig(property,config,channel,orient,scaleType){var _a;const configTypes=[..."band"===scaleType?["axisBand"]:[],"x"===channel?"axisX":"axisY",...orient?["axis"+orient.substr(0,1).toUpperCase()+orient.substr(1)]:[],"axis"];for(const configType of configTypes)if(void 0!==(null===(_a=config[configType])||void 0===_a?void 0:_a[property]))return config[configType][property]}function defaultLabelBaseline(angle,axisOrient){if(void 0!==angle)return angle=normalizeAngle(angle),"top"===axisOrient||"bottom"===axisOrient?angle<=45||315<=angle?"top"===axisOrient?"bottom":"top":135<=angle&&angle<=225?"top"===axisOrient?"top":"bottom":"middle":angle<=45||315<=angle||135<=angle&&angle<=225?"middle":45<=angle&&angle<=135?"left"===axisOrient?"top":"bottom":"left"===axisOrient?"bottom":"top"}function defaultLabelAlign(angle,axisOrient){if(void 0!==angle)return angle=normalizeAngle(angle),"top"===axisOrient||"bottom"===axisOrient?angle%180==0?"center":0<angle&&angle<180?"top"===axisOrient?"right":"left":"top"===axisOrient?"left":"right":(angle+90)%180==0?"center":90<=angle&&angle<270?"left"===axisOrient?"left":"right":"left"===axisOrient?"right":"left"}function properties_orient(channel){switch(channel){case channel_X:return"bottom";case channel_Y:return"left"}throw new Error(message.INVALID_CHANNEL_FOR_AXIS)}class calculate_CalculateNode extends DataFlowNode{constructor(parent,transform){super(parent),this.transform=transform,this._dependentFields=getDependentFields(this.transform.calculate)}clone(){return new calculate_CalculateNode(null,duplicate(this.transform))}static parseAllForSortIndex(parent,model){return model.forEachFieldDef((fieldDef,channel)=>{if(isScaleFieldDef(fieldDef)&&isSortArray(fieldDef.sort)){const{field:field,timeUnit:timeUnit}=fieldDef,sort=fieldDef.sort,calculate=sort.map((sortValue,i)=>`${fieldFilterExpression({field:field,timeUnit:timeUnit,equal:sortValue})} ? ${i} : `).join("")+sort.length;parent=new calculate_CalculateNode(parent,{calculate:calculate,as:sortArrayIndexField(fieldDef,channel,{forAs:!0})})}}),parent}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${util_hash(this.transform)}`}}function sortArrayIndexField(fieldDef,channel,opt){return vgField(fieldDef,Object.assign({prefix:channel,suffix:"sort_index"},null!=opt?opt:{}))}function getHeaderChannel(channel,orient){return util_contains(["top","bottom"],orient)?"column":util_contains(["left","right"],orient)?"row":"row"===channel?"row":"column"}function getHeaderProperty(prop,facetFieldDef,config,channel){const headerSpecificConfig="row"===channel?config.headerRow:"column"===channel?config.headerColumn:config.headerFacet;return getFirstDefined(facetFieldDef&&facetFieldDef.header?facetFieldDef.header[prop]:void 0,headerSpecificConfig[prop],config.header[prop])}function getHeaderProperties(properties,facetFieldDef,config,channel){const props={};for(const prop of properties){const value=getHeaderProperty(prop,facetFieldDef,config,channel);void 0!==value&&(props[prop]=value)}return props}const HEADER_CHANNELS=["row","column"],HEADER_TYPES=["header","footer"];function assembleTitleGroup(model,channel){const title=model.component.layoutHeaders[channel].title,config=model.config?model.config:void 0,facetFieldDef=model.component.layoutHeaders[channel].facetFieldDef?model.component.layoutHeaders[channel].facetFieldDef:void 0,{titleAnchor:titleAnchor,titleAngle:titleAngle,titleOrient:titleOrient}=getHeaderProperties(["titleAnchor","titleAngle","titleOrient"],facetFieldDef,config,channel),headerChannel=getHeaderChannel(channel,titleOrient);return{name:`${channel}-title`,type:"group",role:`${headerChannel}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:title},"row"===channel?{orient:"left"}:{}),{style:"guide-title"}),defaultHeaderGuideBaseline(titleAngle,headerChannel)),defaultHeaderGuideAlign(headerChannel,titleAngle,titleAnchor)),assembleHeaderProperties(config,facetFieldDef,channel,HEADER_TITLE_PROPERTIES,HEADER_TITLE_PROPERTIES_MAP))}}function defaultHeaderGuideAlign(headerChannel,angle,anchor="middle"){switch(anchor){case"start":return{align:"left"};case"end":return{align:"right"}}const align=defaultLabelAlign(angle,"row"===headerChannel?"left":"top");return align?{align:align}:{}}function defaultHeaderGuideBaseline(angle,channel){const baseline=defaultLabelBaseline(angle,"row"===channel?"left":"top");return baseline?{baseline:baseline}:{}}function assembleHeaderGroups(model,channel){const layoutHeader=model.component.layoutHeaders[channel],groups=[];for(const headerType of HEADER_TYPES)if(layoutHeader[headerType])for(const headerCmpt of layoutHeader[headerType])groups.push(assembleHeaderGroup(model,channel,headerType,layoutHeader,headerCmpt));return groups}function getSort(facetFieldDef,channel){var _a;const{sort:sort}=facetFieldDef;return isSortField(sort)?{field:vgField(sort,{expr:"datum"}),order:(_a=sort.order,null!=_a?_a:"ascending")}:Object(vega_util.A)(sort)?{field:sortArrayIndexField(facetFieldDef,channel,{expr:"datum"}),order:"ascending"}:{field:vgField(facetFieldDef,{expr:"datum"}),order:null!=sort?sort:"ascending"}}function assembleLabelTitle(facetFieldDef,channel,config){const{format:format,labelAngle:labelAngle,labelAnchor:labelAnchor,labelOrient:labelOrient,labelExpr:labelExpr}=getHeaderProperties(["format","labelAngle","labelAnchor","labelOrient","labelExpr"],facetFieldDef,config,channel),titleTextExpr=formatSignalRef(facetFieldDef,format,"parent",config).signal,headerChannel=getHeaderChannel(channel,labelOrient);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:labelExpr?replaceAll(replaceAll(labelExpr,"datum.label",titleTextExpr),"datum.value",vgField(facetFieldDef,{expr:"parent"})):titleTextExpr}},"row"===channel?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),defaultHeaderGuideBaseline(labelAngle,headerChannel)),defaultHeaderGuideAlign(headerChannel,labelAngle,labelAnchor)),assembleHeaderProperties(config,facetFieldDef,channel,HEADER_LABEL_PROPERTIES,HEADER_LABEL_PROPERTIES_MAP))}function assembleHeaderGroup(model,channel,headerType,layoutHeader,headerCmpt){var _a;if(headerCmpt){let title=null;const{facetFieldDef:facetFieldDef}=layoutHeader,config=model.config?model.config:void 0;if(facetFieldDef&&headerCmpt.labels){const{labelOrient:labelOrient}=getHeaderProperties(["labelOrient"],facetFieldDef,config,channel);("row"===channel&&!util_contains(["top","bottom"],labelOrient)||"column"===channel&&!util_contains(["left","right"],labelOrient))&&(title=assembleLabelTitle(facetFieldDef,channel,config))}const isFacetWithoutRowCol=isFacetModel(model)&&!isFacetMapping(model.facet),axes=headerCmpt.axes,hasAxes=(null===(_a=axes)||void 0===_a?void 0:_a.length)>0;if(title||hasAxes){const sizeChannel="row"===channel?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:model.getName(`${channel}_${headerType}`),type:"group",role:`${channel}-${headerType}`},layoutHeader.facetFieldDef?{from:{data:model.getName(channel+"_domain")},sort:getSort(facetFieldDef,channel)}:{}),hasAxes&&isFacetWithoutRowCol?{from:{data:model.getName(`facet_domain_${channel}`)}}:{}),title?{title:title}:{}),headerCmpt.sizeSignal?{encode:{update:{[sizeChannel]:headerCmpt.sizeSignal}}}:{}),hasAxes?{axes:axes}:{})}}return null}const LAYOUT_TITLE_BAND={column:{start:0,end:1},row:{start:1,end:0}};function getLayoutTitleBand(titleAnchor,headerChannel){return LAYOUT_TITLE_BAND[headerChannel][titleAnchor]}function assembleHeaderProperties(config,facetFieldDef,channel,properties,propertiesMap){const props={};for(const prop of properties){if(!propertiesMap[prop])continue;const value=getHeaderProperty(prop,facetFieldDef,config,channel);void 0!==value&&(props[propertiesMap[prop]]=value)}return props}function assembleLayoutSignals(model){return[...sizeSignals(model,"width"),...sizeSignals(model,"height")]}function sizeSignals(model,sizeType){const channel="width"===sizeType?"x":"y",size=model.component.layoutSize.get(sizeType);if(!size||"merged"===size)return[];const name=model.getSizeSignalRef(sizeType).signal;if("step"===size){const scaleComponent=model.getScaleComponent(channel);if(scaleComponent){const type=scaleComponent.get("type"),range=scaleComponent.get("range");if(hasDiscreteDomain(type)&&isVgRangeStep(range)){const scaleName=model.scaleName(channel);if(isFacetModel(model.parent)){if("independent"===model.parent.component.resolve.scale[channel])return[stepSignal(scaleName,range)]}return[stepSignal(scaleName,range),{name:name,update:sizeExpr(scaleName,scaleComponent,`domain('${scaleName}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==size){const isWidth=name.endsWith("width"),expr=isWidth?"containerSize()[0]":"containerSize()[1]",safeExpr=`isFinite(${expr}) ? ${expr} : ${getViewConfigContinuousSize(model.config.view,isWidth?"width":"height")}`;return[{name:name,init:safeExpr,on:[{update:safeExpr,events:"window:resize"}]}]}return[{name:name,value:size}]}function stepSignal(scaleName,range){return{name:scaleName+"_step",value:range.step}}function sizeExpr(scaleName,scaleComponent,cardinality){const type=scaleComponent.get("type"),padding=scaleComponent.get("padding"),paddingOuter=getFirstDefined(scaleComponent.get("paddingOuter"),padding);let paddingInner=scaleComponent.get("paddingInner");return`bandspace(${cardinality}, ${paddingInner="band"===type?void 0!==paddingInner?paddingInner:padding:1}, ${paddingOuter}) * ${scaleName}_step`}function guideEncodeEntry(encoding,model){return util_keys(encoding).reduce((encode,channel)=>{const valueDef=encoding[channel];return Object.assign(Object.assign({},encode),wrapCondition(model,valueDef,channel,x=>({value:x.value})))},{})}function defaultScaleResolve(channel,model){if(isLayerModel(model)||isFacetModel(model))return"shared";if(isConcatModel(model)||isRepeatModel(model))return util_contains(POSITION_SCALE_CHANNELS,channel)?"independent":"shared";throw new Error("invalid model type for resolve")}function parseGuideResolve(resolve,channel){const channelScaleResolve=resolve.scale[channel],guide=util_contains(POSITION_SCALE_CHANNELS,channel)?"axis":"legend";return"independent"===channelScaleResolve?("shared"===resolve[guide][channel]&&log_warn(message.independentScaleMeansIndependentGuide(channel)),"independent"):resolve[guide][channel]||"shared"}class split_Split{constructor(explicit={},implicit={}){this.explicit=explicit,this.implicit=implicit}clone(){return new split_Split(duplicate(this.explicit),duplicate(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(key){return getFirstDefined(this.explicit[key],this.implicit[key])}getWithExplicit(key){return void 0!==this.explicit[key]?{explicit:!0,value:this.explicit[key]}:void 0!==this.implicit[key]?{explicit:!1,value:this.implicit[key]}:{explicit:!1,value:void 0}}setWithExplicit(key,value){void 0!==value.value&&this.set(key,value.value,value.explicit)}set(key,value,explicit){return delete this[explicit?"implicit":"explicit"][key],this[explicit?"explicit":"implicit"][key]=value,this}copyKeyFromSplit(key,s){void 0!==s.explicit[key]?this.set(key,s.explicit[key],!0):void 0!==s.implicit[key]&&this.set(key,s.implicit[key],!1)}copyKeyFromObject(key,s){void 0!==s[key]&&this.set(key,s[key],!0)}copyAll(other){for(const key of util_keys(other.combine())){const val=other.getWithExplicit(key);this.setWithExplicit(key,val)}}}function makeExplicit(value){return{explicit:!0,value:value}}function makeImplicit(value){return{explicit:!1,value:value}}function tieBreakByComparing(compare){return(v1,v2,property,propertyOf)=>{const diff=compare(v1.value,v2.value);return diff>0?v1:diff<0?v2:defaultTieBreaker(v1,v2,property,propertyOf)}}function defaultTieBreaker(v1,v2,property,propertyOf){return v1.explicit&&v2.explicit&&log_warn(message.mergeConflictingProperty(property,propertyOf,v1.value,v2.value)),v1}function mergeValuesWithExplicit(v1,v2,property,propertyOf,tieBreaker=defaultTieBreaker){return void 0===v1||void 0===v1.value?v2:v1.explicit&&!v2.explicit?v1:v2.explicit&&!v1.explicit?v2:stringify(v1.value)===stringify(v2.value)?v1:tieBreaker(v1,v2,property,propertyOf)}const LEGEND_COMPONENT_PROPERTY_INDEX=Object.assign(Object.assign({},COMMON_LEGEND_PROPERTY_INDEX),{labelExpr:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),LEGEND_COMPONENT_PROPERTIES=util_keys(LEGEND_COMPONENT_PROPERTY_INDEX);class component_LegendComponent extends split_Split{}function properties_type(params){const{legend:legend}=params;return getFirstDefined(legend.type,properties_defaultType(params))}function properties_defaultType({channel:channel,timeUnit:timeUnit,scaleType:scaleType,alwaysReturn:alwaysReturn}){if(isColorChannel(channel)){if(util_contains(["quarter","month","day"],timeUnit))return"symbol";if(isContinuousToContinuous(scaleType))return alwaysReturn?"gradient":void 0}return alwaysReturn?"symbol":void 0}function properties_direction({legend:legend,legendConfig:legendConfig,timeUnit:timeUnit,channel:channel,scaleType:scaleType}){const orient=getFirstDefined(legend.orient,legendConfig.orient,"right"),legendType=properties_type({legend:legend,channel:channel,timeUnit:timeUnit,scaleType:scaleType,alwaysReturn:!0});return getFirstDefined(legend.direction,legendConfig[legendType?"gradientDirection":"symbolDirection"],function defaultDirection(orient,legendType){switch(orient){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===legendType?"horizontal":void 0}}(orient,legendType))}function gradientLengthSignal(model,sizeType,min,max){return{signal:`clamp(${model.getSizeSignalRef(sizeType).signal}, ${min}, ${max})`}}function encode_type(legendCmp,model,channel){const scaleType=model.getScaleComponent(channel).get("type");return getFirstDefined(legendCmp.get("type"),properties_defaultType({channel:channel,scaleType:scaleType,alwaysReturn:!0}))}function encode_symbols(fieldDef,symbolsSpec,model,channel,legendCmp){var _a,_b,_c,_d,_e;if("symbol"!==encode_type(legendCmp,model,channel))return;let out=Object.assign(Object.assign({},function applyMarkConfig(e,model,propsList){for(const property of propsList){const value=getMarkConfig(property,model.markDef,model.config);void 0!==value&&(e[property]={value:value})}return e}({},model,FILL_STROKE_CONFIG)),mixins_color(model));const{markDef:markDef,encoding:encoding,config:config}=model,filled=markDef.filled,opacity=null!=(_a=getMaxValue(encoding.opacity))?_a:markDef.opacity;if(out.fill)if("fill"===channel||filled&&channel===COLOR)delete out.fill;else if(out.fill.field)legendCmp.get("symbolFillColor")?delete out.fill:(out.fill={value:(_b=config.legend.symbolBaseFillColor,null!=_b?_b:"black")},out.fillOpacity={value:null!=opacity?opacity:1});else if(Object(vega_util.A)(out.fill)){const fill=null!=(_e=null!=(_d=getFirstConditionValue(null!=(_c=encoding.fill)?_c:encoding.color))?_d:markDef.fill)?_e:filled&&markDef.color;fill&&(out.fill={value:fill})}if(out.stroke)if("stroke"===channel||!filled&&channel===COLOR)delete out.stroke;else if(out.stroke.field)delete out.stroke;else if(Object(vega_util.A)(out.stroke)){const stroke=getFirstDefined(getFirstConditionValue(encoding.stroke||encoding.color),markDef.stroke,filled?markDef.color:void 0);stroke&&(out.stroke={value:stroke})}return channel!==OPACITY&&opacity&&(out.opacity={value:opacity}),out=Object.assign(Object.assign({},out),symbolsSpec),util_keys(out).length>0?out:void 0}function legend_encode_gradient(fieldDef,gradientSpec,model,channel,legendCmp){if("gradient"!==encode_type(legendCmp,model,channel))return;let out={};const opacity=getMaxValue(model.encoding.opacity)||model.markDef.opacity;return opacity&&(out.opacity={value:opacity}),out=Object.assign(Object.assign({},out),gradientSpec),util_keys(out).length>0?out:void 0}function encode_labels(fieldDef,labelsSpec,model,channel){const legend=model.legend(channel),config=model.config;let out={};if(isTimeFormatFieldDef(fieldDef)){const isUTCScale=model.getScaleComponent(channel).get("type")===ScaleType.UTC,expr=timeFormatExpression("datum.value",fieldDef.timeUnit,legend.format,config.legend.shortTimeLabels,config.timeFormat,isUTCScale);labelsSpec=Object.assign(Object.assign({},expr?{text:{signal:expr}}:{}),labelsSpec)}return out=Object.assign(Object.assign({},out),labelsSpec),util_keys(out).length>0?out:void 0}function getMaxValue(channelDef){return getConditionValue(channelDef,(v,conditionalDef)=>Math.max(v,conditionalDef.value))}function getFirstConditionValue(channelDef){return getConditionValue(channelDef,(v,conditionalDef)=>getFirstDefined(v,conditionalDef.value))}function getConditionValue(channelDef,reducer){return function hasConditionalValueDef(channelDef){return!!channelDef&&!!channelDef.condition&&(Object(vega_util.A)(channelDef.condition)||isValueDef(channelDef.condition))}(channelDef)?(Object(vega_util.A)(channelDef.condition)?channelDef.condition:[channelDef.condition]).reduce(reducer,channelDef.value):isValueDef(channelDef)?channelDef.value:void 0}function parseLegend(model){isUnitModel(model)?model.component.legends=function parseUnitLegend(model){const{encoding:encoding}=model;return[COLOR,FILL,STROKE,STROKEWIDTH,SIZE,SHAPE,OPACITY,FILLOPACITY,STROKEOPACITY].reduce((legendComponent,channel)=>{const def=encoding[channel];return!model.legend(channel)||!model.getScaleComponent(channel)||isFieldDef(def)&&channel===SHAPE&&def.type===GEOJSON||(legendComponent[channel]=function parseLegendForChannel(model,channel){var _a;const fieldDef=model.fieldDef(channel),legend=model.legend(channel),legendCmpt=new component_LegendComponent({},function getLegendDefWithScale(model,channel){const scale=model.scaleName(COLOR);if("color"===channel)return model.markDef.filled?{fill:scale}:{stroke:scale};return{[channel]:model.scaleName(channel)}}(model,channel));for(const property of LEGEND_COMPONENT_PROPERTIES){const value=getProperty(property,legend,channel,model);if(void 0!==value){const explicit=isExplicit(value,property,legend,fieldDef);(explicit||void 0===model.config.legend[property])&&legendCmpt.set(property,value,explicit)}}const legendEncoding=null!==(_a=legend.encoding)&&void 0!==_a?_a:{},legendEncode=["labels","legend","title","symbols","gradient"].reduce((e,part)=>{var _a;const legendEncodingPart=guideEncodeEntry(null!=(_a=legendEncoding[part])?_a:{},model),value=legend_encode_namespaceObject[part]?legend_encode_namespaceObject[part](fieldDef,legendEncodingPart,model,channel,legendCmpt):legendEncodingPart;return void 0!==value&&util_keys(value).length>0&&(e[part]={update:value}),e},{});util_keys(legendEncode).length>0&&legendCmpt.set("encode",legendEncode,!!legend.encoding);return legendCmpt}(model,channel)),legendComponent},{})}(model):model.component.legends=function parseNonUnitLegend(model){const{legends:legends,resolve:resolve}=model.component;for(const child of model.children)parseLegend(child),util_keys(child.component.legends).forEach(channel=>{resolve.legend[channel]=parseGuideResolve(model.component.resolve,channel),"shared"===resolve.legend[channel]&&(legends[channel]=mergeLegendComponent(legends[channel],child.component.legends[channel]),legends[channel]||(resolve.legend[channel]="independent",delete legends[channel]))});return util_keys(legends).forEach(channel=>{for(const child of model.children)child.component.legends[channel]&&"shared"===resolve.legend[channel]&&delete child.component.legends[channel]}),legends}(model)}function isExplicit(value,property,legend,fieldDef){switch(property){case"values":return!!legend.values;case"title":if("title"===property&&value===fieldDef.title)return!0}return value===legend[property]}function getProperty(property,legend,channel,model){const{encoding:encoding,mark:mark}=model,fieldDef=getTypedFieldDef(encoding[channel]),legendConfig=model.config.legend,{timeUnit:timeUnit}=fieldDef,scaleType=model.getScaleComponent(channel).get("type");switch(property){case"direction":return properties_direction({legend:legend,legendConfig:legendConfig,timeUnit:timeUnit,channel:channel,scaleType:scaleType});case"format":if(isTimeFormatFieldDef(fieldDef))return;return numberFormat(fieldDef,legend.format,model.config);case"formatType":if(isTimeFormatFieldDef(fieldDef))return;return legend.formatType;case"gradientLength":return getFirstDefined(legend.gradientLength,legendConfig.gradientLength,function defaultGradientLength({legend:legend,legendConfig:legendConfig,model:model,channel:channel,scaleType:scaleType}){const{gradientHorizontalMaxLength:gradientHorizontalMaxLength,gradientHorizontalMinLength:gradientHorizontalMinLength,gradientVerticalMaxLength:gradientVerticalMaxLength,gradientVerticalMinLength:gradientVerticalMinLength}=legendConfig;if("horizontal"===properties_direction({legend:legend,legendConfig:legendConfig,channel:channel,scaleType:scaleType})){const orient=getFirstDefined(legend.orient,legendConfig.orient);return"top"===orient||"bottom"===orient?gradientLengthSignal(model,"width",gradientHorizontalMinLength,gradientHorizontalMaxLength):gradientHorizontalMinLength}return gradientLengthSignal(model,"height",gradientVerticalMinLength,gradientVerticalMaxLength)}({model:model,legend:legend,legendConfig:legendConfig,channel:channel,scaleType:scaleType}));case"labelOverlap":return getFirstDefined(legend.labelOverlap,function properties_defaultLabelOverlap(scaleType){if(util_contains(["quantile","threshold","log"],scaleType))return"greedy"}(scaleType));case"symbolType":return getFirstDefined(legend.symbolType,function defaultSymbolType(mark,channel,shapeChannelDef,markShape){var _a;if("shape"!==channel){const shape=null!=(_a=getFirstConditionValue(shapeChannelDef))?_a:markShape;if(shape)return shape}switch(mark){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(mark,channel,encoding.shape,model.markDef.shape));case"title":return channeldef_title(fieldDef,model.config,{allowDisabling:!0})||void 0;case"type":return properties_type({legend:legend,channel:channel,timeUnit:timeUnit,scaleType:scaleType,alwaysReturn:!1});case"values":return function legend_properties_values(legend,fieldDef){const vals=legend.values;if(vals)return valueArray(fieldDef,vals)}(legend,fieldDef)}return legend[property]}function mergeLegendComponent(mergedLegend,childLegend){var _a,_b,_c,_d,_e,_f;if(!mergedLegend)return childLegend.clone();const mergedOrient=mergedLegend.getWithExplicit("orient"),childOrient=childLegend.getWithExplicit("orient");if(mergedOrient.explicit&&childOrient.explicit&&mergedOrient.value!==childOrient.value)return;let typeMerged=!1;for(const prop of LEGEND_COMPONENT_PROPERTIES){const mergedValueWithExplicit=mergeValuesWithExplicit(mergedLegend.getWithExplicit(prop),childLegend.getWithExplicit(prop),prop,"legend",(v1,v2)=>{switch(prop){case"symbolType":return mergeSymbolType(v1,v2);case"title":return mergeTitleComponent(v1,v2);case"type":return typeMerged=!0,makeImplicit("symbol")}return defaultTieBreaker(v1,v2,prop,"legend")});mergedLegend.setWithExplicit(prop,mergedValueWithExplicit)}return typeMerged&&((null==(_c=null===(_b=null===(_a=mergedLegend.implicit)||void 0===_a?void 0:_a.encode)||void 0===_b?void 0:_b.gradient)||_c)&&deleteNestedProperty(mergedLegend.implicit,["encode","gradient"]),(null==(_f=null===(_e=null===(_d=mergedLegend.explicit)||void 0===_d?void 0:_d.encode)||void 0===_e?void 0:_e.gradient)||_f)&&deleteNestedProperty(mergedLegend.explicit,["encode","gradient"])),mergedLegend}function mergeSymbolType(st1,st2){return"circle"===st2.value?st2:st1}function assembleLegends(model){const legendComponentIndex=model.component.legends,legendByDomain={};for(const channel of util_keys(legendComponentIndex)){const scaleComponent=model.getScaleComponent(channel),domainHash=stringify(scaleComponent.get("domains"));if(legendByDomain[domainHash])for(const mergedLegendComponent of legendByDomain[domainHash]){mergeLegendComponent(mergedLegendComponent,legendComponentIndex[channel])||legendByDomain[domainHash].push(legendComponentIndex[channel])}else legendByDomain[domainHash]=[legendComponentIndex[channel].clone()]}return util_vals(legendByDomain).flat().map(legendCmpt=>{var _a,_b,_c;const _d=legendCmpt.combine(),{labelExpr:labelExpr}=_d,legend=__rest(_d,["labelExpr"]);if(null===(_a=legend.encode)||void 0===_a?void 0:_a.symbols){const out=legend.encode.symbols.update;!out.fill||"transparent"===out.fill.value||out.stroke||legend.stroke||(out.stroke={value:"transparent"}),legend.fill&&delete out.fill}if(void 0!==labelExpr){let expr=labelExpr;(null===(_c=null===(_b=legend.encode)||void 0===_b?void 0:_b.labels)||void 0===_c?void 0:_c.update)&&isSignalRef(legend.encode.labels.update.text)&&(expr=replaceAll(labelExpr,"datum.label",legend.encode.labels.update.text.signal)),function setLegendEncode(legend,part,vgProp,vgRef){var _a,_b,_c;legend.encode=null!=(_a=legend.encode)?_a:{},legend.encode[part]=null!=(_b=legend.encode[part])?_b:{},legend.encode[part].update=null!=(_c=legend.encode[part].update)?_c:{},legend.encode[part].update[vgProp]=vgRef}(legend,"labels","text",{signal:expr})}return legend})}function assembleProjections(model){return isLayerModel(model)||isConcatModel(model)||isRepeatModel(model)?function assembleProjectionsForModelAndChildren(model){return model.children.reduce((projections,child)=>projections.concat(child.assembleProjections()),assembleProjectionForModel(model))}(model):assembleProjectionForModel(model)}function assembleProjectionForModel(model){const component=model.component.projection;if(!component||component.merged)return[];const projection=component.combine(),{name:name}=projection,rest=__rest(projection,["name"]);if(component.data){const size={signal:`[${component.size.map(ref=>ref.signal).join(", ")}]`},fit=component.data.reduce((sources,data)=>{const source=isSignalRef(data)?data.signal:`data('${model.lookupDataSource(data)}')`;return util_contains(sources,source)||sources.push(source),sources},[]);if(fit.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:name,size:size,fit:{signal:fit.length>1?`[${fit.join(", ")}]`:fit[0]}},rest)]}return[Object.assign(Object.assign({name:name},{translate:{signal:"[width / 2, height / 2]"}}),rest)]}const PROJECTION_PROPERTIES=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class component_ProjectionComponent extends split_Split{constructor(name,specifiedProjection,size,data){super(Object.assign({},specifiedProjection),{name:name}),this.specifiedProjection=specifiedProjection,this.size=size,this.data=data,this.merged=!1}get isFit(){return!!this.data}}function parseProjection(model){model.component.projection=isUnitModel(model)?function parseUnitProjection(model){var _a;if(model.hasProjection){const proj=model.specifiedProjection,fit=!(proj&&(null!=proj.scale||null!=proj.translate)),size=fit?[model.getSizeSignalRef("width"),model.getSizeSignalRef("height")]:void 0,data=fit?function gatherFitData(model){const data=[];for(const posssiblePair of[[LONGITUDE,LATITUDE],[LONGITUDE2,LATITUDE2]])(model.channelHasField(posssiblePair[0])||model.channelHasField(posssiblePair[1]))&&data.push({signal:model.getName(`geojson_${data.length}`)});model.channelHasField(SHAPE)&&model.fieldDef(SHAPE).type===GEOJSON&&data.push({signal:model.getName(`geojson_${data.length}`)});0===data.length&&data.push(model.requestDataName(MAIN));return data}(model):void 0;return new component_ProjectionComponent(model.projectionName(!0),Object.assign(Object.assign({},null!=(_a=model.config.projection)?_a:{}),null!=proj?proj:{}),size,data)}return}(model):function parseNonUnitProjections(model){if(0===model.children.length)return;let nonUnitProjection;model.children.forEach(child=>parseProjection(child));const mergable=every(model.children,child=>{const projection=child.component.projection;if(projection){if(nonUnitProjection){const merge=function mergeIfNoConflict(first,second){const allPropertiesShared=every(PROJECTION_PROPERTIES,prop=>!Object(vega_util.v)(first.explicit,prop)&&!Object(vega_util.v)(second.explicit,prop)||!(!Object(vega_util.v)(first.explicit,prop)||!Object(vega_util.v)(second.explicit,prop)||stringify(first.get(prop))!==stringify(second.get(prop))));if(stringify(first.size)===stringify(second.size)){if(allPropertiesShared)return first;if(stringify(first.explicit)===stringify({}))return second;if(stringify(second.explicit)===stringify({}))return first}return null}(nonUnitProjection,projection);return merge&&(nonUnitProjection=merge),!!merge}return nonUnitProjection=projection,!0}return!0});if(nonUnitProjection&&mergable){const name=model.projectionName(!0),modelProjection=new component_ProjectionComponent(name,nonUnitProjection.specifiedProjection,nonUnitProjection.size,duplicate(nonUnitProjection.data));return model.children.forEach(child=>{const projection=child.component.projection;projection&&(projection.isFit&&modelProjection.data.push(...child.component.projection.data),child.renameProjection(projection.get("name"),name),projection.merged=!0)}),modelProjection}return}(model)}function binKey(bin,field){return`${binToString(bin)}_${field}`}function getBinSignalName(model,field,bin){var _a;const key=binKey(null!=(_a=normalizeBin(bin,void 0))?_a:{},field);return model.getName(`${key}_bins`)}function createBinComponent(t,bin,model){let as,span;as=function isBinTransform(t){return"as"in t}(t)?Object(vega_util.H)(t.as)?[t.as,`${t.as}_end`]:[t.as[0],t.as[1]]:[vgField(t,{forAs:!0}),vgField(t,{binSuffix:"end",forAs:!0})];const normalizedBin=Object.assign({},normalizeBin(bin,void 0)),key=binKey(normalizedBin,t.field),{signal:signal,extentSignal:extentSignal}=function getSignalsFromModel(model,key){return{signal:model.getName(`${key}_bins`),extentSignal:model.getName(`${key}_extent`)}}(model,key);if(isSelectionExtent(normalizedBin.extent)){const ext=normalizedBin.extent,selName=ext.selection;span=parseSelectionBinExtent(model.getSelectionComponent(varName(selName),selName),ext),delete normalizedBin.extent}return{key:key,binComponent:Object.assign(Object.assign(Object.assign({bin:normalizedBin,field:t.field,as:[as]},signal?{signal:signal}:{}),extentSignal?{extentSignal:extentSignal}:{}),span?{span:span}:{})}}class bin_BinNode extends DataFlowNode{constructor(parent,bins){super(parent),this.bins=bins}clone(){return new bin_BinNode(null,duplicate(this.bins))}static makeFromEncoding(parent,model){const bins=model.reduceFieldDef((binComponentIndex,fieldDef,channel)=>{if(isTypedFieldDef(fieldDef)&&isBinning(fieldDef.bin)){const{key:key,binComponent:binComponent}=createBinComponent(fieldDef,fieldDef.bin,model);binComponentIndex[key]=Object.assign(Object.assign(Object.assign({},binComponent),binComponentIndex[key]),function rangeFormula(model,fieldDef,channel,config){var _a,_b;if(binRequiresRange(fieldDef,channel)){const guide=isUnitModel(model)?null!=(_b=null!=(_a=model.axis(channel))?_a:model.legend(channel))?_b:{}:{},startField=vgField(fieldDef,{expr:"datum"}),endField=vgField(fieldDef,{expr:"datum",binSuffix:"end"});return{formulaAs:vgField(fieldDef,{binSuffix:"range",forAs:!0}),formula:binFormatExpression(startField,endField,guide.format,config)}}return{}}(model,fieldDef,channel,model.config))}return binComponentIndex},{});return 0===util_keys(bins).length?null:new bin_BinNode(parent,bins)}static makeFromTransform(parent,t,model){const{key:key,binComponent:binComponent}=createBinComponent(t,t.bin,model);return new bin_BinNode(parent,{[key]:binComponent})}merge(other,renameSignal){for(const key of util_keys(other.bins))key in this.bins?(renameSignal(other.bins[key].signal,this.bins[key].signal),this.bins[key].as=unique([...this.bins[key].as,...other.bins[key].as],util_hash)):this.bins[key]=other.bins[key];for(const child of other.children)other.removeChild(child),child.parent=this;other.remove()}producedFields(){return new Set(util_vals(this.bins).map(c=>c.as).flat(2))}dependentFields(){return new Set(util_vals(this.bins).map(c=>c.field))}hash(){return`Bin ${util_hash(this.bins)}`}assemble(){return util_vals(this.bins).flatMap(bin=>{const transform=[],[binAs,...remainingAs]=bin.as,_a=bin.bin,{extent:extent}=_a,params=__rest(_a,["extent"]),binTrans=Object.assign(Object.assign(Object.assign({type:"bin",field:replacePathInField(bin.field),as:binAs,signal:bin.signal},isSelectionExtent(extent)?{extent:null}:{extent:extent}),bin.span?{span:{signal:`span(${bin.span})`}}:{}),params);!extent&&bin.extentSignal&&(transform.push({type:"extent",field:replacePathInField(bin.field),signal:bin.extentSignal}),binTrans.extent={signal:bin.extentSignal}),transform.push(binTrans);for(const as of remainingAs)for(let i=0;i<2;i++)transform.push({type:"formula",expr:vgField({field:binAs[i]},{expr:"datum"}),as:as[i]});return bin.formula&&transform.push({type:"formula",expr:bin.formula,as:bin.formulaAs}),transform})}}class source_SourceNode extends DataFlowNode{constructor(data){let format;if(super(null),isGenerator(data=null!=data?data:{name:"source"})||(format=data.format?Object.assign({},omit(data.format,["parse"])):{}),isInlineData(data))this._data={values:data.values};else if(isUrlData(data)){if(this._data={url:data.url},!format.type){let defaultExtension=/(?:\.([^.]+))?$/.exec(data.url)[1];util_contains(["json","csv","tsv","dsv","topojson"],defaultExtension)||(defaultExtension="json"),format.type=defaultExtension}}else isSphereGenerator(data)?this._data={values:[{type:"Sphere"}]}:(isNamedData(data)||isGenerator(data))&&(this._data={});this._generator=isGenerator(data),data.name&&(this._name=data.name),format&&util_keys(format).length>0&&(this._data.format=format)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(name){this._name=name}set parent(parent){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}function checkLinks(nodes){for(const node of nodes){for(const child of node.children)if(child.parent!==node)return console.error("Dataflow graph is inconsistent.",node,child),!1;if(!checkLinks(node.children))return!1}return!0}class graticule_GraticuleNode extends DataFlowNode{constructor(parent,params){super(parent),this.params=params}clone(){return new graticule_GraticuleNode(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${util_hash(this.params)}`}assemble(){return Object.assign({type:"graticule"},!0===this.params?{}:this.params)}}class sequence_SequenceNode extends DataFlowNode{constructor(parent,params){super(parent),this.params=params}clone(){return new sequence_SequenceNode(null,this.params)}dependentFields(){return new Set}producedFields(){var _a;return new Set([(_a=this.params.as,null!=_a?_a:"data")])}hash(){return`Hash ${util_hash(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}}function isDataSourceNode(node){return node instanceof source_SourceNode||node instanceof graticule_GraticuleNode||node instanceof sequence_SequenceNode}class OptimizerBase{constructor(){this._mutated=!1}setMutated(){this._mutated=!0}get mutatedFlag(){return this._mutated}}class BottomUpOptimizer extends OptimizerBase{constructor(){super(),this._continue=!1}setContinue(){this._continue=!0}get continueFlag(){return this._continue}get flags(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}}set flags({continueFlag:continueFlag,mutatedFlag:mutatedFlag}){continueFlag&&this.setContinue(),mutatedFlag&&this.setMutated()}reset(){}optimizeNextFromLeaves(node){if(isDataSourceNode(node))return!1;const next=node.parent,{continueFlag:continueFlag}=this.run(node);return continueFlag&&this.optimizeNextFromLeaves(next),this.mutatedFlag}}class TopDownOptimizer extends OptimizerBase{}function addDimension(dims,channel,fieldDef,model){const channelDef2=isUnitModel(model)?model.encoding[getSecondaryRangeChannel(channel)]:void 0;if(isTypedFieldDef(fieldDef)&&isUnitModel(model)&&hasBand(channel,fieldDef,channelDef2,model.markDef,model.config))dims.add(vgField(fieldDef,{})),dims.add(vgField(fieldDef,{suffix:"end"})),binRequiresRange(fieldDef,channel)&&dims.add(vgField(fieldDef,{binSuffix:"range"}));else if(function isGeoPositionChannel(c){return c in GEOPOSITION_CHANNEL_INDEX}(channel)){const posChannel=function getPositionChannelFromLatLong(channel){switch(channel){case LATITUDE:return"y";case LATITUDE2:return"y2";case LONGITUDE:return"x";case LONGITUDE2:return"x2"}}(channel);dims.add(model.getName(posChannel))}else dims.add(vgField(fieldDef));return dims}class aggregate_AggregateNode extends DataFlowNode{constructor(parent,dimensions,measures){super(parent),this.dimensions=dimensions,this.measures=measures}clone(){return new aggregate_AggregateNode(null,new Set(this.dimensions),duplicate(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(parent,model){let isAggregate=!1;model.forEachFieldDef(fd=>{fd.aggregate&&(isAggregate=!0)});const meas={},dims=new Set;return isAggregate?(model.forEachFieldDef((fieldDef,channel)=>{var _a,_b,_c,_d;const{aggregate:aggregate,field:field}=fieldDef;if(aggregate)if("count"===aggregate)meas["*"]=null!=(_a=meas["*"])?_a:{},meas["*"].count=new Set([vgField(fieldDef,{forAs:!0})]);else{if(isArgminDef(aggregate)||isArgmaxDef(aggregate)){const op=isArgminDef(aggregate)?"argmin":"argmax",argField=aggregate[op];meas[argField]=null!=(_b=meas[argField])?_b:{},meas[argField][op]=new Set([vgField({op:op,field:argField},{forAs:!0})])}else meas[field]=null!=(_c=meas[field])?_c:{},meas[field][aggregate]=new Set([vgField(fieldDef,{forAs:!0})]);isScaleChannel(channel)&&"unaggregated"===model.scaleDomain(channel)&&(meas[field]=null!=(_d=meas[field])?_d:{},meas[field].min=new Set([vgField({field:field,aggregate:"min"},{forAs:!0})]),meas[field].max=new Set([vgField({field:field,aggregate:"max"},{forAs:!0})]))}else addDimension(dims,channel,fieldDef,model)}),dims.size+util_keys(meas).length===0?null:new aggregate_AggregateNode(parent,dims,meas)):null}static makeFromTransform(parent,t){var _a,_b,_c;const dims=new Set,meas={};for(const s of t.aggregate){const{op:op,field:field,as:as}=s;op&&("count"===op?(meas["*"]=null!=(_a=meas["*"])?_a:{},meas["*"].count=new Set([as||vgField(s,{forAs:!0})])):(meas[field]=null!=(_b=meas[field])?_b:{},meas[field][op]=new Set([as||vgField(s,{forAs:!0})])))}for(const s of null!=(_c=t.groupby)?_c:[])dims.add(s);return dims.size+util_keys(meas).length===0?null:new aggregate_AggregateNode(parent,dims,meas)}merge(other){return function setEqual(a,b){if(a.size!==b.size)return!1;for(const e of a)if(!b.has(e))return!1;return!0}(this.dimensions,other.dimensions)?(function mergeMeasures(parentMeasures,childMeasures){var _a;for(const field of util_keys(childMeasures)){const ops=childMeasures[field];for(const op of util_keys(ops))field in parentMeasures?parentMeasures[field][op]=new Set([...(_a=parentMeasures[field][op],null!=_a?_a:[]),...ops[op]]):parentMeasures[field]={[op]:ops[op]}}}(this.measures,other.measures),!0):(function log_debug(...args){log_current.debug(...args)}("different dimensions, cannot merge"),!1)}addDimensions(fields){fields.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...util_keys(this.measures)])}producedFields(){const out=new Set;for(const field of util_keys(this.measures))for(const op of util_keys(this.measures[field])){const m=this.measures[field][op];0===m.size?out.add(`${op}_${field}`):m.forEach(out.add,out)}return out}hash(){return`Aggregate ${util_hash({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const ops=[],fields=[],as=[];for(const field of util_keys(this.measures))for(const op of util_keys(this.measures[field]))for(const alias of this.measures[field][op])as.push(alias),ops.push(op),fields.push("*"===field?null:replacePathInField(field));return{type:"aggregate",groupby:[...this.dimensions],ops:ops,fields:fields,as:as}}}class facet_FacetNode extends DataFlowNode{constructor(parent,model,name,data){super(parent),this.model=model,this.name=name,this.data=data;for(const channel of FACET_CHANNELS){const fieldDef=model.facet[channel];if(fieldDef){const{bin:bin,sort:sort}=fieldDef;this[channel]=Object.assign({name:model.getName(`${channel}_domain`),fields:[vgField(fieldDef),...isBinning(bin)?[vgField(fieldDef,{binSuffix:"end"})]:[]]},isSortField(sort)?{sortField:sort}:Object(vega_util.A)(sort)?{sortIndexField:sortArrayIndexField(fieldDef,channel)}:{})}}this.childModel=model.child}hash(){let out="Facet";for(const channel of FACET_CHANNELS)this[channel]&&(out+=` ${channel.charAt(0)}:${util_hash(this[channel])}`);return out}get fields(){var _a;const f=[];for(const channel of FACET_CHANNELS)(null===(_a=this[channel])||void 0===_a?void 0:_a.fields)&&f.push(...this[channel].fields);return f}dependentFields(){const depFields=new Set(this.fields);for(const channel of FACET_CHANNELS)this[channel]&&(this[channel].sortField&&depFields.add(this[channel].sortField.field),this[channel].sortIndexField&&depFields.add(this[channel].sortIndexField));return depFields}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const childIndependentFieldsWithStep={};for(const channel of["x","y"]){const childScaleComponent=this.childModel.component.scales[channel];if(childScaleComponent&&!childScaleComponent.merged){const type=childScaleComponent.get("type"),range=childScaleComponent.get("range");if(hasDiscreteDomain(type)&&isVgRangeStep(range)){const field=getFieldFromDomain(assembleDomain(this.childModel,channel));field?childIndependentFieldsWithStep[channel]=field:log_warn(`Unknown field for ${channel}. Cannot calculate view size.`)}}}return childIndependentFieldsWithStep}assembleRowColumnHeaderData(channel,crossedDataName,childIndependentFieldsWithStep){const childChannel={row:"y",column:"x"}[channel],fields=[],ops=[],as=[];childIndependentFieldsWithStep&&childIndependentFieldsWithStep[childChannel]&&(crossedDataName?(fields.push(`distinct_${childIndependentFieldsWithStep[childChannel]}`),ops.push("max")):(fields.push(childIndependentFieldsWithStep[childChannel]),ops.push("distinct")),as.push(`distinct_${childIndependentFieldsWithStep[childChannel]}`));const{sortField:sortField,sortIndexField:sortIndexField}=this[channel];if(sortField){const{op:op=DEFAULT_SORT_OP,field:field}=sortField;fields.push(field),ops.push(op),as.push(vgField(sortField,{forAs:!0}))}else sortIndexField&&(fields.push(sortIndexField),ops.push("max"),as.push(sortIndexField));return{name:this[channel].name,source:null!=crossedDataName?crossedDataName:this.data,transform:[Object.assign({type:"aggregate",groupby:this[channel].fields},fields.length?{fields:fields,ops:ops,as:as}:{})]}}assembleFacetHeaderData(childIndependentFieldsWithStep){var _a,_b;const{columns:columns}=this.model.layout,{layoutHeaders:layoutHeaders}=this.model.component,data=[],hasSharedAxis={};for(const headerChannel of HEADER_CHANNELS){for(const headerType of HEADER_TYPES){const headers=null!=(_a=layoutHeaders[headerChannel]&&layoutHeaders[headerChannel][headerType])?_a:[];for(const header of headers)if((null===(_b=header.axes)||void 0===_b?void 0:_b.length)>0){hasSharedAxis[headerChannel]=!0;break}}if(hasSharedAxis[headerChannel]){const cardinality=`length(data("${this.facet.name}"))`,stop="row"===headerChannel?columns?{signal:`ceil(${cardinality} / ${columns})`}:1:columns?{signal:`min(${cardinality}, ${columns})`}:{signal:cardinality};data.push({name:`${this.facet.name}_${headerChannel}`,transform:[{type:"sequence",start:0,stop:stop}]})}}const{row:row,column:column}=hasSharedAxis;return(row||column)&&data.unshift(this.assembleRowColumnHeaderData("facet",null,childIndependentFieldsWithStep)),data}assemble(){var _a,_b;const data=[];let crossedDataName=null;const childIndependentFieldsWithStep=this.getChildIndependentFieldsWithStep(),{column:column,row:row,facet:facet}=this;if(column&&row&&(childIndependentFieldsWithStep.x||childIndependentFieldsWithStep.y)){crossedDataName=`cross_${this.column.name}_${this.row.name}`;const fields=[].concat(null!=(_a=childIndependentFieldsWithStep.x)?_a:[],null!=(_b=childIndependentFieldsWithStep.y)?_b:[]),ops=fields.map(()=>"distinct");data.push({name:crossedDataName,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:fields,ops:ops}]})}for(const channel of[COLUMN,ROW])this[channel]&&data.push(this.assembleRowColumnHeaderData(channel,crossedDataName,childIndependentFieldsWithStep));if(facet){const facetData=this.assembleFacetHeaderData(childIndependentFieldsWithStep);facetData&&data.push(...facetData)}return data}}function unquote(pattern){return"'"===pattern[0]&&"'"===pattern[pattern.length-1]||'"'===pattern[0]&&'"'===pattern[pattern.length-1]?pattern.slice(1,-1):pattern}function getImplicitFromFilterTransform(transform){const implicit={};return function forEachLeaf(op,fn){if(isLogicalNot(op))forEachLeaf(op.not,fn);else if(isLogicalAnd(op))for(const subop of op.and)forEachLeaf(subop,fn);else if(isLogicalOr(op))for(const subop of op.or)forEachLeaf(subop,fn);else fn(op)}(transform.filter,filter=>{var _a;if(isFieldPredicate(filter)){let val=null;isFieldEqualPredicate(filter)?val=filter.equal:isFieldRangePredicate(filter)?val=filter.range[0]:isFieldOneOfPredicate(filter)&&(val=(_a=filter.oneOf,null!=_a?_a:filter.in)[0]),val&&(isDateTime(val)?implicit[filter.field]="date":Object(vega_util.E)(val)?implicit[filter.field]="number":Object(vega_util.H)(val)&&(implicit[filter.field]="string")),filter.timeUnit&&(implicit[filter.field]="date")}}),implicit}function getImplicitFromEncoding(model){const implicit={};function add(fieldDef){isTimeFormatFieldDef(fieldDef)?implicit[fieldDef.field]="date":"quantitative"===fieldDef.type&&function isMinMaxOp(aggregate){return Object(vega_util.H)(aggregate)&&util_contains(["min","max"],aggregate)}(fieldDef.aggregate)?implicit[fieldDef.field]="number":accessPathDepth(fieldDef.field)>1?fieldDef.field in implicit||(implicit[fieldDef.field]="flatten"):isScaleFieldDef(fieldDef)&&isSortField(fieldDef.sort)&&accessPathDepth(fieldDef.sort.field)>1&&(fieldDef.sort.field in implicit||(implicit[fieldDef.sort.field]="flatten"))}if((isUnitModel(model)||isFacetModel(model))&&model.forEachFieldDef((fieldDef,channel)=>{if(isTypedFieldDef(fieldDef))add(fieldDef);else{const mainChannel=getMainRangeChannel(channel),mainFieldDef=model.fieldDef(mainChannel);add(Object.assign(Object.assign({},fieldDef),{type:mainFieldDef.type}))}}),isUnitModel(model)){const{mark:mark,markDef:markDef,encoding:encoding}=model;if(isPathMark(mark)&&!model.encoding.order){const dimensionChannelDef=encoding["horizontal"===markDef.orient?"y":"x"];!isFieldDef(dimensionChannelDef)||"quantitative"!==dimensionChannelDef.type||dimensionChannelDef.field in implicit||(implicit[dimensionChannelDef.field]="number")}}return implicit}class formatparse_ParseNode extends DataFlowNode{constructor(parent,parse){super(parent),this._parse=parse}clone(){return new formatparse_ParseNode(null,duplicate(this._parse))}hash(){return`Parse ${util_hash(this._parse)}`}static makeExplicit(parent,model,ancestorParse){let explicit={};const data=model.data;return!isGenerator(data)&&data&&data.format&&data.format.parse&&(explicit=data.format.parse),this.makeWithAncestors(parent,explicit,{},ancestorParse)}static makeWithAncestors(parent,explicit,implicit,ancestorParse){for(const field of util_keys(implicit)){const parsedAs=ancestorParse.getWithExplicit(field);void 0!==parsedAs.value&&(parsedAs.explicit||parsedAs.value===implicit[field]||"derived"===parsedAs.value||"flatten"===implicit[field]?delete implicit[field]:log_warn(message.differentParse(field,implicit[field],parsedAs.value)))}for(const field of util_keys(explicit)){const parsedAs=ancestorParse.get(field);void 0!==parsedAs&&(parsedAs===explicit[field]?delete explicit[field]:log_warn(message.differentParse(field,explicit[field],parsedAs)))}const parse=new split_Split(explicit,implicit);ancestorParse.copyAll(parse);const p={};for(const key of util_keys(parse.combine())){const val=parse.get(key);null!==val&&(p[key]=val)}return 0===util_keys(p).length||ancestorParse.parseNothing?null:new formatparse_ParseNode(parent,p)}get parse(){return this._parse}merge(other){this._parse=Object.assign(Object.assign({},this._parse),other.parse),other.remove()}assembleFormatParse(){const formatParse={};for(const field of util_keys(this._parse)){const p=this._parse[field];1===accessPathDepth(field)&&(formatParse[field]=p)}return formatParse}producedFields(){return new Set(util_keys(this._parse))}dependentFields(){return new Set(util_keys(this._parse))}assembleTransforms(onlyNested=!1){return util_keys(this._parse).filter(field=>!onlyNested||accessPathDepth(field)>1).map(field=>{const expr=function formatparse_parseExpression(field,parse){const f=accessPathWithDatum(field);if("number"===parse)return`toNumber(${f})`;if("boolean"===parse)return`toBoolean(${f})`;if("string"===parse)return`toString(${f})`;if("date"===parse)return`toDate(${f})`;if("flatten"===parse)return f;if(0===parse.indexOf("date:")){return`timeParse(${f},'${unquote(parse.slice(5,parse.length))}')`}if(0===parse.indexOf("utc:")){return`utcParse(${f},'${unquote(parse.slice(4,parse.length))}')`}return log_warn(message.unrecognizedParse(parse)),null}(field,this._parse[field]);return expr?{type:"formula",expr:expr,as:removePathFromField(field)}:null}).filter(t=>null!==t)}}class joinaggregate_JoinAggregateTransformNode extends DataFlowNode{constructor(parent,transform){super(parent),this.transform=transform}clone(){return new joinaggregate_JoinAggregateTransformNode(null,duplicate(this.transform))}addDimensions(fields){this.transform.groupby=unique(this.transform.groupby.concat(fields),d=>d)}dependentFields(){const out=new Set;return this.transform.groupby&&this.transform.groupby.forEach(f=>out.add(f)),this.transform.joinaggregate.map(w=>w.field).filter(f=>void 0!==f).forEach(f=>out.add(f)),out}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(joinAggregateFieldDef){var _a;return null!=(_a=joinAggregateFieldDef.as)?_a:vgField(joinAggregateFieldDef)}hash(){return`JoinAggregateTransform ${util_hash(this.transform)}`}assemble(){const fields=[],ops=[],as=[];for(const joinaggregate of this.transform.joinaggregate)ops.push(joinaggregate.op),as.push(this.getDefaultName(joinaggregate)),fields.push(void 0===joinaggregate.field?null:joinaggregate.field);const groupby=this.transform.groupby;return Object.assign({type:"joinaggregate",as:as,ops:ops,fields:fields},void 0!==groupby?{groupby:groupby}:{})}}class stack_StackNode extends DataFlowNode{constructor(parent,stack){super(parent),this._stack=stack}clone(){return new stack_StackNode(null,duplicate(this._stack))}static makeFromTransform(parent,stackTransform){const{stack:stack,groupby:groupby,as:as,offset:offset="zero"}=stackTransform,sortFields=[],sortOrder=[];if(void 0!==stackTransform.sort)for(const sortField of stackTransform.sort)sortFields.push(sortField.field),sortOrder.push(getFirstDefined(sortField.order,"ascending"));const sort={field:sortFields,order:sortOrder};let normalizedAs;return normalizedAs=function isValidAsArray(as){return Object(vega_util.A)(as)&&as.every(s=>Object(vega_util.H)(s))&&as.length>1}(as)?as:Object(vega_util.H)(as)?[as,as+"_end"]:[stackTransform.stack+"_start",stackTransform.stack+"_end"],new stack_StackNode(parent,{stackField:stack,groupby:groupby,offset:offset,sort:sort,facetby:[],as:normalizedAs})}static makeFromEncoding(parent,model){const stackProperties=model.stack,{encoding:encoding}=model;if(!stackProperties)return null;let dimensionFieldDef;if(stackProperties.groupbyChannel){dimensionFieldDef=getTypedFieldDef(encoding[stackProperties.groupbyChannel])}const stackby=function getStackByFields(model){return model.stack.stackBy.reduce((fields,by)=>{const _field=vgField(by.fieldDef);return _field&&fields.push(_field),fields},[])}(model),orderDef=model.encoding.order;let sort;return sort=Object(vega_util.A)(orderDef)||isFieldDef(orderDef)?sortParams(orderDef):stackby.reduce((s,field)=>(s.field.push(field),s.order.push("descending"),s),{field:[],order:[]}),new stack_StackNode(parent,{dimensionFieldDef:dimensionFieldDef,stackField:model.vgField(stackProperties.fieldChannel),facetby:[],stackby:stackby,sort:sort,offset:stackProperties.offset,impute:stackProperties.impute,as:[model.vgField(stackProperties.fieldChannel,{suffix:"start",forAs:!0}),model.vgField(stackProperties.fieldChannel,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(fields){this._stack.facetby.push(...fields)}dependentFields(){const out=new Set;return out.add(this._stack.stackField),this.getGroupbyFields().forEach(f=>out.add(f)),this._stack.facetby.forEach(f=>out.add(f)),this._stack.sort.field.forEach(f=>out.add(f)),out}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${util_hash(this._stack)}`}getGroupbyFields(){const{dimensionFieldDef:dimensionFieldDef,impute:impute,groupby:groupby}=this._stack;return dimensionFieldDef?dimensionFieldDef.bin?impute?[vgField(dimensionFieldDef,{binSuffix:"mid"})]:[vgField(dimensionFieldDef,{}),vgField(dimensionFieldDef,{binSuffix:"end"})]:[vgField(dimensionFieldDef)]:null!=groupby?groupby:[]}assemble(){const transform=[],{facetby:facetby,dimensionFieldDef:dimensionFieldDef,stackField:field,stackby:stackby,sort:sort,offset:offset,impute:impute,as:as}=this._stack;if(impute&&dimensionFieldDef){const{band:band=.5,bin:bin}=dimensionFieldDef;bin&&transform.push({type:"formula",expr:`${band}*`+vgField(dimensionFieldDef,{expr:"datum"})+`+${1-band}*`+vgField(dimensionFieldDef,{expr:"datum",binSuffix:"end"}),as:vgField(dimensionFieldDef,{binSuffix:"mid",forAs:!0})}),transform.push({type:"impute",field:field,groupby:[...stackby,...facetby],key:vgField(dimensionFieldDef,{binSuffix:"mid"}),method:"value",value:0})}return transform.push({type:"stack",groupby:[...this.getGroupbyFields(),...facetby],field:field,sort:sort,as:as,offset:offset}),transform}}class window_WindowTransformNode extends DataFlowNode{constructor(parent,transform){super(parent),this.transform=transform}clone(){return new window_WindowTransformNode(null,duplicate(this.transform))}addDimensions(fields){this.transform.groupby=unique(this.transform.groupby.concat(fields),d=>d)}dependentFields(){var _a,_b;const out=new Set;return(_a=this.transform.groupby,null!=_a?_a:[]).forEach(f=>out.add(f)),(_b=this.transform.sort,null!=_b?_b:[]).forEach(m=>out.add(m.field)),this.transform.window.map(w=>w.field).filter(f=>void 0!==f).forEach(f=>out.add(f)),out}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(windowFieldDef){var _a;return null!=(_a=windowFieldDef.as)?_a:vgField(windowFieldDef)}hash(){return`WindowTransform ${util_hash(this.transform)}`}assemble(){var _a;const fields=[],ops=[],as=[],params=[];for(const window of this.transform.window)ops.push(window.op),as.push(this.getDefaultName(window)),params.push(void 0===window.param?null:window.param),fields.push(void 0===window.field?null:window.field);const frame=this.transform.frame,groupby=this.transform.groupby;if(frame&&null===frame[0]&&null===frame[1]&&ops.every(o=>isAggregateOp(o)))return Object.assign({type:"joinaggregate",as:as,ops:ops,fields:fields},void 0!==groupby?{groupby:groupby}:{});const sortFields=[],sortOrder=[];if(void 0!==this.transform.sort)for(const sortField of this.transform.sort)sortFields.push(sortField.field),sortOrder.push(null!=(_a=sortField.order)?_a:"ascending");const sort={field:sortFields,order:sortOrder},ignorePeers=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:params,as:as,ops:ops,fields:fields,sort:sort},void 0!==ignorePeers?{ignorePeers:ignorePeers}:{}),void 0!==groupby?{groupby:groupby}:{}),void 0!==frame?{frame:frame}:{})}}class identifier_IdentifierNode extends DataFlowNode{clone(){return new identifier_IdentifierNode(null)}constructor(parent){super(parent)}dependentFields(){return new Set}producedFields(){return new Set([SELECTION_ID])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:SELECTION_ID}}}class optimizers_MoveParseUp extends BottomUpOptimizer{run(node){const parent=node.parent;if(node instanceof formatparse_ParseNode){if(isDataSourceNode(parent))return this.flags;if(parent.numChildren()>1)return this.setContinue(),this.flags;if(parent instanceof formatparse_ParseNode)this.setMutated(),parent.merge(node);else{if(fieldIntersection(parent.producedFields(),node.dependentFields()))return this.setContinue(),this.flags;this.setMutated(),node.swapWithParent()}}return this.setContinue(),this.flags}}class optimizers_MergeIdenticalNodes extends TopDownOptimizer{mergeNodes(parent,nodes){const mergedNode=nodes.shift();for(const node of nodes)parent.removeChild(node),node.parent=mergedNode,node.remove()}run(node){const hashes=node.children.map(x=>x.hash()),buckets={};for(let i=0;i<hashes.length;i++)void 0===buckets[hashes[i]]?buckets[hashes[i]]=[node.children[i]]:buckets[hashes[i]].push(node.children[i]);for(const k of util_keys(buckets))buckets[k].length>1&&(this.setMutated(),this.mergeNodes(node,buckets[k]));for(const child of node.children)this.run(child);return this.mutatedFlag}}class optimizers_RemoveUnusedSubtrees extends BottomUpOptimizer{run(node){return node instanceof dataflow_OutputNode||node.numChildren()>0||node instanceof facet_FacetNode?this.flags:(this.setMutated(),node.remove(),this.flags)}}class optimizers_RemoveDuplicateTimeUnits extends BottomUpOptimizer{constructor(){super(...arguments),this.fields=new Set,this.prev=null}run(node){if(this.setContinue(),node instanceof timeunit_TimeUnitNode){const pfields=node.producedFields();hasIntersection(pfields,this.fields)?(this.setMutated(),this.prev.remove()):this.fields=new Set([...this.fields,...pfields]),this.prev=node}return this.flags}reset(){this.fields.clear()}}class optimizers_MergeTimeUnits extends BottomUpOptimizer{run(node){this.setContinue();const timeUnitChildren=node.parent.children.filter(x=>x instanceof timeunit_TimeUnitNode),combination=timeUnitChildren.pop();for(const timeUnit of timeUnitChildren)this.setMutated(),combination.merge(timeUnit);return this.flags}}function moveFacetDown(node){if(node instanceof facet_FacetNode)if(1!==node.numChildren()||node.children[0]instanceof dataflow_OutputNode){const facetMain=node.model.component.data.main;!function moveMainDownToFacet(node){if(node instanceof dataflow_OutputNode&&node.type===MAIN&&1===node.numChildren()){const child=node.children[0];child instanceof facet_FacetNode||(child.swapWithParent(),moveMainDownToFacet(node))}}(facetMain);const cloner=function cloneSubtree(facet){return function clone(node){if(!(node instanceof facet_FacetNode)){const copy=node.clone();if(copy instanceof dataflow_OutputNode){const newName=FACET_SCALE_PREFIX+copy.getSource();copy.setSource(newName),facet.model.component.data.outputNodes[newName]=copy}else(copy instanceof aggregate_AggregateNode||copy instanceof stack_StackNode||copy instanceof window_WindowTransformNode||copy instanceof joinaggregate_JoinAggregateTransformNode)&&copy.addDimensions(facet.fields);return node.children.flatMap(clone).forEach(n=>n.parent=copy),[copy]}return node.children.flatMap(clone)}}(node),copy=node.children.map(cloner).flat();for(const c of copy)c.parent=facetMain}else{const child=node.children[0];(child instanceof aggregate_AggregateNode||child instanceof stack_StackNode||child instanceof window_WindowTransformNode||child instanceof joinaggregate_JoinAggregateTransformNode)&&child.addDimensions(node.fields),child.swapWithParent(),moveFacetDown(node)}else node.children.map(moveFacetDown)}class optimizers_RemoveUnnecessaryOutputNodes extends TopDownOptimizer{constructor(){super()}run(node){node instanceof dataflow_OutputNode&&!node.isRequired()&&(this.setMutated(),node.remove());for(const child of node.children)this.run(child);return this.mutatedFlag}}class optimizers_RemoveUnnecessaryIdentifierNodes extends TopDownOptimizer{constructor(model){super(),this.requiresSelectionId=model&&requiresSelectionId(model)}run(node){node instanceof identifier_IdentifierNode&&(this.requiresSelectionId&&(isDataSourceNode(node.parent)||node.parent instanceof aggregate_AggregateNode||node.parent instanceof formatparse_ParseNode)||(this.setMutated(),node.remove()));for(const child of node.children)this.run(child);return this.mutatedFlag}}class optimizers_MergeParse extends BottomUpOptimizer{run(node){const parent=node.parent,originalChildren=[...parent.children],parseChildren=parent.children.filter(child=>child instanceof formatparse_ParseNode);if(parent.numChildren()>1&&parseChildren.length>=1){const commonParse={},conflictingParse=new Set;for(const parseNode of parseChildren){const parse=parseNode.parse;for(const k of util_keys(parse))k in commonParse?commonParse[k]!==parse[k]&&conflictingParse.add(k):commonParse[k]=parse[k]}for(const field of conflictingParse)delete commonParse[field];if(0!==util_keys(commonParse).length){this.setMutated();const mergedParseNode=new formatparse_ParseNode(parent,commonParse);for(const childNode of originalChildren){if(childNode instanceof formatparse_ParseNode)for(const key of util_keys(commonParse))delete childNode.parse[key];parent.removeChild(childNode),childNode.parent=mergedParseNode,childNode instanceof formatparse_ParseNode&&0===util_keys(childNode.parse).length&&childNode.remove()}}}return this.setContinue(),this.flags}}class optimizers_MergeAggregates extends BottomUpOptimizer{run(node){const parent=node.parent,aggChildren=parent.children.filter(child=>child instanceof aggregate_AggregateNode),groupedAggregates={};for(const agg of aggChildren){const groupBys=util_hash(agg.groupBy);groupBys in groupedAggregates||(groupedAggregates[groupBys]=[]),groupedAggregates[groupBys].push(agg)}for(const group of util_keys(groupedAggregates)){const mergeableAggs=groupedAggregates[group];if(mergeableAggs.length>1){const mergedAggs=mergeableAggs.pop();for(const agg of mergeableAggs)mergedAggs.merge(agg)&&(parent.removeChild(agg),agg.parent=mergedAggs,agg.remove(),this.setMutated())}}return this.setContinue(),this.flags}}class optimizers_MergeBins extends BottomUpOptimizer{constructor(model){super(),this.model=model}run(node){const parent=node.parent,moveBinsUp=!(isDataSourceNode(parent)||parent instanceof filter_FilterNode||parent instanceof formatparse_ParseNode||parent instanceof identifier_IdentifierNode),promotableBins=[],remainingBins=[];for(const child of parent.children)child instanceof bin_BinNode&&(moveBinsUp&&!fieldIntersection(parent.producedFields(),child.dependentFields())?promotableBins.push(child):remainingBins.push(child));if(promotableBins.length>0){const promotedBin=promotableBins.pop();for(const bin of promotableBins)promotedBin.merge(bin,this.model.renameSignal.bind(this.model));this.setMutated(),parent instanceof bin_BinNode?parent.merge(promotedBin,this.model.renameSignal.bind(this.model)):promotedBin.swapWithParent()}if(remainingBins.length>1){const remainingBin=remainingBins.pop();for(const bin of remainingBins)remainingBin.merge(bin,this.model.renameSignal.bind(this.model));this.setMutated()}return this.setContinue(),this.flags}}class optimizers_MergeOutputs extends BottomUpOptimizer{run(node){const parent=node.parent,children=[...parent.children];if(!some(children,child=>child instanceof dataflow_OutputNode)||parent.numChildren()<=1)return this.setContinue(),this.flags;const otherChildren=[];let mainOutput;for(const child of children)if(child instanceof dataflow_OutputNode){let lastOutput=child;for(;1===lastOutput.numChildren();){const theChild=lastOutput.children[0];if(!(theChild instanceof dataflow_OutputNode))break;lastOutput=theChild}otherChildren.push(...lastOutput.children),mainOutput?(parent.removeChild(child),child.parent=mainOutput.parent,mainOutput.parent.removeChild(mainOutput),mainOutput.parent=lastOutput,this.setMutated()):mainOutput=lastOutput}else otherChildren.push(child);if(otherChildren.length){this.setMutated();for(const child of otherChildren)child.parent.removeChild(child),child.parent=mainOutput}return this.setContinue(),this.flags}}const FACET_SCALE_PREFIX="scale_",MAX_OPTIMIZATION_RUNS=5;function getLeaves(roots){const leaves=[];return roots.forEach((function append(node){0===node.numChildren()?leaves.push(node):node.children.forEach(append)})),leaves}function isTrue(x){return x}function runOptimizer(optimizer,nodes){return nodes.map(node=>{if(optimizer instanceof BottomUpOptimizer){const runFlags=optimizer.optimizeNextFromLeaves(node);return optimizer.reset(),runFlags}return optimizer.run(node)}).some(isTrue)}function optimizationDataflowHelper(dataComponent,model){let roots=dataComponent.sources;const mutatedFlags=new Set;return mutatedFlags.add(runOptimizer(new optimizers_RemoveUnnecessaryOutputNodes,roots)),mutatedFlags.add(runOptimizer(new optimizers_RemoveUnnecessaryIdentifierNodes(model),roots)),roots=roots.filter(r=>r.numChildren()>0),mutatedFlags.add(runOptimizer(new optimizers_RemoveUnusedSubtrees,getLeaves(roots))),roots=roots.filter(r=>r.numChildren()>0),mutatedFlags.add(runOptimizer(new optimizers_MoveParseUp,getLeaves(roots))),mutatedFlags.add(runOptimizer(new optimizers_MergeBins(model),getLeaves(roots))),mutatedFlags.add(runOptimizer(new optimizers_RemoveDuplicateTimeUnits,getLeaves(roots))),mutatedFlags.add(runOptimizer(new optimizers_MergeParse,getLeaves(roots))),mutatedFlags.add(runOptimizer(new optimizers_MergeAggregates,getLeaves(roots))),mutatedFlags.add(runOptimizer(new optimizers_MergeTimeUnits,getLeaves(roots))),mutatedFlags.add(runOptimizer(new optimizers_MergeIdenticalNodes,roots)),mutatedFlags.add(runOptimizer(new optimizers_MergeOutputs,getLeaves(roots))),dataComponent.sources=roots,mutatedFlags.has(!0)}class SignalRefWrapper{constructor(exprGenerator){Object.defineProperty(this,"signal",{enumerable:!0,get:exprGenerator})}static fromName(rename,signalName){return new SignalRefWrapper(()=>rename(signalName))}}function domain_parseScaleDomain(model){isUnitModel(model)?function parseUnitScaleDomain(model){const localScaleComponents=model.component.scales;util_keys(localScaleComponents).forEach(channel=>{const domains=function parseDomainForChannel(model,channel){const scaleType=model.getScaleComponent(channel).get("type"),domain=function normalizeUnaggregatedDomain(domain,fieldDef,scaleType,scaleConfig){if("unaggregated"===domain){const{valid:valid,reason:reason}=canUseUnaggregatedDomain(fieldDef,scaleType);if(!valid)return void log_warn(reason)}else if(void 0===domain&&scaleConfig.useUnaggregatedDomain){const{valid:valid}=canUseUnaggregatedDomain(fieldDef,scaleType);if(valid)return"unaggregated"}return domain}(model.scaleDomain(channel),model.fieldDef(channel),scaleType,model.config.scale);domain!==model.scaleDomain(channel)&&(model.specifiedScales[channel]=Object.assign(Object.assign({},model.specifiedScales[channel]),{domain:domain}));if("x"===channel&&model.channelHasField("x2"))return model.channelHasField("x")?mergeValuesWithExplicit(parseSingleChannelDomain(scaleType,domain,model,"x"),parseSingleChannelDomain(scaleType,domain,model,"x2"),"domain","scale",domainsTieBreaker):parseSingleChannelDomain(scaleType,domain,model,"x2");if("y"===channel&&model.channelHasField("y2"))return model.channelHasField("y")?mergeValuesWithExplicit(parseSingleChannelDomain(scaleType,domain,model,"y"),parseSingleChannelDomain(scaleType,domain,model,"y2"),"domain","scale",domainsTieBreaker):parseSingleChannelDomain(scaleType,domain,model,"y2");return parseSingleChannelDomain(scaleType,domain,model,channel)}(model,channel);if(localScaleComponents[channel].setWithExplicit("domains",domains),function parseSelectionDomain(model,channel){const scale=model.component.scales[channel],spec=model.specifiedScales[channel].domain,bin=model.fieldDef(channel).bin,domain=isSelectionDomain(spec)&&spec,extent=isBinParams(bin)&&isSelectionExtent(bin.extent)&&bin.extent;(domain||extent)&&scale.set("selectionExtent",null!=domain?domain:extent,!0)}(model,channel),model.component.data.isFaceted){let facetParent=model;for(;!isFacetModel(facetParent)&&facetParent.parent;)facetParent=facetParent.parent;if("shared"===facetParent.component.resolve.scale[channel])for(const domain of domains.value)isDataRefDomain(domain)&&(domain.data=FACET_SCALE_PREFIX+domain.data.replace(FACET_SCALE_PREFIX,""))}})}(model):function parseNonUnitScaleDomain(model){for(const child of model.children)domain_parseScaleDomain(child);const localScaleComponents=model.component.scales;util_keys(localScaleComponents).forEach(channel=>{let domains,selectionExtent=null;for(const child of model.children){const childComponent=child.component.scales[channel];if(childComponent){domains=void 0===domains?childComponent.getWithExplicit("domains"):mergeValuesWithExplicit(domains,childComponent.getWithExplicit("domains"),"domains","scale",domainsTieBreaker);const se=childComponent.get("selectionExtent");selectionExtent&&se&&selectionExtent.selection!==se.selection&&log_warn("The same selection must be used to override scale domains in a layered view."),selectionExtent=se}}localScaleComponents[channel].setWithExplicit("domains",domains),selectionExtent&&localScaleComponents[channel].set("selectionExtent",selectionExtent,!0)})}(model)}function parseSingleChannelDomain(scaleType,domain,model,channel){const fieldDef=model.fieldDef(channel);if(domain&&"unaggregated"!==domain&&!isSelectionDomain(domain)){const{type:type,timeUnit:timeUnit}=fieldDef;return makeExplicit("temporal"===type||timeUnit?function mapDomainToDataSignal(domain,type,timeUnit){return domain.map(v=>{return{signal:`{data: ${valueExpr(v,{timeUnit:timeUnit,type:type})}}`}})}(domain,type,timeUnit):[domain])}const stack=model.stack;if(stack&&channel===stack.fieldChannel){if("normalize"===stack.offset)return makeImplicit([[0,1]]);const data=model.requestDataName(MAIN);return makeImplicit([{data:data,field:model.vgField(channel,{suffix:"start"})},{data:data,field:model.vgField(channel,{suffix:"end"})}])}const sort=isScaleChannel(channel)?function domainSort(model,channel,scaleType){if(!hasDiscreteDomain(scaleType))return;const fieldDef=model.fieldDef(channel),sort=fieldDef.sort;if(isSortArray(sort))return{op:"min",field:sortArrayIndexField(fieldDef,channel),order:"ascending"};const isStacked=null!==model.stack;if(isSortField(sort))return normalizeSortField(sort,isStacked);if(isSortByEncoding(sort)){const{encoding:encoding,order:order}=sort,fieldDefToSortBy=model.fieldDef(encoding),{aggregate:aggregate,field:field}=fieldDefToSortBy;if(isArgminDef(aggregate)||isArgmaxDef(aggregate))return normalizeSortField({field:vgField(fieldDefToSortBy),order:order},isStacked);if(isAggregateOp(aggregate)||!aggregate)return normalizeSortField({op:aggregate,field:field,order:order},isStacked)}else{if("descending"===sort)return{op:"min",field:model.vgField(channel),order:"descending"};if(util_contains(["ascending",void 0],sort))return!0}return}(model,channel,scaleType):void 0;if("unaggregated"===domain){const data=model.requestDataName(MAIN),{field:field}=fieldDef;return makeImplicit([{data:data,field:vgField({field:field,aggregate:"min"})},{data:data,field:vgField({field:field,aggregate:"max"})}])}if(isBinning(fieldDef.bin)){if(hasDiscreteDomain(scaleType))return makeImplicit("bin-ordinal"===scaleType?[]:[{data:util_isBoolean(sort)?model.requestDataName(MAIN):model.requestDataName(RAW),field:model.vgField(channel,binRequiresRange(fieldDef,channel)?{binSuffix:"range"}:{}),sort:!0!==sort&&Object(vega_util.F)(sort)?sort:{field:model.vgField(channel,{}),op:"min"}}]);{const{bin:bin}=fieldDef;if(isBinning(bin)){const binSignal=getBinSignalName(model,fieldDef.field,bin);return makeImplicit([new SignalRefWrapper(()=>{const signal=model.getSignalName(binSignal);return`[${signal}.start, ${signal}.stop]`})])}return makeImplicit([{data:model.requestDataName(MAIN),field:model.vgField(channel,{})}])}}if(fieldDef.timeUnit&&util_contains(["time","utc"],scaleType)&&hasBand(channel,fieldDef,isUnitModel(model)?model.encoding[getSecondaryRangeChannel(channel)]:void 0,model.markDef,model.config)){const data=model.requestDataName(MAIN);return makeImplicit([{data:data,field:model.vgField(channel)},{data:data,field:model.vgField(channel,{suffix:"end"})}])}return makeImplicit(sort?[{data:util_isBoolean(sort)?model.requestDataName(MAIN):model.requestDataName(RAW),field:model.vgField(channel),sort:sort}]:[{data:model.requestDataName(MAIN),field:model.vgField(channel)}])}function normalizeSortField(sort,isStacked){const{op:op,field:field,order:order}=sort;return Object.assign(Object.assign({op:null!=op?op:isStacked?"sum":DEFAULT_SORT_OP},field?{field:replacePathInField(field)}:{}),order?{order:order}:{})}function canUseUnaggregatedDomain(fieldDef,scaleType){const{aggregate:aggregate,type:type}=fieldDef;return aggregate?Object(vega_util.H)(aggregate)&&!SHARED_DOMAIN_OP_INDEX[aggregate]?{valid:!1,reason:message.unaggregateDomainWithNonSharedDomainOp(aggregate)}:"quantitative"===type&&"log"===scaleType?{valid:!1,reason:message.unaggregatedDomainWithLogScale(fieldDef)}:{valid:!0}:{valid:!1,reason:message.unaggregateDomainHasNoEffectForRawField(fieldDef)}}function domainsTieBreaker(v1,v2,property,propertyOf){return v1.explicit&&v2.explicit&&log_warn(message.mergeConflictingDomainProperty(property,propertyOf,v1.value,v2.value)),{explicit:v1.explicit,value:[...v1.value,...v2.value]}}function getFieldFromDomain(domain){if(isDataRefDomain(domain)&&Object(vega_util.H)(domain.field))return domain.field;if(function isDataRefUnionedDomain(domain){return!Object(vega_util.A)(domain)&&("fields"in domain&&!("data"in domain))}(domain)){let field;for(const nonUnionDomain of domain.fields)if(isDataRefDomain(nonUnionDomain)&&Object(vega_util.H)(nonUnionDomain.field))if(field){if(field!==nonUnionDomain.field)return log_warn("Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."),field}else field=nonUnionDomain.field;return log_warn("Detected faceted independent scales that union domain of identical fields from different source detected. We will assume that this is the same field from a different fork of the same data source. However, if this is not case, the result view size maybe incorrect."),field}if(function isFieldRefUnionDomain(domain){return!Object(vega_util.A)(domain)&&("fields"in domain&&"data"in domain)}(domain)){log_warn("Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.");const field=domain.fields[0];return Object(vega_util.H)(field)?field:void 0}}function assembleDomain(model,channel){return function mergeDomains(domains){const uniqueDomains=unique(domains.map(domain=>{if(isDataRefDomain(domain)){const{sort:_s}=domain;return __rest(domain,["sort"])}return domain}),util_hash),sorts=unique(domains.map(d=>{if(isDataRefDomain(d)){const s=d.sort;return void 0===s||util_isBoolean(s)||("op"in s&&"count"===s.op&&delete s.field,"ascending"===s.order&&delete s.order),s}}).filter(s=>void 0!==s),util_hash);if(0===uniqueDomains.length)return;if(1===uniqueDomains.length){const domain=domains[0];if(isDataRefDomain(domain)&&sorts.length>0){let sort=sorts[0];return sorts.length>1&&(log_warn(message.MORE_THAN_ONE_SORT),sort=!0),Object.assign(Object.assign({},domain),{sort:sort})}return domain}const unionDomainSorts=unique(sorts.map(s=>util_isBoolean(s)||!("op"in s)||s.op in MULTIDOMAIN_SORT_OP_INDEX?s:(log_warn(message.domainSortDropped(s)),!0)),util_hash);let sort;1===unionDomainSorts.length?sort=unionDomainSorts[0]:unionDomainSorts.length>1&&(log_warn(message.MORE_THAN_ONE_SORT),sort=!0);const allData=unique(domains.map(d=>isDataRefDomain(d)?d.data:null),x=>x);if(1===allData.length&&null!==allData[0]){return Object.assign({data:allData[0],fields:uniqueDomains.map(d=>d.field)},sort?{sort:sort}:{})}return Object.assign({fields:uniqueDomains},sort?{sort:sort}:{})}(model.component.scales[channel].get("domains").map(domain=>(isDataRefDomain(domain)&&(domain.data=model.lookupDataSource(domain.data)),domain)))}function assembleScalesForModel(model){return util_keys(model.component.scales).reduce((scales,channel)=>{const scaleComponent=model.component.scales[channel];if(scaleComponent.merged)return scales;const scale=scaleComponent.combine(),{name:name,type:type,selectionExtent:selectionExtent,domains:_d,range:_r}=scale,otherScaleProps=__rest(scale,["name","type","selectionExtent","domains","range"]),range=function assembleScaleRange(scaleRange,scaleName,channel){if(("x"===channel||"y"===channel)&&isVgRangeStep(scaleRange))return{step:{signal:scaleName+"_step"}};return scaleRange}(scale.range,name,channel);let domainRaw;selectionExtent&&(domainRaw=function assembleSelectionScaleDomain(model,extent){const name=extent.selection;return{signal:parseSelectionBinExtent(model.getSelectionComponent(name,varName(name)),extent)}}(model,selectionExtent));const domain=assembleDomain(model,channel);return scales.push(Object.assign(Object.assign(Object.assign(Object.assign({name:name,type:type},domain?{domain:domain}:{}),domainRaw?{domainRaw:domainRaw}:{}),{range:range}),otherScaleProps)),scales},[])}class component_ScaleComponent extends split_Split{constructor(name,typeWithExplicit){super({},{name:name}),this.merged=!1,this.setWithExplicit("type",typeWithExplicit)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")||some(this.get("domains"),d=>Object(vega_util.A)(d)&&2===d.length&&d[0]<=0&&d[1]>=0)}}const RANGE_PROPERTIES=["range","scheme"];function range_getSizeType(channel){return"x"===channel?"width":"y"===channel?"height":void 0}function parseUnitScaleRange(model){const localScaleComponents=model.component.scales;SCALE_CHANNELS.forEach(channel=>{const localScaleCmpt=localScaleComponents[channel];if(!localScaleCmpt)return;const rangeWithExplicit=function parseRangeForChannel(channel,model){const specifiedScale=model.specifiedScales[channel],{size:size}=model,scaleType=model.getScaleComponent(channel).get("type");for(const property of RANGE_PROPERTIES)if(void 0!==specifiedScale[property]){const supportedByScaleType=scaleTypeSupportProperty(scaleType,property),channelIncompatability=channelScalePropertyIncompatability(channel,property);if(supportedByScaleType)if(channelIncompatability)log_warn(channelIncompatability);else switch(property){case"range":return makeExplicit(specifiedScale[property]);case"scheme":return makeExplicit(parseScheme(specifiedScale[property]))}else log_warn(message.scalePropertyNotWorkWithScaleType(scaleType,property,channel))}if(channel===channel_X||channel===channel_Y){const sizeChannel=channel===channel_X?"width":"height",sizeValue=size[sizeChannel];if(isStep(sizeValue)){if(hasDiscreteDomain(scaleType))return makeExplicit({step:sizeValue.step});log_warn(message.stepDropped(sizeChannel))}}return makeImplicit(function defaultRange(channel,model){const{size:size,config:config,mark:mark}=model,getSignalName=model.getSignalName.bind(model),{type:type}=model.fieldDef(channel),scaleType=model.getScaleComponent(channel).get("type"),{domain:domain}=model.specifiedScales[channel];switch(channel){case channel_X:case channel_Y:{if(util_contains(["point","band"],scaleType))if(channel!==channel_X||size.width){if(channel===channel_Y&&!size.height){const h=getViewConfigDiscreteSize(config.view,"height");if(isStep(h))return h}}else{const w=getViewConfigDiscreteSize(config.view,"width");if(isStep(w))return w}const sizeType=range_getSizeType(channel),sizeSignal=model.getName(sizeType);return channel===channel_Y&&hasContinuousDomain(scaleType)?[SignalRefWrapper.fromName(getSignalName,sizeSignal),0]:[0,SignalRefWrapper.fromName(getSignalName,sizeSignal)]}case SIZE:{const zero=model.component.scales[channel].get("zero"),rangeMin=function sizeRangeMin(mark,zero,config){if(zero)return 0;switch(mark){case"bar":case"tick":return config.scale.minBandSize;case"line":case"trail":case"rule":return config.scale.minStrokeWidth;case"text":return config.scale.minFontSize;case"point":case"square":case"circle":return config.scale.minSize}throw new Error(message.incompatibleChannel("size",mark))}(mark,zero,config),rangeMax=function sizeRangeMax(mark,size,model,config){const xyStepSignals={x:getBinStepSignal(model,"x"),y:getBinStepSignal(model,"y")};switch(mark){case"bar":case"tick":{if(void 0!==config.scale.maxBandSize)return config.scale.maxBandSize;const min=minXYStep(size,xyStepSignals,config.view);return Object(vega_util.E)(min)?min-1:new SignalRefWrapper(()=>`${min.signal} - 1`)}case"line":case"trail":case"rule":return config.scale.maxStrokeWidth;case"text":return config.scale.maxFontSize;case"point":case"square":case"circle":{if(config.scale.maxSize)return config.scale.maxSize;const pointStep=minXYStep(size,xyStepSignals,config.view);return Object(vega_util.E)(pointStep)?Math.pow(MAX_SIZE_RANGE_STEP_RATIO*pointStep,2):new SignalRefWrapper(()=>`pow(${MAX_SIZE_RANGE_STEP_RATIO} * ${pointStep.signal}, 2)`)}}throw new Error(message.incompatibleChannel("size",mark))}(mark,size,model,config);return isContinuousToDiscrete(scaleType)?function range_interpolateRange(rangeMin,rangeMax,cardinality){const f=()=>{const step=`(${isSignalRef(rangeMax)?rangeMax.signal:rangeMax} - ${rangeMin}) / (${cardinality} - 1)`;return`sequence(${rangeMin}, ${rangeMax} + ${step}, ${step})`};return isSignalRef(rangeMax)?new SignalRefWrapper(f):{signal:f()}}(rangeMin,rangeMax,function defaultContinuousToDiscreteCount(scaleType,config,domain,channel){switch(scaleType){case"quantile":return config.scale.quantileCount;case"quantize":return config.scale.quantizeCount;case"threshold":return void 0!==domain&&Object(vega_util.A)(domain)?domain.length+1:(log_warn(message.domainRequiredForThresholdScale(channel)),3)}}(scaleType,config,domain,channel)):[rangeMin,rangeMax]}case STROKEWIDTH:return[config.scale.minStrokeWidth,config.scale.maxStrokeWidth];case SHAPE:return"symbol";case COLOR:case FILL:case STROKE:return"ordinal"===scaleType?"nominal"===type?"category":"ordinal":"rect"===mark||"geoshape"===mark?"heatmap":"ramp";case OPACITY:case FILLOPACITY:case STROKEOPACITY:return[config.scale.minOpacity,config.scale.maxOpacity]}throw new Error(`Scale range undefined for channel ${channel}`)}(channel,model))}(channel,model);localScaleCmpt.setWithExplicit("range",rangeWithExplicit)})}function getBinStepSignal(model,channel){const fieldDef=model.fieldDef(channel);if(fieldDef&&fieldDef.bin&&isBinning(fieldDef.bin)){const binSignal=getBinSignalName(model,fieldDef.field,fieldDef.bin),sizeType=range_getSizeType(channel),sizeSignal=model.getName(sizeType);return new SignalRefWrapper(()=>{const updatedName=model.getSignalName(binSignal),binCount=`(${updatedName}.stop - ${updatedName}.start) / ${updatedName}.step`;return`${model.getSignalName(sizeSignal)} / (${binCount})`})}}function parseScheme(scheme){return function isExtendedScheme(scheme){return!Object(vega_util.H)(scheme)&&!!scheme.name}(scheme)?Object.assign({scheme:scheme.name},omit(scheme,["name"])):{scheme:scheme}}const MAX_SIZE_RANGE_STEP_RATIO=.95;function minXYStep(size,xyStepSignals,viewConfig){const widthStep=isStep(size.width)?size.width.step:getViewConfigDiscreteStep(viewConfig,"width"),heightStep=isStep(size.height)?size.height.step:getViewConfigDiscreteStep(viewConfig,"height");return xyStepSignals.x||xyStepSignals.y?new SignalRefWrapper(()=>{return`min(${[xyStepSignals.x?xyStepSignals.x.signal:widthStep,xyStepSignals.y?xyStepSignals.y.signal:heightStep].join(", ")})`}):Math.min(widthStep,heightStep)}function parseScaleProperty(model,property){isUnitModel(model)?function parseUnitScaleProperty(model,property){const localScaleComponents=model.component.scales;util_keys(localScaleComponents).forEach(channel=>{const specifiedScale=model.specifiedScales[channel],localScaleCmpt=localScaleComponents[channel],mergedScaleCmpt=model.getScaleComponent(channel),fieldDef=model.fieldDef(channel),config=model.config,specifiedValue=specifiedScale[property],sType=mergedScaleCmpt.get("type"),supportedByScaleType=scaleTypeSupportProperty(sType,property),channelIncompatability=channelScalePropertyIncompatability(channel,property);if(void 0!==specifiedValue&&(supportedByScaleType?channelIncompatability&&log_warn(channelIncompatability):log_warn(message.scalePropertyNotWorkWithScaleType(sType,property,channel))),supportedByScaleType&&void 0===channelIncompatability)if(void 0!==specifiedValue)localScaleCmpt.copyKeyFromObject(property,specifiedScale);else{const value=function getDefaultValue(property,model,channel,fieldDef,scaleType,scalePadding,scalePaddingInner,specifiedDomain,markDef,config){const scaleConfig=config.scale,{type:type,sort:sort}=fieldDef;switch(property){case"bins":return function properties_bins(model,fieldDef){const bin=fieldDef.bin;if(isBinning(bin)){const binSignal=getBinSignalName(model,fieldDef.field,bin);return new SignalRefWrapper(()=>model.getSignalName(binSignal))}if(bin_isBinned(bin)&&isBinParams(bin)&&void 0!==bin.step)return{step:bin.step};return}(model,fieldDef);case"interpolate":return function properties_interpolate(channel,type){if(util_contains([COLOR,FILL,STROKE],channel)&&"nominal"!==type)return"hcl";return}(channel,type);case"nice":return function properties_nice(scaleType,channel,fieldDef){if(fieldDef.bin||util_contains([ScaleType.TIME,ScaleType.UTC],scaleType))return;return!!util_contains([channel_X,channel_Y],channel)||void 0}(scaleType,channel,fieldDef);case"padding":return function properties_padding(channel,scaleType,scaleConfig,fieldDef,markDef,barConfig){if(util_contains([channel_X,channel_Y],channel)){if(isContinuousToContinuous(scaleType)){if(void 0!==scaleConfig.continuousPadding)return scaleConfig.continuousPadding;const{type:type,orient:orient}=markDef;if("bar"===type&&!fieldDef.bin&&!fieldDef.timeUnit&&("vertical"===orient&&"x"===channel||"horizontal"===orient&&"y"===channel))return barConfig.continuousBandSize}if(scaleType===ScaleType.POINT)return scaleConfig.pointPadding}return}(channel,scaleType,scaleConfig,fieldDef,markDef,config.bar);case"paddingInner":return function properties_paddingInner(paddingValue,channel,mark,scaleConfig){if(void 0!==paddingValue)return;if(util_contains([channel_X,channel_Y],channel)){const{bandPaddingInner:bandPaddingInner,barBandPaddingInner:barBandPaddingInner,rectBandPaddingInner:rectBandPaddingInner}=scaleConfig;return getFirstDefined(bandPaddingInner,"bar"===mark?barBandPaddingInner:rectBandPaddingInner)}return}(scalePadding,channel,markDef.type,scaleConfig);case"paddingOuter":return function properties_paddingOuter(paddingValue,channel,scaleType,mark,paddingInnerValue,scaleConfig){if(void 0!==paddingValue)return;if(util_contains([channel_X,channel_Y],channel)&&scaleType===ScaleType.BAND){const{bandPaddingOuter:bandPaddingOuter}=scaleConfig;return getFirstDefined(bandPaddingOuter,paddingInnerValue/2)}return}(scalePadding,channel,scaleType,markDef.type,scalePaddingInner,scaleConfig);case"reverse":return function properties_reverse(scaleType,sort){if(hasContinuousDomain(scaleType)&&"descending"===sort)return!0;return}(scaleType,sort);case"zero":return function properties_zero(channel,fieldDef,specifiedDomain,markDef,scaleType){if(specifiedDomain&&"unaggregated"!==specifiedDomain&&hasContinuousDomain(scaleType)){if(Object(vega_util.A)(specifiedDomain)){const first=specifiedDomain[0],last=specifiedDomain[specifiedDomain.length-1];if(first<=0&&last>=0)return!0}return!1}if("size"===channel&&"quantitative"===fieldDef.type&&!isContinuousToDiscrete(scaleType))return!0;if(!fieldDef.bin&&util_contains([channel_X,channel_Y],channel)){const{orient:orient,type:type}=markDef;return!util_contains(["bar","area","line","trail"],type)||!("horizontal"===orient&&"y"===channel||"vertical"===orient&&"x"===channel)}return!1}(channel,fieldDef,specifiedDomain,markDef,scaleType)}return scaleConfig[property]}(property,model,channel,fieldDef,mergedScaleCmpt.get("type"),mergedScaleCmpt.get("padding"),mergedScaleCmpt.get("paddingInner"),specifiedScale.domain,model.markDef,config);void 0!==value&&localScaleCmpt.set(property,value,!1)}})}(model,property):parseNonUnitScaleProperty(model,property)}function properties_parseScaleRange(model){isUnitModel(model)?parseUnitScaleRange(model):parseNonUnitScaleProperty(model,"range")}function parseNonUnitScaleProperty(model,property){const localScaleComponents=model.component.scales;for(const child of model.children)"range"===property?properties_parseScaleRange(child):parseScaleProperty(child,property);util_keys(localScaleComponents).forEach(channel=>{let valueWithExplicit;for(const child of model.children){const childComponent=child.component.scales[channel];if(childComponent){valueWithExplicit=mergeValuesWithExplicit(valueWithExplicit,childComponent.getWithExplicit(property),property,"scale",tieBreakByComparing((v1,v2)=>{switch(property){case"range":return v1.step&&v2.step?v1.step-v2.step:0}return 0}))}}localScaleComponents[channel].setWithExplicit(property,valueWithExplicit)})}function type_scaleType(specifiedScale,channel,fieldDef,mark){const defaultScaleType=function type_defaultType(channel,fieldDef,mark){switch(fieldDef.type){case"nominal":case"ordinal":return isColorChannel(channel)||"discrete"===rangeType(channel)?("shape"===channel&&"ordinal"===fieldDef.type&&log_warn(message.discreteChannelCannotEncode(channel,"ordinal")),"ordinal"):util_contains(["x","y"],channel)&&util_contains(["rect","bar","image","rule"],mark)?"band":"point";case"temporal":return isColorChannel(channel)?"time":"discrete"===rangeType(channel)?(log_warn(message.discreteChannelCannotEncode(channel,"temporal")),"ordinal"):"time";case"quantitative":return isColorChannel(channel)?isBinning(fieldDef.bin)?"bin-ordinal":"linear":"discrete"===rangeType(channel)?(log_warn(message.discreteChannelCannotEncode(channel,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(message.invalidFieldType(fieldDef.type))}(channel,fieldDef,mark),{type:type}=specifiedScale;return isScaleChannel(channel)?void 0!==type?channelSupportScaleType(channel,type)?scaleTypeSupportDataType(type,fieldDef.type)?type:(log_warn(message.scaleTypeNotWorkWithFieldDef(type,defaultScaleType)),defaultScaleType):(log_warn(message.scaleTypeNotWorkWithChannel(channel,type,defaultScaleType)),defaultScaleType):defaultScaleType:null}function parseScaleCore(model){isUnitModel(model)?model.component.scales=function parseUnitScaleCore(model){const{encoding:encoding,mark:mark}=model;return SCALE_CHANNELS.reduce((scaleComponents,channel)=>{let fieldDef,specifiedScale;const channelDef=encoding[channel];if(isFieldDef(channelDef)&&mark===GEOSHAPE&&channel===SHAPE&&channelDef.type===GEOJSON)return scaleComponents;if(isFieldDef(channelDef)?(fieldDef=channelDef,specifiedScale=channelDef.scale):hasConditionalFieldDef(channelDef)&&(fieldDef=channelDef.condition,specifiedScale=channelDef.condition.scale),fieldDef&&null!==specifiedScale&&!1!==specifiedScale){const sType=type_scaleType(specifiedScale=null!=specifiedScale?specifiedScale:{},channel,fieldDef,mark);scaleComponents[channel]=new component_ScaleComponent(model.scaleName(channel+"",!0),{value:sType,explicit:specifiedScale.type===sType})}return scaleComponents},{})}(model):model.component.scales=function parseNonUnitScaleCore(model){const scaleComponents=model.component.scales={},scaleTypeWithExplicitIndex={},resolve=model.component.resolve;for(const child of model.children)parseScaleCore(child),util_keys(child.component.scales).forEach(channel=>{var _a;if(resolve.scale[channel]=null!=(_a=resolve.scale[channel])?_a:defaultScaleResolve(channel,model),"shared"===resolve.scale[channel]){const explicitScaleType=scaleTypeWithExplicitIndex[channel],childScaleType=child.component.scales[channel].getWithExplicit("type");explicitScaleType?scaleCompatible(explicitScaleType.value,childScaleType.value)?scaleTypeWithExplicitIndex[channel]=mergeValuesWithExplicit(explicitScaleType,childScaleType,"type","scale",scaleTypeTieBreaker):(resolve.scale[channel]="independent",delete scaleTypeWithExplicitIndex[channel]):scaleTypeWithExplicitIndex[channel]=childScaleType}});for(const channel of util_keys(scaleTypeWithExplicitIndex)){const name=model.scaleName(channel,!0),typeWithExplicit=scaleTypeWithExplicitIndex[channel];scaleComponents[channel]=new component_ScaleComponent(name,typeWithExplicit);for(const child of model.children){const childScale=child.component.scales[channel];childScale&&(child.renameScale(childScale.get("name"),name),childScale.merged=!0)}}return scaleComponents}(model)}const scaleTypeTieBreaker=tieBreakByComparing((st1,st2)=>scaleTypePrecedence(st1)-scaleTypePrecedence(st2));class NameMap{constructor(){this.nameMap={}}rename(oldName,newName){this.nameMap[oldName]=newName}has(name){return void 0!==this.nameMap[name]}get(name){for(;this.nameMap[name]&&name!==this.nameMap[name];)name=this.nameMap[name];return name}}function isUnitModel(model){var _a;return"unit"===(null===(_a=model)||void 0===_a?void 0:_a.type)}function isFacetModel(model){var _a;return"facet"===(null===(_a=model)||void 0===_a?void 0:_a.type)}function isRepeatModel(model){var _a;return"repeat"===(null===(_a=model)||void 0===_a?void 0:_a.type)}function isConcatModel(model){var _a;return"concat"===(null===(_a=model)||void 0===_a?void 0:_a.type)}function isLayerModel(model){var _a;return"layer"===(null===(_a=model)||void 0===_a?void 0:_a.type)}class model_Model{constructor(spec,type,parent,parentGivenName,config,repeater,resolve,view){var _a,_b;this.type=type,this.parent=parent,this.config=config,this.repeater=repeater,this.view=view,this.children=[],this.correctDataNames=mark=>(mark.from&&mark.from.data&&(mark.from.data=this.lookupDataSource(mark.from.data)),mark.from&&mark.from.facet&&mark.from.facet.data&&(mark.from.facet.data=this.lookupDataSource(mark.from.facet.data)),mark),this.parent=parent,this.config=config,this.repeater=repeater,this.name=null!=(_a=spec.name)?_a:parentGivenName,this.title=isText(spec.title)?{text:spec.title}:spec.title,this.scaleNameMap=parent?parent.scaleNameMap:new NameMap,this.projectionNameMap=parent?parent.projectionNameMap:new NameMap,this.signalNameMap=parent?parent.signalNameMap:new NameMap,this.data=spec.data,this.description=spec.description,this.transforms=function normalizeTransform(transform){return transform.map(t=>isFilter(t)?{filter:normalizeLogicalOperand(t.filter,normalizePredicate)}:t)}(null!=(_b=spec.transform)?_b:[]),this.layout=isUnitSpec(spec)||isLayerSpec(spec)?{}:function extractCompositionLayout(spec,specType,config){var _a,_b;const compositionConfig=config[specType],layout={},{spacing:spacingConfig,columns:columns}=compositionConfig;void 0!==spacingConfig&&(layout.spacing=spacingConfig),void 0!==columns&&(isFacetSpec(spec)&&!isFacetMapping(spec.facet)||isRepeatSpec(spec)&&Object(vega_util.A)(spec.repeat)||isConcatSpec(spec))&&(layout.columns=columns);for(const prop of COMPOSITION_LAYOUT_PROPERTIES)if(void 0!==spec[prop])if("spacing"===prop){const spacing=spec[prop];layout[prop]=Object(vega_util.E)(spacing)?spacing:{row:(_a=spacing.row,null!=_a?_a:spacingConfig),column:(_b=spacing.column,null!=_b?_b:spacingConfig)}}else layout[prop]=spec[prop];return layout}(spec,type,config),this.component={data:{sources:parent?parent.component.data.sources:[],outputNodes:parent?parent.component.data.outputNodes:{},outputNodeRefCounts:parent?parent.component.data.outputNodeRefCounts:{},isFaceted:isFacetSpec(spec)||parent&&parent.component.data.isFaceted&&void 0===spec.data},layoutSize:new split_Split,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},resolve?duplicate(resolve):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){!function parseScales(model,{ignoreRange:ignoreRange}={}){parseScaleCore(model),domain_parseScaleDomain(model);for(const prop of NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES)parseScaleProperty(model,prop);ignoreRange||properties_parseScaleRange(model)}(this)}parseProjection(){parseProjection(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){parseLegend(this)}assembleGroupStyle(){var _a,_b;if("unit"===this.type||"layer"===this.type)return null!=(_b=null===(_a=this.view)||void 0===_a?void 0:_a.style)?_b:"cell"}assembleEncodeFromView(view){const{style:_}=view,baseView=__rest(view,["style"]),e={};for(const property in baseView)if(Object(vega_util.v)(baseView,property)){const value=baseView[property];void 0!==value&&(e[property]={value:value})}return e}assembleGroupEncodeEntry(isTopLevel){let encodeEntry=void 0;return this.view&&(encodeEntry=this.assembleEncodeFromView(this.view)),isTopLevel||"unit"!==this.type&&"layer"!==this.type?encodeEntry:Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},null!=encodeEntry?encodeEntry:{})}assembleLayout(){if(!this.layout)return;const _a=this.layout,{spacing:spacing}=_a,layout=__rest(_a,["spacing"]),{component:component,config:config}=this,titleBand=function assembleLayoutTitleBand(headerComponentIndex,config){var _a;const titleBand={};for(const channel of FACET_CHANNELS){const headerComponent=headerComponentIndex[channel];if(null===(_a=headerComponent)||void 0===_a?void 0:_a.facetFieldDef){const{titleAnchor:titleAnchor,titleOrient:titleOrient}=getHeaderProperties(["titleAnchor","titleOrient"],headerComponent.facetFieldDef,config,channel),headerChannel=getHeaderChannel(channel,titleOrient),band=getLayoutTitleBand(titleAnchor,headerChannel);void 0!==band&&(titleBand[headerChannel]=band)}}return util_keys(titleBand).length>0?titleBand:void 0}(component.layoutHeaders,config);return Object.assign(Object.assign(Object.assign({padding:spacing},this.assembleDefaultLayout()),layout),titleBand?{titleBand:titleBand}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:layoutHeaders}=this.component;let headerMarks=[];for(const channel of FACET_CHANNELS)layoutHeaders[channel].title&&headerMarks.push(assembleTitleGroup(this,channel));for(const channel of HEADER_CHANNELS)headerMarks=headerMarks.concat(assembleHeaderGroups(this,channel));return headerMarks}assembleAxes(){return function assembleAxes(axisComponents,config){const{x:x=[],y:y=[]}=axisComponents;return[...x.map(a=>assembleAxis(a,"grid",config)),...y.map(a=>assembleAxis(a,"grid",config)),...x.map(a=>assembleAxis(a,"main",config)),...y.map(a=>assembleAxis(a,"main",config))].filter(a=>a)}(this.component.axes,this.config)}assembleLegends(){return assembleLegends(this)}assembleProjections(){return assembleProjections(this)}assembleTitle(){var _a,_b,_c;const _d=null!=(_a=this.title)?_a:{},{encoding:encoding}=_d,titleNoEncoding=__rest(_d,["encoding"]),title=Object.assign(Object.assign(Object.assign({},extractTitleConfig(this.config.title).nonMark),titleNoEncoding),encoding?{encode:{update:encoding}}:{});if(title.text)return util_contains(["unit","layer"],this.type)?util_contains(["middle",void 0],title.anchor)&&(title.frame=null!=(_b=title.frame)?_b:"group"):title.anchor=null!=(_c=title.anchor)?_c:"start",util_keys(title).length>0?title:void 0}assembleGroup(signals=[]){const group={};(signals=signals.concat(this.assembleSignals())).length>0&&(group.signals=signals);const layout=this.assembleLayout();layout&&(group.layout=layout),group.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const scales=!this.parent||isFacetModel(this.parent)?function assembleScales(model){return isLayerModel(model)||isConcatModel(model)||isRepeatModel(model)?model.children.reduce((scales,child)=>scales.concat(assembleScales(child)),assembleScalesForModel(model)):assembleScalesForModel(model)}(this):[];scales.length>0&&(group.scales=scales);const axes=this.assembleAxes();axes.length>0&&(group.axes=axes);const legends=this.assembleLegends();return legends.length>0&&(group.legends=legends),group}hasDescendantWithFieldOnChannel(channel){for(const child of this.children)if(isUnitModel(child)){if(child.channelHasField(channel))return!0}else if(child.hasDescendantWithFieldOnChannel(channel))return!0;return!1}getName(text){return varName((this.name?this.name+"_":"")+text)}requestDataName(name){var _a;const fullName=this.getName(name),refCounts=this.component.data.outputNodeRefCounts;return refCounts[fullName]=(null!=(_a=refCounts[fullName])?_a:0)+1,fullName}getSizeSignalRef(sizeType){if(isFacetModel(this.parent)){const channel=getPositionScaleChannel(sizeType),scaleComponent=this.component.scales[channel];if(scaleComponent&&!scaleComponent.merged){const type=scaleComponent.get("type"),range=scaleComponent.get("range");if(hasDiscreteDomain(type)&&isVgRangeStep(range)){const scaleName=scaleComponent.get("name"),field=getFieldFromDomain(assembleDomain(this,channel));if(field){return{signal:sizeExpr(scaleName,scaleComponent,vgField({aggregate:"distinct",field:field},{expr:"datum"}))}}return log_warn(`Unknown field for ${channel}. Cannot calculate view size.`),null}}}return{signal:this.signalNameMap.get(this.getName(sizeType))}}lookupDataSource(name){const node=this.component.data.outputNodes[name];return node?node.getSource():name}getSignalName(oldSignalName){return this.signalNameMap.get(oldSignalName)}renameSignal(oldName,newName){this.signalNameMap.rename(oldName,newName)}renameScale(oldName,newName){this.scaleNameMap.rename(oldName,newName)}renameProjection(oldName,newName){this.projectionNameMap.rename(oldName,newName)}scaleName(originalScaleName,parse){return parse?this.getName(originalScaleName):isChannel(originalScaleName)&&isScaleChannel(originalScaleName)&&this.component.scales[originalScaleName]||this.scaleNameMap.has(this.getName(originalScaleName))?this.scaleNameMap.get(this.getName(originalScaleName)):void 0}projectionName(parse){return parse?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(channel){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const localScaleComponent=this.component.scales[channel];return localScaleComponent&&!localScaleComponent.merged?localScaleComponent:this.parent?this.parent.getScaleComponent(channel):void 0}getSelectionComponent(variableName,origName){let sel=this.component.selection[variableName];if(!sel&&this.parent&&(sel=this.parent.getSelectionComponent(variableName,origName)),!sel)throw new Error(message.selectionNotFound(origName));return sel}}class model_ModelWithField extends model_Model{vgField(channel,opt={}){const fieldDef=this.fieldDef(channel);if(fieldDef)return vgField(fieldDef,opt)}reduceFieldDef(f,init){return encoding_reduce(this.getMapping(),(acc,cd,c)=>{const fieldDef=getFieldDef(cd);return fieldDef?f(acc,fieldDef,c):acc},init)}forEachFieldDef(f,t){forEach(this.getMapping(),(cd,c)=>{const fieldDef=getFieldDef(cd);fieldDef&&f(fieldDef,c)},t)}}class density_DensityTransformNode extends DataFlowNode{constructor(parent,transform){var _a,_b,_c;super(parent),this.transform=transform,this.transform=duplicate(transform);const specifiedAs=null!=(_a=this.transform.as)?_a:[void 0,void 0];this.transform.as=[(_b=specifiedAs[0],null!=_b?_b:"value"),(_c=specifiedAs[1],null!=_c?_c:"density")]}clone(){return new density_DensityTransformNode(null,duplicate(this.transform))}dependentFields(){var _a;return new Set([this.transform.density,...(_a=this.transform.groupby,null!=_a?_a:[])])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${util_hash(this.transform)}`}assemble(){const _a=this.transform,{density:density}=_a,rest=__rest(_a,["density"]);return Object.assign({type:"kde",field:density},rest)}}class filterinvalid_FilterInvalidNode extends DataFlowNode{constructor(parent,filter){super(parent),this.filter=filter}clone(){return new filterinvalid_FilterInvalidNode(null,Object.assign({},this.filter))}static make(parent,model){const{config:config,mark:mark,markDef:markDef}=model;if("filter"!==getMarkPropOrConfig("invalid",markDef,config))return null;const filter=model.reduceFieldDef((aggregator,fieldDef,channel)=>{const scaleComponent=isScaleChannel(channel)&&model.getScaleComponent(channel);if(scaleComponent){!hasContinuousDomain(scaleComponent.get("type"))||fieldDef.aggregate||isPathMark(mark)||(aggregator[fieldDef.field]=fieldDef)}return aggregator},{});return util_keys(filter).length?new filterinvalid_FilterInvalidNode(parent,filter):null}dependentFields(){return new Set(util_keys(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${util_hash(this.filter)}`}assemble(){const filters=util_keys(this.filter).reduce((vegaFilters,field)=>{const fieldDef=this.filter[field],ref=vgField(fieldDef,{expr:"datum"});return null!==fieldDef&&("temporal"===fieldDef.type?vegaFilters.push(`(isDate(${ref}) || (isValid(${ref}) && isFinite(+${ref})))`):"quantitative"===fieldDef.type&&(vegaFilters.push(`isValid(${ref})`),vegaFilters.push(`isFinite(+${ref})`))),vegaFilters},[]);return filters.length>0?{type:"filter",expr:filters.join(" && ")}:null}}class flatten_FlattenTransformNode extends DataFlowNode{constructor(parent,transform){super(parent),this.transform=transform,this.transform=duplicate(transform);const{flatten:flatten,as:as=[]}=this.transform;this.transform.as=flatten.map((f,i)=>{var _a;return null!=(_a=as[i])?_a:f})}clone(){return new flatten_FlattenTransformNode(this.parent,duplicate(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${util_hash(this.transform)}`}assemble(){const{flatten:fields,as:as}=this.transform;return{type:"flatten",fields:fields,as:as}}}class fold_FoldTransformNode extends DataFlowNode{constructor(parent,transform){var _a,_b,_c;super(parent),this.transform=transform,this.transform=duplicate(transform);const specifiedAs=null!=(_a=this.transform.as)?_a:[void 0,void 0];this.transform.as=[(_b=specifiedAs[0],null!=_b?_b:"key"),(_c=specifiedAs[1],null!=_c?_c:"value")]}clone(){return new fold_FoldTransformNode(null,duplicate(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${util_hash(this.transform)}`}assemble(){const{fold:fold,as:as}=this.transform;return{type:"fold",fields:fold,as:as}}}class geojson_GeoJSONNode extends DataFlowNode{constructor(parent,fields,geojson,signal){super(parent),this.fields=fields,this.geojson=geojson,this.signal=signal}clone(){return new geojson_GeoJSONNode(null,duplicate(this.fields),this.geojson,this.signal)}static parseAll(parent,model){if(model.component.projection&&!model.component.projection.isFit)return parent;let geoJsonCounter=0;for(const coordinates of[[LONGITUDE,LATITUDE],[LONGITUDE2,LATITUDE2]]){const pair=coordinates.map(channel=>model.channelHasField(channel)?model.fieldDef(channel).field:isValueDef(model.encoding[channel])?{expr:model.encoding[channel].value+""}:void 0);(pair[0]||pair[1])&&(parent=new geojson_GeoJSONNode(parent,pair,null,model.getName(`geojson_${geoJsonCounter++}`)))}if(model.channelHasField(SHAPE)){const fieldDef=model.fieldDef(SHAPE);fieldDef.type===GEOJSON&&(parent=new geojson_GeoJSONNode(parent,null,fieldDef.field,model.getName(`geojson_${geoJsonCounter++}`)))}return parent}dependentFields(){var _a;const fields=(_a=this.fields,null!=_a?_a:[]).filter(vega_util.H);return new Set([...this.geojson?[this.geojson]:[],...fields])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${util_hash(this.fields)}`}assemble(){return Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})}}class geopoint_GeoPointNode extends DataFlowNode{constructor(parent,projection,fields,as){super(parent),this.projection=projection,this.fields=fields,this.as=as}clone(){return new geopoint_GeoPointNode(null,this.projection,duplicate(this.fields),duplicate(this.as))}static parseAll(parent,model){if(!model.projectionName())return parent;for(const coordinates of[[LONGITUDE,LATITUDE],[LONGITUDE2,LATITUDE2]]){const pair=coordinates.map(channel=>model.channelHasField(channel)?model.fieldDef(channel).field:isValueDef(model.encoding[channel])?{expr:model.encoding[channel].value+""}:void 0),suffix=coordinates[0]===LONGITUDE2?"2":"";(pair[0]||pair[1])&&(parent=new geopoint_GeoPointNode(parent,model.projectionName(),pair,[model.getName("x"+suffix),model.getName("y"+suffix)]))}return parent}dependentFields(){return new Set(this.fields.filter(vega_util.H))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${util_hash(this.fields)} ${util_hash(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class impute_ImputeNode extends DataFlowNode{constructor(parent,transform){super(parent),this.transform=transform}clone(){return new impute_ImputeNode(null,duplicate(this.transform))}dependentFields(){var _a;return new Set([this.transform.impute,this.transform.key,...(_a=this.transform.groupby,null!=_a?_a:[])])}producedFields(){return new Set([this.transform.impute])}processSequence(keyvals){const{start:start=0,stop:stop,step:step}=keyvals;return{signal:`sequence(${[start,stop,...step?[step]:[]].join(",")})`}}static makeFromTransform(parent,imputeTransform){return new impute_ImputeNode(parent,imputeTransform)}static makeFromEncoding(parent,model){const encoding=model.encoding,xDef=encoding.x,yDef=encoding.y;if(isFieldDef(xDef)&&isFieldDef(yDef)){const imputedChannel=xDef.impute?xDef:yDef.impute?yDef:void 0;if(void 0===imputedChannel)return;const keyChannel=xDef.impute?yDef:yDef.impute?xDef:void 0,{method:method,value:value,frame:frame,keyvals:keyvals}=imputedChannel.impute,groupbyFields=pathGroupingFields(model.mark,encoding);return new impute_ImputeNode(parent,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:imputedChannel.field,key:keyChannel.field},method?{method:method}:{}),void 0!==value?{value:value}:{}),frame?{frame:frame}:{}),void 0!==keyvals?{keyvals:keyvals}:{}),groupbyFields.length?{groupby:groupbyFields}:{}))}return null}hash(){return`Impute ${util_hash(this.transform)}`}assemble(){const{impute:impute,key:key,keyvals:keyvals,method:method,groupby:groupby,value:value,frame:frame=[null,null]}=this.transform,initialImpute=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:impute,key:key},keyvals?{keyvals:(t=keyvals,void 0!==(null===(_a=t)||void 0===_a?void 0:_a.stop)?this.processSequence(keyvals):keyvals)}:{}),{method:"value"}),groupby?{groupby:groupby}:{}),{value:null});var t,_a;let setImputedField;if(method&&"value"!==method){setImputedField=[Object.assign({type:"window",as:[`imputed_${impute}_value`],ops:[method],fields:[impute],frame:frame,ignorePeers:!1},groupby?{groupby:groupby}:{}),{type:"formula",expr:`datum.${impute} === null ? datum.imputed_${impute}_value : datum.${impute}`,as:impute}]}else{setImputedField=[{type:"formula",expr:`datum.${impute} === null ? ${value} : datum.${impute}`,as:impute}]}return[initialImpute,...setImputedField]}}class data_AncestorParse extends split_Split{constructor(explicit={},implicit={},parseNothing=!1){super(explicit,implicit),this.explicit=explicit,this.implicit=implicit,this.parseNothing=parseNothing}clone(){const clone=super.clone();return clone.parseNothing=this.parseNothing,clone}}class loess_LoessTransformNode extends DataFlowNode{constructor(parent,transform){var _a,_b,_c;super(parent),this.transform=transform,this.transform=duplicate(transform);const specifiedAs=null!=(_a=this.transform.as)?_a:[void 0,void 0];this.transform.as=[(_b=specifiedAs[0],null!=_b?_b:transform.on),(_c=specifiedAs[1],null!=_c?_c:transform.loess)]}clone(){return new loess_LoessTransformNode(null,duplicate(this.transform))}dependentFields(){var _a;return new Set([this.transform.loess,this.transform.on,...(_a=this.transform.groupby,null!=_a?_a:[])])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${util_hash(this.transform)}`}assemble(){const _a=this.transform,{loess:loess,on:on}=_a,rest=__rest(_a,["loess","on"]);return Object.assign({type:"loess",x:on,y:loess},rest)}}class lookup_LookupNode extends DataFlowNode{constructor(parent,transform,secondary){super(parent),this.transform=transform,this.secondary=secondary}clone(){return new lookup_LookupNode(null,duplicate(this.transform),this.secondary)}static make(parent,model,transform,counter){var _a;const sources=model.component.data.sources;let fromOutputNode=null;if(function isDataLookup(t){return void 0!==t.lookup&&void 0===t.from.selection}(transform)){let fromSource=findSource(transform.from.data,sources);fromSource||(fromSource=new source_SourceNode(transform.from.data),sources.push(fromSource));const fromOutputName=model.getName(`lookup_${counter}`);fromOutputNode=new dataflow_OutputNode(fromSource,fromOutputName,"lookup",model.component.data.outputNodeRefCounts),model.component.data.outputNodes[fromOutputName]=fromOutputNode}else if(function isSelectionLookup(t){return void 0!==t.lookup&&void 0!==t.from.selection}(transform)){const selName=transform.from.selection;if(transform.as=null!=(_a=transform.as)?_a:selName,!(fromOutputNode=model.getSelectionComponent(varName(selName),selName).materialized))throw new Error(message.noSameUnitLookup(selName))}return new lookup_LookupNode(parent,transform,fromOutputNode.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Object(vega_util.i)(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${util_hash({transform:this.transform,secondary:this.secondary})}`}assemble(){let foreign;if(this.transform.from.fields)foreign=Object.assign({values:this.transform.from.fields},this.transform.as?{as:Object(vega_util.i)(this.transform.as)}:{});else{let asName=this.transform.as;Object(vega_util.H)(asName)||(log_warn(message.NO_FIELDS_NEEDS_AS),asName="_lookup"),foreign={as:[asName]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},foreign),this.transform.default?{default:this.transform.default}:{})}}class quantile_QuantileTransformNode extends DataFlowNode{constructor(parent,transform){var _a,_b,_c;super(parent),this.transform=transform,this.transform=duplicate(transform);const specifiedAs=null!=(_a=this.transform.as)?_a:[void 0,void 0];this.transform.as=[(_b=specifiedAs[0],null!=_b?_b:"prob"),(_c=specifiedAs[1],null!=_c?_c:"value")]}clone(){return new quantile_QuantileTransformNode(null,duplicate(this.transform))}dependentFields(){var _a;return new Set([this.transform.quantile,...(_a=this.transform.groupby,null!=_a?_a:[])])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${util_hash(this.transform)}`}assemble(){const _a=this.transform,{quantile:quantile}=_a,rest=__rest(_a,["quantile"]);return Object.assign({type:"quantile",field:quantile},rest)}}class regression_RegressionTransformNode extends DataFlowNode{constructor(parent,transform){var _a,_b,_c;super(parent),this.transform=transform,this.transform=duplicate(transform);const specifiedAs=null!=(_a=this.transform.as)?_a:[void 0,void 0];this.transform.as=[(_b=specifiedAs[0],null!=_b?_b:transform.on),(_c=specifiedAs[1],null!=_c?_c:transform.regression)]}clone(){return new regression_RegressionTransformNode(null,duplicate(this.transform))}dependentFields(){var _a;return new Set([this.transform.regression,this.transform.on,...(_a=this.transform.groupby,null!=_a?_a:[])])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${util_hash(this.transform)}`}assemble(){const _a=this.transform,{regression:regression,on:on}=_a,rest=__rest(_a,["regression","on"]);return Object.assign({type:"regression",x:on,y:regression},rest)}}class pivot_PivotTransformNode extends DataFlowNode{constructor(parent,transform){super(parent),this.transform=transform}clone(){return new pivot_PivotTransformNode(null,duplicate(this.transform))}addDimensions(fields){var _a;this.transform.groupby=unique((_a=this.transform.groupby,null!=_a?_a:[]).concat(fields),d=>d)}producedFields(){}dependentFields(){var _a;return new Set([this.transform.pivot,this.transform.value,...(_a=this.transform.groupby,null!=_a?_a:[])])}hash(){return`PivotTransform ${util_hash(this.transform)}`}assemble(){const{pivot:pivot,value:value,groupby:groupby,limit:limit,op:op}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:pivot,value:value},void 0!==limit?{limit:limit}:{}),void 0!==op?{op:op}:{}),void 0!==groupby?{groupby:groupby}:{})}}class sample_SampleTransformNode extends DataFlowNode{constructor(parent,transform){super(parent),this.transform=transform}clone(){return new sample_SampleTransformNode(null,duplicate(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${util_hash(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function makeWalkTree(data){let datasetIndex=0;return function walkTree(node,dataSource){var _a;if(node instanceof source_SourceNode&&!node.isGenerator&&!isUrlData(node.data)){data.push(dataSource),dataSource={name:null,source:dataSource.name,transform:[]}}if(node instanceof formatparse_ParseNode&&(node.parent instanceof source_SourceNode&&!dataSource.source?(dataSource.format=Object.assign(Object.assign({},null!=(_a=dataSource.format)?_a:{}),{parse:node.assembleFormatParse()}),dataSource.transform.push(...node.assembleTransforms(!0))):dataSource.transform.push(...node.assembleTransforms())),node instanceof facet_FacetNode)return dataSource.name||(dataSource.name=`data_${datasetIndex++}`),!dataSource.source||dataSource.transform.length>0?(data.push(dataSource),node.data=dataSource.name):node.data=dataSource.source,void node.assemble().forEach(d=>data.push(d));if((node instanceof graticule_GraticuleNode||node instanceof sequence_SequenceNode||node instanceof filterinvalid_FilterInvalidNode||node instanceof filter_FilterNode||node instanceof calculate_CalculateNode||node instanceof geopoint_GeoPointNode||node instanceof geojson_GeoJSONNode||node instanceof aggregate_AggregateNode||node instanceof lookup_LookupNode||node instanceof window_WindowTransformNode||node instanceof joinaggregate_JoinAggregateTransformNode||node instanceof fold_FoldTransformNode||node instanceof flatten_FlattenTransformNode||node instanceof density_DensityTransformNode||node instanceof loess_LoessTransformNode||node instanceof quantile_QuantileTransformNode||node instanceof regression_RegressionTransformNode||node instanceof identifier_IdentifierNode||node instanceof sample_SampleTransformNode||node instanceof pivot_PivotTransformNode)&&dataSource.transform.push(node.assemble()),(node instanceof bin_BinNode||node instanceof timeunit_TimeUnitNode||node instanceof impute_ImputeNode||node instanceof stack_StackNode)&&dataSource.transform.push(...node.assemble()),node instanceof dataflow_OutputNode)if(dataSource.source&&0===dataSource.transform.length)node.setSource(dataSource.source);else if(node.parent instanceof dataflow_OutputNode)node.setSource(dataSource.name);else if(dataSource.name||(dataSource.name=`data_${datasetIndex++}`),node.setSource(dataSource.name),1===node.numChildren()){data.push(dataSource),dataSource={name:null,source:dataSource.name,transform:[]}}switch(node.numChildren()){case 0:node instanceof dataflow_OutputNode&&(!dataSource.source||dataSource.transform.length>0)&&data.push(dataSource);break;case 1:walkTree(node.children[0],dataSource);break;default:{dataSource.name||(dataSource.name=`data_${datasetIndex++}`);let source=dataSource.name;!dataSource.source||dataSource.transform.length>0?data.push(dataSource):source=dataSource.source,node.children.forEach(child=>{walkTree(child,{name:null,source:source,transform:[]})});break}}}}function parseFacetHeader(model,channel){var _a;if(model.channelHasField(channel)){const fieldDef=model.facet[channel],titleConfig=getHeaderProperty("title",null,model.config,channel);let title=channeldef_title(fieldDef,model.config,{allowDisabling:!0,includeDefault:void 0===titleConfig||!!titleConfig});model.child.component.layoutHeaders[channel].title&&(title=Object(vega_util.A)(title)?title.join(", "):title,title+=" / "+model.child.component.layoutHeaders[channel].title,model.child.component.layoutHeaders[channel].title=null);const labelOrient=getHeaderProperty("labelOrient",fieldDef,model.config,channel),labels=getFirstDefined((null!=(_a=fieldDef.header)?_a:{}).labels,!0),headerType=util_contains(["bottom","right"],labelOrient)?"footer":"header";model.component.layoutHeaders[channel]={title:title,facetFieldDef:fieldDef,[headerType]:"facet"===channel?[]:[makeHeaderComponent(model,channel,labels)]}}}function makeHeaderComponent(model,channel,labels){const sizeType="row"===channel?"height":"width";return{labels:labels,sizeSignal:model.child.component.layoutSize.get(sizeType)?model.child.getSizeSignalRef(sizeType):void 0,axes:[]}}function mergeChildAxis(model,channel){var _a;const{child:child}=model;if(child.component.axes[channel]){const{layoutHeaders:layoutHeaders,resolve:resolve}=model.component;if(resolve.axis[channel]=parseGuideResolve(resolve,channel),"shared"===resolve.axis[channel]){const headerChannel="x"===channel?"column":"row",layoutHeader=layoutHeaders[headerChannel];for(const axisComponent of child.component.axes[channel]){const headerType="top"===(orient=axisComponent.get("orient"))||"left"===orient?"header":"footer";layoutHeader[headerType]=null!=(_a=layoutHeader[headerType])?_a:[makeHeaderComponent(model,headerChannel,!1)];const mainAxis=assembleAxis(axisComponent,"main",model.config,{header:!0});layoutHeader[headerType][0].axes.push(mainAxis),axisComponent.mainExtracted=!0}}}var orient}function parseLayerLayoutSize(model){parseChildrenLayoutSize(model);const layoutSizeCmpt=model.component.layoutSize;layoutSizeCmpt.setWithExplicit("width",parseNonUnitLayoutSizeForChannel(model,"width")),layoutSizeCmpt.setWithExplicit("height",parseNonUnitLayoutSizeForChannel(model,"height"))}const parseRepeatLayoutSize=parseLayerLayoutSize,SIZE_TYPE_TO_MERGE={vconcat:"width",hconcat:"height"};function parseChildrenLayoutSize(model){for(const child of model.children)child.parseLayoutSize()}function parseNonUnitLayoutSizeForChannel(model,sizeType){const channel="width"===sizeType?"x":"y",resolve=model.component.resolve;let mergedSize;for(const child of model.children){const childSize=child.component.layoutSize.getWithExplicit(sizeType),scaleResolve=resolve.scale[channel];if("independent"===scaleResolve&&"step"===childSize.value){mergedSize=void 0;break}if(mergedSize){if("independent"===scaleResolve&&mergedSize.value!==childSize.value){mergedSize=void 0;break}mergedSize=mergeValuesWithExplicit(mergedSize,childSize,sizeType,"")}else mergedSize=childSize}if(mergedSize){for(const child of model.children)model.renameSignal(child.getName(sizeType),model.getName(sizeType)),child.component.layoutSize.set(sizeType,"merged",!1);return mergedSize}return{explicit:!1,value:void 0}}function defaultUnitSize(model,sizeType){const channel="width"===sizeType?"x":"y",config=model.config,scaleComponent=model.getScaleComponent(channel);if(scaleComponent){const scaleType=scaleComponent.get("type"),range=scaleComponent.get("range");if(hasDiscreteDomain(scaleType)){const size=getViewConfigDiscreteSize(config.view,sizeType);return isVgRangeStep(range)||isStep(size)?"step":size}return getViewConfigContinuousSize(config.view,sizeType)}if(model.hasProjection)return getViewConfigContinuousSize(config.view,sizeType);{const size=getViewConfigDiscreteSize(config.view,sizeType);return isStep(size)?size.step:size}}function replaceRepeat(o,repeater){return function isRepeatRef(field){return field&&!Object(vega_util.H)(field)&&"repeat"in field}(o.field)?o.field.repeat in repeater?Object.assign(Object.assign({},o),{field:repeater[o.field.repeat]}):void log_warn(message.noSuchRepeatedValue(o.field.repeat)):o}function replaceRepeaterInFieldDef(fieldDef,repeater){if(void 0!==(fieldDef=replaceRepeat(fieldDef,repeater))){if(null===fieldDef)return null;if(isSortableFieldDef(fieldDef)&&isSortField(fieldDef.sort)){const sort=replaceRepeat(fieldDef.sort,repeater);fieldDef=Object.assign(Object.assign({},fieldDef),sort?{sort:sort}:{})}return fieldDef}}function replaceRepeaterInChannelDef(channelDef,repeater){if(!isFieldDef(channelDef)){if(hasConditionalFieldDef(channelDef)){const fd=replaceRepeaterInFieldDef(channelDef.condition,repeater);if(fd)return Object.assign(Object.assign({},channelDef),{condition:fd});{const{condition:condition}=channelDef;return __rest(channelDef,["condition"])}}return channelDef}{const fd=replaceRepeaterInFieldDef(channelDef,repeater);if(fd)return fd;if(isConditionalDef(channelDef))return{condition:channelDef.condition}}}function replaceRepeater(mapping,repeater){const out={};for(const channel in mapping)if(Object(vega_util.v)(mapping,channel)){const channelDef=mapping[channel];if(Object(vega_util.A)(channelDef))out[channel]=channelDef.map(cd=>replaceRepeaterInChannelDef(cd,repeater)).filter(cd=>cd);else{const cd=replaceRepeaterInChannelDef(channelDef,repeater);void 0!==cd&&(out[channel]=cd)}}return out}function facetSortFieldName(fieldDef,sort,opt){return vgField(sort,Object.assign({suffix:`by_${vgField(fieldDef)}`},null!=opt?opt:{}))}class facet_FacetModel extends model_ModelWithField{constructor(spec,parent,parentGivenName,repeater,config){super(spec,"facet",parent,parentGivenName,config,repeater,spec.resolve),this.child=buildModel(spec.spec,this,this.getName("child"),void 0,repeater,config),this.children=[this.child];const facet=function replaceRepeaterInFacet(facet,repeater){return isFacetMapping(facet)?replaceRepeater(facet,repeater):replaceRepeaterInFieldDef(facet,repeater)}(spec.facet,repeater);this.facet=this.initFacet(facet)}initFacet(facet){return isFacetMapping(facet)?encoding_reduce(facet,(normalizedFacet,fieldDef,channel)=>util_contains([ROW,COLUMN],channel)?void 0===fieldDef.field?(log_warn(message.emptyFieldDef(fieldDef,channel)),normalizedFacet):(normalizedFacet[channel]=channeldef_normalize(fieldDef,channel),normalizedFacet):(log_warn(message.incompatibleChannel(channel,"facet")),normalizedFacet),{}):{facet:channeldef_normalize(facet,"facet")}}channelHasField(channel){return!!this.facet[channel]}fieldDef(channel){return this.facet[channel]}parseData(){this.component.data=parse_parseData(this),this.child.parseData()}parseLayoutSize(){parseChildrenLayoutSize(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function parseFacetHeaders(model){for(const channel of FACET_CHANNELS)parseFacetHeader(model,channel);mergeChildAxis(model,"x"),mergeChildAxis(model,"y")}(this)}assembleSelectionTopLevelSignals(signals){return this.child.assembleSelectionTopLevelSignals(signals)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(data){return this.child.assembleSelectionData(data)}getHeaderLayoutMixins(){var _a,_b,_c,_d;const layoutMixins={};for(const channel of FACET_CHANNELS)for(const headerType of HEADER_TYPES){const layoutHeaderComponent=this.component.layoutHeaders[channel],headerComponent=layoutHeaderComponent[headerType],{facetFieldDef:facetFieldDef}=layoutHeaderComponent;if(facetFieldDef){const titleOrient=getHeaderProperty("titleOrient",facetFieldDef,this.config,channel);if(util_contains(["right","bottom"],titleOrient)){const headerChannel=getHeaderChannel(channel,titleOrient);layoutMixins.titleAnchor=null!=(_a=layoutMixins.titleAnchor)?_a:{},layoutMixins.titleAnchor[headerChannel]="end"}}if(null===(_b=headerComponent)||void 0===_b?void 0:_b[0]){const sizeType="row"===channel?"height":"width",bandType="header"===headerType?"headerBand":"footerBand";"facet"===channel||this.child.component.layoutSize.get(sizeType)||(layoutMixins[bandType]=null!=(_c=layoutMixins[bandType])?_c:{},layoutMixins[bandType][channel]=.5),layoutHeaderComponent.title&&(layoutMixins.offset=null!=(_d=layoutMixins.offset)?_d:{},layoutMixins.offset["row"===channel?"rowTitle":"columnTitle"]=10)}}return layoutMixins}assembleDefaultLayout(){const{column:column,row:row}=this.facet,columns=column?this.columnDistinctSignal():row?1:void 0;let align="all";return(row||"independent"!==this.component.resolve.scale.x)&&(column||"independent"!==this.component.resolve.scale.y)||(align="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),columns?{columns:columns}:{}),{bounds:"full",align:align})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof facet_FacetModel)){return{signal:`length(data('${this.getName("column_domain")}'))`}}}assembleGroup(signals){return this.parent&&this.parent instanceof facet_FacetModel?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:vgField(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(signals)):super.assembleGroup(signals)}getCardinalityAggregateForChild(){const fields=[],ops=[],as=[];if(this.child instanceof facet_FacetModel){if(this.child.channelHasField("column")){const field=vgField(this.child.facet.column);fields.push(field),ops.push("distinct"),as.push(`distinct_${field}`)}}else for(const channel of["x","y"]){const childScaleComponent=this.child.component.scales[channel];if(childScaleComponent&&!childScaleComponent.merged){const type=childScaleComponent.get("type"),range=childScaleComponent.get("range");if(hasDiscreteDomain(type)&&isVgRangeStep(range)){const field=getFieldFromDomain(assembleDomain(this.child,channel));field?(fields.push(field),ops.push("distinct"),as.push(`distinct_${field}`)):log_warn(`Unknown field for ${channel}. Cannot calculate view size.`)}}}return{fields:fields,ops:ops,as:as}}assembleFacet(){const{name:name,data:data}=this.component.data.facetRoot,{row:row,column:column}=this.facet,{fields:fields,ops:ops,as:as}=this.getCardinalityAggregateForChild(),groupby=[];for(const channel of FACET_CHANNELS){const fieldDef=this.facet[channel];if(fieldDef){groupby.push(vgField(fieldDef));const{bin:bin,sort:sort}=fieldDef;if(isBinning(bin)&&groupby.push(vgField(fieldDef,{binSuffix:"end"})),isSortField(sort)){const{field:field,op:op=DEFAULT_SORT_OP}=sort,outputName=facetSortFieldName(fieldDef,sort);row&&column?(fields.push(outputName),ops.push("max"),as.push(outputName)):(fields.push(field),ops.push(op),as.push(outputName))}else if(Object(vega_util.A)(sort)){const outputName=sortArrayIndexField(fieldDef,channel);fields.push(outputName),ops.push("max"),as.push(outputName)}}}const cross=!!row&&!!column;return Object.assign({name:name,data:data,groupby:groupby},cross||fields.length?{aggregate:Object.assign(Object.assign({},cross?{cross:cross}:{}),fields.length?{fields:fields,ops:ops,as:as}:{})}:{})}facetSortFields(channel){const{facet:facet}=this,fieldDef=facet[channel];return fieldDef?isSortField(fieldDef.sort)?[facetSortFieldName(fieldDef,fieldDef.sort,{expr:"datum"})]:Object(vega_util.A)(fieldDef.sort)?[sortArrayIndexField(fieldDef,channel,{expr:"datum"})]:[vgField(fieldDef,{expr:"datum"})]:[]}facetSortOrder(channel){const{facet:facet}=this,fieldDef=facet[channel];if(fieldDef){const{sort:sort}=fieldDef;return[(isSortField(sort)?sort.order:!Object(vega_util.A)(sort)&&sort)||"ascending"]}return[]}assembleLabelTitle(){const{facet:facet,config:config}=this;if(facet.facet)return assembleLabelTitle(facet.facet,"facet",config);const ORTHOGONAL_ORIENT={row:["top","bottom"],column:["left","right"]};for(const channel of HEADER_CHANNELS)if(facet[channel]){const labelOrient=getHeaderProperty("labelOrient",facet[channel],config,channel);if(util_contains(ORTHOGONAL_ORIENT[channel],labelOrient))return assembleLabelTitle(facet[channel],channel,config)}}assembleMarks(){const{child:child}=this,data=function assembleFacetData(root){const data=[],walkTree=makeWalkTree(data);return root.children.forEach(child=>walkTree(child,{source:root.name,name:null,transform:[]})),data}(this.component.data.facetRoot),encodeEntry=child.assembleGroupEncodeEntry(!1),title=this.assembleLabelTitle()||child.assembleTitle(),style=child.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},title?{title:title}:{}),style?{style:style}:{}),{from:{facet:this.assembleFacet()},sort:{field:FACET_CHANNELS.map(c=>this.facetSortFields(c)).flat(),order:FACET_CHANNELS.map(c=>this.facetSortOrder(c)).flat()}}),data.length>0?{data:data}:{}),encodeEntry?{encode:{update:encodeEntry}}:{}),child.assembleGroup(function assembleFacetSignals(model,signals){if(model.component.selection&&util_keys(model.component.selection).length){const name=Object(vega_util.Y)(model.getName("cell"));signals.unshift({name:"facet",value:{},on:[{events:event_selector("mousemove","scope"),update:`isTuple(facet) ? facet : group(${name}).datum`}]})}return cleanupEmptyOnArray(signals)}(this,[])))]}getMapping(){return this.facet}}function findSource(data,sources){var _a,_b;for(const other of sources){const otherData=other.data;if((!data.name||!other.hasName()||data.name===other.dataName)&&!((null===(_a=data.format)||void 0===_a?void 0:_a.mesh)&&(null===(_b=otherData.format)||void 0===_b?void 0:_b.feature)))if(isInlineData(data)&&isInlineData(otherData)){if(deepEqual(data.values,otherData.values))return other}else if(isUrlData(data)&&isUrlData(otherData)){if(data.url===otherData.url)return other}else if(isNamedData(data)&&data.name===other.dataName)return other}return null}function parseRoot(model,sources){if(model.data||!model.parent){if(null===model.data){const source=new source_SourceNode([]);return sources.push(source),source}const existingSource=findSource(model.data,sources);if(existingSource)return isGenerator(model.data)||(existingSource.data.format=function mergeDeep(dest,...src){for(const s of src)deepMerge_(dest,null!=s?s:{});return dest}({},model.data.format,existingSource.data.format)),!existingSource.hasName()&&model.data.name&&(existingSource.dataName=model.data.name),existingSource;{const source=new source_SourceNode(model.data);return sources.push(source),source}}return model.parent.component.data.facetRoot?model.parent.component.data.facetRoot:model.parent.component.data.main}function parse_parseData(model){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l;let head=parseRoot(model,model.component.data.sources);const{outputNodes:outputNodes,outputNodeRefCounts:outputNodeRefCounts}=model.component.data,ancestorParse=model.parent?model.parent.component.data.ancestorParse.clone():new data_AncestorParse,data=model.data;isGenerator(data)?(isSequenceGenerator(data)?head=new sequence_SequenceNode(head,data.sequence):isGraticuleGenerator(data)&&(head=new graticule_GraticuleNode(head,data.graticule)),ancestorParse.parseNothing=!0):null===(null===(_b=null===(_a=data)||void 0===_a?void 0:_a.format)||void 0===_b?void 0:_b.parse)&&(ancestorParse.parseNothing=!0),_c=formatparse_ParseNode.makeExplicit(head,model,ancestorParse),head=new identifier_IdentifierNode(head=null!=_c?_c:head);const parentIsLayer=model.parent&&isLayerModel(model.parent);(isUnitModel(model)||isFacetModel(model))&&parentIsLayer&&(head=null!=(_d=bin_BinNode.makeFromEncoding(head,model))?_d:head),model.transforms.length>0&&(head=function parseTransformArray(head,model,ancestorParse){var _a,_b;let lookupCounter=0;for(const t of model.transforms){let transformNode,derivedType=void 0;if(isCalculate(t))transformNode=head=new calculate_CalculateNode(head,t),derivedType="derived";else if(isFilter(t)){const implicit=getImplicitFromFilterTransform(t);transformNode=head=null!=(_a=formatparse_ParseNode.makeWithAncestors(head,{},implicit,ancestorParse))?_a:head,head=new filter_FilterNode(head,model,t.filter)}else if(isBin(t))transformNode=head=bin_BinNode.makeFromTransform(head,t,model),derivedType="number";else if(transform_isTimeUnit(t)){derivedType="date",void 0===ancestorParse.getWithExplicit(t.field).value&&(head=new formatparse_ParseNode(head,{[t.field]:derivedType}),ancestorParse.set(t.field,derivedType,!1)),transformNode=head=timeunit_TimeUnitNode.makeFromTransform(head,t)}else if(transform_isAggregate(t))transformNode=head=aggregate_AggregateNode.makeFromTransform(head,t),derivedType="number",requiresSelectionId(model)&&(head=new identifier_IdentifierNode(head));else if(isLookup(t))transformNode=head=lookup_LookupNode.make(head,model,t,lookupCounter++),derivedType="derived";else if(isWindow(t))transformNode=head=new window_WindowTransformNode(head,t),derivedType="number";else if(isJoinAggregate(t))transformNode=head=new joinaggregate_JoinAggregateTransformNode(head,t),derivedType="number";else if(isStack(t))transformNode=head=stack_StackNode.makeFromTransform(head,t),derivedType="derived";else if(isFold(t))transformNode=head=new fold_FoldTransformNode(head,t),derivedType="derived";else if(isFlatten(t))transformNode=head=new flatten_FlattenTransformNode(head,t),derivedType="derived";else if(isPivot(t))transformNode=head=new pivot_PivotTransformNode(head,t),derivedType="derived";else if(isSample(t))head=new sample_SampleTransformNode(head,t);else if(isImpute(t))transformNode=head=impute_ImputeNode.makeFromTransform(head,t),derivedType="derived";else if(isDensity(t))transformNode=head=new density_DensityTransformNode(head,t),derivedType="derived";else if(transform_isQuantile(t))transformNode=head=new quantile_QuantileTransformNode(head,t),derivedType="derived";else if(isRegression(t))transformNode=head=new regression_RegressionTransformNode(head,t),derivedType="derived";else{if(!isLoess(t)){log_warn(message.invalidTransformIgnored(t));continue}transformNode=head=new loess_LoessTransformNode(head,t),derivedType="derived"}if(transformNode&&void 0!==derivedType)for(const field of null!=(_b=transformNode.producedFields())?_b:[])ancestorParse.set(field,derivedType,!1)}return head}(head,model,ancestorParse));const implicitSelection=function getImplicitFromSelection(model){const implicit={};if(isUnitModel(model)&&model.component.selection)for(const name of util_keys(model.component.selection)){const selCmpt=model.component.selection[name];for(const proj of selCmpt.project.items)!proj.channel&&accessPathDepth(proj.field)>1&&(implicit[proj.field]="flatten")}return implicit}(model),implicitEncoding=getImplicitFromEncoding(model);head=null!=(_e=formatparse_ParseNode.makeWithAncestors(head,{},Object.assign(Object.assign({},implicitSelection),implicitEncoding),ancestorParse))?_e:head,isUnitModel(model)&&(head=geojson_GeoJSONNode.parseAll(head,model),head=geopoint_GeoPointNode.parseAll(head,model)),(isUnitModel(model)||isFacetModel(model))&&(parentIsLayer||(head=null!=(_f=bin_BinNode.makeFromEncoding(head,model))?_f:head),head=null!=(_g=timeunit_TimeUnitNode.makeFromEncoding(head,model))?_g:head,head=calculate_CalculateNode.parseAllForSortIndex(head,model));const rawName=model.getName(RAW),raw=new dataflow_OutputNode(head,rawName,RAW,outputNodeRefCounts);if(outputNodes[rawName]=raw,head=raw,isUnitModel(model)){const agg=aggregate_AggregateNode.makeFromEncoding(head,model);agg&&(head=agg,requiresSelectionId(model)&&(head=new identifier_IdentifierNode(head))),head=null!=(_h=impute_ImputeNode.makeFromEncoding(head,model))?_h:head,head=null!=(_j=stack_StackNode.makeFromEncoding(head,model))?_j:head}isUnitModel(model)&&(head=null!=(_k=filterinvalid_FilterInvalidNode.make(head,model))?_k:head);const mainName=model.getName(MAIN),main=new dataflow_OutputNode(head,mainName,MAIN,outputNodeRefCounts);outputNodes[mainName]=main,head=main,isUnitModel(model)&&function materializeSelections(model,main){forEachSelection(model,selCmpt=>{const selection=selCmpt.name,lookupName=model.getName(`lookup_${selection}`);model.component.data.outputNodes[lookupName]=selCmpt.materialized=new dataflow_OutputNode(new filter_FilterNode(main,model,{selection:selection}),lookupName,"lookup",model.component.data.outputNodeRefCounts)})}(model,main);let facetRoot=null;if(isFacetModel(model)){const facetName=model.getName("facet");_l=function makeJoinAggregateFromFacet(parent,facet){const{row:row,column:column}=facet;if(row&&column){let newParent=null;for(const fieldDef of[row,column])if(isSortField(fieldDef.sort)){const{field:field,op:op=DEFAULT_SORT_OP}=fieldDef.sort;parent=newParent=new joinaggregate_JoinAggregateTransformNode(parent,{joinaggregate:[{op:op,field:field,as:facetSortFieldName(fieldDef,fieldDef.sort,{forAs:!0})}],groupby:[vgField(fieldDef)]})}return newParent}return null}(head=calculate_CalculateNode.parseAllForSortIndex(head,model),model.facet),facetRoot=new facet_FacetNode(head=null!=_l?_l:head,model,facetName,main.getSource()),outputNodes[facetName]=facetRoot,head=facetRoot}return Object.assign(Object.assign({},model.component.data),{outputNodes:outputNodes,outputNodeRefCounts:outputNodeRefCounts,raw:raw,main:main,facetRoot:facetRoot,ancestorParse:ancestorParse})}class baseconcat_BaseConcatModel extends model_Model{constructor(spec,specType,parent,parentGivenName,config,repeater,resolve){super(spec,specType,parent,parentGivenName,config,repeater,resolve)}parseData(){this.component.data=parse_parseData(this),this.children.forEach(child=>{child.parseData()})}parseSelections(){this.component.selection={};for(const child of this.children)child.parseSelections(),util_keys(child.component.selection).forEach(key=>{this.component.selection[key]=child.component.selection[key]})}parseMarkGroup(){for(const child of this.children)child.parseMarkGroup()}parseAxesAndHeaders(){for(const child of this.children)child.parseAxesAndHeaders()}assembleSelectionTopLevelSignals(signals){return this.children.reduce((sg,child)=>child.assembleSelectionTopLevelSignals(sg),signals)}assembleSignals(){return this.children.forEach(child=>child.assembleSignals()),[]}assembleLayoutSignals(){return this.children.reduce((signals,child)=>[...signals,...child.assembleLayoutSignals()],assembleLayoutSignals(this))}assembleSelectionData(data){return this.children.reduce((db,child)=>child.assembleSelectionData(db),data)}assembleMarks(){return this.children.map(child=>{const title=child.assembleTitle(),style=child.assembleGroupStyle(),encodeEntry=child.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:child.getName("group")},title?{title:title}:{}),style?{style:style}:{}),encodeEntry?{encode:{update:encodeEntry}}:{}),child.assembleGroup())})}}class concat_ConcatModel extends baseconcat_BaseConcatModel{constructor(spec,parent,parentGivenName,repeater,config){var _a,_b,_c,_d;super(spec,"concat",parent,parentGivenName,config,repeater,spec.resolve),"shared"!==(null===(_b=null===(_a=spec.resolve)||void 0===_a?void 0:_a.axis)||void 0===_b?void 0:_b.x)&&"shared"!==(null===(_d=null===(_c=spec.resolve)||void 0===_c?void 0:_c.axis)||void 0===_d?void 0:_d.y)||log_warn(message.CONCAT_CANNOT_SHARE_AXIS),this.concatType=isVConcatSpec(spec)?"vconcat":isHConcatSpec(spec)?"hconcat":"concat",this.children=this.getChildren(spec).map((child,i)=>buildModel(child,this,this.getName("concat_"+i),void 0,repeater,config))}getChildren(spec){return isVConcatSpec(spec)?spec.vconcat:isHConcatSpec(spec)?spec.hconcat:spec.concat}parseLayoutSize(){!function parseConcatLayoutSize(model){parseChildrenLayoutSize(model);const layoutSizeCmpt=model.component.layoutSize,sizeTypeToMerge=SIZE_TYPE_TO_MERGE[model.concatType];sizeTypeToMerge&&layoutSizeCmpt.setWithExplicit(sizeTypeToMerge,parseNonUnitLayoutSizeForChannel(model,sizeTypeToMerge))}(this)}parseAxisGroup(){return null}assembleDefaultLayout(){return Object.assign(Object.assign({},"vconcat"===this.concatType?{columns:1}:{}),{bounds:"full",align:"each"})}}const AXIS_COMPONENT_PROPERTIES_INDEX=Object.assign(Object.assign({gridScale:1,scale:1},COMMON_AXIS_PROPERTIES_INDEX),{labelExpr:1,encode:1}),AXIS_COMPONENT_PROPERTIES=util_keys(AXIS_COMPONENT_PROPERTIES_INDEX);class component_AxisComponent extends split_Split{constructor(explicit={},implicit={},mainExtracted=!1){super(),this.explicit=explicit,this.implicit=implicit,this.mainExtracted=mainExtracted}clone(){return new component_AxisComponent(duplicate(this.explicit),duplicate(this.implicit),this.mainExtracted)}hasAxisPart(part){return"axis"===part||("grid"===part||"title"===part?!!this.get(part):!function isFalseOrNull(v){return!1===v||null===v}(this.get(part)))}}const OPPOSITE_ORIENT={bottom:"top",top:"bottom",left:"right",right:"left"};function mergeAxisComponents(mergedAxisCmpts,childAxisCmpts){if(!mergedAxisCmpts)return childAxisCmpts.map(axisComponent=>axisComponent.clone());{if(mergedAxisCmpts.length!==childAxisCmpts.length)return;const length=mergedAxisCmpts.length;for(let i=0;i<length;i++){const merged=mergedAxisCmpts[i],child=childAxisCmpts[i];if(!!merged!=!!child)return;if(merged&&child){const mergedOrient=merged.getWithExplicit("orient"),childOrient=child.getWithExplicit("orient");if(mergedOrient.explicit&&childOrient.explicit&&mergedOrient.value!==childOrient.value)return;mergedAxisCmpts[i]=mergeAxisComponent(merged,child)}}}return mergedAxisCmpts}function mergeAxisComponent(merged,child){for(const prop of AXIS_COMPONENT_PROPERTIES){const mergedValueWithExplicit=mergeValuesWithExplicit(merged.getWithExplicit(prop),child.getWithExplicit(prop),prop,"axis",(v1,v2)=>{switch(prop){case"title":return mergeTitleComponent(v1,v2);case"gridScale":return{explicit:v1.explicit,value:getFirstDefined(v1.value,v2.value)}}return defaultTieBreaker(v1,v2,prop,"axis")});merged.setWithExplicit(prop,mergedValueWithExplicit)}return merged}function getFieldDefTitle(model,channel){const channel2="x"===channel?"x2":"y2",fieldDef=model.fieldDef(channel),fieldDef2=model.fieldDef(channel2),title1=fieldDef?fieldDef.title:void 0,title2=fieldDef2?fieldDef2.title:void 0;return title1&&title2?mergeTitle(title1,title2):title1||(title2||(void 0!==title1?title1:void 0!==title2?title2:void 0))}function parseAxis(channel,model){var _a;const axis=model.axis(channel),axisComponent=new component_AxisComponent;AXIS_COMPONENT_PROPERTIES.forEach(property=>{const value=function parse_getProperty(property,specifiedAxis,channel,model){const fieldDef=model.fieldDef(channel),labelAngle=function properties_labelAngle(model,specifiedAxis,channel,fieldDef){if(void 0!==specifiedAxis.labelAngle)return normalizeAngle(specifiedAxis.labelAngle);{const angle=getAxisConfig("labelAngle",model.config,channel,properties_orient(channel),model.getScaleComponent(channel).get("type"));return void 0!==angle?normalizeAngle(angle):channel===channel_X&&util_contains([NOMINAL,ORDINAL],fieldDef.type)?270:void 0}}(model,specifiedAxis,channel,fieldDef),orient=getFirstDefined(specifiedAxis.orient,properties_orient(channel)),{mark:mark,config:config}=model;switch(property){case"scale":return model.scaleName(channel);case"gridScale":return function gridScale(model,channel){const gridChannel="x"===channel?"y":"x";if(model.getScaleComponent(gridChannel))return model.scaleName(gridChannel)}(model,channel);case"format":if(isTimeFormatFieldDef(fieldDef))return;return numberFormat(fieldDef,specifiedAxis.format,config);case"formatType":if(isTimeFormatFieldDef(fieldDef))return;return specifiedAxis.formatType;case"grid":if(bin_isBinned(model.fieldDef(channel).bin))return!1;{const scaleType=model.getScaleComponent(channel).get("type");return getFirstDefined(specifiedAxis.grid,function defaultGrid(scaleType,fieldDef){return!hasDiscreteDomain(scaleType)&&!isBinning(fieldDef.bin)}(scaleType,fieldDef))}case"labelAlign":return getFirstDefined(specifiedAxis.labelAlign,defaultLabelAlign(labelAngle,orient));case"labelAngle":return labelAngle;case"labelBaseline":return getFirstDefined(specifiedAxis.labelBaseline,defaultLabelBaseline(labelAngle,orient));case"labelFlush":return getFirstDefined(specifiedAxis.labelFlush,function defaultLabelFlush(fieldDef,channel){if("x"===channel&&util_contains(["quantitative","temporal"],fieldDef.type))return!0}(fieldDef,channel));case"labelOverlap":{const scaleType=model.getScaleComponent(channel).get("type");return getFirstDefined(specifiedAxis.labelOverlap,function defaultLabelOverlap(fieldDef,scaleType){if("nominal"!==fieldDef.type)return"log"!==scaleType||"greedy"}(fieldDef,scaleType))}case"orient":return orient;case"tickCount":{const scaleType=model.getScaleComponent(channel).get("type"),sizeType="x"===channel?"width":"y"===channel?"height":void 0,size=sizeType?model.getSizeSignalRef(sizeType):void 0;return getFirstDefined(specifiedAxis.tickCount,function defaultTickCount({fieldDef:fieldDef,scaleType:scaleType,size:size}){if(!hasDiscreteDomain(scaleType)&&"log"!==scaleType&&!util_contains(["month","hours","day","quarter"],fieldDef.timeUnit))return isBinning(fieldDef.bin)?{signal:`ceil(${size.signal}/10)`}:{signal:`ceil(${size.signal}/40)`}}({fieldDef:fieldDef,scaleType:scaleType,size:size}))}case"title":{const channel2="x"===channel?"x2":"y2",fieldDef2=model.fieldDef(channel2);return getFirstDefined(specifiedAxis.title,getFieldDefTitle(model,channel),mergeTitleFieldDefs([toFieldDefBase(fieldDef)],fieldDef2?[toFieldDefBase(fieldDef2)]:[]))}case"values":return function properties_values(specifiedAxis,model,fieldDef){const vals=specifiedAxis.values;if(vals)return valueArray(fieldDef,vals)}(specifiedAxis,0,fieldDef);case"zindex":return getFirstDefined(specifiedAxis.zindex,function defaultZindex(mark,fieldDef){return"rect"===mark&&channeldef_isDiscrete(fieldDef)?1:0}(mark,fieldDef))}return function isAxisProperty(prop){return!!AXIS_PROPERTIES_INDEX[prop]}(property)?specifiedAxis[property]:void 0}(property,axis,channel,model);if(void 0!==value){const explicit=function parse_isExplicit(value,property,axis,model,channel){switch(property){case"titleAngle":case"labelAngle":return value===normalizeAngle(axis[property]);case"values":return!!axis.values;case"encode":return!!axis.encoding||!!axis.labelAngle;case"title":if(value===getFieldDefTitle(model,channel))return!0}return value===axis[property]}(value,property,axis,model,channel),configValue=getAxisConfig(property,model.config,channel,axisComponent.get("orient"),model.getScaleComponent(channel).get("type"));explicit||void 0===configValue?axisComponent.set(property,value,explicit):util_contains(["grid","orient"],property)&&configValue&&axisComponent.set(property,configValue,!1)}});const axisEncoding=null!=(_a=axis.encoding)?_a:{},axisEncode=AXIS_PARTS.reduce((e,part)=>{var _a;if(!axisComponent.hasAxisPart(part))return e;const axisEncodingPart=guideEncodeEntry(null!=(_a=axisEncoding[part])?_a:{},model),value="labels"===part?function axis_encode_labels(model,channel,specifiedLabelsSpec){var _a;const fieldDef=null!=(_a=model.fieldDef(channel))?_a:"x"===channel?model.fieldDef("x2"):"y"===channel?model.fieldDef("y2"):void 0,axis=model.axis(channel),config=model.config;let labelsSpec={};if(isTimeFormatFieldDef(fieldDef)){const isUTCScale=model.getScaleComponent(channel).get("type")===ScaleType.UTC,expr=timeFormatExpression("datum.value",fieldDef.timeUnit,axis.format,config.axis.shortTimeLabels,null,isUTCScale);expr&&(labelsSpec.text={signal:expr})}return labelsSpec=Object.assign(Object.assign({},labelsSpec),specifiedLabelsSpec),0===util_keys(labelsSpec).length?void 0:labelsSpec}(model,channel,axisEncodingPart):axisEncodingPart;return void 0!==value&&util_keys(value).length>0&&(e[part]={update:value}),e},{});return util_keys(axisEncode).length>0&&axisComponent.set("encode",axisEncode,!!axis.encoding||void 0!==axis.labelAngle),axisComponent}function normalizeMarkDef(mark,encoding,config,{graticule:graticule}){var _a,_b;const markDef=isMarkDef(mark)?Object.assign({},mark):{type:mark},specifiedOrient=null!=(_a=markDef.orient)?_a:getMarkConfig("orient",markDef,config);return markDef.orient=function init_orient(mark,encoding,specifiedOrient){switch(mark){case POINT:case CIRCLE:case SQUARE:case TEXT:case RECT:case IMAGE:return}const{x:x,y:y,x2:x2,y2:y2}=encoding;switch(mark){case BAR:if(isFieldDef(x)&&(bin_isBinned(x.bin)||isFieldDef(y)&&y.aggregate&&!x.aggregate))return"vertical";if(isFieldDef(y)&&(bin_isBinned(y.bin)||isFieldDef(x)&&x.aggregate&&!y.aggregate))return"horizontal";if(y2||x2){if(specifiedOrient)return specifiedOrient;if(!x2&&isFieldDef(x)&&x.type===QUANTITATIVE&&!isBinning(x.bin))return"horizontal";if(!y2&&isFieldDef(y)&&y.type===QUANTITATIVE&&!isBinning(y.bin))return"vertical"}case RULE:if(x2&&y2)return;case AREA:if(y2)return isFieldDef(y)&&bin_isBinned(y.bin)?"horizontal":"vertical";if(x2)return isFieldDef(x)&&bin_isBinned(x.bin)?"vertical":"horizontal";if(mark===RULE){if(x&&!y)return"vertical";if(y&&!x)return"horizontal"}case LINE:case TICK:{const xIsContinuous=isFieldDef(x)&&channeldef_isContinuous(x),yIsContinuous=isFieldDef(y)&&channeldef_isContinuous(y);if(xIsContinuous&&!yIsContinuous)return"tick"!==mark?"horizontal":"vertical";if(!xIsContinuous&&yIsContinuous)return"tick"!==mark?"vertical":"horizontal";if(xIsContinuous&&yIsContinuous){const xDef=x,yDef=y,xIsTemporal=xDef.type===TEMPORAL,yIsTemporal=yDef.type===TEMPORAL;return xIsTemporal&&!yIsTemporal?"tick"!==mark?"vertical":"horizontal":!xIsTemporal&&yIsTemporal?"tick"!==mark?"horizontal":"vertical":!xDef.aggregate&&yDef.aggregate?"tick"!==mark?"vertical":"horizontal":xDef.aggregate&&!yDef.aggregate?"tick"!==mark?"horizontal":"vertical":specifiedOrient||"vertical"}return specifiedOrient||void 0}}return"vertical"}(markDef.type,encoding,specifiedOrient),void 0!==specifiedOrient&&specifiedOrient!==markDef.orient&&log_warn(message.orientOverridden(markDef.orient,specifiedOrient)),void 0===getFirstDefined(markDef.opacity,getMarkConfig("opacity",markDef,config))&&(markDef.opacity=function init_opacity(mark,encoding){if(util_contains([POINT,TICK,CIRCLE,SQUARE],mark)&&!encoding_isAggregate(encoding))return.7;return}(markDef.type,encoding)),void 0===markDef.filled&&(markDef.filled=!graticule&&function init_filled(markDef,config){const filledConfig=getMarkConfig("filled",markDef,config),mark=markDef.type;return getFirstDefined(filledConfig,mark!==POINT&&mark!==LINE&&mark!==RULE)}(markDef,config)),void 0===(null!=(_b=markDef.cursor)?_b:getMarkConfig("cursor",markDef,config))&&(markDef.cursor=function init_cursor(markDef,encoding,config){if(encoding.href||markDef.href||getMarkConfig("href",markDef,config))return"pointer";return markDef.cursor}(markDef,encoding,config)),markDef}function rectPosition(model,channel,mark){var _a,_b,_c,_d;const{config:config,encoding:encoding,markDef:markDef}=model,channel2="x"===channel?"x2":"y2",sizeChannel="x"===channel?"width":"height",fieldDef=encoding[channel],fieldDef2=encoding[channel2],scale=model.getScaleComponent(channel),scaleType=scale?scale.get("type"):void 0,scaleName=model.scaleName(channel),orient=markDef.orient,hasSizeDef=null!=(_d=null!=(_c=null!=(_b=null!=(_a=encoding[sizeChannel])?_a:encoding.size)?_b:markDef[sizeChannel])?_c:markDef.size)?_d:getMarkConfig("size",markDef,config,{vgChannel:sizeChannel}),isBarBand="x"===channel?"vertical"===orient:"horizontal"===orient;if(isFieldDef(fieldDef)&&(isBinning(fieldDef.bin)||bin_isBinned(fieldDef.bin)||fieldDef.timeUnit&&!fieldDef2)&&!hasSizeDef&&!hasDiscreteDomain(scaleType)){return function binPosition({fieldDef:fieldDef,fieldDef2:fieldDef2,channel:channel,band:band,scaleName:scaleName,markDef:markDef,spacing:spacing=0,reverse:reverse}){const binSpacing={x:reverse?spacing:0,x2:reverse?0:spacing,y:reverse?0:spacing,y2:reverse?spacing:0},channel2=channel===channel_X?channel_X2:channel_Y2;return isBinning(fieldDef.bin)||fieldDef.timeUnit?{[channel2]:valueref_bin({channel:channel,fieldDef:fieldDef,scaleName:scaleName,markDef:markDef,band:(1-band)/2,offset:binSpacing[`${channel}2`]}),[channel]:valueref_bin({channel:channel,fieldDef:fieldDef,scaleName:scaleName,markDef:markDef,band:1-(1-band)/2,offset:binSpacing[channel]})}:bin_isBinned(fieldDef.bin)&&isFieldDef(fieldDef2)?{[channel2]:valueref_fieldRef(fieldDef,scaleName,{},{offset:binSpacing[`${channel}2`]}),[channel]:valueref_fieldRef(fieldDef2,scaleName,{},{offset:binSpacing[channel]})}:void log_warn(message.channelRequiredForBinned(channel2))}({fieldDef:fieldDef,fieldDef2:fieldDef2,channel:channel,markDef:markDef,scaleName:scaleName,band:getBand(channel,fieldDef,void 0,markDef,config),spacing:getFirstDefined(markDef.binSpacing,config[mark].binSpacing),reverse:scale.get("reverse")})}if((isFieldDef(fieldDef)&&hasDiscreteDomain(scaleType)||isBarBand)&&!fieldDef2){if(isFieldDef(fieldDef)&&scaleType===ScaleType.BAND){return function bandPosition(fieldDef,channel,model,defaultSizeRef){var _a;const scaleName=model.scaleName(channel),sizeChannel="x"===channel?"width":"height";if(null!=model.encoding.size||null!=model.markDef.size||void 0!==(null===(_a=defaultSizeRef)||void 0===_a?void 0:_a.value)){if(model.markDef.orient){const centeredBandPositionMixins={[channel+"c"]:valueref_fieldRef(fieldDef,scaleName,{},{band:.5})};if(getTypedFieldDef(model.encoding.size))return Object.assign(Object.assign({},centeredBandPositionMixins),nonPosition("size",model,{vgChannel:sizeChannel}));if(isValueDef(model.encoding.size))return Object.assign(Object.assign({},centeredBandPositionMixins),nonPosition("size",model,{vgChannel:sizeChannel}));if(void 0!==model.markDef.size)return Object.assign(Object.assign({},centeredBandPositionMixins),{[sizeChannel]:{value:model.markDef.size}});if(defaultSizeRef&&void 0!==defaultSizeRef.value)return Object.assign(Object.assign({},centeredBandPositionMixins),{[sizeChannel]:defaultSizeRef})}else log_warn(message.cannotApplySizeToNonOrientedMark(model.markDef.type))}const{band:band=1}=fieldDef;return{[channel]:valueref_fieldRef(fieldDef,scaleName,{binSuffix:"range"},{band:(1-band)/2}),[sizeChannel]:null!=defaultSizeRef?defaultSizeRef:bandRef(scaleName,band)}}(fieldDef,channel,model,rect_defaultSizeRef(mark,markDef,sizeChannel,scaleName,scale,config,isPositionFieldDef(fieldDef)?fieldDef.band:void 0))}return function centeredPointPositionWithSize(channel,model,defaultPosRef,defaultSizeRef){const centerChannel="x"===channel?"xc":"yc",sizeChannel="x"===channel?"width":"height";return Object.assign(Object.assign({},pointPosition(channel,model,defaultPosRef,{vgChannel:centerChannel})),nonPosition("size",model,{defaultRef:defaultSizeRef,vgChannel:sizeChannel}))}(channel,model,valueref_mid(model[sizeChannel]),rect_defaultSizeRef(mark,markDef,sizeChannel,scaleName,scale,config))}return rangePosition(channel,model,{defaultRef:"zeroOrMax",defaultRef2:"zeroOrMin"})}function rect_defaultSizeRef(mark,markDef,sizeChannel,scaleName,scale,config,band){const markPropOrConfig=getFirstDefined(markDef[sizeChannel],markDef.size,getMarkConfig("size",markDef,config,{vgChannel:sizeChannel}));if(void 0!==markPropOrConfig)return{value:markPropOrConfig};if(scale){const scaleType=scale.get("type");if("point"===scaleType||"band"===scaleType){if(void 0!==config[mark].discreteBandSize)return{value:config[mark].discreteBandSize};if(scaleType===ScaleType.POINT){const scaleRange=scale.get("range");return isVgRangeStep(scaleRange)&&Object(vega_util.E)(scaleRange.step)?{value:scaleRange.step-2}:{value:DEFAULT_STEP-2}}return bandRef(scaleName,band)}return{value:config[mark].continuousBandSize}}const step=getViewConfigDiscreteStep(config.view,sizeChannel);return{value:getFirstDefined(config[mark].discreteBandSize,step-2)}}function point_encodeEntry(model,fixedShape){const{config:config,width:width,height:height}=model;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore"})),pointPosition("x",model,valueref_mid(width))),pointPosition("y",model,valueref_mid(height))),nonPosition("size",model)),function shapeMixins(model,config,fixedShape){if(fixedShape)return{shape:{value:fixedShape}};return nonPosition("shape",model)}(model,0,fixedShape))}function defaultSize(model){const{config:config,markDef:markDef}=model,{orient:orient}=markDef,vgSizeChannel="horizontal"===orient?"width":"height",scale=model.getScaleComponent("horizontal"===orient?"x":"y"),markPropOrConfig=getFirstDefined(markDef[vgSizeChannel],markDef.size,getMarkConfig("size",markDef,config,{vgChannel:vgSizeChannel}),config.tick.bandSize);if(void 0!==markPropOrConfig)return markPropOrConfig;{const scaleRange=scale?scale.get("range"):void 0;return scaleRange&&isVgRangeStep(scaleRange)&&Object(vega_util.E)(scaleRange.step)?3*scaleRange.step/4:3*getViewConfigDiscreteStep(config.view,vgSizeChannel)/4}}const markCompiler={area:{vgMark:"area",encodeEntry:model=>Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore"})),pointOrRangePosition("x",model,{defaultRef:"zeroOrMin",defaultRef2:"zeroOrMin",range:"horizontal"===model.markDef.orient})),pointOrRangePosition("y",model,{defaultRef:"zeroOrMin",defaultRef2:"zeroOrMin",range:"vertical"===model.markDef.orient})),mixins_defined(model))},bar:{vgMark:"rect",encodeEntry:model=>Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore"})),rectPosition(model,"x","bar")),rectPosition(model,"y","bar"))},circle:{vgMark:"symbol",encodeEntry:model=>point_encodeEntry(model,"circle")},geoshape:{vgMark:"shape",encodeEntry:model=>Object.assign({},baseEncodeEntry(model,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore"})),postEncodingTransform:model=>{const{encoding:encoding}=model,shapeDef=encoding.shape;return[Object.assign({type:"geoshape",projection:model.projectionName()},shapeDef&&isFieldDef(shapeDef)&&shapeDef.type===GEOJSON?{field:vgField(shapeDef,{expr:"datum"})}:{})]}},image:{vgMark:"image",encodeEntry:model=>Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore"})),rectPosition(model,"x","image")),rectPosition(model,"y","image")),mixins_text(model,"url"))},line:{vgMark:"line",encodeEntry:model=>{const{width:width,height:height}=model;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore"})),pointPosition("x",model,valueref_mid(width))),pointPosition("y",model,valueref_mid(height))),nonPosition("size",model,{vgChannel:"strokeWidth"})),mixins_defined(model))}},point:{vgMark:"symbol",encodeEntry:model=>point_encodeEntry(model)},rect:{vgMark:"rect",encodeEntry:model=>Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore"})),rectPosition(model,"x","rect")),rectPosition(model,"y","rect"))},rule:{vgMark:"rule",encodeEntry:model=>{const{markDef:markDef,width:width,height:height}=model,orient=markDef.orient;return model.encoding.x||model.encoding.y||model.encoding.latitude||model.encoding.longitude?Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore"})),pointOrRangePosition("x",model,{defaultRef:"horizontal"===orient?"zeroOrMin":valueref_mid(width),defaultRef2:"zeroOrMax",range:"vertical"!==orient})),pointOrRangePosition("y",model,{defaultRef:"vertical"===orient?"zeroOrMin":valueref_mid(height),defaultRef2:"zeroOrMax",range:"horizontal"!==orient})),nonPosition("size",model,{vgChannel:"strokeWidth"})):{}}},square:{vgMark:"symbol",encodeEntry:model=>point_encodeEntry(model,"square")},text:{vgMark:"text",encodeEntry:model=>{const{config:config,encoding:encoding,width:width,height:height}=model;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore"})),pointPosition("x",model,valueref_mid(width))),pointPosition("y",model,valueref_mid(height))),mixins_text(model)),nonPosition("size",model,{vgChannel:"fontSize"})),valueIfDefined("align",function text_align(markDef,encoding,config){var _a;if(void 0===(null!==(_a=markDef.align)&&void 0!==_a?_a:getMarkConfig("align",markDef,config)))return"center";return}(model.markDef,0,config))),valueIfDefined("baseline",function text_baseline(markDef,encoding,config){var _a;if(void 0===(null!==(_a=markDef.baseline)&&void 0!==_a?_a:getMarkConfig("baseline",markDef,config)))return"middle";return}(model.markDef,0,config)))}},tick:{vgMark:"rect",encodeEntry:model=>{const{config:config,markDef:markDef,width:width,height:height}=model,orient=markDef.orient,vgSizeChannel="horizontal"===orient?"width":"height",vgThicknessChannel="horizontal"===orient?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore"})),pointPosition("x",model,valueref_mid(width),{vgChannel:"xc"})),pointPosition("y",model,valueref_mid(height),{vgChannel:"yc"})),nonPosition("size",model,{defaultValue:defaultSize(model),vgChannel:vgSizeChannel})),{[vgThicknessChannel]:{value:getFirstDefined(markDef.thickness,config.tick.thickness)}})}},trail:{vgMark:"trail",encodeEntry:model=>{const{width:width,height:height}=model;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore"})),pointPosition("x",model,valueref_mid(width))),pointPosition("y",model,valueref_mid(height))),nonPosition("size",model)),mixins_defined(model))}}};function parseMarkGroups(model){return util_contains([LINE,AREA,TRAIL],model.mark)?function parsePathMark(model){const details=pathGroupingFields(model.mark,model.encoding),pathMarks=getMarkGroups(model,{fromPrefix:details.length>0?FACETED_PATH_PREFIX:""});return details.length>0?[{name:model.getName("pathgroup"),type:"group",from:{facet:{name:FACETED_PATH_PREFIX+model.requestDataName(MAIN),data:model.requestDataName(MAIN),groupby:details}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:pathMarks}]:pathMarks}(model):getMarkGroups(model)}const FACETED_PATH_PREFIX="faceted_path_";function getMarkGroups(model,opt={fromPrefix:""}){const mark=model.mark,clip=getFirstDefined(model.markDef.clip,function scaleClip(model){const xScale=model.getScaleComponent("x"),yScale=model.getScaleComponent("y");return!!(xScale&&xScale.get("selectionExtent")||yScale&&yScale.get("selectionExtent"))||void 0}(model),function projectionClip(model){const projection=model.component.projection;return!(!projection||projection.isFit)||void 0}(model)),style=getStyles(model.markDef),key=model.encoding.key,sort=function mark_getSort(model){const{encoding:encoding,stack:stack,mark:mark,markDef:markDef,config:config}=model,order=encoding.order;if(!(!Object(vega_util.A)(order)&&isValueDef(order)&&isNullOrFalse(order.value)||!order&&isNullOrFalse(markDef.order)||isNullOrFalse(getMarkConfig("order",markDef,config)))){if((Object(vega_util.A)(order)||isFieldDef(order))&&!stack)return sortParams(order,{expr:"datum"});if(isPathMark(mark)){const dimensionChannel="horizontal"===markDef.orient?"y":"x",dimensionChannelDef=encoding[dimensionChannel];if(isFieldDef(dimensionChannelDef)){const s=dimensionChannelDef.sort;if(Object(vega_util.A)(s))return{field:vgField(dimensionChannelDef,{prefix:dimensionChannel,suffix:"sort_index",expr:"datum"})};if(isSortField(s))return{field:vgField({aggregate:encoding_isAggregate(model.encoding)?s.op:void 0,field:s.field},{expr:"datum"})};if(isSortByEncoding(s)){return{field:vgField(model.fieldDef(s.encoding),{expr:"datum"}),order:s.order}}return{field:vgField(dimensionChannelDef,{binSuffix:model.stack&&model.stack.impute?"mid":void 0,expr:"datum"})}}}else;}}(model),interactive=function interactiveFlag(model){if(!model.component.selection)return null;const unitCount=util_keys(model.component.selection).length;let parentCount=unitCount,parent=model.parent;for(;parent&&0===parentCount;)parentCount=util_keys(parent.component.selection).length,parent=parent.parent;return parentCount?{interactive:unitCount>0}:null}(model),postEncodingTransform=markCompiler[mark].postEncodingTransform?markCompiler[mark].postEncodingTransform(model):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:model.getName("marks"),type:markCompiler[mark].vgMark},clip?{clip:!0}:{}),style?{style:style}:{}),key?{key:key.field}:{}),sort?{sort:sort}:{}),interactive||{}),{from:{data:opt.fromPrefix+model.requestDataName(MAIN)},encode:{update:markCompiler[mark].encodeEntry(model)}}),postEncodingTransform?{transform:postEncodingTransform}:{})]}class unit_UnitModel extends model_ModelWithField{constructor(spec,parent,parentGivenName,parentGivenSize={},repeater,config){var _a;super(spec,"unit",parent,parentGivenName,config,repeater,void 0,spec.view),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection={},this.children=[];const mark=isMarkDef(spec.mark)?spec.mark.type:spec.mark,encodingWithRepeaterReplaced=function replaceRepeaterInEncoding(encoding,repeater){return replaceRepeater(encoding,repeater)}(null!=(_a=spec.encoding)?_a:{},repeater);this.markDef=normalizeMarkDef(spec.mark,encodingWithRepeaterReplaced,config,{graticule:spec.data&&isGraticuleGenerator(spec.data)});const encoding=this.encoding=normalizeEncoding(encodingWithRepeaterReplaced,this.markDef);this.size=function initLayoutSize({encoding:encoding,size:size}){for(const channel of POSITION_SCALE_CHANNELS){const sizeType=getSizeType(channel),fieldDef=getFieldDef(encoding[channel]);isStep(size[sizeType])&&fieldDef&&channeldef_isContinuous(fieldDef)&&(delete size[sizeType],log_warn(message.stepDropped(sizeType)))}return size}({encoding:encoding,size:Object.assign(Object.assign(Object.assign({},parentGivenSize),spec.width?{width:spec.width}:{}),spec.height?{height:spec.height}:{})}),this.stack=stack_stack(mark,encoding),this.specifiedScales=this.initScales(mark,encoding),this.specifiedAxes=this.initAxes(encoding),this.specifiedLegends=this.initLegend(encoding),this.specifiedProjection=spec.projection,this.selection=spec.selection}get hasProjection(){const{encoding:encoding}=this,isGeoShapeMark=this.mark===GEOSHAPE,hasGeoPosition=encoding&&GEOPOSITION_CHANNELS.some(channel=>isFieldDef(encoding[channel]));return isGeoShapeMark||hasGeoPosition}scaleDomain(channel){const scale=this.specifiedScales[channel];return scale?scale.domain:void 0}axis(channel){return this.specifiedAxes[channel]}legend(channel){return this.specifiedLegends[channel]}initScales(mark,encoding){return SCALE_CHANNELS.reduce((scales,channel)=>{let fieldDef,specifiedScale;const channelDef=encoding[channel];return isFieldDef(channelDef)?(fieldDef=channelDef,specifiedScale=channelDef.scale):hasConditionalFieldDef(channelDef)&&(fieldDef=channelDef.condition,specifiedScale=channelDef.condition.scale),fieldDef&&(scales[channel]=null!=specifiedScale?specifiedScale:{}),scales},{})}initAxes(encoding){return[channel_X,channel_Y].reduce((_axis,channel)=>{const channelDef=encoding[channel];if(isFieldDef(channelDef)||channel===channel_X&&isFieldDef(encoding.x2)||channel===channel_Y&&isFieldDef(encoding.y2)){const axisSpec=isFieldDef(channelDef)?channelDef.axis:null;null!==axisSpec&&(_axis[channel]=Object.assign({},axisSpec))}return _axis},{})}initLegend(encoding){return NONPOSITION_SCALE_CHANNELS.reduce((_legend,channel)=>{const channelDef=encoding[channel];if(channelDef){const legend=isFieldDef(channelDef)?channelDef.legend:hasConditionalFieldDef(channelDef)?channelDef.condition.legend:null;null!==legend&&!1!==legend&&function supportLegend(channel){switch(channel){case COLOR:case FILL:case STROKE:case SIZE:case SHAPE:case OPACITY:case STROKEWIDTH:return!0;case FILLOPACITY:case STROKEOPACITY:return!1}}(channel)&&(_legend[channel]=Object.assign({},legend))}return _legend},{})}parseData(){this.component.data=parse_parseData(this)}parseLayoutSize(){!function parseUnitLayoutSize(model){const{size:size,component:component}=model;for(const channel of POSITION_SCALE_CHANNELS){const sizeType=getSizeType(channel);if(size[sizeType]){const specifiedSize=size[sizeType];component.layoutSize.set(sizeType,isStep(specifiedSize)?"step":specifiedSize,!0)}else{const defaultSize=defaultUnitSize(model,sizeType);component.layoutSize.set(sizeType,defaultSize,!1)}}}(this)}parseSelections(){this.component.selection=function parseUnitSelection(model,selDefs){var _a;const selCmpts={},selectionConfig=model.config.selection;for(const name in selDefs){if(!Object(vega_util.v)(selDefs,name))continue;const selDef=duplicate(selDefs[name]),_b=selectionConfig[selDef.type],{fields:fields,encodings:encodings}=_b,cfg=__rest(_b,["fields","encodings"]);for(const key in cfg)"encodings"===key&&selDef.fields||"fields"===key&&selDef.encodings||("mark"===key&&(selDef[key]=Object.assign(Object.assign({},cfg[key]),selDef[key])),void 0!==selDef[key]&&!0!==selDef[key]||(selDef[key]=null!=(_a=cfg[key])?_a:selDef[key]));const safeName=varName(name),selCmpt=selCmpts[safeName]=Object.assign(Object.assign({},selDef),{name:safeName,events:Object(vega_util.H)(selDef.on)?event_selector(selDef.on,"scope"):selDef.on});forEachTransform(selCmpt,txCompiler=>{txCompiler.parse&&txCompiler.parse(model,selCmpt,selDef,selDefs[name])})}return selCmpts}(this,this.selection)}parseMarkGroup(){this.component.mark=parseMarkGroups(this)}parseAxesAndHeaders(){this.component.axes=function parseUnitAxes(model){return POSITION_SCALE_CHANNELS.reduce((axis,channel)=>(model.component.scales[channel]&&model.axis(channel)&&(axis[channel]=[parseAxis(channel,model)]),axis),{})}(this)}assembleSelectionTopLevelSignals(signals){return function assembleTopLevelSignals(model,signals){let hasSelections=!1;if(forEachSelection(model,(selCmpt,selCompiler)=>{const name=selCmpt.name,store=Object(vega_util.Y)(name+STORE);if(!signals.filter(s=>s.name===name).length){const resolve="global"===selCmpt.resolve?"union":selCmpt.resolve,isMulti="multi"===selCmpt.type?", true)":")";signals.push({name:selCmpt.name,update:`${VL_SELECTION_RESOLVE}(${store}, ${Object(vega_util.Y)(resolve)}${isMulti}`})}hasSelections=!0,selCompiler.topLevelSignals&&(signals=selCompiler.topLevelSignals(model,selCmpt,signals)),forEachTransform(selCmpt,txCompiler=>{txCompiler.topLevelSignals&&(signals=txCompiler.topLevelSignals(model,selCmpt,signals))})}),hasSelections){signals.filter(s=>"unit"===s.name).length||signals.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]})}return cleanupEmptyOnArray(signals)}(this,signals)}assembleSignals(){return[...assembleAxisSignals(this),...(model=this,signals=[],forEachSelection(model,(selCmpt,selCompiler)=>{const name=selCmpt.name;let modifyExpr=selCompiler.modifyExpr(model,selCmpt);signals.push(...selCompiler.signals(model,selCmpt)),forEachTransform(selCmpt,txCompiler=>{txCompiler.signals&&(signals=txCompiler.signals(model,selCmpt,signals)),txCompiler.modifyExpr&&(modifyExpr=txCompiler.modifyExpr(model,selCmpt,modifyExpr))}),signals.push({name:name+MODIFY,update:`modify(${Object(vega_util.Y)(selCmpt.name+STORE)}, ${modifyExpr})`})}),cleanupEmptyOnArray(signals))];var model,signals}assembleSelectionData(data){return function assembleUnitSelectionData(model,data){const dataCopy=[...data];return forEachSelection(model,selCmpt=>{const init={name:selCmpt.name+STORE};if(selCmpt.init){const fields=selCmpt.project.items.map(proj=>{const{signals:signals}=proj;return __rest(proj,["signals"])}),insert=selCmpt.init.map(i=>assembleInit(i,!1));init.values="interval"===selCmpt.type?[{unit:selection_unitName(model,{escape:!1}),fields:fields,values:insert}]:insert.map(i=>({unit:selection_unitName(model,{escape:!1}),fields:fields,values:i}))}dataCopy.filter(d=>d.name===selCmpt.name+STORE).length||dataCopy.push(init)}),dataCopy}(this,data)}assembleLayout(){return null}assembleLayoutSignals(){return assembleLayoutSignals(this)}assembleMarks(){var _a;let marks=null!=(_a=this.component.mark)?_a:[];return this.parent&&isLayerModel(this.parent)||(marks=assembleUnitSelectionMarks(this,marks)),marks.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(channel){return channelHasField(this.encoding,channel)}fieldDef(channel){return getTypedFieldDef(this.encoding[channel])}}class layer_LayerModel extends model_Model{constructor(spec,parent,parentGivenName,parentGivenSize,repeater,config){super(spec,"layer",parent,parentGivenName,config,repeater,spec.resolve,spec.view);const layoutSize=Object.assign(Object.assign(Object.assign({},parentGivenSize),spec.width?{width:spec.width}:{}),spec.height?{height:spec.height}:{});this.children=spec.layer.map((layer,i)=>{if(isLayerSpec(layer))return new layer_LayerModel(layer,this,this.getName("layer_"+i),layoutSize,repeater,config);if(isUnitSpec(layer))return new unit_UnitModel(layer,this,this.getName("layer_"+i),layoutSize,repeater,config);throw new Error(message.invalidSpec(layer))})}parseData(){this.component.data=parse_parseData(this);for(const child of this.children)child.parseData()}parseLayoutSize(){parseLayerLayoutSize(this)}parseSelections(){this.component.selection={};for(const child of this.children)child.parseSelections(),util_keys(child.component.selection).forEach(key=>{this.component.selection[key]=child.component.selection[key]})}parseMarkGroup(){for(const child of this.children)child.parseMarkGroup()}parseAxesAndHeaders(){!function parseLayerAxes(model){var _a;const{axes:axes,resolve:resolve}=model.component,axisCount={top:0,bottom:0,right:0,left:0};for(const child of model.children){child.parseAxesAndHeaders();for(const channel of util_keys(child.component.axes))resolve.axis[channel]=parseGuideResolve(model.component.resolve,channel),"shared"===resolve.axis[channel]&&(axes[channel]=mergeAxisComponents(axes[channel],child.component.axes[channel]),axes[channel]||(resolve.axis[channel]="independent",delete axes[channel]))}for(const channel of[channel_X,channel_Y]){for(const child of model.children)if(child.component.axes[channel]){if("independent"===resolve.axis[channel]){axes[channel]=(_a=axes[channel],null!=_a?_a:[]).concat(child.component.axes[channel]);for(const axisComponent of child.component.axes[channel]){const{value:orient,explicit:explicit}=axisComponent.getWithExplicit("orient");if(axisCount[orient]>0&&!explicit){const oppositeOrient=OPPOSITE_ORIENT[orient];axisCount[orient]>axisCount[oppositeOrient]&&axisComponent.set("orient",oppositeOrient,!1)}axisCount[orient]++}}delete child.component.axes[channel]}if("independent"===resolve.axis[channel]&&axes[channel]&&axes[channel].length>1)for(const axisCmpt of axes[channel])axisCmpt.get("grid")&&!axisCmpt.explicit.grid&&(axisCmpt.implicit.grid=!1)}}(this)}assembleSelectionTopLevelSignals(signals){return this.children.reduce((sg,child)=>child.assembleSelectionTopLevelSignals(sg),signals)}assembleSignals(){return this.children.reduce((signals,child)=>signals.concat(child.assembleSignals()),assembleAxisSignals(this))}assembleLayoutSignals(){return this.children.reduce((signals,child)=>signals.concat(child.assembleLayoutSignals()),assembleLayoutSignals(this))}assembleSelectionData(data){return this.children.reduce((db,child)=>child.assembleSelectionData(db),data)}assembleTitle(){let title=super.assembleTitle();if(title)return title;for(const child of this.children)if(title=child.assembleTitle())return title}assembleLayout(){return null}assembleMarks(){return function assembleLayerSelectionMarks(model,marks){for(const child of model.children)isUnitModel(child)&&(marks=assembleUnitSelectionMarks(child,marks));return marks}(this,this.children.flatMap(child=>child.assembleMarks()))}assembleLegends(){return this.children.reduce((legends,child)=>legends.concat(child.assembleLegends()),assembleLegends(this))}}class repeat_RepeatModel extends baseconcat_BaseConcatModel{constructor(spec,parent,parentGivenName,repeatValues,config){super(spec,"repeat",parent,parentGivenName,config,repeatValues,spec.resolve),spec.resolve&&spec.resolve.axis&&("shared"===spec.resolve.axis.x||"shared"===spec.resolve.axis.y)&&log_warn(message.REPEAT_CANNOT_SHARE_AXIS),this.repeat=spec.repeat,this.children=this._initChildren(spec,this.repeat,repeatValues,config)}_initChildren(spec,repeat,repeater,config){const children=[],row=!Object(vega_util.A)(repeat)&&repeat.row||[repeater?repeater.row:null],column=!Object(vega_util.A)(repeat)&&repeat.column||[repeater?repeater.column:null],repeatValues=Object(vega_util.A)(repeat)&&repeat||[repeater?repeater.repeat:null];for(const repeatValue of repeatValues)for(const rowValue of row)for(const columnValue of column){const name=(repeatValue?`__repeat_repeat_${repeatValue}`:"")+(rowValue?`__repeat_row_${rowValue}`:"")+(columnValue?`__repeat_column_${columnValue}`:""),childRepeat={repeat:repeatValue,row:rowValue,column:columnValue};children.push(buildModel(spec.spec,this,this.getName("child"+name),void 0,childRepeat,config))}return children}parseLayoutSize(){parseRepeatLayoutSize(this)}assembleDefaultLayout(){const{repeat:repeat}=this,columns=Object(vega_util.A)(repeat)?void 0:repeat.column?repeat.column.length:1;return Object.assign(Object.assign({},columns?{columns:columns}:{}),{bounds:"full",align:"all"})}}function buildModel(spec,parent,parentGivenName,unitSize,repeater,config){if(isFacetSpec(spec))return new facet_FacetModel(spec,parent,parentGivenName,repeater,config);if(isLayerSpec(spec))return new layer_LayerModel(spec,parent,parentGivenName,unitSize,repeater,config);if(isUnitSpec(spec))return new unit_UnitModel(spec,parent,parentGivenName,unitSize,repeater,config);if(isRepeatSpec(spec))return new repeat_RepeatModel(spec,parent,parentGivenName,repeater,config);if(function isAnyConcatSpec(spec){return isVConcatSpec(spec)||isHConcatSpec(spec)||isConcatSpec(spec)}(spec))return new concat_ConcatModel(spec,parent,parentGivenName,repeater,config);throw new Error(message.invalidSpec(spec))}function compile(inputSpec,opt={}){opt.logger&&function log_set(newLogger){return log_current=newLogger}(opt.logger),opt.fieldTitle&&setTitleFormatter(opt.fieldTitle);try{const config=initConfig(Object(vega_util.M)({},opt.config,inputSpec.config)),spec=normalize_normalize(inputSpec,config),model=buildModel(spec,null,"",void 0,void 0,config);return model.parse(),function optimizeDataflow(data,model){checkLinks(data.sources);let firstPassCounter=0,secondPassCounter=0;for(let i=0;i<MAX_OPTIMIZATION_RUNS&&optimizationDataflowHelper(data,model);i++)firstPassCounter++;data.sources.map(moveFacetDown);for(let i=0;i<MAX_OPTIMIZATION_RUNS&&optimizationDataflowHelper(data,model);i++)secondPassCounter++;checkLinks(data.sources),Math.max(firstPassCounter,secondPassCounter)===MAX_OPTIMIZATION_RUNS&&log_warn(`Maximum optimization runs(${MAX_OPTIMIZATION_RUNS}) reached.`)}(model.component.data,model),{spec:function assembleTopLevelModel(model,topLevelProperties,datasets={},usermeta){const vgConfig=model.config?stripAndRedirectConfig(model.config):void 0,data=[].concat(model.assembleSelectionData([]),function assembleRootData(dataComponent,datasets){var _a,_b;const data=[],walkTree=makeWalkTree(data);let sourceIndex=0;dataComponent.sources.forEach(root=>{root.hasName()||(root.dataName=`source_${sourceIndex++}`);const newData=root.assemble();walkTree(root,newData)}),data.forEach(d=>{0===d.transform.length&&delete d.transform});let whereTo=0;for(const[i,d]of data.entries())0!==(_a=d.transform,null!=_a?_a:[]).length||d.source||data.splice(whereTo++,0,data.splice(i,1)[0]);for(const d of data)for(const t of null!=(_b=d.transform)?_b:[])"lookup"===t.type&&(t.from=dataComponent.outputNodes[t.from].getSource());for(const d of data)d.name in datasets&&(d.values=datasets[d.name]);return data}(model.component.data,datasets)),projections=model.assembleProjections(),title=model.assembleTitle(),style=model.assembleGroupStyle(),encodeEntry=model.assembleGroupEncodeEntry(!0);let layoutSignals=model.assembleLayoutSignals();return layoutSignals=layoutSignals.filter(signal=>"width"!==signal.name&&"height"!==signal.name||void 0===signal.value||(topLevelProperties[signal.name]=+signal.value,!1)),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},model.description?{description:model.description}:{}),topLevelProperties),title?{title:title}:{}),style?{style:style}:{}),encodeEntry?{encode:{update:encodeEntry}}:{}),{data:data}),projections.length>0?{projections:projections}:{}),model.assembleGroup([...layoutSignals,...model.assembleSelectionTopLevelSignals([])])),vgConfig?{config:vgConfig}:{}),usermeta?{usermeta:usermeta}:{})}(model,function getTopLevelProperties(inputSpec,autosize,config,model){const width=model.component.layoutSize.get("width"),height=model.component.layoutSize.get("height");Object(vega_util.H)(autosize)&&(autosize={type:autosize});if(width&&height&&function isFitType(autoSizeType){return"fit"===autoSizeType||"fit-x"===autoSizeType||"fit-y"===autoSizeType}(autosize.type))if("step"===width&&"step"===height)log_warn(message.droppingFit()),autosize.type="pad";else if("step"===width||"step"===height){const sizeType="step"===width?"width":"height";log_warn(message.droppingFit(getPositionScaleChannel(sizeType)));const inverseSizeType="width"===sizeType?"height":"width";autosize.type=function getFitType(sizeType){return sizeType?`fit-${getPositionScaleChannel(sizeType)}`:"fit"}(inverseSizeType)}return Object.assign(Object.assign(Object.assign({},1===util_keys(autosize).length&&autosize.type?"pad"===autosize.type?{}:{autosize:autosize.type}:{autosize:autosize}),extractTopLevelProperties(config)),extractTopLevelProperties(inputSpec))}(inputSpec,spec.autosize,config,model),inputSpec.datasets,inputSpec.usermeta),normalized:spec}}finally{opt.logger&&log_reset(),opt.fieldTitle&&function resetTitleFormatter(){setTitleFormatter(defaultTitleFormatter)}()}}const extractor=new class transformextract_TransformExtractMapper extends map_SpecMapper{mapUnit(spec,{config:config}){if(spec.encoding){const{encoding:oldEncoding,transform:oldTransforms}=spec,{bins:bins,timeUnits:timeUnits,aggregate:aggregate,groupby:groupby,encoding:encoding}=extractTransformsFromEncoding(oldEncoding,config),transform=[...oldTransforms||[],...bins,...timeUnits,...aggregate.length?[{aggregate:aggregate,groupby:groupby}]:[]];return Object.assign(Object.assign(Object.assign({},spec),transform.length>0?{transform:transform}:{}),{encoding:encoding})}return spec}};function extractTransforms(spec,config){return extractor.map(spec,{config:config})}const version=build_package.version;var vega_schema_url_parser=__webpack_require__(175),vega_schema_url_parser_default=__webpack_require__.n(vega_schema_url_parser),vega_themes_build_package=__webpack_require__(274);var theme_dark={background:"#333",title:{color:"#fff"},style:{"guide-label":{fill:"#fff"},"guide-title":{fill:"#fff"}},axis:{domainColor:"#fff",gridColor:"#888",tickColor:"#fff"}};var theme_excel={background:"#fff",arc:{fill:"#4572a7"},area:{fill:"#4572a7"},line:{stroke:"#4572a7",strokeWidth:2},path:{stroke:"#4572a7"},rect:{fill:"#4572a7"},shape:{stroke:"#4572a7"},symbol:{fill:"#4572a7",strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}};var theme_fivethirtyeight={arc:{fill:"#30a2da"},area:{fill:"#30a2da"},axis:{domainColor:"#cbcbcb",grid:!0,gridColor:"#cbcbcb",gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:"#cbcbcb",tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:"#f0f0f0",group:{fill:"#f0f0f0"},legend:{labelColor:"#333",labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:"#333",titleFontSize:14,titlePadding:10},line:{stroke:"#30a2da",strokeWidth:2},path:{stroke:"#30a2da",strokeWidth:.5},rect:{fill:"#30a2da"},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:"#30a2da"},style:{bar:{binSpacing:2,fill:"#30a2da",stroke:null}},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}};var theme_ggplot2={group:{fill:"#e5e5e5"},arc:{fill:"#000"},area:{fill:"#000"},line:{stroke:"#000"},path:{stroke:"#000"},rect:{fill:"#000"},shape:{stroke:"#000"},symbol:{fill:"#000",size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}};const titleFont="Benton Gothic Bold, sans-serif",colorSchemes={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]};var theme_latimes={background:"#ffffff",title:{anchor:"start",color:"#000000",font:titleFont,fontSize:22,fontWeight:"normal"},arc:{fill:"#82c6df"},area:{fill:"#82c6df"},line:{stroke:"#82c6df",strokeWidth:2},path:{stroke:"#82c6df"},rect:{fill:"#82c6df"},shape:{stroke:"#82c6df"},symbol:{fill:"#82c6df",size:30},axis:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,labelFontWeight:"normal",titleFont:titleFont,titleFontSize:13,titleFontWeight:"normal"},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,symbolType:"square",titleFont:titleFont,titleFontSize:13,titleFontWeight:"normal"},range:{category:colorSchemes["category-6"],diverging:colorSchemes["fireandice-6"],heatmap:colorSchemes["fire-7"],ordinal:colorSchemes["fire-7"],ramp:colorSchemes["fire-7"]}};var theme_quartz={background:"#f9f9f9",arc:{fill:"#ab5787"},area:{fill:"#ab5787"},line:{stroke:"#ab5787"},path:{stroke:"#ab5787"},rect:{fill:"#ab5787"},shape:{stroke:"#ab5787"},symbol:{fill:"#ab5787",size:30},axis:{domainColor:"#979797",domainWidth:.5,gridWidth:.2,labelColor:"#979797",tickColor:"#979797",tickWidth:.2,titleColor:"#979797"},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}};var theme_vox={background:"#fff",arc:{fill:"#3e5c69"},area:{fill:"#3e5c69"},line:{stroke:"#3e5c69"},path:{stroke:"#3e5c69"},rect:{fill:"#3e5c69"},shape:{stroke:"#3e5c69"},symbol:{fill:"#3e5c69"},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}};const theme_urbaninstitute_colorSchemes={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]};var theme_urbaninstitute={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:"Lato"},axisX:{domain:!0,domainColor:"#000000",domainWidth:1,grid:!1,labelFontSize:12,labelFont:"Lato",labelAngle:0,tickColor:"#000000",tickSize:5,titleFontSize:12,titlePadding:10,titleFont:"Lato"},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:"Lato",labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:"Lato",titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:"Lato",symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:"Lato",orient:"right",offset:10},view:{stroke:"transparent"},range:{category:theme_urbaninstitute_colorSchemes["six-groups-cat-1"],diverging:theme_urbaninstitute_colorSchemes["diverging-colors"],heatmap:theme_urbaninstitute_colorSchemes["diverging-colors"],ordinal:theme_urbaninstitute_colorSchemes["six-groups-seq"],ramp:theme_urbaninstitute_colorSchemes["shades-blue"]},area:{fill:"#1696d2"},rect:{fill:"#1696d2"},line:{color:"#1696d2",stroke:"#1696d2",strokeWidth:5},trail:{color:"#1696d2",stroke:"#1696d2",strokeWidth:0,size:1},path:{stroke:"#1696d2",strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:"#1696d2",fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:"#1696d2",stroke:!1}},arc:{fill:"#1696d2"},shape:{stroke:"#1696d2"},symbol:{fill:"#1696d2",size:30}};const src_version=vega_themes_build_package.version;var vega_tooltip_build_package=__webpack_require__(275),src_style="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n";const EL_ID="vg-tooltip-element",DEFAULT_OPTIONS={offsetX:10,offsetY:10,id:EL_ID,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function escapeHTML(value){return String(value).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2};var formatValue_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function formatValue_stringify(obj,maxDepth){return JSON.stringify(obj,function replacer(maxDepth){const stack=[];return function(key,value){if("object"!=typeof value||null===value)return value;const pos=stack.indexOf(this)+1;return stack.length=pos,stack.length>maxDepth?"[Object]":stack.indexOf(value)>=0?"[Circular]":(stack.push(value),value)}}(maxDepth))}class src_Handler_Handler{constructor(options){this.options=Object.assign(Object.assign({},DEFAULT_OPTIONS),options);const elementId=this.options.id;if(this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const style=document.createElement("style");style.setAttribute("id",this.options.styleId),style.innerHTML=function createDefaultStyle(id){if(!/^[A-Za-z]+[-:.\w]*$/.test(id))throw new Error("Invalid HTML ID");return src_style.toString().replace(EL_ID,id)}(elementId);const head=document.head;head.childNodes.length>0?head.insertBefore(style,head.childNodes[0]):head.appendChild(style)}this.el=document.getElementById(elementId),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",elementId),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}tooltipHandler(handler,event,item,value){if(null==value||""===value)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=function formatValue_formatValue(value,valueToHtml,maxDepth){if(Object(vega_util.A)(value))return`[${value.map(v=>valueToHtml(Object(vega_util.H)(v)?v:formatValue_stringify(v,maxDepth))).join(", ")}]`;if(Object(vega_util.F)(value)){let content="";const _a=value,{title:title}=_a,rest=formatValue_rest(_a,["title"]);title&&(content+=`<h2>${valueToHtml(title)}</h2>`);const keys=Object.keys(rest);if(keys.length>0){content+="<table>";for(const key of keys){let val=rest[key];void 0!==val&&(Object(vega_util.F)(val)&&(val=formatValue_stringify(val,maxDepth)),content+=`<tr><td class="key">${valueToHtml(key)}:</td><td class="value">${valueToHtml(val)}</td></tr>`)}content+="</table>"}return content||"{}"}return valueToHtml(value)}(value,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:x,y:y}=function calculatePosition(event,tooltipBox,offsetX,offsetY){let x=event.clientX+offsetX;x+tooltipBox.width>window.innerWidth&&(x=+event.clientX-offsetX-tooltipBox.width);let y=event.clientY+offsetY;return y+tooltipBox.height>window.innerHeight&&(y=+event.clientY-offsetY-tooltipBox.height),{x:x,y:y}}(event,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${y}px; left: ${x}px`)}}vega_tooltip_build_package.version;var src_post=function(window,url,data){const editor=window.open(url),step=250;let count=~~(1e4/step);window.addEventListener("message",(function listen(evt){evt.source===editor&&(count=0,window.removeEventListener("message",listen,!1))}),!1),setTimeout((function send(){count<=0||(editor.postMessage(data,"*"),setTimeout(send,step),count-=1)}),step)},build_src_style='.vega-embed {\n  position: relative;\n  display: inline-block; }\n  .vega-embed.has-actions {\n    padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5); }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: scroll;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n';function util_mergeDeep(dest,...src){for(const s of src)util_deepMerge_(dest,s);return dest}function util_deepMerge_(dest,src){for(const property of Object.keys(src))Object(vega_util.ib)(dest,property,src[property],!0)}String.prototype.startsWith||(String.prototype.startsWith=function(search,pos){return this.substr(!pos||pos<0?0:+pos,search.length)===search}),__webpack_require__.d(__webpack_exports__,"b",(function(){return vega})),__webpack_require__.d(__webpack_exports__,"a",(function(){return embed_embed}));const vega=vega_namespaceObject;let vegaLite=build_src_namespaceObject;const embed_w=window;void 0===vegaLite&&embed_w.vl&&embed_w.vl.compile&&(vegaLite=embed_w.vl);const DEFAULT_ACTIONS={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},I18N={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},NAMES={vega:"Vega","vega-lite":"Vega-Lite"},VERSION={vega:vega.version,"vega-lite":vegaLite?vegaLite.version:"not available"},PREPROCESSOR={vega:vgSpec=>vgSpec,"vega-lite":(vlSpec,config)=>vegaLite.compile(vlSpec,{config:config}).spec},SVG_CIRCLES='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>';function viewSource(source,sourceHeader,sourceFooter,mode){const header=`<html><head>${sourceHeader}</head><body><pre><code class="json">`,footer=`</code></pre>${sourceFooter}</body></html>`,win=window.open("");win.document.write(header+source+footer),win.document.title=`${NAMES[mode]} JSON Source`}function embed_embed(el,spec,opts={}){return __awaiter(this,void 0,void 0,(function*(){const loader=function isLoader(o){return!!(o&&"load"in o)}(opts.loader)?opts.loader:vega.loader(opts.loader),parsedSpec=Object(vega_util.H)(spec)?JSON.parse(yield loader.load(spec)):spec,usermetaOpts=yield loadOpts(parsedSpec.usermeta&&parsedSpec.usermeta.embedOptions||{},loader),parsedOpts=yield loadOpts(opts,loader),mergedOpts=Object.assign(Object.assign({},util_mergeDeep(parsedOpts,usermetaOpts)),{config:Object(vega_util.M)(parsedOpts.config,usermetaOpts.config)});return yield function _embed(el,spec,opts={},loader){return __awaiter(this,void 0,void 0,(function*(){const config=opts.theme?Object(vega_util.M)(vega_themes_build_src_namespaceObject[opts.theme],opts.config):opts.config,actions=Object(vega_util.B)(opts.actions)?opts.actions:util_mergeDeep({},DEFAULT_ACTIONS,opts.actions||{}),i18n=Object.assign(Object.assign({},I18N),opts.i18n),renderer=opts.renderer||"canvas",logLevel=opts.logLevel||vega.Warn,downloadFileName=opts.downloadFileName||"visualization";if(!1!==opts.defaultStyle){const ID="vega-embed-style";if(!document.getElementById(ID)){const style=document.createElement("style");style.id=ID,style.innerText=void 0===opts.defaultStyle||!0===opts.defaultStyle?(build_src_style||"").toString():opts.defaultStyle,document.head.appendChild(style)}}const mode=function guessMode(spec,providedMode){if(spec.$schema){const parsed=vega_schema_url_parser_default()(spec.$schema);providedMode&&providedMode!==parsed.library&&console.warn(`The given visualization spec is written in ${NAMES[parsed.library]}, but mode argument sets ${NAMES[providedMode]||providedMode}.`);const mode=parsed.library;return Object(semver.satisfies)(VERSION[mode],`^${parsed.version.slice(1)}`)||console.warn(`The input spec uses ${NAMES[mode]} ${parsed.version}, but the current version of ${NAMES[mode]} is v${VERSION[mode]}.`),mode}return"mark"in spec||"encoding"in spec||"layer"in spec||"hconcat"in spec||"vconcat"in spec||"facet"in spec||"repeat"in spec?"vega-lite":"marks"in spec||"signals"in spec||"scales"in spec||"axes"in spec?"vega":providedMode||"vega"}(spec,opts.mode);let vgSpec=PREPROCESSOR[mode](spec,config);if("vega-lite"===mode&&vgSpec.$schema){const parsed=vega_schema_url_parser_default()(vgSpec.$schema);Object(semver.satisfies)(VERSION.vega,`^${parsed.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${parsed.version}, but current version is v${VERSION.vega}.`)}const div="string"==typeof el?document.querySelector(el):el;div.classList.add("vega-embed"),actions&&div.classList.add("has-actions"),div.innerHTML="";const patch=opts.patch;patch&&(vgSpec=patch instanceof Function?patch(vgSpec):applyPatch(vgSpec,patch,!0,!1).newDocument);const runtime=vega.parse(vgSpec,"vega-lite"===mode?{}:config),view=new vega.View(runtime,{loader:loader,logLevel:logLevel,renderer:renderer});if(!1!==opts.tooltip){let handler;handler=function isTooltipHandler(h){return"function"==typeof h}(opts.tooltip)?opts.tooltip:new src_Handler_Handler(!0===opts.tooltip?{}:opts.tooltip).call,view.tooltip(handler)}let{hover:hover}=opts;if(void 0===hover&&(hover="vega"===mode),hover){const{hoverSet:hoverSet,updateSet:updateSet}="boolean"==typeof hover?{}:hover;view.hover(hoverSet,updateSet)}if(opts&&(opts.width&&view.width(opts.width),opts.height&&view.height(opts.height),opts.padding&&view.padding(opts.padding)),yield view.initialize(el).runAsync(),!1!==actions){let wrapper=div;if(!1!==opts.defaultStyle){const details=document.createElement("details");details.title=i18n.CLICK_TO_VIEW_ACTIONS,div.append(details),wrapper=details;const summary=document.createElement("summary");summary.innerHTML=SVG_CIRCLES,details.append(summary),document.addEventListener("click",evt=>{details.contains(evt.target)||details.removeAttribute("open")})}const ctrl=document.createElement("div");if(wrapper.append(ctrl),ctrl.classList.add("vega-actions"),!0===actions||!1!==actions.export)for(const ext of["svg","png"])if(!0===actions||!0===actions.export||actions.export[ext]){const i18nExportAction=i18n[`${ext.toUpperCase()}_ACTION`],exportLink=document.createElement("a");exportLink.text=i18nExportAction,exportLink.href="#",exportLink.target="_blank",exportLink.download=`${downloadFileName}.${ext}`,exportLink.addEventListener("mousedown",(function(e){view.toImageURL(ext,opts.scaleFactor).then(url=>{this.href=url}).catch(error=>{throw error}),e.preventDefault()})),ctrl.append(exportLink)}if(!0===actions||!1!==actions.source){const viewSourceLink=document.createElement("a");viewSourceLink.text=i18n.SOURCE_ACTION,viewSourceLink.href="#",viewSourceLink.addEventListener("mousedown",(function(e){viewSource(json_stringify_pretty_compact_default()(spec),opts.sourceHeader||"",opts.sourceFooter||"",mode),e.preventDefault()})),ctrl.append(viewSourceLink)}if("vega-lite"===mode&&(!0===actions||!1!==actions.compiled)){const compileLink=document.createElement("a");compileLink.text=i18n.COMPILED_ACTION,compileLink.href="#",compileLink.addEventListener("mousedown",(function(e){viewSource(json_stringify_pretty_compact_default()(vgSpec),opts.sourceHeader||"",opts.sourceFooter||"","vega"),e.preventDefault()})),ctrl.append(compileLink)}if(!0===actions||!1!==actions.editor){const editorUrl=opts.editorUrl||"https://vega.github.io/editor/",editorLink=document.createElement("a");editorLink.text=i18n.EDITOR_ACTION,editorLink.href="#",editorLink.addEventListener("mousedown",(function(e){src_post(window,editorUrl,{config:config,mode:mode,renderer:renderer,spec:json_stringify_pretty_compact_default()(spec)}),e.preventDefault()})),ctrl.append(editorLink)}}return{view:view,spec:spec,vgSpec:vgSpec}}))}(el,parsedSpec,mergedOpts,loader)}))}function loadOpts(opt,loader){return __awaiter(this,void 0,void 0,(function*(){const config=Object(vega_util.H)(opt.config)?JSON.parse(yield loader.load(opt.config)):opt.config||{},patch=Object(vega_util.H)(opt.patch)?JSON.parse(yield loader.load(opt.patch)):opt.patch;return Object.assign(Object.assign(Object.assign({},opt),patch?{patch:patch}:{}),config?{config:config}:{})}))}},,function(module,exports,__webpack_require__){"use strict";var stringOrChar=/("(?:[^\\"]|\\.)*")|[:,]/g;module.exports=function stringify(passedObj,options){var indent,maxLength,replacer;return options=options||{},indent=JSON.stringify([1],void 0,void 0===options.indent?2:options.indent).slice(2,-3),maxLength=""===indent?1/0:void 0===options.maxLength?80:options.maxLength,replacer=options.replacer,function _stringify(obj,currentIndent,reserved){var end,index,items,key,keyPart,keys,length,nextIndent,prettified,start,string,value;if(obj&&"function"==typeof obj.toJSON&&(obj=obj.toJSON()),void 0===(string=JSON.stringify(obj,replacer)))return string;if(length=maxLength-currentIndent.length-reserved,string.length<=length&&(prettified=string.replace(stringOrChar,(function(match,stringLiteral){return stringLiteral||match+" "}))).length<=length)return prettified;if(null!=replacer&&(obj=JSON.parse(string),replacer=void 0),"object"==typeof obj&&null!==obj){if(nextIndent=currentIndent+indent,items=[],index=0,Array.isArray(obj))for(start="[",end="]",length=obj.length;index<length;index++)items.push(_stringify(obj[index],nextIndent,index===length-1?0:1)||"null");else for(start="{",end="}",length=(keys=Object.keys(obj)).length;index<length;index++)key=keys[index],keyPart=JSON.stringify(key)+": ",void 0!==(value=_stringify(obj[key],nextIndent,keyPart.length+(index===length-1?0:1)))&&items.push(keyPart+value);if(items.length>0)return[start,indent+items.join(",\n"+nextIndent),end].join("\n"+currentIndent)}return string}(passedObj,"",0)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(data,opts){opts||(opts={}),"function"==typeof opts&&(opts={cmp:opts});var f,cycles="boolean"==typeof opts.cycles&&opts.cycles,cmp=opts.cmp&&(f=opts.cmp,function(node){return function(a,b){var aobj={key:a,value:node[a]},bobj={key:b,value:node[b]};return f(aobj,bobj)}}),seen=[];return function stringify(node){if(node&&node.toJSON&&"function"==typeof node.toJSON&&(node=node.toJSON()),void 0!==node){if("number"==typeof node)return isFinite(node)?""+node:"null";if("object"!=typeof node)return JSON.stringify(node);var i,out;if(Array.isArray(node)){for(out="[",i=0;i<node.length;i++)i&&(out+=","),out+=stringify(node[i])||"null";return out+"]"}if(null===node)return"null";if(-1!==seen.indexOf(node)){if(cycles)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var seenIndex=seen.push(node)-1,keys=Object.keys(node).sort(cmp&&cmp(node));for(out="",i=0;i<keys.length;i++){var key=keys[i],value=stringify(node[key]);value&&(out&&(out+=","),out+=JSON.stringify(key)+":"+value)}return seen.splice(seenIndex,1),"{"+out+"}"}}(data)}},,,function(module,exports){!function(global){"use strict";var undefined,Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag",inModule="object"==typeof module,runtime=global.regeneratorRuntime;if(runtime)inModule&&(module.exports=runtime);else{(runtime=global.regeneratorRuntime=inModule?module.exports:{}).wrap=wrap;var GenStateSuspendedStart="suspendedStart",GenStateSuspendedYield="suspendedYield",GenStateExecuting="executing",GenStateCompleted="completed",ContinueSentinel={},IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this};var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[toStringTagSymbol]=GeneratorFunction.displayName="GeneratorFunction",runtime.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},runtime.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,toStringTagSymbol in genFun||(genFun[toStringTagSymbol]="GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},runtime.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this},runtime.AsyncIterator=AsyncIterator,runtime.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return runtime.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),Gp[toStringTagSymbol]="Generator",Gp[iteratorSymbol]=function(){return this},Gp.toString=function(){return"[object Generator]"},runtime.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},runtime.values=values,Context.prototype={constructor:Context,reset:function(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined)},stop:function(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel}}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function makeInvokeMethod(innerFn,self,context){var state=GenStateSuspendedStart;return function invoke(method,arg){if(state===GenStateExecuting)throw new Error("Generator is already running");if(state===GenStateCompleted){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if(state===GenStateSuspendedStart)throw state=GenStateCompleted,context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?GenStateCompleted:GenStateSuspendedYield,record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state=GenStateCompleted,context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){prototype[method]=function(arg){return this._invoke(method,arg)}}))}function AsyncIterator(generator){var previousPromise;this._invoke=function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new Promise((function(resolve,reject){!function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?Promise.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):Promise.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(method===undefined){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:undefined,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){"use strict";var slice=Array.prototype.slice,isArgs=__webpack_require__(177),origKeys=Object.keys,keysShim=origKeys?function keys(o){return origKeys(o)}:__webpack_require__(293),originalKeys=Object.keys;keysShim.shim=function shimObjectKeys(){Object.keys?function(){var args=Object.keys(arguments);return args&&args.length===arguments.length}(1,2)||(Object.keys=function keys(object){return isArgs(object)?originalKeys(slice.call(object)):originalKeys(object)}):Object.keys=keysShim;return Object.keys||keysShim},module.exports=keysShim},function(module,exports,__webpack_require__){var hasMap="function"==typeof Map&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&"function"==typeof mapSizeDescriptor.get?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet="function"==typeof Set&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&"function"==typeof setSizeDescriptor.get?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,bigIntValueOf="function"==typeof BigInt?BigInt.prototype.valueOf:null,inspectCustom=__webpack_require__(306).custom,inspectSymbol=inspectCustom&&isSymbol(inspectCustom)?inspectCustom:null;function wrapQuotes(s,defaultStyle,opts){var quoteChar="double"===(opts.quoteStyle||defaultStyle)?'"':"'";return quoteChar+s+quoteChar}function quote(s){return String(s).replace(/"/g,"&quot;")}function isArray(obj){return"[object Array]"===toStr(obj)}function isSymbol(obj){return"[object Symbol]"===toStr(obj)}module.exports=function inspect_(obj,opts,depth,seen){if(opts||(opts={}),has(opts,"quoteStyle")&&"single"!==opts.quoteStyle&&"double"!==opts.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(void 0===obj)return"undefined";if(null===obj)return"null";if("boolean"==typeof obj)return obj?"true":"false";if("string"==typeof obj)return function inspectString(str,opts){return wrapQuotes(str.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,lowbyte),"single",opts)}(obj,opts);if("number"==typeof obj)return 0===obj?1/0/obj>0?"0":"-0":String(obj);if("bigint"==typeof obj)return String(obj)+"n";var maxDepth=void 0===opts.depth?5:opts.depth;if(void 0===depth&&(depth=0),depth>=maxDepth&&maxDepth>0&&"object"==typeof obj)return"[Object]";if(void 0===seen)seen=[];else if(function indexOf(xs,x){if(xs.indexOf)return xs.indexOf(x);for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}(seen,obj)>=0)return"[Circular]";function inspect(value,from){return from&&(seen=seen.slice()).push(from),inspect_(value,opts,depth+1,seen)}if("function"==typeof obj){var name=function nameOf(f){if(f.name)return f.name;var m=String(f).match(/^function\s*([\w$]+)/);if(m)return m[1]}(obj);return"[Function"+(name?": "+name:"")+"]"}if(isSymbol(obj)){var symString=Symbol.prototype.toString.call(obj);return"object"==typeof obj?markBoxed(symString):symString}if(function isElement(x){if(!x||"object"!=typeof x)return!1;if("undefined"!=typeof HTMLElement&&x instanceof HTMLElement)return!0;return"string"==typeof x.nodeName&&"function"==typeof x.getAttribute}(obj)){for(var s="<"+String(obj.nodeName).toLowerCase(),attrs=obj.attributes||[],i=0;i<attrs.length;i++)s+=" "+attrs[i].name+"="+wrapQuotes(quote(attrs[i].value),"double",opts);return s+=">",obj.childNodes&&obj.childNodes.length&&(s+="..."),s+="</"+String(obj.nodeName).toLowerCase()+">"}if(isArray(obj))return 0===obj.length?"[]":"[ "+arrObjKeys(obj,inspect).join(", ")+" ]";if(function isError(obj){return"[object Error]"===toStr(obj)}(obj))return 0===(parts=arrObjKeys(obj,inspect)).length?"["+String(obj)+"]":"{ ["+String(obj)+"] "+parts.join(", ")+" }";if("object"==typeof obj){if(inspectSymbol&&"function"==typeof obj[inspectSymbol])return obj[inspectSymbol]();if("function"==typeof obj.inspect)return obj.inspect()}if(function isMap(x){if(!mapSize)return!1;try{mapSize.call(x);try{setSize.call(x)}catch(s){return!0}return x instanceof Map}catch(e){}return!1}(obj)){var parts=[];return mapForEach.call(obj,(function(value,key){parts.push(inspect(key,obj)+" => "+inspect(value,obj))})),collectionOf("Map",mapSize.call(obj),parts)}if(function isSet(x){if(!setSize)return!1;try{setSize.call(x);try{mapSize.call(x)}catch(m){return!0}return x instanceof Set}catch(e){}return!1}(obj)){parts=[];return setForEach.call(obj,(function(value){parts.push(inspect(value,obj))})),collectionOf("Set",setSize.call(obj),parts)}if(function isNumber(obj){return"[object Number]"===toStr(obj)}(obj))return markBoxed(inspect(Number(obj)));if(function isBigInt(obj){return"[object BigInt]"===toStr(obj)}(obj))return markBoxed(inspect(bigIntValueOf.call(obj)));if(function isBoolean(obj){return"[object Boolean]"===toStr(obj)}(obj))return markBoxed(booleanValueOf.call(obj));if(function isString(obj){return"[object String]"===toStr(obj)}(obj))return markBoxed(inspect(String(obj)));if(!function isDate(obj){return"[object Date]"===toStr(obj)}(obj)&&!function isRegExp(obj){return"[object RegExp]"===toStr(obj)}(obj)){var xs=arrObjKeys(obj,inspect);return 0===xs.length?"{}":"{ "+xs.join(", ")+" }"}return String(obj)};var hasOwn=Object.prototype.hasOwnProperty||function(key){return key in this};function has(obj,key){return hasOwn.call(obj,key)}function toStr(obj){return objectToString.call(obj)}function lowbyte(c){var n=c.charCodeAt(0),x={8:"b",9:"t",10:"n",12:"f",13:"r"}[n];return x?"\\"+x:"\\x"+(n<16?"0":"")+n.toString(16)}function markBoxed(str){return"Object("+str+")"}function collectionOf(type,size,entries){return type+" ("+size+") {"+entries.join(", ")+"}"}function arrObjKeys(obj,inspect){var isArr=isArray(obj),xs=[];if(isArr){xs.length=obj.length;for(var i=0;i<obj.length;i++)xs[i]=has(obj,i)?inspect(obj[i],obj):""}for(var key in obj)has(obj,key)&&(isArr&&String(Number(key))===key&&key<obj.length||(/[^\w$]/.test(key)?xs.push(inspect(key,obj)+": "+inspect(obj[key],obj)):xs.push(key+": "+inspect(obj[key],obj))));return xs}},function(module,exports,__webpack_require__){"use strict";module.exports=Number.isNaN||function isNaN(a){return a!=a}},function(module,exports,__webpack_require__){"use strict";module.exports=function forEach(array,callback){for(var i=0;i<array.length;i+=1)callback(array[i],i,array)}},function(module,exports,__webpack_require__){"use strict";module.exports=function every(array,predicate){for(var i=0;i<array.length;i+=1)if(!predicate(array[i],i,array))return!1;return!0}},function(module,exports,__webpack_require__){"use strict";module.exports=function requirePromise(){if("function"!=typeof Promise)throw new TypeError("`Promise.prototype.finally` requires a global `Promise` be available.")}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(10),keys=__webpack_require__(129),inspect=__webpack_require__(130),ES2017=__webpack_require__(333),assign=__webpack_require__(65),forEach=__webpack_require__(132),callBind=__webpack_require__(86),every=__webpack_require__(133),isPrefixOf=__webpack_require__(193),$String=GetIntrinsic("%String%"),$TypeError=GetIntrinsic("%TypeError%"),callBound=__webpack_require__(44),regexTester=__webpack_require__(188),$isNaN=__webpack_require__(131),$SymbolValueOf=callBound("Symbol.prototype.valueOf",!0),$strSlice=callBound("String.prototype.slice"),$indexOf=callBound("String.prototype.indexOf"),$parseInt=parseInt,isDigit=regexTester(/^[0-9]$/),$PromiseResolve=callBound("Promise.resolve",!0),$isEnumerable=callBound("Object.prototype.propertyIsEnumerable"),$pushApply=callBind.apply(GetIntrinsic("%Array.prototype.push%")),$gOPS=$SymbolValueOf?GetIntrinsic("%Object.getOwnPropertySymbols%"):null,padTimeComponent=function padTimeComponent(c,count){return $strSlice("00"+c,-(count||2))},weekdays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ES2018=assign(assign({},ES2017),{EnumerableOwnPropertyNames:ES2017.EnumerableOwnProperties,thisSymbolValue:function thisSymbolValue(value){if(!$SymbolValueOf)throw new SyntaxError("Symbols are not supported; thisSymbolValue requires that `value` be a Symbol or a Symbol object");return"Symbol"===this.Type(value)?value:$SymbolValueOf(value)},IsStringPrefix:function IsStringPrefix(p,q){if("String"!==this.Type(p))throw new TypeError('Assertion failed: "p" must be a String');if("String"!==this.Type(q))throw new TypeError('Assertion failed: "q" must be a String');return isPrefixOf(p,q)},NumberToString:function NumberToString(m){if("Number"!==this.Type(m))throw new TypeError('Assertion failed: "m" must be a String');return $String(m)},CopyDataProperties:function CopyDataProperties(target,source,excludedItems){if("Object"!==this.Type(target))throw new TypeError('Assertion failed: "target" must be an Object');if(!this.IsArray(excludedItems))throw new TypeError('Assertion failed: "excludedItems" must be a List of Property Keys');for(var i=0;i<excludedItems.length;i+=1)if(!this.IsPropertyKey(excludedItems[i]))throw new TypeError('Assertion failed: "excludedItems" must be a List of Property Keys');if(null==source)return target;var ES=this,fromObj=ES.ToObject(source),sourceKeys=function OwnPropertyKeys(ES,source){var ownKeys=keys(source);return $gOPS&&$pushApply(ownKeys,$gOPS(source)),ownKeys}(0,fromObj);return forEach(sourceKeys,(function(nextKey){var excluded=!1;forEach(excludedItems,(function(e){!0===ES.SameValue(e,nextKey)&&(excluded=!0)}));var enumerable=$isEnumerable(fromObj,nextKey)||"string"==typeof source&&nextKey>=0&&ES.IsInteger(ES.ToNumber(nextKey));if(!1===excluded&&enumerable){var propValue=ES.Get(fromObj,nextKey);ES.CreateDataProperty(target,nextKey,propValue)}})),target},PromiseResolve:function PromiseResolve(C,x){if(!$PromiseResolve)throw new SyntaxError("This environment does not support Promises.");return $PromiseResolve(C,x)},GetSubstitution:function GetSubstitution(matched,str,position,captures,namedCaptures,replacement){if("String"!==this.Type(matched))throw new $TypeError("Assertion failed: `matched` must be a String");var matchLength=matched.length;if("String"!==this.Type(str))throw new $TypeError("Assertion failed: `str` must be a String");var stringLength=str.length;if(!this.IsInteger(position)||position<0||position>stringLength)throw new $TypeError("Assertion failed: `position` must be a nonnegative integer, and less than or equal to the length of `string`, got "+inspect(position));var ES=this;if(!this.IsArray(captures)||!every(captures,(function(capture,index,arr){return"String"===ES.Type(capture)||!(index in arr)})))throw new $TypeError("Assertion failed: `captures` must be a List of Strings, got "+inspect(captures));if("String"!==this.Type(replacement))throw new $TypeError("Assertion failed: `replacement` must be a String");var tailPos=position+matchLength,m=captures.length;"Undefined"!==this.Type(namedCaptures)&&(namedCaptures=this.ToObject(namedCaptures));for(var result="",i=0;i<replacement.length;i+=1){var current=replacement[i],isLast=i+1>=replacement.length,nextIsLast=i+2>=replacement.length;if("$"!==current||isLast)result+=replacement[i];else{var next=replacement[i+1];if("$"===next)result+="$",i+=1;else if("&"===next)result+=matched,i+=1;else if("`"===next)result+=0===position?"":$strSlice(str,0,position-1),i+=1;else if("'"===next)result+=tailPos>=stringLength?"":$strSlice(str,tailPos),i+=1;else{var nextNext=nextIsLast?null:replacement[i+2];if(!isDigit(next)||"0"===next||!nextIsLast&&isDigit(nextNext))if(isDigit(next)&&(nextIsLast||isDigit(nextNext))){var nn=next+nextNext,nnI=$parseInt(nn,10)-1;result+=nn<=m&&"Undefined"===this.Type(captures[nnI])?"":captures[nnI],i+=2}else if("<"===next)if("Undefined"===this.Type(namedCaptures))result+="$<",i+=2;else{var endIndex=$indexOf(replacement,">",i);if(endIndex>-1){var groupName=$strSlice(replacement,i,endIndex),capture=this.Get(namedCaptures,groupName);"Undefined"!==this.Type(capture)&&(result+=this.ToString(capture)),i+="$<"+groupName+">".length}}else result+="$";else{var n=$parseInt(next,10);result+=n<=m&&"Undefined"===this.Type(captures[n-1])?"":captures[n-1],i+=1}}}}return result},DateString:function DateString(tv){if("Number"!==this.Type(tv)||$isNaN(tv))throw new $TypeError("Assertion failed: `tv` must be a non-NaN Number");return weekdays[this.WeekDay(tv)]+" "+months[this.MonthFromTime(tv)]+" "+padTimeComponent(this.DateFromTime(tv))+" "+padTimeComponent(this.YearFromTime(tv),4)},TimeString:function TimeString(tv){if("Number"!==this.Type(tv)||$isNaN(tv))throw new $TypeError("Assertion failed: `tv` must be a non-NaN Number");var hour=this.HourFromTime(tv),minute=this.MinFromTime(tv),second=this.SecFromTime(tv);return padTimeComponent(hour)+":"+padTimeComponent(minute)+":"+padTimeComponent(second)+" GMT"}});delete ES2018.EnumerableOwnProperties,delete ES2018.IsPropertyDescriptor,module.exports=ES2018},function(module,exports,__webpack_require__){"use strict";module.exports=function requirePromise(){if("function"!=typeof Promise)throw new TypeError("`Promise.allSettled` requires a global `Promise` be available.");if("function"!=typeof Array.from)throw new TypeError("`Promise.allSettled` requires `Array.from` be available.")}},function(module,exports,__webpack_require__){var global=__webpack_require__(5),isObject=__webpack_require__(9),document=global.document,EXISTS=isObject(document)&&isObject(document.createElement);module.exports=function(it){return EXISTS?document.createElement(it):{}}},function(module,exports,__webpack_require__){var global=__webpack_require__(5),createNonEnumerableProperty=__webpack_require__(29);module.exports=function(key,value){try{createNonEnumerableProperty(global,key,value)}catch(error){global[key]=value}return value}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)},function(module,exports,__webpack_require__){var toIndexedObject=__webpack_require__(37),toLength=__webpack_require__(31),toAbsoluteIndex=__webpack_require__(208),createMethod=function(IS_INCLUDES){return function($this,el,fromIndex){var value,O=toIndexedObject($this),length=toLength(O.length),index=toAbsoluteIndex(fromIndex,length);if(IS_INCLUDES&&el!=el){for(;length>index;)if((value=O[index++])!=value)return!0}else for(;length>index;index++)if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;return!IS_INCLUDES&&-1}};module.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},function(module,exports){module.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(module,exports){exports.f=Object.getOwnPropertySymbols},function(module,exports,__webpack_require__){"use strict";var toPrimitive=__webpack_require__(68),definePropertyModule=__webpack_require__(19),createPropertyDescriptor=__webpack_require__(67);module.exports=function(object,key,value){var propertyKey=toPrimitive(key);propertyKey in object?definePropertyModule.f(object,propertyKey,createPropertyDescriptor(0,value)):object[propertyKey]=value}},function(module,exports,__webpack_require__){var match,version,global=__webpack_require__(5),userAgent=__webpack_require__(95),process=global.process,versions=process&&process.versions,v8=versions&&versions.v8;v8?version=(match=v8.split("."))[0]+match[1]:userAgent&&(!(match=userAgent.match(/Edge\/(\d+)/))||match[1]>=74)&&(match=userAgent.match(/Chrome\/(\d+)/))&&(version=match[1]),module.exports=version&&+version},function(module,exports){module.exports=function(originalModule){if(!originalModule.webpackPolyfill){var module=Object.create(originalModule);module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),Object.defineProperty(module,"exports",{enumerable:!0}),module.webpackPolyfill=1}return module}},function(module,exports,__webpack_require__){var wellKnownSymbol=__webpack_require__(8),create=__webpack_require__(59),createNonEnumerableProperty=__webpack_require__(29),UNSCOPABLES=wellKnownSymbol("unscopables"),ArrayPrototype=Array.prototype;null==ArrayPrototype[UNSCOPABLES]&&createNonEnumerableProperty(ArrayPrototype,UNSCOPABLES,create(null)),module.exports=function(key){ArrayPrototype[UNSCOPABLES][key]=!0}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(3),createIteratorConstructor=__webpack_require__(400),getPrototypeOf=__webpack_require__(148),setPrototypeOf=__webpack_require__(149),setToStringTag=__webpack_require__(47),createNonEnumerableProperty=__webpack_require__(29),redefine=__webpack_require__(30),wellKnownSymbol=__webpack_require__(8),IS_PURE=__webpack_require__(70),Iterators=__webpack_require__(76),IteratorsCore=__webpack_require__(216),IteratorPrototype=IteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR=wellKnownSymbol("iterator"),returnThis=function(){return this};module.exports=function(Iterable,NAME,IteratorConstructor,next,DEFAULT,IS_SET,FORCED){createIteratorConstructor(IteratorConstructor,NAME,next);var CurrentIteratorPrototype,methods,KEY,getIterationMethod=function(KIND){if(KIND===DEFAULT&&defaultIterator)return defaultIterator;if(!BUGGY_SAFARI_ITERATORS&&KIND in IterablePrototype)return IterablePrototype[KIND];switch(KIND){case"keys":return function keys(){return new IteratorConstructor(this,KIND)};case"values":return function values(){return new IteratorConstructor(this,KIND)};case"entries":return function entries(){return new IteratorConstructor(this,KIND)}}return function(){return new IteratorConstructor(this)}},TO_STRING_TAG=NAME+" Iterator",INCORRECT_VALUES_NAME=!1,IterablePrototype=Iterable.prototype,nativeIterator=IterablePrototype[ITERATOR]||IterablePrototype["@@iterator"]||DEFAULT&&IterablePrototype[DEFAULT],defaultIterator=!BUGGY_SAFARI_ITERATORS&&nativeIterator||getIterationMethod(DEFAULT),anyNativeIterator="Array"==NAME&&IterablePrototype.entries||nativeIterator;if(anyNativeIterator&&(CurrentIteratorPrototype=getPrototypeOf(anyNativeIterator.call(new Iterable)),IteratorPrototype!==Object.prototype&&CurrentIteratorPrototype.next&&(IS_PURE||getPrototypeOf(CurrentIteratorPrototype)===IteratorPrototype||(setPrototypeOf?setPrototypeOf(CurrentIteratorPrototype,IteratorPrototype):"function"!=typeof CurrentIteratorPrototype[ITERATOR]&&createNonEnumerableProperty(CurrentIteratorPrototype,ITERATOR,returnThis)),setToStringTag(CurrentIteratorPrototype,TO_STRING_TAG,!0,!0),IS_PURE&&(Iterators[TO_STRING_TAG]=returnThis))),"values"==DEFAULT&&nativeIterator&&"values"!==nativeIterator.name&&(INCORRECT_VALUES_NAME=!0,defaultIterator=function values(){return nativeIterator.call(this)}),IS_PURE&&!FORCED||IterablePrototype[ITERATOR]===defaultIterator||createNonEnumerableProperty(IterablePrototype,ITERATOR,defaultIterator),Iterators[NAME]=defaultIterator,DEFAULT)if(methods={values:getIterationMethod("values"),keys:IS_SET?defaultIterator:getIterationMethod("keys"),entries:getIterationMethod("entries")},FORCED)for(KEY in methods)!BUGGY_SAFARI_ITERATORS&&!INCORRECT_VALUES_NAME&&KEY in IterablePrototype||redefine(IterablePrototype,KEY,methods[KEY]);else $({target:NAME,proto:!0,forced:BUGGY_SAFARI_ITERATORS||INCORRECT_VALUES_NAME},methods);return methods}},function(module,exports,__webpack_require__){var has=__webpack_require__(18),toObject=__webpack_require__(32),sharedKey=__webpack_require__(89),CORRECT_PROTOTYPE_GETTER=__webpack_require__(217),IE_PROTO=sharedKey("IE_PROTO"),ObjectPrototype=Object.prototype;module.exports=CORRECT_PROTOTYPE_GETTER?Object.getPrototypeOf:function(O){return O=toObject(O),has(O,IE_PROTO)?O[IE_PROTO]:"function"==typeof O.constructor&&O instanceof O.constructor?O.constructor.prototype:O instanceof Object?ObjectPrototype:null}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(13),aPossiblePrototype=__webpack_require__(401);module.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var setter,CORRECT_SETTER=!1,test={};try{(setter=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(test,[]),CORRECT_SETTER=test instanceof Array}catch(error){}return function setPrototypeOf(O,proto){return anObject(O),aPossiblePrototype(proto),CORRECT_SETTER?setter.call(O,proto):O.__proto__=proto,O}}():void 0)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(14),__webpack_require__(2),__webpack_require__(406),__webpack_require__(26),__webpack_require__(15),Object.defineProperty(exports,"__esModule",{value:!0});var _exportNames={ClientApi:!0,defaultDecorateStory:!0,StoryStore:!0,ConfigApi:!0,subscriptionsStore:!0,pathToId:!0,getQueryParams:!0,getQueryParam:!0};Object.defineProperty(exports,"ClientApi",{enumerable:!0,get:function get(){return _client_api.default}}),Object.defineProperty(exports,"defaultDecorateStory",{enumerable:!0,get:function get(){return _client_api.defaultDecorateStory}}),Object.defineProperty(exports,"StoryStore",{enumerable:!0,get:function get(){return _story_store.default}}),Object.defineProperty(exports,"ConfigApi",{enumerable:!0,get:function get(){return _config_api.default}}),Object.defineProperty(exports,"subscriptionsStore",{enumerable:!0,get:function get(){return _subscriptions_store.default}}),Object.defineProperty(exports,"pathToId",{enumerable:!0,get:function get(){return _pathToId.default}}),Object.defineProperty(exports,"getQueryParams",{enumerable:!0,get:function get(){return _queryparams.getQueryParams}}),Object.defineProperty(exports,"getQueryParam",{enumerable:!0,get:function get(){return _queryparams.getQueryParam}});var _client_api=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(__webpack_require__(407)),_story_store=_interopRequireDefault(__webpack_require__(546)),_config_api=_interopRequireDefault(__webpack_require__(554)),_subscriptions_store=_interopRequireDefault(__webpack_require__(260)),_pathToId=_interopRequireDefault(__webpack_require__(555)),_queryparams=__webpack_require__(556),_hooks=__webpack_require__(169);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.keys(_hooks).forEach((function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _hooks[key]}}))}))},function(module,exports,__webpack_require__){var ITERATOR=__webpack_require__(8)("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR]=function(){return this},Array.from(iteratorWithReturn,(function(){throw 2}))}catch(error){}module.exports=function(exec,SKIP_CLOSING){if(!SKIP_CLOSING&&!SAFE_CLOSING)return!1;var ITERATION_SUPPORT=!1;try{var object={};object[ITERATOR]=function(){return{next:function(){return{done:ITERATION_SUPPORT=!0}}}},exec(object)}catch(error){}return ITERATION_SUPPORT}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(3),$reduce=__webpack_require__(409).left;$({target:"Array",proto:!0,forced:__webpack_require__(75)("reduce")},{reduce:function reduce(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){(function(global){function config(name){try{if(!global.localStorage)return!1}catch(_){return!1}var val=global.localStorage[name];return null!=val&&"true"===String(val).toLowerCase()}module.exports=function deprecate(fn,msg){if(config("noDeprecation"))return fn;var warned=!1;return function deprecated(){if(!warned){if(config("throwDeprecation"))throw new Error(msg);config("traceDeprecation")?console.trace(msg):console.warn(msg),warned=!0}return fn.apply(this,arguments)}}}).call(this,__webpack_require__(22))},function(module,exports,__webpack_require__){var $=__webpack_require__(3),$values=__webpack_require__(222).values;$({target:"Object",stat:!0},{values:function values(O){return $values(O)}})},function(module,exports,__webpack_require__){var defer,channel,port,global=__webpack_require__(5),fails=__webpack_require__(7),classof=__webpack_require__(38),bind=__webpack_require__(74),html=__webpack_require__(213),createElement=__webpack_require__(137),userAgent=__webpack_require__(95),location=global.location,set=global.setImmediate,clear=global.clearImmediate,process=global.process,MessageChannel=global.MessageChannel,Dispatch=global.Dispatch,counter=0,queue={},run=function(id){if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id],fn()}},runner=function(id){return function(){run(id)}},listener=function(event){run(event.data)},post=function(id){global.postMessage(id+"",location.protocol+"//"+location.host)};set&&clear||(set=function setImmediate(fn){for(var args=[],i=1;arguments.length>i;)args.push(arguments[i++]);return queue[++counter]=function(){("function"==typeof fn?fn:Function(fn)).apply(void 0,args)},defer(counter),counter},clear=function clearImmediate(id){delete queue[id]},"process"==classof(process)?defer=function(id){process.nextTick(runner(id))}:Dispatch&&Dispatch.now?defer=function(id){Dispatch.now(runner(id))}:MessageChannel&&!/(iphone|ipod|ipad).*applewebkit/i.test(userAgent)?(port=(channel=new MessageChannel).port2,channel.port1.onmessage=listener,defer=bind(port.postMessage,port,1)):!global.addEventListener||"function"!=typeof postMessage||global.importScripts||fails(post)?defer="onreadystatechange"in createElement("script")?function(id){html.appendChild(createElement("script")).onreadystatechange=function(){html.removeChild(this),run(id)}}:function(id){setTimeout(runner(id),0)}:(defer=post,global.addEventListener("message",listener,!1))),module.exports={set:set,clear:clear}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(3),global=__webpack_require__(5),isForced=__webpack_require__(93),redefine=__webpack_require__(30),InternalMetadataModule=__webpack_require__(81),iterate=__webpack_require__(101),anInstance=__webpack_require__(100),isObject=__webpack_require__(9),fails=__webpack_require__(7),checkCorrectnessOfIteration=__webpack_require__(151),setToStringTag=__webpack_require__(47),inheritIfRequired=__webpack_require__(234);module.exports=function(CONSTRUCTOR_NAME,wrapper,common,IS_MAP,IS_WEAK){var NativeConstructor=global[CONSTRUCTOR_NAME],NativePrototype=NativeConstructor&&NativeConstructor.prototype,Constructor=NativeConstructor,ADDER=IS_MAP?"set":"add",exported={},fixMethod=function(KEY){var nativeMethod=NativePrototype[KEY];redefine(NativePrototype,KEY,"add"==KEY?function add(value){return nativeMethod.call(this,0===value?0:value),this}:"delete"==KEY?function(key){return!(IS_WEAK&&!isObject(key))&&nativeMethod.call(this,0===key?0:key)}:"get"==KEY?function get(key){return IS_WEAK&&!isObject(key)?void 0:nativeMethod.call(this,0===key?0:key)}:"has"==KEY?function has(key){return!(IS_WEAK&&!isObject(key))&&nativeMethod.call(this,0===key?0:key)}:function set(key,value){return nativeMethod.call(this,0===key?0:key,value),this})};if(isForced(CONSTRUCTOR_NAME,"function"!=typeof NativeConstructor||!(IS_WEAK||NativePrototype.forEach&&!fails((function(){(new NativeConstructor).entries().next()})))))Constructor=common.getConstructor(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER),InternalMetadataModule.REQUIRED=!0;else if(isForced(CONSTRUCTOR_NAME,!0)){var instance=new Constructor,HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance,THROWS_ON_PRIMITIVES=fails((function(){instance.has(1)})),ACCEPT_ITERABLES=checkCorrectnessOfIteration((function(iterable){new NativeConstructor(iterable)})),BUGGY_ZERO=!IS_WEAK&&fails((function(){for(var $instance=new NativeConstructor,index=5;index--;)$instance[ADDER](index,index);return!$instance.has(-0)}));ACCEPT_ITERABLES||((Constructor=wrapper((function(dummy,iterable){anInstance(dummy,Constructor,CONSTRUCTOR_NAME);var that=inheritIfRequired(new NativeConstructor,dummy,Constructor);return null!=iterable&&iterate(iterable,that[ADDER],that,IS_MAP),that}))).prototype=NativePrototype,NativePrototype.constructor=Constructor),(THROWS_ON_PRIMITIVES||BUGGY_ZERO)&&(fixMethod("delete"),fixMethod("has"),IS_MAP&&fixMethod("get")),(BUGGY_ZERO||HASNT_CHAINING)&&fixMethod(ADDER),IS_WEAK&&NativePrototype.clear&&delete NativePrototype.clear}return exported[CONSTRUCTOR_NAME]=Constructor,$({global:!0,forced:Constructor!=NativeConstructor},exported),setToStringTag(Constructor,CONSTRUCTOR_NAME),IS_WEAK||common.setStrong(Constructor,CONSTRUCTOR_NAME,IS_MAP),Constructor}},function(module,exports,__webpack_require__){"use strict";var charAt=__webpack_require__(224).charAt;module.exports=function(S,index,unicode){return index+(unicode?charAt(S,index).length:1)}},function(module,exports,__webpack_require__){"use strict";var fixRegExpWellKnownSymbolLogic=__webpack_require__(107),anObject=__webpack_require__(13),requireObjectCoercible=__webpack_require__(35),sameValue=__webpack_require__(428),regExpExec=__webpack_require__(108);fixRegExpWellKnownSymbolLogic("search",1,(function(SEARCH,nativeSearch,maybeCallNative){return[function search(regexp){var O=requireObjectCoercible(this),searcher=null==regexp?void 0:regexp[SEARCH];return void 0!==searcher?searcher.call(regexp,O):new RegExp(regexp)[SEARCH](String(O))},function(regexp){var res=maybeCallNative(nativeSearch,regexp,this);if(res.done)return res.value;var rx=anObject(regexp),S=String(this),previousLastIndex=rx.lastIndex;sameValue(previousLastIndex,0)||(rx.lastIndex=0);var result=regExpExec(rx,S);return sameValue(rx.lastIndex,previousLastIndex)||(rx.lastIndex=previousLastIndex),null===result?-1:result.index}]}))},function(module,exports,__webpack_require__){"use strict";var stringify=__webpack_require__(431),parse=__webpack_require__(432),formats=__webpack_require__(241);module.exports={formats:formats,parse:parse,stringify:stringify}},function(module,exports,__webpack_require__){"use strict";var has=Object.prototype.hasOwnProperty,isArray=Array.isArray,hexTable=function(){for(var array=[],i=0;i<256;++i)array.push("%"+((i<16?"0":"")+i.toString(16)).toUpperCase());return array}(),arrayToObject=function arrayToObject(source,options){for(var obj=options&&options.plainObjects?Object.create(null):{},i=0;i<source.length;++i)void 0!==source[i]&&(obj[i]=source[i]);return obj};module.exports={arrayToObject:arrayToObject,assign:function assignSingleSource(target,source){return Object.keys(source).reduce((function(acc,key){return acc[key]=source[key],acc}),target)},combine:function combine(a,b){return[].concat(a,b)},compact:function compact(value){for(var queue=[{obj:{o:value},prop:"o"}],refs=[],i=0;i<queue.length;++i)for(var item=queue[i],obj=item.obj[item.prop],keys=Object.keys(obj),j=0;j<keys.length;++j){var key=keys[j],val=obj[key];"object"==typeof val&&null!==val&&-1===refs.indexOf(val)&&(queue.push({obj:obj,prop:key}),refs.push(val))}return function compactQueue(queue){for(;queue.length>1;){var item=queue.pop(),obj=item.obj[item.prop];if(isArray(obj)){for(var compacted=[],j=0;j<obj.length;++j)void 0!==obj[j]&&compacted.push(obj[j]);item.obj[item.prop]=compacted}}}(queue),value},decode:function(str,decoder,charset){var strWithoutPlus=str.replace(/\+/g," ");if("iso-8859-1"===charset)return strWithoutPlus.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(strWithoutPlus)}catch(e){return strWithoutPlus}},encode:function encode(str,defaultEncoder,charset){if(0===str.length)return str;var string=str;if("symbol"==typeof str?string=Symbol.prototype.toString.call(str):"string"!=typeof str&&(string=String(str)),"iso-8859-1"===charset)return escape(string).replace(/%u[0-9a-f]{4}/gi,(function($0){return"%26%23"+parseInt($0.slice(2),16)+"%3B"}));for(var out="",i=0;i<string.length;++i){var c=string.charCodeAt(i);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122?out+=string.charAt(i):c<128?out+=hexTable[c]:c<2048?out+=hexTable[192|c>>6]+hexTable[128|63&c]:c<55296||c>=57344?out+=hexTable[224|c>>12]+hexTable[128|c>>6&63]+hexTable[128|63&c]:(i+=1,c=65536+((1023&c)<<10|1023&string.charCodeAt(i)),out+=hexTable[240|c>>18]+hexTable[128|c>>12&63]+hexTable[128|c>>6&63]+hexTable[128|63&c])}return out},isBuffer:function isBuffer(obj){return!(!obj||"object"!=typeof obj)&&!!(obj.constructor&&obj.constructor.isBuffer&&obj.constructor.isBuffer(obj))},isRegExp:function isRegExp(obj){return"[object RegExp]"===Object.prototype.toString.call(obj)},merge:function merge(target,source,options){if(!source)return target;if("object"!=typeof source){if(isArray(target))target.push(source);else{if(!target||"object"!=typeof target)return[target,source];(options&&(options.plainObjects||options.allowPrototypes)||!has.call(Object.prototype,source))&&(target[source]=!0)}return target}if(!target||"object"!=typeof target)return[target].concat(source);var mergeTarget=target;return isArray(target)&&!isArray(source)&&(mergeTarget=arrayToObject(target,options)),isArray(target)&&isArray(source)?(source.forEach((function(item,i){if(has.call(target,i)){var targetItem=target[i];targetItem&&"object"==typeof targetItem&&item&&"object"==typeof item?target[i]=merge(targetItem,item,options):target.push(item)}else target[i]=item})),target):Object.keys(source).reduce((function(acc,key){var value=source[key];return has.call(acc,key)?acc[key]=merge(acc[key],value,options):acc[key]=value,acc}),mergeTarget)}}},function(module,exports,__webpack_require__){var require;module.exports=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){if(!u&&"function"==typeof require&&require)return require(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){var n=t[o][1][e];return s(n||e)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){module.exports=function(forceSimilar){return"function"!=typeof Map||forceSimilar?new(_dereq_("./similar")):new Map}},{"./similar":2}],2:[function(_dereq_,module,exports){function Similar(){return this.list=[],this.lastItem=void 0,this.size=0,this}Similar.prototype.get=function(key){var index;return this.lastItem&&this.isEqual(this.lastItem.key,key)?this.lastItem.val:(index=this.indexOf(key))>=0?(this.lastItem=this.list[index],this.list[index].val):void 0},Similar.prototype.set=function(key,val){var index;return this.lastItem&&this.isEqual(this.lastItem.key,key)?(this.lastItem.val=val,this):(index=this.indexOf(key))>=0?(this.lastItem=this.list[index],this.list[index].val=val,this):(this.lastItem={key:key,val:val},this.list.push(this.lastItem),this.size++,this)},Similar.prototype.delete=function(key){var index;if(this.lastItem&&this.isEqual(this.lastItem.key,key)&&(this.lastItem=void 0),(index=this.indexOf(key))>=0)return this.size--,this.list.splice(index,1)[0]},Similar.prototype.has=function(key){var index;return!(!this.lastItem||!this.isEqual(this.lastItem.key,key))||(index=this.indexOf(key))>=0&&(this.lastItem=this.list[index],!0)},Similar.prototype.forEach=function(callback,thisArg){var i;for(i=0;i<this.size;i++)callback.call(thisArg||this,this.list[i].val,this.list[i].key,this)},Similar.prototype.indexOf=function(key){var i;for(i=0;i<this.size;i++)if(this.isEqual(this.list[i].key,key))return i;return-1},Similar.prototype.isEqual=function(val1,val2){return val1===val2||val1!=val1&&val2!=val2},module.exports=Similar},{}],3:[function(_dereq_,module,exports){var MapOrSimilar=_dereq_("map-or-similar");function moveToMostRecentLru(lru,lruPath){var isMatch,i,ii,val1,val2,lruLen=lru.length,lruPathLen=lruPath.length;for(i=0;i<lruLen;i++){for(isMatch=!0,ii=0;ii<lruPathLen;ii++)if(val1=lru[i][ii].arg,val2=lruPath[ii].arg,val1!==val2&&(val1==val1||val2==val2)){isMatch=!1;break}if(isMatch)break}lru.push(lru.splice(i,1)[0])}function removeCachedResult(removedLru){var tmp,i,removedLruLen=removedLru.length,currentLru=removedLru[removedLruLen-1];for(currentLru.cacheItem.delete(currentLru.arg),i=removedLruLen-2;i>=0&&(!(tmp=(currentLru=removedLru[i]).cacheItem.get(currentLru.arg))||!tmp.size);i--)currentLru.cacheItem.delete(currentLru.arg)}module.exports=function(limit){var cache=new MapOrSimilar(!1),lru=[];return function(fn){var memoizerific=function(){var newMap,fnResult,i,currentCache=cache,argsLengthMinusOne=arguments.length-1,lruPath=Array(argsLengthMinusOne+1),isMemoized=!0;if((memoizerific.numArgs||0===memoizerific.numArgs)&&memoizerific.numArgs!==argsLengthMinusOne+1)throw new Error("Memoizerific functions should always be called with the same number of arguments");for(i=0;i<argsLengthMinusOne;i++)lruPath[i]={cacheItem:currentCache,arg:arguments[i]},currentCache.has(arguments[i])?currentCache=currentCache.get(arguments[i]):(isMemoized=!1,newMap=new MapOrSimilar(!1),currentCache.set(arguments[i],newMap),currentCache=newMap);return isMemoized&&(currentCache.has(arguments[argsLengthMinusOne])?fnResult=currentCache.get(arguments[argsLengthMinusOne]):isMemoized=!1),isMemoized||(fnResult=fn.apply(null,arguments),currentCache.set(arguments[argsLengthMinusOne],fnResult)),limit>0&&(lruPath[argsLengthMinusOne]={cacheItem:currentCache,arg:arguments[argsLengthMinusOne]},isMemoized?moveToMostRecentLru(lru,lruPath):lru.push(lruPath),lru.length>limit&&removeCachedResult(lru.shift())),memoizerific.wasMemoized=isMemoized,memoizerific.numArgs=argsLengthMinusOne+1,fnResult};return memoizerific.limit=limit,memoizerific.wasMemoized=!1,memoizerific.cache=cache,memoizerific.lru=lru,memoizerific}}},{"map-or-similar":1}]},{},[3])(3)},function(module,exports,__webpack_require__){var Map=__webpack_require__(53)(__webpack_require__(33),"Map");module.exports=Map},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(64),isObject=__webpack_require__(41),asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";module.exports=function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}},function(module,exports,__webpack_require__){var mapCacheClear=__webpack_require__(470),mapCacheDelete=__webpack_require__(477),mapCacheGet=__webpack_require__(479),mapCacheHas=__webpack_require__(480),mapCacheSet=__webpack_require__(481);function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,module.exports=MapCache},function(module,exports,__webpack_require__){var defineProperty=__webpack_require__(247);module.exports=function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}},function(module,exports){var objectProto=Object.prototype;module.exports=function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}},function(module,exports,__webpack_require__){(function(module){var root=__webpack_require__(33),stubFalse=__webpack_require__(493),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,Buffer=freeModule&&freeModule.exports===freeExports?root.Buffer:void 0,isBuffer=(Buffer?Buffer.isBuffer:void 0)||stubFalse;module.exports=isBuffer}).call(this,__webpack_require__(77)(module))},function(module,exports,__webpack_require__){var baseIsTypedArray=__webpack_require__(495),baseUnary=__webpack_require__(496),nodeUtil=__webpack_require__(497),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray},function(module,exports,__webpack_require__){"use strict";__webpack_require__(2),Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"HooksContext",{enumerable:!0,get:function get(){return _addons.HooksContext}}),Object.defineProperty(exports,"applyHooks",{enumerable:!0,get:function get(){return _addons.applyHooks}}),Object.defineProperty(exports,"useMemo",{enumerable:!0,get:function get(){return _addons.useMemo}}),Object.defineProperty(exports,"useCallback",{enumerable:!0,get:function get(){return _addons.useCallback}}),Object.defineProperty(exports,"useRef",{enumerable:!0,get:function get(){return _addons.useRef}}),Object.defineProperty(exports,"useState",{enumerable:!0,get:function get(){return _addons.useState}}),Object.defineProperty(exports,"useReducer",{enumerable:!0,get:function get(){return _addons.useReducer}}),Object.defineProperty(exports,"useEffect",{enumerable:!0,get:function get(){return _addons.useEffect}}),Object.defineProperty(exports,"useChannel",{enumerable:!0,get:function get(){return _addons.useChannel}}),Object.defineProperty(exports,"useStoryContext",{enumerable:!0,get:function get(){return _addons.useStoryContext}}),Object.defineProperty(exports,"useParameter",{enumerable:!0,get:function get(){return _addons.useParameter}});var _addons=__webpack_require__(80)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(40),__webpack_require__(2),Object.defineProperty(exports,"__esModule",{value:!0}),exports.action=function action(name){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},actionOptions=Object.assign({},_configureActions.config,{},options);return function actionHandler(){for(var channel=_addons.addons.getChannel(),id=(0,_v.default)(),minDepth=5,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var actionDisplayToEmit={id:id,count:0,data:{name:name,args:args},options:Object.assign({},actionOptions,{depth:minDepth+(actionOptions.depth||3),allowFunction:actionOptions.allowFunction||!1})};channel.emit(_constants.EVENT_ID,actionDisplayToEmit)}};var _v=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(597)),_addons=__webpack_require__(80),_constants=__webpack_require__(268),_configureActions=__webpack_require__(171)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(40),__webpack_require__(2),Object.defineProperty(exports,"__esModule",{value:!0}),exports.configureActions=exports.config=void 0;var config={depth:10,clearOnStoryChange:!0,limit:50};exports.config=config;exports.configureActions=function configureActions(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(config,options)}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(14),__webpack_require__(40),__webpack_require__(2),__webpack_require__(26),__webpack_require__(15),Object.defineProperty(exports,"__esModule",{value:!0}),exports.actions=void 0;var _action=__webpack_require__(170),_configureActions=__webpack_require__(171);exports.actions=function actions(){for(var options=_configureActions.config,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var names=args;1!==names.length&&"string"!=typeof args[args.length-1]&&(options=Object.assign({},_configureActions.config,{},names.pop()));var namesObject=names[0];1===names.length&&"string"!=typeof namesObject||(namesObject={},names.forEach((function(name){namesObject[name]=name})));var actionsObject={};return Object.keys(namesObject).forEach((function(name){actionsObject[name]=(0,_action.action)(namesObject[name],options)})),actionsObject}},function(module,exports,__webpack_require__){"use strict";(function(global){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var base64=__webpack_require__(601),ieee754=__webpack_require__(602),isArray=__webpack_require__(603);function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(that,length){if(kMaxLength()<length)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(that=new Uint8Array(length)).__proto__=Buffer.prototype:(null===that&&(that=new Buffer(length)),that.length=length),that}function Buffer(arg,encodingOrOffset,length){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(arg,encodingOrOffset,length);if("number"==typeof arg){if("string"==typeof encodingOrOffset)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,arg)}return from(this,arg,encodingOrOffset,length)}function from(that,value,encodingOrOffset,length){if("number"==typeof value)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&value instanceof ArrayBuffer?function fromArrayBuffer(that,array,byteOffset,length){if(array.byteLength,byteOffset<0||array.byteLength<byteOffset)throw new RangeError("'offset' is out of bounds");if(array.byteLength<byteOffset+(length||0))throw new RangeError("'length' is out of bounds");array=void 0===byteOffset&&void 0===length?new Uint8Array(array):void 0===length?new Uint8Array(array,byteOffset):new Uint8Array(array,byteOffset,length);Buffer.TYPED_ARRAY_SUPPORT?(that=array).__proto__=Buffer.prototype:that=fromArrayLike(that,array);return that}(that,value,encodingOrOffset,length):"string"==typeof value?function fromString(that,string,encoding){"string"==typeof encoding&&""!==encoding||(encoding="utf8");if(!Buffer.isEncoding(encoding))throw new TypeError('"encoding" must be a valid string encoding');var length=0|byteLength(string,encoding),actual=(that=createBuffer(that,length)).write(string,encoding);actual!==length&&(that=that.slice(0,actual));return that}(that,value,encodingOrOffset):function fromObject(that,obj){if(Buffer.isBuffer(obj)){var len=0|checked(obj.length);return 0===(that=createBuffer(that,len)).length?that:(obj.copy(that,0,0,len),that)}if(obj){if("undefined"!=typeof ArrayBuffer&&obj.buffer instanceof ArrayBuffer||"length"in obj)return"number"!=typeof obj.length||function isnan(val){return val!=val}(obj.length)?createBuffer(that,0):fromArrayLike(that,obj);if("Buffer"===obj.type&&isArray(obj.data))return fromArrayLike(that,obj.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(that,value)}function assertSize(size){if("number"!=typeof size)throw new TypeError('"size" argument must be a number');if(size<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(that,size){if(assertSize(size),that=createBuffer(that,size<0?0:0|checked(size)),!Buffer.TYPED_ARRAY_SUPPORT)for(var i=0;i<size;++i)that[i]=0;return that}function fromArrayLike(that,array){var length=array.length<0?0:0|checked(array.length);that=createBuffer(that,length);for(var i=0;i<length;i+=1)that[i]=255&array[i];return that}function checked(length){if(length>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|length}function byteLength(string,encoding){if(Buffer.isBuffer(string))return string.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(string)||string instanceof ArrayBuffer))return string.byteLength;"string"!=typeof string&&(string=""+string);var len=string.length;if(0===len)return 0;for(var loweredCase=!1;;)switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":case void 0:return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}function slowToString(encoding,start,end){var loweredCase=!1;if((void 0===start||start<0)&&(start=0),start>this.length)return"";if((void 0===end||end>this.length)&&(end=this.length),end<=0)return"";if((end>>>=0)<=(start>>>=0))return"";for(encoding||(encoding="utf8");;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}function swap(b,n,m){var i=b[n];b[n]=b[m],b[m]=i}function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(0===buffer.length)return-1;if("string"==typeof byteOffset?(encoding=byteOffset,byteOffset=0):byteOffset>2147483647?byteOffset=2147483647:byteOffset<-2147483648&&(byteOffset=-2147483648),byteOffset=+byteOffset,isNaN(byteOffset)&&(byteOffset=dir?0:buffer.length-1),byteOffset<0&&(byteOffset=buffer.length+byteOffset),byteOffset>=buffer.length){if(dir)return-1;byteOffset=buffer.length-1}else if(byteOffset<0){if(!dir)return-1;byteOffset=0}if("string"==typeof val&&(val=Buffer.from(val,encoding)),Buffer.isBuffer(val))return 0===val.length?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if("number"==typeof val)return val&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?dir?Uint8Array.prototype.indexOf.call(buffer,val,byteOffset):Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var i,indexSize=1,arrLength=arr.length,valLength=val.length;if(void 0!==encoding&&("ucs2"===(encoding=String(encoding).toLowerCase())||"ucs-2"===encoding||"utf16le"===encoding||"utf-16le"===encoding)){if(arr.length<2||val.length<2)return-1;indexSize=2,arrLength/=2,valLength/=2,byteOffset/=2}function read(buf,i){return 1===indexSize?buf[i]:buf.readUInt16BE(i*indexSize)}if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++)if(read(arr,i)===read(val,-1===foundIndex?0:i-foundIndex)){if(-1===foundIndex&&(foundIndex=i),i-foundIndex+1===valLength)return foundIndex*indexSize}else-1!==foundIndex&&(i-=i-foundIndex),foundIndex=-1}else for(byteOffset+valLength>arrLength&&(byteOffset=arrLength-valLength),i=byteOffset;i>=0;i--){for(var found=!0,j=0;j<valLength;j++)if(read(arr,i+j)!==read(val,j)){found=!1;break}if(found)return i}return-1}function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;length?(length=Number(length))>remaining&&(length=remaining):length=remaining;var strLen=string.length;if(strLen%2!=0)throw new TypeError("Invalid hex string");length>strLen/2&&(length=strLen/2);for(var i=0;i<length;++i){var parsed=parseInt(string.substr(2*i,2),16);if(isNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(function asciiToBytes(str){for(var byteArray=[],i=0;i<str.length;++i)byteArray.push(255&str.charCodeAt(i));return byteArray}(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(function utf16leToBytes(str,units){for(var c,hi,lo,byteArray=[],i=0;i<str.length&&!((units-=2)<0);++i)c=str.charCodeAt(i),hi=c>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){return 0===start&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);for(var res=[],i=start;i<end;){var secondByte,thirdByte,fourthByte,tempCodePoint,firstByte=buf[i],codePoint=null,bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end)switch(bytesPerSequence){case 1:firstByte<128&&(codePoint=firstByte);break;case 2:128==(192&(secondByte=buf[i+1]))&&(tempCodePoint=(31&firstByte)<<6|63&secondByte)>127&&(codePoint=tempCodePoint);break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],128==(192&secondByte)&&128==(192&thirdByte)&&(tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte)>2047&&(tempCodePoint<55296||tempCodePoint>57343)&&(codePoint=tempCodePoint);break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],128==(192&secondByte)&&128==(192&thirdByte)&&128==(192&fourthByte)&&(tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte)>65535&&tempCodePoint<1114112&&(codePoint=tempCodePoint)}null===codePoint?(codePoint=65533,bytesPerSequence=1):codePoint>65535&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint),res.push(codePoint),i+=bytesPerSequence}return function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,codePoints);var res="",i=0;for(;i<len;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH));return res}(res)}exports.Buffer=Buffer,exports.SlowBuffer=function SlowBuffer(length){+length!=length&&(length=0);return Buffer.alloc(+length)},exports.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:function typedArraySupport(){try{var arr=new Uint8Array(1);return arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===arr.foo()&&"function"==typeof arr.subarray&&0===arr.subarray(1,1).byteLength}catch(e){return!1}}(),exports.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(arr){return arr.__proto__=Buffer.prototype,arr},Buffer.from=function(value,encodingOrOffset,length){return from(null,value,encodingOrOffset,length)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(size,fill,encoding){return function alloc(that,size,fill,encoding){return assertSize(size),size<=0?createBuffer(that,size):void 0!==fill?"string"==typeof encoding?createBuffer(that,size).fill(fill,encoding):createBuffer(that,size).fill(fill):createBuffer(that,size)}(null,size,fill,encoding)},Buffer.allocUnsafe=function(size){return allocUnsafe(null,size)},Buffer.allocUnsafeSlow=function(size){return allocUnsafe(null,size)},Buffer.isBuffer=function isBuffer(b){return!(null==b||!b._isBuffer)},Buffer.compare=function compare(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0},Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(list,length){if(!isArray(list))throw new TypeError('"list" argument must be an Array of Buffers');if(0===list.length)return Buffer.alloc(0);var i;if(void 0===length)for(length=0,i=0;i<list.length;++i)length+=list[i].length;var buffer=Buffer.allocUnsafe(length),pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(!Buffer.isBuffer(buf))throw new TypeError('"list" argument must be an Array of Buffers');buf.copy(buffer,pos),pos+=buf.length}return buffer},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var len=this.length;if(len%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<len;i+=2)swap(this,i,i+1);return this},Buffer.prototype.swap32=function swap32(){var len=this.length;if(len%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<len;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this},Buffer.prototype.swap64=function swap64(){var len=this.length;if(len%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<len;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this},Buffer.prototype.toString=function toString(){var length=0|this.length;return 0===length?"":0===arguments.length?utf8Slice(this,0,length):slowToString.apply(this,arguments)},Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===Buffer.compare(this,b)},Buffer.prototype.inspect=function inspect(){var str="",max=exports.INSPECT_MAX_BYTES;return this.length>0&&(str=this.toString("hex",0,max).match(/.{2}/g).join(" "),this.length>max&&(str+=" ... ")),"<Buffer "+str+">"},Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(!Buffer.isBuffer(target))throw new TypeError("Argument must be a Buffer");if(void 0===start&&(start=0),void 0===end&&(end=target?target.length:0),void 0===thisStart&&(thisStart=0),void 0===thisEnd&&(thisEnd=this.length),start<0||end>target.length||thisStart<0||thisEnd>this.length)throw new RangeError("out of range index");if(thisStart>=thisEnd&&start>=end)return 0;if(thisStart>=thisEnd)return-1;if(start>=end)return 1;if(this===target)return 0;for(var x=(thisEnd>>>=0)-(thisStart>>>=0),y=(end>>>=0)-(start>>>=0),len=Math.min(x,y),thisCopy=this.slice(thisStart,thisEnd),targetCopy=target.slice(start,end),i=0;i<len;++i)if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i],y=targetCopy[i];break}return x<y?-1:y<x?1:0},Buffer.prototype.includes=function includes(val,byteOffset,encoding){return-1!==this.indexOf(val,byteOffset,encoding)},Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)},Buffer.prototype.write=function write(string,offset,length,encoding){if(void 0===offset)encoding="utf8",length=this.length,offset=0;else if(void 0===length&&"string"==typeof offset)encoding=offset,length=this.length,offset=0;else{if(!isFinite(offset))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");offset|=0,isFinite(length)?(length|=0,void 0===encoding&&(encoding="utf8")):(encoding=length,length=void 0)}var remaining=this.length-offset;if((void 0===length||length>remaining)&&(length=remaining),string.length>0&&(length<0||offset<0)||offset>this.length)throw new RangeError("Attempt to write outside buffer bounds");encoding||(encoding="utf8");for(var loweredCase=!1;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(127&buf[i]);return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){var len=buf.length;(!start||start<0)&&(start=0),(!end||end<0||end>len)&&(end=len);for(var out="",i=start;i<end;++i)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function checkOffset(offset,ext,length){if(offset%1!=0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}function objectWriteUInt16(buf,value,offset,littleEndian){value<0&&(value=65535+value+1);for(var i=0,j=Math.min(buf.length-offset,2);i<j;++i)buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>8*(littleEndian?i:1-i)}function objectWriteUInt32(buf,value,offset,littleEndian){value<0&&(value=4294967295+value+1);for(var i=0,j=Math.min(buf.length-offset,4);i<j;++i)buf[offset+i]=value>>>8*(littleEndian?i:3-i)&255}function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,0,offset,4),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,0,offset,8),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}Buffer.prototype.slice=function slice(start,end){var newBuf,len=this.length;if((start=~~start)<0?(start+=len)<0&&(start=0):start>len&&(start=len),(end=void 0===end?len:~~end)<0?(end+=len)<0&&(end=0):end>len&&(end=len),end<start&&(end=start),Buffer.TYPED_ARRAY_SUPPORT)(newBuf=this.subarray(start,end)).__proto__=Buffer.prototype;else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,void 0);for(var i=0;i<sliceLen;++i)newBuf[i]=this[i+start]}return newBuf},Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset+--byteLength],mul=1;byteLength>0&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),this[offset]},Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]},Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val>=(mul*=128)&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var i=byteLength,mul=1,val=this[offset+--i];i>0&&(mul*=256);)val+=this[offset+--i]*mul;return val>=(mul*=128)&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readInt8=function readInt8(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),128&this[offset]?-1*(255-this[offset]+1):this[offset]},Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){(value=+value,offset|=0,byteLength|=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var mul=1,i=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){(value=+value,offset|=0,byteLength|=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var i=byteLength-1,mul=1;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),this[offset]=255&value,offset+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=255&value):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){if(value=+value,offset|=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0,mul=1,sub=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i-1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){if(value=+value,offset|=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1,mul=1,sub=0;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i+1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),value<0&&(value=255+value+1),this[offset]=255&value,offset+1},Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),value<0&&(value=4294967295+value+1),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.copy=function copy(target,targetStart,start,end){if(start||(start=0),end||0===end||(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart||(targetStart=0),end>0&&end<start&&(end=start),end===start)return 0;if(0===target.length||0===this.length)return 0;if(targetStart<0)throw new RangeError("targetStart out of bounds");if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);var i,len=end-start;if(this===target&&start<targetStart&&targetStart<end)for(i=len-1;i>=0;--i)target[i+targetStart]=this[i+start];else if(len<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<len;++i)target[i+targetStart]=this[i+start];else Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart);return len},Buffer.prototype.fill=function fill(val,start,end,encoding){if("string"==typeof val){if("string"==typeof start?(encoding=start,start=0,end=this.length):"string"==typeof end&&(encoding=end,end=this.length),1===val.length){var code=val.charCodeAt(0);code<256&&(val=code)}if(void 0!==encoding&&"string"!=typeof encoding)throw new TypeError("encoding must be a string");if("string"==typeof encoding&&!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding)}else"number"==typeof val&&(val&=255);if(start<0||this.length<start||this.length<end)throw new RangeError("Out of range index");if(end<=start)return this;var i;if(start>>>=0,end=void 0===end?this.length:end>>>0,val||(val=0),"number"==typeof val)for(i=start;i<end;++i)this[i]=val;else{var bytes=Buffer.isBuffer(val)?val:utf8ToBytes(new Buffer(val,encoding).toString()),len=bytes.length;for(i=0;i<end-start;++i)this[i+start]=bytes[i%len]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function toHex(n){return n<16?"0"+n.toString(16):n.toString(16)}function utf8ToBytes(string,units){var codePoint;units=units||1/0;for(var length=string.length,leadSurrogate=null,bytes=[],i=0;i<length;++i){if((codePoint=string.charCodeAt(i))>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){(units-=3)>-1&&bytes.push(239,191,189);continue}if(i+1===length){(units-=3)>-1&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){(units-=3)>-1&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=65536+(leadSurrogate-55296<<10|codePoint-56320)}else leadSurrogate&&(units-=3)>-1&&bytes.push(239,191,189);if(leadSurrogate=null,codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,63&codePoint|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,63&codePoint|128)}else{if(!(codePoint<1114112))throw new Error("Invalid code point");if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,63&codePoint|128)}}return bytes}function base64ToBytes(str){return base64.toByteArray(function base64clean(str){if((str=function stringtrim(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}(str).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;str.length%4!=0;)str+="=";return str}(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length&&!(i+offset>=dst.length||i>=src.length);++i)dst[i+offset]=src[i];return i}}).call(this,__webpack_require__(22))},function(module,exports,__webpack_require__){(function(process){var debug;exports=module.exports=SemVer,debug="object"==typeof process&&Object({NODE_ENV:"production",NODE_PATH:"",PUBLIC_URL:"."})&&Object({NODE_ENV:"production",NODE_PATH:"",PUBLIC_URL:"."}).NODE_DEBUG&&/\bsemver\b/i.test(Object({NODE_ENV:"production",NODE_PATH:"",PUBLIC_URL:"."}).NODE_DEBUG)?function(){var args=Array.prototype.slice.call(arguments,0);args.unshift("SEMVER"),console.log.apply(console,args)}:function(){},exports.SEMVER_SPEC_VERSION="2.0.0";var MAX_LENGTH=256,MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991,re=exports.re=[],src=exports.src=[],t=exports.tokens={},R=0;function tok(n){t[n]=R++}tok("NUMERICIDENTIFIER"),src[t.NUMERICIDENTIFIER]="0|[1-9]\\d*",tok("NUMERICIDENTIFIERLOOSE"),src[t.NUMERICIDENTIFIERLOOSE]="[0-9]+",tok("NONNUMERICIDENTIFIER"),src[t.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",tok("MAINVERSION"),src[t.MAINVERSION]="("+src[t.NUMERICIDENTIFIER]+")\\.("+src[t.NUMERICIDENTIFIER]+")\\.("+src[t.NUMERICIDENTIFIER]+")",tok("MAINVERSIONLOOSE"),src[t.MAINVERSIONLOOSE]="("+src[t.NUMERICIDENTIFIERLOOSE]+")\\.("+src[t.NUMERICIDENTIFIERLOOSE]+")\\.("+src[t.NUMERICIDENTIFIERLOOSE]+")",tok("PRERELEASEIDENTIFIER"),src[t.PRERELEASEIDENTIFIER]="(?:"+src[t.NUMERICIDENTIFIER]+"|"+src[t.NONNUMERICIDENTIFIER]+")",tok("PRERELEASEIDENTIFIERLOOSE"),src[t.PRERELEASEIDENTIFIERLOOSE]="(?:"+src[t.NUMERICIDENTIFIERLOOSE]+"|"+src[t.NONNUMERICIDENTIFIER]+")",tok("PRERELEASE"),src[t.PRERELEASE]="(?:-("+src[t.PRERELEASEIDENTIFIER]+"(?:\\."+src[t.PRERELEASEIDENTIFIER]+")*))",tok("PRERELEASELOOSE"),src[t.PRERELEASELOOSE]="(?:-?("+src[t.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+src[t.PRERELEASEIDENTIFIERLOOSE]+")*))",tok("BUILDIDENTIFIER"),src[t.BUILDIDENTIFIER]="[0-9A-Za-z-]+",tok("BUILD"),src[t.BUILD]="(?:\\+("+src[t.BUILDIDENTIFIER]+"(?:\\."+src[t.BUILDIDENTIFIER]+")*))",tok("FULL"),tok("FULLPLAIN"),src[t.FULLPLAIN]="v?"+src[t.MAINVERSION]+src[t.PRERELEASE]+"?"+src[t.BUILD]+"?",src[t.FULL]="^"+src[t.FULLPLAIN]+"$",tok("LOOSEPLAIN"),src[t.LOOSEPLAIN]="[v=\\s]*"+src[t.MAINVERSIONLOOSE]+src[t.PRERELEASELOOSE]+"?"+src[t.BUILD]+"?",tok("LOOSE"),src[t.LOOSE]="^"+src[t.LOOSEPLAIN]+"$",tok("GTLT"),src[t.GTLT]="((?:<|>)?=?)",tok("XRANGEIDENTIFIERLOOSE"),src[t.XRANGEIDENTIFIERLOOSE]=src[t.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",tok("XRANGEIDENTIFIER"),src[t.XRANGEIDENTIFIER]=src[t.NUMERICIDENTIFIER]+"|x|X|\\*",tok("XRANGEPLAIN"),src[t.XRANGEPLAIN]="[v=\\s]*("+src[t.XRANGEIDENTIFIER]+")(?:\\.("+src[t.XRANGEIDENTIFIER]+")(?:\\.("+src[t.XRANGEIDENTIFIER]+")(?:"+src[t.PRERELEASE]+")?"+src[t.BUILD]+"?)?)?",tok("XRANGEPLAINLOOSE"),src[t.XRANGEPLAINLOOSE]="[v=\\s]*("+src[t.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+src[t.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+src[t.XRANGEIDENTIFIERLOOSE]+")(?:"+src[t.PRERELEASELOOSE]+")?"+src[t.BUILD]+"?)?)?",tok("XRANGE"),src[t.XRANGE]="^"+src[t.GTLT]+"\\s*"+src[t.XRANGEPLAIN]+"$",tok("XRANGELOOSE"),src[t.XRANGELOOSE]="^"+src[t.GTLT]+"\\s*"+src[t.XRANGEPLAINLOOSE]+"$",tok("COERCE"),src[t.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",tok("COERCERTL"),re[t.COERCERTL]=new RegExp(src[t.COERCE],"g"),tok("LONETILDE"),src[t.LONETILDE]="(?:~>?)",tok("TILDETRIM"),src[t.TILDETRIM]="(\\s*)"+src[t.LONETILDE]+"\\s+",re[t.TILDETRIM]=new RegExp(src[t.TILDETRIM],"g");tok("TILDE"),src[t.TILDE]="^"+src[t.LONETILDE]+src[t.XRANGEPLAIN]+"$",tok("TILDELOOSE"),src[t.TILDELOOSE]="^"+src[t.LONETILDE]+src[t.XRANGEPLAINLOOSE]+"$",tok("LONECARET"),src[t.LONECARET]="(?:\\^)",tok("CARETTRIM"),src[t.CARETTRIM]="(\\s*)"+src[t.LONECARET]+"\\s+",re[t.CARETTRIM]=new RegExp(src[t.CARETTRIM],"g");tok("CARET"),src[t.CARET]="^"+src[t.LONECARET]+src[t.XRANGEPLAIN]+"$",tok("CARETLOOSE"),src[t.CARETLOOSE]="^"+src[t.LONECARET]+src[t.XRANGEPLAINLOOSE]+"$",tok("COMPARATORLOOSE"),src[t.COMPARATORLOOSE]="^"+src[t.GTLT]+"\\s*("+src[t.LOOSEPLAIN]+")$|^$",tok("COMPARATOR"),src[t.COMPARATOR]="^"+src[t.GTLT]+"\\s*("+src[t.FULLPLAIN]+")$|^$",tok("COMPARATORTRIM"),src[t.COMPARATORTRIM]="(\\s*)"+src[t.GTLT]+"\\s*("+src[t.LOOSEPLAIN]+"|"+src[t.XRANGEPLAIN]+")",re[t.COMPARATORTRIM]=new RegExp(src[t.COMPARATORTRIM],"g");tok("HYPHENRANGE"),src[t.HYPHENRANGE]="^\\s*("+src[t.XRANGEPLAIN]+")\\s+-\\s+("+src[t.XRANGEPLAIN]+")\\s*$",tok("HYPHENRANGELOOSE"),src[t.HYPHENRANGELOOSE]="^\\s*("+src[t.XRANGEPLAINLOOSE]+")\\s+-\\s+("+src[t.XRANGEPLAINLOOSE]+")\\s*$",tok("STAR"),src[t.STAR]="(<|>)?=?\\s*\\*";for(var i=0;i<R;i++)debug(i,src[i]),re[i]||(re[i]=new RegExp(src[i]));function parse(version,options){if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),version instanceof SemVer)return version;if("string"!=typeof version)return null;if(version.length>MAX_LENGTH)return null;if(!(options.loose?re[t.LOOSE]:re[t.FULL]).test(version))return null;try{return new SemVer(version,options)}catch(er){return null}}function SemVer(version,options){if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),version instanceof SemVer){if(version.loose===options.loose)return version;version=version.version}else if("string"!=typeof version)throw new TypeError("Invalid Version: "+version);if(version.length>MAX_LENGTH)throw new TypeError("version is longer than "+MAX_LENGTH+" characters");if(!(this instanceof SemVer))return new SemVer(version,options);debug("SemVer",version,options),this.options=options,this.loose=!!options.loose;var m=version.trim().match(options.loose?re[t.LOOSE]:re[t.FULL]);if(!m)throw new TypeError("Invalid Version: "+version);if(this.raw=version,this.major=+m[1],this.minor=+m[2],this.patch=+m[3],this.major>MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");m[4]?this.prerelease=m[4].split(".").map((function(id){if(/^[0-9]+$/.test(id)){var num=+id;if(num>=0&&num<MAX_SAFE_INTEGER)return num}return id})):this.prerelease=[],this.build=m[5]?m[5].split("."):[],this.format()}exports.parse=parse,exports.valid=function valid(version,options){var v=parse(version,options);return v?v.version:null},exports.clean=function clean(version,options){var s=parse(version.trim().replace(/^[=v]+/,""),options);return s?s.version:null},exports.SemVer=SemVer,SemVer.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},SemVer.prototype.toString=function(){return this.version},SemVer.prototype.compare=function(other){return debug("SemVer.compare",this.version,this.options,other),other instanceof SemVer||(other=new SemVer(other,this.options)),this.compareMain(other)||this.comparePre(other)},SemVer.prototype.compareMain=function(other){return other instanceof SemVer||(other=new SemVer(other,this.options)),compareIdentifiers(this.major,other.major)||compareIdentifiers(this.minor,other.minor)||compareIdentifiers(this.patch,other.patch)},SemVer.prototype.comparePre=function(other){if(other instanceof SemVer||(other=new SemVer(other,this.options)),this.prerelease.length&&!other.prerelease.length)return-1;if(!this.prerelease.length&&other.prerelease.length)return 1;if(!this.prerelease.length&&!other.prerelease.length)return 0;var i=0;do{var a=this.prerelease[i],b=other.prerelease[i];if(debug("prerelease compare",i,a,b),void 0===a&&void 0===b)return 0;if(void 0===b)return 1;if(void 0===a)return-1;if(a!==b)return compareIdentifiers(a,b)}while(++i)},SemVer.prototype.compareBuild=function(other){other instanceof SemVer||(other=new SemVer(other,this.options));var i=0;do{var a=this.build[i],b=other.build[i];if(debug("prerelease compare",i,a,b),void 0===a&&void 0===b)return 0;if(void 0===b)return 1;if(void 0===a)return-1;if(a!==b)return compareIdentifiers(a,b)}while(++i)},SemVer.prototype.inc=function(release,identifier){switch(release){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",identifier);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",identifier);break;case"prepatch":this.prerelease.length=0,this.inc("patch",identifier),this.inc("pre",identifier);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",identifier),this.inc("pre",identifier);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var i=this.prerelease.length;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);-1===i&&this.prerelease.push(0)}identifier&&(this.prerelease[0]===identifier?isNaN(this.prerelease[1])&&(this.prerelease=[identifier,0]):this.prerelease=[identifier,0]);break;default:throw new Error("invalid increment argument: "+release)}return this.format(),this.raw=this.version,this},exports.inc=function inc(version,release,loose,identifier){"string"==typeof loose&&(identifier=loose,loose=void 0);try{return new SemVer(version,loose).inc(release,identifier).version}catch(er){return null}},exports.diff=function diff(version1,version2){if(eq(version1,version2))return null;var v1=parse(version1),v2=parse(version2),prefix="";if(v1.prerelease.length||v2.prerelease.length){prefix="pre";var defaultResult="prerelease"}for(var key in v1)if(("major"===key||"minor"===key||"patch"===key)&&v1[key]!==v2[key])return prefix+key;return defaultResult},exports.compareIdentifiers=compareIdentifiers;var numeric=/^[0-9]+$/;function compareIdentifiers(a,b){var anum=numeric.test(a),bnum=numeric.test(b);return anum&&bnum&&(a=+a,b=+b),a===b?0:anum&&!bnum?-1:bnum&&!anum?1:a<b?-1:1}function compare(a,b,loose){return new SemVer(a,loose).compare(new SemVer(b,loose))}function gt(a,b,loose){return compare(a,b,loose)>0}function lt(a,b,loose){return compare(a,b,loose)<0}function eq(a,b,loose){return 0===compare(a,b,loose)}function neq(a,b,loose){return 0!==compare(a,b,loose)}function gte(a,b,loose){return compare(a,b,loose)>=0}function lte(a,b,loose){return compare(a,b,loose)<=0}function cmp(a,op,b,loose){switch(op){case"===":return"object"==typeof a&&(a=a.version),"object"==typeof b&&(b=b.version),a===b;case"!==":return"object"==typeof a&&(a=a.version),"object"==typeof b&&(b=b.version),a!==b;case"":case"=":case"==":return eq(a,b,loose);case"!=":return neq(a,b,loose);case">":return gt(a,b,loose);case">=":return gte(a,b,loose);case"<":return lt(a,b,loose);case"<=":return lte(a,b,loose);default:throw new TypeError("Invalid operator: "+op)}}function Comparator(comp,options){if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),comp instanceof Comparator){if(comp.loose===!!options.loose)return comp;comp=comp.value}if(!(this instanceof Comparator))return new Comparator(comp,options);debug("comparator",comp,options),this.options=options,this.loose=!!options.loose,this.parse(comp),this.semver===ANY?this.value="":this.value=this.operator+this.semver.version,debug("comp",this)}exports.rcompareIdentifiers=function rcompareIdentifiers(a,b){return compareIdentifiers(b,a)},exports.major=function major(a,loose){return new SemVer(a,loose).major},exports.minor=function minor(a,loose){return new SemVer(a,loose).minor},exports.patch=function patch(a,loose){return new SemVer(a,loose).patch},exports.compare=compare,exports.compareLoose=function compareLoose(a,b){return compare(a,b,!0)},exports.compareBuild=function compareBuild(a,b,loose){var versionA=new SemVer(a,loose),versionB=new SemVer(b,loose);return versionA.compare(versionB)||versionA.compareBuild(versionB)},exports.rcompare=function rcompare(a,b,loose){return compare(b,a,loose)},exports.sort=function sort(list,loose){return list.sort((function(a,b){return exports.compareBuild(a,b,loose)}))},exports.rsort=function rsort(list,loose){return list.sort((function(a,b){return exports.compareBuild(b,a,loose)}))},exports.gt=gt,exports.lt=lt,exports.eq=eq,exports.neq=neq,exports.gte=gte,exports.lte=lte,exports.cmp=cmp,exports.Comparator=Comparator;var ANY={};function Range(range,options){if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),range instanceof Range)return range.loose===!!options.loose&&range.includePrerelease===!!options.includePrerelease?range:new Range(range.raw,options);if(range instanceof Comparator)return new Range(range.value,options);if(!(this instanceof Range))return new Range(range,options);if(this.options=options,this.loose=!!options.loose,this.includePrerelease=!!options.includePrerelease,this.raw=range,this.set=range.split(/\s*\|\|\s*/).map((function(range){return this.parseRange(range.trim())}),this).filter((function(c){return c.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+range);this.format()}function isSatisfiable(comparators,options){for(var result=!0,remainingComparators=comparators.slice(),testComparator=remainingComparators.pop();result&&remainingComparators.length;)result=remainingComparators.every((function(otherComparator){return testComparator.intersects(otherComparator,options)})),testComparator=remainingComparators.pop();return result}function isX(id){return!id||"x"===id.toLowerCase()||"*"===id}function hyphenReplace($0,from,fM,fm,fp,fpr,fb,to,tM,tm,tp,tpr,tb){return((from=isX(fM)?"":isX(fm)?">="+fM+".0.0":isX(fp)?">="+fM+"."+fm+".0":">="+from)+" "+(to=isX(tM)?"":isX(tm)?"<"+(+tM+1)+".0.0":isX(tp)?"<"+tM+"."+(+tm+1)+".0":tpr?"<="+tM+"."+tm+"."+tp+"-"+tpr:"<="+to)).trim()}function testSet(set,version,options){for(var i=0;i<set.length;i++)if(!set[i].test(version))return!1;if(version.prerelease.length&&!options.includePrerelease){for(i=0;i<set.length;i++)if(debug(set[i].semver),set[i].semver!==ANY&&set[i].semver.prerelease.length>0){var allowed=set[i].semver;if(allowed.major===version.major&&allowed.minor===version.minor&&allowed.patch===version.patch)return!0}return!1}return!0}function satisfies(version,range,options){try{range=new Range(range,options)}catch(er){return!1}return range.test(version)}function outside(version,range,hilo,options){var gtfn,ltefn,ltfn,comp,ecomp;switch(version=new SemVer(version,options),range=new Range(range,options),hilo){case">":gtfn=gt,ltefn=lte,ltfn=lt,comp=">",ecomp=">=";break;case"<":gtfn=lt,ltefn=gte,ltfn=gt,comp="<",ecomp="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(version,range,options))return!1;for(var i=0;i<range.set.length;++i){var comparators=range.set[i],high=null,low=null;if(comparators.forEach((function(comparator){comparator.semver===ANY&&(comparator=new Comparator(">=0.0.0")),high=high||comparator,low=low||comparator,gtfn(comparator.semver,high.semver,options)?high=comparator:ltfn(comparator.semver,low.semver,options)&&(low=comparator)})),high.operator===comp||high.operator===ecomp)return!1;if((!low.operator||low.operator===comp)&&ltefn(version,low.semver))return!1;if(low.operator===ecomp&&ltfn(version,low.semver))return!1}return!0}Comparator.prototype.parse=function(comp){var r=this.options.loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR],m=comp.match(r);if(!m)throw new TypeError("Invalid comparator: "+comp);this.operator=void 0!==m[1]?m[1]:"","="===this.operator&&(this.operator=""),m[2]?this.semver=new SemVer(m[2],this.options.loose):this.semver=ANY},Comparator.prototype.toString=function(){return this.value},Comparator.prototype.test=function(version){if(debug("Comparator.test",version,this.options.loose),this.semver===ANY||version===ANY)return!0;if("string"==typeof version)try{version=new SemVer(version,this.options)}catch(er){return!1}return cmp(version,this.operator,this.semver,this.options)},Comparator.prototype.intersects=function(comp,options){if(!(comp instanceof Comparator))throw new TypeError("a Comparator is required");var rangeTmp;if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),""===this.operator)return""===this.value||(rangeTmp=new Range(comp.value,options),satisfies(this.value,rangeTmp,options));if(""===comp.operator)return""===comp.value||(rangeTmp=new Range(this.value,options),satisfies(comp.semver,rangeTmp,options));var sameDirectionIncreasing=!(">="!==this.operator&&">"!==this.operator||">="!==comp.operator&&">"!==comp.operator),sameDirectionDecreasing=!("<="!==this.operator&&"<"!==this.operator||"<="!==comp.operator&&"<"!==comp.operator),sameSemVer=this.semver.version===comp.semver.version,differentDirectionsInclusive=!(">="!==this.operator&&"<="!==this.operator||">="!==comp.operator&&"<="!==comp.operator),oppositeDirectionsLessThan=cmp(this.semver,"<",comp.semver,options)&&(">="===this.operator||">"===this.operator)&&("<="===comp.operator||"<"===comp.operator),oppositeDirectionsGreaterThan=cmp(this.semver,">",comp.semver,options)&&("<="===this.operator||"<"===this.operator)&&(">="===comp.operator||">"===comp.operator);return sameDirectionIncreasing||sameDirectionDecreasing||sameSemVer&&differentDirectionsInclusive||oppositeDirectionsLessThan||oppositeDirectionsGreaterThan},exports.Range=Range,Range.prototype.format=function(){return this.range=this.set.map((function(comps){return comps.join(" ").trim()})).join("||").trim(),this.range},Range.prototype.toString=function(){return this.range},Range.prototype.parseRange=function(range){var loose=this.options.loose;range=range.trim();var hr=loose?re[t.HYPHENRANGELOOSE]:re[t.HYPHENRANGE];range=range.replace(hr,hyphenReplace),debug("hyphen replace",range),range=range.replace(re[t.COMPARATORTRIM],"$1$2$3"),debug("comparator trim",range,re[t.COMPARATORTRIM]),range=(range=(range=range.replace(re[t.TILDETRIM],"$1~")).replace(re[t.CARETTRIM],"$1^")).split(/\s+/).join(" ");var compRe=loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR],set=range.split(" ").map((function(comp){return function parseComparator(comp,options){return debug("comp",comp,options),comp=function replaceCarets(comp,options){return comp.trim().split(/\s+/).map((function(comp){return function replaceCaret(comp,options){debug("caret",comp,options);var r=options.loose?re[t.CARETLOOSE]:re[t.CARET];return comp.replace(r,(function(_,M,m,p,pr){var ret;return debug("caret",comp,_,M,m,p,pr),isX(M)?ret="":isX(m)?ret=">="+M+".0.0 <"+(+M+1)+".0.0":isX(p)?ret="0"===M?">="+M+"."+m+".0 <"+M+"."+(+m+1)+".0":">="+M+"."+m+".0 <"+(+M+1)+".0.0":pr?(debug("replaceCaret pr",pr),ret="0"===M?"0"===m?">="+M+"."+m+"."+p+"-"+pr+" <"+M+"."+m+"."+(+p+1):">="+M+"."+m+"."+p+"-"+pr+" <"+M+"."+(+m+1)+".0":">="+M+"."+m+"."+p+"-"+pr+" <"+(+M+1)+".0.0"):(debug("no pr"),ret="0"===M?"0"===m?">="+M+"."+m+"."+p+" <"+M+"."+m+"."+(+p+1):">="+M+"."+m+"."+p+" <"+M+"."+(+m+1)+".0":">="+M+"."+m+"."+p+" <"+(+M+1)+".0.0"),debug("caret return",ret),ret}))}(comp,options)})).join(" ")}(comp,options),debug("caret",comp),comp=function replaceTildes(comp,options){return comp.trim().split(/\s+/).map((function(comp){return function replaceTilde(comp,options){var r=options.loose?re[t.TILDELOOSE]:re[t.TILDE];return comp.replace(r,(function(_,M,m,p,pr){var ret;return debug("tilde",comp,_,M,m,p,pr),isX(M)?ret="":isX(m)?ret=">="+M+".0.0 <"+(+M+1)+".0.0":isX(p)?ret=">="+M+"."+m+".0 <"+M+"."+(+m+1)+".0":pr?(debug("replaceTilde pr",pr),ret=">="+M+"."+m+"."+p+"-"+pr+" <"+M+"."+(+m+1)+".0"):ret=">="+M+"."+m+"."+p+" <"+M+"."+(+m+1)+".0",debug("tilde return",ret),ret}))}(comp,options)})).join(" ")}(comp,options),debug("tildes",comp),comp=function replaceXRanges(comp,options){return debug("replaceXRanges",comp,options),comp.split(/\s+/).map((function(comp){return function replaceXRange(comp,options){comp=comp.trim();var r=options.loose?re[t.XRANGELOOSE]:re[t.XRANGE];return comp.replace(r,(function(ret,gtlt,M,m,p,pr){debug("xRange",comp,ret,gtlt,M,m,p,pr);var xM=isX(M),xm=xM||isX(m),xp=xm||isX(p),anyX=xp;return"="===gtlt&&anyX&&(gtlt=""),pr=options.includePrerelease?"-0":"",xM?ret=">"===gtlt||"<"===gtlt?"<0.0.0-0":"*":gtlt&&anyX?(xm&&(m=0),p=0,">"===gtlt?(gtlt=">=",xm?(M=+M+1,m=0,p=0):(m=+m+1,p=0)):"<="===gtlt&&(gtlt="<",xm?M=+M+1:m=+m+1),ret=gtlt+M+"."+m+"."+p+pr):xm?ret=">="+M+".0.0"+pr+" <"+(+M+1)+".0.0"+pr:xp&&(ret=">="+M+"."+m+".0"+pr+" <"+M+"."+(+m+1)+".0"+pr),debug("xRange return",ret),ret}))}(comp,options)})).join(" ")}(comp,options),debug("xrange",comp),comp=function replaceStars(comp,options){return debug("replaceStars",comp,options),comp.trim().replace(re[t.STAR],"")}(comp,options),debug("stars",comp),comp}(comp,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(set=set.filter((function(comp){return!!comp.match(compRe)}))),set=set.map((function(comp){return new Comparator(comp,this.options)}),this)},Range.prototype.intersects=function(range,options){if(!(range instanceof Range))throw new TypeError("a Range is required");return this.set.some((function(thisComparators){return isSatisfiable(thisComparators,options)&&range.set.some((function(rangeComparators){return isSatisfiable(rangeComparators,options)&&thisComparators.every((function(thisComparator){return rangeComparators.every((function(rangeComparator){return thisComparator.intersects(rangeComparator,options)}))}))}))}))},exports.toComparators=function toComparators(range,options){return new Range(range,options).set.map((function(comp){return comp.map((function(c){return c.value})).join(" ").trim().split(" ")}))},Range.prototype.test=function(version){if(!version)return!1;if("string"==typeof version)try{version=new SemVer(version,this.options)}catch(er){return!1}for(var i=0;i<this.set.length;i++)if(testSet(this.set[i],version,this.options))return!0;return!1},exports.satisfies=satisfies,exports.maxSatisfying=function maxSatisfying(versions,range,options){var max=null,maxSV=null;try{var rangeObj=new Range(range,options)}catch(er){return null}return versions.forEach((function(v){rangeObj.test(v)&&(max&&-1!==maxSV.compare(v)||(maxSV=new SemVer(max=v,options)))})),max},exports.minSatisfying=function minSatisfying(versions,range,options){var min=null,minSV=null;try{var rangeObj=new Range(range,options)}catch(er){return null}return versions.forEach((function(v){rangeObj.test(v)&&(min&&1!==minSV.compare(v)||(minSV=new SemVer(min=v,options)))})),min},exports.minVersion=function minVersion(range,loose){range=new Range(range,loose);var minver=new SemVer("0.0.0");if(range.test(minver))return minver;if(minver=new SemVer("0.0.0-0"),range.test(minver))return minver;minver=null;for(var i=0;i<range.set.length;++i){range.set[i].forEach((function(comparator){var compver=new SemVer(comparator.semver.version);switch(comparator.operator){case">":0===compver.prerelease.length?compver.patch++:compver.prerelease.push(0),compver.raw=compver.format();case"":case">=":minver&&!gt(minver,compver)||(minver=compver);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+comparator.operator)}}))}if(minver&&range.test(minver))return minver;return null},exports.validRange=function validRange(range,options){try{return new Range(range,options).range||"*"}catch(er){return null}},exports.ltr=function ltr(version,range,options){return outside(version,range,"<",options)},exports.gtr=function gtr(version,range,options){return outside(version,range,">",options)},exports.outside=outside,exports.prerelease=function prerelease(version,options){var parsed=parse(version,options);return parsed&&parsed.prerelease.length?parsed.prerelease:null},exports.intersects=function intersects(r1,r2,options){return r1=new Range(r1,options),r2=new Range(r2,options),r1.intersects(r2)},exports.coerce=function coerce(version,options){if(version instanceof SemVer)return version;"number"==typeof version&&(version=String(version));if("string"!=typeof version)return null;var match=null;if((options=options||{}).rtl){for(var next;(next=re[t.COERCERTL].exec(version))&&(!match||match.index+match[0].length!==version.length);)match&&next.index+next[0].length===match.index+match[0].length||(match=next),re[t.COERCERTL].lastIndex=next.index+next[1].length+next[2].length;re[t.COERCERTL].lastIndex=-1}else match=version.match(re[t.COERCE]);if(null===match)return null;return parse(match[2]+"."+(match[3]||"0")+"."+(match[4]||"0"),options)}}).call(this,__webpack_require__(128))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function default_1(url){var _a=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(url).slice(1,3);return{library:_a[0],version:_a[1]}}},,function(module,exports,__webpack_require__){"use strict";var toStr=Object.prototype.toString;module.exports=function isArguments(value){var str=toStr.call(value),isArgs="[object Arguments]"===str;return isArgs||(isArgs="[object Array]"!==str&&null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&"[object Function]"===toStr.call(value.callee)),isArgs}},function(module,exports,__webpack_require__){"use strict";var functionsHaveNames=function functionsHaveNames(){return"string"==typeof function f(){}.name},gOPD=Object.getOwnPropertyDescriptor;functionsHaveNames.functionsHaveConfigurableNames=function functionsHaveConfigurableNames(){return functionsHaveNames()&&gOPD&&!!gOPD((function(){}),"name").configurable};var $bind=Function.prototype.bind;functionsHaveNames.boundFunctionsHaveNames=function boundFunctionsHaveNames(){return functionsHaveNames()&&"function"==typeof $bind&&""!==function f(){}.bind().name},module.exports=functionsHaveNames},function(module,exports,__webpack_require__){"use strict";var has=__webpack_require__(43),toPrimitive=__webpack_require__(302),keys=__webpack_require__(129),inspect=__webpack_require__(130),GetIntrinsic=__webpack_require__(10),$TypeError=GetIntrinsic("%TypeError%"),$RangeError=GetIntrinsic("%RangeError%"),$SyntaxError=GetIntrinsic("%SyntaxError%"),$Array=GetIntrinsic("%Array%"),$ArrayPrototype=$Array.prototype,$String=GetIntrinsic("%String%"),$Object=GetIntrinsic("%Object%"),$Number=GetIntrinsic("%Number%"),$Symbol=GetIntrinsic("%Symbol%",!0),$RegExp=GetIntrinsic("%RegExp%"),$Date=GetIntrinsic("%Date%"),$Function=GetIntrinsic("%Function%"),$preventExtensions=$Object.preventExtensions,hasSymbols=__webpack_require__(34)(),assertRecord=__webpack_require__(182),$isNaN=__webpack_require__(131),$isFinite=__webpack_require__(183),MAX_ARRAY_LENGTH=Math.pow(2,32)-1,MAX_SAFE_INTEGER=__webpack_require__(184),assign=__webpack_require__(65),sign=__webpack_require__(185),mod=__webpack_require__(186),isPrimitive=__webpack_require__(307),forEach=__webpack_require__(132),every=__webpack_require__(133),isSamePropertyDescriptor=__webpack_require__(308),isPropertyDescriptor=__webpack_require__(187),parseInteger=parseInt,callBound=__webpack_require__(44),regexTester=__webpack_require__(188),getIteratorMethod=__webpack_require__(189),getSymbolDescription=__webpack_require__(190),$PromiseThen=callBound("Promise.prototype.then",!0),arraySlice=callBound("Array.prototype.slice"),strSlice=callBound("String.prototype.slice"),$indexOf=callBound("Array.prototype.indexOf"),$push=callBound("Array.prototype.push"),isBinary=regexTester(/^0b[01]+$/i),isOctal=regexTester(/^0o[0-7]+$/i),isDigit=regexTester(/^[0-9]$/),regexExec=callBound("RegExp.prototype.exec"),hasNonWS=regexTester(new $RegExp("["+["","​","￾"].join("")+"]","g")),isInvalidHexLiteral=regexTester(/^[-+]0x[0-9a-f]+$/i),$charCodeAt=callBound("String.prototype.charCodeAt"),$isEnumerable=callBound("Object.prototype.propertyIsEnumerable"),toStr=callBound("Object.prototype.toString"),$NumberValueOf=callBound("Number.prototype.valueOf"),$BooleanValueOf=callBound("Boolean.prototype.valueOf"),$StringValueOf=callBound("String.prototype.valueOf"),$DateValueOf=callBound("Date.prototype.valueOf"),$SymbolToString=callBound("Symbol.prototype.toString",!0),$floor=Math.floor,$abs=Math.abs,$ObjectCreate=$Object.create,$gOPD=$Object.getOwnPropertyDescriptor,$gOPN=$Object.getOwnPropertyNames,$gOPS=$Object.getOwnPropertySymbols,$isExtensible=$Object.isExtensible,$defineProperty=$Object.defineProperty,$setProto=__webpack_require__(192),DefineOwnProperty=function DefineOwnProperty(ES,O,P,desc){if(!$defineProperty){if(!ES.IsDataDescriptor(desc))return!1;if(!desc["[[Configurable]]"]||!desc["[[Writable]]"])return!1;if(P in O&&$isEnumerable(O,P)!==!!desc["[[Enumerable]]"])return!1;var V=desc["[[Value]]"];return O[P]=V,ES.SameValue(O[P],V)}return $defineProperty(O,P,ES.FromPropertyDescriptor(desc)),!0},ws=["\t\n\v\f\r   ᠎    ","         　\u2028","\u2029\ufeff"].join(""),trimRegex=new RegExp("(^["+ws+"]+)|(["+ws+"]+$)","g"),$replace=callBound("String.prototype.replace"),ES5=__webpack_require__(309),hasRegExpMatcher=__webpack_require__(194),ES6=assign(assign({},ES5),{Call:function Call(F,V){var args=arguments.length>2?arguments[2]:[];if(!this.IsCallable(F))throw new $TypeError(inspect(F)+" is not a function");return F.apply(V,args)},ToPrimitive:toPrimitive,ToNumber:function ToNumber(argument){var value=isPrimitive(argument)?argument:toPrimitive(argument,$Number);if("symbol"==typeof value)throw new $TypeError("Cannot convert a Symbol value to a number");if("string"==typeof value){if(isBinary(value))return this.ToNumber(parseInteger(strSlice(value,2),2));if(isOctal(value))return this.ToNumber(parseInteger(strSlice(value,2),8));if(hasNonWS(value)||isInvalidHexLiteral(value))return NaN;var trimmed=function(value){return $replace(value,trimRegex,"")}(value);if(trimmed!==value)return this.ToNumber(trimmed)}return $Number(value)},ToInt16:function ToInt16(argument){var int16bit=this.ToUint16(argument);return int16bit>=32768?int16bit-65536:int16bit},ToInt8:function ToInt8(argument){var int8bit=this.ToUint8(argument);return int8bit>=128?int8bit-256:int8bit},ToUint8:function ToUint8(argument){var number=this.ToNumber(argument);if($isNaN(number)||0===number||!$isFinite(number))return 0;var posInt=sign(number)*$floor($abs(number));return mod(posInt,256)},ToUint8Clamp:function ToUint8Clamp(argument){var number=this.ToNumber(argument);if($isNaN(number)||number<=0)return 0;if(number>=255)return 255;var f=$floor(argument);return f+.5<number?f+1:number<f+.5?f:f%2!=0?f+1:f},ToString:function ToString(argument){if("symbol"==typeof argument)throw new $TypeError("Cannot convert a Symbol value to a string");return $String(argument)},ToObject:function ToObject(value){return this.RequireObjectCoercible(value),$Object(value)},ToPropertyKey:function ToPropertyKey(argument){var key=this.ToPrimitive(argument,$String);return"symbol"==typeof key?key:this.ToString(key)},ToLength:function ToLength(argument){var len=this.ToInteger(argument);return len<=0?0:len>MAX_SAFE_INTEGER?MAX_SAFE_INTEGER:len},CanonicalNumericIndexString:function CanonicalNumericIndexString(argument){if("[object String]"!==toStr(argument))throw new $TypeError("must be a string");if("-0"===argument)return-0;var n=this.ToNumber(argument);return this.SameValue(this.ToString(n),argument)?n:void 0},RequireObjectCoercible:ES5.CheckObjectCoercible,IsArray:$Array.isArray||function IsArray(argument){return"[object Array]"===toStr(argument)},IsConstructor:function IsConstructor(argument){return"function"==typeof argument&&!!argument.prototype},IsExtensible:$preventExtensions?function IsExtensible(obj){return!isPrimitive(obj)&&$isExtensible(obj)}:function isExtensible(obj){return!0},IsInteger:function IsInteger(argument){if("number"!=typeof argument||$isNaN(argument)||!$isFinite(argument))return!1;var abs=$abs(argument);return $floor(abs)===abs},IsPropertyKey:function IsPropertyKey(argument){return"string"==typeof argument||"symbol"==typeof argument},IsRegExp:function IsRegExp(argument){if(!argument||"object"!=typeof argument)return!1;if(hasSymbols){var isRegExp=argument[$Symbol.match];if(void 0!==isRegExp)return ES5.ToBoolean(isRegExp)}return hasRegExpMatcher(argument)},SameValueZero:function SameValueZero(x,y){return x===y||$isNaN(x)&&$isNaN(y)},GetV:function GetV(V,P){if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");return this.ToObject(V)[P]},GetMethod:function GetMethod(O,P){if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var func=this.GetV(O,P);if(null!=func){if(!this.IsCallable(func))throw new $TypeError(P+"is not a function");return func}},Get:function Get(O,P){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true, got "+inspect(P));return O[P]},Type:function Type(x){return"symbol"==typeof x?"Symbol":ES5.Type(x)},SpeciesConstructor:function SpeciesConstructor(O,defaultConstructor){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");var C=O.constructor;if(void 0===C)return defaultConstructor;if("Object"!==this.Type(C))throw new $TypeError("O.constructor is not an Object");var S=hasSymbols&&$Symbol.species?C[$Symbol.species]:void 0;if(null==S)return defaultConstructor;if(this.IsConstructor(S))return S;throw new $TypeError("no constructor found")},FromPropertyDescriptor:function FromPropertyDescriptor(Desc){if(void 0===Desc)return Desc;assertRecord(this,"Property Descriptor","Desc",Desc);var obj={};return"[[Value]]"in Desc&&(obj.value=Desc["[[Value]]"]),"[[Writable]]"in Desc&&(obj.writable=Desc["[[Writable]]"]),"[[Get]]"in Desc&&(obj.get=Desc["[[Get]]"]),"[[Set]]"in Desc&&(obj.set=Desc["[[Set]]"]),"[[Enumerable]]"in Desc&&(obj.enumerable=Desc["[[Enumerable]]"]),"[[Configurable]]"in Desc&&(obj.configurable=Desc["[[Configurable]]"]),obj},CompletePropertyDescriptor:function CompletePropertyDescriptor(Desc){return assertRecord(this,"Property Descriptor","Desc",Desc),this.IsGenericDescriptor(Desc)||this.IsDataDescriptor(Desc)?(has(Desc,"[[Value]]")||(Desc["[[Value]]"]=void 0),has(Desc,"[[Writable]]")||(Desc["[[Writable]]"]=!1)):(has(Desc,"[[Get]]")||(Desc["[[Get]]"]=void 0),has(Desc,"[[Set]]")||(Desc["[[Set]]"]=void 0)),has(Desc,"[[Enumerable]]")||(Desc["[[Enumerable]]"]=!1),has(Desc,"[[Configurable]]")||(Desc["[[Configurable]]"]=!1),Desc},Set:function Set(O,P,V,Throw){if("Object"!==this.Type(O))throw new $TypeError("O must be an Object");if(!this.IsPropertyKey(P))throw new $TypeError("P must be a Property Key");if("Boolean"!==this.Type(Throw))throw new $TypeError("Throw must be a Boolean");if(Throw)return O[P]=V,!0;try{O[P]=V}catch(e){return!1}},HasOwnProperty:function HasOwnProperty(O,P){if("Object"!==this.Type(O))throw new $TypeError("O must be an Object");if(!this.IsPropertyKey(P))throw new $TypeError("P must be a Property Key");return has(O,P)},HasProperty:function HasProperty(O,P){if("Object"!==this.Type(O))throw new $TypeError("O must be an Object");if(!this.IsPropertyKey(P))throw new $TypeError("P must be a Property Key");return P in O},IsConcatSpreadable:function IsConcatSpreadable(O){if("Object"!==this.Type(O))return!1;if(hasSymbols&&"symbol"==typeof $Symbol.isConcatSpreadable){var spreadable=this.Get(O,Symbol.isConcatSpreadable);if(void 0!==spreadable)return this.ToBoolean(spreadable)}return this.IsArray(O)},Invoke:function Invoke(O,P){if(!this.IsPropertyKey(P))throw new $TypeError("P must be a Property Key");var argumentsList=arraySlice(arguments,2),func=this.GetV(O,P);return this.Call(func,O,argumentsList)},GetIterator:function GetIterator(obj,method){var actualMethod=method;arguments.length<2&&(actualMethod=getIteratorMethod(this,obj));var iterator=this.Call(actualMethod,obj);if("Object"!==this.Type(iterator))throw new $TypeError("iterator must return an object");return iterator},IteratorNext:function IteratorNext(iterator,value){var result=this.Invoke(iterator,"next",arguments.length<2?[]:[value]);if("Object"!==this.Type(result))throw new $TypeError("iterator next must return an object");return result},IteratorComplete:function IteratorComplete(iterResult){if("Object"!==this.Type(iterResult))throw new $TypeError("Assertion failed: Type(iterResult) is not Object");return this.ToBoolean(this.Get(iterResult,"done"))},IteratorValue:function IteratorValue(iterResult){if("Object"!==this.Type(iterResult))throw new $TypeError("Assertion failed: Type(iterResult) is not Object");return this.Get(iterResult,"value")},IteratorStep:function IteratorStep(iterator){var result=this.IteratorNext(iterator);return!0!==this.IteratorComplete(result)&&result},IteratorClose:function IteratorClose(iterator,completion){if("Object"!==this.Type(iterator))throw new $TypeError("Assertion failed: Type(iterator) is not Object");if(!this.IsCallable(completion))throw new $TypeError("Assertion failed: completion is not a thunk for a Completion Record");var completionRecord,completionThunk=completion,iteratorReturn=this.GetMethod(iterator,"return");if(void 0===iteratorReturn)return completionThunk();try{var innerResult=this.Call(iteratorReturn,iterator,[])}catch(e){throw completionRecord=completionThunk(),completionThunk=null,e}if(completionRecord=completionThunk(),completionThunk=null,"Object"!==this.Type(innerResult))throw new $TypeError("iterator .return must return an object");return completionRecord},CreateIterResultObject:function CreateIterResultObject(value,done){if("Boolean"!==this.Type(done))throw new $TypeError("Assertion failed: Type(done) is not Boolean");return{value:value,done:done}},RegExpExec:function RegExpExec(R,S){if("Object"!==this.Type(R))throw new $TypeError("R must be an Object");if("String"!==this.Type(S))throw new $TypeError("S must be a String");var exec=this.Get(R,"exec");if(this.IsCallable(exec)){var result=this.Call(exec,R,[S]);if(null===result||"Object"===this.Type(result))return result;throw new $TypeError('"exec" method must return `null` or an Object')}return regexExec(R,S)},ArraySpeciesCreate:function ArraySpeciesCreate(originalArray,length){if(!this.IsInteger(length)||length<0)throw new $TypeError("Assertion failed: length must be an integer >= 0");var C,len=0===length?0:length;if(this.IsArray(originalArray)&&(C=this.Get(originalArray,"constructor"),"Object"===this.Type(C)&&hasSymbols&&$Symbol.species&&null===(C=this.Get(C,$Symbol.species))&&(C=void 0)),void 0===C)return $Array(len);if(!this.IsConstructor(C))throw new $TypeError("C must be a constructor");return new C(len)},CreateDataProperty:function CreateDataProperty(O,P,V){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var oldDesc=$gOPD(O,P),extensible=oldDesc||this.IsExtensible(O);return!(oldDesc&&(!oldDesc.writable||!oldDesc.configurable)||!extensible)&&DefineOwnProperty(this,O,P,{"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":V,"[[Writable]]":!0})},CreateDataPropertyOrThrow:function CreateDataPropertyOrThrow(O,P,V){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var success=this.CreateDataProperty(O,P,V);if(!success)throw new $TypeError("unable to create data property");return success},ObjectCreate:function ObjectCreate(proto,internalSlotsList){if(null!==proto&&"Object"!==this.Type(proto))throw new $TypeError("Assertion failed: proto must be null or an object");var slots=arguments.length<2?[]:internalSlotsList;if(slots.length>0)throw new $SyntaxError("es-abstract does not yet support internal slots");if(null===proto&&!$ObjectCreate)throw new $SyntaxError("native Object.create support is required to create null objects");return $ObjectCreate(proto)},AdvanceStringIndex:function AdvanceStringIndex(S,index,unicode){if("String"!==this.Type(S))throw new $TypeError("S must be a String");if(!this.IsInteger(index)||index<0||index>MAX_SAFE_INTEGER)throw new $TypeError("Assertion failed: length must be an integer >= 0 and <= 2**53");if("Boolean"!==this.Type(unicode))throw new $TypeError("Assertion failed: unicode must be a Boolean");if(!unicode)return index+1;if(index+1>=S.length)return index+1;var first=$charCodeAt(S,index);if(first<55296||first>56319)return index+1;var second=$charCodeAt(S,index+1);return second<56320||second>57343?index+1:index+2},CreateMethodProperty:function CreateMethodProperty(O,P,V){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");return DefineOwnProperty(this,O,P,{"[[Configurable]]":!0,"[[Enumerable]]":!1,"[[Value]]":V,"[[Writable]]":!0})},DefinePropertyOrThrow:function DefinePropertyOrThrow(O,P,desc){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var Desc=isPropertyDescriptor(this,desc)?desc:this.ToPropertyDescriptor(desc);if(!isPropertyDescriptor(this,Desc))throw new $TypeError("Assertion failed: Desc is not a valid Property Descriptor");return DefineOwnProperty(this,O,P,Desc)},DeletePropertyOrThrow:function DeletePropertyOrThrow(O,P){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var success=delete O[P];if(!success)throw new TypeError("Attempt to delete property failed.");return success},EnumerableOwnNames:function EnumerableOwnNames(O){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");return keys(O)},thisNumberValue:function thisNumberValue(value){return"Number"===this.Type(value)?value:$NumberValueOf(value)},thisBooleanValue:function thisBooleanValue(value){return"Boolean"===this.Type(value)?value:$BooleanValueOf(value)},thisStringValue:function thisStringValue(value){return"String"===this.Type(value)?value:$StringValueOf(value)},thisTimeValue:function thisTimeValue(value){return $DateValueOf(value)},SetIntegrityLevel:function SetIntegrityLevel(O,level){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if("sealed"!==level&&"frozen"!==level)throw new $TypeError('Assertion failed: `level` must be `"sealed"` or `"frozen"`');if(!$preventExtensions)throw new $SyntaxError("SetIntegrityLevel requires native `Object.preventExtensions` support");if(!$preventExtensions(O))return!1;if(!$gOPN)throw new $SyntaxError("SetIntegrityLevel requires native `Object.getOwnPropertyNames` support");var theKeys=$gOPN(O),ES=this;return"sealed"===level?forEach(theKeys,(function(k){ES.DefinePropertyOrThrow(O,k,{configurable:!1})})):"frozen"===level&&forEach(theKeys,(function(k){var desc,currentDesc=$gOPD(O,k);void 0!==currentDesc&&(desc=ES.IsAccessorDescriptor(ES.ToPropertyDescriptor(currentDesc))?{configurable:!1}:{configurable:!1,writable:!1},ES.DefinePropertyOrThrow(O,k,desc))})),!0},TestIntegrityLevel:function TestIntegrityLevel(O,level){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if("sealed"!==level&&"frozen"!==level)throw new $TypeError('Assertion failed: `level` must be `"sealed"` or `"frozen"`');if(this.IsExtensible(O))return!1;var theKeys=$gOPN(O),ES=this;return 0===theKeys.length||every(theKeys,(function(k){var currentDesc=$gOPD(O,k);if(void 0!==currentDesc){if(currentDesc.configurable)return!1;if("frozen"===level&&ES.IsDataDescriptor(ES.ToPropertyDescriptor(currentDesc))&&currentDesc.writable)return!1}return!0}))},OrdinaryHasInstance:function OrdinaryHasInstance(C,O){if(!1===this.IsCallable(C))return!1;if("Object"!==this.Type(O))return!1;var P=this.Get(C,"prototype");if("Object"!==this.Type(P))throw new $TypeError("OrdinaryHasInstance called on an object with an invalid prototype property.");return O instanceof C},OrdinaryHasProperty:function OrdinaryHasProperty(O,P){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: P must be a Property Key");return P in O},InstanceofOperator:function InstanceofOperator(O,C){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");var instOfHandler=hasSymbols&&$Symbol.hasInstance?this.GetMethod(C,$Symbol.hasInstance):void 0;if(void 0!==instOfHandler)return this.ToBoolean(this.Call(instOfHandler,C,[O]));if(!this.IsCallable(C))throw new $TypeError("`C` is not Callable");return this.OrdinaryHasInstance(C,O)},IsPromise:function IsPromise(x){if("Object"!==this.Type(x))return!1;if(!$PromiseThen)return!1;try{$PromiseThen(x)}catch(e){return!1}return!0},"Abstract Equality Comparison":function AbstractEqualityComparison(x,y){var xType=this.Type(x),yType=this.Type(y);return xType===yType?x===y:null==x&&null==y||("Number"===xType&&"String"===yType?this["Abstract Equality Comparison"](x,this.ToNumber(y)):"String"===xType&&"Number"===yType?this["Abstract Equality Comparison"](this.ToNumber(x),y):"Boolean"===xType?this["Abstract Equality Comparison"](this.ToNumber(x),y):"Boolean"===yType?this["Abstract Equality Comparison"](x,this.ToNumber(y)):"String"!==xType&&"Number"!==xType&&"Symbol"!==xType||"Object"!==yType?"Object"===xType&&("String"===yType||"Number"===yType||"Symbol"===yType)&&this["Abstract Equality Comparison"](this.ToPrimitive(x),y):this["Abstract Equality Comparison"](x,this.ToPrimitive(y)))},ValidateAndApplyPropertyDescriptor:function ValidateAndApplyPropertyDescriptor(O,P,extensible,Desc,current){var oType=this.Type(O);if("Undefined"!==oType&&"Object"!==oType)throw new $TypeError("Assertion failed: O must be undefined or an Object");if("Boolean"!==this.Type(extensible))throw new $TypeError("Assertion failed: extensible must be a Boolean");if(!isPropertyDescriptor(this,Desc))throw new $TypeError("Assertion failed: Desc must be a Property Descriptor");if("Undefined"!==this.Type(current)&&!isPropertyDescriptor(this,current))throw new $TypeError("Assertion failed: current must be a Property Descriptor, or undefined");if("Undefined"!==oType&&!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: if O is not undefined, P must be a Property Key");if("Undefined"===this.Type(current)){if(!extensible)return!1;if(this.IsGenericDescriptor(Desc)||this.IsDataDescriptor(Desc))"Undefined"!==oType&&DefineOwnProperty(this,O,P,{"[[Configurable]]":Desc["[[Configurable]]"],"[[Enumerable]]":Desc["[[Enumerable]]"],"[[Value]]":Desc["[[Value]]"],"[[Writable]]":Desc["[[Writable]]"]});else{if(!this.IsAccessorDescriptor(Desc))throw new $TypeError("Assertion failed: Desc is not an accessor descriptor");if("Undefined"!==oType)return DefineOwnProperty(this,O,P,Desc)}return!0}if(this.IsGenericDescriptor(Desc)&&!("[[Configurable]]"in Desc)&&!("[[Enumerable]]"in Desc))return!0;if(isSamePropertyDescriptor(this,Desc,current))return!0;if(!current["[[Configurable]]"]){if(Desc["[[Configurable]]"])return!1;if("[[Enumerable]]"in Desc&&!Desc["[[Enumerable]]"]==!!current["[[Enumerable]]"])return!1}if(this.IsGenericDescriptor(Desc));else if(this.IsDataDescriptor(current)!==this.IsDataDescriptor(Desc)){if(!current["[[Configurable]]"])return!1;this.IsDataDescriptor(current)?"Undefined"!==oType&&DefineOwnProperty(this,O,P,{"[[Configurable]]":current["[[Configurable]]"],"[[Enumerable]]":current["[[Enumerable]]"],"[[Get]]":void 0}):"Undefined"!==oType&&DefineOwnProperty(this,O,P,{"[[Configurable]]":current["[[Configurable]]"],"[[Enumerable]]":current["[[Enumerable]]"],"[[Value]]":void 0})}else if(this.IsDataDescriptor(current)&&this.IsDataDescriptor(Desc)){if(!current["[[Configurable]]"]&&!current["[[Writable]]"])return!("[[Writable]]"in Desc&&Desc["[[Writable]]"])&&!("[[Value]]"in Desc&&!this.SameValue(Desc["[[Value]]"],current["[[Value]]"]))}else{if(!this.IsAccessorDescriptor(current)||!this.IsAccessorDescriptor(Desc))throw new $TypeError("Assertion failed: current and Desc are not both data, both accessors, or one accessor and one data.");if(!current["[[Configurable]]"])return!("[[Set]]"in Desc&&!this.SameValue(Desc["[[Set]]"],current["[[Set]]"]))&&!("[[Get]]"in Desc&&!this.SameValue(Desc["[[Get]]"],current["[[Get]]"]))}return"Undefined"===oType||DefineOwnProperty(this,O,P,Desc)},OrdinaryDefineOwnProperty:function OrdinaryDefineOwnProperty(O,P,Desc){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: O must be an Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: P must be a Property Key");if(!isPropertyDescriptor(this,Desc))throw new $TypeError("Assertion failed: Desc must be a Property Descriptor");var desc=$gOPD(O,P),current=desc&&this.ToPropertyDescriptor(desc),extensible=this.IsExtensible(O);return this.ValidateAndApplyPropertyDescriptor(O,P,extensible,Desc,current)},OrdinaryGetOwnProperty:function OrdinaryGetOwnProperty(O,P){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: O must be an Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: P must be a Property Key");if(has(O,P)){if(!$gOPD){var arrayLength=this.IsArray(O)&&"length"===P,regexLastIndex=this.IsRegExp(O)&&"lastIndex"===P;return{"[[Configurable]]":!(arrayLength||regexLastIndex),"[[Enumerable]]":$isEnumerable(O,P),"[[Value]]":O[P],"[[Writable]]":!0}}return this.ToPropertyDescriptor($gOPD(O,P))}},ArrayCreate:function ArrayCreate(length){if(!this.IsInteger(length)||length<0)throw new $TypeError("Assertion failed: `length` must be an integer Number >= 0");if(length>MAX_ARRAY_LENGTH)throw new $RangeError("length is greater than (2**32 - 1)");var proto=arguments.length>1?arguments[1]:$ArrayPrototype,A=[];if(proto!==$ArrayPrototype){if(!$setProto)throw new $SyntaxError("ArrayCreate: a `proto` argument that is not `Array.prototype` is not supported in an environment that does not support setting the [[Prototype]]");$setProto(A,proto)}return 0!==length&&(A.length=length),A},ArraySetLength:function ArraySetLength(A,Desc){if(!this.IsArray(A))throw new $TypeError("Assertion failed: A must be an Array");if(!isPropertyDescriptor(this,Desc))throw new $TypeError("Assertion failed: Desc must be a Property Descriptor");if(!("[[Value]]"in Desc))return this.OrdinaryDefineOwnProperty(A,"length",Desc);var newLenDesc=assign({},Desc),newLen=this.ToUint32(Desc["[[Value]]"]);if(newLen!==this.ToNumber(Desc["[[Value]]"]))throw new $RangeError("Invalid array length");newLenDesc["[[Value]]"]=newLen;var oldLenDesc=this.OrdinaryGetOwnProperty(A,"length");if(!this.IsDataDescriptor(oldLenDesc))throw new $TypeError("Assertion failed: an array had a non-data descriptor on `length`");var newWritable,oldLen=oldLenDesc["[[Value]]"];if(newLen>=oldLen)return this.OrdinaryDefineOwnProperty(A,"length",newLenDesc);if(!oldLenDesc["[[Writable]]"])return!1;if("[[Writable]]"in newLenDesc&&!newLenDesc["[[Writable]]"]?(newWritable=!1,newLenDesc["[[Writable]]"]=!0):newWritable=!0,!this.OrdinaryDefineOwnProperty(A,"length",newLenDesc))return!1;for(;newLen<oldLen;){if(oldLen-=1,!delete A[this.ToString(oldLen)]&&(newLenDesc["[[Value]]"]=oldLen+1,!newWritable))return newLenDesc["[[Writable]]"]=!1,this.OrdinaryDefineOwnProperty(A,"length",newLenDesc),!1}return!!newWritable||this.OrdinaryDefineOwnProperty(A,"length",{"[[Writable]]":!1})},CreateHTML:function CreateHTML(string,tag,attribute,value){if("String"!==this.Type(tag)||"String"!==this.Type(attribute))throw new $TypeError("Assertion failed: `tag` and `attribute` must be strings");var str=this.RequireObjectCoercible(string),S=this.ToString(str),p1="<"+tag;if(""!==attribute){var V=this.ToString(value);p1+=" "+attribute+'="'+$replace(V,/\x22/g,"&quot;")+'"'}return p1+">"+S+"</"+tag+">"},GetOwnPropertyKeys:function GetOwnPropertyKeys(O,Type){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if("Symbol"===Type)return hasSymbols&&$gOPS?$gOPS(O):[];if("String"===Type)return $gOPN?$gOPN(O):keys(O);throw new $TypeError('Assertion failed: `Type` must be `"String"` or `"Symbol"`')},SymbolDescriptiveString:function SymbolDescriptiveString(sym){if("Symbol"!==this.Type(sym))throw new $TypeError("Assertion failed: `sym` must be a Symbol");return $SymbolToString(sym)},GetSubstitution:function GetSubstitution(matched,str,position,captures,replacement){if("String"!==this.Type(matched))throw new $TypeError("Assertion failed: `matched` must be a String");var matchLength=matched.length;if("String"!==this.Type(str))throw new $TypeError("Assertion failed: `str` must be a String");var stringLength=str.length;if(!this.IsInteger(position)||position<0||position>stringLength)throw new $TypeError("Assertion failed: `position` must be a nonnegative integer, and less than or equal to the length of `string`, got "+inspect(position));var ES=this;if(!this.IsArray(captures)||!every(captures,(function(capture,index,arr){return"String"===ES.Type(capture)||!(index in arr)})))throw new $TypeError("Assertion failed: `captures` must be a List of Strings, got "+inspect(captures));if("String"!==this.Type(replacement))throw new $TypeError("Assertion failed: `replacement` must be a String");for(var tailPos=position+matchLength,m=captures.length,result="",i=0;i<replacement.length;i+=1){var current=replacement[i],isLast=i+1>=replacement.length,nextIsLast=i+2>=replacement.length;if("$"!==current||isLast)result+=replacement[i];else{var next=replacement[i+1];if("$"===next)result+="$",i+=1;else if("&"===next)result+=matched,i+=1;else if("`"===next)result+=0===position?"":strSlice(str,0,position-1),i+=1;else if("'"===next)result+=tailPos>=stringLength?"":strSlice(str,tailPos),i+=1;else{var nextNext=nextIsLast?null:replacement[i+2];if(!isDigit(next)||"0"===next||!nextIsLast&&isDigit(nextNext))if(isDigit(next)&&(nextIsLast||isDigit(nextNext))){var nn=next+nextNext,nnI=parseInteger(nn,10)-1;result+=nn<=m&&"Undefined"===this.Type(captures[nnI])?"":captures[nnI],i+=2}else result+="$";else{var n=parseInteger(next,10);result+=n<=m&&"Undefined"===this.Type(captures[n-1])?"":captures[n-1],i+=1}}}}return result},ToDateString:function ToDateString(tv){if("Number"!==this.Type(tv))throw new $TypeError("Assertion failed: `tv` must be a Number");return $isNaN(tv)?"Invalid Date":$Date(tv)},CreateListFromArrayLike:function CreateListFromArrayLike(obj){var elementTypes=arguments.length>1?arguments[1]:["Undefined","Null","Boolean","String","Symbol","Number","Object"];if("Object"!==this.Type(obj))throw new $TypeError("Assertion failed: `obj` must be an Object");if(!this.IsArray(elementTypes))throw new $TypeError("Assertion failed: `elementTypes`, if provided, must be an array");for(var len=this.ToLength(this.Get(obj,"length")),list=[],index=0;index<len;){var indexName=this.ToString(index),next=this.Get(obj,indexName),nextType=this.Type(next);if($indexOf(elementTypes,nextType)<0)throw new $TypeError("item type "+nextType+" is not a valid elementType");$push(list,next),index+=1}return list},GetPrototypeFromConstructor:function GetPrototypeFromConstructor(constructor,intrinsicDefaultProto){var intrinsic=GetIntrinsic(intrinsicDefaultProto);if(!this.IsConstructor(constructor))throw new $TypeError("Assertion failed: `constructor` must be a constructor");var proto=this.Get(constructor,"prototype");if("Object"!==this.Type(proto)){if(!(constructor instanceof $Function))throw new $TypeError("cross-realm constructors not currently supported");proto=intrinsic}return proto},SetFunctionName:function SetFunctionName(F,name){if("function"!=typeof F)throw new $TypeError("Assertion failed: `F` must be a function");if(!this.IsExtensible(F)||has(F,"name"))throw new $TypeError("Assertion failed: `F` must be extensible, and must not have a `name` own property");var nameType=this.Type(name);if("Symbol"!==nameType&&"String"!==nameType)throw new $TypeError("Assertion failed: `name` must be a Symbol or a String");if("Symbol"===nameType){var description=getSymbolDescription(name);name=void 0===description?"":"["+description+"]"}if(arguments.length>2){var prefix=arguments[2];name=prefix+" "+name}return this.DefinePropertyOrThrow(F,"name",{"[[Value]]":name,"[[Writable]]":!1,"[[Enumerable]]":!1,"[[Configurable]]":!0})}});delete ES6.CheckObjectCoercible,module.exports=ES6},function(module,exports,__webpack_require__){"use strict";module.exports=function isPrimitive(value){return null===value||"function"!=typeof value&&"object"!=typeof value}},function(module,exports,__webpack_require__){"use strict";var toStr=Object.prototype.toString;if(__webpack_require__(34)()){var symToStr=Symbol.prototype.toString,symStringRegex=/^Symbol\(.*\)$/;module.exports=function isSymbol(value){if("symbol"==typeof value)return!0;if("[object Symbol]"!==toStr.call(value))return!1;try{return function isRealSymbolObject(value){return"symbol"==typeof value.valueOf()&&symStringRegex.test(symToStr.call(value))}(value)}catch(e){return!1}}}else module.exports=function isSymbol(value){return!1}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(10),$TypeError=GetIntrinsic("%TypeError%"),$SyntaxError=GetIntrinsic("%SyntaxError%"),has=__webpack_require__(43),predicates={"Property Descriptor":function isPropertyDescriptor(ES,Desc){if("Object"!==ES.Type(Desc))return!1;var allowed={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var key in Desc)if(has(Desc,key)&&!allowed[key])return!1;var isData=has(Desc,"[[Value]]"),IsAccessor=has(Desc,"[[Get]]")||has(Desc,"[[Set]]");if(isData&&IsAccessor)throw new $TypeError("Property Descriptors may not be both accessor and data descriptors");return!0}};module.exports=function assertRecord(ES,recordType,argumentName,value){var predicate=predicates[recordType];if("function"!=typeof predicate)throw new $SyntaxError("unknown record type: "+recordType);if(!predicate(ES,value))throw new $TypeError(argumentName+" must be a "+recordType)}},function(module,exports,__webpack_require__){"use strict";var $isNaN=Number.isNaN||function(a){return a!=a};module.exports=Number.isFinite||function(x){return"number"==typeof x&&!$isNaN(x)&&x!==1/0&&x!==-1/0}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(10),$Math=GetIntrinsic("%Math%"),$Number=GetIntrinsic("%Number%");module.exports=$Number.MAX_SAFE_INTEGER||$Math.pow(2,53)-1},function(module,exports,__webpack_require__){"use strict";module.exports=function sign(number){return number>=0?1:-1}},function(module,exports,__webpack_require__){"use strict";module.exports=function mod(number,modulo){var remain=number%modulo;return Math.floor(remain>=0?remain:remain+modulo)}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(10),has=__webpack_require__(43),$TypeError=GetIntrinsic("%TypeError%");module.exports=function IsPropertyDescriptor(ES,Desc){if("Object"!==ES.Type(Desc))return!1;var allowed={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var key in Desc)if(has(Desc,key)&&!allowed[key])return!1;if(ES.IsDataDescriptor(Desc)&&ES.IsAccessorDescriptor(Desc))throw new $TypeError("Property Descriptors may not be both accessor and data descriptors");return!0}},function(module,exports,__webpack_require__){"use strict";var $test=__webpack_require__(10)("RegExp.prototype.test"),callBind=__webpack_require__(86);module.exports=function regexTester(regex){return callBind($test,regex)}},function(module,exports,__webpack_require__){"use strict";var hasSymbols=__webpack_require__(34)(),GetIntrinsic=__webpack_require__(10),callBound=__webpack_require__(44),$iterator=GetIntrinsic("%Symbol.iterator%",!0),$arraySlice=callBound("Array.prototype.slice"),$arrayJoin=callBound("Array.prototype.join");module.exports=function getIteratorMethod(ES,iterable){var usingIterator;return hasSymbols?usingIterator=ES.GetMethod(iterable,$iterator):ES.IsArray(iterable)?usingIterator=function(){var i=-1,arr=this;return{next:function(){return{done:(i+=1)>=arr.length,value:arr[i]}}}}:"String"===ES.Type(iterable)&&(usingIterator=function(){var i=0;return{next:function(){var nextIndex=ES.AdvanceStringIndex(iterable,i,!0),value=$arrayJoin($arraySlice(iterable,i,nextIndex),"");return i=nextIndex,{done:nextIndex>iterable.length,value:value}}}}),usingIterator}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(10),callBound=__webpack_require__(44),$SyntaxError=GetIntrinsic("%SyntaxError%"),symToStr=callBound("Symbol.prototype.toString",!0),getInferredName=__webpack_require__(191);module.exports=function getSymbolDescription(symbol){if(!symToStr)throw new $SyntaxError("Symbols are not supported in this environment");var str=symToStr(symbol);if(getInferredName){var name=getInferredName(symbol);if(""===name)return;return name.slice(1,-1)}var desc=str.slice(7,-1);if(desc)return desc}},function(module,exports,__webpack_require__){"use strict";var getInferredName;try{getInferredName=Function("s","return { [s]() {} }[s].name;")}catch(e){}module.exports=getInferredName&&"inferred"===function(){}.name?getInferredName:null},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(10),originalSetProto=GetIntrinsic("%Object.setPrototypeOf%",!0),$ArrayProto=GetIntrinsic("%Array.prototype%");module.exports=originalSetProto||([].__proto__!==$ArrayProto?null:function(O,proto){return O.__proto__=proto,O})},function(module,exports,__webpack_require__){"use strict";var $strSlice=__webpack_require__(44)("String.prototype.slice");module.exports=function isPrefixOf(prefix,string){return prefix===string||!(prefix.length>string.length)&&$strSlice(string,0,prefix.length)===prefix}},function(module,exports,__webpack_require__){"use strict";var has=__webpack_require__(43),regexExec=RegExp.prototype.exec,gOPD=Object.getOwnPropertyDescriptor,toStr=Object.prototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;module.exports=function isRegex(value){if(!value||"object"!=typeof value)return!1;if(!hasToStringTag)return"[object RegExp]"===toStr.call(value);var descriptor=gOPD(value,"lastIndex");return!(!descriptor||!has(descriptor,"value"))&&function tryRegexExec(value){try{var lastIndex=value.lastIndex;return value.lastIndex=0,regexExec.call(value),!0}catch(e){return!1}finally{value.lastIndex=lastIndex}}(value)}},function(module,exports,__webpack_require__){"use strict";var ES2015=__webpack_require__(179),GetIntrinsic=__webpack_require__(10),assign=__webpack_require__(65),$setProto=__webpack_require__(192),callBound=__webpack_require__(44),getIteratorMethod=__webpack_require__(189),$TypeError=GetIntrinsic("%TypeError%"),$arrayPush=callBound("Array.prototype.push"),$getProto=__webpack_require__(315),ES2016=assign(assign({},ES2015),{SameValueNonNumber:function SameValueNonNumber(x,y){if("number"==typeof x||typeof x!=typeof y)throw new TypeError("SameValueNonNumber requires two non-number values of the same type.");return this.SameValue(x,y)},IterableToArrayLike:function IterableToArrayLike(items){var usingIterator=getIteratorMethod(this,items);if(void 0!==usingIterator){for(var iterator=this.GetIterator(items,usingIterator),values=[],next=!0;next;)if(next=this.IteratorStep(iterator)){var nextValue=this.IteratorValue(next);$arrayPush(values,nextValue)}return values}return this.ToObject(items)},OrdinaryGetPrototypeOf:function(O){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: O must be an Object");if(!$getProto)throw new $TypeError("This environment does not support fetching prototypes.");return $getProto(O)},OrdinarySetPrototypeOf:function(O,V){if("Object"!==this.Type(V)&&"Null"!==this.Type(V))throw new $TypeError("Assertion failed: V must be Object or Null");try{$setProto(O,V)}catch(e){return!1}return this.OrdinaryGetPrototypeOf(O)===V}});module.exports=ES2016},function(module,exports,__webpack_require__){"use strict";var replace=__webpack_require__(23).call(Function.call,String.prototype.replace),leftWhitespace=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;module.exports=function trimLeft(){return replace(this,leftWhitespace,"")}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(196);module.exports=function getPolyfill(){if(!String.prototype.trimLeft)return implementation;return"​"!=="​".trimLeft()?implementation:String.prototype.trimLeft}},function(module,exports,__webpack_require__){"use strict";var replace=__webpack_require__(23).call(Function.call,String.prototype.replace),rightWhitespace=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;module.exports=function trimRight(){return replace(this,rightWhitespace,"")}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(198);module.exports=function getPolyfill(){if(!String.prototype.trimRight)return implementation;return"​"!=="​".trimRight()?implementation:String.prototype.trimRight}},function(module,exports,__webpack_require__){"use strict";var hasSymbols=__webpack_require__(34)(),regexpMatchAll=__webpack_require__(360);module.exports=function getRegExpMatchAllPolyfill(){return hasSymbols&&"symbol"==typeof Symbol.matchAll&&"function"==typeof RegExp.prototype[Symbol.matchAll]?RegExp.prototype[Symbol.matchAll]:regexpMatchAll}},function(module,exports,__webpack_require__){"use strict";var toObject=Object,TypeErr=TypeError;module.exports=function flags(){if(null!=this&&this!==toObject(this))throw new TypeErr("RegExp.prototype.flags getter called on non-object");var result="";return this.global&&(result+="g"),this.ignoreCase&&(result+="i"),this.multiline&&(result+="m"),this.dotAll&&(result+="s"),this.unicode&&(result+="u"),this.sticky&&(result+="y"),result}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(201),supportsDescriptors=__webpack_require__(6).supportsDescriptors,gOPD=Object.getOwnPropertyDescriptor,TypeErr=TypeError;module.exports=function getPolyfill(){if(!supportsDescriptors)throw new TypeErr("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var descriptor=gOPD(RegExp.prototype,"flags");if(descriptor&&"function"==typeof descriptor.get&&"boolean"==typeof/a/.dotAll)return descriptor.get}return implementation}},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(12),fails=__webpack_require__(7),createElement=__webpack_require__(137);module.exports=!DESCRIPTORS&&!fails((function(){return 7!=Object.defineProperty(createElement("div"),"a",{get:function(){return 7}}).a}))},function(module,exports,__webpack_require__){var shared=__webpack_require__(69);module.exports=shared("native-function-to-string",Function.toString)},function(module,exports,__webpack_require__){var global=__webpack_require__(5),nativeFunctionToString=__webpack_require__(204),WeakMap=global.WeakMap;module.exports="function"==typeof WeakMap&&/native code/.test(nativeFunctionToString.call(WeakMap))},function(module,exports,__webpack_require__){var has=__webpack_require__(18),ownKeys=__webpack_require__(376),getOwnPropertyDescriptorModule=__webpack_require__(57),definePropertyModule=__webpack_require__(19);module.exports=function(target,source){for(var keys=ownKeys(source),defineProperty=definePropertyModule.f,getOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,i=0;i<keys.length;i++){var key=keys[i];has(target,key)||defineProperty(target,key,getOwnPropertyDescriptor(source,key))}}},function(module,exports,__webpack_require__){var has=__webpack_require__(18),toIndexedObject=__webpack_require__(37),indexOf=__webpack_require__(140).indexOf,hiddenKeys=__webpack_require__(71);module.exports=function(object,names){var key,O=toIndexedObject(object),i=0,result=[];for(key in O)!has(hiddenKeys,key)&&has(O,key)&&result.push(key);for(;names.length>i;)has(O,key=names[i++])&&(~indexOf(result,key)||result.push(key));return result}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(92),max=Math.max,min=Math.min;module.exports=function(index,length){var integer=toInteger(index);return integer<0?max(integer+length,0):min(integer,length)}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(9),isArray=__webpack_require__(72),SPECIES=__webpack_require__(8)("species");module.exports=function(originalArray,length){var C;return isArray(originalArray)&&("function"!=typeof(C=originalArray.constructor)||C!==Array&&!isArray(C.prototype)?isObject(C)&&null===(C=C[SPECIES])&&(C=void 0):C=void 0),new(void 0===C?Array:C)(0===length?0:length)}},function(module,exports,__webpack_require__){var fails=__webpack_require__(7);module.exports=!!Object.getOwnPropertySymbols&&!fails((function(){return!String(Symbol())}))},function(module,exports,__webpack_require__){var classofRaw=__webpack_require__(38),TO_STRING_TAG=__webpack_require__(8)("toStringTag"),CORRECT_ARGUMENTS="Arguments"==classofRaw(function(){return arguments}());module.exports=function(it){var O,tag,result;return void 0===it?"Undefined":null===it?"Null":"string"==typeof(tag=function(it,key){try{return it[key]}catch(error){}}(O=Object(it),TO_STRING_TAG))?tag:CORRECT_ARGUMENTS?classofRaw(O):"Object"==(result=classofRaw(O))&&"function"==typeof O.callee?"Arguments":result}},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(12),definePropertyModule=__webpack_require__(19),anObject=__webpack_require__(13),objectKeys=__webpack_require__(73);module.exports=DESCRIPTORS?Object.defineProperties:function defineProperties(O,Properties){anObject(O);for(var key,keys=objectKeys(Properties),length=keys.length,index=0;length>index;)definePropertyModule.f(O,key=keys[index++],Properties[key]);return O}},function(module,exports,__webpack_require__){var getBuiltIn=__webpack_require__(58);module.exports=getBuiltIn("document","documentElement")},function(module,exports,__webpack_require__){exports.f=__webpack_require__(8)},function(module,exports,__webpack_require__){"use strict";var $forEach=__webpack_require__(48).forEach,sloppyArrayMethod=__webpack_require__(75);module.exports=sloppyArrayMethod("forEach")?function forEach(callbackfn){return $forEach(this,callbackfn,arguments.length>1?arguments[1]:void 0)}:[].forEach},function(module,exports,__webpack_require__){"use strict";var IteratorPrototype,PrototypeOfArrayIteratorPrototype,arrayIterator,getPrototypeOf=__webpack_require__(148),createNonEnumerableProperty=__webpack_require__(29),has=__webpack_require__(18),wellKnownSymbol=__webpack_require__(8),IS_PURE=__webpack_require__(70),ITERATOR=wellKnownSymbol("iterator"),BUGGY_SAFARI_ITERATORS=!1;[].keys&&("next"in(arrayIterator=[].keys())?(PrototypeOfArrayIteratorPrototype=getPrototypeOf(getPrototypeOf(arrayIterator)))!==Object.prototype&&(IteratorPrototype=PrototypeOfArrayIteratorPrototype):BUGGY_SAFARI_ITERATORS=!0),null==IteratorPrototype&&(IteratorPrototype={}),IS_PURE||has(IteratorPrototype,ITERATOR)||createNonEnumerableProperty(IteratorPrototype,ITERATOR,(function(){return this})),module.exports={IteratorPrototype:IteratorPrototype,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS}},function(module,exports,__webpack_require__){var fails=__webpack_require__(7);module.exports=!fails((function(){function F(){}return F.prototype.constructor=null,Object.getPrototypeOf(new F)!==F.prototype}))},function(module,exports){module.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(13);module.exports=function(iterator,fn,value,ENTRIES){try{return ENTRIES?fn(anObject(value)[0],value[1]):fn(value)}catch(error){var returnMethod=iterator.return;throw void 0!==returnMethod&&anObject(returnMethod.call(iterator)),error}}},function(module,exports,__webpack_require__){var wellKnownSymbol=__webpack_require__(8),Iterators=__webpack_require__(76),ITERATOR=wellKnownSymbol("iterator"),ArrayPrototype=Array.prototype;module.exports=function(it){return void 0!==it&&(Iterators.Array===it||ArrayPrototype[ITERATOR]===it)}},function(module,exports,__webpack_require__){var classof=__webpack_require__(211),Iterators=__webpack_require__(76),ITERATOR=__webpack_require__(8)("iterator");module.exports=function(it){if(null!=it)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(12),objectKeys=__webpack_require__(73),toIndexedObject=__webpack_require__(37),propertyIsEnumerable=__webpack_require__(87).f,createMethod=function(TO_ENTRIES){return function(it){for(var key,O=toIndexedObject(it),keys=objectKeys(O),length=keys.length,i=0,result=[];length>i;)key=keys[i++],DESCRIPTORS&&!propertyIsEnumerable.call(O,key)||result.push(TO_ENTRIES?[key,O[key]]:O[key]);return result}};module.exports={entries:createMethod(!0),values:createMethod(!1)}},function(module,exports,__webpack_require__){"use strict";var anObject=__webpack_require__(13);module.exports=function(){var that=anObject(this),result="";return that.global&&(result+="g"),that.ignoreCase&&(result+="i"),that.multiline&&(result+="m"),that.dotAll&&(result+="s"),that.unicode&&(result+="u"),that.sticky&&(result+="y"),result}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(92),requireObjectCoercible=__webpack_require__(35),createMethod=function(CONVERT_TO_STRING){return function($this,pos){var first,second,S=String(requireObjectCoercible($this)),position=toInteger(pos),size=S.length;return position<0||position>=size?CONVERT_TO_STRING?"":void 0:(first=S.charCodeAt(position))<55296||first>56319||position+1===size||(second=S.charCodeAt(position+1))<56320||second>57343?CONVERT_TO_STRING?S.charAt(position):first:CONVERT_TO_STRING?S.slice(position,position+2):second-56320+(first-55296<<10)+65536}};module.exports={codeAt:createMethod(!1),charAt:createMethod(!0)}},function(module,exports,__webpack_require__){"use strict";var getBuiltIn=__webpack_require__(58),definePropertyModule=__webpack_require__(19),wellKnownSymbol=__webpack_require__(8),DESCRIPTORS=__webpack_require__(12),SPECIES=wellKnownSymbol("species");module.exports=function(CONSTRUCTOR_NAME){var Constructor=getBuiltIn(CONSTRUCTOR_NAME),defineProperty=definePropertyModule.f;DESCRIPTORS&&Constructor&&!Constructor[SPECIES]&&defineProperty(Constructor,SPECIES,{configurable:!0,get:function(){return this}})}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(13),aFunction=__webpack_require__(49),SPECIES=__webpack_require__(8)("species");module.exports=function(O,defaultConstructor){var S,C=anObject(O).constructor;return void 0===C||null==(S=anObject(C)[SPECIES])?defaultConstructor:aFunction(S)}},function(module,exports,__webpack_require__){"use strict";var aFunction=__webpack_require__(49),PromiseCapability=function(C){var resolve,reject;this.promise=new C((function($$resolve,$$reject){if(void 0!==resolve||void 0!==reject)throw TypeError("Bad Promise constructor");resolve=$$resolve,reject=$$reject})),this.resolve=aFunction(resolve),this.reject=aFunction(reject)};module.exports.f=function(C){return new PromiseCapability(C)}},function(module,exports,__webpack_require__){"use strict";var types;__webpack_require__(96),__webpack_require__(2),__webpack_require__(154),Object.defineProperty(exports,"__esModule",{value:!0}),exports.isSupportedType=function isSupportedType(type){return!!Object.values(types).find((function(typeVal){return typeVal===type}))},exports.types=void 0,exports.types=types,function(types){types.TAB="tab",types.PANEL="panel",types.TOOL="tool",types.PREVIEW="preview",types.NOTES_ELEMENT="notes-element"}(types||(exports.types=types={}))},function(module,exports,__webpack_require__){"use strict";(function(setImmediate){function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}__webpack_require__(20),__webpack_require__(24),__webpack_require__(25),__webpack_require__(103),__webpack_require__(14),__webpack_require__(60),__webpack_require__(39),__webpack_require__(17),__webpack_require__(230),__webpack_require__(61),__webpack_require__(2),__webpack_require__(26),__webpack_require__(16),__webpack_require__(62),__webpack_require__(27),__webpack_require__(15),__webpack_require__(21),__webpack_require__(421),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Channel=void 0;var generateRandomId=function generateRandomId(){return Math.random().toString(16).slice(2)},Channel=function(){function Channel(){var _this=this,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},transport=_ref.transport,_ref$async=_ref.async,async=void 0!==_ref$async&&_ref$async;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Channel),this.isAsync=void 0,this.sender=generateRandomId(),this.events={},this.transport=void 0,this.isAsync=async,transport&&(this.transport=transport,this.transport.setHandler((function(event){return _this.handleEvent(event)})))}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Channel,[{key:"addListener",value:function addListener(eventName,listener){this.events[eventName]=this.events[eventName]||[],this.events[eventName].push(listener)}},{key:"addPeerListener",value:function addPeerListener(eventName,listener){var peerListener=listener;peerListener.ignorePeer=!0,this.addListener(eventName,peerListener)}},{key:"emit",value:function emit(eventName){for(var _this2=this,_len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var event={type:eventName,args:args,from:this.sender},options={};args.length>=1&&args[0]&&args[0].options&&(options=args[0].options);var handler=function handler(){_this2.transport&&_this2.transport.send(event,options),_this2.handleEvent(event,!0)};this.isAsync?setImmediate(handler):handler()}},{key:"eventNames",value:function eventNames(){return Object.keys(this.events)}},{key:"listenerCount",value:function listenerCount(eventName){var listeners=this.listeners(eventName);return listeners?listeners.length:0}},{key:"listeners",value:function listeners(eventName){var listeners=this.events[eventName];return listeners||void 0}},{key:"once",value:function once(eventName,listener){var onceListener=this.onceListener(eventName,listener);this.addListener(eventName,onceListener)}},{key:"removeAllListeners",value:function removeAllListeners(eventName){eventName?this.events[eventName]&&delete this.events[eventName]:this.events={}}},{key:"removeListener",value:function removeListener(eventName,listener){var listeners=this.listeners(eventName);listeners&&(this.events[eventName]=listeners.filter((function(l){return l!==listener})))}},{key:"on",value:function on(eventName,listener){this.addListener(eventName,listener)}},{key:"handleEvent",value:function handleEvent(event){var isPeer=arguments.length>1&&void 0!==arguments[1]&&arguments[1],listeners=this.listeners(event.type);listeners&&(isPeer||event.from!==this.sender)&&listeners.forEach((function(fn){return!(isPeer&&fn.ignorePeer)&&fn.apply(void 0,_toConsumableArray(event.args))}))}},{key:"onceListener",value:function onceListener(eventName,listener){var _this3=this,onceListener=function onceListener(){return _this3.removeListener(eventName,onceListener),listener.apply(void 0,arguments)};return onceListener}},{key:"hasTransport",get:function get(){return!!this.transport}}]),Channel}();exports.Channel=Channel;var _default=Channel;exports.default=_default}).call(this,__webpack_require__(419).setImmediate)},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(3),isObject=__webpack_require__(9),isArray=__webpack_require__(72),toAbsoluteIndex=__webpack_require__(208),toLength=__webpack_require__(31),toIndexedObject=__webpack_require__(37),createProperty=__webpack_require__(143),arrayMethodHasSpeciesSupport=__webpack_require__(94),SPECIES=__webpack_require__(8)("species"),nativeSlice=[].slice,max=Math.max;$({target:"Array",proto:!0,forced:!arrayMethodHasSpeciesSupport("slice")},{slice:function slice(start,end){var Constructor,result,n,O=toIndexedObject(this),length=toLength(O.length),k=toAbsoluteIndex(start,length),fin=toAbsoluteIndex(void 0===end?length:end,length);if(isArray(O)&&("function"!=typeof(Constructor=O.constructor)||Constructor!==Array&&!isArray(Constructor.prototype)?isObject(Constructor)&&null===(Constructor=Constructor[SPECIES])&&(Constructor=void 0):Constructor=void 0,Constructor===Array||void 0===Constructor))return nativeSlice.call(O,k,fin);for(result=new(void 0===Constructor?Array:Constructor)(max(fin-k,0)),n=0;k<fin;k++,n++)k in O&&createProperty(result,n,O[k]);return result.length=n,result}})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(3),$includes=__webpack_require__(140).includes,addToUnscopables=__webpack_require__(146);$({target:"Array",proto:!0},{includes:function includes(el){return $includes(this,el,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables("includes")},function(module,exports,__webpack_require__){"use strict";var collection=__webpack_require__(156),collectionStrong=__webpack_require__(235);module.exports=collection("Set",(function(get){return function Set(){return get(this,arguments.length?arguments[0]:void 0)}}),collectionStrong)},function(module,exports,__webpack_require__){var fails=__webpack_require__(7);module.exports=!fails((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(module,exports,__webpack_require__){var isObject=__webpack_require__(9),setPrototypeOf=__webpack_require__(149);module.exports=function($this,dummy,Wrapper){var NewTarget,NewTargetPrototype;return setPrototypeOf&&"function"==typeof(NewTarget=dummy.constructor)&&NewTarget!==Wrapper&&isObject(NewTargetPrototype=NewTarget.prototype)&&NewTargetPrototype!==Wrapper.prototype&&setPrototypeOf($this,NewTargetPrototype),$this}},function(module,exports,__webpack_require__){"use strict";var defineProperty=__webpack_require__(19).f,create=__webpack_require__(59),redefineAll=__webpack_require__(99),bind=__webpack_require__(74),anInstance=__webpack_require__(100),iterate=__webpack_require__(101),defineIterator=__webpack_require__(147),setSpecies=__webpack_require__(225),DESCRIPTORS=__webpack_require__(12),fastKey=__webpack_require__(81).fastKey,InternalStateModule=__webpack_require__(45),setInternalState=InternalStateModule.set,internalStateGetterFor=InternalStateModule.getterFor;module.exports={getConstructor:function(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER){var C=wrapper((function(that,iterable){anInstance(that,C,CONSTRUCTOR_NAME),setInternalState(that,{type:CONSTRUCTOR_NAME,index:create(null),first:void 0,last:void 0,size:0}),DESCRIPTORS||(that.size=0),null!=iterable&&iterate(iterable,that[ADDER],that,IS_MAP)})),getInternalState=internalStateGetterFor(CONSTRUCTOR_NAME),define=function(that,key,value){var previous,index,state=getInternalState(that),entry=getEntry(that,key);return entry?entry.value=value:(state.last=entry={index:index=fastKey(key,!0),key:key,value:value,previous:previous=state.last,next:void 0,removed:!1},state.first||(state.first=entry),previous&&(previous.next=entry),DESCRIPTORS?state.size++:that.size++,"F"!==index&&(state.index[index]=entry)),that},getEntry=function(that,key){var entry,state=getInternalState(that),index=fastKey(key);if("F"!==index)return state.index[index];for(entry=state.first;entry;entry=entry.next)if(entry.key==key)return entry};return redefineAll(C.prototype,{clear:function clear(){for(var state=getInternalState(this),data=state.index,entry=state.first;entry;)entry.removed=!0,entry.previous&&(entry.previous=entry.previous.next=void 0),delete data[entry.index],entry=entry.next;state.first=state.last=void 0,DESCRIPTORS?state.size=0:this.size=0},delete:function(key){var state=getInternalState(this),entry=getEntry(this,key);if(entry){var next=entry.next,prev=entry.previous;delete state.index[entry.index],entry.removed=!0,prev&&(prev.next=next),next&&(next.previous=prev),state.first==entry&&(state.first=next),state.last==entry&&(state.last=prev),DESCRIPTORS?state.size--:this.size--}return!!entry},forEach:function forEach(callbackfn){for(var entry,state=getInternalState(this),boundFunction=bind(callbackfn,arguments.length>1?arguments[1]:void 0,3);entry=entry?entry.next:state.first;)for(boundFunction(entry.value,entry.key,this);entry&&entry.removed;)entry=entry.previous},has:function has(key){return!!getEntry(this,key)}}),redefineAll(C.prototype,IS_MAP?{get:function get(key){var entry=getEntry(this,key);return entry&&entry.value},set:function set(key,value){return define(this,0===key?0:key,value)}}:{add:function add(value){return define(this,value=0===value?0:value,value)}}),DESCRIPTORS&&defineProperty(C.prototype,"size",{get:function(){return getInternalState(this).size}}),C},setStrong:function(C,CONSTRUCTOR_NAME,IS_MAP){var ITERATOR_NAME=CONSTRUCTOR_NAME+" Iterator",getInternalCollectionState=internalStateGetterFor(CONSTRUCTOR_NAME),getInternalIteratorState=internalStateGetterFor(ITERATOR_NAME);defineIterator(C,CONSTRUCTOR_NAME,(function(iterated,kind){setInternalState(this,{type:ITERATOR_NAME,target:iterated,state:getInternalCollectionState(iterated),kind:kind,last:void 0})}),(function(){for(var state=getInternalIteratorState(this),kind=state.kind,entry=state.last;entry&&entry.removed;)entry=entry.previous;return state.target&&(state.last=entry=entry?entry.next:state.state.first)?"keys"==kind?{value:entry.key,done:!1}:"values"==kind?{value:entry.value,done:!1}:{value:[entry.key,entry.value],done:!1}:(state.target=void 0,{value:void 0,done:!0})}),IS_MAP?"entries":"values",!IS_MAP,!0),setSpecies(CONSTRUCTOR_NAME)}}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(3),notARegExp=__webpack_require__(237),requireObjectCoercible=__webpack_require__(35);$({target:"String",proto:!0,forced:!__webpack_require__(239)("includes")},{includes:function includes(searchString){return!!~String(requireObjectCoercible(this)).indexOf(notARegExp(searchString),arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){var isRegExp=__webpack_require__(238);module.exports=function(it){if(isRegExp(it))throw TypeError("The method doesn't accept regular expressions");return it}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(9),classof=__webpack_require__(38),MATCH=__webpack_require__(8)("match");module.exports=function(it){var isRegExp;return isObject(it)&&(void 0!==(isRegExp=it[MATCH])?!!isRegExp:"RegExp"==classof(it))}},function(module,exports,__webpack_require__){var MATCH=__webpack_require__(8)("match");module.exports=function(METHOD_NAME){var regexp=/./;try{"/./"[METHOD_NAME](regexp)}catch(e){try{return regexp[MATCH]=!1,"/./"[METHOD_NAME](regexp)}catch(f){}}return!1}},function(module,exports,__webpack_require__){"use strict";var fixRegExpWellKnownSymbolLogic=__webpack_require__(107),anObject=__webpack_require__(13),toObject=__webpack_require__(32),toLength=__webpack_require__(31),toInteger=__webpack_require__(92),requireObjectCoercible=__webpack_require__(35),advanceStringIndex=__webpack_require__(157),regExpExec=__webpack_require__(108),max=Math.max,min=Math.min,floor=Math.floor,SUBSTITUTION_SYMBOLS=/\$([$&'`]|\d\d?|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&'`]|\d\d?)/g;fixRegExpWellKnownSymbolLogic("replace",2,(function(REPLACE,nativeReplace,maybeCallNative){return[function replace(searchValue,replaceValue){var O=requireObjectCoercible(this),replacer=null==searchValue?void 0:searchValue[REPLACE];return void 0!==replacer?replacer.call(searchValue,O,replaceValue):nativeReplace.call(String(O),searchValue,replaceValue)},function(regexp,replaceValue){var res=maybeCallNative(nativeReplace,regexp,this,replaceValue);if(res.done)return res.value;var rx=anObject(regexp),S=String(this),functionalReplace="function"==typeof replaceValue;functionalReplace||(replaceValue=String(replaceValue));var global=rx.global;if(global){var fullUnicode=rx.unicode;rx.lastIndex=0}for(var results=[];;){var result=regExpExec(rx,S);if(null===result)break;if(results.push(result),!global)break;""===String(result[0])&&(rx.lastIndex=advanceStringIndex(S,toLength(rx.lastIndex),fullUnicode))}for(var it,accumulatedResult="",nextSourcePosition=0,i=0;i<results.length;i++){result=results[i];for(var matched=String(result[0]),position=max(min(toInteger(result.index),S.length),0),captures=[],j=1;j<result.length;j++)captures.push(void 0===(it=result[j])?it:String(it));var namedCaptures=result.groups;if(functionalReplace){var replacerArgs=[matched].concat(captures,position,S);void 0!==namedCaptures&&replacerArgs.push(namedCaptures);var replacement=String(replaceValue.apply(void 0,replacerArgs))}else replacement=getSubstitution(matched,S,position,captures,namedCaptures,replaceValue);position>=nextSourcePosition&&(accumulatedResult+=S.slice(nextSourcePosition,position)+replacement,nextSourcePosition=position+matched.length)}return accumulatedResult+S.slice(nextSourcePosition)}];function getSubstitution(matched,str,position,captures,namedCaptures,replacement){var tailPos=position+matched.length,m=captures.length,symbols=SUBSTITUTION_SYMBOLS_NO_NAMED;return void 0!==namedCaptures&&(namedCaptures=toObject(namedCaptures),symbols=SUBSTITUTION_SYMBOLS),nativeReplace.call(replacement,symbols,(function(match,ch){var capture;switch(ch.charAt(0)){case"$":return"$";case"&":return matched;case"`":return str.slice(0,position);case"'":return str.slice(tailPos);case"<":capture=namedCaptures[ch.slice(1,-1)];break;default:var n=+ch;if(0===n)return match;if(n>m){var f=floor(n/10);return 0===f?match:f<=m?void 0===captures[f-1]?ch.charAt(1):captures[f-1]+ch.charAt(1):match}capture=captures[n-1]}return void 0===capture?"":capture}))}}))},function(module,exports,__webpack_require__){"use strict";var replace=String.prototype.replace,percentTwenties=/%20/g,util=__webpack_require__(160),Format={RFC1738:"RFC1738",RFC3986:"RFC3986"};module.exports=util.assign({default:Format.RFC3986,formatters:{RFC1738:function(value){return replace.call(value,percentTwenties,"+")},RFC3986:function(value){return String(value)}}},Format)},function(module,exports,__webpack_require__){(function(global){var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(this,__webpack_require__(22))},function(module,exports){var reHasUnicode=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");module.exports=function hasUnicode(string){return reHasUnicode.test(string)}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(112),stackClear=__webpack_require__(461),stackDelete=__webpack_require__(462),stackGet=__webpack_require__(463),stackHas=__webpack_require__(464),stackSet=__webpack_require__(465);function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet,module.exports=Stack},function(module,exports){var funcToString=Function.prototype.toString;module.exports=function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}},function(module,exports,__webpack_require__){var baseAssignValue=__webpack_require__(165),eq=__webpack_require__(84);module.exports=function assignMergeValue(object,key,value){(void 0===value||eq(object[key],value))&&(void 0!==value||key in object)||baseAssignValue(object,key,value)}},function(module,exports,__webpack_require__){var getNative=__webpack_require__(53),defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}();module.exports=defineProperty},function(module,exports,__webpack_require__){var Uint8Array=__webpack_require__(33).Uint8Array;module.exports=Uint8Array},function(module,exports,__webpack_require__){var getPrototype=__webpack_require__(250)(Object.getPrototypeOf,Object);module.exports=getPrototype},function(module,exports){module.exports=function overArg(func,transform){return function(arg){return func(transform(arg))}}},function(module,exports,__webpack_require__){var baseIsArguments=__webpack_require__(491),isObjectLike=__webpack_require__(52),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,propertyIsEnumerable=objectProto.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};module.exports=isArguments},function(module,exports){var MAX_SAFE_INTEGER=9007199254740991;module.exports=function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}},function(module,exports){module.exports=function safeGet(object,key){if(("constructor"!==key||"function"!=typeof object[key])&&"__proto__"!=key)return object[key]}},function(module,exports,__webpack_require__){var arrayLikeKeys=__webpack_require__(255),baseKeysIn=__webpack_require__(502),isArrayLike=__webpack_require__(116);module.exports=function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}},function(module,exports,__webpack_require__){var baseTimes=__webpack_require__(501),isArguments=__webpack_require__(251),isArray=__webpack_require__(51),isBuffer=__webpack_require__(167),isIndex=__webpack_require__(256),isTypedArray=__webpack_require__(168),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}},function(module,exports){var MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;module.exports=function isIndex(value,length){var type=typeof value;return!!(length=null==length?MAX_SAFE_INTEGER:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}},function(module,exports){module.exports=function identity(value){return value}},function(module,exports,__webpack_require__){var SetCache=__webpack_require__(516),arraySome=__webpack_require__(519),cacheHas=__webpack_require__(520),COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;module.exports=function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,(function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex)}))){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}},function(module,exports,__webpack_require__){var baseGet=__webpack_require__(539);module.exports=function get(object,path,defaultValue){var result=null==object?void 0:baseGet(object,path);return void 0===result?defaultValue:result}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(14),__webpack_require__(17),__webpack_require__(261),__webpack_require__(2),__webpack_require__(16),__webpack_require__(27),__webpack_require__(15),__webpack_require__(21),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.createSubscriptionsStore=void 0;var createSubscriptionsStore=function createSubscriptionsStore(){var subscriptions=new Map;return{register:function register(subscribe){var subscription=subscriptions.get(subscribe);subscription||(subscription={unsubscribe:subscribe()},subscriptions.set(subscribe,subscription)),subscription.used=!0},markAllAsUnused:function markAllAsUnused(){subscriptions.forEach((function(subscription){subscription.used=!1}))},clearUnused:function clearUnused(){subscriptions.forEach((function(subscription,key){subscription.used||(subscription.unsubscribe(),subscriptions.delete(key))}))}}};exports.createSubscriptionsStore=createSubscriptionsStore;var _default=createSubscriptionsStore();exports.default=_default},function(module,exports,__webpack_require__){"use strict";var collection=__webpack_require__(156),collectionStrong=__webpack_require__(235);module.exports=collection("Map",(function(get){return function Map(){return get(this,arguments.length?arguments[0]:void 0)}}),collectionStrong,!0)},function(module,exports,__webpack_require__){var $=__webpack_require__(3),global=__webpack_require__(5),userAgent=__webpack_require__(95),slice=[].slice,wrap=function(scheduler){return function(handler,timeout){var boundArgs=arguments.length>2,args=boundArgs?slice.call(arguments,2):void 0;return scheduler(boundArgs?function(){("function"==typeof handler?handler:Function(handler)).apply(this,args)}:handler,timeout)}};$({global:!0,bind:!0,forced:/MSIE .\./.test(userAgent)},{setTimeout:wrap(global.setTimeout),setInterval:wrap(global.setInterval)})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(3),$indexOf=__webpack_require__(140).indexOf,sloppyArrayMethod=__webpack_require__(75),nativeIndexOf=[].indexOf,NEGATIVE_ZERO=!!nativeIndexOf&&1/[1].indexOf(1,-0)<0,SLOPPY_METHOD=sloppyArrayMethod("indexOf");$({target:"Array",proto:!0,forced:NEGATIVE_ZERO||SLOPPY_METHOD},{indexOf:function indexOf(searchElement){return NEGATIVE_ZERO?nativeIndexOf.apply(this,arguments)||0:$indexOf(this,searchElement,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(val){if(null==val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}module.exports=function shouldUseNative(){try{if(!Object.assign)return!1;var test1=new String("abc");if(test1[5]="de","5"===Object.getOwnPropertyNames(test1)[0])return!1;for(var test2={},i=0;i<10;i++)test2["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(test2).map((function(n){return test2[n]})).join(""))return!1;var test3={};return"abcdefghijklmnopqrst".split("").forEach((function(letter){test3[letter]=letter})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},test3)).join("")}catch(err){return!1}}()?Object.assign:function(target,source){for(var from,symbols,to=toObject(target),s=1;s<arguments.length;s++){for(var key in from=Object(arguments[s]))hasOwnProperty.call(from,key)&&(to[key]=from[key]);if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}}return to}},function(module,exports,__webpack_require__){"use strict";!function checkDCE(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(err){console.error(err)}}}(),module.exports=__webpack_require__(559)},function(module){module.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')},function(module){module.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Abreve":"Ă","abreve":"ă","ac":"∾","acd":"∿","acE":"∾̳","Acirc":"Â","acirc":"â","acute":"´","Acy":"А","acy":"а","AElig":"Æ","aelig":"æ","af":"⁡","Afr":"𝔄","afr":"𝔞","Agrave":"À","agrave":"à","alefsym":"ℵ","aleph":"ℵ","Alpha":"Α","alpha":"α","Amacr":"Ā","amacr":"ā","amalg":"⨿","amp":"&","AMP":"&","andand":"⩕","And":"⩓","and":"∧","andd":"⩜","andslope":"⩘","andv":"⩚","ang":"∠","ange":"⦤","angle":"∠","angmsdaa":"⦨","angmsdab":"⦩","angmsdac":"⦪","angmsdad":"⦫","angmsdae":"⦬","angmsdaf":"⦭","angmsdag":"⦮","angmsdah":"⦯","angmsd":"∡","angrt":"∟","angrtvb":"⊾","angrtvbd":"⦝","angsph":"∢","angst":"Å","angzarr":"⍼","Aogon":"Ą","aogon":"ą","Aopf":"𝔸","aopf":"𝕒","apacir":"⩯","ap":"≈","apE":"⩰","ape":"≊","apid":"≋","apos":"\'","ApplyFunction":"⁡","approx":"≈","approxeq":"≊","Aring":"Å","aring":"å","Ascr":"𝒜","ascr":"𝒶","Assign":"≔","ast":"*","asymp":"≈","asympeq":"≍","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","awconint":"∳","awint":"⨑","backcong":"≌","backepsilon":"϶","backprime":"‵","backsim":"∽","backsimeq":"⋍","Backslash":"∖","Barv":"⫧","barvee":"⊽","barwed":"⌅","Barwed":"⌆","barwedge":"⌅","bbrk":"⎵","bbrktbrk":"⎶","bcong":"≌","Bcy":"Б","bcy":"б","bdquo":"„","becaus":"∵","because":"∵","Because":"∵","bemptyv":"⦰","bepsi":"϶","bernou":"ℬ","Bernoullis":"ℬ","Beta":"Β","beta":"β","beth":"ℶ","between":"≬","Bfr":"𝔅","bfr":"𝔟","bigcap":"⋂","bigcirc":"◯","bigcup":"⋃","bigodot":"⨀","bigoplus":"⨁","bigotimes":"⨂","bigsqcup":"⨆","bigstar":"★","bigtriangledown":"▽","bigtriangleup":"△","biguplus":"⨄","bigvee":"⋁","bigwedge":"⋀","bkarow":"⤍","blacklozenge":"⧫","blacksquare":"▪","blacktriangle":"▴","blacktriangledown":"▾","blacktriangleleft":"◂","blacktriangleright":"▸","blank":"␣","blk12":"▒","blk14":"░","blk34":"▓","block":"█","bne":"=⃥","bnequiv":"≡⃥","bNot":"⫭","bnot":"⌐","Bopf":"𝔹","bopf":"𝕓","bot":"⊥","bottom":"⊥","bowtie":"⋈","boxbox":"⧉","boxdl":"┐","boxdL":"╕","boxDl":"╖","boxDL":"╗","boxdr":"┌","boxdR":"╒","boxDr":"╓","boxDR":"╔","boxh":"─","boxH":"═","boxhd":"┬","boxHd":"╤","boxhD":"╥","boxHD":"╦","boxhu":"┴","boxHu":"╧","boxhU":"╨","boxHU":"╩","boxminus":"⊟","boxplus":"⊞","boxtimes":"⊠","boxul":"┘","boxuL":"╛","boxUl":"╜","boxUL":"╝","boxur":"└","boxuR":"╘","boxUr":"╙","boxUR":"╚","boxv":"│","boxV":"║","boxvh":"┼","boxvH":"╪","boxVh":"╫","boxVH":"╬","boxvl":"┤","boxvL":"╡","boxVl":"╢","boxVL":"╣","boxvr":"├","boxvR":"╞","boxVr":"╟","boxVR":"╠","bprime":"‵","breve":"˘","Breve":"˘","brvbar":"¦","bscr":"𝒷","Bscr":"ℬ","bsemi":"⁏","bsim":"∽","bsime":"⋍","bsolb":"⧅","bsol":"\\\\","bsolhsub":"⟈","bull":"•","bullet":"•","bump":"≎","bumpE":"⪮","bumpe":"≏","Bumpeq":"≎","bumpeq":"≏","Cacute":"Ć","cacute":"ć","capand":"⩄","capbrcup":"⩉","capcap":"⩋","cap":"∩","Cap":"⋒","capcup":"⩇","capdot":"⩀","CapitalDifferentialD":"ⅅ","caps":"∩︀","caret":"⁁","caron":"ˇ","Cayleys":"ℭ","ccaps":"⩍","Ccaron":"Č","ccaron":"č","Ccedil":"Ç","ccedil":"ç","Ccirc":"Ĉ","ccirc":"ĉ","Cconint":"∰","ccups":"⩌","ccupssm":"⩐","Cdot":"Ċ","cdot":"ċ","cedil":"¸","Cedilla":"¸","cemptyv":"⦲","cent":"¢","centerdot":"·","CenterDot":"·","cfr":"𝔠","Cfr":"ℭ","CHcy":"Ч","chcy":"ч","check":"✓","checkmark":"✓","Chi":"Χ","chi":"χ","circ":"ˆ","circeq":"≗","circlearrowleft":"↺","circlearrowright":"↻","circledast":"⊛","circledcirc":"⊚","circleddash":"⊝","CircleDot":"⊙","circledR":"®","circledS":"Ⓢ","CircleMinus":"⊖","CirclePlus":"⊕","CircleTimes":"⊗","cir":"○","cirE":"⧃","cire":"≗","cirfnint":"⨐","cirmid":"⫯","cirscir":"⧂","ClockwiseContourIntegral":"∲","CloseCurlyDoubleQuote":"”","CloseCurlyQuote":"’","clubs":"♣","clubsuit":"♣","colon":":","Colon":"∷","Colone":"⩴","colone":"≔","coloneq":"≔","comma":",","commat":"@","comp":"∁","compfn":"∘","complement":"∁","complexes":"ℂ","cong":"≅","congdot":"⩭","Congruent":"≡","conint":"∮","Conint":"∯","ContourIntegral":"∮","copf":"𝕔","Copf":"ℂ","coprod":"∐","Coproduct":"∐","copy":"©","COPY":"©","copysr":"℗","CounterClockwiseContourIntegral":"∳","crarr":"↵","cross":"✗","Cross":"⨯","Cscr":"𝒞","cscr":"𝒸","csub":"⫏","csube":"⫑","csup":"⫐","csupe":"⫒","ctdot":"⋯","cudarrl":"⤸","cudarrr":"⤵","cuepr":"⋞","cuesc":"⋟","cularr":"↶","cularrp":"⤽","cupbrcap":"⩈","cupcap":"⩆","CupCap":"≍","cup":"∪","Cup":"⋓","cupcup":"⩊","cupdot":"⊍","cupor":"⩅","cups":"∪︀","curarr":"↷","curarrm":"⤼","curlyeqprec":"⋞","curlyeqsucc":"⋟","curlyvee":"⋎","curlywedge":"⋏","curren":"¤","curvearrowleft":"↶","curvearrowright":"↷","cuvee":"⋎","cuwed":"⋏","cwconint":"∲","cwint":"∱","cylcty":"⌭","dagger":"†","Dagger":"‡","daleth":"ℸ","darr":"↓","Darr":"↡","dArr":"⇓","dash":"‐","Dashv":"⫤","dashv":"⊣","dbkarow":"⤏","dblac":"˝","Dcaron":"Ď","dcaron":"ď","Dcy":"Д","dcy":"д","ddagger":"‡","ddarr":"⇊","DD":"ⅅ","dd":"ⅆ","DDotrahd":"⤑","ddotseq":"⩷","deg":"°","Del":"∇","Delta":"Δ","delta":"δ","demptyv":"⦱","dfisht":"⥿","Dfr":"𝔇","dfr":"𝔡","dHar":"⥥","dharl":"⇃","dharr":"⇂","DiacriticalAcute":"´","DiacriticalDot":"˙","DiacriticalDoubleAcute":"˝","DiacriticalGrave":"`","DiacriticalTilde":"˜","diam":"⋄","diamond":"⋄","Diamond":"⋄","diamondsuit":"♦","diams":"♦","die":"¨","DifferentialD":"ⅆ","digamma":"ϝ","disin":"⋲","div":"÷","divide":"÷","divideontimes":"⋇","divonx":"⋇","DJcy":"Ђ","djcy":"ђ","dlcorn":"⌞","dlcrop":"⌍","dollar":"$","Dopf":"𝔻","dopf":"𝕕","Dot":"¨","dot":"˙","DotDot":"⃜","doteq":"≐","doteqdot":"≑","DotEqual":"≐","dotminus":"∸","dotplus":"∔","dotsquare":"⊡","doublebarwedge":"⌆","DoubleContourIntegral":"∯","DoubleDot":"¨","DoubleDownArrow":"⇓","DoubleLeftArrow":"⇐","DoubleLeftRightArrow":"⇔","DoubleLeftTee":"⫤","DoubleLongLeftArrow":"⟸","DoubleLongLeftRightArrow":"⟺","DoubleLongRightArrow":"⟹","DoubleRightArrow":"⇒","DoubleRightTee":"⊨","DoubleUpArrow":"⇑","DoubleUpDownArrow":"⇕","DoubleVerticalBar":"∥","DownArrowBar":"⤓","downarrow":"↓","DownArrow":"↓","Downarrow":"⇓","DownArrowUpArrow":"⇵","DownBreve":"̑","downdownarrows":"⇊","downharpoonleft":"⇃","downharpoonright":"⇂","DownLeftRightVector":"⥐","DownLeftTeeVector":"⥞","DownLeftVectorBar":"⥖","DownLeftVector":"↽","DownRightTeeVector":"⥟","DownRightVectorBar":"⥗","DownRightVector":"⇁","DownTeeArrow":"↧","DownTee":"⊤","drbkarow":"⤐","drcorn":"⌟","drcrop":"⌌","Dscr":"𝒟","dscr":"𝒹","DScy":"Ѕ","dscy":"ѕ","dsol":"⧶","Dstrok":"Đ","dstrok":"đ","dtdot":"⋱","dtri":"▿","dtrif":"▾","duarr":"⇵","duhar":"⥯","dwangle":"⦦","DZcy":"Џ","dzcy":"џ","dzigrarr":"⟿","Eacute":"É","eacute":"é","easter":"⩮","Ecaron":"Ě","ecaron":"ě","Ecirc":"Ê","ecirc":"ê","ecir":"≖","ecolon":"≕","Ecy":"Э","ecy":"э","eDDot":"⩷","Edot":"Ė","edot":"ė","eDot":"≑","ee":"ⅇ","efDot":"≒","Efr":"𝔈","efr":"𝔢","eg":"⪚","Egrave":"È","egrave":"è","egs":"⪖","egsdot":"⪘","el":"⪙","Element":"∈","elinters":"⏧","ell":"ℓ","els":"⪕","elsdot":"⪗","Emacr":"Ē","emacr":"ē","empty":"∅","emptyset":"∅","EmptySmallSquare":"◻","emptyv":"∅","EmptyVerySmallSquare":"▫","emsp13":" ","emsp14":" ","emsp":" ","ENG":"Ŋ","eng":"ŋ","ensp":" ","Eogon":"Ę","eogon":"ę","Eopf":"𝔼","eopf":"𝕖","epar":"⋕","eparsl":"⧣","eplus":"⩱","epsi":"ε","Epsilon":"Ε","epsilon":"ε","epsiv":"ϵ","eqcirc":"≖","eqcolon":"≕","eqsim":"≂","eqslantgtr":"⪖","eqslantless":"⪕","Equal":"⩵","equals":"=","EqualTilde":"≂","equest":"≟","Equilibrium":"⇌","equiv":"≡","equivDD":"⩸","eqvparsl":"⧥","erarr":"⥱","erDot":"≓","escr":"ℯ","Escr":"ℰ","esdot":"≐","Esim":"⩳","esim":"≂","Eta":"Η","eta":"η","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","euro":"€","excl":"!","exist":"∃","Exists":"∃","expectation":"ℰ","exponentiale":"ⅇ","ExponentialE":"ⅇ","fallingdotseq":"≒","Fcy":"Ф","fcy":"ф","female":"♀","ffilig":"ﬃ","fflig":"ﬀ","ffllig":"ﬄ","Ffr":"𝔉","ffr":"𝔣","filig":"ﬁ","FilledSmallSquare":"◼","FilledVerySmallSquare":"▪","fjlig":"fj","flat":"♭","fllig":"ﬂ","fltns":"▱","fnof":"ƒ","Fopf":"𝔽","fopf":"𝕗","forall":"∀","ForAll":"∀","fork":"⋔","forkv":"⫙","Fouriertrf":"ℱ","fpartint":"⨍","frac12":"½","frac13":"⅓","frac14":"¼","frac15":"⅕","frac16":"⅙","frac18":"⅛","frac23":"⅔","frac25":"⅖","frac34":"¾","frac35":"⅗","frac38":"⅜","frac45":"⅘","frac56":"⅚","frac58":"⅝","frac78":"⅞","frasl":"⁄","frown":"⌢","fscr":"𝒻","Fscr":"ℱ","gacute":"ǵ","Gamma":"Γ","gamma":"γ","Gammad":"Ϝ","gammad":"ϝ","gap":"⪆","Gbreve":"Ğ","gbreve":"ğ","Gcedil":"Ģ","Gcirc":"Ĝ","gcirc":"ĝ","Gcy":"Г","gcy":"г","Gdot":"Ġ","gdot":"ġ","ge":"≥","gE":"≧","gEl":"⪌","gel":"⋛","geq":"≥","geqq":"≧","geqslant":"⩾","gescc":"⪩","ges":"⩾","gesdot":"⪀","gesdoto":"⪂","gesdotol":"⪄","gesl":"⋛︀","gesles":"⪔","Gfr":"𝔊","gfr":"𝔤","gg":"≫","Gg":"⋙","ggg":"⋙","gimel":"ℷ","GJcy":"Ѓ","gjcy":"ѓ","gla":"⪥","gl":"≷","glE":"⪒","glj":"⪤","gnap":"⪊","gnapprox":"⪊","gne":"⪈","gnE":"≩","gneq":"⪈","gneqq":"≩","gnsim":"⋧","Gopf":"𝔾","gopf":"𝕘","grave":"`","GreaterEqual":"≥","GreaterEqualLess":"⋛","GreaterFullEqual":"≧","GreaterGreater":"⪢","GreaterLess":"≷","GreaterSlantEqual":"⩾","GreaterTilde":"≳","Gscr":"𝒢","gscr":"ℊ","gsim":"≳","gsime":"⪎","gsiml":"⪐","gtcc":"⪧","gtcir":"⩺","gt":">","GT":">","Gt":"≫","gtdot":"⋗","gtlPar":"⦕","gtquest":"⩼","gtrapprox":"⪆","gtrarr":"⥸","gtrdot":"⋗","gtreqless":"⋛","gtreqqless":"⪌","gtrless":"≷","gtrsim":"≳","gvertneqq":"≩︀","gvnE":"≩︀","Hacek":"ˇ","hairsp":" ","half":"½","hamilt":"ℋ","HARDcy":"Ъ","hardcy":"ъ","harrcir":"⥈","harr":"↔","hArr":"⇔","harrw":"↭","Hat":"^","hbar":"ℏ","Hcirc":"Ĥ","hcirc":"ĥ","hearts":"♥","heartsuit":"♥","hellip":"…","hercon":"⊹","hfr":"𝔥","Hfr":"ℌ","HilbertSpace":"ℋ","hksearow":"⤥","hkswarow":"⤦","hoarr":"⇿","homtht":"∻","hookleftarrow":"↩","hookrightarrow":"↪","hopf":"𝕙","Hopf":"ℍ","horbar":"―","HorizontalLine":"─","hscr":"𝒽","Hscr":"ℋ","hslash":"ℏ","Hstrok":"Ħ","hstrok":"ħ","HumpDownHump":"≎","HumpEqual":"≏","hybull":"⁃","hyphen":"‐","Iacute":"Í","iacute":"í","ic":"⁣","Icirc":"Î","icirc":"î","Icy":"И","icy":"и","Idot":"İ","IEcy":"Е","iecy":"е","iexcl":"¡","iff":"⇔","ifr":"𝔦","Ifr":"ℑ","Igrave":"Ì","igrave":"ì","ii":"ⅈ","iiiint":"⨌","iiint":"∭","iinfin":"⧜","iiota":"℩","IJlig":"Ĳ","ijlig":"ĳ","Imacr":"Ī","imacr":"ī","image":"ℑ","ImaginaryI":"ⅈ","imagline":"ℐ","imagpart":"ℑ","imath":"ı","Im":"ℑ","imof":"⊷","imped":"Ƶ","Implies":"⇒","incare":"℅","in":"∈","infin":"∞","infintie":"⧝","inodot":"ı","intcal":"⊺","int":"∫","Int":"∬","integers":"ℤ","Integral":"∫","intercal":"⊺","Intersection":"⋂","intlarhk":"⨗","intprod":"⨼","InvisibleComma":"⁣","InvisibleTimes":"⁢","IOcy":"Ё","iocy":"ё","Iogon":"Į","iogon":"į","Iopf":"𝕀","iopf":"𝕚","Iota":"Ι","iota":"ι","iprod":"⨼","iquest":"¿","iscr":"𝒾","Iscr":"ℐ","isin":"∈","isindot":"⋵","isinE":"⋹","isins":"⋴","isinsv":"⋳","isinv":"∈","it":"⁢","Itilde":"Ĩ","itilde":"ĩ","Iukcy":"І","iukcy":"і","Iuml":"Ï","iuml":"ï","Jcirc":"Ĵ","jcirc":"ĵ","Jcy":"Й","jcy":"й","Jfr":"𝔍","jfr":"𝔧","jmath":"ȷ","Jopf":"𝕁","jopf":"𝕛","Jscr":"𝒥","jscr":"𝒿","Jsercy":"Ј","jsercy":"ј","Jukcy":"Є","jukcy":"є","Kappa":"Κ","kappa":"κ","kappav":"ϰ","Kcedil":"Ķ","kcedil":"ķ","Kcy":"К","kcy":"к","Kfr":"𝔎","kfr":"𝔨","kgreen":"ĸ","KHcy":"Х","khcy":"х","KJcy":"Ќ","kjcy":"ќ","Kopf":"𝕂","kopf":"𝕜","Kscr":"𝒦","kscr":"𝓀","lAarr":"⇚","Lacute":"Ĺ","lacute":"ĺ","laemptyv":"⦴","lagran":"ℒ","Lambda":"Λ","lambda":"λ","lang":"⟨","Lang":"⟪","langd":"⦑","langle":"⟨","lap":"⪅","Laplacetrf":"ℒ","laquo":"«","larrb":"⇤","larrbfs":"⤟","larr":"←","Larr":"↞","lArr":"⇐","larrfs":"⤝","larrhk":"↩","larrlp":"↫","larrpl":"⤹","larrsim":"⥳","larrtl":"↢","latail":"⤙","lAtail":"⤛","lat":"⪫","late":"⪭","lates":"⪭︀","lbarr":"⤌","lBarr":"⤎","lbbrk":"❲","lbrace":"{","lbrack":"[","lbrke":"⦋","lbrksld":"⦏","lbrkslu":"⦍","Lcaron":"Ľ","lcaron":"ľ","Lcedil":"Ļ","lcedil":"ļ","lceil":"⌈","lcub":"{","Lcy":"Л","lcy":"л","ldca":"⤶","ldquo":"“","ldquor":"„","ldrdhar":"⥧","ldrushar":"⥋","ldsh":"↲","le":"≤","lE":"≦","LeftAngleBracket":"⟨","LeftArrowBar":"⇤","leftarrow":"←","LeftArrow":"←","Leftarrow":"⇐","LeftArrowRightArrow":"⇆","leftarrowtail":"↢","LeftCeiling":"⌈","LeftDoubleBracket":"⟦","LeftDownTeeVector":"⥡","LeftDownVectorBar":"⥙","LeftDownVector":"⇃","LeftFloor":"⌊","leftharpoondown":"↽","leftharpoonup":"↼","leftleftarrows":"⇇","leftrightarrow":"↔","LeftRightArrow":"↔","Leftrightarrow":"⇔","leftrightarrows":"⇆","leftrightharpoons":"⇋","leftrightsquigarrow":"↭","LeftRightVector":"⥎","LeftTeeArrow":"↤","LeftTee":"⊣","LeftTeeVector":"⥚","leftthreetimes":"⋋","LeftTriangleBar":"⧏","LeftTriangle":"⊲","LeftTriangleEqual":"⊴","LeftUpDownVector":"⥑","LeftUpTeeVector":"⥠","LeftUpVectorBar":"⥘","LeftUpVector":"↿","LeftVectorBar":"⥒","LeftVector":"↼","lEg":"⪋","leg":"⋚","leq":"≤","leqq":"≦","leqslant":"⩽","lescc":"⪨","les":"⩽","lesdot":"⩿","lesdoto":"⪁","lesdotor":"⪃","lesg":"⋚︀","lesges":"⪓","lessapprox":"⪅","lessdot":"⋖","lesseqgtr":"⋚","lesseqqgtr":"⪋","LessEqualGreater":"⋚","LessFullEqual":"≦","LessGreater":"≶","lessgtr":"≶","LessLess":"⪡","lesssim":"≲","LessSlantEqual":"⩽","LessTilde":"≲","lfisht":"⥼","lfloor":"⌊","Lfr":"𝔏","lfr":"𝔩","lg":"≶","lgE":"⪑","lHar":"⥢","lhard":"↽","lharu":"↼","lharul":"⥪","lhblk":"▄","LJcy":"Љ","ljcy":"љ","llarr":"⇇","ll":"≪","Ll":"⋘","llcorner":"⌞","Lleftarrow":"⇚","llhard":"⥫","lltri":"◺","Lmidot":"Ŀ","lmidot":"ŀ","lmoustache":"⎰","lmoust":"⎰","lnap":"⪉","lnapprox":"⪉","lne":"⪇","lnE":"≨","lneq":"⪇","lneqq":"≨","lnsim":"⋦","loang":"⟬","loarr":"⇽","lobrk":"⟦","longleftarrow":"⟵","LongLeftArrow":"⟵","Longleftarrow":"⟸","longleftrightarrow":"⟷","LongLeftRightArrow":"⟷","Longleftrightarrow":"⟺","longmapsto":"⟼","longrightarrow":"⟶","LongRightArrow":"⟶","Longrightarrow":"⟹","looparrowleft":"↫","looparrowright":"↬","lopar":"⦅","Lopf":"𝕃","lopf":"𝕝","loplus":"⨭","lotimes":"⨴","lowast":"∗","lowbar":"_","LowerLeftArrow":"↙","LowerRightArrow":"↘","loz":"◊","lozenge":"◊","lozf":"⧫","lpar":"(","lparlt":"⦓","lrarr":"⇆","lrcorner":"⌟","lrhar":"⇋","lrhard":"⥭","lrm":"‎","lrtri":"⊿","lsaquo":"‹","lscr":"𝓁","Lscr":"ℒ","lsh":"↰","Lsh":"↰","lsim":"≲","lsime":"⪍","lsimg":"⪏","lsqb":"[","lsquo":"‘","lsquor":"‚","Lstrok":"Ł","lstrok":"ł","ltcc":"⪦","ltcir":"⩹","lt":"<","LT":"<","Lt":"≪","ltdot":"⋖","lthree":"⋋","ltimes":"⋉","ltlarr":"⥶","ltquest":"⩻","ltri":"◃","ltrie":"⊴","ltrif":"◂","ltrPar":"⦖","lurdshar":"⥊","luruhar":"⥦","lvertneqq":"≨︀","lvnE":"≨︀","macr":"¯","male":"♂","malt":"✠","maltese":"✠","Map":"⤅","map":"↦","mapsto":"↦","mapstodown":"↧","mapstoleft":"↤","mapstoup":"↥","marker":"▮","mcomma":"⨩","Mcy":"М","mcy":"м","mdash":"—","mDDot":"∺","measuredangle":"∡","MediumSpace":" ","Mellintrf":"ℳ","Mfr":"𝔐","mfr":"𝔪","mho":"℧","micro":"µ","midast":"*","midcir":"⫰","mid":"∣","middot":"·","minusb":"⊟","minus":"−","minusd":"∸","minusdu":"⨪","MinusPlus":"∓","mlcp":"⫛","mldr":"…","mnplus":"∓","models":"⊧","Mopf":"𝕄","mopf":"𝕞","mp":"∓","mscr":"𝓂","Mscr":"ℳ","mstpos":"∾","Mu":"Μ","mu":"μ","multimap":"⊸","mumap":"⊸","nabla":"∇","Nacute":"Ń","nacute":"ń","nang":"∠⃒","nap":"≉","napE":"⩰̸","napid":"≋̸","napos":"ŉ","napprox":"≉","natural":"♮","naturals":"ℕ","natur":"♮","nbsp":" ","nbump":"≎̸","nbumpe":"≏̸","ncap":"⩃","Ncaron":"Ň","ncaron":"ň","Ncedil":"Ņ","ncedil":"ņ","ncong":"≇","ncongdot":"⩭̸","ncup":"⩂","Ncy":"Н","ncy":"н","ndash":"–","nearhk":"⤤","nearr":"↗","neArr":"⇗","nearrow":"↗","ne":"≠","nedot":"≐̸","NegativeMediumSpace":"​","NegativeThickSpace":"​","NegativeThinSpace":"​","NegativeVeryThinSpace":"​","nequiv":"≢","nesear":"⤨","nesim":"≂̸","NestedGreaterGreater":"≫","NestedLessLess":"≪","NewLine":"\\n","nexist":"∄","nexists":"∄","Nfr":"𝔑","nfr":"𝔫","ngE":"≧̸","nge":"≱","ngeq":"≱","ngeqq":"≧̸","ngeqslant":"⩾̸","nges":"⩾̸","nGg":"⋙̸","ngsim":"≵","nGt":"≫⃒","ngt":"≯","ngtr":"≯","nGtv":"≫̸","nharr":"↮","nhArr":"⇎","nhpar":"⫲","ni":"∋","nis":"⋼","nisd":"⋺","niv":"∋","NJcy":"Њ","njcy":"њ","nlarr":"↚","nlArr":"⇍","nldr":"‥","nlE":"≦̸","nle":"≰","nleftarrow":"↚","nLeftarrow":"⇍","nleftrightarrow":"↮","nLeftrightarrow":"⇎","nleq":"≰","nleqq":"≦̸","nleqslant":"⩽̸","nles":"⩽̸","nless":"≮","nLl":"⋘̸","nlsim":"≴","nLt":"≪⃒","nlt":"≮","nltri":"⋪","nltrie":"⋬","nLtv":"≪̸","nmid":"∤","NoBreak":"⁠","NonBreakingSpace":" ","nopf":"𝕟","Nopf":"ℕ","Not":"⫬","not":"¬","NotCongruent":"≢","NotCupCap":"≭","NotDoubleVerticalBar":"∦","NotElement":"∉","NotEqual":"≠","NotEqualTilde":"≂̸","NotExists":"∄","NotGreater":"≯","NotGreaterEqual":"≱","NotGreaterFullEqual":"≧̸","NotGreaterGreater":"≫̸","NotGreaterLess":"≹","NotGreaterSlantEqual":"⩾̸","NotGreaterTilde":"≵","NotHumpDownHump":"≎̸","NotHumpEqual":"≏̸","notin":"∉","notindot":"⋵̸","notinE":"⋹̸","notinva":"∉","notinvb":"⋷","notinvc":"⋶","NotLeftTriangleBar":"⧏̸","NotLeftTriangle":"⋪","NotLeftTriangleEqual":"⋬","NotLess":"≮","NotLessEqual":"≰","NotLessGreater":"≸","NotLessLess":"≪̸","NotLessSlantEqual":"⩽̸","NotLessTilde":"≴","NotNestedGreaterGreater":"⪢̸","NotNestedLessLess":"⪡̸","notni":"∌","notniva":"∌","notnivb":"⋾","notnivc":"⋽","NotPrecedes":"⊀","NotPrecedesEqual":"⪯̸","NotPrecedesSlantEqual":"⋠","NotReverseElement":"∌","NotRightTriangleBar":"⧐̸","NotRightTriangle":"⋫","NotRightTriangleEqual":"⋭","NotSquareSubset":"⊏̸","NotSquareSubsetEqual":"⋢","NotSquareSuperset":"⊐̸","NotSquareSupersetEqual":"⋣","NotSubset":"⊂⃒","NotSubsetEqual":"⊈","NotSucceeds":"⊁","NotSucceedsEqual":"⪰̸","NotSucceedsSlantEqual":"⋡","NotSucceedsTilde":"≿̸","NotSuperset":"⊃⃒","NotSupersetEqual":"⊉","NotTilde":"≁","NotTildeEqual":"≄","NotTildeFullEqual":"≇","NotTildeTilde":"≉","NotVerticalBar":"∤","nparallel":"∦","npar":"∦","nparsl":"⫽⃥","npart":"∂̸","npolint":"⨔","npr":"⊀","nprcue":"⋠","nprec":"⊀","npreceq":"⪯̸","npre":"⪯̸","nrarrc":"⤳̸","nrarr":"↛","nrArr":"⇏","nrarrw":"↝̸","nrightarrow":"↛","nRightarrow":"⇏","nrtri":"⋫","nrtrie":"⋭","nsc":"⊁","nsccue":"⋡","nsce":"⪰̸","Nscr":"𝒩","nscr":"𝓃","nshortmid":"∤","nshortparallel":"∦","nsim":"≁","nsime":"≄","nsimeq":"≄","nsmid":"∤","nspar":"∦","nsqsube":"⋢","nsqsupe":"⋣","nsub":"⊄","nsubE":"⫅̸","nsube":"⊈","nsubset":"⊂⃒","nsubseteq":"⊈","nsubseteqq":"⫅̸","nsucc":"⊁","nsucceq":"⪰̸","nsup":"⊅","nsupE":"⫆̸","nsupe":"⊉","nsupset":"⊃⃒","nsupseteq":"⊉","nsupseteqq":"⫆̸","ntgl":"≹","Ntilde":"Ñ","ntilde":"ñ","ntlg":"≸","ntriangleleft":"⋪","ntrianglelefteq":"⋬","ntriangleright":"⋫","ntrianglerighteq":"⋭","Nu":"Ν","nu":"ν","num":"#","numero":"№","numsp":" ","nvap":"≍⃒","nvdash":"⊬","nvDash":"⊭","nVdash":"⊮","nVDash":"⊯","nvge":"≥⃒","nvgt":">⃒","nvHarr":"⤄","nvinfin":"⧞","nvlArr":"⤂","nvle":"≤⃒","nvlt":"<⃒","nvltrie":"⊴⃒","nvrArr":"⤃","nvrtrie":"⊵⃒","nvsim":"∼⃒","nwarhk":"⤣","nwarr":"↖","nwArr":"⇖","nwarrow":"↖","nwnear":"⤧","Oacute":"Ó","oacute":"ó","oast":"⊛","Ocirc":"Ô","ocirc":"ô","ocir":"⊚","Ocy":"О","ocy":"о","odash":"⊝","Odblac":"Ő","odblac":"ő","odiv":"⨸","odot":"⊙","odsold":"⦼","OElig":"Œ","oelig":"œ","ofcir":"⦿","Ofr":"𝔒","ofr":"𝔬","ogon":"˛","Ograve":"Ò","ograve":"ò","ogt":"⧁","ohbar":"⦵","ohm":"Ω","oint":"∮","olarr":"↺","olcir":"⦾","olcross":"⦻","oline":"‾","olt":"⧀","Omacr":"Ō","omacr":"ō","Omega":"Ω","omega":"ω","Omicron":"Ο","omicron":"ο","omid":"⦶","ominus":"⊖","Oopf":"𝕆","oopf":"𝕠","opar":"⦷","OpenCurlyDoubleQuote":"“","OpenCurlyQuote":"‘","operp":"⦹","oplus":"⊕","orarr":"↻","Or":"⩔","or":"∨","ord":"⩝","order":"ℴ","orderof":"ℴ","ordf":"ª","ordm":"º","origof":"⊶","oror":"⩖","orslope":"⩗","orv":"⩛","oS":"Ⓢ","Oscr":"𝒪","oscr":"ℴ","Oslash":"Ø","oslash":"ø","osol":"⊘","Otilde":"Õ","otilde":"õ","otimesas":"⨶","Otimes":"⨷","otimes":"⊗","Ouml":"Ö","ouml":"ö","ovbar":"⌽","OverBar":"‾","OverBrace":"⏞","OverBracket":"⎴","OverParenthesis":"⏜","para":"¶","parallel":"∥","par":"∥","parsim":"⫳","parsl":"⫽","part":"∂","PartialD":"∂","Pcy":"П","pcy":"п","percnt":"%","period":".","permil":"‰","perp":"⊥","pertenk":"‱","Pfr":"𝔓","pfr":"𝔭","Phi":"Φ","phi":"φ","phiv":"ϕ","phmmat":"ℳ","phone":"☎","Pi":"Π","pi":"π","pitchfork":"⋔","piv":"ϖ","planck":"ℏ","planckh":"ℎ","plankv":"ℏ","plusacir":"⨣","plusb":"⊞","pluscir":"⨢","plus":"+","plusdo":"∔","plusdu":"⨥","pluse":"⩲","PlusMinus":"±","plusmn":"±","plussim":"⨦","plustwo":"⨧","pm":"±","Poincareplane":"ℌ","pointint":"⨕","popf":"𝕡","Popf":"ℙ","pound":"£","prap":"⪷","Pr":"⪻","pr":"≺","prcue":"≼","precapprox":"⪷","prec":"≺","preccurlyeq":"≼","Precedes":"≺","PrecedesEqual":"⪯","PrecedesSlantEqual":"≼","PrecedesTilde":"≾","preceq":"⪯","precnapprox":"⪹","precneqq":"⪵","precnsim":"⋨","pre":"⪯","prE":"⪳","precsim":"≾","prime":"′","Prime":"″","primes":"ℙ","prnap":"⪹","prnE":"⪵","prnsim":"⋨","prod":"∏","Product":"∏","profalar":"⌮","profline":"⌒","profsurf":"⌓","prop":"∝","Proportional":"∝","Proportion":"∷","propto":"∝","prsim":"≾","prurel":"⊰","Pscr":"𝒫","pscr":"𝓅","Psi":"Ψ","psi":"ψ","puncsp":" ","Qfr":"𝔔","qfr":"𝔮","qint":"⨌","qopf":"𝕢","Qopf":"ℚ","qprime":"⁗","Qscr":"𝒬","qscr":"𝓆","quaternions":"ℍ","quatint":"⨖","quest":"?","questeq":"≟","quot":"\\"","QUOT":"\\"","rAarr":"⇛","race":"∽̱","Racute":"Ŕ","racute":"ŕ","radic":"√","raemptyv":"⦳","rang":"⟩","Rang":"⟫","rangd":"⦒","range":"⦥","rangle":"⟩","raquo":"»","rarrap":"⥵","rarrb":"⇥","rarrbfs":"⤠","rarrc":"⤳","rarr":"→","Rarr":"↠","rArr":"⇒","rarrfs":"⤞","rarrhk":"↪","rarrlp":"↬","rarrpl":"⥅","rarrsim":"⥴","Rarrtl":"⤖","rarrtl":"↣","rarrw":"↝","ratail":"⤚","rAtail":"⤜","ratio":"∶","rationals":"ℚ","rbarr":"⤍","rBarr":"⤏","RBarr":"⤐","rbbrk":"❳","rbrace":"}","rbrack":"]","rbrke":"⦌","rbrksld":"⦎","rbrkslu":"⦐","Rcaron":"Ř","rcaron":"ř","Rcedil":"Ŗ","rcedil":"ŗ","rceil":"⌉","rcub":"}","Rcy":"Р","rcy":"р","rdca":"⤷","rdldhar":"⥩","rdquo":"”","rdquor":"”","rdsh":"↳","real":"ℜ","realine":"ℛ","realpart":"ℜ","reals":"ℝ","Re":"ℜ","rect":"▭","reg":"®","REG":"®","ReverseElement":"∋","ReverseEquilibrium":"⇋","ReverseUpEquilibrium":"⥯","rfisht":"⥽","rfloor":"⌋","rfr":"𝔯","Rfr":"ℜ","rHar":"⥤","rhard":"⇁","rharu":"⇀","rharul":"⥬","Rho":"Ρ","rho":"ρ","rhov":"ϱ","RightAngleBracket":"⟩","RightArrowBar":"⇥","rightarrow":"→","RightArrow":"→","Rightarrow":"⇒","RightArrowLeftArrow":"⇄","rightarrowtail":"↣","RightCeiling":"⌉","RightDoubleBracket":"⟧","RightDownTeeVector":"⥝","RightDownVectorBar":"⥕","RightDownVector":"⇂","RightFloor":"⌋","rightharpoondown":"⇁","rightharpoonup":"⇀","rightleftarrows":"⇄","rightleftharpoons":"⇌","rightrightarrows":"⇉","rightsquigarrow":"↝","RightTeeArrow":"↦","RightTee":"⊢","RightTeeVector":"⥛","rightthreetimes":"⋌","RightTriangleBar":"⧐","RightTriangle":"⊳","RightTriangleEqual":"⊵","RightUpDownVector":"⥏","RightUpTeeVector":"⥜","RightUpVectorBar":"⥔","RightUpVector":"↾","RightVectorBar":"⥓","RightVector":"⇀","ring":"˚","risingdotseq":"≓","rlarr":"⇄","rlhar":"⇌","rlm":"‏","rmoustache":"⎱","rmoust":"⎱","rnmid":"⫮","roang":"⟭","roarr":"⇾","robrk":"⟧","ropar":"⦆","ropf":"𝕣","Ropf":"ℝ","roplus":"⨮","rotimes":"⨵","RoundImplies":"⥰","rpar":")","rpargt":"⦔","rppolint":"⨒","rrarr":"⇉","Rrightarrow":"⇛","rsaquo":"›","rscr":"𝓇","Rscr":"ℛ","rsh":"↱","Rsh":"↱","rsqb":"]","rsquo":"’","rsquor":"’","rthree":"⋌","rtimes":"⋊","rtri":"▹","rtrie":"⊵","rtrif":"▸","rtriltri":"⧎","RuleDelayed":"⧴","ruluhar":"⥨","rx":"℞","Sacute":"Ś","sacute":"ś","sbquo":"‚","scap":"⪸","Scaron":"Š","scaron":"š","Sc":"⪼","sc":"≻","sccue":"≽","sce":"⪰","scE":"⪴","Scedil":"Ş","scedil":"ş","Scirc":"Ŝ","scirc":"ŝ","scnap":"⪺","scnE":"⪶","scnsim":"⋩","scpolint":"⨓","scsim":"≿","Scy":"С","scy":"с","sdotb":"⊡","sdot":"⋅","sdote":"⩦","searhk":"⤥","searr":"↘","seArr":"⇘","searrow":"↘","sect":"§","semi":";","seswar":"⤩","setminus":"∖","setmn":"∖","sext":"✶","Sfr":"𝔖","sfr":"𝔰","sfrown":"⌢","sharp":"♯","SHCHcy":"Щ","shchcy":"щ","SHcy":"Ш","shcy":"ш","ShortDownArrow":"↓","ShortLeftArrow":"←","shortmid":"∣","shortparallel":"∥","ShortRightArrow":"→","ShortUpArrow":"↑","shy":"­","Sigma":"Σ","sigma":"σ","sigmaf":"ς","sigmav":"ς","sim":"∼","simdot":"⩪","sime":"≃","simeq":"≃","simg":"⪞","simgE":"⪠","siml":"⪝","simlE":"⪟","simne":"≆","simplus":"⨤","simrarr":"⥲","slarr":"←","SmallCircle":"∘","smallsetminus":"∖","smashp":"⨳","smeparsl":"⧤","smid":"∣","smile":"⌣","smt":"⪪","smte":"⪬","smtes":"⪬︀","SOFTcy":"Ь","softcy":"ь","solbar":"⌿","solb":"⧄","sol":"/","Sopf":"𝕊","sopf":"𝕤","spades":"♠","spadesuit":"♠","spar":"∥","sqcap":"⊓","sqcaps":"⊓︀","sqcup":"⊔","sqcups":"⊔︀","Sqrt":"√","sqsub":"⊏","sqsube":"⊑","sqsubset":"⊏","sqsubseteq":"⊑","sqsup":"⊐","sqsupe":"⊒","sqsupset":"⊐","sqsupseteq":"⊒","square":"□","Square":"□","SquareIntersection":"⊓","SquareSubset":"⊏","SquareSubsetEqual":"⊑","SquareSuperset":"⊐","SquareSupersetEqual":"⊒","SquareUnion":"⊔","squarf":"▪","squ":"□","squf":"▪","srarr":"→","Sscr":"𝒮","sscr":"𝓈","ssetmn":"∖","ssmile":"⌣","sstarf":"⋆","Star":"⋆","star":"☆","starf":"★","straightepsilon":"ϵ","straightphi":"ϕ","strns":"¯","sub":"⊂","Sub":"⋐","subdot":"⪽","subE":"⫅","sube":"⊆","subedot":"⫃","submult":"⫁","subnE":"⫋","subne":"⊊","subplus":"⪿","subrarr":"⥹","subset":"⊂","Subset":"⋐","subseteq":"⊆","subseteqq":"⫅","SubsetEqual":"⊆","subsetneq":"⊊","subsetneqq":"⫋","subsim":"⫇","subsub":"⫕","subsup":"⫓","succapprox":"⪸","succ":"≻","succcurlyeq":"≽","Succeeds":"≻","SucceedsEqual":"⪰","SucceedsSlantEqual":"≽","SucceedsTilde":"≿","succeq":"⪰","succnapprox":"⪺","succneqq":"⪶","succnsim":"⋩","succsim":"≿","SuchThat":"∋","sum":"∑","Sum":"∑","sung":"♪","sup1":"¹","sup2":"²","sup3":"³","sup":"⊃","Sup":"⋑","supdot":"⪾","supdsub":"⫘","supE":"⫆","supe":"⊇","supedot":"⫄","Superset":"⊃","SupersetEqual":"⊇","suphsol":"⟉","suphsub":"⫗","suplarr":"⥻","supmult":"⫂","supnE":"⫌","supne":"⊋","supplus":"⫀","supset":"⊃","Supset":"⋑","supseteq":"⊇","supseteqq":"⫆","supsetneq":"⊋","supsetneqq":"⫌","supsim":"⫈","supsub":"⫔","supsup":"⫖","swarhk":"⤦","swarr":"↙","swArr":"⇙","swarrow":"↙","swnwar":"⤪","szlig":"ß","Tab":"\\t","target":"⌖","Tau":"Τ","tau":"τ","tbrk":"⎴","Tcaron":"Ť","tcaron":"ť","Tcedil":"Ţ","tcedil":"ţ","Tcy":"Т","tcy":"т","tdot":"⃛","telrec":"⌕","Tfr":"𝔗","tfr":"𝔱","there4":"∴","therefore":"∴","Therefore":"∴","Theta":"Θ","theta":"θ","thetasym":"ϑ","thetav":"ϑ","thickapprox":"≈","thicksim":"∼","ThickSpace":"  ","ThinSpace":" ","thinsp":" ","thkap":"≈","thksim":"∼","THORN":"Þ","thorn":"þ","tilde":"˜","Tilde":"∼","TildeEqual":"≃","TildeFullEqual":"≅","TildeTilde":"≈","timesbar":"⨱","timesb":"⊠","times":"×","timesd":"⨰","tint":"∭","toea":"⤨","topbot":"⌶","topcir":"⫱","top":"⊤","Topf":"𝕋","topf":"𝕥","topfork":"⫚","tosa":"⤩","tprime":"‴","trade":"™","TRADE":"™","triangle":"▵","triangledown":"▿","triangleleft":"◃","trianglelefteq":"⊴","triangleq":"≜","triangleright":"▹","trianglerighteq":"⊵","tridot":"◬","trie":"≜","triminus":"⨺","TripleDot":"⃛","triplus":"⨹","trisb":"⧍","tritime":"⨻","trpezium":"⏢","Tscr":"𝒯","tscr":"𝓉","TScy":"Ц","tscy":"ц","TSHcy":"Ћ","tshcy":"ћ","Tstrok":"Ŧ","tstrok":"ŧ","twixt":"≬","twoheadleftarrow":"↞","twoheadrightarrow":"↠","Uacute":"Ú","uacute":"ú","uarr":"↑","Uarr":"↟","uArr":"⇑","Uarrocir":"⥉","Ubrcy":"Ў","ubrcy":"ў","Ubreve":"Ŭ","ubreve":"ŭ","Ucirc":"Û","ucirc":"û","Ucy":"У","ucy":"у","udarr":"⇅","Udblac":"Ű","udblac":"ű","udhar":"⥮","ufisht":"⥾","Ufr":"𝔘","ufr":"𝔲","Ugrave":"Ù","ugrave":"ù","uHar":"⥣","uharl":"↿","uharr":"↾","uhblk":"▀","ulcorn":"⌜","ulcorner":"⌜","ulcrop":"⌏","ultri":"◸","Umacr":"Ū","umacr":"ū","uml":"¨","UnderBar":"_","UnderBrace":"⏟","UnderBracket":"⎵","UnderParenthesis":"⏝","Union":"⋃","UnionPlus":"⊎","Uogon":"Ų","uogon":"ų","Uopf":"𝕌","uopf":"𝕦","UpArrowBar":"⤒","uparrow":"↑","UpArrow":"↑","Uparrow":"⇑","UpArrowDownArrow":"⇅","updownarrow":"↕","UpDownArrow":"↕","Updownarrow":"⇕","UpEquilibrium":"⥮","upharpoonleft":"↿","upharpoonright":"↾","uplus":"⊎","UpperLeftArrow":"↖","UpperRightArrow":"↗","upsi":"υ","Upsi":"ϒ","upsih":"ϒ","Upsilon":"Υ","upsilon":"υ","UpTeeArrow":"↥","UpTee":"⊥","upuparrows":"⇈","urcorn":"⌝","urcorner":"⌝","urcrop":"⌎","Uring":"Ů","uring":"ů","urtri":"◹","Uscr":"𝒰","uscr":"𝓊","utdot":"⋰","Utilde":"Ũ","utilde":"ũ","utri":"▵","utrif":"▴","uuarr":"⇈","Uuml":"Ü","uuml":"ü","uwangle":"⦧","vangrt":"⦜","varepsilon":"ϵ","varkappa":"ϰ","varnothing":"∅","varphi":"ϕ","varpi":"ϖ","varpropto":"∝","varr":"↕","vArr":"⇕","varrho":"ϱ","varsigma":"ς","varsubsetneq":"⊊︀","varsubsetneqq":"⫋︀","varsupsetneq":"⊋︀","varsupsetneqq":"⫌︀","vartheta":"ϑ","vartriangleleft":"⊲","vartriangleright":"⊳","vBar":"⫨","Vbar":"⫫","vBarv":"⫩","Vcy":"В","vcy":"в","vdash":"⊢","vDash":"⊨","Vdash":"⊩","VDash":"⊫","Vdashl":"⫦","veebar":"⊻","vee":"∨","Vee":"⋁","veeeq":"≚","vellip":"⋮","verbar":"|","Verbar":"‖","vert":"|","Vert":"‖","VerticalBar":"∣","VerticalLine":"|","VerticalSeparator":"❘","VerticalTilde":"≀","VeryThinSpace":" ","Vfr":"𝔙","vfr":"𝔳","vltri":"⊲","vnsub":"⊂⃒","vnsup":"⊃⃒","Vopf":"𝕍","vopf":"𝕧","vprop":"∝","vrtri":"⊳","Vscr":"𝒱","vscr":"𝓋","vsubnE":"⫋︀","vsubne":"⊊︀","vsupnE":"⫌︀","vsupne":"⊋︀","Vvdash":"⊪","vzigzag":"⦚","Wcirc":"Ŵ","wcirc":"ŵ","wedbar":"⩟","wedge":"∧","Wedge":"⋀","wedgeq":"≙","weierp":"℘","Wfr":"𝔚","wfr":"𝔴","Wopf":"𝕎","wopf":"𝕨","wp":"℘","wr":"≀","wreath":"≀","Wscr":"𝒲","wscr":"𝓌","xcap":"⋂","xcirc":"◯","xcup":"⋃","xdtri":"▽","Xfr":"𝔛","xfr":"𝔵","xharr":"⟷","xhArr":"⟺","Xi":"Ξ","xi":"ξ","xlarr":"⟵","xlArr":"⟸","xmap":"⟼","xnis":"⋻","xodot":"⨀","Xopf":"𝕏","xopf":"𝕩","xoplus":"⨁","xotime":"⨂","xrarr":"⟶","xrArr":"⟹","Xscr":"𝒳","xscr":"𝓍","xsqcup":"⨆","xuplus":"⨄","xutri":"△","xvee":"⋁","xwedge":"⋀","Yacute":"Ý","yacute":"ý","YAcy":"Я","yacy":"я","Ycirc":"Ŷ","ycirc":"ŷ","Ycy":"Ы","ycy":"ы","yen":"¥","Yfr":"𝔜","yfr":"𝔶","YIcy":"Ї","yicy":"ї","Yopf":"𝕐","yopf":"𝕪","Yscr":"𝒴","yscr":"𝓎","YUcy":"Ю","yucy":"ю","yuml":"ÿ","Yuml":"Ÿ","Zacute":"Ź","zacute":"ź","Zcaron":"Ž","zcaron":"ž","Zcy":"З","zcy":"з","Zdot":"Ż","zdot":"ż","zeetrf":"ℨ","ZeroWidthSpace":"​","Zeta":"Ζ","zeta":"ζ","zfr":"𝔷","Zfr":"ℨ","ZHcy":"Ж","zhcy":"ж","zigrarr":"⇝","zopf":"𝕫","Zopf":"ℤ","Zscr":"𝒵","zscr":"𝓏","zwj":"‍","zwnj":"‌"}')},function(module,exports,__webpack_require__){"use strict";__webpack_require__(2),Object.defineProperty(exports,"__esModule",{value:!0}),exports.CYCLIC_KEY=exports.EVENT_ID=exports.PANEL_ID=exports.ADDON_ID=exports.PARAM_KEY=void 0;exports.PARAM_KEY="actions";var ADDON_ID="storybook/actions";exports.ADDON_ID=ADDON_ID;var PANEL_ID="".concat(ADDON_ID,"/panel");exports.PANEL_ID=PANEL_ID;var EVENT_ID="".concat(ADDON_ID,"/action-event");exports.EVENT_ID=EVENT_ID;exports.CYCLIC_KEY="$___storybook.isCyclic"},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),__webpack_require__(24),__webpack_require__(25),__webpack_require__(28),__webpack_require__(14),__webpack_require__(39),__webpack_require__(17),__webpack_require__(78),__webpack_require__(2),__webpack_require__(97),__webpack_require__(16),__webpack_require__(50),__webpack_require__(27),__webpack_require__(83),__webpack_require__(15),__webpack_require__(21),Object.defineProperty(exports,"__esModule",{value:!0}),exports.withActions=exports.createDecorator=void 0;var _global=__webpack_require__(36),_clientApi=__webpack_require__(150),_actions=__webpack_require__(172);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var delegateEventSplitter=/^(\S+)\s*(.*)$/,matchesMethod=null!=_global.Element&&!_global.Element.prototype.matches?"msMatchesSelector":"matches",root=_global.document&&_global.document.getElementById("root"),hasMatchInAncestry=function hasMatchInAncestry(element,selector){if(element[matchesMethod](selector))return!0;var parent=element.parentElement;return!!parent&&hasMatchInAncestry(parent,selector)},createHandlers=function createHandlers(actionsFn){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var actionsObject=actionsFn.apply(void 0,args);return Object.entries(actionsObject).map((function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],action=_ref2[1],_key$match2=_slicedToArray(key.match(delegateEventSplitter),3),eventName=(_key$match2[0],_key$match2[1]),selector=_key$match2[2];return{eventName:eventName,handler:function handler(e){selector&&!hasMatchInAncestry(e.target,selector)||action(e)}}}))},createDecorator=function createDecorator(actionsFn){return function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return function(storyFn){return(0,_clientApi.useEffect)((function(){if(null!=root){var handlers=createHandlers.apply(void 0,[actionsFn].concat(args));return handlers.forEach((function(_ref3){var eventName=_ref3.eventName,handler=_ref3.handler;return root.addEventListener(eventName,handler)})),function(){return handlers.forEach((function(_ref4){var eventName=_ref4.eventName,handler=_ref4.handler;return root.removeEventListener(eventName,handler)}))}}}),[root,actionsFn,args]),storyFn()}}};exports.createDecorator=createDecorator;var withActions=createDecorator(_actions.actions);exports.withActions=withActions},function(module){module.exports=JSON.parse('{"a":"5.8.1"}')},function(module){module.exports=JSON.parse('{"name":"vega-lite","author":"Dominik Moritz, Kanit \\"Ham\\" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer","version":"4.0.0-beta.12","collaborators":["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],"homepage":"https://vega.github.io/vega-lite/","description":"Vega-Lite is a concise high-level language for interactive visualization.","main":"build/vega-lite.js","unpkg":"build/vega-lite.min.js","jsdelivr":"build/vega-lite.min.js","module":"build/src/index","types":"build/src/index.d.ts","bin":{"vl2png":"./bin/vl2png","vl2svg":"./bin/vl2svg","vl2vg":"./bin/vl2vg"},"directories":{"test":"test"},"scripts":{"build":"yarn build:only","build:only":"yarn tsc:src && rollup -c","postbuild":"terser build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && yarn schema","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"yarn tsc:site && rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh","clean":"find build ! -name \'vega-lite-schema.json\' -type f -delete && rm -rf site/data/* && rm -f examples/compiled/*.png && find site/examples ! -name \'index.md\' ! -name \'data\' -type f -delete","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site","data":"rsync -r node_modules/vega-datasets/data/* site/data","schema":"mkdir -p build && ts-json-schema-generator -c -f tsconfig.json -p src/index.ts -t TopLevelSpec > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/","renameschema":"scripts/rename-schema.sh","presite":"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh","site":"pushd site && bundle exec jekyll serve -I -l && popd","tsc:src":"tsc -b src/tsconfig.src.json","tsc:site":"tsc -b site/tsconfig.site.json","prettierbase":"prettier \'**/*.{md,css,yml}\'","eslintbase":"eslint --ext .ts .","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","test":"jest test/ && yarn lint && yarn schema && jest examples/ && yarn test:runtime","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/","test:runtime:generate":"rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime","watch:build":"yarn build:only && concurrently --kill-others -n Typescript,Rollup \'yarn tsc:src -w\' \'rollup -c -w\'","watch:site":"concurrently --kill-others -n Typescript,Rollup \'yarn tsc:site -w\' \'rollup -c site/rollup.config.js -w\'","watch:test":"jest --watch"},"repository":{"type":"git","url":"https://github.com/vega/vega-lite.git"},"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-lite/issues"},"devDependencies":{"@commitlint/cli":"^8.2.0","@commitlint/config-conventional":"^8.2.0","@types/chai":"^4.2.5","@types/d3":"^5.7.2","@types/highlight.js":"^9.12.3","@types/jest":"^24.0.23","@types/jest-environment-puppeteer":"^4.3.1","@types/mkdirp":"^0.5.2","@types/puppeteer":"^1.20.2","@typescript-eslint/eslint-plugin":"^2.8.0","@typescript-eslint/parser":"^2.8.0","ajv":"^6.10.2","chai":"^4.2.0","cheerio":"^1.0.0-rc.2","codecov":"^3.6.1","concurrently":"^5.0.0","d3":"^5.14.1","eslint":"^6.6.0","eslint-config-prettier":"^6.6.0","eslint-plugin-prettier":"^3.1.1","gh-pages":"^2.1.1","highlight.js":"^9.16.2","http-server":"^0.11.1","husky":"^3.1.0","jest":"^24.9.0","jest-puppeteer":"^4.3.0","lint-staged":"^9.4.3","mkdirp":"^0.5.1","prettier":"^1.19.1","puppeteer":"^2.0.0","rollup":"^1.27.2","rollup-plugin-commonjs":"^10.1.0","rollup-plugin-json":"^4.0.0","rollup-plugin-node-resolve":"^5.2.0","rollup-plugin-sourcemaps":"^0.4.2","rollup-plugin-terser":"^5.1.2","svg2png-many":"^0.0.7","terser":"^4.4.0","ts-jest":"^24.1.0","ts-json-schema-generator":"^0.56.0","typescript":"~3.7.2","vega-cli":"^5.8.1","vega-datasets":"^1.27.0","vega-embed":"^6.1.0","vega-tooltip":"^0.19.1","yaml-front-matter":"^4.0.0"},"dependencies":{"@types/clone":"~0.1.30","@types/fast-json-stable-stringify":"^2.0.0","array-flat-polyfill":"^1.0.1","clone":"~2.1.2","fast-deep-equal":"~2.0.1","fast-json-stable-stringify":"~2.0.0","json-stringify-pretty-compact":"~2.0.0","tslib":"~1.10.0","vega-event-selector":"~2.0.1","vega-expression":"~2.6.2","vega-typings":"~0.11.1","vega-util":"~1.12.0","yargs":"~15.0.1"},"peerDependencies":{"vega":"^5.8.1"},"husky":{"hooks":{"pre-commit":"lint-staged","commit-msg":"commitlint -E HUSKY_GIT_PARAMS"}},"lint-staged":{"*.ts":["eslint --fix","git add"],"*.{md,css,yml}":["prettier --write","git add"]},"jest":{"preset":"jest-puppeteer","transform":{"^.+\\\\.tsx?$":"ts-jest"},"testRegex":"(/__tests__/.*|(\\\\.|/)(test|spec))\\\\.(jsx?|tsx?)$","moduleFileExtensions":["ts","tsx","js","jsx","json","node"],"testPathIgnorePatterns":["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],"coverageDirectory":"./coverage/","collectCoverage":false}}')},function(module,exports,__webpack_require__){(function(Buffer){var clone=function(){"use strict";function _instanceof(obj,type){return null!=type&&obj instanceof type}var nativeMap,nativeSet,nativePromise;try{nativeMap=Map}catch(_){nativeMap=function(){}}try{nativeSet=Set}catch(_){nativeSet=function(){}}try{nativePromise=Promise}catch(_){nativePromise=function(){}}function clone(parent,circular,depth,prototype,includeNonEnumerable){"object"==typeof circular&&(depth=circular.depth,prototype=circular.prototype,includeNonEnumerable=circular.includeNonEnumerable,circular=circular.circular);var allParents=[],allChildren=[],useBuffer=void 0!==Buffer;return void 0===circular&&(circular=!0),void 0===depth&&(depth=1/0),function _clone(parent,depth){if(null===parent)return null;if(0===depth)return parent;var child,proto;if("object"!=typeof parent)return parent;if(_instanceof(parent,nativeMap))child=new nativeMap;else if(_instanceof(parent,nativeSet))child=new nativeSet;else if(_instanceof(parent,nativePromise))child=new nativePromise((function(resolve,reject){parent.then((function(value){resolve(_clone(value,depth-1))}),(function(err){reject(_clone(err,depth-1))}))}));else if(clone.__isArray(parent))child=[];else if(clone.__isRegExp(parent))child=new RegExp(parent.source,__getRegExpFlags(parent)),parent.lastIndex&&(child.lastIndex=parent.lastIndex);else if(clone.__isDate(parent))child=new Date(parent.getTime());else{if(useBuffer&&Buffer.isBuffer(parent))return child=Buffer.allocUnsafe?Buffer.allocUnsafe(parent.length):new Buffer(parent.length),parent.copy(child),child;_instanceof(parent,Error)?child=Object.create(parent):void 0===prototype?(proto=Object.getPrototypeOf(parent),child=Object.create(proto)):(child=Object.create(prototype),proto=prototype)}if(circular){var index=allParents.indexOf(parent);if(-1!=index)return allChildren[index];allParents.push(parent),allChildren.push(child)}for(var i in _instanceof(parent,nativeMap)&&parent.forEach((function(value,key){var keyChild=_clone(key,depth-1),valueChild=_clone(value,depth-1);child.set(keyChild,valueChild)})),_instanceof(parent,nativeSet)&&parent.forEach((function(value){var entryChild=_clone(value,depth-1);child.add(entryChild)})),parent){var attrs;proto&&(attrs=Object.getOwnPropertyDescriptor(proto,i)),attrs&&null==attrs.set||(child[i]=_clone(parent[i],depth-1))}if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(parent);for(i=0;i<symbols.length;i++){var symbol=symbols[i];(!(descriptor=Object.getOwnPropertyDescriptor(parent,symbol))||descriptor.enumerable||includeNonEnumerable)&&(child[symbol]=_clone(parent[symbol],depth-1),descriptor.enumerable||Object.defineProperty(child,symbol,{enumerable:!1}))}}if(includeNonEnumerable){var allPropertyNames=Object.getOwnPropertyNames(parent);for(i=0;i<allPropertyNames.length;i++){var descriptor,propertyName=allPropertyNames[i];(descriptor=Object.getOwnPropertyDescriptor(parent,propertyName))&&descriptor.enumerable||(child[propertyName]=_clone(parent[propertyName],depth-1),Object.defineProperty(child,propertyName,{enumerable:!1}))}}return child}(parent,depth)}function __objToStr(o){return Object.prototype.toString.call(o)}function __getRegExpFlags(re){var flags="";return re.global&&(flags+="g"),re.ignoreCase&&(flags+="i"),re.multiline&&(flags+="m"),flags}return clone.clonePrototype=function clonePrototype(parent){if(null===parent)return null;var c=function(){};return c.prototype=parent,new c},clone.__objToStr=__objToStr,clone.__isDate=function __isDate(o){return"object"==typeof o&&"[object Date]"===__objToStr(o)},clone.__isArray=function __isArray(o){return"object"==typeof o&&"[object Array]"===__objToStr(o)},clone.__isRegExp=function __isRegExp(o){return"object"==typeof o&&"[object RegExp]"===__objToStr(o)},clone.__getRegExpFlags=__getRegExpFlags,clone}();module.exports&&(module.exports=clone)}).call(this,__webpack_require__(173).Buffer)},function(module,exports,__webpack_require__){"use strict";var isArray=Array.isArray,keyList=Object.keys,hasProp=Object.prototype.hasOwnProperty;module.exports=function equal(a,b){if(a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==typeof b){var i,length,key,arrA=isArray(a),arrB=isArray(b);if(arrA&&arrB){if((length=a.length)!=b.length)return!1;for(i=length;0!=i--;)if(!equal(a[i],b[i]))return!1;return!0}if(arrA!=arrB)return!1;var dateA=a instanceof Date,dateB=b instanceof Date;if(dateA!=dateB)return!1;if(dateA&&dateB)return a.getTime()==b.getTime();var regexpA=a instanceof RegExp,regexpB=b instanceof RegExp;if(regexpA!=regexpB)return!1;if(regexpA&&regexpB)return a.toString()==b.toString();var keys=keyList(a);if((length=keys.length)!==keyList(b).length)return!1;for(i=length;0!=i--;)if(!hasProp.call(b,keys[i]))return!1;for(i=length;0!=i--;)if(!equal(a[key=keys[i]],b[key]))return!1;return!0}return a!=a&&b!=b}},function(module){module.exports=JSON.parse('{"name":"vega-themes","version":"2.5.0","description":"Themes for stylized Vega and Vega-Lite visualizations.","keywords":["vega","vega-lite","themes","style"],"license":"BSD-3-Clause","author":{"name":"UW Interactive Data Lab","url":"https://idl.cs.washington.edu"},"contributors":[{"name":"Emily Gu","url":"https://github.com/emilygu"},{"name":"Arvind Satyanarayan","url":"http://arvindsatya.com"},{"name":"Jeffrey Heer","url":"http://idl.cs.washington.edu"},{"name":"Dominik Moritz","url":"https://www.domoritz.de"}],"main":"build/vega-themes.js","module":"build/src/index.js","unpkg":"build/vega-themes.min.js","jsdelivr":"build/vega-themes.min.js","typings":"build/src/index.d.ts","repository":{"type":"git","url":"https://github.com/vega/vega-themes.git"},"scripts":{"prepare":"beemo create-config --silent","clean":"rm -rf build examples/build","prettierbase":"beemo prettier \'examples/*.{html,scss,css}\'","eslintbase":"beemo eslint \'src/**/*.ts\'","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","prebuild":"mkdir -p build","build":"tsc && rollup -c","postbuild":"terser build/vega-themes.js -cm > build/vega-themes.min.js","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples","prepublishOnly":"yarn clean && yarn build","preversion":"yarn lint","serve":"browser-sync start -s -f build examples --serveStatic examples","start":"yarn build && concurrently --kill-others -n Server,Typescript,Rollup \'yarn serve\' \'tsc -w\' \'rollup -c -w\'"},"devDependencies":{"browser-sync":"^2.26.7","concurrently":"^4.1.2","gh-pages":"^2.1.1","rollup":"^1.22.0","rollup-plugin-json":"^4.0.0","terser":"^4.3.4","typescript":"~3.6.3","vega":"^5.5.2","vega-lite":"^4.0.0-beta.1","vega-lite-dev-config":"^0.3.0"},"peerDependencies":{"vega":"*","vega-lite":"*"},"beemo":{"module":"vega-lite-dev-config","drivers":["prettier","eslint"]}}')},function(module){module.exports=JSON.parse('{"name":"vega-tooltip","version":"0.19.1","description":"A tooltip plugin for Vega-Lite and Vega visualizations.","main":"build/vega-tooltip.js","module":"build/src/index.js","unpkg":"build/vega-tooltip.min.js","jsdelivr":"build/vega-tooltip.min.js","typings":"build/src/index.d.ts","repository":{"type":"git","url":"https://github.com/vega/vega-tooltip.git"},"keywords":["vega-lite","vega","tooltip"],"author":{"name":"UW Interactive Data Lab","url":"https://idl.cs.washington.edu"},"collaborators":["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-tooltip/issues"},"homepage":"https://github.com/vega/vega-tooltip#readme","scripts":{"prepare":"beemo create-config --silent","tsc:src":"tsc -b tsconfig.src.json","build":"yarn tsc:src && rollup -c","clean":"rm -rf build examples/data && rm -f src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean","prettierbase":"beemo prettier \'examples/*.{html,scss,css}\'","eslintbase":"beemo eslint \'{src,test,types}/**/*.ts\'","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","postbuild":"terser build/vega-tooltip.js -c -m -o build/vega-tooltip.min.js","prebuild":"mkdir -p build && yarn copy:data && ./build-style.sh","prepublishOnly":"yarn clean && yarn build","preversion":"yarn lint","start":"yarn build && concurrently --kill-others -n Server,Typescript,Rollup \'browser-sync start -s -f build examples --serveStatic examples\' \'yarn tsc:src -w\' \'rollup -c -w\'","pretest":"./build-style.sh","test":"jest"},"devDependencies":{"@types/jest":"^24.0.18","browser-sync":"^2.26.7","concurrently":"^4.1.2","gh-pages":"^2.1.1","jest":"^24.9.0","node-sass":"^4.12.0","path":"^0.12.7","rollup":"^1.20.3","rollup-plugin-commonjs":"^10.1.0","rollup-plugin-json":"^4.0.0","rollup-plugin-node-resolve":"^5.2.0","terser":"^4.2.1","ts-jest":"^24.0.2","typescript":"^3.6.2","vega-datasets":"^1.25.0","vega-lite-dev-config":"^0.2.5","vega-typings":"^0.8.1"},"dependencies":{"vega-util":"^1.11.1"},"beemo":{"module":"vega-lite-dev-config","drivers":["prettier","eslint"]},"jest":{"testURL":"http://localhost/","transform":{"^.+\\\\.tsx?$":"ts-jest"},"testRegex":"(/__tests__/.*|(\\\\.|/)(test|spec))\\\\.(jsx?|tsx?)$","moduleFileExtensions":["ts","tsx","js","jsx","json","node"],"testPathIgnorePatterns":["node_modules","<rootDir>/build","src"]}}')},,,,,,,,,,function(module,exports,__webpack_require__){"use strict";__webpack_require__(127),__webpack_require__(286),__webpack_require__(373)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(287)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(288),__webpack_require__(289),__webpack_require__(290)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2015 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/master/LICENSE
 */!function(root,factory){"use strict";void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){var isRegex,isString,$Array=Array,ArrayPrototype=$Array.prototype,$Object=Object,ObjectPrototype=$Object.prototype,$Function=Function,FunctionPrototype=$Function.prototype,$String=String,StringPrototype=$String.prototype,$Number=Number,NumberPrototype=$Number.prototype,array_slice=ArrayPrototype.slice,array_splice=ArrayPrototype.splice,array_push=ArrayPrototype.push,array_unshift=ArrayPrototype.unshift,array_concat=ArrayPrototype.concat,array_join=ArrayPrototype.join,call=FunctionPrototype.call,apply=FunctionPrototype.apply,max=Math.max,min=Math.min,to_string=ObjectPrototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,fnToStr=Function.prototype.toString,constructorRegex=/^\s*class /,isES6ClassFn=function isES6ClassFn(value){try{var spaceStripped=fnToStr.call(value).replace(/\/\/.*\n/g,"").replace(/\/\*[.\s\S]*\*\//g,"").replace(/\n/gm," ").replace(/ {2}/g," ");return constructorRegex.test(spaceStripped)}catch(e){return!1}},tryFunctionObject=function tryFunctionObject(value){try{return!isES6ClassFn(value)&&(fnToStr.call(value),!0)}catch(e){return!1}},fnClass="[object Function]",genClass="[object GeneratorFunction]",isCallable=function isCallable(value){if(!value)return!1;if("function"!=typeof value&&"object"!=typeof value)return!1;if(hasToStringTag)return tryFunctionObject(value);if(isES6ClassFn(value))return!1;var strClass=to_string.call(value);return strClass===fnClass||strClass===genClass},regexExec=RegExp.prototype.exec,tryRegexExec=function tryRegexExec(value){try{return regexExec.call(value),!0}catch(e){return!1}},regexClass="[object RegExp]";isRegex=function isRegex(value){return"object"==typeof value&&(hasToStringTag?tryRegexExec(value):to_string.call(value)===regexClass)};var strValue=String.prototype.valueOf,tryStringObject=function tryStringObject(value){try{return strValue.call(value),!0}catch(e){return!1}},stringClass="[object String]";isString=function isString(value){return"string"==typeof value||"object"==typeof value&&(hasToStringTag?tryStringObject(value):to_string.call(value)===stringClass)};var supportsDescriptors=$Object.defineProperty&&function(){try{var obj={};for(var _ in $Object.defineProperty(obj,"x",{enumerable:!1,value:obj}),obj)return!1;return obj.x===obj}catch(e){return!1}}(),defineProperties=(has=ObjectPrototype.hasOwnProperty,defineProperty=supportsDescriptors?function(object,name,method,forceAssign){!forceAssign&&name in object||$Object.defineProperty(object,name,{configurable:!0,enumerable:!1,writable:!0,value:method})}:function(object,name,method,forceAssign){!forceAssign&&name in object||(object[name]=method)},function defineProperties(object,map,forceAssign){for(var name in map)has.call(map,name)&&defineProperty(object,name,map[name],forceAssign)}),isPrimitive=function isPrimitive(input){var type=typeof input;return null===input||"object"!==type&&"function"!==type},isActualNaN=$Number.isNaN||function isActualNaN(x){return x!=x},ES={ToInteger:function ToInteger(num){var n=+num;return isActualNaN(n)?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n},ToPrimitive:function ToPrimitive(input){var val,valueOf,toStr;if(isPrimitive(input))return input;if(valueOf=input.valueOf,isCallable(valueOf)&&(val=valueOf.call(input),isPrimitive(val)))return val;if(toStr=input.toString,isCallable(toStr)&&(val=toStr.call(input),isPrimitive(val)))return val;throw new TypeError},ToObject:function(o){if(null==o)throw new TypeError("can't convert "+o+" to object");return $Object(o)},ToUint32:function ToUint32(x){return x>>>0}},Empty=function Empty(){};var has,defineProperty;defineProperties(FunctionPrototype,{bind:function bind(that){var target=this;if(!isCallable(target))throw new TypeError("Function.prototype.bind called on incompatible "+target);for(var bound,args=array_slice.call(arguments,1),binder=function(){if(this instanceof bound){var result=apply.call(target,this,array_concat.call(args,array_slice.call(arguments)));return $Object(result)===result?result:this}return apply.call(target,that,array_concat.call(args,array_slice.call(arguments)))},boundLength=max(0,target.length-args.length),boundArgs=[],i=0;i<boundLength;i++)array_push.call(boundArgs,"$"+i);return bound=$Function("binder","return function ("+array_join.call(boundArgs,",")+"){ return binder.apply(this, arguments); }")(binder),target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound}});var owns=call.bind(ObjectPrototype.hasOwnProperty),toStr=call.bind(ObjectPrototype.toString),arraySlice=call.bind(array_slice),arraySliceApply=apply.bind(array_slice);if("object"==typeof document&&document&&document.documentElement)try{arraySlice(document.documentElement.childNodes)}catch(e){var origArraySlice=arraySlice,origArraySliceApply=arraySliceApply;arraySlice=function arraySliceIE(arr){for(var r=[],i=arr.length;i-- >0;)r[i]=arr[i];return origArraySliceApply(r,origArraySlice(arguments,1))},arraySliceApply=function arraySliceApplyIE(arr,args){return origArraySliceApply(arraySlice(arr),args)}}var strSlice=call.bind(StringPrototype.slice),strSplit=call.bind(StringPrototype.split),strIndexOf=call.bind(StringPrototype.indexOf),pushCall=call.bind(array_push),isEnum=call.bind(ObjectPrototype.propertyIsEnumerable),arraySort=call.bind(ArrayPrototype.sort),isArray=$Array.isArray||function isArray(obj){return"[object Array]"===toStr(obj)},hasUnshiftReturnValueBug=1!==[].unshift(0);defineProperties(ArrayPrototype,{unshift:function(){return array_unshift.apply(this,arguments),this.length}},hasUnshiftReturnValueBug),defineProperties($Array,{isArray:isArray});var boxedString=$Object("a"),splitString="a"!==boxedString[0]||!(0 in boxedString),properlyBoxesContext=function properlyBoxed(method){var properlyBoxesNonStrict=!0,properlyBoxesStrict=!0,threwException=!1;if(method)try{method.call("foo",(function(_,__,context){"object"!=typeof context&&(properlyBoxesNonStrict=!1)})),method.call([1],(function(){properlyBoxesStrict="string"==typeof this}),"x")}catch(e){threwException=!0}return!!method&&!threwException&&properlyBoxesNonStrict&&properlyBoxesStrict};defineProperties(ArrayPrototype,{forEach:function forEach(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,i=-1,length=ES.ToUint32(self.length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++i<length;)i in self&&(void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object))}},!properlyBoxesContext(ArrayPrototype.forEach)),defineProperties(ArrayPrototype,{map:function map(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length),result=$Array(length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.map callback must be a function");for(var i=0;i<length;i++)i in self&&(result[i]=void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object));return result}},!properlyBoxesContext(ArrayPrototype.map)),defineProperties(ArrayPrototype,{filter:function filter(callbackfn){var value,T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length),result=[];if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.filter callback must be a function");for(var i=0;i<length;i++)i in self&&(value=self[i],(void 0===T?callbackfn(value,i,object):callbackfn.call(T,value,i,object))&&pushCall(result,value));return result}},!properlyBoxesContext(ArrayPrototype.filter)),defineProperties(ArrayPrototype,{every:function every(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.every callback must be a function");for(var i=0;i<length;i++)if(i in self&&!(void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object)))return!1;return!0}},!properlyBoxesContext(ArrayPrototype.every)),defineProperties(ArrayPrototype,{some:function some(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.some callback must be a function");for(var i=0;i<length;i++)if(i in self&&(void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object)))return!0;return!1}},!properlyBoxesContext(ArrayPrototype.some));var reduceCoercesToObject=!1;ArrayPrototype.reduce&&(reduceCoercesToObject="object"==typeof ArrayPrototype.reduce.call("es5",(function(_,__,___,list){return list})));defineProperties(ArrayPrototype,{reduce:function reduce(callbackfn){var object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(!isCallable(callbackfn))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===length&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError("reduce of empty array with no initial value")}for(;i<length;i++)i in self&&(result=callbackfn(result,self[i],i,object));return result}},!reduceCoercesToObject);var reduceRightCoercesToObject=!1;ArrayPrototype.reduceRight&&(reduceRightCoercesToObject="object"==typeof ArrayPrototype.reduceRight.call("es5",(function(_,__,___,list){return list})));defineProperties(ArrayPrototype,{reduceRight:function reduceRight(callbackfn){var result,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(!isCallable(callbackfn))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===length&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(--i<0)throw new TypeError("reduceRight of empty array with no initial value")}if(i<0)return result;do{i in self&&(result=callbackfn(result,self[i],i,object))}while(i--);return result}},!reduceRightCoercesToObject);var hasFirefox2IndexOfBug=ArrayPrototype.indexOf&&-1!==[0,1].indexOf(1,2);defineProperties(ArrayPrototype,{indexOf:function indexOf(searchElement){var self=splitString&&isString(this)?strSplit(this,""):ES.ToObject(this),length=ES.ToUint32(self.length);if(0===length)return-1;var i=0;for(arguments.length>1&&(i=ES.ToInteger(arguments[1])),i=i>=0?i:max(0,length+i);i<length;i++)if(i in self&&self[i]===searchElement)return i;return-1}},hasFirefox2IndexOfBug);var hasFirefox2LastIndexOfBug=ArrayPrototype.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);defineProperties(ArrayPrototype,{lastIndexOf:function lastIndexOf(searchElement){var self=splitString&&isString(this)?strSplit(this,""):ES.ToObject(this),length=ES.ToUint32(self.length);if(0===length)return-1;var i=length-1;for(arguments.length>1&&(i=min(i,ES.ToInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&searchElement===self[i])return i;return-1}},hasFirefox2LastIndexOfBug);var spliceNoopReturnsEmptyArray=(a=[1,2],result=a.splice(),2===a.length&&isArray(result)&&0===result.length);var a,result;defineProperties(ArrayPrototype,{splice:function splice(start,deleteCount){return 0===arguments.length?[]:array_splice.apply(this,arguments)}},!spliceNoopReturnsEmptyArray);var spliceWorksWithEmptyObject=(obj={},ArrayPrototype.splice.call(obj,0,0,1),1===obj.length);var obj;defineProperties(ArrayPrototype,{splice:function splice(start,deleteCount){if(0===arguments.length)return[];var args=arguments;return this.length=max(ES.ToInteger(this.length),0),arguments.length>0&&"number"!=typeof deleteCount&&((args=arraySlice(arguments)).length<2?pushCall(args,this.length-start):args[1]=ES.ToInteger(deleteCount)),array_splice.apply(this,args)}},!spliceWorksWithEmptyObject);var spliceWorksWithLargeSparseArrays=(arr=new $Array(1e5),arr[8]="x",arr.splice(1,1),7===arr.indexOf("x")),spliceWorksWithSmallSparseArrays=function(){var arr=[];return arr[256]="a",arr.splice(257,0,"b"),"a"===arr[256]}();var arr;defineProperties(ArrayPrototype,{splice:function splice(start,deleteCount){for(var from,O=ES.ToObject(this),A=[],len=ES.ToUint32(O.length),relativeStart=ES.ToInteger(start),actualStart=relativeStart<0?max(len+relativeStart,0):min(relativeStart,len),actualDeleteCount=min(max(ES.ToInteger(deleteCount),0),len-actualStart),k=0;k<actualDeleteCount;)from=$String(actualStart+k),owns(O,from)&&(A[k]=O[from]),k+=1;var to,items=arraySlice(arguments,2),itemCount=items.length;if(itemCount<actualDeleteCount){k=actualStart;for(var maxK=len-actualDeleteCount;k<maxK;)from=$String(k+actualDeleteCount),to=$String(k+itemCount),owns(O,from)?O[to]=O[from]:delete O[to],k+=1;k=len;for(var minK=len-actualDeleteCount+itemCount;k>minK;)delete O[k-1],k-=1}else if(itemCount>actualDeleteCount)for(k=len-actualDeleteCount;k>actualStart;)from=$String(k+actualDeleteCount-1),to=$String(k+itemCount-1),owns(O,from)?O[to]=O[from]:delete O[to],k-=1;k=actualStart;for(var i=0;i<items.length;++i)O[k]=items[i],k+=1;return O.length=len-actualDeleteCount+itemCount,A}},!spliceWorksWithLargeSparseArrays||!spliceWorksWithSmallSparseArrays);var hasStringJoinBug,originalJoin=ArrayPrototype.join;try{hasStringJoinBug="1,2,3"!==Array.prototype.join.call("123",",")}catch(e){hasStringJoinBug=!0}hasStringJoinBug&&defineProperties(ArrayPrototype,{join:function join(separator){var sep=void 0===separator?",":separator;return originalJoin.call(isString(this)?strSplit(this,""):this,sep)}},hasStringJoinBug);var hasJoinUndefinedBug="1,2"!==[1,2].join(void 0);hasJoinUndefinedBug&&defineProperties(ArrayPrototype,{join:function join(separator){var sep=void 0===separator?",":separator;return originalJoin.call(this,sep)}},hasJoinUndefinedBug);var pushShim=function push(item){for(var O=ES.ToObject(this),n=ES.ToUint32(O.length),i=0;i<arguments.length;)O[n+i]=arguments[i],i+=1;return O.length=n+i,n+i},pushIsNotGeneric=function(){var obj={};return 1!==Array.prototype.push.call(obj,void 0)||1!==obj.length||void 0!==obj[0]||!owns(obj,0)}();defineProperties(ArrayPrototype,{push:function push(item){return isArray(this)?array_push.apply(this,arguments):pushShim.apply(this,arguments)}},pushIsNotGeneric);var pushUndefinedIsWeird=function(){var arr=[];return 1!==arr.push(void 0)||1!==arr.length||void 0!==arr[0]||!owns(arr,0)}();defineProperties(ArrayPrototype,{push:pushShim},pushUndefinedIsWeird),defineProperties(ArrayPrototype,{slice:function(start,end){var arr=isString(this)?strSplit(this,""):this;return arraySliceApply(arr,arguments)}},splitString);var sortIgnoresNonFunctions=function(){try{[1,2].sort(null)}catch(e){try{[1,2].sort({})}catch(e2){return!1}}return!0}(),sortThrowsOnRegex=function(){try{return[1,2].sort(/a/),!1}catch(e){}return!0}(),sortIgnoresUndefined=function(){try{return[1,2].sort(void 0),!0}catch(e){}return!1}();defineProperties(ArrayPrototype,{sort:function sort(compareFn){if(void 0===compareFn)return arraySort(this);if(!isCallable(compareFn))throw new TypeError("Array.prototype.sort callback must be a function");return arraySort(this,compareFn)}},sortIgnoresNonFunctions||!sortIgnoresUndefined||!sortThrowsOnRegex);var hasDontEnumBug=!isEnum({toString:null},"toString"),hasProtoEnumBug=isEnum((function(){}),"prototype"),hasStringEnumBug=!owns("x","0"),equalsConstructorPrototype=function(o){var ctor=o.constructor;return ctor&&ctor.prototype===o},excludedKeys={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0,$width:!0,$height:!0,$top:!0,$localStorage:!0},hasAutomationEqualityBug=function(){if("undefined"==typeof window)return!1;for(var k in window)try{!excludedKeys["$"+k]&&owns(window,k)&&null!==window[k]&&"object"==typeof window[k]&&equalsConstructorPrototype(window[k])}catch(e){return!0}return!1}(),equalsConstructorPrototypeIfNotBuggy=function(object){if("undefined"==typeof window||!hasAutomationEqualityBug)return equalsConstructorPrototype(object);try{return equalsConstructorPrototype(object)}catch(e){return!1}},dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length,isStandardArguments=function isArguments(value){return"[object Arguments]"===toStr(value)},isLegacyArguments=function isArguments(value){return null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&!isArray(value)&&isCallable(value.callee)},isArguments=isStandardArguments(arguments)?isStandardArguments:isLegacyArguments;defineProperties($Object,{keys:function keys(object){var isFn=isCallable(object),isArgs=isArguments(object),isObject=null!==object&&"object"==typeof object,isStr=isObject&&isString(object);if(!isObject&&!isFn&&!isArgs)throw new TypeError("Object.keys called on a non-object");var theKeys=[],skipProto=hasProtoEnumBug&&isFn;if(isStr&&hasStringEnumBug||isArgs)for(var i=0;i<object.length;++i)pushCall(theKeys,$String(i));if(!isArgs)for(var name in object)skipProto&&"prototype"===name||!owns(object,name)||pushCall(theKeys,$String(name));if(hasDontEnumBug)for(var skipConstructor=equalsConstructorPrototypeIfNotBuggy(object),j=0;j<dontEnumsLength;j++){var dontEnum=dontEnums[j];skipConstructor&&"constructor"===dontEnum||!owns(object,dontEnum)||pushCall(theKeys,dontEnum)}return theKeys}});var keysWorksWithArguments=$Object.keys&&function(){return 2===$Object.keys(arguments).length}(1,2),keysHasArgumentsLengthBug=$Object.keys&&function(){var argKeys=$Object.keys(arguments);return 1!==arguments.length||1!==argKeys.length||1!==argKeys[0]}(1),originalKeys=$Object.keys;defineProperties($Object,{keys:function keys(object){return isArguments(object)?originalKeys(arraySlice(object)):originalKeys(object)}},!keysWorksWithArguments||keysHasArgumentsLengthBug);var hasToDateStringFormatBug,hasToStringFormatBug,hasNegativeMonthYearBug=0!==new Date(-0xc782b5b342b24).getUTCMonth(),aNegativeTestDate=new Date(-0x55d318d56a724),aPositiveTestDate=new Date(14496624e5),hasToUTCStringFormatBug="Mon, 01 Jan -45875 11:59:59 GMT"!==aNegativeTestDate.toUTCString(),timeZoneOffset=aNegativeTestDate.getTimezoneOffset();timeZoneOffset<-720?(hasToDateStringFormatBug="Tue Jan 02 -45875"!==aNegativeTestDate.toDateString(),hasToStringFormatBug=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(aPositiveTestDate))):(hasToDateStringFormatBug="Mon Jan 01 -45875"!==aNegativeTestDate.toDateString(),hasToStringFormatBug=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(aPositiveTestDate)));var originalGetFullYear=call.bind(Date.prototype.getFullYear),originalGetMonth=call.bind(Date.prototype.getMonth),originalGetDate=call.bind(Date.prototype.getDate),originalGetUTCFullYear=call.bind(Date.prototype.getUTCFullYear),originalGetUTCMonth=call.bind(Date.prototype.getUTCMonth),originalGetUTCDate=call.bind(Date.prototype.getUTCDate),originalGetUTCDay=call.bind(Date.prototype.getUTCDay),originalGetUTCHours=call.bind(Date.prototype.getUTCHours),originalGetUTCMinutes=call.bind(Date.prototype.getUTCMinutes),originalGetUTCSeconds=call.bind(Date.prototype.getUTCSeconds),originalGetUTCMilliseconds=call.bind(Date.prototype.getUTCMilliseconds),dayName=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthName=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysInMonth=function daysInMonth(month,year){return originalGetDate(new Date(year,month,0))};defineProperties(Date.prototype,{getFullYear:function getFullYear(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetFullYear(this);return year<0&&originalGetMonth(this)>11?year+1:year},getMonth:function getMonth(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetFullYear(this),month=originalGetMonth(this);return year<0&&month>11?0:month},getDate:function getDate(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetFullYear(this),month=originalGetMonth(this),date=originalGetDate(this);return year<0&&month>11?12===month?date:daysInMonth(0,year+1)-date+1:date},getUTCFullYear:function getUTCFullYear(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetUTCFullYear(this);return year<0&&originalGetUTCMonth(this)>11?year+1:year},getUTCMonth:function getUTCMonth(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetUTCFullYear(this),month=originalGetUTCMonth(this);return year<0&&month>11?0:month},getUTCDate:function getUTCDate(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetUTCFullYear(this),month=originalGetUTCMonth(this),date=originalGetUTCDate(this);return year<0&&month>11?12===month?date:daysInMonth(0,year+1)-date+1:date}},hasNegativeMonthYearBug),defineProperties(Date.prototype,{toUTCString:function toUTCString(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var day=originalGetUTCDay(this),date=originalGetUTCDate(this),month=originalGetUTCMonth(this),year=originalGetUTCFullYear(this),hour=originalGetUTCHours(this),minute=originalGetUTCMinutes(this),second=originalGetUTCSeconds(this);return dayName[day]+", "+(date<10?"0"+date:date)+" "+monthName[month]+" "+year+" "+(hour<10?"0"+hour:hour)+":"+(minute<10?"0"+minute:minute)+":"+(second<10?"0"+second:second)+" GMT"}},hasNegativeMonthYearBug||hasToUTCStringFormatBug),defineProperties(Date.prototype,{toDateString:function toDateString(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var day=this.getDay(),date=this.getDate(),month=this.getMonth(),year=this.getFullYear();return dayName[day]+" "+monthName[month]+" "+(date<10?"0"+date:date)+" "+year}},hasNegativeMonthYearBug||hasToDateStringFormatBug),(hasNegativeMonthYearBug||hasToStringFormatBug)&&(Date.prototype.toString=function toString(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var day=this.getDay(),date=this.getDate(),month=this.getMonth(),year=this.getFullYear(),hour=this.getHours(),minute=this.getMinutes(),second=this.getSeconds(),timezoneOffset=this.getTimezoneOffset(),hoursOffset=Math.floor(Math.abs(timezoneOffset)/60),minutesOffset=Math.floor(Math.abs(timezoneOffset)%60);return dayName[day]+" "+monthName[month]+" "+(date<10?"0"+date:date)+" "+year+" "+(hour<10?"0"+hour:hour)+":"+(minute<10?"0"+minute:minute)+":"+(second<10?"0"+second:second)+" GMT"+(timezoneOffset>0?"-":"+")+(hoursOffset<10?"0"+hoursOffset:hoursOffset)+(minutesOffset<10?"0"+minutesOffset:minutesOffset)},supportsDescriptors&&$Object.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var negativeDate=-621987552e5,negativeYearString="-000001",hasNegativeDateBug=Date.prototype.toISOString&&-1===new Date(negativeDate).toISOString().indexOf(negativeYearString),hasSafari51DateBug=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString(),getTime=call.bind(Date.prototype.getTime);defineProperties(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(getTime(this)))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var year=originalGetUTCFullYear(this),month=originalGetUTCMonth(this);year+=Math.floor(month/12);var result=[(month=(month%12+12)%12)+1,originalGetUTCDate(this),originalGetUTCHours(this),originalGetUTCMinutes(this),originalGetUTCSeconds(this)];year=(year<0?"-":year>9999?"+":"")+strSlice("00000"+Math.abs(year),0<=year&&year<=9999?-4:-6);for(var i=0;i<result.length;++i)result[i]=strSlice("00"+result[i],-2);return year+"-"+arraySlice(result,0,2).join("-")+"T"+arraySlice(result,2).join(":")+"."+strSlice("000"+originalGetUTCMilliseconds(this),-3)+"Z"}},hasNegativeDateBug||hasSafari51DateBug);var dateToJSONIsSupported=function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(negativeDate).toJSON().indexOf(negativeYearString)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(e){return!1}}();dateToJSONIsSupported||(Date.prototype.toJSON=function toJSON(key){var O=$Object(this),tv=ES.ToPrimitive(O);if("number"==typeof tv&&!isFinite(tv))return null;var toISO=O.toISOString;if(!isCallable(toISO))throw new TypeError("toISOString property is not callable");return toISO.call(O)});var supportsExtendedYears=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),acceptsInvalidDates=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z")),doesNotParseY2KNewYear=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(doesNotParseY2KNewYear||acceptsInvalidDates||!supportsExtendedYears){var maxSafeUnsigned32Bit=Math.pow(2,31)-1,hasSafariSignedIntBug=isActualNaN(new Date(1970,0,1,0,0,0,maxSafeUnsigned32Bit+1).getTime());Date=function(NativeDate){var DateShim=function Date(Y,M,D,h,m,s,ms){var date,length=arguments.length;if(this instanceof NativeDate){var seconds=s,millis=ms;if(hasSafariSignedIntBug&&length>=7&&ms>maxSafeUnsigned32Bit){var msToShift=Math.floor(ms/maxSafeUnsigned32Bit)*maxSafeUnsigned32Bit,sToShift=Math.floor(msToShift/1e3);seconds+=sToShift,millis-=1e3*sToShift}date=1===length&&$String(Y)===Y?new NativeDate(DateShim.parse(Y)):length>=7?new NativeDate(Y,M,D,h,m,seconds,millis):length>=6?new NativeDate(Y,M,D,h,m,seconds):length>=5?new NativeDate(Y,M,D,h,m):length>=4?new NativeDate(Y,M,D,h):length>=3?new NativeDate(Y,M,D):length>=2?new NativeDate(Y,M):length>=1?new NativeDate(Y instanceof NativeDate?+Y:Y):new NativeDate}else date=NativeDate.apply(this,arguments);return isPrimitive(date)||defineProperties(date,{constructor:DateShim},!0),date},isoDateExpression=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),months=[0,31,59,90,120,151,181,212,243,273,304,334,365],dayFromMonth=function dayFromMonth(year,month){var t=month>1?1:0;return months[month]+Math.floor((year-1969+t)/4)-Math.floor((year-1901+t)/100)+Math.floor((year-1601+t)/400)+365*(year-1970)},toUTC=function toUTC(t){var s=0,ms=t;if(hasSafariSignedIntBug&&ms>maxSafeUnsigned32Bit){var msToShift=Math.floor(ms/maxSafeUnsigned32Bit)*maxSafeUnsigned32Bit,sToShift=Math.floor(msToShift/1e3);s+=sToShift,ms-=1e3*sToShift}return $Number(new NativeDate(1970,0,1,0,0,s,ms))};for(var key in NativeDate)owns(NativeDate,key)&&(DateShim[key]=NativeDate[key]);defineProperties(DateShim,{now:NativeDate.now,UTC:NativeDate.UTC},!0),DateShim.prototype=NativeDate.prototype,defineProperties(DateShim.prototype,{constructor:DateShim},!0);return defineProperties(DateShim,{parse:function parse(string){var match=isoDateExpression.exec(string);if(match){var result,year=$Number(match[1]),month=$Number(match[2]||1)-1,day=$Number(match[3]||1)-1,hour=$Number(match[4]||0),minute=$Number(match[5]||0),second=$Number(match[6]||0),millisecond=Math.floor(1e3*$Number(match[7]||0)),isLocalTime=Boolean(match[4]&&!match[8]),signOffset="-"===match[9]?1:-1,hourOffset=$Number(match[10]||0),minuteOffset=$Number(match[11]||0),hasMinutesOrSecondsOrMilliseconds=minute>0||second>0||millisecond>0;return hour<(hasMinutesOrSecondsOrMilliseconds?24:25)&&minute<60&&second<60&&millisecond<1e3&&month>-1&&month<12&&hourOffset<24&&minuteOffset<60&&day>-1&&day<dayFromMonth(year,month+1)-dayFromMonth(year,month)&&(result=1e3*(60*((result=60*(24*(dayFromMonth(year,month)+day)+hour+hourOffset*signOffset))+minute+minuteOffset*signOffset)+second)+millisecond,isLocalTime&&(result=toUTC(result)),-864e13<=result&&result<=864e13)?result:NaN}return NativeDate.parse.apply(this,arguments)}}),DateShim}(Date)}Date.now||(Date.now=function now(){return(new Date).getTime()});var hasToFixedBugs=NumberPrototype.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),toFixedHelpers={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(n,c){for(var i=-1,c2=c;++i<toFixedHelpers.size;)c2+=n*toFixedHelpers.data[i],toFixedHelpers.data[i]=c2%toFixedHelpers.base,c2=Math.floor(c2/toFixedHelpers.base)},divide:function divide(n){for(var i=toFixedHelpers.size,c=0;--i>=0;)c+=toFixedHelpers.data[i],toFixedHelpers.data[i]=Math.floor(c/n),c=c%n*toFixedHelpers.base},numToString:function numToString(){for(var i=toFixedHelpers.size,s="";--i>=0;)if(""!==s||0===i||0!==toFixedHelpers.data[i]){var t=$String(toFixedHelpers.data[i]);""===s?s=t:s+=strSlice("0000000",0,7-t.length)+t}return s},pow:function pow(x,n,acc){return 0===n?acc:n%2==1?pow(x,n-1,acc*x):pow(x*x,n/2,acc)},log:function log(x){for(var n=0,x2=x;x2>=4096;)n+=12,x2/=4096;for(;x2>=2;)n+=1,x2/=2;return n}},toFixedShim=function toFixed(fractionDigits){var f,x,s,m,e,z,j,k;if(f=$Number(fractionDigits),(f=isActualNaN(f)?0:Math.floor(f))<0||f>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(x=$Number(this),isActualNaN(x))return"NaN";if(x<=-1e21||x>=1e21)return $String(x);if(s="",x<0&&(s="-",x=-x),m="0",x>1e-21)if(z=(e=toFixedHelpers.log(x*toFixedHelpers.pow(2,69,1))-69)<0?x*toFixedHelpers.pow(2,-e,1):x/toFixedHelpers.pow(2,e,1),z*=4503599627370496,(e=52-e)>0){for(toFixedHelpers.multiply(0,z),j=f;j>=7;)toFixedHelpers.multiply(1e7,0),j-=7;for(toFixedHelpers.multiply(toFixedHelpers.pow(10,j,1),0),j=e-1;j>=23;)toFixedHelpers.divide(1<<23),j-=23;toFixedHelpers.divide(1<<j),toFixedHelpers.multiply(1,1),toFixedHelpers.divide(2),m=toFixedHelpers.numToString()}else toFixedHelpers.multiply(0,z),toFixedHelpers.multiply(1<<-e,0),m=toFixedHelpers.numToString()+strSlice("0.00000000000000000000",2,2+f);return m=f>0?(k=m.length)<=f?s+strSlice("0.0000000000000000000",0,f-k+2)+m:s+strSlice(m,0,k-f)+"."+strSlice(m,k-f):s+m};defineProperties(NumberPrototype,{toFixed:toFixedShim},hasToFixedBugs);var hasToPrecisionUndefinedBug=function(){try{return"1"===1..toPrecision(void 0)}catch(e){return!0}}(),originalToPrecision=NumberPrototype.toPrecision;defineProperties(NumberPrototype,{toPrecision:function toPrecision(precision){return void 0===precision?originalToPrecision.call(this):originalToPrecision.call(this,precision)}},hasToPrecisionUndefinedBug),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(compliantExecNpcg=void 0===/()??/.exec("")[1],maxSafe32BitInt=Math.pow(2,32)-1,StringPrototype.split=function(separator,limit){var string=String(this);if(void 0===separator&&0===limit)return[];if(!isRegex(separator))return strSplit(this,separator,limit);var separator2,match,lastIndex,lastLength,output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.unicode?"u":"")+(separator.sticky?"y":""),lastLastIndex=0,separatorCopy=new RegExp(separator.source,flags+"g");compliantExecNpcg||(separator2=new RegExp("^"+separatorCopy.source+"$(?!\\s)",flags));var splitLimit=void 0===limit?maxSafe32BitInt:ES.ToUint32(limit);for(match=separatorCopy.exec(string);match&&!((lastIndex=match.index+match[0].length)>lastLastIndex&&(pushCall(output,strSlice(string,lastLastIndex,match.index)),!compliantExecNpcg&&match.length>1&&match[0].replace(separator2,(function(){for(var i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(match[i]=void 0)})),match.length>1&&match.index<string.length&&array_push.apply(output,arraySlice(match,1)),lastLength=match[0].length,lastLastIndex=lastIndex,output.length>=splitLimit));)separatorCopy.lastIndex===match.index&&separatorCopy.lastIndex++,match=separatorCopy.exec(string);return lastLastIndex===string.length?!lastLength&&separatorCopy.test("")||pushCall(output,""):pushCall(output,strSlice(string,lastLastIndex)),output.length>splitLimit?arraySlice(output,0,splitLimit):output}):"0".split(void 0,0).length&&(StringPrototype.split=function split(separator,limit){return void 0===separator&&0===limit?[]:strSplit(this,separator,limit)});var compliantExecNpcg,maxSafe32BitInt;var str_replace=StringPrototype.replace,replaceReportsGroupsCorrectly=(groups=[],"x".replace(/x(.)?/g,(function(match,group){pushCall(groups,group)})),1===groups.length&&void 0===groups[0]);var groups;replaceReportsGroupsCorrectly||(StringPrototype.replace=function replace(searchValue,replaceValue){var isFn=isCallable(replaceValue),hasCapturingGroups=isRegex(searchValue)&&/\)[*?]/.test(searchValue.source);if(isFn&&hasCapturingGroups){return str_replace.call(this,searchValue,(function(match){var length=arguments.length,originalLastIndex=searchValue.lastIndex;searchValue.lastIndex=0;var args=searchValue.exec(match)||[];return searchValue.lastIndex=originalLastIndex,pushCall(args,arguments[length-2],arguments[length-1]),replaceValue.apply(this,args)}))}return str_replace.call(this,searchValue,replaceValue)});var string_substr=StringPrototype.substr,hasNegativeSubstrBug="".substr&&"b"!=="0b".substr(-1);defineProperties(StringPrototype,{substr:function substr(start,length){var normalizedStart=start;return start<0&&(normalizedStart=max(this.length+start,0)),string_substr.call(this,normalizedStart,length)}},hasNegativeSubstrBug);var ws="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",zeroWidth="​",wsRegexChars="["+ws+"]",trimBeginRegexp=new RegExp("^"+wsRegexChars+wsRegexChars+"*"),trimEndRegexp=new RegExp(wsRegexChars+wsRegexChars+"*$"),hasTrimWhitespaceBug=StringPrototype.trim&&(ws.trim()||!zeroWidth.trim());defineProperties(StringPrototype,{trim:function trim(){if(null==this)throw new TypeError("can't convert "+this+" to object");return $String(this).replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}},hasTrimWhitespaceBug);var trim=call.bind(String.prototype.trim),hasLastIndexBug=StringPrototype.lastIndexOf&&-1!=="abcあい".lastIndexOf("あい",2);defineProperties(StringPrototype,{lastIndexOf:function lastIndexOf(searchString){if(null==this)throw new TypeError("can't convert "+this+" to object");for(var S=$String(this),searchStr=$String(searchString),numPos=arguments.length>1?$Number(arguments[1]):NaN,pos=isActualNaN(numPos)?1/0:ES.ToInteger(numPos),start=min(max(pos,0),S.length),searchLen=searchStr.length,k=start+searchLen;k>0;){k=max(0,k-searchLen);var index=strIndexOf(strSlice(S,k,start+searchLen),searchStr);if(-1!==index)return k+index}return-1}},hasLastIndexBug);var originalLastIndexOf=StringPrototype.lastIndexOf;defineProperties(StringPrototype,{lastIndexOf:function lastIndexOf(searchString){return originalLastIndexOf.apply(this,arguments)}},1!==StringPrototype.lastIndexOf.length),(8!==parseInt(ws+"08")||22!==parseInt(ws+"0x16"))&&(parseInt=(origParseInt=parseInt,hexRegex=/^[-+]?0[xX]/,function parseInt(str,radix){var string=trim(String(str)),defaultedRadix=$Number(radix)||(hexRegex.test(string)?16:10);return origParseInt(string,defaultedRadix)}));var origParseInt,hexRegex;1/parseFloat("-0")!=-1/0&&(parseFloat=(origParseFloat=parseFloat,function parseFloat(string){var inputString=trim(String(string)),result=origParseFloat(inputString);return 0===result&&"-"===strSlice(inputString,0,1)?-0:result}));var origParseFloat;if("RangeError: test"!==String(new RangeError("test"))){var errorToStringShim=function toString(){if(null==this)throw new TypeError("can't convert "+this+" to object");var name=this.name;void 0===name?name="Error":"string"!=typeof name&&(name=$String(name));var msg=this.message;return void 0===msg?msg="":"string"!=typeof msg&&(msg=$String(msg)),name?msg?name+": "+msg:name:msg};Error.prototype.toString=errorToStringShim}if(supportsDescriptors){var ensureNonEnumerable=function(obj,prop){if(isEnum(obj,prop)){var desc=Object.getOwnPropertyDescriptor(obj,prop);desc.configurable&&(desc.enumerable=!1,Object.defineProperty(obj,prop,desc))}};ensureNonEnumerable(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),ensureNonEnumerable(Error.prototype,"name")}if("/a/gim"!==String(/a/gim)){var regexToString=function toString(){var str="/"+this.source+"/";return this.global&&(str+="g"),this.ignoreCase&&(str+="i"),this.multiline&&(str+="m"),str};RegExp.prototype.toString=regexToString}})?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2015 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/master/LICENSE
 */!function(root,factory){"use strict";void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){var defineGetter,defineSetter,lookupGetter,lookupSetter,call=Function.call,prototypeOfObject=Object.prototype,owns=call.bind(prototypeOfObject.hasOwnProperty),isEnumerable=call.bind(prototypeOfObject.propertyIsEnumerable),toStr=call.bind(prototypeOfObject.toString),supportsAccessors=owns(prototypeOfObject,"__defineGetter__");supportsAccessors&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__));var isPrimitive=function isPrimitive(o){return null==o||"object"!=typeof o&&"function"!=typeof o};Object.getPrototypeOf||(Object.getPrototypeOf=function getPrototypeOf(object){var proto=object.__proto__;return proto||null===proto?proto:"[object Function]"===toStr(object.constructor)?object.constructor.prototype:object instanceof Object?prototypeOfObject:null});var doesGetOwnPropertyDescriptorWork=function doesGetOwnPropertyDescriptorWork(object){try{return object.sentinel=0,0===Object.getOwnPropertyDescriptor(object,"sentinel").value}catch(exception){return!1}};if(Object.defineProperty){var getOwnPropertyDescriptorWorksOnObject=doesGetOwnPropertyDescriptorWork({});if(!("undefined"==typeof document||doesGetOwnPropertyDescriptorWork(document.createElement("div")))||!getOwnPropertyDescriptorWorksOnObject)var getOwnPropertyDescriptorFallback=Object.getOwnPropertyDescriptor}if(!Object.getOwnPropertyDescriptor||getOwnPropertyDescriptorFallback){Object.getOwnPropertyDescriptor=function getOwnPropertyDescriptor(object,property){if(isPrimitive(object))throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+object);if(getOwnPropertyDescriptorFallback)try{return getOwnPropertyDescriptorFallback.call(Object,object,property)}catch(exception){}var descriptor;if(!owns(object,property))return descriptor;if(descriptor={enumerable:isEnumerable(object,property),configurable:!0},supportsAccessors){var prototype=object.__proto__,notPrototypeOfObject=object!==prototypeOfObject;notPrototypeOfObject&&(object.__proto__=prototypeOfObject);var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(notPrototypeOfObject&&(object.__proto__=prototype),getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor.writable=!0,descriptor}}Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function getOwnPropertyNames(object){return Object.keys(object)});if(!Object.create){var createEmpty,supportsProto=!({__proto__:null}instanceof Object);createEmpty=supportsProto||"undefined"==typeof document?function(){return{__proto__:null}}:function(){var empty=function shouldUseActiveX(){if(!document.domain)return!1;try{return!!new ActiveXObject("htmlfile")}catch(exception){return!1}}()?function getEmptyViaActiveX(){var empty,xDoc;return(xDoc=new ActiveXObject("htmlfile")).write("<script><\/script>"),xDoc.close(),empty=xDoc.parentWindow.Object.prototype,xDoc=null,empty}():function getEmptyViaIFrame(){var empty,iframe=document.createElement("iframe"),parent=document.body||document.documentElement;return iframe.style.display="none",parent.appendChild(iframe),iframe.src="javascript:",empty=iframe.contentWindow.Object.prototype,parent.removeChild(iframe),iframe=null,empty}();delete empty.constructor,delete empty.hasOwnProperty,delete empty.propertyIsEnumerable,delete empty.isPrototypeOf,delete empty.toLocaleString,delete empty.toString,delete empty.valueOf;var Empty=function Empty(){};return Empty.prototype=empty,createEmpty=function(){return new Empty},new Empty},Object.create=function create(prototype,properties){var object,Type=function Type(){};if(null===prototype)object=createEmpty();else{if(null!==prototype&&isPrimitive(prototype))throw new TypeError("Object prototype may only be an Object or null");Type.prototype=prototype,(object=new Type).__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}var doesDefinePropertyWork=function doesDefinePropertyWork(object){try{return Object.defineProperty(object,"sentinel",{}),"sentinel"in object}catch(exception){return!1}};if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom="undefined"==typeof document||doesDefinePropertyWork(document.createElement("div"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty,definePropertiesFallback=Object.defineProperties}if(!Object.defineProperty||definePropertyFallback){Object.defineProperty=function defineProperty(object,property,descriptor){if(isPrimitive(object))throw new TypeError("Object.defineProperty called on non-object: "+object);if(isPrimitive(descriptor))throw new TypeError("Property description must be an object: "+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if("value"in descriptor)if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{var hasGetter="get"in descriptor,hasSetter="set"in descriptor;if(!supportsAccessors&&(hasGetter||hasSetter))throw new TypeError("getters & setters can not be defined on this javascript engine");hasGetter&&defineGetter(object,property,descriptor.get),hasSetter&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties&&!definePropertiesFallback||(Object.defineProperties=function defineProperties(object,properties){if(definePropertiesFallback)try{return definePropertiesFallback.call(Object,object,properties)}catch(exception){}return Object.keys(properties).forEach((function(property){"__proto__"!==property&&Object.defineProperty(object,property,properties[property])})),object});Object.seal||(Object.seal=function seal(object){if(Object(object)!==object)throw new TypeError("Object.seal can only be called on Objects.");return object});Object.freeze||(Object.freeze=function freeze(object){if(Object(object)!==object)throw new TypeError("Object.freeze can only be called on Objects.");return object});try{Object.freeze((function(){}))}catch(exception){Object.freeze=(freezeObject=Object.freeze,function freeze(object){return"function"==typeof object?object:freezeObject(object)})}var freezeObject;Object.preventExtensions||(Object.preventExtensions=function preventExtensions(object){if(Object(object)!==object)throw new TypeError("Object.preventExtensions can only be called on Objects.");return object});Object.isSealed||(Object.isSealed=function isSealed(object){if(Object(object)!==object)throw new TypeError("Object.isSealed can only be called on Objects.");return!1});Object.isFrozen||(Object.isFrozen=function isFrozen(object){if(Object(object)!==object)throw new TypeError("Object.isFrozen can only be called on Objects.");return!1});Object.isExtensible||(Object.isExtensible=function isExtensible(object){if(Object(object)!==object)throw new TypeError("Object.isExtensible can only be called on Objects.");for(var name="";owns(object,name);)name+="?";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue})})?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},function(module,exports,__webpack_require__){"use strict";__webpack_require__(291),__webpack_require__(292)(),__webpack_require__(297)},function(module,exports,__webpack_require__){(function(global,process){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.3/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){"use strict";var ArrayIterator,_apply=Function.call.bind(Function.apply),_call=Function.call.bind(Function.call),isArray=Array.isArray,keys=Object.keys,not=function notThunker(func){return function notThunk(){return!_apply(func,this,arguments)}},throwsError=function(func){try{return func(),!1}catch(e){return!0}},valueOrFalseIfThrows=function valueOrFalseIfThrows(func){try{return func()}catch(e){return!1}},isCallableWithoutNew=not(throwsError),arePropertyDescriptorsSupported=function(){return!throwsError((function(){return Object.defineProperty({},"x",{get:function(){}})}))},supportsDescriptors=!!Object.defineProperty&&arePropertyDescriptorsSupported(),functionsHaveNames="foo"===function foo(){}.name,_forEach=Function.call.bind(Array.prototype.forEach),_reduce=Function.call.bind(Array.prototype.reduce),_filter=Function.call.bind(Array.prototype.filter),_some=Function.call.bind(Array.prototype.some),defineProperty=function(object,name,value,force){!force&&name in object||(supportsDescriptors?Object.defineProperty(object,name,{configurable:!0,enumerable:!1,writable:!0,value:value}):object[name]=value)},defineProperties=function(object,map,forceOverride){_forEach(keys(map),(function(name){var method=map[name];defineProperty(object,name,method,!!forceOverride)}))},_toString=Function.call.bind(Object.prototype.toString),isCallable=function IsCallableFast(x){return"function"==typeof x},Value={getter:function(object,name,getter){if(!supportsDescriptors)throw new TypeError("getters require true ES5 support");Object.defineProperty(object,name,{configurable:!0,enumerable:!1,get:getter})},proxy:function(originalObject,key,targetObject){if(!supportsDescriptors)throw new TypeError("getters require true ES5 support");var originalDescriptor=Object.getOwnPropertyDescriptor(originalObject,key);Object.defineProperty(targetObject,key,{configurable:originalDescriptor.configurable,enumerable:originalDescriptor.enumerable,get:function getKey(){return originalObject[key]},set:function setKey(value){originalObject[key]=value}})},redefine:function(object,property,newValue){if(supportsDescriptors){var descriptor=Object.getOwnPropertyDescriptor(object,property);descriptor.value=newValue,Object.defineProperty(object,property,descriptor)}else object[property]=newValue},defineByDescriptor:function(object,property,descriptor){supportsDescriptors?Object.defineProperty(object,property,descriptor):"value"in descriptor&&(object[property]=descriptor.value)},preserveToString:function(target,source){source&&isCallable(source.toString)&&defineProperty(target,"toString",source.toString.bind(source),!0)}},create=Object.create||function(prototype,properties){var Prototype=function Prototype(){};Prototype.prototype=prototype;var object=new Prototype;return void 0!==properties&&keys(properties).forEach((function(key){Value.defineByDescriptor(object,key,properties[key])})),object},supportsSubclassing=function(C,f){return!!Object.setPrototypeOf&&valueOrFalseIfThrows((function(){var Sub=function Subclass(arg){var o=new C(arg);return Object.setPrototypeOf(o,Subclass.prototype),o};return Object.setPrototypeOf(Sub,C),Sub.prototype=create(C.prototype,{constructor:{value:Sub}}),f(Sub)}))},getGlobal=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==global)return global;throw new Error("unable to locate global object")},globals=getGlobal(),globalIsFinite=globals.isFinite,_indexOf=Function.call.bind(String.prototype.indexOf),_arrayIndexOfApply=Function.apply.bind(Array.prototype.indexOf),_concat=Function.call.bind(Array.prototype.concat),_strSlice=Function.call.bind(String.prototype.slice),_push=Function.call.bind(Array.prototype.push),_pushApply=Function.apply.bind(Array.prototype.push),_shift=Function.call.bind(Array.prototype.shift),_max=Math.max,_min=Math.min,_floor=Math.floor,_abs=Math.abs,_exp=Math.exp,_log=Math.log,_sqrt=Math.sqrt,_hasOwnProperty=Function.call.bind(Object.prototype.hasOwnProperty),noop=function(){},OrigMap=globals.Map,origMapDelete=OrigMap&&OrigMap.prototype.delete,origMapGet=OrigMap&&OrigMap.prototype.get,origMapHas=OrigMap&&OrigMap.prototype.has,origMapSet=OrigMap&&OrigMap.prototype.set,Symbol=globals.Symbol||{},symbolSpecies=Symbol.species||"@@species",numberIsNaN=Number.isNaN||function isNaN(value){return value!=value},numberIsFinite=Number.isFinite||function isFinite(value){return"number"==typeof value&&globalIsFinite(value)},_sign=isCallable(Math.sign)?Math.sign:function sign(value){var number=Number(value);return 0===number?number:numberIsNaN(number)?number:number<0?-1:1},_log1p=function log1p(value){var x=Number(value);return x<-1||numberIsNaN(x)?NaN:0===x||x===1/0?x:-1===x?-1/0:1+x-1==0?x:x*(_log(1+x)/(1+x-1))},isStandardArguments=function isArguments(value){return"[object Arguments]"===_toString(value)},isLegacyArguments=function isArguments(value){return null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&"[object Array]"!==_toString(value)&&"[object Function]"===_toString(value.callee)},isArguments=isStandardArguments(arguments)?isStandardArguments:isLegacyArguments,Type={primitive:function(x){return null===x||"function"!=typeof x&&"object"!=typeof x},string:function(x){return"[object String]"===_toString(x)},regex:function(x){return"[object RegExp]"===_toString(x)},symbol:function(x){return"function"==typeof globals.Symbol&&"symbol"==typeof x}},overrideNative=function overrideNative(object,property,replacement){var original=object[property];defineProperty(object,property,replacement,!0),Value.preserveToString(object[property],original)},hasSymbols="function"==typeof Symbol&&"function"==typeof Symbol.for&&Type.symbol(Symbol()),$iterator$=Type.symbol(Symbol.iterator)?Symbol.iterator:"_es6-shim iterator_";globals.Set&&"function"==typeof(new globals.Set)["@@iterator"]&&($iterator$="@@iterator"),globals.Reflect||defineProperty(globals,"Reflect",{},!0);var o,Reflect=globals.Reflect,$String=String,domAll="undefined"!=typeof document&&document?document.all:null,isNullOrUndefined=null==domAll?function isNullOrUndefined(x){return null==x}:function isNullOrUndefinedAndNotDocumentAll(x){return null==x&&x!==domAll},ES={Call:function Call(F,V){var args=arguments.length>2?arguments[2]:[];if(!ES.IsCallable(F))throw new TypeError(F+" is not a function");return _apply(F,V,args)},RequireObjectCoercible:function(x,optMessage){if(isNullOrUndefined(x))throw new TypeError(optMessage||"Cannot call method on "+x);return x},TypeIsObject:function(x){return null!=x&&!0!==x&&!1!==x&&("function"==typeof x||"object"==typeof x||x===domAll)},ToObject:function(o,optMessage){return Object(ES.RequireObjectCoercible(o,optMessage))},IsCallable:isCallable,IsConstructor:function(x){return ES.IsCallable(x)},ToInt32:function(x){return ES.ToNumber(x)>>0},ToUint32:function(x){return ES.ToNumber(x)>>>0},ToNumber:function(value){if("[object Symbol]"===_toString(value))throw new TypeError("Cannot convert a Symbol value to a number");return+value},ToInteger:function(value){var number=ES.ToNumber(value);return numberIsNaN(number)?0:0!==number&&numberIsFinite(number)?(number>0?1:-1)*_floor(_abs(number)):number},ToLength:function(value){var len=ES.ToInteger(value);return len<=0?0:len>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:len},SameValue:function(a,b){return a===b?0!==a||1/a==1/b:numberIsNaN(a)&&numberIsNaN(b)},SameValueZero:function(a,b){return a===b||numberIsNaN(a)&&numberIsNaN(b)},IsIterable:function(o){return ES.TypeIsObject(o)&&(void 0!==o[$iterator$]||isArguments(o))},GetIterator:function(o){if(isArguments(o))return new ArrayIterator(o,"value");var itFn=ES.GetMethod(o,$iterator$);if(!ES.IsCallable(itFn))throw new TypeError("value is not an iterable");var it=ES.Call(itFn,o);if(!ES.TypeIsObject(it))throw new TypeError("bad iterator");return it},GetMethod:function(o,p){var func=ES.ToObject(o)[p];if(!isNullOrUndefined(func)){if(!ES.IsCallable(func))throw new TypeError("Method not callable: "+p);return func}},IteratorComplete:function(iterResult){return!!iterResult.done},IteratorClose:function(iterator,completionIsThrow){var returnMethod=ES.GetMethod(iterator,"return");if(void 0!==returnMethod){var innerResult,innerException;try{innerResult=ES.Call(returnMethod,iterator)}catch(e){innerException=e}if(!completionIsThrow){if(innerException)throw innerException;if(!ES.TypeIsObject(innerResult))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(it){var result=arguments.length>1?it.next(arguments[1]):it.next();if(!ES.TypeIsObject(result))throw new TypeError("bad iterator");return result},IteratorStep:function(it){var result=ES.IteratorNext(it);return!ES.IteratorComplete(result)&&result},Construct:function(C,args,newTarget,isES6internal){var target=void 0===newTarget?C:newTarget;if(!isES6internal&&Reflect.construct)return Reflect.construct(C,args,target);var proto=target.prototype;ES.TypeIsObject(proto)||(proto=Object.prototype);var obj=create(proto),result=ES.Call(C,obj,args);return ES.TypeIsObject(result)?result:obj},SpeciesConstructor:function(O,defaultConstructor){var C=O.constructor;if(void 0===C)return defaultConstructor;if(!ES.TypeIsObject(C))throw new TypeError("Bad constructor");var S=C[symbolSpecies];if(isNullOrUndefined(S))return defaultConstructor;if(!ES.IsConstructor(S))throw new TypeError("Bad @@species");return S},CreateHTML:function(string,tag,attribute,value){var S=ES.ToString(string),p1="<"+tag;return""!==attribute&&(p1+=" "+attribute+'="'+ES.ToString(value).replace(/"/g,"&quot;")+'"'),p1+">"+S+"</"+tag+">"},IsRegExp:function IsRegExp(argument){if(!ES.TypeIsObject(argument))return!1;var isRegExp=argument[Symbol.match];return void 0!==isRegExp?!!isRegExp:Type.regex(argument)},ToString:function ToString(string){return $String(string)}};if(supportsDescriptors&&hasSymbols){var defineWellKnownSymbol=function defineWellKnownSymbol(name){if(Type.symbol(Symbol[name]))return Symbol[name];var sym=Symbol.for("Symbol."+name);return Object.defineProperty(Symbol,name,{configurable:!1,enumerable:!1,writable:!1,value:sym}),sym};if(!Type.symbol(Symbol.search)){var symbolSearch=defineWellKnownSymbol("search"),originalSearch=String.prototype.search;defineProperty(RegExp.prototype,symbolSearch,(function search(string){return ES.Call(originalSearch,string,[this])}));var searchShim=function search(regexp){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(regexp)){var searcher=ES.GetMethod(regexp,symbolSearch);if(void 0!==searcher)return ES.Call(searcher,regexp,[O])}return ES.Call(originalSearch,O,[ES.ToString(regexp)])};overrideNative(String.prototype,"search",searchShim)}if(!Type.symbol(Symbol.replace)){var symbolReplace=defineWellKnownSymbol("replace"),originalReplace=String.prototype.replace;defineProperty(RegExp.prototype,symbolReplace,(function replace(string,replaceValue){return ES.Call(originalReplace,string,[this,replaceValue])}));var replaceShim=function replace(searchValue,replaceValue){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(searchValue)){var replacer=ES.GetMethod(searchValue,symbolReplace);if(void 0!==replacer)return ES.Call(replacer,searchValue,[O,replaceValue])}return ES.Call(originalReplace,O,[ES.ToString(searchValue),replaceValue])};overrideNative(String.prototype,"replace",replaceShim)}if(!Type.symbol(Symbol.split)){var symbolSplit=defineWellKnownSymbol("split"),originalSplit=String.prototype.split;defineProperty(RegExp.prototype,symbolSplit,(function split(string,limit){return ES.Call(originalSplit,string,[this,limit])}));var splitShim=function split(separator,limit){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(separator)){var splitter=ES.GetMethod(separator,symbolSplit);if(void 0!==splitter)return ES.Call(splitter,separator,[O,limit])}return ES.Call(originalSplit,O,[ES.ToString(separator),limit])};overrideNative(String.prototype,"split",splitShim)}var symbolMatchExists=Type.symbol(Symbol.match),stringMatchIgnoresSymbolMatch=symbolMatchExists&&((o={})[Symbol.match]=function(){return 42},42!=="a".match(o));if(!symbolMatchExists||stringMatchIgnoresSymbolMatch){var symbolMatch=defineWellKnownSymbol("match"),originalMatch=String.prototype.match;defineProperty(RegExp.prototype,symbolMatch,(function match(string){return ES.Call(originalMatch,string,[this])}));var matchShim=function match(regexp){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(regexp)){var matcher=ES.GetMethod(regexp,symbolMatch);if(void 0!==matcher)return ES.Call(matcher,regexp,[O])}return ES.Call(originalMatch,O,[ES.ToString(regexp)])};overrideNative(String.prototype,"match",matchShim)}}var wrapConstructor=function wrapConstructor(original,replacement,keysToSkip){Value.preserveToString(replacement,original),Object.setPrototypeOf&&Object.setPrototypeOf(original,replacement),supportsDescriptors?_forEach(Object.getOwnPropertyNames(original),(function(key){key in noop||keysToSkip[key]||Value.proxy(original,key,replacement)})):_forEach(Object.keys(original),(function(key){key in noop||keysToSkip[key]||(replacement[key]=original[key])})),replacement.prototype=original.prototype,Value.redefine(original.prototype,"constructor",replacement)},defaultSpeciesGetter=function(){return this},addDefaultSpecies=function(C){supportsDescriptors&&!_hasOwnProperty(C,symbolSpecies)&&Value.getter(C,symbolSpecies,defaultSpeciesGetter)},addIterator=function(prototype,impl){var implementation=impl||function iterator(){return this};defineProperty(prototype,$iterator$,implementation),!prototype[$iterator$]&&Type.symbol($iterator$)&&(prototype[$iterator$]=implementation)},createDataProperty=function createDataProperty(object,name,value){supportsDescriptors?Object.defineProperty(object,name,{configurable:!0,enumerable:!0,writable:!0,value:value}):object[name]=value},createDataPropertyOrThrow=function createDataPropertyOrThrow(object,name,value){if(createDataProperty(object,name,value),!ES.SameValue(object[name],value))throw new TypeError("property is nonconfigurable")},emulateES6construct=function(o,defaultNewTarget,defaultProto,slots){if(!ES.TypeIsObject(o))throw new TypeError("Constructor requires `new`: "+defaultNewTarget.name);var proto=defaultNewTarget.prototype;ES.TypeIsObject(proto)||(proto=defaultProto);var obj=create(proto);for(var name in slots)if(_hasOwnProperty(slots,name)){var value=slots[name];defineProperty(obj,name,value,!0)}return obj};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var originalFromCodePoint=String.fromCodePoint;overrideNative(String,"fromCodePoint",(function fromCodePoint(codePoints){return ES.Call(originalFromCodePoint,this,arguments)}))}var StringShims={fromCodePoint:function fromCodePoint(codePoints){for(var next,result=[],i=0,length=arguments.length;i<length;i++){if(next=Number(arguments[i]),!ES.SameValue(next,ES.ToInteger(next))||next<0||next>1114111)throw new RangeError("Invalid code point "+next);next<65536?_push(result,String.fromCharCode(next)):(next-=65536,_push(result,String.fromCharCode(55296+(next>>10))),_push(result,String.fromCharCode(next%1024+56320)))}return result.join("")},raw:function raw(callSite){var cooked=ES.ToObject(callSite,"bad callSite"),rawString=ES.ToObject(cooked.raw,"bad raw value"),len=rawString.length,literalsegments=ES.ToLength(len);if(literalsegments<=0)return"";for(var nextKey,next,nextSeg,nextSub,stringElements=[],nextIndex=0;nextIndex<literalsegments&&(nextKey=ES.ToString(nextIndex),nextSeg=ES.ToString(rawString[nextKey]),_push(stringElements,nextSeg),!(nextIndex+1>=literalsegments));)next=nextIndex+1<arguments.length?arguments[nextIndex+1]:"",nextSub=ES.ToString(next),_push(stringElements,nextSub),nextIndex+=1;return stringElements.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&overrideNative(String,"raw",StringShims.raw),defineProperties(String,StringShims);var stringRepeat=function repeat(s,times){if(times<1)return"";if(times%2)return repeat(s,times-1)+s;var half=repeat(s,times/2);return half+half},stringMaxLength=1/0,StringPrototypeShims={repeat:function repeat(times){var thisStr=ES.ToString(ES.RequireObjectCoercible(this)),numTimes=ES.ToInteger(times);if(numTimes<0||numTimes>=stringMaxLength)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return stringRepeat(thisStr,numTimes)},startsWith:function startsWith(searchString){var S=ES.ToString(ES.RequireObjectCoercible(this));if(ES.IsRegExp(searchString))throw new TypeError('Cannot call method "startsWith" with a regex');var position,searchStr=ES.ToString(searchString);arguments.length>1&&(position=arguments[1]);var start=_max(ES.ToInteger(position),0);return _strSlice(S,start,start+searchStr.length)===searchStr},endsWith:function endsWith(searchString){var S=ES.ToString(ES.RequireObjectCoercible(this));if(ES.IsRegExp(searchString))throw new TypeError('Cannot call method "endsWith" with a regex');var endPosition,searchStr=ES.ToString(searchString),len=S.length;arguments.length>1&&(endPosition=arguments[1]);var pos=void 0===endPosition?len:ES.ToInteger(endPosition),end=_min(_max(pos,0),len);return _strSlice(S,end-searchStr.length,end)===searchStr},includes:function includes(searchString){if(ES.IsRegExp(searchString))throw new TypeError('"includes" does not accept a RegExp');var position,searchStr=ES.ToString(searchString);return arguments.length>1&&(position=arguments[1]),-1!==_indexOf(this,searchStr,position)},codePointAt:function codePointAt(pos){var thisStr=ES.ToString(ES.RequireObjectCoercible(this)),position=ES.ToInteger(pos),length=thisStr.length;if(position>=0&&position<length){var first=thisStr.charCodeAt(position);if(first<55296||first>56319||position+1===length)return first;var second=thisStr.charCodeAt(position+1);return second<56320||second>57343?first:1024*(first-55296)+(second-56320)+65536}}};if(String.prototype.includes&&!1!=="a".includes("a",1/0)&&overrideNative(String.prototype,"includes",StringPrototypeShims.includes),String.prototype.startsWith&&String.prototype.endsWith){var startsWithRejectsRegex=throwsError((function(){return"/a/".startsWith(/a/)})),startsWithHandlesInfinity=valueOrFalseIfThrows((function(){return!1==="abc".startsWith("a",1/0)}));startsWithRejectsRegex&&startsWithHandlesInfinity||(overrideNative(String.prototype,"startsWith",StringPrototypeShims.startsWith),overrideNative(String.prototype,"endsWith",StringPrototypeShims.endsWith))}if(hasSymbols){var startsWithSupportsSymbolMatch=valueOrFalseIfThrows((function(){var re=/a/;return re[Symbol.match]=!1,"/a/".startsWith(re)}));startsWithSupportsSymbolMatch||overrideNative(String.prototype,"startsWith",StringPrototypeShims.startsWith);var endsWithSupportsSymbolMatch=valueOrFalseIfThrows((function(){var re=/a/;return re[Symbol.match]=!1,"/a/".endsWith(re)}));endsWithSupportsSymbolMatch||overrideNative(String.prototype,"endsWith",StringPrototypeShims.endsWith);var includesSupportsSymbolMatch=valueOrFalseIfThrows((function(){var re=/a/;return re[Symbol.match]=!1,"/a/".includes(re)}));includesSupportsSymbolMatch||overrideNative(String.prototype,"includes",StringPrototypeShims.includes)}defineProperties(String.prototype,StringPrototypeShims);var ws=["\t\n\v\f\r   ᠎    ","         　\u2028","\u2029\ufeff"].join(""),trimRegexp=new RegExp("(^["+ws+"]+)|(["+ws+"]+$)","g"),trimShim=function trim(){return ES.ToString(ES.RequireObjectCoercible(this)).replace(trimRegexp,"")},nonWS=["","​","￾"].join(""),nonWSregex=new RegExp("["+nonWS+"]","g"),isBadHexRegex=/^[-+]0x[0-9a-f]+$/i,hasStringTrimBug=nonWS.trim().length!==nonWS.length;defineProperty(String.prototype,"trim",trimShim,hasStringTrimBug);var iteratorResult=function(x){return{value:x,done:0===arguments.length}},StringIterator=function(s){ES.RequireObjectCoercible(s),this._s=ES.ToString(s),this._i=0};StringIterator.prototype.next=function(){var s=this._s,i=this._i;if(void 0===s||i>=s.length)return this._s=void 0,iteratorResult();var second,len,first=s.charCodeAt(i);return len=first<55296||first>56319||i+1===s.length?1:(second=s.charCodeAt(i+1))<56320||second>57343?1:2,this._i=i+len,iteratorResult(s.substr(i,len))},addIterator(StringIterator.prototype),addIterator(String.prototype,(function(){return new StringIterator(this)}));var ArrayShims={from:function from(items){var mapFn,mapping,T,C=this;if(arguments.length>1&&(mapFn=arguments[1]),void 0===mapFn)mapping=!1;else{if(!ES.IsCallable(mapFn))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(T=arguments[2]),mapping=!0}var length,result,i,usingIterator=void 0!==(isArguments(items)||ES.GetMethod(items,$iterator$));if(usingIterator){result=ES.IsConstructor(C)?Object(new C):[];var next,nextValue,iterator=ES.GetIterator(items);for(i=0;!1!==(next=ES.IteratorStep(iterator));){nextValue=next.value;try{mapping&&(nextValue=void 0===T?mapFn(nextValue,i):_call(mapFn,T,nextValue,i)),result[i]=nextValue}catch(e){throw ES.IteratorClose(iterator,!0),e}i+=1}length=i}else{var value,arrayLike=ES.ToObject(items);for(length=ES.ToLength(arrayLike.length),result=ES.IsConstructor(C)?Object(new C(length)):new Array(length),i=0;i<length;++i)value=arrayLike[i],mapping&&(value=void 0===T?mapFn(value,i):_call(mapFn,T,value,i)),createDataPropertyOrThrow(result,i,value)}return result.length=length,result},of:function of(){for(var len=arguments.length,C=this,A=isArray(C)||!ES.IsCallable(C)?new Array(len):ES.Construct(C,[len]),k=0;k<len;++k)createDataPropertyOrThrow(A,k,arguments[k]);return A.length=len,A}};defineProperties(Array,ArrayShims),addDefaultSpecies(Array),defineProperties((ArrayIterator=function(array,kind){this.i=0,this.array=array,this.kind=kind}).prototype,{next:function(){var i=this.i,array=this.array;if(!(this instanceof ArrayIterator))throw new TypeError("Not an ArrayIterator");if(void 0!==array)for(var len=ES.ToLength(array.length);i<len;i++){var retval,kind=this.kind;return"key"===kind?retval=i:"value"===kind?retval=array[i]:"entry"===kind&&(retval=[i,array[i]]),this.i=i+1,iteratorResult(retval)}return this.array=void 0,iteratorResult()}}),addIterator(ArrayIterator.prototype);var arrayOfSupportsSubclassing=Array.of===ArrayShims.of||function(){var Foo=function Foo(len){this.length=len};Foo.prototype=[];var fooArr=Array.of.apply(Foo,[1,2]);return fooArr instanceof Foo&&2===fooArr.length}();arrayOfSupportsSubclassing||overrideNative(Array,"of",ArrayShims.of);var ArrayPrototypeShims={copyWithin:function copyWithin(target,start){var end,o=ES.ToObject(this),len=ES.ToLength(o.length),relativeTarget=ES.ToInteger(target),relativeStart=ES.ToInteger(start),to=relativeTarget<0?_max(len+relativeTarget,0):_min(relativeTarget,len),from=relativeStart<0?_max(len+relativeStart,0):_min(relativeStart,len);arguments.length>2&&(end=arguments[2]);var relativeEnd=void 0===end?len:ES.ToInteger(end),finalItem=relativeEnd<0?_max(len+relativeEnd,0):_min(relativeEnd,len),count=_min(finalItem-from,len-to),direction=1;for(from<to&&to<from+count&&(direction=-1,from+=count-1,to+=count-1);count>0;)from in o?o[to]=o[from]:delete o[to],from+=direction,to+=direction,count-=1;return o},fill:function fill(value){var start,end;arguments.length>1&&(start=arguments[1]),arguments.length>2&&(end=arguments[2]);var O=ES.ToObject(this),len=ES.ToLength(O.length);start=ES.ToInteger(void 0===start?0:start),end=ES.ToInteger(void 0===end?len:end);for(var relativeStart=start<0?_max(len+start,0):_min(start,len),relativeEnd=end<0?len+end:end,i=relativeStart;i<len&&i<relativeEnd;++i)O[i]=value;return O},find:function find(predicate){var list=ES.ToObject(this),length=ES.ToLength(list.length);if(!ES.IsCallable(predicate))throw new TypeError("Array#find: predicate must be a function");for(var value,thisArg=arguments.length>1?arguments[1]:null,i=0;i<length;i++)if(value=list[i],thisArg){if(_call(predicate,thisArg,value,i,list))return value}else if(predicate(value,i,list))return value},findIndex:function findIndex(predicate){var list=ES.ToObject(this),length=ES.ToLength(list.length);if(!ES.IsCallable(predicate))throw new TypeError("Array#findIndex: predicate must be a function");for(var thisArg=arguments.length>1?arguments[1]:null,i=0;i<length;i++)if(thisArg){if(_call(predicate,thisArg,list[i],i,list))return i}else if(predicate(list[i],i,list))return i;return-1},keys:function keys(){return new ArrayIterator(this,"key")},values:function values(){return new ArrayIterator(this,"value")},entries:function entries(){return new ArrayIterator(this,"entry")}};if(Array.prototype.keys&&!ES.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!ES.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[$iterator$]&&(defineProperties(Array.prototype,{values:Array.prototype[$iterator$]}),Type.symbol(Symbol.unscopables)&&(Array.prototype[Symbol.unscopables].values=!0)),functionsHaveNames&&Array.prototype.values&&"values"!==Array.prototype.values.name){var originalArrayPrototypeValues=Array.prototype.values;overrideNative(Array.prototype,"values",(function values(){return ES.Call(originalArrayPrototypeValues,this,arguments)})),defineProperty(Array.prototype,$iterator$,Array.prototype.values,!0)}defineProperties(Array.prototype,ArrayPrototypeShims),1/[!0].indexOf(!0,-0)<0&&defineProperty(Array.prototype,"indexOf",(function indexOf(searchElement){var value=_arrayIndexOfApply(this,arguments);return 0===value&&1/value<0?0:value}),!0),addIterator(Array.prototype,(function(){return this.values()})),Object.getPrototypeOf&&addIterator(Object.getPrototypeOf([].values()));var arr,arrayFromSwallowsNegativeLengths=valueOrFalseIfThrows((function(){return 0===Array.from({length:-1}).length})),arrayFromHandlesIterables=1===(arr=Array.from([0].entries())).length&&isArray(arr[0])&&0===arr[0][0]&&0===arr[0][1];arrayFromSwallowsNegativeLengths&&arrayFromHandlesIterables||overrideNative(Array,"from",ArrayShims.from);var arrayFromHandlesUndefinedMapFunction=valueOrFalseIfThrows((function(){return Array.from([0],void 0)}));if(!arrayFromHandlesUndefinedMapFunction){var origArrayFrom=Array.from;overrideNative(Array,"from",(function from(items){return arguments.length>1&&void 0!==arguments[1]?ES.Call(origArrayFrom,this,arguments):_call(origArrayFrom,this,items)}))}var int32sAsOne=-(Math.pow(2,32)-1),toLengthsCorrectly=function(method,reversed){var obj={length:int32sAsOne};return obj[reversed?(obj.length>>>0)-1:0]=!0,valueOrFalseIfThrows((function(){return _call(method,obj,(function(){throw new RangeError("should not reach here")}),[]),!0}))};if(!toLengthsCorrectly(Array.prototype.forEach)){var originalForEach=Array.prototype.forEach;overrideNative(Array.prototype,"forEach",(function forEach(callbackFn){return ES.Call(originalForEach,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.map)){var originalMap=Array.prototype.map;overrideNative(Array.prototype,"map",(function map(callbackFn){return ES.Call(originalMap,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.filter)){var originalFilter=Array.prototype.filter;overrideNative(Array.prototype,"filter",(function filter(callbackFn){return ES.Call(originalFilter,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.some)){var originalSome=Array.prototype.some;overrideNative(Array.prototype,"some",(function some(callbackFn){return ES.Call(originalSome,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.every)){var originalEvery=Array.prototype.every;overrideNative(Array.prototype,"every",(function every(callbackFn){return ES.Call(originalEvery,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.reduce)){var originalReduce=Array.prototype.reduce;overrideNative(Array.prototype,"reduce",(function reduce(callbackFn){return ES.Call(originalReduce,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.reduceRight,!0)){var originalReduceRight=Array.prototype.reduceRight;overrideNative(Array.prototype,"reduceRight",(function reduceRight(callbackFn){return ES.Call(originalReduceRight,this.length>=0?this:[],arguments)}),!0)}var lacksOctalSupport=8!==Number("0o10"),lacksBinarySupport=2!==Number("0b10"),trimsNonWhitespace=_some(nonWS,(function(c){return 0===Number(c+0+c)}));if(lacksOctalSupport||lacksBinarySupport||trimsNonWhitespace){var OrigNumber=Number,binaryRegex=/^0b[01]+$/i,octalRegex=/^0o[0-7]+$/i,isBinary=binaryRegex.test.bind(binaryRegex),isOctal=octalRegex.test.bind(octalRegex),toPrimitive=function(O){var result;if("function"==typeof O.valueOf&&(result=O.valueOf(),Type.primitive(result)))return result;if("function"==typeof O.toString&&(result=O.toString(),Type.primitive(result)))return result;throw new TypeError("No default value")},hasNonWS=nonWSregex.test.bind(nonWSregex),isBadHex=isBadHexRegex.test.bind(isBadHexRegex),NumberShim=function(){var NumberShim=function Number(value){var primValue;"string"==typeof(primValue=arguments.length>0?Type.primitive(value)?value:toPrimitive(value,"number"):0)&&(primValue=ES.Call(trimShim,primValue),isBinary(primValue)?primValue=parseInt(_strSlice(primValue,2),2):isOctal(primValue)?primValue=parseInt(_strSlice(primValue,2),8):(hasNonWS(primValue)||isBadHex(primValue))&&(primValue=NaN));var receiver=this,valueOfSucceeds=valueOrFalseIfThrows((function(){return OrigNumber.prototype.valueOf.call(receiver),!0}));return receiver instanceof NumberShim&&!valueOfSucceeds?new OrigNumber(primValue):OrigNumber(primValue)};return NumberShim}();wrapConstructor(OrigNumber,NumberShim,{}),defineProperties(NumberShim,{NaN:OrigNumber.NaN,MAX_VALUE:OrigNumber.MAX_VALUE,MIN_VALUE:OrigNumber.MIN_VALUE,NEGATIVE_INFINITY:OrigNumber.NEGATIVE_INFINITY,POSITIVE_INFINITY:OrigNumber.POSITIVE_INFINITY}),Number=NumberShim,Value.redefine(globals,"Number",NumberShim)}var maxSafeInteger=Math.pow(2,53)-1;defineProperties(Number,{MAX_SAFE_INTEGER:maxSafeInteger,MIN_SAFE_INTEGER:-maxSafeInteger,EPSILON:2220446049250313e-31,parseInt:globals.parseInt,parseFloat:globals.parseFloat,isFinite:numberIsFinite,isInteger:function isInteger(value){return numberIsFinite(value)&&ES.ToInteger(value)===value},isSafeInteger:function isSafeInteger(value){return Number.isInteger(value)&&_abs(value)<=Number.MAX_SAFE_INTEGER},isNaN:numberIsNaN}),defineProperty(Number,"parseInt",globals.parseInt,Number.parseInt!==globals.parseInt),1===[,1].find((function(){return!0}))&&overrideNative(Array.prototype,"find",ArrayPrototypeShims.find),0!==[,1].findIndex((function(){return!0}))&&overrideNative(Array.prototype,"findIndex",ArrayPrototypeShims.findIndex);var FAKENULL,gpo,spo,isEnumerableOn=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),ensureEnumerable=function ensureEnumerable(obj,prop){supportsDescriptors&&isEnumerableOn(obj,prop)&&Object.defineProperty(obj,prop,{enumerable:!1})},sliceArgs=function sliceArgs(){for(var initial=Number(this),len=arguments.length,desiredArgCount=len-initial,args=new Array(desiredArgCount<0?0:desiredArgCount),i=initial;i<len;++i)args[i-initial]=arguments[i];return args},assignTo=function assignTo(source){return function assignToSource(target,key){return target[key]=source[key],target}},assignReducer=function(target,source){var symbols,sourceKeys=keys(Object(source));return ES.IsCallable(Object.getOwnPropertySymbols)&&(symbols=_filter(Object.getOwnPropertySymbols(Object(source)),isEnumerableOn(source))),_reduce(_concat(sourceKeys,symbols||[]),assignTo(source),target)},ObjectShims={assign:function(target,source){var to=ES.ToObject(target,"Cannot convert undefined or null to object");return _reduce(ES.Call(sliceArgs,1,arguments),assignReducer,to)},is:function is(a,b){return ES.SameValue(a,b)}},assignHasPendingExceptions=Object.assign&&Object.preventExtensions&&function(){var thrower=Object.preventExtensions({1:2});try{Object.assign(thrower,"xy")}catch(e){return"y"===thrower[1]}}();if(assignHasPendingExceptions&&overrideNative(Object,"assign",ObjectShims.assign),defineProperties(Object,ObjectShims),supportsDescriptors){var ES5ObjectShims={setPrototypeOf:function(Object,magic){var set,setPrototypeOf=function(O,proto){return function(O,proto){if(!ES.TypeIsObject(O))throw new TypeError("cannot set prototype on a non-object");if(null!==proto&&!ES.TypeIsObject(proto))throw new TypeError("can only set prototype to an object or null"+proto)}(O,proto),_call(set,O,proto),O};try{set=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,_call(set,{},null)}catch(e){if(Object.prototype!=={}.__proto__)return;set=function(proto){this.__proto__=proto},setPrototypeOf.polyfill=setPrototypeOf(setPrototypeOf({},null),Object.prototype)instanceof Object}return setPrototypeOf}(Object)};defineProperties(Object,ES5ObjectShims)}Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&(FAKENULL=Object.create(null),gpo=Object.getPrototypeOf,spo=Object.setPrototypeOf,Object.getPrototypeOf=function(o){var result=gpo(o);return result===FAKENULL?null:result},Object.setPrototypeOf=function(o,p){return spo(o,null===p?FAKENULL:p)},Object.setPrototypeOf.polyfill=!1);var objectKeysAcceptsPrimitives=!throwsError((function(){return Object.keys("foo")}));if(!objectKeysAcceptsPrimitives){var originalObjectKeys=Object.keys;overrideNative(Object,"keys",(function keys(value){return originalObjectKeys(ES.ToObject(value))})),keys=Object.keys}var objectKeysRejectsRegex=throwsError((function(){return Object.keys(/a/g)}));if(objectKeysRejectsRegex){var regexRejectingObjectKeys=Object.keys;overrideNative(Object,"keys",(function keys(value){if(Type.regex(value)){var regexKeys=[];for(var k in value)_hasOwnProperty(value,k)&&_push(regexKeys,k);return regexKeys}return regexRejectingObjectKeys(value)})),keys=Object.keys}if(Object.getOwnPropertyNames){var objectGOPNAcceptsPrimitives=!throwsError((function(){return Object.getOwnPropertyNames("foo")}));if(!objectGOPNAcceptsPrimitives){var cachedWindowNames="object"==typeof window?Object.getOwnPropertyNames(window):[],originalObjectGetOwnPropertyNames=Object.getOwnPropertyNames;overrideNative(Object,"getOwnPropertyNames",(function getOwnPropertyNames(value){var val=ES.ToObject(value);if("[object Window]"===_toString(val))try{return originalObjectGetOwnPropertyNames(val)}catch(e){return _concat([],cachedWindowNames)}return originalObjectGetOwnPropertyNames(val)}))}}if(Object.getOwnPropertyDescriptor){var objectGOPDAcceptsPrimitives=!throwsError((function(){return Object.getOwnPropertyDescriptor("foo","bar")}));if(!objectGOPDAcceptsPrimitives){var originalObjectGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;overrideNative(Object,"getOwnPropertyDescriptor",(function getOwnPropertyDescriptor(value,property){return originalObjectGetOwnPropertyDescriptor(ES.ToObject(value),property)}))}}if(Object.seal){var objectSealAcceptsPrimitives=!throwsError((function(){return Object.seal("foo")}));if(!objectSealAcceptsPrimitives){var originalObjectSeal=Object.seal;overrideNative(Object,"seal",(function seal(value){return ES.TypeIsObject(value)?originalObjectSeal(value):value}))}}if(Object.isSealed){var objectIsSealedAcceptsPrimitives=!throwsError((function(){return Object.isSealed("foo")}));if(!objectIsSealedAcceptsPrimitives){var originalObjectIsSealed=Object.isSealed;overrideNative(Object,"isSealed",(function isSealed(value){return!ES.TypeIsObject(value)||originalObjectIsSealed(value)}))}}if(Object.freeze){var objectFreezeAcceptsPrimitives=!throwsError((function(){return Object.freeze("foo")}));if(!objectFreezeAcceptsPrimitives){var originalObjectFreeze=Object.freeze;overrideNative(Object,"freeze",(function freeze(value){return ES.TypeIsObject(value)?originalObjectFreeze(value):value}))}}if(Object.isFrozen){var objectIsFrozenAcceptsPrimitives=!throwsError((function(){return Object.isFrozen("foo")}));if(!objectIsFrozenAcceptsPrimitives){var originalObjectIsFrozen=Object.isFrozen;overrideNative(Object,"isFrozen",(function isFrozen(value){return!ES.TypeIsObject(value)||originalObjectIsFrozen(value)}))}}if(Object.preventExtensions){var objectPreventExtensionsAcceptsPrimitives=!throwsError((function(){return Object.preventExtensions("foo")}));if(!objectPreventExtensionsAcceptsPrimitives){var originalObjectPreventExtensions=Object.preventExtensions;overrideNative(Object,"preventExtensions",(function preventExtensions(value){return ES.TypeIsObject(value)?originalObjectPreventExtensions(value):value}))}}if(Object.isExtensible){var objectIsExtensibleAcceptsPrimitives=!throwsError((function(){return Object.isExtensible("foo")}));if(!objectIsExtensibleAcceptsPrimitives){var originalObjectIsExtensible=Object.isExtensible;overrideNative(Object,"isExtensible",(function isExtensible(value){return!!ES.TypeIsObject(value)&&originalObjectIsExtensible(value)}))}}if(Object.getPrototypeOf){var objectGetProtoAcceptsPrimitives=!throwsError((function(){return Object.getPrototypeOf("foo")}));if(!objectGetProtoAcceptsPrimitives){var originalGetProto=Object.getPrototypeOf;overrideNative(Object,"getPrototypeOf",(function getPrototypeOf(value){return originalGetProto(ES.ToObject(value))}))}}var desc,hasFlags=supportsDescriptors&&((desc=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags"))&&ES.IsCallable(desc.get));if(supportsDescriptors&&!hasFlags){var regExpFlagsGetter=function flags(){if(!ES.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var result="";return this.global&&(result+="g"),this.ignoreCase&&(result+="i"),this.multiline&&(result+="m"),this.unicode&&(result+="u"),this.sticky&&(result+="y"),result};Value.getter(RegExp.prototype,"flags",regExpFlagsGetter)}var regex,regExpSupportsFlagsWithRegex=supportsDescriptors&&valueOrFalseIfThrows((function(){return"/a/i"===String(new RegExp(/a/g,"i"))})),regExpNeedsToSupportSymbolMatch=hasSymbols&&supportsDescriptors&&((regex=/./)[Symbol.match]=!1,RegExp(regex)===regex),regexToStringIsGeneric=valueOrFalseIfThrows((function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})})),regexToStringSupportsGenericFlags=regexToStringIsGeneric&&valueOrFalseIfThrows((function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})}));if(!regexToStringIsGeneric||!regexToStringSupportsGenericFlags){var origRegExpToString=RegExp.prototype.toString;defineProperty(RegExp.prototype,"toString",(function toString(){var R=ES.RequireObjectCoercible(this);return Type.regex(R)?_call(origRegExpToString,R):"/"+$String(R.source)+"/"+$String(R.flags)}),!0),Value.preserveToString(RegExp.prototype.toString,origRegExpToString)}if(supportsDescriptors&&(!regExpSupportsFlagsWithRegex||regExpNeedsToSupportSymbolMatch)){var flagsGetter=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,sourceDesc=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},legacySourceGetter=function(){return this.source},sourceGetter=ES.IsCallable(sourceDesc.get)?sourceDesc.get:legacySourceGetter,OrigRegExp=RegExp,RegExpShim=function RegExp(pattern,flags){var patternIsRegExp=ES.IsRegExp(pattern);return this instanceof RegExp||!patternIsRegExp||void 0!==flags||pattern.constructor!==RegExp?Type.regex(pattern)?new RegExp(ES.Call(sourceGetter,pattern),void 0===flags?ES.Call(flagsGetter,pattern):flags):(patternIsRegExp&&(pattern.source,void 0===flags&&pattern.flags),new OrigRegExp(pattern,flags)):pattern};wrapConstructor(OrigRegExp,RegExpShim,{$input:!0}),RegExp=RegExpShim,Value.redefine(globals,"RegExp",RegExpShim)}if(supportsDescriptors){var regexGlobals={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};_forEach(keys(regexGlobals),(function(prop){prop in RegExp&&!(regexGlobals[prop]in RegExp)&&Value.getter(RegExp,regexGlobals[prop],(function get(){return RegExp[prop]}))}))}addDefaultSpecies(RegExp);var inverseEpsilon=1/Number.EPSILON,roundTiesToEven=function roundTiesToEven(n){return n+inverseEpsilon-inverseEpsilon},BINARY_32_EPSILON=Math.pow(2,-23),BINARY_32_MAX_VALUE=Math.pow(2,127)*(2-BINARY_32_EPSILON),BINARY_32_MIN_VALUE=Math.pow(2,-126),E=Math.E,LOG2E=Math.LOG2E,LOG10E=Math.LOG10E,numberCLZ=Number.prototype.clz;delete Number.prototype.clz;var MathShims={acosh:function acosh(value){var x=Number(value);if(numberIsNaN(x)||value<1)return NaN;if(1===x)return 0;if(x===1/0)return x;var xInvSquared=1/(x*x);if(x<2)return _log1p(x-1+_sqrt(1-xInvSquared)*x);var halfX=x/2;return _log1p(halfX+_sqrt(1-xInvSquared)*halfX-1)+1/LOG2E},asinh:function asinh(value){var x=Number(value);if(0===x||!globalIsFinite(x))return x;var a=_abs(x),aSquared=a*a,s=_sign(x);return a<1?s*_log1p(a+aSquared/(_sqrt(aSquared+1)+1)):s*(_log1p(a/2+_sqrt(1+1/aSquared)*a/2-1)+1/LOG2E)},atanh:function atanh(value){var x=Number(value);if(0===x)return x;if(-1===x)return-1/0;if(1===x)return 1/0;if(numberIsNaN(x)||x<-1||x>1)return NaN;var a=_abs(x);return _sign(x)*_log1p(2*a/(1-a))/2},cbrt:function cbrt(value){var x=Number(value);if(0===x)return x;var result,negate=x<0;return negate&&(x=-x),result=x===1/0?1/0:(x/((result=_exp(_log(x)/3))*result)+2*result)/3,negate?-result:result},clz32:function clz32(value){var x=Number(value),number=ES.ToUint32(x);return 0===number?32:numberCLZ?ES.Call(numberCLZ,number):31-_floor(_log(number+.5)*LOG2E)},cosh:function cosh(value){var x=Number(value);if(0===x)return 1;if(numberIsNaN(x))return NaN;if(!globalIsFinite(x))return 1/0;var t=_exp(_abs(x)-1);return(t+1/(t*E*E))*(E/2)},expm1:function expm1(value){var x=Number(value);if(x===-1/0)return-1;if(!globalIsFinite(x)||0===x)return x;if(_abs(x)>.5)return _exp(x)-1;for(var t=x,sum=0,n=1;sum+t!==sum;)sum+=t,t*=x/(n+=1);return sum},hypot:function hypot(x,y){for(var result=0,largest=0,i=0;i<arguments.length;++i){var value=_abs(Number(arguments[i]));largest<value?(result*=largest/value*(largest/value),result+=1,largest=value):result+=value>0?value/largest*(value/largest):value}return largest===1/0?1/0:largest*_sqrt(result)},log2:function log2(value){return _log(value)*LOG2E},log10:function log10(value){return _log(value)*LOG10E},log1p:_log1p,sign:_sign,sinh:function sinh(value){var x=Number(value);if(!globalIsFinite(x)||0===x)return x;var a=_abs(x);if(a<1){var u=Math.expm1(a);return _sign(x)*u*(1+1/(u+1))/2}var t=_exp(a-1);return _sign(x)*(t-1/(t*E*E))*(E/2)},tanh:function tanh(value){var x=Number(value);return numberIsNaN(x)||0===x?x:x>=20?1:x<=-20?-1:(Math.expm1(x)-Math.expm1(-x))/(_exp(x)+_exp(-x))},trunc:function trunc(value){var x=Number(value);return x<0?-_floor(-x):_floor(x)},imul:function imul(x,y){var a=ES.ToUint32(x),b=ES.ToUint32(y),al=65535&a,bl=65535&b;return al*bl+((a>>>16&65535)*bl+al*(b>>>16&65535)<<16>>>0)|0},fround:function fround(x){var v=Number(x);if(0===v||v===1/0||v===-1/0||numberIsNaN(v))return v;var sign=_sign(v),abs=_abs(v);if(abs<BINARY_32_MIN_VALUE)return sign*roundTiesToEven(abs/BINARY_32_MIN_VALUE/BINARY_32_EPSILON)*BINARY_32_MIN_VALUE*BINARY_32_EPSILON;var a=(1+BINARY_32_EPSILON/Number.EPSILON)*abs,result=a-(a-abs);return result>BINARY_32_MAX_VALUE||numberIsNaN(result)?sign*(1/0):sign*result}},withinULPDistance=function withinULPDistance(result,expected,distance){return _abs(1-result/expected)/Number.EPSILON<(distance||8)};defineProperties(Math,MathShims),defineProperty(Math,"sinh",MathShims.sinh,Math.sinh(710)===1/0),defineProperty(Math,"cosh",MathShims.cosh,Math.cosh(710)===1/0),defineProperty(Math,"log1p",MathShims.log1p,-1e-17!==Math.log1p(-1e-17)),defineProperty(Math,"asinh",MathShims.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),defineProperty(Math,"asinh",MathShims.asinh,Math.asinh(1e300)===1/0),defineProperty(Math,"atanh",MathShims.atanh,0===Math.atanh(1e-300)),defineProperty(Math,"tanh",MathShims.tanh,-2e-17!==Math.tanh(-2e-17)),defineProperty(Math,"acosh",MathShims.acosh,Math.acosh(Number.MAX_VALUE)===1/0),defineProperty(Math,"acosh",MathShims.acosh,!withinULPDistance(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON))),defineProperty(Math,"cbrt",MathShims.cbrt,!withinULPDistance(Math.cbrt(1e-300),1e-100)),defineProperty(Math,"sinh",MathShims.sinh,-2e-17!==Math.sinh(-2e-17));var expm1OfTen=Math.expm1(10);defineProperty(Math,"expm1",MathShims.expm1,expm1OfTen>22025.465794806718||expm1OfTen<22025.465794806718);var origMathRound=Math.round,roundHandlesBoundaryConditions=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(Number.EPSILON/3.99-.5),smallestPositiveNumberWhereRoundBreaks=inverseEpsilon+1,largestPositiveNumberWhereRoundBreaks=2*inverseEpsilon-1,roundDoesNotIncreaseIntegers=[smallestPositiveNumberWhereRoundBreaks,largestPositiveNumberWhereRoundBreaks].every((function(num){return Math.round(num)===num}));defineProperty(Math,"round",(function round(x){var floor=_floor(x);return x-floor<.5?floor:-1===floor?-0:floor+1}),!roundHandlesBoundaryConditions||!roundDoesNotIncreaseIntegers),Value.preserveToString(Math.round,origMathRound);var origImul=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=MathShims.imul,Value.preserveToString(Math.imul,origImul)),2!==Math.imul.length&&overrideNative(Math,"imul",(function imul(x,y){return ES.Call(origImul,Math,arguments)}));var count,thenable,PromiseShim=function(){var setTimeout=globals.setTimeout;if("function"==typeof setTimeout||"object"==typeof setTimeout){ES.IsPromise=function(promise){return!!ES.TypeIsObject(promise)&&void 0!==promise._promise};var makeZeroTimeout,PromiseCapability=function(C){if(!ES.IsConstructor(C))throw new TypeError("Bad promise constructor");var capability=this;if(capability.resolve=void 0,capability.reject=void 0,capability.promise=new C((function(resolve,reject){if(void 0!==capability.resolve||void 0!==capability.reject)throw new TypeError("Bad Promise implementation!");capability.resolve=resolve,capability.reject=reject})),!ES.IsCallable(capability.resolve)||!ES.IsCallable(capability.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&ES.IsCallable(window.postMessage)&&(makeZeroTimeout=function(){var timeouts=[];return window.addEventListener("message",(function(event){if(event.source===window&&"zero-timeout-message"===event.data){if(event.stopPropagation(),0===timeouts.length)return;_shift(timeouts)()}}),!0),function(fn){_push(timeouts,fn),window.postMessage("zero-timeout-message","*")}});var P,pr,Promise$prototype,Promise$prototype$then,enqueue=ES.IsCallable(globals.setImmediate)?globals.setImmediate:"object"==typeof process&&process.nextTick?process.nextTick:(P=globals.Promise,(pr=P&&P.resolve&&P.resolve())&&function(task){return pr.then(task)}||(ES.IsCallable(makeZeroTimeout)?makeZeroTimeout():function(task){setTimeout(task,0)})),PROMISE_IDENTITY=function(x){return x},PROMISE_THROWER=function(e){throw e},PROMISE_FAKE_CAPABILITY={},enqueuePromiseReactionJob=function(handler,capability,argument){enqueue((function(){promiseReactionJob(handler,capability,argument)}))},promiseReactionJob=function(handler,promiseCapability,argument){var handlerResult,f;if(promiseCapability===PROMISE_FAKE_CAPABILITY)return handler(argument);try{handlerResult=handler(argument),f=promiseCapability.resolve}catch(e){handlerResult=e,f=promiseCapability.reject}f(handlerResult)},fulfillPromise=function(promise,value){var _promise=promise._promise,length=_promise.reactionLength;if(length>0&&(enqueuePromiseReactionJob(_promise.fulfillReactionHandler0,_promise.reactionCapability0,value),_promise.fulfillReactionHandler0=void 0,_promise.rejectReactions0=void 0,_promise.reactionCapability0=void 0,length>1))for(var i=1,idx=0;i<length;i++,idx+=3)enqueuePromiseReactionJob(_promise[idx+0],_promise[idx+2],value),promise[idx+0]=void 0,promise[idx+1]=void 0,promise[idx+2]=void 0;_promise.result=value,_promise.state=1,_promise.reactionLength=0},rejectPromise=function(promise,reason){var _promise=promise._promise,length=_promise.reactionLength;if(length>0&&(enqueuePromiseReactionJob(_promise.rejectReactionHandler0,_promise.reactionCapability0,reason),_promise.fulfillReactionHandler0=void 0,_promise.rejectReactions0=void 0,_promise.reactionCapability0=void 0,length>1))for(var i=1,idx=0;i<length;i++,idx+=3)enqueuePromiseReactionJob(_promise[idx+1],_promise[idx+2],reason),promise[idx+0]=void 0,promise[idx+1]=void 0,promise[idx+2]=void 0;_promise.result=reason,_promise.state=2,_promise.reactionLength=0},createResolvingFunctions=function(promise){var alreadyResolved=!1;return{resolve:function(resolution){var then;if(!alreadyResolved){if(alreadyResolved=!0,resolution===promise)return rejectPromise(promise,new TypeError("Self resolution"));if(!ES.TypeIsObject(resolution))return fulfillPromise(promise,resolution);try{then=resolution.then}catch(e){return rejectPromise(promise,e)}if(!ES.IsCallable(then))return fulfillPromise(promise,resolution);enqueue((function(){promiseResolveThenableJob(promise,resolution,then)}))}},reject:function(reason){if(!alreadyResolved)return alreadyResolved=!0,rejectPromise(promise,reason)}}},optimizedThen=function(then,thenable,resolve,reject){then===Promise$prototype$then?_call(then,thenable,resolve,reject,PROMISE_FAKE_CAPABILITY):_call(then,thenable,resolve,reject)},promiseResolveThenableJob=function(promise,thenable,then){var resolvingFunctions=createResolvingFunctions(promise),resolve=resolvingFunctions.resolve,reject=resolvingFunctions.reject;try{optimizedThen(then,thenable,resolve,reject)}catch(e){reject(e)}},Promise=function(){var PromiseShim=function Promise(resolver){if(!(this instanceof PromiseShim))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!ES.IsCallable(resolver))throw new TypeError("not a valid resolver");var promise=emulateES6construct(this,PromiseShim,Promise$prototype,{_promise:{result:void 0,state:0,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),resolvingFunctions=createResolvingFunctions(promise),reject=resolvingFunctions.reject;try{resolver(resolvingFunctions.resolve,reject)}catch(e){reject(e)}return promise};return PromiseShim}();Promise$prototype=Promise.prototype;var _promiseAllResolver=function(index,values,capability,remaining){var alreadyCalled=!1;return function(x){alreadyCalled||(alreadyCalled=!0,values[index]=x,0==--remaining.count&&(0,capability.resolve)(values))}};return defineProperties(Promise,{all:function all(iterable){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Promise is not object");var iterator,iteratorRecord,capability=new PromiseCapability(C);try{return function(iteratorRecord,C,resultCapability){for(var next,nextValue,it=iteratorRecord.iterator,values=[],remaining={count:1},index=0;;){try{if(!1===(next=ES.IteratorStep(it))){iteratorRecord.done=!0;break}nextValue=next.value}catch(e){throw iteratorRecord.done=!0,e}values[index]=void 0;var nextPromise=C.resolve(nextValue),resolveElement=_promiseAllResolver(index,values,resultCapability,remaining);remaining.count+=1,optimizedThen(nextPromise.then,nextPromise,resolveElement,resultCapability.reject),index+=1}return 0==--remaining.count&&(0,resultCapability.resolve)(values),resultCapability.promise}(iteratorRecord={iterator:iterator=ES.GetIterator(iterable),done:!1},C,capability)}catch(e){var exception=e;if(iteratorRecord&&!iteratorRecord.done)try{ES.IteratorClose(iterator,!0)}catch(ee){exception=ee}return(0,capability.reject)(exception),capability.promise}},race:function race(iterable){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Promise is not object");var iterator,iteratorRecord,capability=new PromiseCapability(C);try{return function(iteratorRecord,C,resultCapability){for(var next,nextValue,nextPromise,it=iteratorRecord.iterator;;){try{if(!1===(next=ES.IteratorStep(it))){iteratorRecord.done=!0;break}nextValue=next.value}catch(e){throw iteratorRecord.done=!0,e}nextPromise=C.resolve(nextValue),optimizedThen(nextPromise.then,nextPromise,resultCapability.resolve,resultCapability.reject)}return resultCapability.promise}(iteratorRecord={iterator:iterator=ES.GetIterator(iterable),done:!1},C,capability)}catch(e){var exception=e;if(iteratorRecord&&!iteratorRecord.done)try{ES.IteratorClose(iterator,!0)}catch(ee){exception=ee}return(0,capability.reject)(exception),capability.promise}},reject:function reject(reason){if(!ES.TypeIsObject(this))throw new TypeError("Bad promise constructor");var capability=new PromiseCapability(this);return(0,capability.reject)(reason),capability.promise},resolve:function resolve(v){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Bad promise constructor");if(ES.IsPromise(v)&&v.constructor===C)return v;var capability=new PromiseCapability(C);return(0,capability.resolve)(v),capability.promise}}),defineProperties(Promise$prototype,{catch:function(onRejected){return this.then(null,onRejected)},then:function then(onFulfilled,onRejected){var promise=this;if(!ES.IsPromise(promise))throw new TypeError("not a promise");var resultCapability,C=ES.SpeciesConstructor(promise,Promise),returnValueIsIgnored=arguments.length>2&&arguments[2]===PROMISE_FAKE_CAPABILITY;resultCapability=returnValueIsIgnored&&C===Promise?PROMISE_FAKE_CAPABILITY:new PromiseCapability(C);var value,fulfillReactionHandler=ES.IsCallable(onFulfilled)?onFulfilled:PROMISE_IDENTITY,rejectReactionHandler=ES.IsCallable(onRejected)?onRejected:PROMISE_THROWER,_promise=promise._promise;if(0===_promise.state){if(0===_promise.reactionLength)_promise.fulfillReactionHandler0=fulfillReactionHandler,_promise.rejectReactionHandler0=rejectReactionHandler,_promise.reactionCapability0=resultCapability;else{var idx=3*(_promise.reactionLength-1);_promise[idx+0]=fulfillReactionHandler,_promise[idx+1]=rejectReactionHandler,_promise[idx+2]=resultCapability}_promise.reactionLength+=1}else if(1===_promise.state)value=_promise.result,enqueuePromiseReactionJob(fulfillReactionHandler,resultCapability,value);else{if(2!==_promise.state)throw new TypeError("unexpected Promise state");value=_promise.result,enqueuePromiseReactionJob(rejectReactionHandler,resultCapability,value)}return resultCapability.promise}}),PROMISE_FAKE_CAPABILITY=new PromiseCapability(Promise),Promise$prototype$then=Promise$prototype.then,Promise}}();if(globals.Promise&&(delete globals.Promise.accept,delete globals.Promise.defer,delete globals.Promise.prototype.chain),"function"==typeof PromiseShim){defineProperties(globals,{Promise:PromiseShim});var promiseSupportsSubclassing=supportsSubclassing(globals.Promise,(function(S){return S.resolve(42).then((function(){}))instanceof S})),promiseIgnoresNonFunctionThenCallbacks=!throwsError((function(){return globals.Promise.reject(42).then(null,5).then(null,noop)})),promiseRequiresObjectContext=throwsError((function(){return globals.Promise.call(3,noop)})),promiseResolveBroken=function(Promise){var p=Promise.resolve(5);p.constructor={};var p2=Promise.resolve(p);try{p2.then(null,noop).then(null,noop)}catch(e){return!0}return p===p2}(globals.Promise),getsThenSynchronously=supportsDescriptors&&(count=0,thenable=Object.defineProperty({},"then",{get:function(){count+=1}}),Promise.resolve(thenable),1===count),BadResolverPromise=function BadResolverPromise(executor){var p=new Promise(executor);executor(3,(function(){})),this.then=p.then,this.constructor=BadResolverPromise};BadResolverPromise.prototype=Promise.prototype,BadResolverPromise.all=Promise.all;var hasBadResolverPromise=valueOrFalseIfThrows((function(){return!!BadResolverPromise.all([1,2])}));if(promiseSupportsSubclassing&&promiseIgnoresNonFunctionThenCallbacks&&promiseRequiresObjectContext&&!promiseResolveBroken&&getsThenSynchronously&&!hasBadResolverPromise||(Promise=PromiseShim,overrideNative(globals,"Promise",PromiseShim)),1!==Promise.all.length){var origAll=Promise.all;overrideNative(Promise,"all",(function all(iterable){return ES.Call(origAll,this,arguments)}))}if(1!==Promise.race.length){var origRace=Promise.race;overrideNative(Promise,"race",(function race(iterable){return ES.Call(origRace,this,arguments)}))}if(1!==Promise.resolve.length){var origResolve=Promise.resolve;overrideNative(Promise,"resolve",(function resolve(x){return ES.Call(origResolve,this,arguments)}))}if(1!==Promise.reject.length){var origReject=Promise.reject;overrideNative(Promise,"reject",(function reject(r){return ES.Call(origReject,this,arguments)}))}ensureEnumerable(Promise,"all"),ensureEnumerable(Promise,"race"),ensureEnumerable(Promise,"resolve"),ensureEnumerable(Promise,"reject"),addDefaultSpecies(Promise)}var s,m,testOrder=function(a){var b=keys(_reduce(a,(function(o,k){return o[k]=!0,o}),{}));return a.join(":")===b.join(":")},preservesInsertionOrder=testOrder(["z","a","bb"]),preservesNumericInsertionOrder=testOrder(["z",1,"a","3",2]);if(supportsDescriptors){var fastkey=function fastkey(key,skipInsertionOrderCheck){return skipInsertionOrderCheck||preservesInsertionOrder?isNullOrUndefined(key)?"^"+ES.ToString(key):"string"==typeof key?"$"+key:"number"==typeof key?preservesNumericInsertionOrder?key:"n"+key:"boolean"==typeof key?"b"+key:null:null},emptyObject=function emptyObject(){return Object.create?Object.create(null):{}},addIterableToMap=function addIterableToMap(MapConstructor,map,iterable){if(isArray(iterable)||Type.string(iterable))_forEach(iterable,(function(entry){if(!ES.TypeIsObject(entry))throw new TypeError("Iterator value "+entry+" is not an entry object");map.set(entry[0],entry[1])}));else if(iterable instanceof MapConstructor)_call(MapConstructor.prototype.forEach,iterable,(function(value,key){map.set(key,value)}));else{var iter,adder;if(!isNullOrUndefined(iterable)){if(adder=map.set,!ES.IsCallable(adder))throw new TypeError("bad map");iter=ES.GetIterator(iterable)}if(void 0!==iter)for(;;){var next=ES.IteratorStep(iter);if(!1===next)break;var nextItem=next.value;try{if(!ES.TypeIsObject(nextItem))throw new TypeError("Iterator value "+nextItem+" is not an entry object");_call(adder,map,nextItem[0],nextItem[1])}catch(e){throw ES.IteratorClose(iter,!0),e}}}},addIterableToSet=function addIterableToSet(SetConstructor,set,iterable){if(isArray(iterable)||Type.string(iterable))_forEach(iterable,(function(value){set.add(value)}));else if(iterable instanceof SetConstructor)_call(SetConstructor.prototype.forEach,iterable,(function(value){set.add(value)}));else{var iter,adder;if(!isNullOrUndefined(iterable)){if(adder=set.add,!ES.IsCallable(adder))throw new TypeError("bad set");iter=ES.GetIterator(iterable)}if(void 0!==iter)for(;;){var next=ES.IteratorStep(iter);if(!1===next)break;var nextValue=next.value;try{_call(adder,set,nextValue)}catch(e){throw ES.IteratorClose(iter,!0),e}}}},collectionShims={Map:function(){var empty={},MapEntry=function MapEntry(key,value){this.key=key,this.value=value,this.next=null,this.prev=null};MapEntry.prototype.isRemoved=function isRemoved(){return this.key===empty};var Map$prototype,requireMapSlot=function requireMapSlot(map,method){if(!ES.TypeIsObject(map)||!function isMap(map){return!!map._es6map}(map))throw new TypeError("Method Map.prototype."+method+" called on incompatible receiver "+ES.ToString(map))},MapIterator=function MapIterator(map,kind){requireMapSlot(map,"[[MapIterator]]"),this.head=map._head,this.i=this.head,this.kind=kind};addIterator(MapIterator.prototype={isMapIterator:!0,next:function next(){if(!this.isMapIterator)throw new TypeError("Not a MapIterator");var result,i=this.i,kind=this.kind,head=this.head;if(void 0===this.i)return iteratorResult();for(;i.isRemoved()&&i!==head;)i=i.prev;for(;i.next!==head;)if(!(i=i.next).isRemoved())return result="key"===kind?i.key:"value"===kind?i.value:[i.key,i.value],this.i=i,iteratorResult(result);return this.i=void 0,iteratorResult()}});var MapShim=function Map(){if(!(this instanceof Map))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var map=emulateES6construct(this,Map,Map$prototype,{_es6map:!0,_head:null,_map:OrigMap?new OrigMap:null,_size:0,_storage:emptyObject()}),head=new MapEntry(null,null);return head.next=head.prev=head,map._head=head,arguments.length>0&&addIterableToMap(Map,map,arguments[0]),map};return Map$prototype=MapShim.prototype,Value.getter(Map$prototype,"size",(function(){if(void 0===this._size)throw new TypeError("size method called on incompatible Map");return this._size})),defineProperties(Map$prototype,{get:function get(key){var entry;requireMapSlot(this,"get");var fkey=fastkey(key,!0);if(null!==fkey)return(entry=this._storage[fkey])?entry.value:void 0;if(this._map)return(entry=origMapGet.call(this._map,key))?entry.value:void 0;for(var head=this._head,i=head;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return i.value},has:function has(key){requireMapSlot(this,"has");var fkey=fastkey(key,!0);if(null!==fkey)return void 0!==this._storage[fkey];if(this._map)return origMapHas.call(this._map,key);for(var head=this._head,i=head;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return!0;return!1},set:function set(key,value){requireMapSlot(this,"set");var entry,head=this._head,i=head,fkey=fastkey(key,!0);if(null!==fkey){if(void 0!==this._storage[fkey])return this._storage[fkey].value=value,this;entry=this._storage[fkey]=new MapEntry(key,value),i=head.prev}else this._map&&(origMapHas.call(this._map,key)?origMapGet.call(this._map,key).value=value:(entry=new MapEntry(key,value),origMapSet.call(this._map,key,entry),i=head.prev));for(;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return i.value=value,this;return entry=entry||new MapEntry(key,value),ES.SameValue(-0,key)&&(entry.key=0),entry.next=this._head,entry.prev=this._head.prev,entry.prev.next=entry,entry.next.prev=entry,this._size+=1,this},delete:function(key){requireMapSlot(this,"delete");var head=this._head,i=head,fkey=fastkey(key,!0);if(null!==fkey){if(void 0===this._storage[fkey])return!1;i=this._storage[fkey].prev,delete this._storage[fkey]}else if(this._map){if(!origMapHas.call(this._map,key))return!1;i=origMapGet.call(this._map,key).prev,origMapDelete.call(this._map,key)}for(;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return i.key=empty,i.value=empty,i.prev.next=i.next,i.next.prev=i.prev,this._size-=1,!0;return!1},clear:function clear(){requireMapSlot(this,"clear"),this._map=OrigMap?new OrigMap:null,this._size=0,this._storage=emptyObject();for(var head=this._head,i=head,p=i.next;(i=p)!==head;)i.key=empty,i.value=empty,p=i.next,i.next=i.prev=head;head.next=head.prev=head},keys:function keys(){return requireMapSlot(this,"keys"),new MapIterator(this,"key")},values:function values(){return requireMapSlot(this,"values"),new MapIterator(this,"value")},entries:function entries(){return requireMapSlot(this,"entries"),new MapIterator(this,"key+value")},forEach:function forEach(callback){requireMapSlot(this,"forEach");for(var context=arguments.length>1?arguments[1]:null,it=this.entries(),entry=it.next();!entry.done;entry=it.next())context?_call(callback,context,entry.value[1],entry.value[0],this):callback(entry.value[1],entry.value[0],this)}}),addIterator(Map$prototype,Map$prototype.entries),MapShim}(),Set:function(){var Set$prototype,requireSetSlot=function requireSetSlot(set,method){if(!ES.TypeIsObject(set)||!function isSet(set){return set._es6set&&void 0!==set._storage}(set))throw new TypeError("Set.prototype."+method+" called on incompatible receiver "+ES.ToString(set))},SetShim=function Set(){if(!(this instanceof Set))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var set=emulateES6construct(this,Set,Set$prototype,{_es6set:!0,"[[SetData]]":null,_storage:emptyObject()});if(!set._es6set)throw new TypeError("bad set");return arguments.length>0&&addIterableToSet(Set,set,arguments[0]),set};Set$prototype=SetShim.prototype;var ensureMap=function ensureMap(set){if(!set["[[SetData]]"]){var m=new collectionShims.Map;set["[[SetData]]"]=m,_forEach(keys(set._storage),(function(key){var k=function(key){var k=key;if("^null"===k)return null;if("^undefined"!==k){var first=k.charAt(0);return"$"===first?_strSlice(k,1):"n"===first?+_strSlice(k,1):"b"===first?"btrue"===k:+k}}(key);m.set(k,k)})),set["[[SetData]]"]=m}set._storage=null};Value.getter(SetShim.prototype,"size",(function(){return requireSetSlot(this,"size"),this._storage?keys(this._storage).length:(ensureMap(this),this["[[SetData]]"].size)})),defineProperties(SetShim.prototype,{has:function has(key){var fkey;return requireSetSlot(this,"has"),this._storage&&null!==(fkey=fastkey(key))?!!this._storage[fkey]:(ensureMap(this),this["[[SetData]]"].has(key))},add:function add(key){var fkey;return requireSetSlot(this,"add"),this._storage&&null!==(fkey=fastkey(key))?(this._storage[fkey]=!0,this):(ensureMap(this),this["[[SetData]]"].set(key,key),this)},delete:function(key){var fkey;if(requireSetSlot(this,"delete"),this._storage&&null!==(fkey=fastkey(key))){var hasFKey=_hasOwnProperty(this._storage,fkey);return delete this._storage[fkey]&&hasFKey}return ensureMap(this),this["[[SetData]]"].delete(key)},clear:function clear(){requireSetSlot(this,"clear"),this._storage&&(this._storage=emptyObject()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function values(){return requireSetSlot(this,"values"),ensureMap(this),new SetIterator(this["[[SetData]]"].values())},entries:function entries(){return requireSetSlot(this,"entries"),ensureMap(this),new SetIterator(this["[[SetData]]"].entries())},forEach:function forEach(callback){requireSetSlot(this,"forEach");var context=arguments.length>1?arguments[1]:null,entireSet=this;ensureMap(entireSet),this["[[SetData]]"].forEach((function(value,key){context?_call(callback,context,key,key,entireSet):callback(key,key,entireSet)}))}}),defineProperty(SetShim.prototype,"keys",SetShim.prototype.values,!0),addIterator(SetShim.prototype,SetShim.prototype.values);var SetIterator=function SetIterator(it){this.it=it};return SetIterator.prototype={isSetIterator:!0,next:function next(){if(!this.isSetIterator)throw new TypeError("Not a SetIterator");return this.it.next()}},addIterator(SetIterator.prototype),SetShim}()},isGoogleTranslate=globals.Set&&!Set.prototype.delete&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys);if(isGoogleTranslate&&(globals.Set=collectionShims.Set),globals.Map||globals.Set){var mapAcceptsArguments=valueOrFalseIfThrows((function(){return 2===new Map([[1,2]]).get(1)}));mapAcceptsArguments||(globals.Map=function Map(){if(!(this instanceof Map))throw new TypeError('Constructor Map requires "new"');var m=new OrigMap;return arguments.length>0&&addIterableToMap(Map,m,arguments[0]),delete m.constructor,Object.setPrototypeOf(m,globals.Map.prototype),m},globals.Map.prototype=create(OrigMap.prototype),defineProperty(globals.Map.prototype,"constructor",globals.Map,!0),Value.preserveToString(globals.Map,OrigMap));var testMap=new Map,mapUsesSameValueZero=((m=new Map([[1,0],[2,0],[3,0],[4,0]])).set(-0,m),m.get(0)===m&&m.get(-0)===m&&m.has(0)&&m.has(-0)),mapSupportsChaining=testMap.set(1,2)===testMap;mapUsesSameValueZero&&mapSupportsChaining||overrideNative(Map.prototype,"set",(function set(k,v){return _call(origMapSet,this,0===k?0:k,v),this})),mapUsesSameValueZero||(defineProperties(Map.prototype,{get:function get(k){return _call(origMapGet,this,0===k?0:k)},has:function has(k){return _call(origMapHas,this,0===k?0:k)}},!0),Value.preserveToString(Map.prototype.get,origMapGet),Value.preserveToString(Map.prototype.has,origMapHas));var testSet=new Set,setUsesSameValueZero=Set.prototype.delete&&Set.prototype.add&&Set.prototype.has&&((s=testSet).delete(0),s.add(-0),!s.has(0)),setSupportsChaining=testSet.add(1)===testSet;if(!setUsesSameValueZero||!setSupportsChaining){var origSetAdd=Set.prototype.add;Set.prototype.add=function add(v){return _call(origSetAdd,this,0===v?0:v),this},Value.preserveToString(Set.prototype.add,origSetAdd)}if(!setUsesSameValueZero){var origSetHas=Set.prototype.has;Set.prototype.has=function has(v){return _call(origSetHas,this,0===v?0:v)},Value.preserveToString(Set.prototype.has,origSetHas);var origSetDel=Set.prototype.delete;Set.prototype.delete=function SetDelete(v){return _call(origSetDel,this,0===v?0:v)},Value.preserveToString(Set.prototype.delete,origSetDel)}var mapSupportsSubclassing=supportsSubclassing(globals.Map,(function(M){var m=new M([]);return m.set(42,42),m instanceof M})),mapFailsToSupportSubclassing=Object.setPrototypeOf&&!mapSupportsSubclassing,mapRequiresNew=function(){try{return!(globals.Map()instanceof globals.Map)}catch(e){return e instanceof TypeError}}();0===globals.Map.length&&!mapFailsToSupportSubclassing&&mapRequiresNew||(globals.Map=function Map(){if(!(this instanceof Map))throw new TypeError('Constructor Map requires "new"');var m=new OrigMap;return arguments.length>0&&addIterableToMap(Map,m,arguments[0]),delete m.constructor,Object.setPrototypeOf(m,Map.prototype),m},globals.Map.prototype=OrigMap.prototype,defineProperty(globals.Map.prototype,"constructor",globals.Map,!0),Value.preserveToString(globals.Map,OrigMap));var setSupportsSubclassing=supportsSubclassing(globals.Set,(function(S){var s=new S([]);return s.add(42,42),s instanceof S})),setFailsToSupportSubclassing=Object.setPrototypeOf&&!setSupportsSubclassing,setRequiresNew=function(){try{return!(globals.Set()instanceof globals.Set)}catch(e){return e instanceof TypeError}}();if(0!==globals.Set.length||setFailsToSupportSubclassing||!setRequiresNew){var OrigSet=globals.Set;globals.Set=function Set(){if(!(this instanceof Set))throw new TypeError('Constructor Set requires "new"');var s=new OrigSet;return arguments.length>0&&addIterableToSet(Set,s,arguments[0]),delete s.constructor,Object.setPrototypeOf(s,Set.prototype),s},globals.Set.prototype=OrigSet.prototype,defineProperty(globals.Set.prototype,"constructor",globals.Set,!0),Value.preserveToString(globals.Set,OrigSet)}var newMap=new globals.Map,mapIterationThrowsStopIterator=!valueOrFalseIfThrows((function(){return newMap.keys().next().done}));if(("function"!=typeof globals.Map.prototype.clear||0!==(new globals.Set).size||0!==newMap.size||"function"!=typeof globals.Map.prototype.keys||"function"!=typeof globals.Set.prototype.keys||"function"!=typeof globals.Map.prototype.forEach||"function"!=typeof globals.Set.prototype.forEach||isCallableWithoutNew(globals.Map)||isCallableWithoutNew(globals.Set)||"function"!=typeof newMap.keys().next||mapIterationThrowsStopIterator||!mapSupportsSubclassing)&&defineProperties(globals,{Map:collectionShims.Map,Set:collectionShims.Set},!0),globals.Set.prototype.keys!==globals.Set.prototype.values&&defineProperty(globals.Set.prototype,"keys",globals.Set.prototype.values,!0),addIterator(Object.getPrototypeOf((new globals.Map).keys())),addIterator(Object.getPrototypeOf((new globals.Set).keys())),functionsHaveNames&&"has"!==globals.Set.prototype.has.name){var anonymousSetHas=globals.Set.prototype.has;overrideNative(globals.Set.prototype,"has",(function has(key){return _call(anonymousSetHas,this,key)}))}}defineProperties(globals,collectionShims),addDefaultSpecies(globals.Map),addDefaultSpecies(globals.Set)}var throwUnlessTargetIsObject=function throwUnlessTargetIsObject(target){if(!ES.TypeIsObject(target))throw new TypeError("target must be an object")},ReflectShims={apply:function apply(){return ES.Call(ES.Call,null,arguments)},construct:function construct(constructor,args){if(!ES.IsConstructor(constructor))throw new TypeError("First argument must be a constructor.");var newTarget=arguments.length>2?arguments[2]:constructor;if(!ES.IsConstructor(newTarget))throw new TypeError("new.target must be a constructor.");return ES.Construct(constructor,args,newTarget,"internal")},deleteProperty:function deleteProperty(target,key){if(throwUnlessTargetIsObject(target),supportsDescriptors){var desc=Object.getOwnPropertyDescriptor(target,key);if(desc&&!desc.configurable)return!1}return delete target[key]},has:function has(target,key){return throwUnlessTargetIsObject(target),key in target}};Object.getOwnPropertyNames&&Object.assign(ReflectShims,{ownKeys:function ownKeys(target){throwUnlessTargetIsObject(target);var keys=Object.getOwnPropertyNames(target);return ES.IsCallable(Object.getOwnPropertySymbols)&&_pushApply(keys,Object.getOwnPropertySymbols(target)),keys}});var callAndCatchException=function ConvertExceptionToBoolean(func){return!throwsError(func)};if(Object.preventExtensions&&Object.assign(ReflectShims,{isExtensible:function isExtensible(target){return throwUnlessTargetIsObject(target),Object.isExtensible(target)},preventExtensions:function preventExtensions(target){return throwUnlessTargetIsObject(target),callAndCatchException((function(){return Object.preventExtensions(target)}))}}),supportsDescriptors){var internalGet=function get(target,key,receiver){var desc=Object.getOwnPropertyDescriptor(target,key);if(!desc){var parent=Object.getPrototypeOf(target);if(null===parent)return;return internalGet(parent,key,receiver)}return"value"in desc?desc.value:desc.get?ES.Call(desc.get,receiver):void 0},internalSet=function set(target,key,value,receiver){var desc=Object.getOwnPropertyDescriptor(target,key);if(!desc){var parent=Object.getPrototypeOf(target);if(null!==parent)return internalSet(parent,key,value,receiver);desc={value:void 0,writable:!0,enumerable:!0,configurable:!0}}return"value"in desc?!!desc.writable&&!!ES.TypeIsObject(receiver)&&(Object.getOwnPropertyDescriptor(receiver,key)?Reflect.defineProperty(receiver,key,{value:value}):Reflect.defineProperty(receiver,key,{value:value,writable:!0,enumerable:!0,configurable:!0})):!!desc.set&&(_call(desc.set,receiver,value),!0)};Object.assign(ReflectShims,{defineProperty:function defineProperty(target,propertyKey,attributes){return throwUnlessTargetIsObject(target),callAndCatchException((function(){return Object.defineProperty(target,propertyKey,attributes)}))},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(target,propertyKey){return throwUnlessTargetIsObject(target),Object.getOwnPropertyDescriptor(target,propertyKey)},get:function get(target,key){throwUnlessTargetIsObject(target);var receiver=arguments.length>2?arguments[2]:target;return internalGet(target,key,receiver)},set:function set(target,key,value){throwUnlessTargetIsObject(target);var receiver=arguments.length>3?arguments[3]:target;return internalSet(target,key,value,receiver)}})}if(Object.getPrototypeOf){var objectDotGetPrototypeOf=Object.getPrototypeOf;ReflectShims.getPrototypeOf=function getPrototypeOf(target){return throwUnlessTargetIsObject(target),objectDotGetPrototypeOf(target)}}if(Object.setPrototypeOf&&ReflectShims.getPrototypeOf){var willCreateCircularPrototype=function(object,lastProto){for(var proto=lastProto;proto;){if(object===proto)return!0;proto=ReflectShims.getPrototypeOf(proto)}return!1};Object.assign(ReflectShims,{setPrototypeOf:function setPrototypeOf(object,proto){if(throwUnlessTargetIsObject(object),null!==proto&&!ES.TypeIsObject(proto))throw new TypeError("proto must be an object or null");return proto===Reflect.getPrototypeOf(object)||!(Reflect.isExtensible&&!Reflect.isExtensible(object))&&!willCreateCircularPrototype(object,proto)&&(Object.setPrototypeOf(object,proto),!0)}})}var defineOrOverrideReflectProperty=function(key,shim){ES.IsCallable(globals.Reflect[key])?valueOrFalseIfThrows((function(){return globals.Reflect[key](1),globals.Reflect[key](NaN),globals.Reflect[key](!0),!0}))&&overrideNative(globals.Reflect,key,shim):defineProperty(globals.Reflect,key,shim)};Object.keys(ReflectShims).forEach((function(key){defineOrOverrideReflectProperty(key,ReflectShims[key])}));var originalReflectGetProto=globals.Reflect.getPrototypeOf;if(functionsHaveNames&&originalReflectGetProto&&"getPrototypeOf"!==originalReflectGetProto.name&&overrideNative(globals.Reflect,"getPrototypeOf",(function getPrototypeOf(target){return _call(originalReflectGetProto,globals.Reflect,target)})),globals.Reflect.setPrototypeOf&&valueOrFalseIfThrows((function(){return globals.Reflect.setPrototypeOf(1,{}),!0}))&&overrideNative(globals.Reflect,"setPrototypeOf",ReflectShims.setPrototypeOf),globals.Reflect.defineProperty&&(valueOrFalseIfThrows((function(){var basic=!globals.Reflect.defineProperty(1,"test",{value:1}),extensible="function"!=typeof Object.preventExtensions||!globals.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return basic&&extensible}))||overrideNative(globals.Reflect,"defineProperty",ReflectShims.defineProperty)),globals.Reflect.construct&&(valueOrFalseIfThrows((function(){var F=function F(){};return globals.Reflect.construct((function(){}),[],F)instanceof F}))||overrideNative(globals.Reflect,"construct",ReflectShims.construct)),"Invalid Date"!==String(new Date(NaN))){var dateToString=Date.prototype.toString,shimmedDateToString=function toString(){var valueOf=+this;return valueOf!=valueOf?"Invalid Date":ES.Call(dateToString,this)};overrideNative(Date.prototype,"toString",shimmedDateToString)}var stringHTMLshims={anchor:function anchor(name){return ES.CreateHTML(this,"a","name",name)},big:function big(){return ES.CreateHTML(this,"big","","")},blink:function blink(){return ES.CreateHTML(this,"blink","","")},bold:function bold(){return ES.CreateHTML(this,"b","","")},fixed:function fixed(){return ES.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(color){return ES.CreateHTML(this,"font","color",color)},fontsize:function fontsize(size){return ES.CreateHTML(this,"font","size",size)},italics:function italics(){return ES.CreateHTML(this,"i","","")},link:function link(url){return ES.CreateHTML(this,"a","href",url)},small:function small(){return ES.CreateHTML(this,"small","","")},strike:function strike(){return ES.CreateHTML(this,"strike","","")},sub:function sub(){return ES.CreateHTML(this,"sub","","")},sup:function sub(){return ES.CreateHTML(this,"sup","","")}};_forEach(Object.keys(stringHTMLshims),(function(key){var method=String.prototype[key],shouldOverwrite=!1;if(ES.IsCallable(method)){var output=_call(method,"",' " '),quotesCount=_concat([],output.match(/"/g)).length;shouldOverwrite=output!==output.toLowerCase()||quotesCount>2}else shouldOverwrite=!0;shouldOverwrite&&overrideNative(String.prototype,key,stringHTMLshims[key])}));var JSONstringifiesSymbols=function(){if(!hasSymbols)return!1;var stringify="object"==typeof JSON&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!stringify)return!1;if(void 0!==stringify(Symbol()))return!0;if("[null]"!==stringify([Symbol()]))return!0;var obj={a:Symbol()};return obj[Symbol()]=!0,"{}"!==stringify(obj)}(),JSONstringifyAcceptsObjectSymbol=valueOrFalseIfThrows((function(){return!hasSymbols||"{}"===JSON.stringify(Object(Symbol()))&&"[{}]"===JSON.stringify([Object(Symbol())])}));if(JSONstringifiesSymbols||!JSONstringifyAcceptsObjectSymbol){var origStringify=JSON.stringify;overrideNative(JSON,"stringify",(function stringify(value){if("symbol"!=typeof value){var replacer;arguments.length>1&&(replacer=arguments[1]);var args=[value];if(isArray(replacer))args.push(replacer);else{var replaceFn=ES.IsCallable(replacer)?replacer:null,wrappedReplacer=function(key,val){var parsedValue=replaceFn?_call(replaceFn,this,key,val):val;if("symbol"!=typeof parsedValue)return Type.symbol(parsedValue)?assignTo({})(parsedValue):parsedValue};args.push(wrappedReplacer)}return arguments.length>2&&args.push(arguments[2]),origStringify.apply(this,args)}}))}return globals})?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}).call(this,__webpack_require__(22),__webpack_require__(128))},function(module,exports,__webpack_require__){"use strict";var supportsDescriptors=__webpack_require__(6).supportsDescriptors,functionsHaveNames=__webpack_require__(178)(),getPolyfill=__webpack_require__(294),defineProperty=Object.defineProperty,TypeErr=TypeError;module.exports=function shimName(){var polyfill=getPolyfill();if(functionsHaveNames)return polyfill;if(!supportsDescriptors)throw new TypeErr("Shimming Function.prototype.name support requires ES5 property descriptor support.");var functionProto=Function.prototype;return defineProperty(functionProto,"name",{configurable:!0,enumerable:!1,get:function(){var name=polyfill.call(this);return this!==functionProto&&defineProperty(this,"name",{configurable:!0,enumerable:!1,value:name,writable:!1}),name}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var keysShim;if(!Object.keys){var has=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,isArgs=__webpack_require__(177),isEnumerable=Object.prototype.propertyIsEnumerable,hasDontEnumBug=!isEnumerable.call({toString:null},"toString"),hasProtoEnumBug=isEnumerable.call((function(){}),"prototype"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],equalsConstructorPrototype=function(o){var ctor=o.constructor;return ctor&&ctor.prototype===o},excludedKeys={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},hasAutomationEqualityBug=function(){if("undefined"==typeof window)return!1;for(var k in window)try{if(!excludedKeys["$"+k]&&has.call(window,k)&&null!==window[k]&&"object"==typeof window[k])try{equalsConstructorPrototype(window[k])}catch(e){return!0}}catch(e){return!0}return!1}();keysShim=function keys(object){var isObject=null!==object&&"object"==typeof object,isFunction="[object Function]"===toStr.call(object),isArguments=isArgs(object),isString=isObject&&"[object String]"===toStr.call(object),theKeys=[];if(!isObject&&!isFunction&&!isArguments)throw new TypeError("Object.keys called on a non-object");var skipProto=hasProtoEnumBug&&isFunction;if(isString&&object.length>0&&!has.call(object,0))for(var i=0;i<object.length;++i)theKeys.push(String(i));if(isArguments&&object.length>0)for(var j=0;j<object.length;++j)theKeys.push(String(j));else for(var name in object)skipProto&&"prototype"===name||!has.call(object,name)||theKeys.push(String(name));if(hasDontEnumBug)for(var skipConstructor=function(o){if("undefined"==typeof window||!hasAutomationEqualityBug)return equalsConstructorPrototype(o);try{return equalsConstructorPrototype(o)}catch(e){return!1}}(object),k=0;k<dontEnums.length;++k)skipConstructor&&"constructor"===dontEnums[k]||!has.call(object,dontEnums[k])||theKeys.push(dontEnums[k]);return theKeys}}module.exports=keysShim},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(295);module.exports=function getPolyfill(){return implementation}},function(module,exports,__webpack_require__){"use strict";var isCallable=__webpack_require__(85),functionsHaveNames=__webpack_require__(178)(),bind=__webpack_require__(23),functionToString=bind.call(Function.call,Function.prototype.toString),stringMatch=bind.call(Function.call,String.prototype.match),classRegex=/^class /,regex=/\s*function\s+([^(\s]*)\s*/,functionProto=Function.prototype;module.exports=function getName(){if(!function isClassConstructor(fn){if(isCallable(fn))return!1;if("function"!=typeof fn)return!1;try{return!!stringMatch(functionToString(fn),classRegex)}catch(e){}return!1}(this)&&!isCallable(this))throw new TypeError("Function.prototype.name sham getter called on non-function");if(functionsHaveNames)return this.name;if(this===functionProto)return"";var str=functionToString(this),match=stringMatch(str,regex);return match&&match[1]}},function(module,exports,__webpack_require__){"use strict";var ERROR_MESSAGE="Function.prototype.bind called on incompatible ",slice=Array.prototype.slice,toStr=Object.prototype.toString;module.exports=function bind(that){var target=this;if("function"!=typeof target||"[object Function]"!==toStr.call(target))throw new TypeError(ERROR_MESSAGE+target);for(var bound,args=slice.call(arguments,1),binder=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))},boundLength=Math.max(0,target.length-args.length),boundArgs=[],i=0;i<boundLength;i++)boundArgs.push("$"+i);if(bound=Function("binder","return function ("+boundArgs.join(",")+"){ return binder.apply(this,arguments); }")(binder),target.prototype){var Empty=function Empty(){};Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null}return bound}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(298)(),__webpack_require__(311)},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(6),getPolyfill=__webpack_require__(299);module.exports=function shimArrayPrototypeIncludes(){var polyfill=getPolyfill();return define(Array.prototype,{includes:polyfill},{includes:function(){return Array.prototype.includes!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(300);module.exports=function getPolyfill(){return Array.prototype.includes||implementation}},function(module,exports,__webpack_require__){"use strict";(function(global){var ES=__webpack_require__(301),$isNaN=Number.isNaN||function isNaN(a){return a!=a},$isFinite=Number.isFinite||function isFinite(n){return"number"==typeof n&&global.isFinite(n)},indexOf=Array.prototype.indexOf;module.exports=function includes(searchElement){var fromIndex=arguments.length>1?ES.ToInteger(arguments[1]):0;if(indexOf&&!$isNaN(searchElement)&&$isFinite(fromIndex)&&void 0!==searchElement)return indexOf.apply(this,arguments)>-1;var O=ES.ToObject(this),length=ES.ToLength(O.length);if(0===length)return!1;for(var k=fromIndex>=0?fromIndex:Math.max(0,length+fromIndex);k<length;){if(ES.SameValueZero(searchElement,O[k]))return!0;k+=1}return!1}}).call(this,__webpack_require__(22))},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(179)},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(303)},function(module,exports,__webpack_require__){"use strict";var hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,isPrimitive=__webpack_require__(180),isCallable=__webpack_require__(85),isDate=__webpack_require__(304),isSymbol=__webpack_require__(181),ordinaryToPrimitive=function OrdinaryToPrimitive(O,hint){if(null==O)throw new TypeError("Cannot call method on "+O);if("string"!=typeof hint||"number"!==hint&&"string"!==hint)throw new TypeError('hint must be "string" or "number"');var method,result,i,methodNames="string"===hint?["toString","valueOf"]:["valueOf","toString"];for(i=0;i<methodNames.length;++i)if(method=O[methodNames[i]],isCallable(method)&&(result=method.call(O),isPrimitive(result)))return result;throw new TypeError("No default value")},GetMethod=function GetMethod(O,P){var func=O[P];if(null!=func){if(!isCallable(func))throw new TypeError(func+" returned for property "+P+" of object "+O+" is not a function");return func}};module.exports=function ToPrimitive(input){if(isPrimitive(input))return input;var exoticToPrim,hint="default";if(arguments.length>1&&(arguments[1]===String?hint="string":arguments[1]===Number&&(hint="number")),hasSymbols&&(Symbol.toPrimitive?exoticToPrim=GetMethod(input,Symbol.toPrimitive):isSymbol(input)&&(exoticToPrim=Symbol.prototype.valueOf)),void 0!==exoticToPrim){var result=exoticToPrim.call(input,hint);if(isPrimitive(result))return result;throw new TypeError("unable to convert exotic object to primitive")}return"default"===hint&&(isDate(input)||isSymbol(input))&&(hint="string"),ordinaryToPrimitive(input,"default"===hint?"number":hint)}},function(module,exports,__webpack_require__){"use strict";var getDay=Date.prototype.getDay,toStr=Object.prototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;module.exports=function isDateObject(value){return"object"==typeof value&&null!==value&&(hasToStringTag?function tryDateObject(value){try{return getDay.call(value),!0}catch(e){return!1}}(value):"[object Date]"===toStr.call(value))}},function(module,exports,__webpack_require__){"use strict";module.exports=function hasSymbols(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var obj={},sym=Symbol("test"),symObj=Object(sym);if("string"==typeof sym)return!1;if("[object Symbol]"!==Object.prototype.toString.call(sym))return!1;if("[object Symbol]"!==Object.prototype.toString.call(symObj))return!1;for(sym in obj[sym]=42,obj)return!1;if("function"==typeof Object.keys&&0!==Object.keys(obj).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(obj).length)return!1;var syms=Object.getOwnPropertySymbols(obj);if(1!==syms.length||syms[0]!==sym)return!1;if(!Object.prototype.propertyIsEnumerable.call(obj,sym))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var descriptor=Object.getOwnPropertyDescriptor(obj,sym);if(42!==descriptor.value||!0!==descriptor.enumerable)return!1}return!0}},,function(module,exports,__webpack_require__){"use strict";module.exports=function isPrimitive(value){return null===value||"function"!=typeof value&&"object"!=typeof value}},function(module,exports,__webpack_require__){"use strict";var every=__webpack_require__(133);module.exports=function isSamePropertyDescriptor(ES,D1,D2){return every(["[[Configurable]]","[[Enumerable]]","[[Get]]","[[Set]]","[[Value]]","[[Writable]]"],(function(field){return field in D1==field in D2&&ES.SameValue(D1[field],D2[field])}))}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(10),$Object=GetIntrinsic("%Object%"),$EvalError=GetIntrinsic("%EvalError%"),$TypeError=GetIntrinsic("%TypeError%"),$String=GetIntrinsic("%String%"),$Date=GetIntrinsic("%Date%"),$Number=GetIntrinsic("%Number%"),$floor=GetIntrinsic("%Math.floor%"),$DateUTC=GetIntrinsic("%Date.UTC%"),$abs=GetIntrinsic("%Math.abs%"),assertRecord=__webpack_require__(182),isPropertyDescriptor=__webpack_require__(187),$isNaN=__webpack_require__(131),$isFinite=__webpack_require__(183),sign=__webpack_require__(185),mod=__webpack_require__(186),isPrefixOf=__webpack_require__(193),callBound=__webpack_require__(44),IsCallable=__webpack_require__(85),toPrimitive=__webpack_require__(310),has=__webpack_require__(43),$getUTCFullYear=callBound("Date.prototype.getUTCFullYear"),ES5={ToPrimitive:toPrimitive,ToBoolean:function ToBoolean(value){return!!value},ToNumber:function ToNumber(value){return+value},ToInteger:function ToInteger(value){var number=this.ToNumber(value);return $isNaN(number)?0:0!==number&&$isFinite(number)?sign(number)*Math.floor(Math.abs(number)):number},ToInt32:function ToInt32(x){return this.ToNumber(x)>>0},ToUint32:function ToUint32(x){return this.ToNumber(x)>>>0},ToUint16:function ToUint16(value){var number=this.ToNumber(value);if($isNaN(number)||0===number||!$isFinite(number))return 0;var posInt=sign(number)*Math.floor(Math.abs(number));return mod(posInt,65536)},ToString:function ToString(value){return $String(value)},ToObject:function ToObject(value){return this.CheckObjectCoercible(value),$Object(value)},CheckObjectCoercible:function CheckObjectCoercible(value,optMessage){if(null==value)throw new $TypeError(optMessage||"Cannot call method on "+value);return value},IsCallable:IsCallable,SameValue:function SameValue(x,y){return x===y?0!==x||1/x==1/y:$isNaN(x)&&$isNaN(y)},Type:function Type(x){return null===x?"Null":void 0===x?"Undefined":"function"==typeof x||"object"==typeof x?"Object":"number"==typeof x?"Number":"boolean"==typeof x?"Boolean":"string"==typeof x?"String":void 0},IsPropertyDescriptor:function IsPropertyDescriptor(Desc){return isPropertyDescriptor(this,Desc)},IsAccessorDescriptor:function IsAccessorDescriptor(Desc){return void 0!==Desc&&(assertRecord(this,"Property Descriptor","Desc",Desc),!(!has(Desc,"[[Get]]")&&!has(Desc,"[[Set]]")))},IsDataDescriptor:function IsDataDescriptor(Desc){return void 0!==Desc&&(assertRecord(this,"Property Descriptor","Desc",Desc),!(!has(Desc,"[[Value]]")&&!has(Desc,"[[Writable]]")))},IsGenericDescriptor:function IsGenericDescriptor(Desc){return void 0!==Desc&&(assertRecord(this,"Property Descriptor","Desc",Desc),!this.IsAccessorDescriptor(Desc)&&!this.IsDataDescriptor(Desc))},FromPropertyDescriptor:function FromPropertyDescriptor(Desc){if(void 0===Desc)return Desc;if(assertRecord(this,"Property Descriptor","Desc",Desc),this.IsDataDescriptor(Desc))return{value:Desc["[[Value]]"],writable:!!Desc["[[Writable]]"],enumerable:!!Desc["[[Enumerable]]"],configurable:!!Desc["[[Configurable]]"]};if(this.IsAccessorDescriptor(Desc))return{get:Desc["[[Get]]"],set:Desc["[[Set]]"],enumerable:!!Desc["[[Enumerable]]"],configurable:!!Desc["[[Configurable]]"]};throw new $TypeError("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function ToPropertyDescriptor(Obj){if("Object"!==this.Type(Obj))throw new $TypeError("ToPropertyDescriptor requires an object");var desc={};if(has(Obj,"enumerable")&&(desc["[[Enumerable]]"]=this.ToBoolean(Obj.enumerable)),has(Obj,"configurable")&&(desc["[[Configurable]]"]=this.ToBoolean(Obj.configurable)),has(Obj,"value")&&(desc["[[Value]]"]=Obj.value),has(Obj,"writable")&&(desc["[[Writable]]"]=this.ToBoolean(Obj.writable)),has(Obj,"get")){var getter=Obj.get;if(void 0!==getter&&!this.IsCallable(getter))throw new TypeError("getter must be a function");desc["[[Get]]"]=getter}if(has(Obj,"set")){var setter=Obj.set;if(void 0!==setter&&!this.IsCallable(setter))throw new $TypeError("setter must be a function");desc["[[Set]]"]=setter}if((has(desc,"[[Get]]")||has(desc,"[[Set]]"))&&(has(desc,"[[Value]]")||has(desc,"[[Writable]]")))throw new $TypeError("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return desc},"Abstract Equality Comparison":function AbstractEqualityComparison(x,y){var xType=this.Type(x),yType=this.Type(y);return xType===yType?x===y:null==x&&null==y||("Number"===xType&&"String"===yType?this["Abstract Equality Comparison"](x,this.ToNumber(y)):"String"===xType&&"Number"===yType?this["Abstract Equality Comparison"](this.ToNumber(x),y):"Boolean"===xType?this["Abstract Equality Comparison"](this.ToNumber(x),y):"Boolean"===yType?this["Abstract Equality Comparison"](x,this.ToNumber(y)):"String"!==xType&&"Number"!==xType||"Object"!==yType?"Object"===xType&&("String"===yType||"Number"===yType)&&this["Abstract Equality Comparison"](this.ToPrimitive(x),y):this["Abstract Equality Comparison"](x,this.ToPrimitive(y)))},"Strict Equality Comparison":function StrictEqualityComparison(x,y){var xType=this.Type(x);return xType===this.Type(y)&&("Undefined"===xType||"Null"===xType||x===y)},"Abstract Relational Comparison":function AbstractRelationalComparison(x,y,LeftFirst){if("Boolean"!==this.Type(LeftFirst))throw new $TypeError("Assertion failed: LeftFirst argument must be a Boolean");var px,py;if(LeftFirst?(px=this.ToPrimitive(x,$Number),py=this.ToPrimitive(y,$Number)):(py=this.ToPrimitive(y,$Number),px=this.ToPrimitive(x,$Number)),!("String"===this.Type(px)&&"String"===this.Type(py))){var nx=this.ToNumber(px),ny=this.ToNumber(py);if($isNaN(nx)||$isNaN(ny))return;return(!$isFinite(nx)||!$isFinite(ny)||nx!==ny)&&((0!==nx||0!==ny)&&(nx!==1/0&&(ny===1/0||ny!==-1/0&&(nx===-1/0||nx<ny))))}return!isPrefixOf(py,px)&&(!!isPrefixOf(px,py)||px<py)},msFromTime:function msFromTime(t){return mod(t,1e3)},SecFromTime:function SecFromTime(t){return mod($floor(t/1e3),60)},MinFromTime:function MinFromTime(t){return mod($floor(t/6e4),60)},HourFromTime:function HourFromTime(t){return mod($floor(t/36e5),24)},Day:function Day(t){return $floor(t/864e5)},TimeWithinDay:function TimeWithinDay(t){return mod(t,864e5)},DayFromYear:function DayFromYear(y){return 365*(y-1970)+$floor((y-1969)/4)-$floor((y-1901)/100)+$floor((y-1601)/400)},TimeFromYear:function TimeFromYear(y){return 864e5*this.DayFromYear(y)},YearFromTime:function YearFromTime(t){return $getUTCFullYear(new $Date(t))},WeekDay:function WeekDay(t){return mod(this.Day(t)+4,7)},DaysInYear:function DaysInYear(y){return 0!==mod(y,4)?365:0!==mod(y,100)?366:0!==mod(y,400)?365:366},InLeapYear:function InLeapYear(t){var days=this.DaysInYear(this.YearFromTime(t));if(365===days)return 0;if(366===days)return 1;throw new $EvalError("Assertion failed: there are not 365 or 366 days in a year, got: "+days)},DayWithinYear:function DayWithinYear(t){return this.Day(t)-this.DayFromYear(this.YearFromTime(t))},MonthFromTime:function MonthFromTime(t){var day=this.DayWithinYear(t);if(0<=day&&day<31)return 0;var leap=this.InLeapYear(t);return 31<=day&&day<59+leap?1:59+leap<=day&&day<90+leap?2:90+leap<=day&&day<120+leap?3:120+leap<=day&&day<151+leap?4:151+leap<=day&&day<181+leap?5:181+leap<=day&&day<212+leap?6:212+leap<=day&&day<243+leap?7:243+leap<=day&&day<273+leap?8:273+leap<=day&&day<304+leap?9:304+leap<=day&&day<334+leap?10:334+leap<=day&&day<365+leap?11:void 0},DateFromTime:function DateFromTime(t){var m=this.MonthFromTime(t),d=this.DayWithinYear(t);if(0===m)return d+1;if(1===m)return d-30;var leap=this.InLeapYear(t);if(2===m)return d-58-leap;if(3===m)return d-89-leap;if(4===m)return d-119-leap;if(5===m)return d-150-leap;if(6===m)return d-180-leap;if(7===m)return d-211-leap;if(8===m)return d-242-leap;if(9===m)return d-272-leap;if(10===m)return d-303-leap;if(11===m)return d-333-leap;throw new $EvalError("Assertion failed: MonthFromTime returned an impossible value: "+m)},MakeDay:function MakeDay(year,month,date){if(!$isFinite(year)||!$isFinite(month)||!$isFinite(date))return NaN;var y=this.ToInteger(year),m=this.ToInteger(month),dt=this.ToInteger(date),ym=y+$floor(m/12),mn=mod(m,12),t=$DateUTC(ym,mn,1);return this.YearFromTime(t)!==ym||this.MonthFromTime(t)!==mn||1!==this.DateFromTime(t)?NaN:this.Day(t)+dt-1},MakeDate:function MakeDate(day,time){return $isFinite(day)&&$isFinite(time)?864e5*day+time:NaN},MakeTime:function MakeTime(hour,min,sec,ms){return $isFinite(hour)&&$isFinite(min)&&$isFinite(sec)&&$isFinite(ms)?36e5*this.ToInteger(hour)+6e4*this.ToInteger(min)+1e3*this.ToInteger(sec)+this.ToInteger(ms):NaN},TimeClip:function TimeClip(time){return!$isFinite(time)||$abs(time)>864e13?NaN:$Number(new $Date(this.ToNumber(time)))},modulo:function modulo(x,y){return mod(x,y)}};module.exports=ES5},function(module,exports,__webpack_require__){"use strict";var toStr=Object.prototype.toString,isPrimitive=__webpack_require__(180),isCallable=__webpack_require__(85),ES5internalSlots___DefaultValue__=function(O){var actualHint;if((actualHint=arguments.length>1?arguments[1]:"[object Date]"===toStr.call(O)?String:Number)===String||actualHint===Number){var value,i,methods=actualHint===String?["toString","valueOf"]:["valueOf","toString"];for(i=0;i<methods.length;++i)if(isCallable(O[methods[i]])&&(value=O[methods[i]](),isPrimitive(value)))return value;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")};module.exports=function ToPrimitive(input){return isPrimitive(input)?input:arguments.length>1?ES5internalSlots___DefaultValue__(input,arguments[1]):ES5internalSlots___DefaultValue__(input)}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(312)(),__webpack_require__(316)(),__webpack_require__(319)(),__webpack_require__(322)(),__webpack_require__(325)(),__webpack_require__(328)},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(313),define=__webpack_require__(6);module.exports=function shimValues(){var polyfill=getPolyfill();return define(Object,{values:polyfill},{values:function testValues(){return Object.values!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(314);module.exports=function getPolyfill(){return"function"==typeof Object.values?Object.values:implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(66),has=__webpack_require__(43),isEnumerable=__webpack_require__(23).call(Function.call,Object.prototype.propertyIsEnumerable);module.exports=function values(O){var obj=ES.RequireObjectCoercible(O),vals=[];for(var key in obj)has(obj,key)&&isEnumerable(obj,key)&&vals.push(obj[key]);return vals}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(10),originalGetProto=GetIntrinsic("%Object.getPrototypeOf%",!0),$ArrayProto=GetIntrinsic("%Array.prototype%");module.exports=originalGetProto||([].__proto__===$ArrayProto?function(O){return O.__proto__}:null)},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(317),define=__webpack_require__(6);module.exports=function shimEntries(){var polyfill=getPolyfill();return define(Object,{entries:polyfill},{entries:function testEntries(){return Object.entries!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(318);module.exports=function getPolyfill(){return"function"==typeof Object.entries?Object.entries:implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(66),has=__webpack_require__(43),isEnumerable=__webpack_require__(23).call(Function.call,Object.prototype.propertyIsEnumerable);module.exports=function entries(O){var obj=ES.RequireObjectCoercible(O),entrys=[];for(var key in obj)has(obj,key)&&isEnumerable(obj,key)&&entrys.push([key,obj[key]]);return entrys}},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(320),define=__webpack_require__(6);module.exports=function shimPadStart(){var polyfill=getPolyfill();return define(String.prototype,{padStart:polyfill},{padStart:function(){return String.prototype.padStart!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(321);module.exports=function getPolyfill(){return"function"==typeof String.prototype.padStart?String.prototype.padStart:implementation}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(23),ES=__webpack_require__(66),slice=bind.call(Function.call,String.prototype.slice);module.exports=function padStart(maxLength){var fillString,O=ES.RequireObjectCoercible(this),S=ES.ToString(O),stringLength=ES.ToLength(S.length);arguments.length>1&&(fillString=arguments[1]);var filler=void 0===fillString?"":ES.ToString(fillString);""===filler&&(filler=" ");var intMaxLength=ES.ToLength(maxLength);if(intMaxLength<=stringLength)return S;for(var fillLen=intMaxLength-stringLength;filler.length<fillLen;){var fLen=filler.length,remainingCodeUnits=fillLen-fLen;filler+=fLen>remainingCodeUnits?slice(filler,0,remainingCodeUnits):filler}var truncatedStringFiller=filler.length>fillLen?slice(filler,0,fillLen):filler;return truncatedStringFiller+S}},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(323),define=__webpack_require__(6);module.exports=function shimPadEnd(){var polyfill=getPolyfill();return define(String.prototype,{padEnd:polyfill},{padEnd:function(){return String.prototype.padEnd!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(324);module.exports=function getPolyfill(){return"function"==typeof String.prototype.padEnd?String.prototype.padEnd:implementation}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(23),ES=__webpack_require__(66),slice=bind.call(Function.call,String.prototype.slice);module.exports=function padEnd(maxLength){var fillString,O=ES.RequireObjectCoercible(this),S=ES.ToString(O),stringLength=ES.ToLength(S.length);arguments.length>1&&(fillString=arguments[1]);var filler=void 0===fillString?"":ES.ToString(fillString);""===filler&&(filler=" ");var intMaxLength=ES.ToLength(maxLength);if(intMaxLength<=stringLength)return S;for(var fillLen=intMaxLength-stringLength;filler.length<fillLen;){var fLen=filler.length,remainingCodeUnits=fillLen-fLen;filler+=fLen>remainingCodeUnits?slice(filler,0,remainingCodeUnits):filler}var truncatedStringFiller=filler.length>fillLen?slice(filler,0,fillLen):filler;return S+truncatedStringFiller}},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(326),define=__webpack_require__(6);module.exports=function shimGetOwnPropertyDescriptors(){var polyfill=getPolyfill();return define(Object,{getOwnPropertyDescriptors:polyfill},{getOwnPropertyDescriptors:function(){return Object.getOwnPropertyDescriptors!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(327);module.exports=function getPolyfill(){return"function"==typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(66),defineProperty=Object.defineProperty,getDescriptor=Object.getOwnPropertyDescriptor,getOwnNames=Object.getOwnPropertyNames,getSymbols=Object.getOwnPropertySymbols,concat=Function.call.bind(Array.prototype.concat),reduce=Function.call.bind(Array.prototype.reduce),getAll=getSymbols?function(obj){return concat(getOwnNames(obj),getSymbols(obj))}:getOwnNames,isES5=ES.IsCallable(getDescriptor)&&ES.IsCallable(getOwnNames);module.exports=function getOwnPropertyDescriptors(value){if(ES.RequireObjectCoercible(value),!isES5)throw new TypeError("getOwnPropertyDescriptors requires Object.getOwnPropertyDescriptor");var O=ES.ToObject(value);return reduce(getAll(O),(function(acc,key){var descriptor=getDescriptor(O,key);return void 0!==descriptor&&function put(obj,prop,val){defineProperty&&prop in obj?defineProperty(obj,prop,{configurable:!0,enumerable:!0,value:val,writable:!0}):obj[prop]=val}(acc,key,descriptor),acc}),{})}},function(module,exports,__webpack_require__){"use strict";"function"==typeof Promise&&__webpack_require__(329),__webpack_require__(334)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(330)()},function(module,exports,__webpack_require__){"use strict";var requirePromise=__webpack_require__(134),getPolyfill=__webpack_require__(331),define=__webpack_require__(6);module.exports=function shimPromiseFinally(){requirePromise();var polyfill=getPolyfill();return define(Promise.prototype,{finally:polyfill},{finally:function testFinally(){return Promise.prototype.finally!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var requirePromise=__webpack_require__(134),implementation=__webpack_require__(332);module.exports=function getPolyfill(){return requirePromise(),"function"==typeof Promise.prototype.finally?Promise.prototype.finally:implementation}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(134)();var ES=__webpack_require__(135),promiseResolve=function PromiseResolve(C,value){return new C((function(resolve){resolve(value)}))},OriginalPromise=Promise,promiseFinally=function finally_(onFinally){if("Object"!==ES.Type(this))throw new TypeError("receiver is not an Object");var C=ES.SpeciesConstructor(this,OriginalPromise),thenFinally=onFinally,catchFinally=onFinally;return ES.IsCallable(onFinally)&&(thenFinally=function CreateThenFinally(C,onFinally){return function(value){var result=onFinally();return promiseResolve(C,result).then((function(){return value}))}}(C,onFinally),catchFinally=function CreateCatchFinally(C,onFinally){return function(reason){var result=onFinally();return promiseResolve(C,result).then((function(){throw reason}))}}(C,onFinally)),this.then(thenFinally,catchFinally)};if(Object.getOwnPropertyDescriptor){var descriptor=Object.getOwnPropertyDescriptor(promiseFinally,"name");descriptor&&descriptor.configurable&&Object.defineProperty(promiseFinally,"name",{configurable:!0,value:"finally"})}module.exports=promiseFinally},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(10),ES2016=__webpack_require__(195),assign=__webpack_require__(65),forEach=__webpack_require__(132),callBind=__webpack_require__(86),$TypeError=GetIntrinsic("%TypeError%"),callBound=__webpack_require__(44),$isEnumerable=callBound("Object.prototype.propertyIsEnumerable"),$pushApply=callBind.apply(GetIntrinsic("%Array.prototype.push%")),$arrayPush=callBound("Array.prototype.push"),ES2017=assign(assign({},ES2016),{ToIndex:function ToIndex(value){if(void 0===value)return 0;var integerIndex=this.ToInteger(value);if(integerIndex<0)throw new RangeError("index must be >= 0");var index=this.ToLength(integerIndex);if(!this.SameValueZero(integerIndex,index))throw new RangeError("index must be >= 0 and < 2 ** 53 - 1");return index},EnumerableOwnProperties:function EnumerableOwnProperties(O,kind){var keys=ES2016.EnumerableOwnNames(O);if("key"===kind)return keys;if("value"===kind||"key+value"===kind){var results=[];return forEach(keys,(function(key){$isEnumerable(O,key)&&$pushApply(results,["value"===kind?O[key]:[key,O[key]]])})),results}throw new $TypeError('Assertion failed: "kind" is not "key", "value", or "key+value": '+kind)},IterableToList:function IterableToList(items,method){for(var iterator=this.GetIterator(items,method),values=[],next=!0;next;)if(next=this.IteratorStep(iterator)){var nextValue=this.IteratorValue(next);$arrayPush(values,nextValue)}return values}});delete ES2017.EnumerableOwnNames,delete ES2017.IterableToArrayLike,module.exports=ES2017},function(module,exports,__webpack_require__){"use strict";__webpack_require__(335),__webpack_require__(343),__webpack_require__(347),__webpack_require__(351),__webpack_require__(355)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(336)()},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(6),getPolyfill=__webpack_require__(337);module.exports=function shimFlat(){var polyfill=getPolyfill();return define(Array.prototype,{flat:polyfill},{flat:function(){return Array.prototype.flat!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(338);module.exports=function getPolyfill(){return Array.prototype.flat||implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(56);module.exports=function flat(){var O=ES.ToObject(this),sourceLen=ES.ToLength(ES.Get(O,"length")),depthNum=1;arguments.length>0&&void 0!==arguments[0]&&(depthNum=ES.ToInteger(arguments[0]));var A=ES.ArraySpeciesCreate(O,0);return ES.FlattenIntoArray(A,O,sourceLen,0,depthNum),A}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(23),define=__webpack_require__(6),implementation=__webpack_require__(196),getPolyfill=__webpack_require__(197),shim=__webpack_require__(340),bound=bind.call(Function.call,getPolyfill());define(bound,{getPolyfill:getPolyfill,implementation:implementation,shim:shim}),module.exports=bound},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(6),getPolyfill=__webpack_require__(197);module.exports=function shimTrimLeft(){var polyfill=getPolyfill();return define(String.prototype,{trimLeft:polyfill},{trimLeft:function(){return String.prototype.trimLeft!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(23),define=__webpack_require__(6),implementation=__webpack_require__(198),getPolyfill=__webpack_require__(199),shim=__webpack_require__(342),bound=bind.call(Function.call,getPolyfill());define(bound,{getPolyfill:getPolyfill,implementation:implementation,shim:shim}),module.exports=bound},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(6),getPolyfill=__webpack_require__(199);module.exports=function shimTrimRight(){var polyfill=getPolyfill();return define(String.prototype,{trimRight:polyfill},{trimRight:function(){return String.prototype.trimRight!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(344)()},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(6),getPolyfill=__webpack_require__(345);module.exports=function shimFlatMap(){var polyfill=getPolyfill();return define(Array.prototype,{flatMap:polyfill},{flatMap:function(){return Array.prototype.flatMap!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(346);module.exports=function getPolyfill(){return Array.prototype.flatMap||implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(56);module.exports=function flatMap(mapperFunction){var T,O=ES.ToObject(this),sourceLen=ES.ToLength(ES.Get(O,"length"));if(!ES.IsCallable(mapperFunction))throw new TypeError("mapperFunction must be a function");arguments.length>1&&(T=arguments[1]);var A=ES.ArraySpeciesCreate(O,0);return ES.FlattenIntoArray(A,O,sourceLen,0,1,mapperFunction,T),A}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(348)()},function(module,exports,__webpack_require__){"use strict";var hasSymbols=__webpack_require__(34)(),polyfill=__webpack_require__(349),getInferredName=__webpack_require__(191),gOPD=Object.getOwnPropertyDescriptor,dP=Object.defineProperty,setProto=Object.setPrototypeOf,define=function defineGetter(getter){dP(Symbol.prototype,"description",{configurable:!0,enumerable:!1,get:getter})};module.exports=function shimSymbolDescription(){if(!hasSymbols)return!1;var desc=gOPD(Symbol.prototype,"description"),getter=polyfill(),isMissing=!desc||"function"!=typeof desc.get,isBroken=!isMissing&&(void 0!==Symbol().description||""!==Symbol("").description);if(isMissing||isBroken){if(!getInferredName)return function shimGlobalSymbol(getter){var origSym=Function.apply.bind(Symbol),emptyStrings=Object.create?Object.create(null):{},SymNew=function Symbol(){var sym=origSym(this,arguments);return arguments.length>0&&""===arguments[0]&&(emptyStrings[sym]=!0),sym};SymNew.prototype=Symbol.prototype,setProto(SymNew,Symbol),Symbol=SymNew;var boundGetter=Function.call.bind(getter),wrappedGetter=function description(){var symbolDescription=boundGetter(this);return emptyStrings[this]?"":symbolDescription};return define(wrappedGetter),wrappedGetter}(getter);define(getter)}return getter}},function(module,exports,__webpack_require__){"use strict";var hasSymbols=__webpack_require__(34)(),implementation=__webpack_require__(350),gOPD=Object.getOwnPropertyDescriptor;module.exports=function descriptionPolyfill(){if(!hasSymbols||"function"!=typeof gOPD)return null;var desc=gOPD(Symbol.prototype,"description");if(!desc||"function"!=typeof desc.get)return implementation;var emptySymbolDesc=desc.get.call(Symbol());return(void 0===emptySymbolDesc||""===emptySymbolDesc)&&"a"===desc.get.call(Symbol("a"))?desc.get:implementation}},function(module,exports,__webpack_require__){"use strict";var getSymbolDescription=__webpack_require__(190);module.exports=function description(){return getSymbolDescription(this)}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(352)()},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(353),define=__webpack_require__(6);module.exports=function shimEntries(){var polyfill=getPolyfill();return define(Object,{fromEntries:polyfill},{fromEntries:function testEntries(){return Object.fromEntries!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(354);module.exports=function getPolyfill(){return"function"==typeof Object.fromEntries?Object.fromEntries:implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(56),adder=function addDataProperty(key,value){var propertyKey=ES.ToPropertyKey(key);ES.CreateDataPropertyOrThrow(this,propertyKey,value)},hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol("foo");module.exports=function fromEntries(iterable){ES.RequireObjectCoercible(iterable);var obj={};if(!hasSymbols){if(!ES.IsArray(iterable))throw new TypeError("this environment lacks native Symbols, and can not support non-Array iterables");return function assign(obj,entries){for(var i=0;i<entries.length;++i){var entry=entries[i];if("Object"!==ES.Type(entry))throw new TypeError("iterator returned a non-object; entry expected");var key=ES.Get(entry,"0"),value=ES.Get(entry,"1"),propertyKey=ES.ToPropertyKey(key);ES.CreateDataPropertyOrThrow(obj,propertyKey,value)}}(obj,iterable),obj}return ES.AddEntriesFromIterable(obj,iterable,adder)}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(356),__webpack_require__(365),__webpack_require__(369)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(357)()},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(6),hasSymbols=__webpack_require__(34)(),getPolyfill=__webpack_require__(358),regexpMatchAllPolyfill=__webpack_require__(200),defineP=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor;module.exports=function shimMatchAll(){var polyfill=getPolyfill();if(define(String.prototype,{matchAll:polyfill},{matchAll:function(){return String.prototype.matchAll!==polyfill}}),hasSymbols){var symbol=Symbol.matchAll||(Symbol.for?Symbol.for("Symbol.matchAll"):Symbol("Symbol.matchAll"));if(define(Symbol,{matchAll:symbol},{matchAll:function(){return Symbol.matchAll!==symbol}}),defineP&&gOPD){var desc=gOPD(Symbol,symbol);desc&&!desc.configurable||defineP(Symbol,symbol,{configurable:!1,enumerable:!1,value:symbol,writable:!1})}var regexpMatchAll=regexpMatchAllPolyfill(),func={};func[symbol]=regexpMatchAll;var predicate={};predicate[symbol]=function(){return RegExp.prototype[symbol]!==regexpMatchAll},define(RegExp.prototype,func,predicate)}return polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(359);module.exports=function getPolyfill(){return String.prototype.matchAll||implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(56),hasSymbols=__webpack_require__(34)(),regexpMatchAllPolyfill=__webpack_require__(200),getMatcher=function getMatcher(regexp){var matcherPolyfill=regexpMatchAllPolyfill();if(hasSymbols&&"symbol"==typeof Symbol.matchAll){var matcher=ES.GetMethod(regexp,Symbol.matchAll);return matcher===RegExp.prototype[Symbol.matchAll]&&matcher!==matcherPolyfill?matcherPolyfill:matcher}if(ES.IsRegExp(regexp))return matcherPolyfill};module.exports=function matchAll(regexp){var O=ES.RequireObjectCoercible(this);if(null!=regexp){var matcher=getMatcher(regexp);if(void 0!==matcher)return ES.Call(matcher,regexp,[O])}var S=ES.ToString(O),rx=new RegExp(regexp,"g");return ES.Call(getMatcher(rx),rx,[S])}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(56),flagsGetter=__webpack_require__(361),RegExpStringIterator=__webpack_require__(363),OrigRegExp=RegExp,supportsConstructingWithFlags="flags"in RegExp.prototype,regexMatchAll=function SymbolMatchAll(string){var R=this;if("Object"!==ES.Type(R))throw new TypeError('"this" value must be an Object');var S=ES.ToString(string),tmp=function constructRegex(C,R){var flags="flags"in R?ES.Get(R,"flags"):ES.ToString(flagsGetter(R));return{flags:flags,matcher:new C(supportsConstructingWithFlags&&"string"==typeof flags?R:C===OrigRegExp?R.source:R,flags)}}(ES.SpeciesConstructor(R,OrigRegExp),R),flags=tmp.flags,matcher=tmp.matcher,lastIndex=ES.ToLength(ES.Get(R,"lastIndex"));return ES.Set(matcher,"lastIndex",lastIndex,!0),function CreateRegExpStringIterator(R,S,global,fullUnicode){if("String"!==ES.Type(S))throw new TypeError('"S" value must be a String');if("Boolean"!==ES.Type(global))throw new TypeError('"global" value must be a Boolean');if("Boolean"!==ES.Type(fullUnicode))throw new TypeError('"fullUnicode" value must be a Boolean');return new RegExpStringIterator(R,S,global,fullUnicode)}(matcher,S,flags.indexOf("g")>-1,flags.indexOf("u")>-1)},defineP=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor;if(defineP&&gOPD){var desc=gOPD(regexMatchAll,"name");desc&&desc.configurable&&defineP(regexMatchAll,"name",{value:"[Symbol.matchAll]"})}module.exports=regexMatchAll},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(6),implementation=__webpack_require__(201),getPolyfill=__webpack_require__(202),shim=__webpack_require__(362),flagsBound=Function.call.bind(implementation);define(flagsBound,{getPolyfill:getPolyfill,implementation:implementation,shim:shim}),module.exports=flagsBound},function(module,exports,__webpack_require__){"use strict";var supportsDescriptors=__webpack_require__(6).supportsDescriptors,getPolyfill=__webpack_require__(202),gOPD=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,TypeErr=TypeError,getProto=Object.getPrototypeOf,regex=/a/;module.exports=function shimFlags(){if(!supportsDescriptors||!getProto)throw new TypeErr("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var polyfill=getPolyfill(),proto=getProto(regex),descriptor=gOPD(proto,"flags");return descriptor&&descriptor.get===polyfill||defineProperty(proto,"flags",{configurable:!0,enumerable:!1,get:polyfill}),polyfill}},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(6),ES=__webpack_require__(56),GetIntrinsic=__webpack_require__(10),hasSymbols=__webpack_require__(34)(),hidden=__webpack_require__(364)(),RegExpStringIterator=function RegExpStringIterator(R,S,global,fullUnicode){if("String"!==ES.Type(S))throw new TypeError("S must be a string");if("Boolean"!==ES.Type(global))throw new TypeError("global must be a boolean");if("Boolean"!==ES.Type(fullUnicode))throw new TypeError("fullUnicode must be a boolean");hidden.set(this,"[[IteratingRegExp]]",R),hidden.set(this,"[[IteratedString]]",S),hidden.set(this,"[[Global]]",global),hidden.set(this,"[[Unicode]]",fullUnicode),hidden.set(this,"[[Done]]",!1)},IteratorPrototype=GetIntrinsic("%IteratorPrototype%",!0);if(IteratorPrototype&&(RegExpStringIterator.prototype=ES.ObjectCreate(IteratorPrototype)),define(RegExpStringIterator.prototype,{next:function next(){var O=this;if("Object"!==ES.Type(O))throw new TypeError("receiver must be an object");if(!(O instanceof RegExpStringIterator&&hidden.has(O,"[[IteratingRegExp]]")&&hidden.has(O,"[[IteratedString]]")&&hidden.has(O,"[[Global]]")&&hidden.has(O,"[[Unicode]]")&&hidden.has(O,"[[Done]]")))throw new TypeError('"this" value must be a RegExpStringIterator instance');if(hidden.get(O,"[[Done]]"))return ES.CreateIterResultObject(void 0,!0);var R=hidden.get(O,"[[IteratingRegExp]]"),S=hidden.get(O,"[[IteratedString]]"),global=hidden.get(O,"[[Global]]"),fullUnicode=hidden.get(O,"[[Unicode]]"),match=ES.RegExpExec(R,S);if(null===match)return hidden.set(O,"[[Done]]",!0),ES.CreateIterResultObject(void 0,!0);if(global){if(""===ES.ToString(ES.Get(match,"0"))){var thisIndex=ES.ToLength(ES.Get(R,"lastIndex")),nextIndex=ES.AdvanceStringIndex(S,thisIndex,fullUnicode);ES.Set(R,"lastIndex",nextIndex,!0)}return ES.CreateIterResultObject(match,!1)}return hidden.set(O,"[[Done]]",!0),ES.CreateIterResultObject(match,!1)}}),hasSymbols){var defineP=Object.defineProperty;if(Symbol.toStringTag&&(defineP?defineP(RegExpStringIterator.prototype,Symbol.toStringTag,{configurable:!0,enumerable:!1,value:"RegExp String Iterator",writable:!1}):RegExpStringIterator.prototype[Symbol.toStringTag]="RegExp String Iterator"),!IteratorPrototype&&Symbol.iterator){var func={};func[Symbol.iterator]=RegExpStringIterator.prototype[Symbol.iterator]||function SymbolIterator(){return this};var predicate={};predicate[Symbol.iterator]=function(){return RegExpStringIterator.prototype[Symbol.iterator]!==func[Symbol.iterator]},define(RegExpStringIterator.prototype,func,predicate)}}module.exports=RegExpStringIterator},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(6);module.exports=function getHiddenKeyManager(){var symbolCache={},makeKey=function key(prop){return symbolCache["$"+prop]?symbolCache["$"+prop]:"function"==typeof Symbol?(symbolCache["$"+prop]=Symbol(prop),symbolCache["$"+prop]):"___ "+prop+" ___"};return{get:function get(obj,prop){return obj[makeKey(prop)]},has:function has(obj,prop){return makeKey(prop)in obj},set:function set(obj,prop,value){var key=makeKey(prop);define.supportsDescriptors?Object.defineProperty(obj,key,{configurable:!1,enumerable:!1,value:value,writable:!0}):obj[key]=value}}}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(366)()},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(6),getPolyfill=__webpack_require__(367);module.exports=function shimGlobal(){var polyfill=getPolyfill();if(define.supportsDescriptors){var descriptor=Object.getOwnPropertyDescriptor(polyfill,"globalThis");(!descriptor||descriptor.configurable&&(descriptor.enumerable||descriptor.writable||globalThis!==polyfill))&&Object.defineProperty(polyfill,"globalThis",{configurable:!0,enumerable:!1,value:polyfill,writable:!1})}else"object"==typeof globalThis&&globalThis===polyfill||(polyfill.globalThis=polyfill);return polyfill}},function(module,exports,__webpack_require__){"use strict";(function(global){var implementation=__webpack_require__(368);module.exports=function getPolyfill(){return"object"==typeof global&&global&&global.Math===Math&&global.Array===Array?global:implementation}}).call(this,__webpack_require__(22))},function(module,exports,__webpack_require__){"use strict";(function(global){"undefined"!=typeof self?module.exports=self:"undefined"!=typeof window?module.exports=window:module.exports=void 0!==global?global:Function("return this")()}).call(this,__webpack_require__(22))},function(module,exports,__webpack_require__){"use strict";__webpack_require__(370)()},function(module,exports,__webpack_require__){"use strict";var requirePromise=__webpack_require__(136),getPolyfill=__webpack_require__(371),define=__webpack_require__(6);module.exports=function shimAllSettled(){requirePromise();var polyfill=getPolyfill();return define(Promise,{allSettled:polyfill},{allSettled:function testAllSettled(){return Promise.allSettled!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var requirePromise=__webpack_require__(136),implementation=__webpack_require__(372);module.exports=function getPolyfill(){return requirePromise(),"function"==typeof Promise.allSettled?Promise.allSettled:implementation}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(136)();var ES=__webpack_require__(135),getIntrinsic=__webpack_require__(10),bind=__webpack_require__(23),all=bind.call(Function.call,getIntrinsic("%Promise_all%")),reject=bind.call(Function.call,getIntrinsic("%Promise_reject%"));module.exports=function allSettled(iterable){var C=this;if("Object"!==ES.Type(C))throw new TypeError("`this` value must be an object");return all(C,Array.from(iterable,(function(item){var itemPromise=ES.PromiseResolve(C,item);try{return itemPromise.then((function(value){return{status:"fulfilled",value:value}}),(function(reason){return{status:"rejected",reason:reason}}))}catch(e){return reject(C,e)}})))}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(374),__webpack_require__(393),__webpack_require__(394),__webpack_require__(395),__webpack_require__(396),__webpack_require__(397)},function(module,exports,__webpack_require__){__webpack_require__(28),__webpack_require__(16),__webpack_require__(20),__webpack_require__(379),__webpack_require__(24),__webpack_require__(380),__webpack_require__(381),__webpack_require__(25),__webpack_require__(382),__webpack_require__(383),__webpack_require__(384),__webpack_require__(385),__webpack_require__(386),__webpack_require__(387),__webpack_require__(388),__webpack_require__(389),__webpack_require__(390),__webpack_require__(391),__webpack_require__(392);var path=__webpack_require__(139);module.exports=path.Symbol},function(module,exports,__webpack_require__){var global=__webpack_require__(5),setGlobal=__webpack_require__(138),store=global["__core-js_shared__"]||setGlobal("__core-js_shared__",{});module.exports=store},function(module,exports,__webpack_require__){var getBuiltIn=__webpack_require__(58),getOwnPropertyNamesModule=__webpack_require__(91),getOwnPropertySymbolsModule=__webpack_require__(142),anObject=__webpack_require__(13);module.exports=getBuiltIn("Reflect","ownKeys")||function ownKeys(it){var keys=getOwnPropertyNamesModule.f(anObject(it)),getOwnPropertySymbols=getOwnPropertySymbolsModule.f;return getOwnPropertySymbols?keys.concat(getOwnPropertySymbols(it)):keys}},function(module,exports,__webpack_require__){"use strict";var classof=__webpack_require__(211),test={};test[__webpack_require__(8)("toStringTag")]="z",module.exports="[object z]"!==String(test)?function toString(){return"[object "+classof(this)+"]"}:test.toString},function(module,exports,__webpack_require__){var toIndexedObject=__webpack_require__(37),nativeGetOwnPropertyNames=__webpack_require__(91).f,toString={}.toString,windowNames="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];module.exports.f=function getOwnPropertyNames(it){return windowNames&&"[object Window]"==toString.call(it)?function(it){try{return nativeGetOwnPropertyNames(it)}catch(error){return windowNames.slice()}}(it):nativeGetOwnPropertyNames(toIndexedObject(it))}},function(module,exports,__webpack_require__){__webpack_require__(11)("asyncIterator")},function(module,exports,__webpack_require__){__webpack_require__(11)("hasInstance")},function(module,exports,__webpack_require__){__webpack_require__(11)("isConcatSpreadable")},function(module,exports,__webpack_require__){__webpack_require__(11)("match")},function(module,exports,__webpack_require__){__webpack_require__(11)("matchAll")},function(module,exports,__webpack_require__){__webpack_require__(11)("replace")},function(module,exports,__webpack_require__){__webpack_require__(11)("search")},function(module,exports,__webpack_require__){__webpack_require__(11)("species")},function(module,exports,__webpack_require__){__webpack_require__(11)("split")},function(module,exports,__webpack_require__){__webpack_require__(11)("toPrimitive")},function(module,exports,__webpack_require__){__webpack_require__(11)("toStringTag")},function(module,exports,__webpack_require__){__webpack_require__(11)("unscopables")},function(module,exports,__webpack_require__){__webpack_require__(47)(Math,"Math",!0)},function(module,exports,__webpack_require__){var global=__webpack_require__(5);__webpack_require__(47)(global.JSON,"JSON",!0)},function(module,exports,__webpack_require__){__webpack_require__(11)("asyncDispose")},function(module,exports,__webpack_require__){__webpack_require__(11)("dispose")},function(module,exports,__webpack_require__){__webpack_require__(11)("observable")},function(module,exports,__webpack_require__){__webpack_require__(11)("patternMatch")},function(module,exports,__webpack_require__){__webpack_require__(11)("replaceAll")},function(module,exports,__webpack_require__){"use strict";__webpack_require__(36).window.STORYBOOK_REACT_CLASSES={}},,function(module,exports,__webpack_require__){"use strict";var IteratorPrototype=__webpack_require__(216).IteratorPrototype,create=__webpack_require__(59),createPropertyDescriptor=__webpack_require__(67),setToStringTag=__webpack_require__(47),Iterators=__webpack_require__(76),returnThis=function(){return this};module.exports=function(IteratorConstructor,NAME,next){var TO_STRING_TAG=NAME+" Iterator";return IteratorConstructor.prototype=create(IteratorPrototype,{next:createPropertyDescriptor(1,next)}),setToStringTag(IteratorConstructor,TO_STRING_TAG,!1,!0),Iterators[TO_STRING_TAG]=returnThis,IteratorConstructor}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(9);module.exports=function(it){if(!isObject(it)&&null!==it)throw TypeError("Can't set "+String(it)+" as a prototype");return it}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(28),__webpack_require__(2),Object.defineProperty(exports,"__esModule",{value:!0}),exports.raw=exports.getStorybook=exports.forceReRender=exports.setAddon=exports.clearDecorators=exports.addParameters=exports.addDecorator=exports.configure=exports.storiesOf=void 0;var _client=__webpack_require__(403);__webpack_require__(580);var _render=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(581));var api=(0,_client.start)(_render.default);exports.storiesOf=function storiesOf(kind,m){return api.clientApi.storiesOf(kind,m).addParameters({framework:"react"})};exports.configure=function configure(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return api.configure.apply(api,args.concat(["react"]))};var addDecorator=api.clientApi.addDecorator;exports.addDecorator=addDecorator;var addParameters=api.clientApi.addParameters;exports.addParameters=addParameters;var clearDecorators=api.clientApi.clearDecorators;exports.clearDecorators=clearDecorators;var setAddon=api.clientApi.setAddon;exports.setAddon=setAddon;var forceReRender=api.forceReRender;exports.forceReRender=forceReRender;var getStorybook=api.clientApi.getStorybook;exports.getStorybook=getStorybook;var raw=api.clientApi.raw;exports.raw=raw},function(module,exports,__webpack_require__){module.exports=__webpack_require__(404).default},function(module,exports,__webpack_require__){"use strict";__webpack_require__(2),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(405)).default;exports.default=_default},function(module,exports,__webpack_require__){"use strict";__webpack_require__(2),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _clientApi=__webpack_require__(150),_utils=__webpack_require__(105);var _default={start:function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(557)).default,toId:_utils.toId,ClientApi:_clientApi.ClientApi,ConfigApi:_clientApi.ConfigApi,StoryStore:_clientApi.StoryStore};exports.default=_default},function(module,exports,__webpack_require__){var $=__webpack_require__(3),fails=__webpack_require__(7),toIndexedObject=__webpack_require__(37),nativeGetOwnPropertyDescriptor=__webpack_require__(57).f,DESCRIPTORS=__webpack_require__(12),FAILS_ON_PRIMITIVES=fails((function(){nativeGetOwnPropertyDescriptor(1)}));$({target:"Object",stat:!0,forced:!DESCRIPTORS||FAILS_ON_PRIMITIVES,sham:!DESCRIPTORS},{getOwnPropertyDescriptor:function getOwnPropertyDescriptor(it,key){return nativeGetOwnPropertyDescriptor(toIndexedObject(it),key)}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),__webpack_require__(24),__webpack_require__(25),__webpack_require__(28),__webpack_require__(96),__webpack_require__(14),__webpack_require__(60),__webpack_require__(39),__webpack_require__(17),__webpack_require__(78),__webpack_require__(152),__webpack_require__(61),__webpack_require__(40),__webpack_require__(2),__webpack_require__(97),__webpack_require__(79),__webpack_require__(26),__webpack_require__(16),__webpack_require__(62),__webpack_require__(27),__webpack_require__(15),__webpack_require__(21),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.defaultDecorateStory=void 0;var _utilDeprecate=_interopRequireDefault(__webpack_require__(153)),_isPlainObject=_interopRequireDefault(__webpack_require__(606)),_clientLogger=__webpack_require__(63),_addons=_interopRequireDefault(__webpack_require__(80)),_coreEvents=_interopRequireDefault(__webpack_require__(82)),_utils=__webpack_require__(105),_mergeWith=_interopRequireDefault(__webpack_require__(454)),_isEqual=_interopRequireDefault(__webpack_require__(513)),_get=_interopRequireDefault(__webpack_require__(259)),_subscriptions_store=_interopRequireDefault(__webpack_require__(260)),_hooks=__webpack_require__(169);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var merge=function merge(a,b){return(0,_mergeWith.default)({},a,b,(function(objValue,srcValue){return Array.isArray(srcValue)&&Array.isArray(objValue)?(srcValue.forEach((function(s){objValue.find((function(o){return o===s||(0,_isEqual.default)(o,s)}))||objValue.push(s)})),objValue):Array.isArray(objValue)?(_clientLogger.logger.log("the types mismatch, picking",objValue),objValue):void 0}))},defaultContext={id:"unspecified",name:"unspecified",kind:"unspecified",parameters:{}},defaultDecorateStory=function defaultDecorateStory(storyFn,decorators){return decorators.reduce((function(decorated,decorator){return function(){var context=arguments.length>0&&void 0!==arguments[0]?arguments[0]:defaultContext;return decorator((function(p){return decorated(p?Object.assign({},context,{},p,{parameters:Object.assign({},context.parameters,{},p.parameters)}):context)}),context)}}),storyFn)};exports.defaultDecorateStory=defaultDecorateStory;var metaSubscriptionHandler=(0,_utilDeprecate.default)(_subscriptions_store.default.register,"Events.REGISTER_SUBSCRIPTION is deprecated and will be removed in 6.0. Please use useEffect from @storybook/client-api instead."),metaSubscription=function metaSubscription(){return _addons.default.getChannel().on(_coreEvents.default.REGISTER_SUBSCRIPTION,metaSubscriptionHandler),function(){return _addons.default.getChannel().removeListener(_coreEvents.default.REGISTER_SUBSCRIPTION,metaSubscriptionHandler)}},withSubscriptionTracking=function withSubscriptionTracking(storyFn){if(!_addons.default.hasChannel())return storyFn();_subscriptions_store.default.markAllAsUnused(),_subscriptions_store.default.register(metaSubscription);var result=storyFn();return _subscriptions_store.default.clearUnused(),result};exports.default=function ClientApi(_ref){var _this=this,storyStore=_ref.storyStore,_ref$decorateStory=_ref.decorateStory,decorateStory=void 0===_ref$decorateStory?defaultDecorateStory:_ref$decorateStory;if(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ClientApi),this._storyStore=void 0,this._addons=void 0,this._globalDecorators=void 0,this._globalParameters=void 0,this._decorateStory=void 0,this.setAddon=function(addon){_this._addons=Object.assign({},_this._addons,{},addon)},this.getSeparators=function(){return Object.assign({},{hierarchyRootSeparator:"|",hierarchySeparator:/\/|\./},_this._globalParameters.options)},this.addDecorator=function(decorator){_this._globalDecorators.push(decorator)},this.addParameters=function(parameters){_this._globalParameters=Object.assign({},_this._globalParameters,{},parameters,{options:Object.assign({},merge((0,_get.default)(_this._globalParameters,"options",{}),(0,_get.default)(parameters,"options",{}))),docs:Object.assign({},merge((0,_get.default)(_this._globalParameters,"docs",{}),(0,_get.default)(parameters,"docs",{})))})},this.clearDecorators=function(){_this._globalDecorators=[]},this.storiesOf=function(kind,m){if(!kind&&"string"!=typeof kind)throw new Error("Invalid or missing kind provided for stories, should be a string");if(m||_clientLogger.logger.warn("Missing 'module' parameter for story with a kind of '".concat(kind,"'. It will break your HMR")),m){var proto=Object.getPrototypeOf(m);proto.exports&&proto.exports.default&&_clientLogger.logger.error("Illegal mix of CSF default export and storiesOf calls in a single file: ".concat(proto.i))}m&&m.hot&&m.hot.dispose&&m.hot.dispose((function(){var _storyStore=_this._storyStore;_storyStore.removeStoryKind(kind),_storyStore.incrementRevision()}));var localDecorators=[],localParameters={},hasAdded=!1,api={kind:kind.toString(),add:function add(){return api},addDecorator:function addDecorator(){return api},addParameters:function addParameters(){return api}};return Object.keys(_this._addons).forEach((function(name){var addon=_this._addons[name];api[name]=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return addon.apply(api,args),api}})),api.add=function(storyName,storyFn,parameters){hasAdded=!0;var _globalParameters=_this._globalParameters,_globalDecorators=_this._globalDecorators,id=(0,_utils.toId)(kind,storyName);if("string"!=typeof storyName)throw new Error('Invalid or missing storyName provided for a "'.concat(kind,'" story.'));m&&m.hot&&m.hot.dispose&&m.hot.dispose((function(){_this._storyStore.remove(id)}));var fileName=m&&m.id?"".concat(m.id):void 0,_this$getSeparators=_this.getSeparators(),allParam=[{options:{hierarchyRootSeparator:_this$getSeparators.hierarchyRootSeparator,hierarchySeparator:_this$getSeparators.hierarchySeparator}},_globalParameters,localParameters,parameters].reduce((function(acc,p){return p&&Object.entries(p).forEach((function(_ref2){var _ref3=_slicedToArray(_ref2,2),key=_ref3[0],value=_ref3[1],existingValue=acc[key];Array.isArray(value)?acc[key]=value:(0,_isPlainObject.default)(value)&&(0,_isPlainObject.default)(existingValue)?acc[key]=merge(existingValue,value):acc[key]=value})),acc}),{fileName:fileName});return _this._storyStore.addStory({id:id,kind:kind,name:storyName,storyFn:storyFn,parameters:allParam},{applyDecorators:(0,_hooks.applyHooks)(_this._decorateStory),getDecorators:function getDecorators(){return[].concat(_toConsumableArray(allParam.decorators||[]),localDecorators,_toConsumableArray(_globalDecorators),[withSubscriptionTracking])}}),api},api.addDecorator=function(decorator){return hasAdded&&_clientLogger.logger.warn("You have added a decorator to the kind '".concat(kind,"' after a story has already been added.\nIn Storybook 4 this applied the decorator only to subsequent stories. In Storybook 5+ it applies to all stories.\nThis is probably not what you intended. Read more here: https://github.com/storybookjs/storybook/blob/master/MIGRATION.md")),localDecorators.push(decorator),api},api.addParameters=function(parameters){return localParameters=Object.assign({},localParameters,{},parameters),api},api},this.getStorybook=function(){return _this._storyStore.getStoryKinds().map((function(kind){var fileName=_this._storyStore.getStoryFileName(kind),stories=_this._storyStore.getStories(kind).map((function(name){return{name:name,render:_this._storyStore.getStoryWithContext(kind,name)}}));return{kind:kind,fileName:fileName,stories:stories}}))},this.raw=function(){return _this._storyStore.raw()},this.store=function(){return _this._storyStore},this._storyStore=storyStore,this._addons={},this._globalDecorators=[],this._globalParameters={},this._decorateStory=decorateStory,!storyStore)throw new Error("storyStore is required")}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(74),toObject=__webpack_require__(32),callWithSafeIterationClosing=__webpack_require__(219),isArrayIteratorMethod=__webpack_require__(220),toLength=__webpack_require__(31),createProperty=__webpack_require__(143),getIteratorMethod=__webpack_require__(221);module.exports=function from(arrayLike){var length,result,step,iterator,next,O=toObject(arrayLike),C="function"==typeof this?this:Array,argumentsLength=arguments.length,mapfn=argumentsLength>1?arguments[1]:void 0,mapping=void 0!==mapfn,index=0,iteratorMethod=getIteratorMethod(O);if(mapping&&(mapfn=bind(mapfn,argumentsLength>2?arguments[2]:void 0,2)),null==iteratorMethod||C==Array&&isArrayIteratorMethod(iteratorMethod))for(result=new C(length=toLength(O.length));length>index;index++)createProperty(result,index,mapping?mapfn(O[index],index):O[index]);else for(next=(iterator=iteratorMethod.call(O)).next,result=new C;!(step=next.call(iterator)).done;index++)createProperty(result,index,mapping?callWithSafeIterationClosing(iterator,mapfn,[step.value,index],!0):step.value);return result.length=index,result}},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(49),toObject=__webpack_require__(32),IndexedObject=__webpack_require__(88),toLength=__webpack_require__(31),createMethod=function(IS_RIGHT){return function(that,callbackfn,argumentsLength,memo){aFunction(callbackfn);var O=toObject(that),self=IndexedObject(O),length=toLength(O.length),index=IS_RIGHT?length-1:0,i=IS_RIGHT?-1:1;if(argumentsLength<2)for(;;){if(index in self){memo=self[index],index+=i;break}if(index+=i,IS_RIGHT?index<0:length<=index)throw TypeError("Reduce of empty array with no initial value")}for(;IS_RIGHT?index>=0:length>index;index+=i)index in self&&(memo=callbackfn(memo,self[index],index,O));return memo}};module.exports={left:createMethod(!1),right:createMethod(!0)}},function(module,exports,__webpack_require__){"use strict";var DESCRIPTORS=__webpack_require__(12),fails=__webpack_require__(7),objectKeys=__webpack_require__(73),getOwnPropertySymbolsModule=__webpack_require__(142),propertyIsEnumerableModule=__webpack_require__(87),toObject=__webpack_require__(32),IndexedObject=__webpack_require__(88),nativeAssign=Object.assign;module.exports=!nativeAssign||fails((function(){var A={},B={},symbol=Symbol();return A[symbol]=7,"abcdefghijklmnopqrst".split("").forEach((function(chr){B[chr]=chr})),7!=nativeAssign({},A)[symbol]||"abcdefghijklmnopqrst"!=objectKeys(nativeAssign({},B)).join("")}))?function assign(target,source){for(var T=toObject(target),argumentsLength=arguments.length,index=1,getOwnPropertySymbols=getOwnPropertySymbolsModule.f,propertyIsEnumerable=propertyIsEnumerableModule.f;argumentsLength>index;)for(var key,S=IndexedObject(arguments[index++]),keys=getOwnPropertySymbols?objectKeys(S).concat(getOwnPropertySymbols(S)):objectKeys(S),length=keys.length,j=0;length>j;)key=keys[j++],DESCRIPTORS&&!propertyIsEnumerable.call(S,key)||(T[key]=S[key]);return T}:nativeAssign},function(module,exports,__webpack_require__){"use strict";__webpack_require__(14),__webpack_require__(40),__webpack_require__(2),__webpack_require__(16),__webpack_require__(154),__webpack_require__(98),__webpack_require__(15),Object.defineProperty(exports,"__esModule",{value:!0}),exports.addons=exports.AddonStore=void 0;var _global=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(36)),_clientLogger=__webpack_require__(63),_types=__webpack_require__(228);var AddonStore=function AddonStore(){var _this=this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AddonStore),this.loaders={},this.elements={},this.channel=void 0,this.promise=void 0,this.resolve=void 0,this.getChannel=function(){if(!_this.channel)throw new Error("Accessing non-existent addons channel, see https://storybook.js.org/basics/faq/#why-is-there-no-addons-channel");return _this.channel},this.ready=function(){return _this.promise},this.hasChannel=function(){return!!_this.channel},this.setChannel=function(channel){_this.channel=channel,_this.resolve()},this.getElements=function(type){return _this.elements[type]||(_this.elements[type]={}),_this.elements[type]},this.addPanel=function(name,options){_this.add(name,Object.assign({type:_types.types.PANEL},options))},this.add=function(name,addon){var type=addon.type;_this.getElements(type)[name]=Object.assign({id:name},addon)},this.register=function(name,registerCallback){_this.loaders[name]&&_clientLogger.logger.warn("".concat(name," was loaded twice, this could have bad side-effects")),_this.loaders[name]=registerCallback},this.loadAddons=function(api){Object.values(_this.loaders).forEach((function(value){return value(api)}))},this.promise=new Promise((function(res){_this.resolve=function(){return res(_this.getChannel())}}))};exports.AddonStore=AddonStore;var KEY="__STORYBOOK_ADDONS";var addons=function getAddonsStore(){return _global.default[KEY]||(_global.default[KEY]=new AddonStore),_global.default[KEY]}();exports.addons=addons},function(module,exports,__webpack_require__){var global=__webpack_require__(5);module.exports=global.Promise},function(module,exports,__webpack_require__){var flush,head,last,notify,toggle,node,promise,then,global=__webpack_require__(5),getOwnPropertyDescriptor=__webpack_require__(57).f,classof=__webpack_require__(38),macrotask=__webpack_require__(155).set,userAgent=__webpack_require__(95),MutationObserver=global.MutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,IS_NODE="process"==classof(process),queueMicrotaskDescriptor=getOwnPropertyDescriptor(global,"queueMicrotask"),queueMicrotask=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value;queueMicrotask||(flush=function(){var parent,fn;for(IS_NODE&&(parent=process.domain)&&parent.exit();head;){fn=head.fn,head=head.next;try{fn()}catch(error){throw head?notify():last=void 0,error}}last=void 0,parent&&parent.enter()},IS_NODE?notify=function(){process.nextTick(flush)}:MutationObserver&&!/(iphone|ipod|ipad).*applewebkit/i.test(userAgent)?(toggle=!0,node=document.createTextNode(""),new MutationObserver(flush).observe(node,{characterData:!0}),notify=function(){node.data=toggle=!toggle}):Promise&&Promise.resolve?(promise=Promise.resolve(void 0),then=promise.then,notify=function(){then.call(promise,flush)}):notify=function(){macrotask.call(global,flush)}),module.exports=queueMicrotask||function(fn){var task={fn:fn,next:void 0};last&&(last.next=task),head||(head=task,notify()),last=task}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(13),isObject=__webpack_require__(9),newPromiseCapability=__webpack_require__(227);module.exports=function(C,x){if(anObject(C),isObject(x)&&x.constructor===C)return x;var promiseCapability=newPromiseCapability.f(C);return(0,promiseCapability.resolve)(x),promiseCapability.promise}},function(module,exports,__webpack_require__){var global=__webpack_require__(5);module.exports=function(a,b){var console=global.console;console&&console.error&&(1===arguments.length?console.error(a):console.error(a,b))}},function(module,exports){module.exports=function(exec){try{return{error:!1,value:exec()}}catch(error){return{error:!0,value:error}}}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(28),__webpack_require__(102),__webpack_require__(2),Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeDecorator=void 0;var _utilDeprecate=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(153));exports.makeDecorator=function makeDecorator(_ref){var name=_ref.name,parameterName=_ref.parameterName,wrapper=_ref.wrapper,_ref$skipIfNoParamete=_ref.skipIfNoParametersOrOptions,skipIfNoParametersOrOptions=void 0!==_ref$skipIfNoParamete&&_ref$skipIfNoParamete,_ref$allowDeprecatedU=_ref.allowDeprecatedUsage,allowDeprecatedUsage=void 0!==_ref$allowDeprecatedU&&_ref$allowDeprecatedU,decorator=function decorator(options){return function(getStory,context){var parameters=context.parameters&&context.parameters[parameterName];return parameters&&parameters.disable?getStory(context):!skipIfNoParametersOrOptions||options||parameters?wrapper(getStory,context,{options:options,parameters:parameters}):getStory(context)}};return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return"function"==typeof args[0]?decorator().apply(void 0,args):function(){for(var _len2=arguments.length,innerArgs=new Array(_len2),_key2=0;_key2<_len2;_key2++)innerArgs[_key2]=arguments[_key2];if(innerArgs.length>1)return decorator.apply(void 0,args).apply(void 0,innerArgs);if(allowDeprecatedUsage)return(0,_utilDeprecate.default)((function(context){return decorator.apply(void 0,args)(innerArgs[0],context)}),"Passing stories directly into ".concat(name,"() is deprecated,\n          instead use addDecorator(").concat(name,") and pass options with the '").concat(parameterName,"' parameter"));throw new Error("Passing stories directly into ".concat(name,"() is not allowed,\n        instead use addDecorator(").concat(name,") and pass options with the '").concat(parameterName,"' parameter"))}}}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(2),Object.defineProperty(exports,"__esModule",{value:!0}),exports.mockChannel=function mockChannel(){return new _channels.default({transport:{setHandler:function setHandler(){},send:function send(){}}})};var _channels=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(229))},function(module,exports,__webpack_require__){(function(global){var scope=void 0!==global&&global||"undefined"!=typeof self&&self||window,apply=Function.prototype.apply;function Timeout(id,clearFn){this._id=id,this._clearFn=clearFn}exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,scope,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,scope,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(timeout){timeout&&timeout.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(scope,this._id)},exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId),item._idleTimeout=msecs},exports.unenroll=function(item){clearTimeout(item._idleTimeoutId),item._idleTimeout=-1},exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;msecs>=0&&(item._idleTimeoutId=setTimeout((function onTimeout(){item._onTimeout&&item._onTimeout()}),msecs))},__webpack_require__(420),exports.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==global&&global.setImmediate||this&&this.setImmediate,exports.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==global&&global.clearImmediate||this&&this.clearImmediate}).call(this,__webpack_require__(22))},function(module,exports,__webpack_require__){(function(global,process){!function(global,undefined){"use strict";if(!global.setImmediate){var registerImmediate,nextHandle=1,tasksByHandle={},currentlyRunningATask=!1,doc=global.document,attachTo=Object.getPrototypeOf&&Object.getPrototypeOf(global);attachTo=attachTo&&attachTo.setTimeout?attachTo:global,"[object process]"==={}.toString.call(global.process)?function installNextTickImplementation(){registerImmediate=function(handle){process.nextTick((function(){runIfPresent(handle)}))}}():!function canUsePostMessage(){if(global.postMessage&&!global.importScripts){var postMessageIsAsynchronous=!0,oldOnMessage=global.onmessage;return global.onmessage=function(){postMessageIsAsynchronous=!1},global.postMessage("","*"),global.onmessage=oldOnMessage,postMessageIsAsynchronous}}()?global.MessageChannel?function installMessageChannelImplementation(){var channel=new MessageChannel;channel.port1.onmessage=function(event){runIfPresent(event.data)},registerImmediate=function(handle){channel.port2.postMessage(handle)}}():doc&&"onreadystatechange"in doc.createElement("script")?function installReadyStateChangeImplementation(){var html=doc.documentElement;registerImmediate=function(handle){var script=doc.createElement("script");script.onreadystatechange=function(){runIfPresent(handle),script.onreadystatechange=null,html.removeChild(script),script=null},html.appendChild(script)}}():function installSetTimeoutImplementation(){registerImmediate=function(handle){setTimeout(runIfPresent,0,handle)}}():function installPostMessageImplementation(){var messagePrefix="setImmediate$"+Math.random()+"$",onGlobalMessage=function(event){event.source===global&&"string"==typeof event.data&&0===event.data.indexOf(messagePrefix)&&runIfPresent(+event.data.slice(messagePrefix.length))};global.addEventListener?global.addEventListener("message",onGlobalMessage,!1):global.attachEvent("onmessage",onGlobalMessage),registerImmediate=function(handle){global.postMessage(messagePrefix+handle,"*")}}(),attachTo.setImmediate=function setImmediate(callback){"function"!=typeof callback&&(callback=new Function(""+callback));for(var args=new Array(arguments.length-1),i=0;i<args.length;i++)args[i]=arguments[i+1];var task={callback:callback,args:args};return tasksByHandle[nextHandle]=task,registerImmediate(nextHandle),nextHandle++},attachTo.clearImmediate=clearImmediate}function clearImmediate(handle){delete tasksByHandle[handle]}function runIfPresent(handle){if(currentlyRunningATask)setTimeout(runIfPresent,0,handle);else{var task=tasksByHandle[handle];if(task){currentlyRunningATask=!0;try{!function run(task){var callback=task.callback,args=task.args;switch(args.length){case 0:callback();break;case 1:callback(args[0]);break;case 2:callback(args[0],args[1]);break;case 3:callback(args[0],args[1],args[2]);break;default:callback.apply(undefined,args)}}(task)}finally{clearImmediate(handle),currentlyRunningATask=!1}}}}}("undefined"==typeof self?void 0===global?this:global:self)}).call(this,__webpack_require__(22),__webpack_require__(128))},function(module,exports,__webpack_require__){var global=__webpack_require__(5),task=__webpack_require__(155),FORCED=!global.setImmediate||!global.clearImmediate;__webpack_require__(3)({global:!0,bind:!0,enumerable:!0,forced:FORCED},{setImmediate:task.set,clearImmediate:task.clear})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),__webpack_require__(24),__webpack_require__(25),__webpack_require__(28),__webpack_require__(423),__webpack_require__(14),__webpack_require__(60),__webpack_require__(231),__webpack_require__(39),__webpack_require__(17),__webpack_require__(78),__webpack_require__(61),__webpack_require__(104),__webpack_require__(102),__webpack_require__(2),__webpack_require__(97),__webpack_require__(26),__webpack_require__(16),__webpack_require__(62),__webpack_require__(232),__webpack_require__(236),__webpack_require__(27),__webpack_require__(425),__webpack_require__(15),__webpack_require__(21),Object.defineProperty(exports,"__esModule",{value:!0}),exports.useMemo=function useMemo(nextCreate,deps){return useMemoLike("useMemo",nextCreate,deps)},exports.useCallback=function useCallback(callback,deps){return useMemoLike("useCallback",(function(){return callback}),deps)},exports.useRef=function useRef(initialValue){return useRefLike("useRef",initialValue)},exports.useState=function useState(initialState){return useStateLike("useState",initialState)},exports.useReducer=function useReducer(reducer,initialArg,init){var _useStateLike2=_slicedToArray(useStateLike("useReducer",null!=init?function(){return init(initialArg)}:initialArg),2),state=_useStateLike2[0],setState=_useStateLike2[1];return[state,function dispatch(action){return setState((function(prevState){return reducer(prevState,action)}))}]},exports.useEffect=useEffect,exports.useChannel=function useChannel(eventMap){var deps=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],channel=_public_api.default.getChannel();return useEffect((function(){return Object.entries(eventMap).forEach((function(_ref2){var _ref3=_slicedToArray(_ref2,2),type=_ref3[0],listener=_ref3[1];return channel.on(type,listener)})),function(){Object.entries(eventMap).forEach((function(_ref4){var _ref5=_slicedToArray(_ref4,2),type=_ref5[0],listener=_ref5[1];return channel.removeListener(type,listener)}))}}),[].concat(_toConsumableArray(Object.keys(eventMap)),_toConsumableArray(deps))),channel.emit.bind(channel)},exports.useStoryContext=useStoryContext,exports.useParameter=function useParameter(parameterKey,defaultValue){var parameters=useStoryContext().parameters;if(parameterKey)return parameters[parameterKey]||defaultValue;return},exports.applyHooks=exports.HooksContext=void 0;var _global=_interopRequireDefault(__webpack_require__(36)),_clientLogger=__webpack_require__(63),_coreEvents=__webpack_require__(82),_public_api=_interopRequireDefault(__webpack_require__(80));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var RenderEvents=[_coreEvents.STORY_RENDERED,_coreEvents.DOCS_RENDERED],HooksContext=function(){function HooksContext(){var _this=this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,HooksContext),this.hookListsMap=void 0,this.mountedDecorators=void 0,this.prevMountedDecorators=void 0,this.currentHooks=void 0,this.nextHookIndex=void 0,this.currentPhase=void 0,this.currentEffects=void 0,this.prevEffects=void 0,this.currentDecoratorName=void 0,this.hasUpdates=void 0,this.currentContext=void 0,this.renderListener=function(){_this.triggerEffects(),_this.currentContext=null,_this.removeRenderListeners()},this.init()}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(HooksContext,[{key:"init",value:function init(){this.hookListsMap=new WeakMap,this.mountedDecorators=new Set,this.prevMountedDecorators=this.mountedDecorators,this.currentHooks=[],this.nextHookIndex=0,this.currentPhase="NONE",this.currentEffects=[],this.prevEffects=[],this.currentDecoratorName=null,this.hasUpdates=!1,this.currentContext=null}},{key:"clean",value:function clean(){this.prevEffects.forEach((function(effect){effect.destroy&&effect.destroy()})),this.init(),this.removeRenderListeners()}},{key:"getNextHook",value:function getNextHook(){var hook=this.currentHooks[this.nextHookIndex];return this.nextHookIndex+=1,hook}},{key:"triggerEffects",value:function triggerEffects(){var _this2=this;this.prevEffects.forEach((function(effect){!_this2.currentEffects.includes(effect)&&effect.destroy&&effect.destroy()})),this.currentEffects.forEach((function(effect){_this2.prevEffects.includes(effect)||(effect.destroy=effect.create())})),this.prevEffects=this.currentEffects,this.currentEffects=[]}},{key:"addRenderListeners",value:function addRenderListeners(){var _this3=this,channel=_public_api.default.getChannel();RenderEvents.forEach((function(e){return channel.on(e,_this3.renderListener)}))}},{key:"removeRenderListeners",value:function removeRenderListeners(){var _this4=this,channel=_public_api.default.getChannel();RenderEvents.forEach((function(e){return channel.removeListener(e,_this4.renderListener)}))}}]),HooksContext}();exports.HooksContext=HooksContext;var hookify=function hookify(fn){return function(){var _ref="function"==typeof(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:arguments.length<=0?void 0:arguments[0],hooks=_ref.hooks,prevPhase=hooks.currentPhase,prevHooks=hooks.currentHooks,prevNextHookIndex=hooks.nextHookIndex,prevDecoratorName=hooks.currentDecoratorName;hooks.currentDecoratorName=fn.name,hooks.prevMountedDecorators.has(fn)?(hooks.currentPhase="UPDATE",hooks.currentHooks=hooks.hookListsMap.get(fn)||[]):(hooks.currentPhase="MOUNT",hooks.currentHooks=[],hooks.hookListsMap.set(fn,hooks.currentHooks)),hooks.nextHookIndex=0;var prevContext=_global.default.STORYBOOK_HOOKS_CONTEXT;_global.default.STORYBOOK_HOOKS_CONTEXT=hooks;var result=fn.apply(void 0,arguments);if(_global.default.STORYBOOK_HOOKS_CONTEXT=prevContext,"UPDATE"===hooks.currentPhase&&null!=hooks.getNextHook())throw new Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return hooks.currentPhase=prevPhase,hooks.currentHooks=prevHooks,hooks.nextHookIndex=prevNextHookIndex,hooks.currentDecoratorName=prevDecoratorName,result}},numberOfRenders=0;exports.applyHooks=function applyHooks(applyDecorators){return function(getStory,decorators){var decorated=applyDecorators(hookify(getStory),decorators.map(hookify));return function(context){var hooks=context.hooks;hooks.prevMountedDecorators=hooks.mountedDecorators,hooks.mountedDecorators=new Set([getStory].concat(_toConsumableArray(decorators))),hooks.currentContext=context,hooks.hasUpdates=!1;var result=decorated(context);for(numberOfRenders=1;hooks.hasUpdates;)if(hooks.hasUpdates=!1,hooks.currentEffects=[],hooks.prevMountedDecorators=hooks.mountedDecorators,result=decorated(context),(numberOfRenders+=1)>25)throw new Error("Too many re-renders. Storybook limits the number of renders to prevent an infinite loop.");return hooks.addRenderListeners(),result}}};var areDepsEqual=function areDepsEqual(deps,nextDeps){return deps.length===nextDeps.length&&deps.every((function(dep,i){return dep===nextDeps[i]}))},invalidHooksError=function invalidHooksError(){return new Error("Storybook preview hooks can only be called inside decorators and story functions.")};function getHooksContextOrNull(){return _global.default.STORYBOOK_HOOKS_CONTEXT||null}function getHooksContextOrThrow(){var hooks=getHooksContextOrNull();if(null==hooks)throw invalidHooksError();return hooks}function useMemoLike(name,nextCreate,deps){return function useHook(name,callback,deps){var hooks=getHooksContextOrThrow();if("MOUNT"===hooks.currentPhase){null==deps||Array.isArray(deps)||_clientLogger.logger.warn("".concat(name," received a final argument that is not an array (instead, received ").concat(deps,"). When specified, the final argument must be an array."));var _hook={name:name,deps:deps};return hooks.currentHooks.push(_hook),callback(_hook),_hook}if("UPDATE"===hooks.currentPhase){var _hook2=hooks.getNextHook();if(null==_hook2)throw new Error("Rendered more hooks than during the previous render.");return _hook2.name!==name&&_clientLogger.logger.warn("Storybook has detected a change in the order of Hooks".concat(hooks.currentDecoratorName?" called by ".concat(hooks.currentDecoratorName):"",". This will lead to bugs and errors if not fixed.")),null!=deps&&null==_hook2.deps&&_clientLogger.logger.warn("".concat(name," received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.")),null!=deps&&null!=_hook2.deps&&deps.length!==_hook2.deps.length&&_clientLogger.logger.warn("The final argument passed to ".concat(name," changed size between renders. The order and size of this array must remain constant.\nPrevious: ").concat(_hook2.deps,"\nIncoming: ").concat(deps)),null!=deps&&null!=_hook2.deps&&areDepsEqual(deps,_hook2.deps)||(callback(_hook2),_hook2.deps=deps),_hook2}throw invalidHooksError()}(name,(function(hook){hook.memoizedState=nextCreate()}),deps).memoizedState}function useRefLike(name,initialValue){return useMemoLike(name,(function(){return{current:initialValue}}),[])}function useStateLike(name,initialState){var stateRef=useRefLike(name,"function"==typeof initialState?initialState():initialState);return[stateRef.current,function setState(update){stateRef.current="function"==typeof update?update(stateRef.current):update,function triggerUpdate(){var hooks=getHooksContextOrNull();if(null!=hooks&&"NONE"!==hooks.currentPhase)hooks.hasUpdates=!0;else try{_public_api.default.getChannel().emit(_coreEvents.FORCE_RE_RENDER)}catch(e){_clientLogger.logger.warn("State updates of Storybook preview hooks work only in browser")}}()}]}function useEffect(create,deps){var hooks=getHooksContextOrThrow(),effect=useMemoLike("useEffect",(function(){return{create:create}}),deps);hooks.currentEffects.push(effect)}function useStoryContext(){var currentContext=getHooksContextOrThrow().currentContext;if(null==currentContext)throw invalidHooksError();return currentContext}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(3),$every=__webpack_require__(48).every;$({target:"Array",proto:!0,forced:__webpack_require__(75)("every")},{every:function every(callbackfn){return $every(this,callbackfn,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){"use strict";var aFunction=__webpack_require__(49),isObject=__webpack_require__(9),slice=[].slice,factories={},construct=function(C,argsLength,args){if(!(argsLength in factories)){for(var list=[],i=0;i<argsLength;i++)list[i]="a["+i+"]";factories[argsLength]=Function("C,a","return new C("+list.join(",")+")")}return factories[argsLength](C,args)};module.exports=Function.bind||function bind(that){var fn=aFunction(this),partArgs=slice.call(arguments,1),boundFunction=function bound(){var args=partArgs.concat(slice.call(arguments));return this instanceof boundFunction?construct(fn,args.length,args):fn.apply(that,args)};return isObject(fn.prototype)&&(boundFunction.prototype=fn.prototype),boundFunction}},function(module,exports,__webpack_require__){"use strict";var InternalWeakMap,global=__webpack_require__(5),redefineAll=__webpack_require__(99),InternalMetadataModule=__webpack_require__(81),collection=__webpack_require__(156),collectionWeak=__webpack_require__(426),isObject=__webpack_require__(9),enforceIternalState=__webpack_require__(45).enforce,NATIVE_WEAK_MAP=__webpack_require__(205),IS_IE11=!global.ActiveXObject&&"ActiveXObject"in global,isExtensible=Object.isExtensible,wrapper=function(get){return function WeakMap(){return get(this,arguments.length?arguments[0]:void 0)}},$WeakMap=module.exports=collection("WeakMap",wrapper,collectionWeak,!0,!0);if(NATIVE_WEAK_MAP&&IS_IE11){InternalWeakMap=collectionWeak.getConstructor(wrapper,"WeakMap",!0),InternalMetadataModule.REQUIRED=!0;var WeakMapPrototype=$WeakMap.prototype,nativeDelete=WeakMapPrototype.delete,nativeHas=WeakMapPrototype.has,nativeGet=WeakMapPrototype.get,nativeSet=WeakMapPrototype.set;redefineAll(WeakMapPrototype,{delete:function(key){if(isObject(key)&&!isExtensible(key)){var state=enforceIternalState(this);return state.frozen||(state.frozen=new InternalWeakMap),nativeDelete.call(this,key)||state.frozen.delete(key)}return nativeDelete.call(this,key)},has:function has(key){if(isObject(key)&&!isExtensible(key)){var state=enforceIternalState(this);return state.frozen||(state.frozen=new InternalWeakMap),nativeHas.call(this,key)||state.frozen.has(key)}return nativeHas.call(this,key)},get:function get(key){if(isObject(key)&&!isExtensible(key)){var state=enforceIternalState(this);return state.frozen||(state.frozen=new InternalWeakMap),nativeHas.call(this,key)?nativeGet.call(this,key):state.frozen.get(key)}return nativeGet.call(this,key)},set:function set(key,value){if(isObject(key)&&!isExtensible(key)){var state=enforceIternalState(this);state.frozen||(state.frozen=new InternalWeakMap),nativeHas.call(this,key)?nativeSet.call(this,key,value):state.frozen.set(key,value)}else nativeSet.call(this,key,value);return this}})}},function(module,exports,__webpack_require__){"use strict";var redefineAll=__webpack_require__(99),getWeakData=__webpack_require__(81).getWeakData,anObject=__webpack_require__(13),isObject=__webpack_require__(9),anInstance=__webpack_require__(100),iterate=__webpack_require__(101),ArrayIterationModule=__webpack_require__(48),$has=__webpack_require__(18),InternalStateModule=__webpack_require__(45),setInternalState=InternalStateModule.set,internalStateGetterFor=InternalStateModule.getterFor,find=ArrayIterationModule.find,findIndex=ArrayIterationModule.findIndex,id=0,uncaughtFrozenStore=function(store){return store.frozen||(store.frozen=new UncaughtFrozenStore)},UncaughtFrozenStore=function(){this.entries=[]},findUncaughtFrozen=function(store,key){return find(store.entries,(function(it){return it[0]===key}))};UncaughtFrozenStore.prototype={get:function(key){var entry=findUncaughtFrozen(this,key);if(entry)return entry[1]},has:function(key){return!!findUncaughtFrozen(this,key)},set:function(key,value){var entry=findUncaughtFrozen(this,key);entry?entry[1]=value:this.entries.push([key,value])},delete:function(key){var index=findIndex(this.entries,(function(it){return it[0]===key}));return~index&&this.entries.splice(index,1),!!~index}},module.exports={getConstructor:function(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER){var C=wrapper((function(that,iterable){anInstance(that,C,CONSTRUCTOR_NAME),setInternalState(that,{type:CONSTRUCTOR_NAME,id:id++,frozen:void 0}),null!=iterable&&iterate(iterable,that[ADDER],that,IS_MAP)})),getInternalState=internalStateGetterFor(CONSTRUCTOR_NAME),define=function(that,key,value){var state=getInternalState(that),data=getWeakData(anObject(key),!0);return!0===data?uncaughtFrozenStore(state).set(key,value):data[state.id]=value,that};return redefineAll(C.prototype,{delete:function(key){var state=getInternalState(this);if(!isObject(key))return!1;var data=getWeakData(key);return!0===data?uncaughtFrozenStore(state).delete(key):data&&$has(data,state.id)&&delete data[state.id]},has:function has(key){var state=getInternalState(this);if(!isObject(key))return!1;var data=getWeakData(key);return!0===data?uncaughtFrozenStore(state).has(key):data&&$has(data,state.id)}}),redefineAll(C.prototype,IS_MAP?{get:function get(key){var state=getInternalState(this);if(isObject(key)){var data=getWeakData(key);return!0===data?uncaughtFrozenStore(state).get(key):data?data[state.id]:void 0}},set:function set(key,value){return define(this,key,value)}}:{add:function add(value){return define(this,value,!0)}}),C}}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),__webpack_require__(24),__webpack_require__(25),__webpack_require__(28),__webpack_require__(103),__webpack_require__(39),__webpack_require__(17),__webpack_require__(40),__webpack_require__(2),__webpack_require__(16),__webpack_require__(50),__webpack_require__(27),__webpack_require__(83),__webpack_require__(240),__webpack_require__(158),__webpack_require__(429),__webpack_require__(430),__webpack_require__(21),Object.defineProperty(exports,"__esModule",{value:!0}),exports.storyNameFromExport=exports.parseKind=exports.getMatch=exports.stringifyQuery=exports.queryFromLocation=exports.queryFromString=exports.parsePath=exports.toId=exports.sanitize=void 0;var _qs=_interopRequireDefault(__webpack_require__(159)),_memoizerific=_interopRequireDefault(__webpack_require__(161)),_startCase=_interopRequireDefault(__webpack_require__(433));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var splitPathRegex=/\/([^/]+)\/([^/]+)?/,sanitize=function sanitize(string){return string.toLowerCase().replace(/[ ’–—―′¿'`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"-").replace(/-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")};exports.sanitize=sanitize;var sanitizeSafe=function sanitizeSafe(string,part){var sanitized=sanitize(string);if(""===sanitized)throw new Error("Invalid ".concat(part," '").concat(string,"', must include alphanumeric characters"));return sanitized};exports.toId=function toId(kind,name){return"".concat(sanitizeSafe(kind,"kind"),"--").concat(sanitizeSafe(name,"name"))};var parsePath=(0,_memoizerific.default)(1e3)((function(path){var result={viewMode:void 0,storyId:void 0};if(path){var _ref2=_slicedToArray(path.match(splitPathRegex)||[void 0,void 0,void 0],3),viewMode=_ref2[1],storyId=_ref2[2];viewMode&&Object.assign(result,{viewMode:viewMode,storyId:storyId})}return result}));exports.parsePath=parsePath;var queryFromString=(0,_memoizerific.default)(1e3)((function(s){return _qs.default.parse(s,{ignoreQueryPrefix:!0})}));exports.queryFromString=queryFromString;exports.queryFromLocation=function queryFromLocation(location){return queryFromString(location.search)};exports.stringifyQuery=function stringifyQuery(query){return _qs.default.stringify(query,{addQueryPrefix:!0,encode:!1})};var getMatch=(0,_memoizerific.default)(1e3)((function(current,target){var startsWith=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],startsWithTarget=current&&startsWith&&current.startsWith(target),currentIsTarget="string"==typeof target&&current===target,matchTarget=current&&target&&current.match(target);return startsWithTarget||currentIsTarget||matchTarget?{path:current}:null}));exports.getMatch=getMatch;exports.parseKind=function parseKind(kind,_ref3){var rootSeparator=_ref3.rootSeparator,groupSeparator=_ref3.groupSeparator,_kind$split2=_slicedToArray(kind.split(rootSeparator,2),2),root=_kind$split2[0],remainder=_kind$split2[1];return{root:remainder?root:null,groups:(remainder||kind).split(groupSeparator).filter((function(i){return!!i}))}};exports.storyNameFromExport=function storyNameFromExport(key){return(0,_startCase.default)(key)}},function(module,exports){module.exports=Object.is||function is(x,y){return x===y?0!==x||1/x==1/y:x!=x&&y!=y}},function(module,exports,__webpack_require__){"use strict";var fixRegExpWellKnownSymbolLogic=__webpack_require__(107),isRegExp=__webpack_require__(238),anObject=__webpack_require__(13),requireObjectCoercible=__webpack_require__(35),speciesConstructor=__webpack_require__(226),advanceStringIndex=__webpack_require__(157),toLength=__webpack_require__(31),callRegExpExec=__webpack_require__(108),regexpExec=__webpack_require__(106),fails=__webpack_require__(7),arrayPush=[].push,min=Math.min,SUPPORTS_Y=!fails((function(){return!RegExp(4294967295,"y")}));fixRegExpWellKnownSymbolLogic("split",2,(function(SPLIT,nativeSplit,maybeCallNative){var internalSplit;return internalSplit="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(separator,limit){var string=String(requireObjectCoercible(this)),lim=void 0===limit?4294967295:limit>>>0;if(0===lim)return[];if(void 0===separator)return[string];if(!isRegExp(separator))return nativeSplit.call(string,separator,lim);for(var match,lastIndex,lastLength,output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.unicode?"u":"")+(separator.sticky?"y":""),lastLastIndex=0,separatorCopy=new RegExp(separator.source,flags+"g");(match=regexpExec.call(separatorCopy,string))&&!((lastIndex=separatorCopy.lastIndex)>lastLastIndex&&(output.push(string.slice(lastLastIndex,match.index)),match.length>1&&match.index<string.length&&arrayPush.apply(output,match.slice(1)),lastLength=match[0].length,lastLastIndex=lastIndex,output.length>=lim));)separatorCopy.lastIndex===match.index&&separatorCopy.lastIndex++;return lastLastIndex===string.length?!lastLength&&separatorCopy.test("")||output.push(""):output.push(string.slice(lastLastIndex)),output.length>lim?output.slice(0,lim):output}:"0".split(void 0,0).length?function(separator,limit){return void 0===separator&&0===limit?[]:nativeSplit.call(this,separator,limit)}:nativeSplit,[function split(separator,limit){var O=requireObjectCoercible(this),splitter=null==separator?void 0:separator[SPLIT];return void 0!==splitter?splitter.call(separator,O,limit):internalSplit.call(String(O),separator,limit)},function(regexp,limit){var res=maybeCallNative(internalSplit,regexp,this,limit,internalSplit!==nativeSplit);if(res.done)return res.value;var rx=anObject(regexp),S=String(this),C=speciesConstructor(rx,RegExp),unicodeMatching=rx.unicode,flags=(rx.ignoreCase?"i":"")+(rx.multiline?"m":"")+(rx.unicode?"u":"")+(SUPPORTS_Y?"y":"g"),splitter=new C(SUPPORTS_Y?rx:"^(?:"+rx.source+")",flags),lim=void 0===limit?4294967295:limit>>>0;if(0===lim)return[];if(0===S.length)return null===callRegExpExec(splitter,S)?[S]:[];for(var p=0,q=0,A=[];q<S.length;){splitter.lastIndex=SUPPORTS_Y?q:0;var e,z=callRegExpExec(splitter,SUPPORTS_Y?S:S.slice(q));if(null===z||(e=min(toLength(splitter.lastIndex+(SUPPORTS_Y?0:q)),S.length))===p)q=advanceStringIndex(S,q,unicodeMatching);else{if(A.push(S.slice(p,q)),A.length===lim)return A;for(var i=1;i<=z.length-1;i++)if(A.push(z[i]),A.length===lim)return A;q=p=e}}return A.push(S.slice(p)),A}]}),!SUPPORTS_Y)},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(3),toLength=__webpack_require__(31),notARegExp=__webpack_require__(237),requireObjectCoercible=__webpack_require__(35),correctIsRegExpLogic=__webpack_require__(239),nativeStartsWith="".startsWith,min=Math.min;$({target:"String",proto:!0,forced:!correctIsRegExpLogic("startsWith")},{startsWith:function startsWith(searchString){var that=String(requireObjectCoercible(this));notARegExp(searchString);var index=toLength(min(arguments.length>1?arguments[1]:void 0,that.length)),search=String(searchString);return nativeStartsWith?nativeStartsWith.call(that,search,index):that.slice(index,index+search.length)===search}})},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(160),formats=__webpack_require__(241),has=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function brackets(prefix){return prefix+"[]"},comma:"comma",indices:function indices(prefix,key){return prefix+"["+key+"]"},repeat:function repeat(prefix){return prefix}},isArray=Array.isArray,push=Array.prototype.push,pushToArray=function(arr,valueOrArray){push.apply(arr,isArray(valueOrArray)?valueOrArray:[valueOrArray])},toISO=Date.prototype.toISOString,defaultFormat=formats.default,defaults={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:utils.encode,encodeValuesOnly:!1,format:defaultFormat,formatter:formats.formatters[defaultFormat],indices:!1,serializeDate:function serializeDate(date){return toISO.call(date)},skipNulls:!1,strictNullHandling:!1},stringify=function stringify(object,prefix,generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly,charset){var obj=object;if("function"==typeof filter?obj=filter(prefix,obj):obj instanceof Date?obj=serializeDate(obj):"comma"===generateArrayPrefix&&isArray(obj)&&(obj=obj.join(",")),null===obj){if(strictNullHandling)return encoder&&!encodeValuesOnly?encoder(prefix,defaults.encoder,charset,"key"):prefix;obj=""}if(function isNonNullishPrimitive(v){return"string"==typeof v||"number"==typeof v||"boolean"==typeof v||"symbol"==typeof v||"bigint"==typeof v}(obj)||utils.isBuffer(obj))return encoder?[formatter(encodeValuesOnly?prefix:encoder(prefix,defaults.encoder,charset,"key"))+"="+formatter(encoder(obj,defaults.encoder,charset,"value"))]:[formatter(prefix)+"="+formatter(String(obj))];var objKeys,values=[];if(void 0===obj)return values;if(isArray(filter))objKeys=filter;else{var keys=Object.keys(obj);objKeys=sort?keys.sort(sort):keys}for(var i=0;i<objKeys.length;++i){var key=objKeys[i];skipNulls&&null===obj[key]||(isArray(obj)?pushToArray(values,stringify(obj[key],"function"==typeof generateArrayPrefix?generateArrayPrefix(prefix,key):prefix,generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly,charset)):pushToArray(values,stringify(obj[key],prefix+(allowDots?"."+key:"["+key+"]"),generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly,charset)))}return values};module.exports=function(object,opts){var objKeys,obj=object,options=function normalizeStringifyOptions(opts){if(!opts)return defaults;if(null!==opts.encoder&&void 0!==opts.encoder&&"function"!=typeof opts.encoder)throw new TypeError("Encoder has to be a function.");var charset=opts.charset||defaults.charset;if(void 0!==opts.charset&&"utf-8"!==opts.charset&&"iso-8859-1"!==opts.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var format=formats.default;if(void 0!==opts.format){if(!has.call(formats.formatters,opts.format))throw new TypeError("Unknown format option provided.");format=opts.format}var formatter=formats.formatters[format],filter=defaults.filter;return("function"==typeof opts.filter||isArray(opts.filter))&&(filter=opts.filter),{addQueryPrefix:"boolean"==typeof opts.addQueryPrefix?opts.addQueryPrefix:defaults.addQueryPrefix,allowDots:void 0===opts.allowDots?defaults.allowDots:!!opts.allowDots,charset:charset,charsetSentinel:"boolean"==typeof opts.charsetSentinel?opts.charsetSentinel:defaults.charsetSentinel,delimiter:void 0===opts.delimiter?defaults.delimiter:opts.delimiter,encode:"boolean"==typeof opts.encode?opts.encode:defaults.encode,encoder:"function"==typeof opts.encoder?opts.encoder:defaults.encoder,encodeValuesOnly:"boolean"==typeof opts.encodeValuesOnly?opts.encodeValuesOnly:defaults.encodeValuesOnly,filter:filter,formatter:formatter,serializeDate:"function"==typeof opts.serializeDate?opts.serializeDate:defaults.serializeDate,skipNulls:"boolean"==typeof opts.skipNulls?opts.skipNulls:defaults.skipNulls,sort:"function"==typeof opts.sort?opts.sort:null,strictNullHandling:"boolean"==typeof opts.strictNullHandling?opts.strictNullHandling:defaults.strictNullHandling}}(opts);"function"==typeof options.filter?obj=(0,options.filter)("",obj):isArray(options.filter)&&(objKeys=options.filter);var arrayFormat,keys=[];if("object"!=typeof obj||null===obj)return"";arrayFormat=opts&&opts.arrayFormat in arrayPrefixGenerators?opts.arrayFormat:opts&&"indices"in opts?opts.indices?"indices":"repeat":"indices";var generateArrayPrefix=arrayPrefixGenerators[arrayFormat];objKeys||(objKeys=Object.keys(obj)),options.sort&&objKeys.sort(options.sort);for(var i=0;i<objKeys.length;++i){var key=objKeys[i];options.skipNulls&&null===obj[key]||pushToArray(keys,stringify(obj[key],key,generateArrayPrefix,options.strictNullHandling,options.skipNulls,options.encode?options.encoder:null,options.filter,options.sort,options.allowDots,options.serializeDate,options.formatter,options.encodeValuesOnly,options.charset))}var joined=keys.join(options.delimiter),prefix=!0===options.addQueryPrefix?"?":"";return options.charsetSentinel&&("iso-8859-1"===options.charset?prefix+="utf8=%26%2310003%3B&":prefix+="utf8=%E2%9C%93&"),joined.length>0?prefix+joined:""}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(160),has=Object.prototype.hasOwnProperty,isArray=Array.isArray,defaults={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:utils.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(str){return str.replace(/&#(\d+);/g,(function($0,numberStr){return String.fromCharCode(parseInt(numberStr,10))}))},parseKeys=function parseQueryStringKeys(givenKey,val,options){if(givenKey){var key=options.allowDots?givenKey.replace(/\.([^.[]+)/g,"[$1]"):givenKey,child=/(\[[^[\]]*])/g,segment=options.depth>0&&/(\[[^[\]]*])/.exec(key),parent=segment?key.slice(0,segment.index):key,keys=[];if(parent){if(!options.plainObjects&&has.call(Object.prototype,parent)&&!options.allowPrototypes)return;keys.push(parent)}for(var i=0;options.depth>0&&null!==(segment=child.exec(key))&&i<options.depth;){if(i+=1,!options.plainObjects&&has.call(Object.prototype,segment[1].slice(1,-1))&&!options.allowPrototypes)return;keys.push(segment[1])}return segment&&keys.push("["+key.slice(segment.index)+"]"),function(chain,val,options){for(var leaf=val,i=chain.length-1;i>=0;--i){var obj,root=chain[i];if("[]"===root&&options.parseArrays)obj=[].concat(leaf);else{obj=options.plainObjects?Object.create(null):{};var cleanRoot="["===root.charAt(0)&&"]"===root.charAt(root.length-1)?root.slice(1,-1):root,index=parseInt(cleanRoot,10);options.parseArrays||""!==cleanRoot?!isNaN(index)&&root!==cleanRoot&&String(index)===cleanRoot&&index>=0&&options.parseArrays&&index<=options.arrayLimit?(obj=[])[index]=leaf:obj[cleanRoot]=leaf:obj={0:leaf}}leaf=obj}return leaf}(keys,val,options)}};module.exports=function(str,opts){var options=function normalizeParseOptions(opts){if(!opts)return defaults;if(null!==opts.decoder&&void 0!==opts.decoder&&"function"!=typeof opts.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==opts.charset&&"utf-8"!==opts.charset&&"iso-8859-1"!==opts.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var charset=void 0===opts.charset?defaults.charset:opts.charset;return{allowDots:void 0===opts.allowDots?defaults.allowDots:!!opts.allowDots,allowPrototypes:"boolean"==typeof opts.allowPrototypes?opts.allowPrototypes:defaults.allowPrototypes,arrayLimit:"number"==typeof opts.arrayLimit?opts.arrayLimit:defaults.arrayLimit,charset:charset,charsetSentinel:"boolean"==typeof opts.charsetSentinel?opts.charsetSentinel:defaults.charsetSentinel,comma:"boolean"==typeof opts.comma?opts.comma:defaults.comma,decoder:"function"==typeof opts.decoder?opts.decoder:defaults.decoder,delimiter:"string"==typeof opts.delimiter||utils.isRegExp(opts.delimiter)?opts.delimiter:defaults.delimiter,depth:"number"==typeof opts.depth||!1===opts.depth?+opts.depth:defaults.depth,ignoreQueryPrefix:!0===opts.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof opts.interpretNumericEntities?opts.interpretNumericEntities:defaults.interpretNumericEntities,parameterLimit:"number"==typeof opts.parameterLimit?opts.parameterLimit:defaults.parameterLimit,parseArrays:!1!==opts.parseArrays,plainObjects:"boolean"==typeof opts.plainObjects?opts.plainObjects:defaults.plainObjects,strictNullHandling:"boolean"==typeof opts.strictNullHandling?opts.strictNullHandling:defaults.strictNullHandling}}(opts);if(""===str||null==str)return options.plainObjects?Object.create(null):{};for(var tempObj="string"==typeof str?function parseQueryStringValues(str,options){var i,obj={},cleanStr=options.ignoreQueryPrefix?str.replace(/^\?/,""):str,limit=options.parameterLimit===1/0?void 0:options.parameterLimit,parts=cleanStr.split(options.delimiter,limit),skipIndex=-1,charset=options.charset;if(options.charsetSentinel)for(i=0;i<parts.length;++i)0===parts[i].indexOf("utf8=")&&("utf8=%E2%9C%93"===parts[i]?charset="utf-8":"utf8=%26%2310003%3B"===parts[i]&&(charset="iso-8859-1"),skipIndex=i,i=parts.length);for(i=0;i<parts.length;++i)if(i!==skipIndex){var key,val,part=parts[i],bracketEqualsPos=part.indexOf("]="),pos=-1===bracketEqualsPos?part.indexOf("="):bracketEqualsPos+1;-1===pos?(key=options.decoder(part,defaults.decoder,charset,"key"),val=options.strictNullHandling?null:""):(key=options.decoder(part.slice(0,pos),defaults.decoder,charset,"key"),val=options.decoder(part.slice(pos+1),defaults.decoder,charset,"value")),val&&options.interpretNumericEntities&&"iso-8859-1"===charset&&(val=interpretNumericEntities(val)),val&&"string"==typeof val&&options.comma&&val.indexOf(",")>-1&&(val=val.split(",")),part.indexOf("[]=")>-1&&(val=isArray(val)?[val]:val),has.call(obj,key)?obj[key]=utils.combine(obj[key],val):obj[key]=val}return obj}(str,options):str,obj=options.plainObjects?Object.create(null):{},keys=Object.keys(tempObj),i=0;i<keys.length;++i){var key=keys[i],newObj=parseKeys(key,tempObj[key],options);obj=utils.merge(obj,newObj,options)}return utils.compact(obj)}},function(module,exports,__webpack_require__){var createCompounder=__webpack_require__(434),upperFirst=__webpack_require__(447),startCase=createCompounder((function(result,word,index){return result+(index?" ":"")+upperFirst(word)}));module.exports=startCase},function(module,exports,__webpack_require__){var arrayReduce=__webpack_require__(435),deburr=__webpack_require__(436),words=__webpack_require__(443),reApos=RegExp("['’]","g");module.exports=function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,"")),callback,"")}}},function(module,exports){module.exports=function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}},function(module,exports,__webpack_require__){var deburrLetter=__webpack_require__(437),toString=__webpack_require__(109),reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,reComboMark=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");module.exports=function deburr(string){return(string=toString(string))&&string.replace(reLatin,deburrLetter).replace(reComboMark,"")}},function(module,exports,__webpack_require__){var deburrLetter=__webpack_require__(438)({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"});module.exports=deburrLetter},function(module,exports){module.exports=function basePropertyOf(object){return function(key){return null==object?void 0:object[key]}}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(110),arrayMap=__webpack_require__(440),isArray=__webpack_require__(51),isSymbol=__webpack_require__(111),INFINITY=1/0,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;module.exports=function baseToString(value){if("string"==typeof value)return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}},function(module,exports){module.exports=function arrayMap(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(110),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}},function(module,exports){var nativeObjectToString=Object.prototype.toString;module.exports=function objectToString(value){return nativeObjectToString.call(value)}},function(module,exports,__webpack_require__){var asciiWords=__webpack_require__(444),hasUnicodeWord=__webpack_require__(445),toString=__webpack_require__(109),unicodeWords=__webpack_require__(446);module.exports=function words(string,pattern,guard){return string=toString(string),void 0===(pattern=guard?void 0:pattern)?hasUnicodeWord(string)?unicodeWords(string):asciiWords(string):string.match(pattern)||[]}},function(module,exports){var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;module.exports=function asciiWords(string){return string.match(reAsciiWord)||[]}},function(module,exports){var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;module.exports=function hasUnicodeWord(string){return reHasUnicodeWord.test(string)}},function(module,exports){var rsBreakRange="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsBreak="["+rsBreakRange+"]",rsDigits="\\d+",rsDingbat="[\\u2700-\\u27bf]",rsLower="[a-z\\xdf-\\xf6\\xf8-\\xff]",rsMisc="[^\\ud800-\\udfff"+rsBreakRange+rsDigits+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="[A-Z\\xc0-\\xd6\\xd8-\\xde]",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",reOptMod="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",rsSeq="[\\ufe0e\\ufe0f]?"+reOptMod+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",rsRegional,rsSurrPair].join("|")+")[\\ufe0e\\ufe0f]?"+reOptMod+")*"),rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+(?:['’](?:d|ll|m|re|s|t|ve))?",rsUpper+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsDigits,rsEmoji].join("|"),"g");module.exports=function unicodeWords(string){return string.match(reUnicodeWord)||[]}},function(module,exports,__webpack_require__){var upperFirst=__webpack_require__(448)("toUpperCase");module.exports=upperFirst},function(module,exports,__webpack_require__){var castSlice=__webpack_require__(449),hasUnicode=__webpack_require__(243),stringToArray=__webpack_require__(451),toString=__webpack_require__(109);module.exports=function createCaseFirst(methodName){return function(string){string=toString(string);var strSymbols=hasUnicode(string)?stringToArray(string):void 0,chr=strSymbols?strSymbols[0]:string.charAt(0),trailing=strSymbols?castSlice(strSymbols,1).join(""):string.slice(1);return chr[methodName]()+trailing}}},function(module,exports,__webpack_require__){var baseSlice=__webpack_require__(450);module.exports=function castSlice(array,start,end){var length=array.length;return end=void 0===end?length:end,!start&&end>=length?array:baseSlice(array,start,end)}},function(module,exports){module.exports=function baseSlice(array,start,end){var index=-1,length=array.length;start<0&&(start=-start>length?0:length+start),(end=end>length?length:end)<0&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}},function(module,exports,__webpack_require__){var asciiToArray=__webpack_require__(452),hasUnicode=__webpack_require__(243),unicodeToArray=__webpack_require__(453);module.exports=function stringToArray(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string)}},function(module,exports){module.exports=function asciiToArray(string){return string.split("")}},function(module,exports){var rsAstral="[\\ud800-\\udfff]",rsCombo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsNonAstral="[^\\ud800-\\udfff]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",reOptMod="(?:"+rsCombo+"|"+rsFitz+")"+"?",rsSeq="[\\ufe0e\\ufe0f]?"+reOptMod+("(?:\\u200d(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")[\\ufe0e\\ufe0f]?"+reOptMod+")*"),rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");module.exports=function unicodeToArray(string){return string.match(reUnicode)||[]}},function(module,exports,__webpack_require__){var baseMerge=__webpack_require__(455),mergeWith=__webpack_require__(504)((function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)}));module.exports=mergeWith},function(module,exports,__webpack_require__){var Stack=__webpack_require__(244),assignMergeValue=__webpack_require__(246),baseFor=__webpack_require__(482),baseMergeDeep=__webpack_require__(484),isObject=__webpack_require__(41),keysIn=__webpack_require__(254),safeGet=__webpack_require__(253);module.exports=function baseMerge(object,source,srcIndex,customizer,stack){object!==source&&baseFor(source,(function(srcValue,key){if(stack||(stack=new Stack),isObject(srcValue))baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack);else{var newValue=customizer?customizer(safeGet(object,key),srcValue,key+"",object,source,stack):void 0;void 0===newValue&&(newValue=srcValue),assignMergeValue(object,key,newValue)}}),keysIn)}},function(module,exports){module.exports=function listCacheClear(){this.__data__=[],this.size=0}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(113),splice=Array.prototype.splice;module.exports=function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(113);module.exports=function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(113);module.exports=function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(113);module.exports=function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(112);module.exports=function stackClear(){this.__data__=new ListCache,this.size=0}},function(module,exports){module.exports=function stackDelete(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result}},function(module,exports){module.exports=function stackGet(key){return this.__data__.get(key)}},function(module,exports){module.exports=function stackHas(key){return this.__data__.has(key)}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(112),Map=__webpack_require__(162),MapCache=__webpack_require__(164),LARGE_ARRAY_SIZE=200;module.exports=function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this}},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(163),isMasked=__webpack_require__(467),isObject=__webpack_require__(41),toSource=__webpack_require__(245),reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=function baseIsNative(value){return!(!isObject(value)||isMasked(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}},function(module,exports,__webpack_require__){var uid,coreJsData=__webpack_require__(468),maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"";module.exports=function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}},function(module,exports,__webpack_require__){var coreJsData=__webpack_require__(33)["__core-js_shared__"];module.exports=coreJsData},function(module,exports){module.exports=function getValue(object,key){return null==object?void 0:object[key]}},function(module,exports,__webpack_require__){var Hash=__webpack_require__(471),ListCache=__webpack_require__(112),Map=__webpack_require__(162);module.exports=function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}},function(module,exports,__webpack_require__){var hashClear=__webpack_require__(472),hashDelete=__webpack_require__(473),hashGet=__webpack_require__(474),hashHas=__webpack_require__(475),hashSet=__webpack_require__(476);function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,module.exports=Hash},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(114);module.exports=function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}},function(module,exports){module.exports=function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(114),HASH_UNDEFINED="__lodash_hash_undefined__",hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(114),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(114),HASH_UNDEFINED="__lodash_hash_undefined__";module.exports=function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?HASH_UNDEFINED:value,this}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(115);module.exports=function mapCacheDelete(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result}},function(module,exports){module.exports=function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(115);module.exports=function mapCacheGet(key){return getMapData(this,key).get(key)}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(115);module.exports=function mapCacheHas(key){return getMapData(this,key).has(key)}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(115);module.exports=function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this}},function(module,exports,__webpack_require__){var baseFor=__webpack_require__(483)();module.exports=baseFor},function(module,exports){module.exports=function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(!1===iteratee(iterable[key],key,iterable))break}return object}}},function(module,exports,__webpack_require__){var assignMergeValue=__webpack_require__(246),cloneBuffer=__webpack_require__(485),cloneTypedArray=__webpack_require__(486),copyArray=__webpack_require__(488),initCloneObject=__webpack_require__(489),isArguments=__webpack_require__(251),isArray=__webpack_require__(51),isArrayLikeObject=__webpack_require__(492),isBuffer=__webpack_require__(167),isFunction=__webpack_require__(163),isObject=__webpack_require__(41),isPlainObject=__webpack_require__(494),isTypedArray=__webpack_require__(168),safeGet=__webpack_require__(253),toPlainObject=__webpack_require__(498);module.exports=function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=safeGet(object,key),srcValue=safeGet(source,key),stacked=stack.get(srcValue);if(stacked)assignMergeValue(object,key,stacked);else{var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):void 0,isCommon=void 0===newValue;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue,isArr||isBuff||isTyped?isArray(objValue)?newValue=objValue:isArrayLikeObject(objValue)?newValue=copyArray(objValue):isBuff?(isCommon=!1,newValue=cloneBuffer(srcValue,!0)):isTyped?(isCommon=!1,newValue=cloneTypedArray(srcValue,!0)):newValue=[]:isPlainObject(srcValue)||isArguments(srcValue)?(newValue=objValue,isArguments(objValue)?newValue=toPlainObject(objValue):isObject(objValue)&&!isFunction(objValue)||(newValue=initCloneObject(srcValue))):isCommon=!1}isCommon&&(stack.set(srcValue,newValue),mergeFunc(newValue,srcValue,srcIndex,customizer,stack),stack.delete(srcValue)),assignMergeValue(object,key,newValue)}}},function(module,exports,__webpack_require__){(function(module){var root=__webpack_require__(33),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,Buffer=freeModule&&freeModule.exports===freeExports?root.Buffer:void 0,allocUnsafe=Buffer?Buffer.allocUnsafe:void 0;module.exports=function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);return buffer.copy(result),result}}).call(this,__webpack_require__(77)(module))},function(module,exports,__webpack_require__){var cloneArrayBuffer=__webpack_require__(487);module.exports=function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}},function(module,exports,__webpack_require__){var Uint8Array=__webpack_require__(248);module.exports=function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}},function(module,exports){module.exports=function copyArray(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}},function(module,exports,__webpack_require__){var baseCreate=__webpack_require__(490),getPrototype=__webpack_require__(249),isPrototype=__webpack_require__(166);module.exports=function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(41),objectCreate=Object.create,baseCreate=function(){function object(){}return function(proto){if(!isObject(proto))return{};if(objectCreate)return objectCreate(proto);object.prototype=proto;var result=new object;return object.prototype=void 0,result}}();module.exports=baseCreate},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(64),isObjectLike=__webpack_require__(52),argsTag="[object Arguments]";module.exports=function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}},function(module,exports,__webpack_require__){var isArrayLike=__webpack_require__(116),isObjectLike=__webpack_require__(52);module.exports=function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}},function(module,exports){module.exports=function stubFalse(){return!1}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(64),getPrototype=__webpack_require__(249),isObjectLike=__webpack_require__(52),objectTag="[object Object]",funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object);module.exports=function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag)return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(64),isLength=__webpack_require__(252),isObjectLike=__webpack_require__(52),typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags["[object Arguments]"]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags["[object Object]"]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1,module.exports=function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}},function(module,exports){module.exports=function baseUnary(func){return function(value){return func(value)}}},function(module,exports,__webpack_require__){(function(module){var freeGlobal=__webpack_require__(242),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,freeProcess=freeModule&&freeModule.exports===freeExports&&freeGlobal.process,nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;return types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();module.exports=nodeUtil}).call(this,__webpack_require__(77)(module))},function(module,exports,__webpack_require__){var copyObject=__webpack_require__(499),keysIn=__webpack_require__(254);module.exports=function toPlainObject(value){return copyObject(value,keysIn(value))}},function(module,exports,__webpack_require__){var assignValue=__webpack_require__(500),baseAssignValue=__webpack_require__(165);module.exports=function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;void 0===newValue&&(newValue=source[key]),isNew?baseAssignValue(object,key,newValue):assignValue(object,key,newValue)}return object}},function(module,exports,__webpack_require__){var baseAssignValue=__webpack_require__(165),eq=__webpack_require__(84),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||baseAssignValue(object,key,value)}},function(module,exports){module.exports=function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(41),isPrototype=__webpack_require__(166),nativeKeysIn=__webpack_require__(503),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function baseKeysIn(object){if(!isObject(object))return nativeKeysIn(object);var isProto=isPrototype(object),result=[];for(var key in object)("constructor"!=key||!isProto&&hasOwnProperty.call(object,key))&&result.push(key);return result}},function(module,exports){module.exports=function nativeKeysIn(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}},function(module,exports,__webpack_require__){var baseRest=__webpack_require__(505),isIterateeCall=__webpack_require__(512);module.exports=function createAssigner(assigner){return baseRest((function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:void 0,guard=length>2?sources[2]:void 0;for(customizer=assigner.length>3&&"function"==typeof customizer?(length--,customizer):void 0,guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=length<3?void 0:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object}))}},function(module,exports,__webpack_require__){var identity=__webpack_require__(257),overRest=__webpack_require__(506),setToString=__webpack_require__(508);module.exports=function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}},function(module,exports,__webpack_require__){var apply=__webpack_require__(507),nativeMax=Math.max;module.exports=function overRest(func,start,transform){return start=nativeMax(void 0===start?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),apply(func,this,otherArgs)}}},function(module,exports){module.exports=function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}},function(module,exports,__webpack_require__){var baseSetToString=__webpack_require__(509),setToString=__webpack_require__(511)(baseSetToString);module.exports=setToString},function(module,exports,__webpack_require__){var constant=__webpack_require__(510),defineProperty=__webpack_require__(247),identity=__webpack_require__(257),baseSetToString=defineProperty?function(func,string){return defineProperty(func,"toString",{configurable:!0,enumerable:!1,value:constant(string),writable:!0})}:identity;module.exports=baseSetToString},function(module,exports){module.exports=function constant(value){return function(){return value}}},function(module,exports){var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;module.exports=function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);if(lastCalled=stamp,remaining>0){if(++count>=HOT_COUNT)return arguments[0]}else count=0;return func.apply(void 0,arguments)}}},function(module,exports,__webpack_require__){var eq=__webpack_require__(84),isArrayLike=__webpack_require__(116),isIndex=__webpack_require__(256),isObject=__webpack_require__(41);module.exports=function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;return!!("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}},function(module,exports,__webpack_require__){var baseIsEqual=__webpack_require__(514);module.exports=function isEqual(value,other){return baseIsEqual(value,other)}},function(module,exports,__webpack_require__){var baseIsEqualDeep=__webpack_require__(515),isObjectLike=__webpack_require__(52);module.exports=function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack))}},function(module,exports,__webpack_require__){var Stack=__webpack_require__(244),equalArrays=__webpack_require__(258),equalByTag=__webpack_require__(521),equalObjects=__webpack_require__(524),getTag=__webpack_require__(534),isArray=__webpack_require__(51),isBuffer=__webpack_require__(167),isTypedArray=__webpack_require__(168),COMPARE_PARTIAL_FLAG=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other),objIsObj=(objTag=objTag==argsTag?objectTag:objTag)==objectTag,othIsObj=(othTag=othTag==argsTag?objectTag:othTag)==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return!!isSameTag&&(stack||(stack=new Stack),equalObjects(object,other,bitmask,customizer,equalFunc,stack))}},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(164),setCacheAdd=__webpack_require__(517),setCacheHas=__webpack_require__(518);function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,module.exports=SetCache},function(module,exports){var HASH_UNDEFINED="__lodash_hash_undefined__";module.exports=function setCacheAdd(value){return this.__data__.set(value,HASH_UNDEFINED),this}},function(module,exports){module.exports=function setCacheHas(value){return this.__data__.has(value)}},function(module,exports){module.exports=function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}},function(module,exports){module.exports=function cacheHas(cache,key){return cache.has(key)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(110),Uint8Array=__webpack_require__(248),eq=__webpack_require__(84),equalArrays=__webpack_require__(258),mapToArray=__webpack_require__(522),setToArray=__webpack_require__(523),COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;module.exports=function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case arrayBufferTag:return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=COMPARE_UNORDERED_FLAG,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}},function(module,exports){module.exports=function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach((function(value,key){result[++index]=[key,value]})),result}},function(module,exports){module.exports=function setToArray(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=value})),result}},function(module,exports,__webpack_require__){var getAllKeys=__webpack_require__(525),COMPARE_PARTIAL_FLAG=1,hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length;if(objLength!=getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){var objValue=object[key=objProps[index]],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1)}return stack.delete(object),stack.delete(other),result}},function(module,exports,__webpack_require__){var baseGetAllKeys=__webpack_require__(526),getSymbols=__webpack_require__(528),keys=__webpack_require__(531);module.exports=function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}},function(module,exports,__webpack_require__){var arrayPush=__webpack_require__(527),isArray=__webpack_require__(51);module.exports=function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}},function(module,exports){module.exports=function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}},function(module,exports,__webpack_require__){var arrayFilter=__webpack_require__(529),stubArray=__webpack_require__(530),propertyIsEnumerable=Object.prototype.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),(function(symbol){return propertyIsEnumerable.call(object,symbol)})))}:stubArray;module.exports=getSymbols},function(module,exports){module.exports=function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}},function(module,exports){module.exports=function stubArray(){return[]}},function(module,exports,__webpack_require__){var arrayLikeKeys=__webpack_require__(255),baseKeys=__webpack_require__(532),isArrayLike=__webpack_require__(116);module.exports=function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}},function(module,exports,__webpack_require__){var isPrototype=__webpack_require__(166),nativeKeys=__webpack_require__(533),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}},function(module,exports,__webpack_require__){var nativeKeys=__webpack_require__(250)(Object.keys,Object);module.exports=nativeKeys},function(module,exports,__webpack_require__){var DataView=__webpack_require__(535),Map=__webpack_require__(162),Promise=__webpack_require__(536),Set=__webpack_require__(537),WeakMap=__webpack_require__(538),baseGetTag=__webpack_require__(64),toSource=__webpack_require__(245),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&"[object DataView]"!=getTag(new DataView(new ArrayBuffer(1)))||Map&&"[object Map]"!=getTag(new Map)||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&"[object Set]"!=getTag(new Set)||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=baseGetTag(value),Ctor="[object Object]"==result?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return"[object DataView]";case mapCtorString:return"[object Map]";case promiseCtorString:return"[object Promise]";case setCtorString:return"[object Set]";case weakMapCtorString:return"[object WeakMap]"}return result}),module.exports=getTag},function(module,exports,__webpack_require__){var DataView=__webpack_require__(53)(__webpack_require__(33),"DataView");module.exports=DataView},function(module,exports,__webpack_require__){var Promise=__webpack_require__(53)(__webpack_require__(33),"Promise");module.exports=Promise},function(module,exports,__webpack_require__){var Set=__webpack_require__(53)(__webpack_require__(33),"Set");module.exports=Set},function(module,exports,__webpack_require__){var WeakMap=__webpack_require__(53)(__webpack_require__(33),"WeakMap");module.exports=WeakMap},function(module,exports,__webpack_require__){var castPath=__webpack_require__(540),toKey=__webpack_require__(545);module.exports=function baseGet(object,path){for(var index=0,length=(path=castPath(path,object)).length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:void 0}},function(module,exports,__webpack_require__){var isArray=__webpack_require__(51),isKey=__webpack_require__(541),stringToPath=__webpack_require__(542),toString=__webpack_require__(109);module.exports=function castPath(value,object){return isArray(value)?value:isKey(value,object)?[value]:stringToPath(toString(value))}},function(module,exports,__webpack_require__){var isArray=__webpack_require__(51),isSymbol=__webpack_require__(111),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;module.exports=function isKey(value,object){if(isArray(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}},function(module,exports,__webpack_require__){var memoizeCapped=__webpack_require__(543),rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped((function(string){var result=[];return 46===string.charCodeAt(0)&&result.push(""),string.replace(rePropName,(function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)})),result}));module.exports=stringToPath},function(module,exports,__webpack_require__){var memoize=__webpack_require__(544),MAX_MEMOIZE_SIZE=500;module.exports=function memoizeCapped(func){var result=memoize(func,(function(key){return cache.size===MAX_MEMOIZE_SIZE&&cache.clear(),key})),cache=result.cache;return result}},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(164),FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}memoize.Cache=MapCache,module.exports=memoize},function(module,exports,__webpack_require__){var isSymbol=__webpack_require__(111),INFINITY=1/0;module.exports=function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),__webpack_require__(24),__webpack_require__(25),__webpack_require__(103),__webpack_require__(96),__webpack_require__(14),__webpack_require__(39),__webpack_require__(17),__webpack_require__(78),__webpack_require__(152),__webpack_require__(230),__webpack_require__(547),__webpack_require__(102),__webpack_require__(40),__webpack_require__(117),__webpack_require__(548),__webpack_require__(2),__webpack_require__(97),__webpack_require__(549),__webpack_require__(79),__webpack_require__(26),__webpack_require__(118),__webpack_require__(16),__webpack_require__(154),__webpack_require__(50),__webpack_require__(27),__webpack_require__(240),__webpack_require__(15),__webpack_require__(21),__webpack_require__(262),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _eventemitter=_interopRequireDefault(__webpack_require__(550)),_memoizerific=_interopRequireDefault(__webpack_require__(161)),_debounce=_interopRequireDefault(__webpack_require__(551)),_commonTags=__webpack_require__(605),_coreEvents=_interopRequireDefault(__webpack_require__(82)),_clientLogger=__webpack_require__(63),_hooks=__webpack_require__(169);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _templateObject(){var data=function _taggedTemplateLiteral(strings,raw){raw||(raw=strings.slice(0));return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n        Story with id "," already exists in the store!\n\n        Perhaps you added the same story twice, or you have a name collision?\n        Story ids need to be unique -- ensure you aren't using the same names modulo url-sanitization.\n      "]);return _templateObject=function _templateObject(){return data},data}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var toKey=function toKey(input){return input.replace(/[^a-z0-9]+([a-z0-9])/gi,(function(){for(var _len=arguments.length,params=new Array(_len),_key=0;_key<_len;_key++)params[_key]=arguments[_key];return params[1].toUpperCase()}))},count=0,getId=function getId(){return count+=1},isStoryDocsOnly=function isStoryDocsOnly(parameters){return parameters&&parameters.docsOnly},includeStory=function includeStory(story){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeDocsOnly:!1};return!!options.includeDocsOnly||!isStoryDocsOnly(story.parameters)},StoryStore=function(_EventEmitter){function StoryStore(params){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,StoryStore),(_this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,_getPrototypeOf(StoryStore).call(this)))._error=void 0,_this._channel=void 0,_this._data=void 0,_this._legacyData=void 0,_this._legacydata=void 0,_this._revision=void 0,_this._selection=void 0,_this.setChannel=function(channel){_this._channel=channel},_this.fromId=function(id){try{var data=_this._data[id];return data&&data.getDecorated?data:null}catch(e){return _clientLogger.logger.warn("failed to get story:",_this._data),_clientLogger.logger.error(e),null}},_this.getSelection=function(){return _this._selection},_this.getError=function(){return _this._error},_this.remove=function(id){var _data=_assertThisInitialized(_this)._data,story=_data[id];if(delete _data[id],story){story.hooks.clean();var kind=story.kind,name=story.name,kindData=_this._legacydata[toKey(kind)];kindData&&delete kindData.stories[toKey(name)]}},_this.pushToManager=(0,_debounce.default)((function(){if(_this._channel){var stories=_this.extract({includeDocsOnly:!0});_this._channel.emit(_coreEvents.default.SET_STORIES,{stories:stories})}}),0),_this._legacydata={},_this._data={},_this._revision=0,_this._selection={},_this._channel=params.channel,_this._error=void 0,_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(StoryStore,_EventEmitter),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(StoryStore,[{key:"raw",value:function raw(options){var _this2=this;return Object.values(this._data).filter((function(i){return!!i.getDecorated})).filter((function(i){return includeStory(i,options)})).map((function(_ref3){var id=_ref3.id;return _this2.fromId(id)}))}},{key:"extract",value:function extract(options){var _this3=this,stories=Object.entries(this._data);if(Object.values(this._data).length>0){var index=Object.keys(this._data).find((function(key){return!!(_this3._data[key]&&_this3._data[key].parameters&&_this3._data[key].parameters.options)}));if(index&&this._data[index].parameters.options.storySort){var sortFn=this._data[index].parameters.options.storySort;stories.sort(sortFn)}}return stories.reduce((function(a,_ref4){var _ref5=_slicedToArray(_ref4,2),k=_ref5[0],v=_ref5[1];return includeStory(v,options)?Object.assign(a,_defineProperty({},k,function toExtracted(obj){return Object.entries(obj).reduce((function(acc,_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];return"function"==typeof value?acc:Array.isArray(value)?Object.assign(acc,_defineProperty({},key,value.slice().sort())):Object.assign(acc,_defineProperty({},key,value))}),{})}(v))):a}),{})}},{key:"setSelection",value:function setSelection(data,error){var _this4=this;this._selection=void 0===data?this._selection:{storyId:data.storyId,viewMode:data.viewMode},this._error=void 0===error?this._error:error,setTimeout((function(){_this4._channel&&_this4._channel.emit(_coreEvents.default.STORY_RENDER),_this4.emit(_coreEvents.default.STORY_RENDER)}),1)}},{key:"addStory",value:function addStory(_ref6,_ref7){var id=_ref6.id,kind=_ref6.kind,name=_ref6.name,original=_ref6.storyFn,_ref6$parameters=_ref6.parameters,parameters=void 0===_ref6$parameters?{}:_ref6$parameters,getDecorators=_ref7.getDecorators,applyDecorators=_ref7.applyDecorators,_data=this._data;_data[id]&&_clientLogger.logger.warn((0,_commonTags.stripIndents)(_templateObject(),id));var identification={id:id,kind:kind,name:name,story:name},getOriginal=function getOriginal(){return original},getDecorated=(0,_memoizerific.default)(1)((function(){return applyDecorators(getOriginal(),getDecorators())})),hooks=new _hooks.HooksContext,storyFn=function storyFn(p){return getDecorated()(Object.assign({},identification,{},p,{hooks:hooks,parameters:Object.assign({},parameters,{},p&&p.parameters)}))};_data[id]=Object.assign({},identification,{hooks:hooks,getDecorated:getDecorated,getOriginal:getOriginal,storyFn:storyFn,parameters:parameters}),isStoryDocsOnly(parameters)||this.addLegacyStory({kind:kind,name:name,storyFn:storyFn,parameters:parameters}),this.pushToManager()}},{key:"getRevision",value:function getRevision(){return this._revision}},{key:"incrementRevision",value:function incrementRevision(){this._revision+=1}},{key:"addLegacyStory",value:function addLegacyStory(_ref8){var kind=_ref8.kind,name=_ref8.name,storyFn=_ref8.storyFn,parameters=_ref8.parameters,k=toKey(kind);this._legacydata[k]||(this._legacydata[k]={kind:kind,fileName:parameters.fileName,index:getId(),stories:{}}),this._legacydata[k].stories[toKey(name)]={name:name,index:getId(),story:storyFn,parameters:parameters}}},{key:"getStoryKinds",value:function getStoryKinds(){return Object.values(this._legacydata).filter((function(kind){return Object.keys(kind.stories).length>0})).sort((function(info1,info2){return info1.index-info2.index})).map((function(info){return info.kind}))}},{key:"getStories",value:function getStories(kind){var _this5=this,key=toKey(kind);return this._legacydata[key]?Object.keys(this._legacydata[key].stories).map((function(name){return _this5._legacydata[key].stories[name]})).sort((function(info1,info2){return info1.index-info2.index})).map((function(info){return info.name})):[]}},{key:"getStoriesForKind",value:function getStoriesForKind(kind){return this.raw().filter((function(story){return story.kind===kind}))}},{key:"getStoryFileName",value:function getStoryFileName(kind){var key=toKey(kind),storiesKind=this._legacydata[key];return storiesKind?storiesKind.fileName:null}},{key:"getStoryAndParameters",value:function getStoryAndParameters(kind,name){if(!kind||!name)return null;var storiesKind=this._legacydata[toKey(kind)];if(!storiesKind)return null;var storyInfo=storiesKind.stories[toKey(name)];return storyInfo?{story:storyInfo.story,parameters:storyInfo.parameters}:null}},{key:"getStory",value:function getStory(kind,name){var data=this.getStoryAndParameters(kind,name);return data&&data.story}},{key:"getStoryWithContext",value:function getStoryWithContext(kind,name){var data=this.getStoryAndParameters(kind,name);return data?data.story:null}},{key:"removeStoryKind",value:function removeStoryKind(kind){this.hasStoryKind(kind)&&(this._legacydata[toKey(kind)].stories={},this.cleanHooksForKind(kind),this._data=Object.entries(this._data).reduce((function(acc,_ref9){var _ref10=_slicedToArray(_ref9,2),id=_ref10[0],story=_ref10[1];return story.kind!==kind&&Object.assign(acc,_defineProperty({},id,story)),acc}),{}),this.pushToManager())}},{key:"hasStoryKind",value:function hasStoryKind(kind){return Boolean(this._legacydata[toKey(kind)])}},{key:"hasStory",value:function hasStory(kind,name){return Boolean(this.getStory(kind,name))}},{key:"dumpStoryBook",value:function dumpStoryBook(){var _this6=this;return this.getStoryKinds().map((function(kind){return{kind:kind,stories:_this6.getStories(kind)}}))}},{key:"size",value:function size(){return Object.keys(this._legacydata).length}},{key:"clean",value:function clean(){var _this7=this;this.getStoryKinds().forEach((function(kind){return delete _this7._legacydata[toKey(kind)]}))}},{key:"cleanHooks",value:function cleanHooks(id){this._data[id]&&this._data[id].hooks.clean()}},{key:"cleanHooksForKind",value:function cleanHooksForKind(kind){var _this8=this;this.getStoriesForKind(kind).map((function(story){return _this8.cleanHooks(story.id)}))}}]),StoryStore}(_eventemitter.default);exports.default=StoryStore},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(3),aFunction=__webpack_require__(49),toObject=__webpack_require__(32),fails=__webpack_require__(7),sloppyArrayMethod=__webpack_require__(75),nativeSort=[].sort,test=[1,2,3],FAILS_ON_UNDEFINED=fails((function(){test.sort(void 0)})),FAILS_ON_NULL=fails((function(){test.sort(null)})),SLOPPY_METHOD=sloppyArrayMethod("sort");$({target:"Array",proto:!0,forced:FAILS_ON_UNDEFINED||!FAILS_ON_NULL||SLOPPY_METHOD},{sort:function sort(comparefn){return void 0===comparefn?nativeSort.call(toObject(this)):nativeSort.call(toObject(this),aFunction(comparefn))}})},function(module,exports,__webpack_require__){var $=__webpack_require__(3),DESCRIPTORS=__webpack_require__(12);$({target:"Object",stat:!0,forced:!DESCRIPTORS,sham:!DESCRIPTORS},{defineProperties:__webpack_require__(212)})},function(module,exports,__webpack_require__){var $=__webpack_require__(3),FREEZING=__webpack_require__(233),fails=__webpack_require__(7),isObject=__webpack_require__(9),onFreeze=__webpack_require__(81).onFreeze,nativeFreeze=Object.freeze;$({target:"Object",stat:!0,forced:fails((function(){nativeFreeze(1)})),sham:!FREEZING},{freeze:function freeze(it){return nativeFreeze&&isObject(it)?nativeFreeze(onFreeze(it)):it}})},function(module,exports,__webpack_require__){"use strict";var has=Object.prototype.hasOwnProperty,prefix="~";function Events(){}function EE(fn,context,once){this.fn=fn,this.context=context,this.once=once||!1}function addListener(emitter,event,fn,context,once){if("function"!=typeof fn)throw new TypeError("The listener must be a function");var listener=new EE(fn,context||emitter,once),evt=prefix?prefix+event:event;return emitter._events[evt]?emitter._events[evt].fn?emitter._events[evt]=[emitter._events[evt],listener]:emitter._events[evt].push(listener):(emitter._events[evt]=listener,emitter._eventsCount++),emitter}function clearEvent(emitter,evt){0==--emitter._eventsCount?emitter._events=new Events:delete emitter._events[evt]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1)),EventEmitter.prototype.eventNames=function eventNames(){var events,name,names=[];if(0===this._eventsCount)return names;for(name in events=this._events)has.call(events,name)&&names.push(prefix?name.slice(1):name);return Object.getOwnPropertySymbols?names.concat(Object.getOwnPropertySymbols(events)):names},EventEmitter.prototype.listeners=function listeners(event){var evt=prefix?prefix+event:event,handlers=this._events[evt];if(!handlers)return[];if(handlers.fn)return[handlers.fn];for(var i=0,l=handlers.length,ee=new Array(l);i<l;i++)ee[i]=handlers[i].fn;return ee},EventEmitter.prototype.listenerCount=function listenerCount(event){var evt=prefix?prefix+event:event,listeners=this._events[evt];return listeners?listeners.fn?1:listeners.length:0},EventEmitter.prototype.emit=function emit(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events[evt])return!1;var args,i,listeners=this._events[evt],len=arguments.length;if(listeners.fn){switch(listeners.once&&this.removeListener(event,listeners.fn,void 0,!0),len){case 1:return listeners.fn.call(listeners.context),!0;case 2:return listeners.fn.call(listeners.context,a1),!0;case 3:return listeners.fn.call(listeners.context,a1,a2),!0;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),!0;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),!0;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),!0}for(i=1,args=new Array(len-1);i<len;i++)args[i-1]=arguments[i];listeners.fn.apply(listeners.context,args)}else{var j,length=listeners.length;for(i=0;i<length;i++)switch(listeners[i].once&&this.removeListener(event,listeners[i].fn,void 0,!0),len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;case 4:listeners[i].fn.call(listeners[i].context,a1,a2,a3);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++)args[j-1]=arguments[j];listeners[i].fn.apply(listeners[i].context,args)}}return!0},EventEmitter.prototype.on=function on(event,fn,context){return addListener(this,event,fn,context,!1)},EventEmitter.prototype.once=function once(event,fn,context){return addListener(this,event,fn,context,!0)},EventEmitter.prototype.removeListener=function removeListener(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events[evt])return this;if(!fn)return clearEvent(this,evt),this;var listeners=this._events[evt];if(listeners.fn)listeners.fn!==fn||once&&!listeners.once||context&&listeners.context!==context||clearEvent(this,evt);else{for(var i=0,events=[],length=listeners.length;i<length;i++)(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context)&&events.push(listeners[i]);events.length?this._events[evt]=1===events.length?events[0]:events:clearEvent(this,evt)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(event){var evt;return event?(evt=prefix?prefix+event:event,this._events[evt]&&clearEvent(this,evt)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=prefix,EventEmitter.EventEmitter=EventEmitter,module.exports=EventEmitter},function(module,exports,__webpack_require__){var isObject=__webpack_require__(41),now=__webpack_require__(552),toNumber=__webpack_require__(553),FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max,nativeMin=Math.min;module.exports=function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args)}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime;return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&time-lastInvokeTime>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,function remainingWait(time){var timeWaiting=wait-(time-lastCallTime);return maxing?nativeMin(timeWaiting,maxWait-(time-lastInvokeTime)):timeWaiting}(time))}function trailingEdge(time){return timerId=void 0,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(void 0===timerId)return function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}(lastCallTime);if(maxing)return clearTimeout(timerId),timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return void 0===timerId&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxWait=(maxing="maxWait"in options)?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function cancel(){void 0!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0},debounced.flush=function flush(){return void 0===timerId?result:trailingEdge(now())},debounced}},function(module,exports,__webpack_require__){var root=__webpack_require__(33);module.exports=function(){return root.Date.now()}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(41),isSymbol=__webpack_require__(111),NAN=NaN,reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;module.exports=function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NAN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(2),__webpack_require__(262),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _coreEvents=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(82));function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var ConfigApi=function(){function ConfigApi(_ref){var _this=this,channel=_ref.channel,storyStore=_ref.storyStore,clientApi=_ref.clientApi,clearDecorators=_ref.clearDecorators;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ConfigApi),this._channel=void 0,this._storyStore=void 0,this._clearDecorators=void 0,this.clientApi=void 0,this.configure=function(loaders,module){module.hot&&(module.hot.accept(),module.hot.dispose((function(){_this._clearDecorators()}))),_this._channel?(!function render(){var errors=[];try{loaders&&loaders()}catch(e){errors.push(e)}if(!errors.length)try{_this._renderMain()}catch(e){errors.push(e)}if(errors.length)throw _this._storyStore.setSelection(void 0,errors[0]),errors[0];_this._storyStore.setSelection(void 0,null)}(),setTimeout((function(){return _this._channel.emit(_coreEvents.default.STORIES_CONFIGURED)}),0)):loaders()},this._channel=channel,this._storyStore=storyStore,this._clearDecorators=clearDecorators,this.clientApi=clientApi}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ConfigApi,[{key:"_renderMain",value:function _renderMain(){this._storyStore.emit(_coreEvents.default.STORY_INIT)}},{key:"_renderError",value:function _renderError(err){var error={stack:err.stack,message:err.message};this._storyStore.setSelection(void 0,error)}}]),ConfigApi}();exports.default=ConfigApi},function(module,exports,__webpack_require__){"use strict";__webpack_require__(2),__webpack_require__(50),__webpack_require__(83),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function pathToId(path){var match=(path||"").match(/^\/story\/(.+)/);if(!match)throw new Error("Invalid path '".concat(path,"',  must start with '/story/'"));return match[1]}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(2),__webpack_require__(50),__webpack_require__(158),Object.defineProperty(exports,"__esModule",{value:!0}),exports.getQueryParam=exports.getQueryParams=void 0;var _global=__webpack_require__(36),_qs=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(159));var getQueryParams=function getQueryParams(){return _global.document&&_global.document.location&&_global.document.location.search?_qs.default.parse(_global.document.location.search,{ignoreQueryPrefix:!0}):{}};exports.getQueryParams=getQueryParams;exports.getQueryParam=function getQueryParam(key){return getQueryParams()[key]}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),__webpack_require__(24),__webpack_require__(25),__webpack_require__(28),__webpack_require__(103),__webpack_require__(96),__webpack_require__(14),__webpack_require__(60),__webpack_require__(231),__webpack_require__(263),__webpack_require__(39),__webpack_require__(17),__webpack_require__(78),__webpack_require__(61),__webpack_require__(102),__webpack_require__(261),__webpack_require__(40),__webpack_require__(2),__webpack_require__(26),__webpack_require__(16),__webpack_require__(98),__webpack_require__(50),__webpack_require__(62),__webpack_require__(232),__webpack_require__(236),__webpack_require__(27),__webpack_require__(83),__webpack_require__(15),__webpack_require__(21),Object.defineProperty(exports,"__esModule",{value:!0}),exports.isExportStory=isExportStory,exports.default=function start(render){var decorateStory=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).decorateStory,context=getContext(decorateStory),clientApi=context.clientApi,channel=context.channel,configApi=context.configApi,storyStore=context.storyStore,previousKind="",previousStory="",previousRevision=-1,previousViewMode="",previousId=null,renderMain=function renderMain(forceRender){var revision=storyStore.getRevision(),loadError=storyStore.getError(),_storyStore$getSelect=storyStore.getSelection(),storyId=_storyStore$getSelect.storyId,urlViewMode=_storyStore$getSelect.viewMode,data=storyStore.fromId(storyId),_ref5=data||{},kind=_ref5.kind,name=_ref5.name,getDecorated=_ref5.getDecorated,id=_ref5.id,parameters=_ref5.parameters,error=_ref5.error,viewMode=parameters&&parameters.docsOnly?"docs":urlViewMode,renderContext=Object.assign({},context,{},data,{selectedKind:kind,selectedStory:name,parameters:parameters,forceRender:forceRender});if(loadError||error)showErrorDisplay(loadError||error);else if(forceRender||revision!==previousRevision||viewMode!==previousViewMode||kind!==previousKind||name!==previousStory){switch(!forceRender&&previousKind&&previousStory&&_addons.default.getChannel().emit(_coreEvents.default.STORY_CHANGED,id),previousViewMode){case"docs":null==previousKind||kind===previousKind&&viewMode===previousViewMode||(storyStore.cleanHooksForKind(previousKind),_reactDom.default.unmountComponentAtNode(_global.document.getElementById("docs-root")));break;case"story":default:null==previousId||id===previousId&&viewMode===previousViewMode||(storyStore.cleanHooks(previousId),_reactDom.default.unmountComponentAtNode(_global.document.getElementById("root")))}if(viewMode!==previousViewMode)switch(viewMode){case"docs":showMain(),_global.document.getElementById("root").setAttribute("hidden",!0),_global.document.getElementById("docs-root").removeAttribute("hidden");break;case"story":default:"docs"===previousViewMode&&(_global.document.getElementById("docs-root").setAttribute("hidden",!0),_global.document.getElementById("root").removeAttribute("hidden"))}switch(viewMode){case"docs":var docs=parameters&&parameters.docs||{},DocsContainer=docs.container||function(_ref6){var children=_ref6.children;return _react.default.createElement(_react.default.Fragment,null,children)},Page=docs.page||_NoDocs.NoDocs;_reactDom.default.render(_react.default.createElement(DocsContainer,{context:renderContext},_react.default.createElement(Page,null)),_global.document.getElementById("docs-root"),(function(){return _addons.default.getChannel().emit(_coreEvents.default.DOCS_RENDERED,kind)}));break;case"story":default:getDecorated?function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,render(renderContext);case 3:_addons.default.getChannel().emit(_coreEvents.default.STORY_RENDERED,id),_context.next=9;break;case 6:_context.prev=6,_context.t0=_context.catch(0),showException(_context.t0);case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])})))():(!function showNopreview(){_global.document.body.classList.remove(classes.MAIN),_global.document.body.classList.remove(classes.ERROR),_global.document.body.classList.add(classes.NOPREVIEW)}(),_addons.default.getChannel().emit(_coreEvents.default.STORY_MISSING,id))}previousRevision=revision,previousKind=kind,previousStory=name,previousViewMode=viewMode,previousId=id,forceRender||"docs"===viewMode||(_global.document.documentElement.scrollTop=0)}else _addons.default.getChannel().emit(_coreEvents.default.STORY_UNCHANGED,{id:id,revision:revision,kind:kind,name:name,viewMode:viewMode})},renderUI=function renderUI(forceRender){if(isBrowser)try{renderMain(forceRender)}catch(ex){showException(ex)}},forceReRender=function forceReRender(){return renderUI(!0)};if(isBrowser){var deprecatedToId=(0,_utilDeprecate.default)(_utils.toId,"Passing name+kind to the SET_CURRENT_STORY event is deprecated, use a storyId instead");channel.on(_coreEvents.default.FORCE_RE_RENDER,forceReRender),channel.on(_coreEvents.default.SET_CURRENT_STORY,(function(_ref8){var inputStoryId=_ref8.storyId,name=_ref8.name,kind=_ref8.kind,viewMode=_ref8.viewMode,storyId=inputStoryId;if(!storyId){if(!name||!kind)throw new Error("You should pass `storyId` into SET_CURRENT_STORY");storyId=deprecatedToId(kind,name)}storyStore.setSelection({storyId:storyId,viewMode:viewMode}),(0,_url.setPath)({storyId:storyId,viewMode:viewMode})})),_global.window.onkeydown=function(event){if(!function focusInInput(event){return/input|textarea/i.test(event.target.tagName)||null!==event.target.getAttribute("contenteditable")}(event)){var altKey=event.altKey,ctrlKey=event.ctrlKey,metaKey=event.metaKey,shiftKey=event.shiftKey,key=event.key,code=event.code,keyCode=event.keyCode;channel.emit(_coreEvents.default.PREVIEW_KEYDOWN,{event:{altKey:altKey,ctrlKey:ctrlKey,metaKey:metaKey,shiftKey:shiftKey,key:key,code:code,keyCode:keyCode}})}}}storyStore.on(_coreEvents.default.STORY_INIT,(function(){var _initializePath=(0,_url.initializePath)(),storyId=_initializePath.storyId,viewMode=_initializePath.viewMode;storyStore.setSelection({storyId:storyId,viewMode:viewMode})})),storyStore.on(_coreEvents.default.STORY_RENDER,renderUI),void 0!==_global.window&&(_global.window.__STORYBOOK_CLIENT_API__=clientApi,_global.window.__STORYBOOK_STORY_STORE__=storyStore,_global.window.__STORYBOOK_ADDONS_CHANNEL__=channel);var previousExports=new Map,loadStories=function loadStories(loadable,framework){return function(){var loadedKinds=new Set,reqs=null;Array.isArray(loadable)?reqs=loadable:loadable.keys&&(reqs=[loadable]);var currentExports=new Map;if(reqs)reqs.forEach((function(req){req.keys().forEach((function(filename){var fileExports=req(filename);currentExports.set(fileExports,"function"==typeof req.resolve?req.resolve(filename):null)}))}));else{var exported=loadable();Array.isArray(exported)&&!exported.find((function(obj){return!obj.default}))?currentExports=new Map(exported.map((function(fileExports){return[fileExports,null]}))):exported&&_clientLogger.logger.warn("Loader function passed to 'configure' should return void or an array of module exports that all contain a 'default' export. Received: ".concat(JSON.stringify(exported)))}var removed=_toConsumableArray(previousExports.keys()).filter((function(exp){return!currentExports.has(exp)}));removed.forEach((function(exp){exp.default&&storyStore.removeStoryKind(exp.default.title)})),removed.length>0&&storyStore.incrementRevision(),_toConsumableArray(currentExports.keys()).filter((function(exp){return!previousExports.has(exp)})).forEach((function(fileExports){if(fileExports.default){if(!fileExports.default.title)throw new Error("Unexpected default export without title: ".concat(JSON.stringify(fileExports.default)));var meta=fileExports.default,exports=function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}(fileExports,["default"]),kindName=meta.title,params=meta.parameters,decos=meta.decorators,component=meta.component;if(loadedKinds.has(kindName))throw new Error("Duplicate title '".concat(kindName,"' used in multiple files; use unique titles or combine '").concat(kindName,"' stories into a single file."));loadedKinds.add(kindName);var kind=clientApi.storiesOf(kindName,!0);kind.addParameters(Object.assign({framework:framework,component:component,fileName:currentExports.get(fileExports)},params)),(decos||[]).forEach((function(decorator){kind.addDecorator(decorator)})),Object.keys(exports).forEach((function(key){if(isExportStory(key,meta)){var storyFn=exports[key],_ref9=storyFn.story||{},name=_ref9.name,parameters=_ref9.parameters,decorators=_ref9.decorators;parameters&&parameters.decorators&&(0,_utilDeprecate.default)((function(){}),"".concat(kindName," => ").concat(name||key,": story.parameters.decorators is deprecated; use story.decorators instead."))();var decoratorParams=decorators?{decorators:decorators}:null,displayNameParams=name?{displayName:name}:{};kind.add((0,_utils.storyNameFromExport)(key),storyFn,Object.assign({},parameters,{},decoratorParams,{},displayNameParams))}}))}})),previousExports=currentExports}},loaded=!1;return{configure:function configure(loadable,m,framework){if(m&&m.hot&&m.hot.dispose){var _ref10$previousExport=(m.hot.data||{}).previousExports;previousExports=void 0===_ref10$previousExport?new Map:_ref10$previousExport,m.hot.dispose((function(data){loaded=!1,data.previousExports=previousExports}))}loaded&&_clientLogger.logger.warn("Unexpected loaded state. Did you call `load` twice?"),loaded=!0,configApi.configure(loadStories(loadable,framework),m)},context:context,clientApi:clientApi,configApi:configApi,forceReRender:forceReRender}},exports.getContext=void 0,__webpack_require__(127);var _global=__webpack_require__(36),_react=_interopRequireDefault(__webpack_require__(1)),_reactDom=_interopRequireDefault(__webpack_require__(265)),_utilDeprecate=_interopRequireDefault(__webpack_require__(153)),_ansiToHtml=_interopRequireDefault(__webpack_require__(562)),_addons=_interopRequireDefault(__webpack_require__(80)),_channelPostmessage=_interopRequireDefault(__webpack_require__(569)),_clientApi2=__webpack_require__(150),_utils=__webpack_require__(105),_clientLogger=__webpack_require__(63),_coreEvents=_interopRequireDefault(__webpack_require__(82)),_url=__webpack_require__(578),_NoDocs=__webpack_require__(579);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var ansiConverter=new _ansiToHtml.default,classes={MAIN:"sb-show-main",NOPREVIEW:"sb-show-nopreview",ERROR:"sb-show-errordisplay"};function matches(storyKey,arrayOrRegex){return Array.isArray(arrayOrRegex)?arrayOrRegex.includes(storyKey):storyKey.match(arrayOrRegex)}function isExportStory(key,_ref){var includeStories=_ref.includeStories,excludeStories=_ref.excludeStories;return("__esModule"!==key&&(!includeStories||matches(key,includeStories))&&(!excludeStories||!matches(key,excludeStories)))}function showMain(){_global.document.body.classList.remove(classes.NOPREVIEW),_global.document.body.classList.remove(classes.ERROR),_global.document.body.classList.add(classes.MAIN)}function showErrorDisplay(_ref2){var _ref2$message=_ref2.message,message=void 0===_ref2$message?"":_ref2$message,_ref2$stack=_ref2.stack,stack=void 0===_ref2$stack?"":_ref2$stack;_global.document.getElementById("error-message").innerHTML=ansiConverter.toHtml(message),_global.document.getElementById("error-stack").innerHTML=ansiConverter.toHtml(stack),_global.document.body.classList.remove(classes.MAIN),_global.document.body.classList.remove(classes.NOPREVIEW),_global.document.body.classList.add(classes.ERROR)}function showError(_ref3){var title=_ref3.title,description=_ref3.description;_addons.default.getChannel().emit(_coreEvents.default.STORY_ERRORED,{title:title,description:description}),showErrorDisplay({message:title,stack:description})}function showException(exception){_addons.default.getChannel().emit(_coreEvents.default.STORY_THREW_EXCEPTION,exception),showErrorDisplay(exception),_clientLogger.logger.error(exception)}var isBrowser=_global.navigator&&_global.navigator.userAgent&&"storyshots"!==_global.navigator.userAgent&&!(_global.navigator.userAgent.indexOf("Node.js")>-1)&&!(_global.navigator.userAgent.indexOf("jsdom")>-1),getContext=function(decorateStory){var storyStore,clientApi,channel=null;if(isBrowser)try{channel=_addons.default.getChannel()}catch(e){channel=(0,_channelPostmessage.default)({page:"preview"}),_addons.default.setChannel(channel)}void 0!==_global.window&&_global.window.__STORYBOOK_CLIENT_API__?storyStore=(clientApi=_global.window.__STORYBOOK_CLIENT_API__)._storyStore:(storyStore=new _clientApi2.StoryStore({channel:channel}),clientApi=new _clientApi2.ClientApi({storyStore:storyStore,decorateStory:decorateStory}));var clearDecorators=clientApi.clearDecorators;return{configApi:new _clientApi2.ConfigApi({clearDecorators:clearDecorators,storyStore:storyStore,channel:channel,clientApi:clientApi}),storyStore:storyStore,channel:channel,clientApi:clientApi,showMain:showMain,showError:showError,showException:showException}};exports.getContext=getContext},function(module,exports,__webpack_require__){"use strict";
/** @license React v16.11.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h=__webpack_require__(264),n="function"==typeof Symbol&&Symbol.for,p=n?Symbol.for("react.element"):60103,q=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,t=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,v=n?Symbol.for("react.provider"):60109,w=n?Symbol.for("react.context"):60110,x=n?Symbol.for("react.forward_ref"):60112,y=n?Symbol.for("react.suspense"):60113;n&&Symbol.for("react.suspense_list");var z=n?Symbol.for("react.memo"):60115,aa=n?Symbol.for("react.lazy"):60116;n&&Symbol.for("react.fundamental"),n&&Symbol.for("react.responder"),n&&Symbol.for("react.scope");var A="function"==typeof Symbol&&Symbol.iterator;function B(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D={};function E(a,b,c){this.props=a,this.context=b,this.refs=D,this.updater=c||C}function F(){}function G(a,b,c){this.props=a,this.context=b,this.refs=D,this.updater=c||C}E.prototype.isReactComponent={},E.prototype.setState=function(a,b){if("object"!=typeof a&&"function"!=typeof a&&null!=a)throw Error(B(85));this.updater.enqueueSetState(this,a,b,"setState")},E.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")},F.prototype=E.prototype;var H=G.prototype=new F;H.constructor=G,h(H,E.prototype),H.isPureReactComponent=!0;var I={current:null},J={current:null},K=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};function M(a,b,c){var e,d={},g=null,l=null;if(null!=b)for(e in void 0!==b.ref&&(l=b.ref),void 0!==b.key&&(g=""+b.key),b)K.call(b,e)&&!L.hasOwnProperty(e)&&(d[e]=b[e]);var f=arguments.length-2;if(1===f)d.children=c;else if(1<f){for(var k=Array(f),m=0;m<f;m++)k[m]=arguments[m+2];d.children=k}if(a&&a.defaultProps)for(e in f=a.defaultProps)void 0===d[e]&&(d[e]=f[e]);return{$$typeof:p,type:a,key:g,ref:l,props:d,_owner:J.current}}function N(a){return"object"==typeof a&&null!==a&&a.$$typeof===p}var O=/\/+/g,P=[];function Q(a,b,c,e){if(P.length){var d=P.pop();return d.result=a,d.keyPrefix=b,d.func=c,d.context=e,d.count=0,d}return{result:a,keyPrefix:b,func:c,context:e,count:0}}function R(a){a.result=null,a.keyPrefix=null,a.func=null,a.context=null,a.count=0,10>P.length&&P.push(a)}function U(a,b,c){return null==a?0:function S(a,b,c,e){var d=typeof a;"undefined"!==d&&"boolean"!==d||(a=null);var g=!1;if(null===a)g=!0;else switch(d){case"string":case"number":g=!0;break;case"object":switch(a.$$typeof){case p:case q:g=!0}}if(g)return c(e,a,""===b?"."+T(a,0):b),1;if(g=0,b=""===b?".":b+":",Array.isArray(a))for(var l=0;l<a.length;l++){var f=b+T(d=a[l],l);g+=S(d,f,c,e)}else if(null===a||"object"!=typeof a?f=null:f="function"==typeof(f=A&&a[A]||a["@@iterator"])?f:null,"function"==typeof f)for(a=f.call(a),l=0;!(d=a.next()).done;)g+=S(d=d.value,f=b+T(d,l++),c,e);else if("object"===d)throw c=""+a,Error(B(31,"[object Object]"===c?"object with keys {"+Object.keys(a).join(", ")+"}":c,""));return g}(a,"",b,c)}function T(a,b){return"object"==typeof a&&null!==a&&null!=a.key?function escape(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,(function(a){return b[a]}))}(a.key):b.toString(36)}function ca(a,b){a.func.call(a.context,b,a.count++)}function da(a,b,c){var e=a.result,d=a.keyPrefix;a=a.func.call(a.context,b,a.count++),Array.isArray(a)?V(a,e,c,(function(a){return a})):null!=a&&(N(a)&&(a=function ba(a,b){return{$$typeof:p,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}(a,d+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(O,"$&/")+"/")+c)),e.push(a))}function V(a,b,c,e,d){var g="";null!=c&&(g=(""+c).replace(O,"$&/")+"/"),U(a,da,b=Q(b,g,e,d)),R(b)}function W(){var a=I.current;if(null===a)throw Error(B(321));return a}var X={Children:{map:function(a,b,c){if(null==a)return a;var e=[];return V(a,e,null,b,c),e},forEach:function(a,b,c){if(null==a)return a;U(a,ca,b=Q(null,null,b,c)),R(b)},count:function(a){return U(a,(function(){return null}),null)},toArray:function(a){var b=[];return V(a,b,null,(function(a){return a})),b},only:function(a){if(!N(a))throw Error(B(143));return a}},createRef:function(){return{current:null}},Component:E,PureComponent:G,createContext:function(a,b){return void 0===b&&(b=null),(a={$$typeof:w,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:v,_context:a},a.Consumer=a},forwardRef:function(a){return{$$typeof:x,render:a}},lazy:function(a){return{$$typeof:aa,_ctor:a,_status:-1,_result:null}},memo:function(a,b){return{$$typeof:z,type:a,compare:void 0===b?null:b}},useCallback:function(a,b){return W().useCallback(a,b)},useContext:function(a,b){return W().useContext(a,b)},useEffect:function(a,b){return W().useEffect(a,b)},useImperativeHandle:function(a,b,c){return W().useImperativeHandle(a,b,c)},useDebugValue:function(){},useLayoutEffect:function(a,b){return W().useLayoutEffect(a,b)},useMemo:function(a,b){return W().useMemo(a,b)},useReducer:function(a,b,c){return W().useReducer(a,b,c)},useRef:function(a){return W().useRef(a)},useState:function(a){return W().useState(a)},Fragment:r,Profiler:u,StrictMode:t,Suspense:y,createElement:M,cloneElement:function(a,b,c){if(null==a)throw Error(B(267,a));var e=h({},a.props),d=a.key,g=a.ref,l=a._owner;if(null!=b){if(void 0!==b.ref&&(g=b.ref,l=J.current),void 0!==b.key&&(d=""+b.key),a.type&&a.type.defaultProps)var f=a.type.defaultProps;for(k in b)K.call(b,k)&&!L.hasOwnProperty(k)&&(e[k]=void 0===b[k]&&void 0!==f?f[k]:b[k])}var k=arguments.length-2;if(1===k)e.children=c;else if(1<k){f=Array(k);for(var m=0;m<k;m++)f[m]=arguments[m+2];e.children=f}return{$$typeof:p,type:a.type,key:d,ref:g,props:e,_owner:l}},createFactory:function(a){var b=M.bind(null,a);return b.type=a,b},isValidElement:N,version:"16.11.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:I,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:J,IsSomeRendererActing:{current:!1},assign:h}},Y={default:X},Z=Y&&X||Y;module.exports=Z.default||Z},function(module,exports,__webpack_require__){"use strict";
/** @license React v16.11.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=__webpack_require__(1),n=__webpack_require__(264),q=__webpack_require__(560);function u(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa)throw Error(u(227));var ba=null,ca={};function da(){if(ba)for(var a in ca){var b=ca[a],c=ba.indexOf(a);if(!(-1<c))throw Error(u(96,a));if(!ea[c]){if(!b.extractEvents)throw Error(u(97,a));for(var d in ea[c]=b,c=b.eventTypes){var e=void 0,f=c[d],g=b,h=d;if(fa.hasOwnProperty(h))throw Error(u(99,h));fa[h]=f;var k=f.phasedRegistrationNames;if(k){for(e in k)k.hasOwnProperty(e)&&ha(k[e],g,h);e=!0}else f.registrationName?(ha(f.registrationName,g,h),e=!0):e=!1;if(!e)throw Error(u(98,d,a))}}}}function ha(a,b,c){if(ia[a])throw Error(u(100,a));ia[a]=b,ja[a]=b.eventTypes[c].dependencies}var ea=[],fa={},ia={},ja={};function ka(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(m){this.onError(m)}}var la=!1,ma=null,na=!1,oa=null,pa={onError:function(a){la=!0,ma=a}};function qa(a,b,c,d,e,f,g,h,k){la=!1,ma=null,ka.apply(pa,arguments)}var sa=null,ua=null,va=null;function wa(a,b,c){var d=a.type||"unknown-event";a.currentTarget=va(c),function ra(a,b,c,d,e,f,g,h,k){if(qa.apply(this,arguments),la){if(!la)throw Error(u(198));var l=ma;la=!1,ma=null,na||(na=!0,oa=l)}}(d,b,void 0,a),a.currentTarget=null}function xa(a,b){if(null==b)throw Error(u(30));return null==a?b:Array.isArray(a)?Array.isArray(b)?(a.push.apply(a,b),a):(a.push(b),a):Array.isArray(b)?[a].concat(b):[a,b]}function ya(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}var za=null;function Aa(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)wa(a,b[d],c[d]);else b&&wa(a,b,c);a._dispatchListeners=null,a._dispatchInstances=null,a.isPersistent()||a.constructor.release(a)}}function Ba(a){if(null!==a&&(za=xa(za,a)),a=za,za=null,a){if(ya(a,Aa),za)throw Error(u(95));if(na)throw a=oa,na=!1,oa=null,a}}var Ca={injectEventPluginOrder:function(a){if(ba)throw Error(u(101));ba=Array.prototype.slice.call(a),da()},injectEventPluginsByName:function(a){var c,b=!1;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!ca.hasOwnProperty(c)||ca[c]!==d){if(ca[c])throw Error(u(102,c));ca[c]=d,b=!0}}b&&da()}};function Da(a,b){var c=a.stateNode;if(!c)return null;var d=sa(c);if(!d)return null;c=d[b];a:switch(b){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(d=!d.disabled)||(d=!("button"===(a=a.type)||"input"===a||"select"===a||"textarea"===a)),a=!d;break a;default:a=!1}if(a)return null;if(c&&"function"!=typeof c)throw Error(u(231,b,typeof c));return c}var Ea=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Ea.hasOwnProperty("ReactCurrentDispatcher")||(Ea.ReactCurrentDispatcher={current:null}),Ea.hasOwnProperty("ReactCurrentBatchConfig")||(Ea.ReactCurrentBatchConfig={suspense:null});var Fa=/^(.*)[\\\/]/,w="function"==typeof Symbol&&Symbol.for,Ga=w?Symbol.for("react.element"):60103,Ha=w?Symbol.for("react.portal"):60106,Ia=w?Symbol.for("react.fragment"):60107,Ja=w?Symbol.for("react.strict_mode"):60108,Ka=w?Symbol.for("react.profiler"):60114,La=w?Symbol.for("react.provider"):60109,Ma=w?Symbol.for("react.context"):60110,Na=w?Symbol.for("react.concurrent_mode"):60111,Oa=w?Symbol.for("react.forward_ref"):60112,Pa=w?Symbol.for("react.suspense"):60113,Qa=w?Symbol.for("react.suspense_list"):60120,Ra=w?Symbol.for("react.memo"):60115,Sa=w?Symbol.for("react.lazy"):60116;w&&Symbol.for("react.fundamental"),w&&Symbol.for("react.responder"),w&&Symbol.for("react.scope");var Ta="function"==typeof Symbol&&Symbol.iterator;function Ua(a){return null===a||"object"!=typeof a?null:"function"==typeof(a=Ta&&a[Ta]||a["@@iterator"])?a:null}function Wa(a){if(null==a)return null;if("function"==typeof a)return a.displayName||a.name||null;if("string"==typeof a)return a;switch(a){case Ia:return"Fragment";case Ha:return"Portal";case Ka:return"Profiler";case Ja:return"StrictMode";case Pa:return"Suspense";case Qa:return"SuspenseList"}if("object"==typeof a)switch(a.$$typeof){case Ma:return"Context.Consumer";case La:return"Context.Provider";case Oa:var b=a.render;return b=b.displayName||b.name||"",a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case Ra:return Wa(a.type);case Sa:if(a=1===a._status?a._result:null)return Wa(a)}return null}function Xa(a){var b="";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c="";break a;default:var d=a._debugOwner,e=a._debugSource,f=Wa(a.type);c=null,d&&(c=Wa(d.type)),d=f,f="",e?f=" (at "+e.fileName.replace(Fa,"")+":"+e.lineNumber+")":c&&(f=" (created by "+c+")"),c="\n    in "+(d||"Unknown")+f}b+=c,a=a.return}while(a);return b}var Ya=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Za=null,$a=null,ab=null;function bb(a){if(a=ua(a)){if("function"!=typeof Za)throw Error(u(280));var b=sa(a.stateNode);Za(a.stateNode,a.type,b)}}function cb(a){$a?ab?ab.push(a):ab=[a]:$a=a}function db(){if($a){var a=$a,b=ab;if(ab=$a=null,bb(a),b)for(a=0;a<b.length;a++)bb(b[a])}}function eb(a,b){return a(b)}function fb(a,b,c,d){return a(b,c,d)}function gb(){}var hb=eb,ib=!1,jb=!1;function kb(){null===$a&&null===ab||(gb(),db())}new Map;var lb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mb=Object.prototype.hasOwnProperty,nb={},ob={};function B(a,b,c,d,e,f){this.acceptsBooleans=2===b||3===b||4===b,this.attributeName=d,this.attributeNamespace=e,this.mustUseProperty=c,this.propertyName=a,this.type=b,this.sanitizeURL=f}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(a){D[a]=new B(a,0,!1,a,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(a){var b=a[0];D[b]=new B(b,1,!1,a[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(a){D[a]=new B(a,2,!1,a.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(a){D[a]=new B(a,2,!1,a,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(a){D[a]=new B(a,3,!1,a.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(a){D[a]=new B(a,3,!0,a,null,!1)})),["capture","download"].forEach((function(a){D[a]=new B(a,4,!1,a,null,!1)})),["cols","rows","size","span"].forEach((function(a){D[a]=new B(a,6,!1,a,null,!1)})),["rowSpan","start"].forEach((function(a){D[a]=new B(a,5,!1,a.toLowerCase(),null,!1)}));var sb=/[\-:]([a-z])/g;function tb(a){return a[1].toUpperCase()}function ub(a){switch(typeof a){case"boolean":case"number":case"object":case"string":case"undefined":return a;default:return""}}function vb(a,b,c,d){var e=D.hasOwnProperty(b)?D[b]:null;(null!==e?0===e.type:!d&&(2<b.length&&("o"===b[0]||"O"===b[0])&&("n"===b[1]||"N"===b[1])))||(function rb(a,b,c,d){if(null==b||function qb(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case"function":case"symbol":return!0;case"boolean":return!d&&(null!==c?!c.acceptsBooleans:"data-"!==(a=a.toLowerCase().slice(0,5))&&"aria-"!==a);default:return!1}}(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}(b,c,e,d)&&(c=null),d||null===e?function pb(a){return!!mb.call(ob,a)||!mb.call(nb,a)&&(lb.test(a)?ob[a]=!0:(nb[a]=!0,!1))}(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3!==e.type&&"":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(c=3===(e=e.type)||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}function wb(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function yb(a){a._valueTracker||(a._valueTracker=function xb(a){var b=wb(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&void 0!==c&&"function"==typeof c.get&&"function"==typeof c.set){var e=c.get,f=c.set;return Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a,f.call(this,a)}}),Object.defineProperty(a,b,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null,delete a[b]}}}}(a))}function zb(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue(),d="";return a&&(d=wb(a)?a.checked?"true":"false":a.value),(a=d)!==c&&(b.setValue(a),!0)}function Ab(a,b){var c=b.checked;return n({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Bb(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=ub(null!=b.value?b.value:c),a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function Cb(a,b){null!=(b=b.checked)&&vb(a,"checked",b,!1)}function Eb(a,b){Cb(a,b);var c=ub(b.value),d=b.type;if(null!=c)"number"===d?(0===c&&""===a.value||a.value!=c)&&(a.value=""+c):a.value!==""+c&&(a.value=""+c);else if("submit"===d||"reset"===d)return void a.removeAttribute("value");b.hasOwnProperty("value")?Fb(a,b.type,c):b.hasOwnProperty("defaultValue")&&Fb(a,b.type,ub(b.defaultValue)),null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function Gb(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue,c||b===a.value||(a.value=b),a.defaultValue=b}""!==(c=a.name)&&(a.name=""),a.defaultChecked=!a.defaultChecked,a.defaultChecked=!!a._wrapperState.initialChecked,""!==c&&(a.name=c)}function Fb(a,b,c){"number"===b&&a.ownerDocument.activeElement===a||(null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c))}function Ib(a,b){return a=n({children:void 0},b),(b=function Hb(a){var b="";return aa.Children.forEach(a,(function(a){null!=a&&(b+=a)})),b}(b.children))&&(a.children=b),a}function Jb(a,b,c,d){if(a=a.options,b){b={};for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{for(c=""+ub(c),b=null,e=0;e<a.length;e++){if(a[e].value===c)return a[e].selected=!0,void(d&&(a[e].defaultSelected=!0));null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function Kb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(u(91));return n({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Lb(a,b){var c=b.value;if(null==c){if(c=b.defaultValue,null!=(b=b.children)){if(null!=c)throw Error(u(92));if(Array.isArray(b)){if(!(1>=b.length))throw Error(u(93));b=b[0]}c=b}null==c&&(c="")}a._wrapperState={initialValue:ub(c)}}function Mb(a,b){var c=ub(b.value),d=ub(b.defaultValue);null!=c&&((c=""+c)!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c)),null!=d&&(a.defaultValue=""+d)}function Nb(a){var b=a.textContent;b===a._wrapperState.initialValue&&""!==b&&null!==b&&(a.value=b)}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(a){var b=a.replace(sb,tb);D[b]=new B(b,1,!1,a,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(a){var b=a.replace(sb,tb);D[b]=new B(b,1,!1,a,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(a){var b=a.replace(sb,tb);D[b]=new B(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!1)})),D.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!0)}));var Ob={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Pb(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qb(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?Pb(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}var Rb,Sb=function(a){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction((function(){return a(b,c)}))}:a}((function(a,b){if(a.namespaceURI!==Ob.svg||"innerHTML"in a)a.innerHTML=b;else{for((Rb=Rb||document.createElement("div")).innerHTML="<svg>"+b.valueOf().toString()+"</svg>",b=Rb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}}));function Tb(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType)return void(c.nodeValue=b)}a.textContent=b}function Ub(a,b){var c={};return c[a.toLowerCase()]=b.toLowerCase(),c["Webkit"+a]="webkit"+b,c["Moz"+a]="moz"+b,c}var Vb={animationend:Ub("Animation","AnimationEnd"),animationiteration:Ub("Animation","AnimationIteration"),animationstart:Ub("Animation","AnimationStart"),transitionend:Ub("Transition","TransitionEnd")},Wb={},Xb={};function Yb(a){if(Wb[a])return Wb[a];if(!Vb[a])return a;var c,b=Vb[a];for(c in b)if(b.hasOwnProperty(c)&&c in Xb)return Wb[a]=b[c];return a}Ya&&(Xb=document.createElement("div").style,"AnimationEvent"in window||(delete Vb.animationend.animation,delete Vb.animationiteration.animation,delete Vb.animationstart.animation),"TransitionEvent"in window||delete Vb.transitionend.transition);var Zb=Yb("animationend"),$b=Yb("animationiteration"),ac=Yb("animationstart"),bc=Yb("transitionend"),dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ");function ec(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do{0!=(1026&(b=a).effectTag)&&(c=b.return),a=b.return}while(a)}return 3===b.tag?c:null}function fc(a){if(13===a.tag){var b=a.memoizedState;if(null===b&&(null!==(a=a.alternate)&&(b=a.memoizedState)),null!==b)return b.dehydrated}return null}function gc(a){if(ec(a)!==a)throw Error(u(188))}function ic(a){if(!(a=function hc(a){var b=a.alternate;if(!b){if(null===(b=ec(a)))throw Error(u(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){if(null!==(d=e.return)){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return gc(e),a;if(f===d)return gc(e),b;f=f.sibling}throw Error(u(188))}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0,c=e,d=f;break}if(h===d){g=!0,d=e,c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===c){g=!0,c=f,d=e;break}if(h===d){g=!0,d=f,c=e;break}h=h.sibling}if(!g)throw Error(u(189))}}if(c.alternate!==d)throw Error(u(190))}if(3!==c.tag)throw Error(u(188));return c.stateNode.current===c?a:b}(a)))return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}}return null}var jc,kc,lc,mc=!1,nc=[],oc=null,pc=null,qc=null,rc=new Map,sc=new Map,tc=[],uc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),vc="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function zc(a,b,c,d){return{blockedOn:a,topLevelType:b,eventSystemFlags:32|c,nativeEvent:d}}function Ac(a,b){switch(a){case"focus":case"blur":oc=null;break;case"dragenter":case"dragleave":pc=null;break;case"mouseover":case"mouseout":qc=null;break;case"pointerover":case"pointerout":rc.delete(b.pointerId);break;case"gotpointercapture":case"lostpointercapture":sc.delete(b.pointerId)}}function Bc(a,b,c,d,e){return null===a||a.nativeEvent!==e?(a=zc(b,c,d,e),null!==b&&(null!==(b=Cc(b))&&kc(b)),a):(a.eventSystemFlags|=d,a)}function Ec(a){var b=Fc(a.target);if(null!==b){var c=ec(b);if(null!==c)if(13===(b=c.tag)){if(null!==(b=fc(c)))return a.blockedOn=b,void q.unstable_runWithPriority(a.priority,(function(){lc(c)}))}else if(3===b&&c.stateNode.hydrate)return void(a.blockedOn=3===c.tag?c.stateNode.containerInfo:null)}a.blockedOn=null}function Gc(a){if(null!==a.blockedOn)return!1;var b=Hc(a.topLevelType,a.eventSystemFlags,a.nativeEvent);if(null!==b){var c=Cc(b);return null!==c&&kc(c),a.blockedOn=b,!1}return!0}function Ic(a,b,c){Gc(a)&&c.delete(b)}function Jc(){for(mc=!1;0<nc.length;){var a=nc[0];if(null!==a.blockedOn){null!==(a=Cc(a.blockedOn))&&jc(a);break}var b=Hc(a.topLevelType,a.eventSystemFlags,a.nativeEvent);null!==b?a.blockedOn=b:nc.shift()}null!==oc&&Gc(oc)&&(oc=null),null!==pc&&Gc(pc)&&(pc=null),null!==qc&&Gc(qc)&&(qc=null),rc.forEach(Ic),sc.forEach(Ic)}function Kc(a,b){a.blockedOn===b&&(a.blockedOn=null,mc||(mc=!0,q.unstable_scheduleCallback(q.unstable_NormalPriority,Jc)))}function Lc(a){function b(b){return Kc(b,a)}if(0<nc.length){Kc(nc[0],a);for(var c=1;c<nc.length;c++){var d=nc[c];d.blockedOn===a&&(d.blockedOn=null)}}for(null!==oc&&Kc(oc,a),null!==pc&&Kc(pc,a),null!==qc&&Kc(qc,a),rc.forEach(b),sc.forEach(b),c=0;c<tc.length;c++)(d=tc[c]).blockedOn===a&&(d.blockedOn=null);for(;0<tc.length&&null===(c=tc[0]).blockedOn;)Ec(c),null===c.blockedOn&&tc.shift()}function Mc(a){return(a=a.target||a.srcElement||window).correspondingUseElement&&(a=a.correspondingUseElement),3===a.nodeType?a.parentNode:a}function Nc(a){do{a=a.return}while(a&&5!==a.tag);return a||null}function Oc(a,b,c){(b=Da(a,c.dispatchConfig.phasedRegistrationNames[b]))&&(c._dispatchListeners=xa(c._dispatchListeners,b),c._dispatchInstances=xa(c._dispatchInstances,a))}function Pc(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=Nc(b);for(b=c.length;0<b--;)Oc(c[b],"captured",a);for(b=0;b<c.length;b++)Oc(c[b],"bubbled",a)}}function Qc(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=Da(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=xa(c._dispatchListeners,b),c._dispatchInstances=xa(c._dispatchInstances,a))}function Rc(a){a&&a.dispatchConfig.registrationName&&Qc(a._targetInst,null,a)}function Sc(a){ya(a,Pc)}function Tc(){return!0}function Uc(){return!1}function E(a,b,c,d){for(var e in this.dispatchConfig=a,this._targetInst=b,this.nativeEvent=c,a=this.constructor.Interface)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);return this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?Tc:Uc,this.isPropagationStopped=Uc,this}function Wc(a,b,c,d){if(this.eventPool.length){var e=this.eventPool.pop();return this.call(e,a,b,c,d),e}return new this(a,b,c,d)}function Xc(a){if(!(a instanceof this))throw Error(u(279));a.destructor(),10>this.eventPool.length&&this.eventPool.push(a)}function Vc(a){a.eventPool=[],a.getPooled=Wc,a.release=Xc}n(E.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!=typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=Tc)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!=typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=Tc)},persist:function(){this.isPersistent=Tc},isPersistent:Uc,destructor:function(){var b,a=this.constructor.Interface;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Uc,this._dispatchInstances=this._dispatchListeners=null}}),E.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},E.extend=function(a){function b(){}function c(){return d.apply(this,arguments)}var d=this;b.prototype=d.prototype;var e=new b;return n(e,c.prototype),c.prototype=e,c.prototype.constructor=c,c.Interface=n({},d.Interface,a),c.extend=d.extend,Vc(c),c},Vc(E);var Yc=E.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Zc=E.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),$c=E.extend({view:null,detail:null}),ad=$c.extend({relatedTarget:null});function bd(a){var b=a.keyCode;return"charCode"in a?0===(a=a.charCode)&&13===b&&(a=13):a=b,10===a&&(a=13),32<=a||13===a?a:0}var cd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ed={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):!!(a=fd[a])&&!!b[a]}function hd(){return gd}for(var id=$c.extend({key:function(a){if(a.key){var b=cd[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?13===(a=bd(a))?"Enter":String.fromCharCode(a):"keydown"===a.type||"keyup"===a.type?ed[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:hd,charCode:function(a){return"keypress"===a.type?bd(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===a.type?bd(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),jd=0,kd=0,ld=!1,md=!1,nd=$c.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:hd,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if("movementX"in a)return a.movementX;var b=jd;return jd=a.screenX,ld?"mousemove"===a.type?a.screenX-b:0:(ld=!0,0)},movementY:function(a){if("movementY"in a)return a.movementY;var b=kd;return kd=a.screenY,md?"mousemove"===a.type?a.screenY-b:0:(md=!0,0)}}),od=nd.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),pd=nd.extend({dataTransfer:null}),qd=$c.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:hd}),rd=E.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),sd=nd.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:null,deltaMode:null}),td=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Zb,"animationEnd",2],[$b,"animationIteration",2],[ac,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[bc,"transitionEnd",2],["waiting","waiting",2]],ud={},vd={},xd=0;xd<td.length;xd++){var yd=td[xd],zd=yd[0],Ad=yd[1],Bd=yd[2],Cd="on"+(Ad[0].toUpperCase()+Ad.slice(1)),Dd={phasedRegistrationNames:{bubbled:Cd,captured:Cd+"Capture"},dependencies:[zd],eventPriority:Bd};ud[Ad]=Dd,vd[zd]=Dd}var Ed={eventTypes:ud,getEventPriority:function(a){return void 0!==(a=vd[a])?a.eventPriority:2},extractEvents:function(a,b,c,d){var e=vd[a];if(!e)return null;switch(a){case"keypress":if(0===bd(c))return null;case"keydown":case"keyup":a=id;break;case"blur":case"focus":a=ad;break;case"click":if(2===c.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":a=nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":a=pd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":a=qd;break;case Zb:case $b:case ac:a=Yc;break;case bc:a=rd;break;case"scroll":a=$c;break;case"wheel":a=sd;break;case"copy":case"cut":case"paste":a=Zc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":a=od;break;default:a=E}return Sc(b=a.getPooled(e,b,c,d)),b}},Fd=q.unstable_UserBlockingPriority,Gd=q.unstable_runWithPriority,Hd=Ed.getEventPriority,Id=10,Jd=[];function Kd(a){var b=a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d=c;if(3===d.tag)d=d.stateNode.containerInfo;else{for(;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo}if(!d)break;5!==(b=c.tag)&&6!==b||a.ancestors.push(c),c=Fc(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=Mc(a.nativeEvent);d=a.topLevelType;for(var f=a.nativeEvent,g=a.eventSystemFlags,h=null,k=0;k<ea.length;k++){var l=ea[k];l&&(l=l.extractEvents(d,b,f,e,g))&&(h=xa(h,l))}Ba(h)}}var Ld=!0;function F(a,b){Md(b,a,!1)}function Md(a,b,c){switch(Hd(b)){case 0:var d=Nd.bind(null,b,1);break;case 1:d=Od.bind(null,b,1);break;default:d=Pd.bind(null,b,1)}c?a.addEventListener(b,d,!0):a.addEventListener(b,d,!1)}function Nd(a,b,c){ib||gb();var d=Pd,e=ib;ib=!0;try{fb(d,a,b,c)}finally{(ib=e)||kb()}}function Od(a,b,c){Gd(Fd,Pd.bind(null,a,b,c))}function Qd(a,b,c,d){if(Jd.length){var e=Jd.pop();e.topLevelType=a,e.eventSystemFlags=b,e.nativeEvent=c,e.targetInst=d,a=e}else a={topLevelType:a,eventSystemFlags:b,nativeEvent:c,targetInst:d,ancestors:[]};try{if(b=Kd,c=a,jb)b(c,void 0);else{jb=!0;try{hb(b,c,void 0)}finally{jb=!1,kb()}}}finally{a.topLevelType=null,a.nativeEvent=null,a.targetInst=null,a.ancestors.length=0,Jd.length<Id&&Jd.push(a)}}function Pd(a,b,c){if(Ld)if(0<nc.length&&-1<uc.indexOf(a))a=zc(null,a,b,c),nc.push(a);else{var d=Hc(a,b,c);null===d?Ac(a,c):-1<uc.indexOf(a)?(a=zc(d,a,b,c),nc.push(a)):function Dc(a,b,c,d){switch(b){case"focus":return oc=Bc(oc,a,b,c,d),!0;case"dragenter":return pc=Bc(pc,a,b,c,d),!0;case"mouseover":return qc=Bc(qc,a,b,c,d),!0;case"pointerover":var e=d.pointerId;return rc.set(e,Bc(rc.get(e)||null,a,b,c,d)),!0;case"gotpointercapture":return e=d.pointerId,sc.set(e,Bc(sc.get(e)||null,a,b,c,d)),!0}return!1}(d,a,b,c)||(Ac(a,c),Qd(a,b,c,null))}}function Hc(a,b,c){var d=Mc(c);if(null!==(d=Fc(d))){var e=ec(d);if(null===e)d=null;else{var f=e.tag;if(13===f){if(null!==(d=fc(e)))return d;d=null}else if(3===f){if(e.stateNode.hydrate)return 3===e.tag?e.stateNode.containerInfo:null;d=null}else e!==d&&(d=null)}}return Qd(a,b,c,d),null}function Rd(a){if(!Ya)return!1;var b=(a="on"+a)in document;return b||((b=document.createElement("div")).setAttribute(a,"return;"),b="function"==typeof b[a]),b}var Sd=new("function"==typeof WeakMap?WeakMap:Map);function xc(a){var b=Sd.get(a);return void 0===b&&(b=new Set,Sd.set(a,b)),b}function yc(a,b,c){if(!c.has(a)){switch(a){case"scroll":Md(b,"scroll",!0);break;case"focus":case"blur":Md(b,"focus",!0),Md(b,"blur",!0),c.add("blur"),c.add("focus");break;case"cancel":case"close":Rd(a)&&Md(b,a,!0);break;case"invalid":case"submit":case"reset":break;default:-1===dc.indexOf(a)&&F(a,b)}c.add(a)}}var Td={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ud=["Webkit","ms","Moz","O"];function Vd(a,b,c){return null==b||"boolean"==typeof b||""===b?"":c||"number"!=typeof b||0===b||Td.hasOwnProperty(a)&&Td[a]?(""+b).trim():b+"px"}function Wd(a,b){for(var c in a=a.style,b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=Vd(c,b[c],d);"float"===c&&(c="cssFloat"),d?a.setProperty(c,e):a[c]=e}}Object.keys(Td).forEach((function(a){Ud.forEach((function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1),Td[b]=Td[a]}))}));var Xd=n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yd(a,b){if(b){if(Xd[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(u(137,a,""));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(u(60));if(!("object"==typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML))throw Error(u(61))}if(null!=b.style&&"object"!=typeof b.style)throw Error(u(62,""))}}function Zd(a,b){if(-1===a.indexOf("-"))return"string"==typeof b.is;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function $d(a,b){var c=xc(a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument);b=ja[b];for(var d=0;d<b.length;d++)yc(b[d],a,c)}function ae(){}function be(a){if(void 0===(a=a||("undefined"!=typeof document?document:void 0)))return null;try{return a.activeElement||a.body}catch(b){return a.body}}function ce(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function de(a,b){var d,c=ce(a);for(a=0;c;){if(3===c.nodeType){if(d=a+c.textContent.length,a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=ce(c)}}function fe(){for(var a=window,b=be();b instanceof a.HTMLIFrameElement;){try{var c="string"==typeof b.contentWindow.location.href}catch(d){c=!1}if(!c)break;b=be((a=b.contentWindow).document)}return b}function ge(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}var he="$",ie="/$",je="$?",ke="$!",le=null,me=null;function ne(a,b){switch(a){case"button":case"input":case"select":case"textarea":return!!b.autoFocus}return!1}function oe(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"==typeof b.children||"number"==typeof b.children||"object"==typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}var pe="function"==typeof setTimeout?setTimeout:void 0,qe="function"==typeof clearTimeout?clearTimeout:void 0;function re(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function se(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(c===he||c===ke||c===je){if(0===b)return a;b--}else c===ie&&b++}a=a.previousSibling}return null}var te=Math.random().toString(36).slice(2),ue="__reactInternalInstance$"+te,ve="__reactEventHandlers$"+te,we="__reactContainere$"+te;function Fc(a){var b=a[ue];if(b)return b;for(var c=a.parentNode;c;){if(b=c[we]||c[ue]){if(c=b.alternate,null!==b.child||null!==c&&null!==c.child)for(a=se(a);null!==a;){if(c=a[ue])return c;a=se(a)}return b}c=(a=c).parentNode}return null}function Cc(a){return!(a=a[ue]||a[we])||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function xe(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(u(33))}function ye(a){return a[ve]||null}var ze=null,Ae=null,Be=null;function Ce(){if(Be)return Be;var a,d,b=Ae,c=b.length,e="value"in ze?ze.value:ze.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return Be=e.slice(a,1<d?1-d:void 0)}var De=E.extend({data:null}),Ee=E.extend({data:null}),Fe=[9,13,27,32],Ge=Ya&&"CompositionEvent"in window,He=null;Ya&&"documentMode"in document&&(He=document.documentMode);var Ie=Ya&&"TextEvent"in window&&!He,Je=Ya&&(!Ge||He&&8<He&&11>=He),Ke=String.fromCharCode(32),Le={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Me=!1;function Ne(a,b){switch(a){case"keyup":return-1!==Fe.indexOf(b.keyCode);case"keydown":return 229!==b.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Oe(a){return"object"==typeof(a=a.detail)&&"data"in a?a.data:null}var Pe=!1;var Se={eventTypes:Le,extractEvents:function(a,b,c,d){var e;if(Ge)b:{switch(a){case"compositionstart":var f=Le.compositionStart;break b;case"compositionend":f=Le.compositionEnd;break b;case"compositionupdate":f=Le.compositionUpdate;break b}f=void 0}else Pe?Ne(a,c)&&(f=Le.compositionEnd):"keydown"===a&&229===c.keyCode&&(f=Le.compositionStart);return f?(Je&&"ko"!==c.locale&&(Pe||f!==Le.compositionStart?f===Le.compositionEnd&&Pe&&(e=Ce()):(Ae="value"in(ze=d)?ze.value:ze.textContent,Pe=!0)),f=De.getPooled(f,b,c,d),e?f.data=e:null!==(e=Oe(c))&&(f.data=e),Sc(f),e=f):e=null,(a=Ie?function Qe(a,b){switch(a){case"compositionend":return Oe(b);case"keypress":return 32!==b.which?null:(Me=!0,Ke);case"textInput":return(a=b.data)===Ke&&Me?null:a;default:return null}}(a,c):function Re(a,b){if(Pe)return"compositionend"===a||!Ge&&Ne(a,b)?(a=Ce(),Be=Ae=ze=null,Pe=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case"compositionend":return Je&&"ko"!==b.locale?null:b.data;default:return null}}(a,c))?((b=Ee.getPooled(Le.beforeInput,b,c,d)).data=a,Sc(b)):b=null,null===e?b:null===b?e:[e,b]}},Te={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ue(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!Te[a.type]:"textarea"===b}var Ve={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function We(a,b,c){return(a=E.getPooled(Ve.change,a,b,c)).type="change",cb(c),Sc(a),a}var Xe=null,Ye=null;function Ze(a){Ba(a)}function $e(a){if(zb(xe(a)))return a}function af(a,b){if("change"===a)return b}var bf=!1;function cf(){Xe&&(Xe.detachEvent("onpropertychange",df),Ye=Xe=null)}function df(a){if("value"===a.propertyName&&$e(Ye))if(a=We(Ye,a,Mc(a)),ib)Ba(a);else{ib=!0;try{eb(Ze,a)}finally{ib=!1,kb()}}}function ef(a,b,c){"focus"===a?(cf(),Ye=c,(Xe=b).attachEvent("onpropertychange",df)):"blur"===a&&cf()}function ff(a){if("selectionchange"===a||"keyup"===a||"keydown"===a)return $e(Ye)}function gf(a,b){if("click"===a)return $e(b)}function hf(a,b){if("input"===a||"change"===a)return $e(b)}Ya&&(bf=Rd("input")&&(!document.documentMode||9<document.documentMode));var lf,jf={eventTypes:Ve,_isInputEventSupported:bf,extractEvents:function(a,b,c,d){var e=b?xe(b):window,f=e.nodeName&&e.nodeName.toLowerCase();if("select"===f||"input"===f&&"file"===e.type)var g=af;else if(Ue(e))if(bf)g=hf;else{g=ff;var h=ef}else(f=e.nodeName)&&"input"===f.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(g=gf);if(g&&(g=g(a,b)))return We(g,c,d);h&&h(a,e,b),"blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&Fb(e,"number",e.value)}},kf={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},mf={eventTypes:kf,extractEvents:function(a,b,c,d,e){var f="mouseover"===a||"pointerover"===a,g="mouseout"===a||"pointerout"===a;if(f&&0==(32&e)&&(c.relatedTarget||c.fromElement)||!g&&!f)return null;if(e=d.window===d?d:(e=d.ownerDocument)?e.defaultView||e.parentWindow:window,g?(g=b,null!==(b=(b=c.relatedTarget||c.toElement)?Fc(b):null)&&(b!==(f=ec(b))||5!==b.tag&&6!==b.tag)&&(b=null)):g=null,g===b)return null;if("mouseout"===a||"mouseover"===a)var h=nd,k=kf.mouseLeave,l=kf.mouseEnter,m="mouse";else"pointerout"!==a&&"pointerover"!==a||(h=od,k=kf.pointerLeave,l=kf.pointerEnter,m="pointer");if(a=null==g?e:xe(g),e=null==b?e:xe(b),(k=h.getPooled(k,g,c,d)).type=m+"leave",k.target=a,k.relatedTarget=e,(d=h.getPooled(l,b,c,d)).type=m+"enter",d.target=e,d.relatedTarget=a,m=b,(h=g)&&m)a:{for(a=m,g=0,b=l=h;b;b=Nc(b))g++;for(b=0,e=a;e;e=Nc(e))b++;for(;0<g-b;)l=Nc(l),g--;for(;0<b-g;)a=Nc(a),b--;for(;g--;){if(l===a||l===a.alternate)break a;l=Nc(l),a=Nc(a)}l=null}else l=null;for(a=l,l=[];h&&h!==a&&(null===(g=h.alternate)||g!==a);)l.push(h),h=Nc(h);for(h=[];m&&m!==a&&(null===(g=m.alternate)||g!==a);)h.push(m),m=Nc(m);for(m=0;m<l.length;m++)Qc(l[m],"bubbled",k);for(m=h.length;0<m--;)Qc(h[m],"captured",d);return c===lf?(lf=null,[k]):(lf=c,[k,d])}};var of="function"==typeof Object.is?Object.is:function nf(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},pf=Object.prototype.hasOwnProperty;function qf(a,b){if(of(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!pf.call(b,c[d])||!of(a[c[d]],b[c[d]]))return!1;return!0}var rf=Ya&&"documentMode"in document&&11>=document.documentMode,sf={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},tf=null,uf=null,vf=null,wf=!1;function xf(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;return wf||null==tf||tf!==be(c)?null:("selectionStart"in(c=tf)&&ge(c)?c={start:c.selectionStart,end:c.selectionEnd}:c={anchorNode:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset},vf&&qf(vf,c)?null:(vf=c,(a=E.getPooled(sf.select,uf,a,b)).type="select",a.target=tf,Sc(a),a))}var yf={eventTypes:sf,extractEvents:function(a,b,c,d){var f,e=d.window===d?d.document:9===d.nodeType?d:d.ownerDocument;if(!(f=!e)){a:{e=xc(e),f=ja.onSelect;for(var g=0;g<f.length;g++)if(!e.has(f[g])){e=!1;break a}e=!0}f=!e}if(f)return null;switch(e=b?xe(b):window,a){case"focus":(Ue(e)||"true"===e.contentEditable)&&(tf=e,uf=b,vf=null);break;case"blur":vf=uf=tf=null;break;case"mousedown":wf=!0;break;case"contextmenu":case"mouseup":case"dragend":return wf=!1,xf(c,d);case"selectionchange":if(rf)break;case"keydown":case"keyup":return xf(c,d)}return null}};Ca.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),sa=ye,ua=Cc,va=xe,Ca.injectEventPluginsByName({SimpleEventPlugin:Ed,EnterLeaveEventPlugin:mf,ChangeEventPlugin:jf,SelectEventPlugin:yf,BeforeInputEventPlugin:Se}),new Set;var Af=[],Bf=-1;function G(a){0>Bf||(a.current=Af[Bf],Af[Bf]=null,Bf--)}function I(a,b){Af[++Bf]=a.current,a.current=b}var Cf={},J={current:Cf},K={current:!1},Df=Cf;function Ef(a,b){var c=a.type.contextTypes;if(!c)return Cf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var f,e={};for(f in c)e[f]=b[f];return d&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e),e}function L(a){return null!=(a=a.childContextTypes)}function Ff(a){G(K),G(J)}function Gf(a){G(K),G(J)}function Hf(a,b,c){if(J.current!==Cf)throw Error(u(168));I(J,b),I(K,c)}function If(a,b,c){var d=a.stateNode;if(a=b.childContextTypes,"function"!=typeof d.getChildContext)return c;for(var e in d=d.getChildContext())if(!(e in a))throw Error(u(108,Wa(b)||"Unknown",e));return n({},c,{},d)}function Jf(a){var b=a.stateNode;return b=b&&b.__reactInternalMemoizedMergedChildContext||Cf,Df=J.current,I(J,b),I(K,K.current),!0}function Kf(a,b,c){var d=a.stateNode;if(!d)throw Error(u(169));c?(b=If(a,b,Df),d.__reactInternalMemoizedMergedChildContext=b,G(K),G(J),I(J,b)):G(K),I(K,c)}var Lf=q.unstable_runWithPriority,Mf=q.unstable_scheduleCallback,Nf=q.unstable_cancelCallback,Of=q.unstable_shouldYield,Pf=q.unstable_requestPaint,Qf=q.unstable_now,Rf=q.unstable_getCurrentPriorityLevel,Sf=q.unstable_ImmediatePriority,Tf=q.unstable_UserBlockingPriority,Uf=q.unstable_NormalPriority,Vf=q.unstable_LowPriority,Wf=q.unstable_IdlePriority,Xf={},Yf=void 0!==Pf?Pf:function(){},Zf=null,$f=null,ag=!1,bg=Qf(),cg=1e4>bg?Qf:function(){return Qf()-bg};function dg(){switch(Rf()){case Sf:return 99;case Tf:return 98;case Uf:return 97;case Vf:return 96;case Wf:return 95;default:throw Error(u(332))}}function eg(a){switch(a){case 99:return Sf;case 98:return Tf;case 97:return Uf;case 96:return Vf;case 95:return Wf;default:throw Error(u(332))}}function fg(a,b){return a=eg(a),Lf(a,b)}function gg(a,b,c){return a=eg(a),Mf(a,b,c)}function hg(a){return null===Zf?(Zf=[a],$f=Mf(Sf,ig)):Zf.push(a),Xf}function jg(){if(null!==$f){var a=$f;$f=null,Nf(a)}ig()}function ig(){if(!ag&&null!==Zf){ag=!0;var a=0;try{var b=Zf;fg(99,(function(){for(;a<b.length;a++){var c=b[a];do{c=c(!0)}while(null!==c)}})),Zf=null}catch(c){throw null!==Zf&&(Zf=Zf.slice(a+1)),Mf(Sf,jg),c}finally{ag=!1}}}var kg=3;function lg(a,b,c){return 1073741821-(1+((1073741821-a+b/10)/(c/=10)|0))*c}function mg(a,b){if(a&&a.defaultProps)for(var c in b=n({},b),a=a.defaultProps)void 0===b[c]&&(b[c]=a[c]);return b}var ng={current:null},og=null,pg=null,qg=null;function rg(){qg=pg=og=null}function sg(a,b){var c=a.type._context;I(ng,c._currentValue),c._currentValue=b}function tg(a){var b=ng.current;G(ng),a.type._context._currentValue=b}function ug(a,b){for(;null!==a;){var c=a.alternate;if(a.childExpirationTime<b)a.childExpirationTime=b,null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);else{if(!(null!==c&&c.childExpirationTime<b))break;c.childExpirationTime=b}a=a.return}}function vg(a,b){og=a,qg=pg=null,null!==(a=a.dependencies)&&null!==a.firstContext&&(a.expirationTime>=b&&(wg=!0),a.firstContext=null)}function xg(a,b){if(qg!==a&&!1!==b&&0!==b)if("number"==typeof b&&1073741823!==b||(qg=a,b=1073741823),b={context:a,observedBits:b,next:null},null===pg){if(null===og)throw Error(u(308));pg=b,og.dependencies={expirationTime:0,firstContext:b,responders:null}}else pg=pg.next=b;return a._currentValue}var yg=!1;function zg(a){return{baseState:a,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Ag(a){return{baseState:a.baseState,firstUpdate:a.firstUpdate,lastUpdate:a.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Bg(a,b){return{expirationTime:a,suspenseConfig:b,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Cg(a,b){null===a.lastUpdate?a.firstUpdate=a.lastUpdate=b:(a.lastUpdate.next=b,a.lastUpdate=b)}function Dg(a,b){var c=a.alternate;if(null===c){var d=a.updateQueue,e=null;null===d&&(d=a.updateQueue=zg(a.memoizedState))}else d=a.updateQueue,e=c.updateQueue,null===d?null===e?(d=a.updateQueue=zg(a.memoizedState),e=c.updateQueue=zg(c.memoizedState)):d=a.updateQueue=Ag(e):null===e&&(e=c.updateQueue=Ag(d));null===e||d===e?Cg(d,b):null===d.lastUpdate||null===e.lastUpdate?(Cg(d,b),Cg(e,b)):(Cg(d,b),e.lastUpdate=b)}function Eg(a,b){var c=a.updateQueue;null===(c=null===c?a.updateQueue=zg(a.memoizedState):Fg(a,c)).lastCapturedUpdate?c.firstCapturedUpdate=c.lastCapturedUpdate=b:(c.lastCapturedUpdate.next=b,c.lastCapturedUpdate=b)}function Fg(a,b){var c=a.alternate;return null!==c&&b===c.updateQueue&&(b=a.updateQueue=Ag(b)),b}function Gg(a,b,c,d,e,f){switch(c.tag){case 1:return"function"==typeof(a=c.payload)?a.call(f,d,e):a;case 3:a.effectTag=-4097&a.effectTag|64;case 0:if(null==(e="function"==typeof(a=c.payload)?a.call(f,d,e):a))break;return n({},d,e);case 2:yg=!0}return d}function Hg(a,b,c,d,e){yg=!1;for(var f=(b=Fg(a,b)).baseState,g=null,h=0,k=b.firstUpdate,l=f;null!==k;){var m=k.expirationTime;m<e?(null===g&&(g=k,f=l),h<m&&(h=m)):(Ig(m,k.suspenseConfig),l=Gg(a,0,k,l,c,d),null!==k.callback&&(a.effectTag|=32,k.nextEffect=null,null===b.lastEffect?b.firstEffect=b.lastEffect=k:(b.lastEffect.nextEffect=k,b.lastEffect=k))),k=k.next}for(m=null,k=b.firstCapturedUpdate;null!==k;){var C=k.expirationTime;C<e?(null===m&&(m=k,null===g&&(f=l)),h<C&&(h=C)):(l=Gg(a,0,k,l,c,d),null!==k.callback&&(a.effectTag|=32,k.nextEffect=null,null===b.lastCapturedEffect?b.firstCapturedEffect=b.lastCapturedEffect=k:(b.lastCapturedEffect.nextEffect=k,b.lastCapturedEffect=k))),k=k.next}null===g&&(b.lastUpdate=null),null===m?b.lastCapturedUpdate=null:a.effectTag|=32,null===g&&null===m&&(f=l),b.baseState=f,b.firstUpdate=g,b.firstCapturedUpdate=m,Jg(h),a.expirationTime=h,a.memoizedState=l}function Kg(a,b,c){null!==b.firstCapturedUpdate&&(null!==b.lastUpdate&&(b.lastUpdate.next=b.firstCapturedUpdate,b.lastUpdate=b.lastCapturedUpdate),b.firstCapturedUpdate=b.lastCapturedUpdate=null),Lg(b.firstEffect,c),b.firstEffect=b.lastEffect=null,Lg(b.firstCapturedEffect,c),b.firstCapturedEffect=b.lastCapturedEffect=null}function Lg(a,b){for(;null!==a;){var c=a.callback;if(null!==c){a.callback=null;var d=b;if("function"!=typeof c)throw Error(u(191,c));c.call(d)}a=a.nextEffect}}var Mg=Ea.ReactCurrentBatchConfig,Ng=(new aa.Component).refs;function Og(a,b,c,d){c=null==(c=c(d,b=a.memoizedState))?b:n({},b,c),a.memoizedState=c,null!==(d=a.updateQueue)&&0===a.expirationTime&&(d.baseState=c)}var Sg={isMounted:function(a){return!!(a=a._reactInternalFiber)&&ec(a)===a},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=Pg(),e=Mg.suspense;(e=Bg(d=Qg(d,a,e),e)).payload=b,null!=c&&(e.callback=c),Dg(a,e),Rg(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=Pg(),e=Mg.suspense;(e=Bg(d=Qg(d,a,e),e)).tag=1,e.payload=b,null!=c&&(e.callback=c),Dg(a,e),Rg(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=Pg(),d=Mg.suspense;(d=Bg(c=Qg(c,a,d),d)).tag=2,null!=b&&(d.callback=b),Dg(a,d),Rg(a,c)}};function Tg(a,b,c,d,e,f,g){return"function"==typeof(a=a.stateNode).shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):!b.prototype||!b.prototype.isPureReactComponent||(!qf(c,d)||!qf(e,f))}function Ug(a,b,c){var d=!1,e=Cf,f=b.contextType;return"object"==typeof f&&null!==f?f=xg(f):(e=L(b)?Df:J.current,f=(d=null!=(d=b.contextTypes))?Ef(a,e):Cf),b=new b(c,f),a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null,b.updater=Sg,a.stateNode=b,b._reactInternalFiber=a,d&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f),b}function Vg(a,b,c,d){a=b.state,"function"==typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d),"function"==typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d),b.state!==a&&Sg.enqueueReplaceState(b,b.state,null)}function Wg(a,b,c,d){var e=a.stateNode;e.props=c,e.state=a.memoizedState,e.refs=Ng;var f=b.contextType;"object"==typeof f&&null!==f?e.context=xg(f):(f=L(b)?Df:J.current,e.context=Ef(a,f)),null!==(f=a.updateQueue)&&(Hg(a,f,c,e,d),e.state=a.memoizedState),"function"==typeof(f=b.getDerivedStateFromProps)&&(Og(a,b,f,c),e.state=a.memoizedState),"function"==typeof b.getDerivedStateFromProps||"function"==typeof e.getSnapshotBeforeUpdate||"function"!=typeof e.UNSAFE_componentWillMount&&"function"!=typeof e.componentWillMount||(b=e.state,"function"==typeof e.componentWillMount&&e.componentWillMount(),"function"==typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Sg.enqueueReplaceState(e,e.state,null),null!==(f=a.updateQueue)&&(Hg(a,f,c,e,d),e.state=a.memoizedState)),"function"==typeof e.componentDidMount&&(a.effectTag|=4)}var Xg=Array.isArray;function Yg(a,b,c){if(null!==(a=c.ref)&&"function"!=typeof a&&"object"!=typeof a){if(c._owner){if(c=c._owner){if(1!==c.tag)throw Error(u(309));var d=c.stateNode}if(!d)throw Error(u(147,a));var e=""+a;return null!==b&&null!==b.ref&&"function"==typeof b.ref&&b.ref._stringRef===e?b.ref:((b=function(a){var b=d.refs;b===Ng&&(b=d.refs={}),null===a?delete b[e]:b[e]=a})._stringRef=e,b)}if("string"!=typeof a)throw Error(u(284));if(!c._owner)throw Error(u(290,a))}return a}function Zg(a,b){if("textarea"!==a.type)throw Error(u(31,"[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b,""))}function $g(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c,c.nextEffect=null,c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b,c){return(a=ah(a,b)).index=0,a.sibling=null,a}function f(b,c,d){return b.index=d,a?null!==(d=b.alternate)?(d=d.index)<c?(b.effectTag=2,c):d:(b.effectTag=2,c):c}function g(b){return a&&null===b.alternate&&(b.effectTag=2),b}function h(a,b,c,d){return null===b||6!==b.tag?((b=bh(c,a.mode,d)).return=a,b):((b=e(b,c)).return=a,b)}function k(a,b,c,d){return null!==b&&b.elementType===c.type?((d=e(b,c.props)).ref=Yg(a,b,c),d.return=a,d):((d=ch(c.type,c.key,c.props,null,a.mode,d)).ref=Yg(a,b,c),d.return=a,d)}function l(a,b,c,d){return null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation?((b=dh(c,a.mode,d)).return=a,b):((b=e(b,c.children||[])).return=a,b)}function m(a,b,c,d,f){return null===b||7!==b.tag?((b=eh(c,a.mode,d,f)).return=a,b):((b=e(b,c)).return=a,b)}function C(a,b,c){if("string"==typeof b||"number"==typeof b)return(b=bh(""+b,a.mode,c)).return=a,b;if("object"==typeof b&&null!==b){switch(b.$$typeof){case Ga:return(c=ch(b.type,b.key,b.props,null,a.mode,c)).ref=Yg(a,null,b),c.return=a,c;case Ha:return(b=dh(b,a.mode,c)).return=a,b}if(Xg(b)||Ua(b))return(b=eh(b,a.mode,c,null)).return=a,b;Zg(a,b)}return null}function y(a,b,c,d){var e=null!==b?b.key:null;if("string"==typeof c||"number"==typeof c)return null!==e?null:h(a,b,""+c,d);if("object"==typeof c&&null!==c){switch(c.$$typeof){case Ga:return c.key===e?c.type===Ia?m(a,b,c.props.children,d,e):k(a,b,c,d):null;case Ha:return c.key===e?l(a,b,c,d):null}if(Xg(c)||Ua(c))return null!==e?null:m(a,b,c,d,null);Zg(a,c)}return null}function H(a,b,c,d,e){if("string"==typeof d||"number"==typeof d)return h(b,a=a.get(c)||null,""+d,e);if("object"==typeof d&&null!==d){switch(d.$$typeof){case Ga:return a=a.get(null===d.key?c:d.key)||null,d.type===Ia?m(b,a,d.props.children,e,d.key):k(b,a,d,e);case Ha:return l(b,a=a.get(null===d.key?c:d.key)||null,d,e)}if(Xg(d)||Ua(d))return m(b,a=a.get(c)||null,d,e,null);Zg(b,d)}return null}function z(e,g,h,k){for(var l=null,m=null,r=g,x=g=0,A=null;null!==r&&x<h.length;x++){r.index>x?(A=r,r=null):A=r.sibling;var p=y(e,r,h[x],k);if(null===p){null===r&&(r=A);break}a&&r&&null===p.alternate&&b(e,r),g=f(p,g,x),null===m?l=p:m.sibling=p,m=p,r=A}if(x===h.length)return c(e,r),l;if(null===r){for(;x<h.length;x++)null!==(r=C(e,h[x],k))&&(g=f(r,g,x),null===m?l=r:m.sibling=r,m=r);return l}for(r=d(e,r);x<h.length;x++)null!==(A=H(r,e,x,h[x],k))&&(a&&null!==A.alternate&&r.delete(null===A.key?x:A.key),g=f(A,g,x),null===m?l=A:m.sibling=A,m=A);return a&&r.forEach((function(a){return b(e,a)})),l}function ta(e,g,h,k){var l=Ua(h);if("function"!=typeof l)throw Error(u(150));if(null==(h=l.call(h)))throw Error(u(151));for(var m=l=null,r=g,x=g=0,A=null,p=h.next();null!==r&&!p.done;x++,p=h.next()){r.index>x?(A=r,r=null):A=r.sibling;var z=y(e,r,p.value,k);if(null===z){null===r&&(r=A);break}a&&r&&null===z.alternate&&b(e,r),g=f(z,g,x),null===m?l=z:m.sibling=z,m=z,r=A}if(p.done)return c(e,r),l;if(null===r){for(;!p.done;x++,p=h.next())null!==(p=C(e,p.value,k))&&(g=f(p,g,x),null===m?l=p:m.sibling=p,m=p);return l}for(r=d(e,r);!p.done;x++,p=h.next())null!==(p=H(r,e,x,p.value,k))&&(a&&null!==p.alternate&&r.delete(null===p.key?x:p.key),g=f(p,g,x),null===m?l=p:m.sibling=p,m=p);return a&&r.forEach((function(a){return b(e,a)})),l}return function(a,d,f,h){var k="object"==typeof f&&null!==f&&f.type===Ia&&null===f.key;k&&(f=f.props.children);var l="object"==typeof f&&null!==f;if(l)switch(f.$$typeof){case Ga:a:{for(l=f.key,k=d;null!==k;){if(k.key===l){if(7===k.tag?f.type===Ia:k.elementType===f.type){c(a,k.sibling),(d=e(k,f.type===Ia?f.props.children:f.props)).ref=Yg(a,k,f),d.return=a,a=d;break a}c(a,k);break}b(a,k),k=k.sibling}f.type===Ia?((d=eh(f.props.children,a.mode,h,f.key)).return=a,a=d):((h=ch(f.type,f.key,f.props,null,a.mode,h)).ref=Yg(a,d,f),h.return=a,a=h)}return g(a);case Ha:a:{for(k=f.key;null!==d;){if(d.key===k){if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling),(d=e(d,f.children||[])).return=a,a=d;break a}c(a,d);break}b(a,d),d=d.sibling}(d=dh(f,a.mode,h)).return=a,a=d}return g(a)}if("string"==typeof f||"number"==typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),(d=e(d,f)).return=a,a=d):(c(a,d),(d=bh(f,a.mode,h)).return=a,a=d),g(a);if(Xg(f))return z(a,d,f,h);if(Ua(f))return ta(a,d,f,h);if(l&&Zg(a,f),void 0===f&&!k)switch(a.tag){case 1:case 0:throw a=a.type,Error(u(152,a.displayName||a.name||"Component"))}return c(a,d)}}var fh=$g(!0),gh=$g(!1),hh={},ih={current:hh},jh={current:hh},kh={current:hh};function lh(a){if(a===hh)throw Error(u(174));return a}function mh(a,b){I(kh,b),I(jh,a),I(ih,hh);var c=b.nodeType;switch(c){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Qb(null,"");break;default:b=Qb(b=(c=8===c?b.parentNode:b).namespaceURI||null,c=c.tagName)}G(ih),I(ih,b)}function nh(a){G(ih),G(jh),G(kh)}function oh(a){lh(kh.current);var b=lh(ih.current),c=Qb(b,a.type);b!==c&&(I(jh,a),I(ih,c))}function ph(a){jh.current===a&&(G(ih),G(jh))}var M={current:0};function qh(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(null===(c=c.dehydrated)||c.data===je||c.data===ke))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!=(64&b.effectTag))return b}else if(null!==b.child){b.child.return=b,b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}return null}function rh(a,b){return{responder:a,props:b}}var sh=Ea.ReactCurrentDispatcher,N=Ea.ReactCurrentBatchConfig,th=0,uh=null,O=null,vh=null,wh=null,P=null,xh=null,yh=0,zh=null,Ah=0,Bh=!1,Ch=null,Gh=0;function Q(){throw Error(u(321))}function Hh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!of(a[c],b[c]))return!1;return!0}function Ih(a,b,c,d,e,f){if(th=f,uh=b,vh=null!==a?a.memoizedState:null,sh.current=null===vh?Jh:Kh,b=c(d,e),Bh){do{Bh=!1,Gh+=1,vh=null!==a?a.memoizedState:null,xh=wh,zh=P=O=null,sh.current=Kh,b=c(d,e)}while(Bh);Ch=null,Gh=0}if(sh.current=Lh,(a=uh).memoizedState=wh,a.expirationTime=yh,a.updateQueue=zh,a.effectTag|=Ah,a=null!==O&&null!==O.next,th=0,xh=P=wh=vh=O=uh=null,yh=0,zh=null,Ah=0,a)throw Error(u(300));return b}function Mh(){sh.current=Lh,th=0,xh=P=wh=vh=O=uh=null,yh=0,zh=null,Ah=0,Bh=!1,Ch=null,Gh=0}function Nh(){var a={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===P?wh=P=a:P=P.next=a,P}function Oh(){if(null!==xh)xh=(P=xh).next,vh=null!==(O=vh)?O.next:null;else{if(null===vh)throw Error(u(310));var a={memoizedState:(O=vh).memoizedState,baseState:O.baseState,queue:O.queue,baseUpdate:O.baseUpdate,next:null};P=null===P?wh=a:P.next=a,vh=O.next}return P}function Ph(a,b){return"function"==typeof b?b(a):b}function Qh(a){var b=Oh(),c=b.queue;if(null===c)throw Error(u(311));if(c.lastRenderedReducer=a,0<Gh){var d=c.dispatch;if(null!==Ch){var e=Ch.get(c);if(void 0!==e){Ch.delete(c);var f=b.memoizedState;do{f=a(f,e.action),e=e.next}while(null!==e);return of(f,b.memoizedState)||(wg=!0),b.memoizedState=f,b.baseUpdate===c.last&&(b.baseState=f),c.lastRenderedState=f,[f,d]}}return[b.memoizedState,d]}d=c.last;var g=b.baseUpdate;if(f=b.baseState,null!==g?(null!==d&&(d.next=null),d=g.next):d=null!==d?d.next:null,null!==d){var h=e=null,k=d,l=!1;do{var m=k.expirationTime;m<th?(l||(l=!0,h=g,e=f),m>yh&&Jg(yh=m)):(Ig(m,k.suspenseConfig),f=k.eagerReducer===a?k.eagerState:a(f,k.action)),g=k,k=k.next}while(null!==k&&k!==d);l||(h=g,e=f),of(f,b.memoizedState)||(wg=!0),b.memoizedState=f,b.baseUpdate=h,b.baseState=e,c.lastRenderedState=f}return[b.memoizedState,c.dispatch]}function Rh(a){var b=Nh();return"function"==typeof a&&(a=a()),b.memoizedState=b.baseState=a,a=(a=b.queue={last:null,dispatch:null,lastRenderedReducer:Ph,lastRenderedState:a}).dispatch=Sh.bind(null,uh,a),[b.memoizedState,a]}function Th(a){return Qh(Ph)}function Uh(a,b,c,d){return a={tag:a,create:b,destroy:c,deps:d,next:null},null===zh?(zh={lastEffect:null}).lastEffect=a.next=a:null===(b=zh.lastEffect)?zh.lastEffect=a.next=a:(c=b.next,b.next=a,a.next=c,zh.lastEffect=a),a}function Vh(a,b,c,d){var e=Nh();Ah|=a,e.memoizedState=Uh(b,c,void 0,void 0===d?null:d)}function Wh(a,b,c,d){var e=Oh();d=void 0===d?null:d;var f=void 0;if(null!==O){var g=O.memoizedState;if(f=g.destroy,null!==d&&Hh(d,g.deps))return void Uh(0,c,f,d)}Ah|=a,e.memoizedState=Uh(b,c,f,d)}function Xh(a,b){return Vh(516,192,a,b)}function Yh(a,b){return Wh(516,192,a,b)}function Zh(a,b){return"function"==typeof b?(a=a(),b(a),function(){b(null)}):null!=b?(a=a(),b.current=a,function(){b.current=null}):void 0}function $h(){}function ai(a,b){return Nh().memoizedState=[a,void 0===b?null:b],a}function bi(a,b){var c=Oh();b=void 0===b?null:b;var d=c.memoizedState;return null!==d&&null!==b&&Hh(b,d[1])?d[0]:(c.memoizedState=[a,b],a)}function Sh(a,b,c){if(!(25>Gh))throw Error(u(301));var d=a.alternate;if(a===uh||null!==d&&d===uh)if(Bh=!0,a={expirationTime:th,suspenseConfig:null,action:c,eagerReducer:null,eagerState:null,next:null},null===Ch&&(Ch=new Map),void 0===(c=Ch.get(b)))Ch.set(b,a);else{for(b=c;null!==b.next;)b=b.next;b.next=a}else{var e=Pg(),f=Mg.suspense;f={expirationTime:e=Qg(e,a,f),suspenseConfig:f,action:c,eagerReducer:null,eagerState:null,next:null};var g=b.last;if(null===g)f.next=f;else{var h=g.next;null!==h&&(f.next=h),g.next=f}if(b.last=f,0===a.expirationTime&&(null===d||0===d.expirationTime)&&null!==(d=b.lastRenderedReducer))try{var k=b.lastRenderedState,l=d(k,c);if(f.eagerReducer=d,f.eagerState=l,of(l,k))return}catch(m){}Rg(a,e)}}var Lh={readContext:xg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useResponder:Q,useDeferredValue:Q,useTransition:Q},Jh={readContext:xg,useCallback:ai,useContext:xg,useEffect:Xh,useImperativeHandle:function(a,b,c){return c=null!=c?c.concat([a]):null,Vh(4,36,Zh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return Vh(4,36,a,b)},useMemo:function(a,b){var c=Nh();return b=void 0===b?null:b,a=a(),c.memoizedState=[a,b],a},useReducer:function(a,b,c){var d=Nh();return b=void 0!==c?c(b):b,d.memoizedState=d.baseState=b,a=(a=d.queue={last:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b}).dispatch=Sh.bind(null,uh,a),[d.memoizedState,a]},useRef:function(a){return a={current:a},Nh().memoizedState=a},useState:Rh,useDebugValue:$h,useResponder:rh,useDeferredValue:function(a,b){var c=Rh(a),d=c[0],e=c[1];return Xh((function(){q.unstable_next((function(){var c=N.suspense;N.suspense=void 0===b?null:b;try{e(a)}finally{N.suspense=c}}))}),[a,b]),d},useTransition:function(a){var b=Rh(!1),c=b[0],d=b[1];return[ai((function(b){d(!0),q.unstable_next((function(){var c=N.suspense;N.suspense=void 0===a?null:a;try{d(!1),b()}finally{N.suspense=c}}))}),[a,c]),c]}},Kh={readContext:xg,useCallback:bi,useContext:xg,useEffect:Yh,useImperativeHandle:function(a,b,c){return c=null!=c?c.concat([a]):null,Wh(4,36,Zh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return Wh(4,36,a,b)},useMemo:function(a,b){var c=Oh();b=void 0===b?null:b;var d=c.memoizedState;return null!==d&&null!==b&&Hh(b,d[1])?d[0]:(a=a(),c.memoizedState=[a,b],a)},useReducer:Qh,useRef:function(){return Oh().memoizedState},useState:Th,useDebugValue:$h,useResponder:rh,useDeferredValue:function(a,b){var c=Th(),d=c[0],e=c[1];return Yh((function(){q.unstable_next((function(){var c=N.suspense;N.suspense=void 0===b?null:b;try{e(a)}finally{N.suspense=c}}))}),[a,b]),d},useTransition:function(a){var b=Th(),c=b[0],d=b[1];return[bi((function(b){d(!0),q.unstable_next((function(){var c=N.suspense;N.suspense=void 0===a?null:a;try{d(!1),b()}finally{N.suspense=c}}))}),[a,c]),c]}},ci=null,di=null,ei=!1;function fi(a,b){var c=gi(5,null,null,0);c.elementType="DELETED",c.type="DELETED",c.stateNode=b,c.return=a,c.effectTag=8,null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function hi(a,b){switch(a.tag){case 5:var c=a.type;return null!==(b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b)&&(a.stateNode=b,!0);case 6:return null!==(b=""===a.pendingProps||3!==b.nodeType?null:b)&&(a.stateNode=b,!0);case 13:default:return!1}}function ii(a){if(ei){var b=di;if(b){var c=b;if(!hi(a,b)){if(!(b=re(c.nextSibling))||!hi(a,b))return a.effectTag=-1025&a.effectTag|2,ei=!1,void(ci=a);fi(ci,c)}ci=a,di=re(b.firstChild)}else a.effectTag=-1025&a.effectTag|2,ei=!1,ci=a}}function ji(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;ci=a}function ki(a){if(a!==ci)return!1;if(!ei)return ji(a),ei=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==b&&!oe(b,a.memoizedProps))for(b=di;b;)fi(a,b),b=re(b.nextSibling);if(ji(a),13===a.tag){if(!(a=null!==(a=a.memoizedState)?a.dehydrated:null))throw Error(u(317));a:{for(a=a.nextSibling,b=0;a;){if(8===a.nodeType){var c=a.data;if(c===ie){if(0===b){di=re(a.nextSibling);break a}b--}else c!==he&&c!==ke&&c!==je||b++}a=a.nextSibling}di=null}}else di=ci?re(a.stateNode.nextSibling):null;return!0}function li(){di=ci=null,ei=!1}var mi=Ea.ReactCurrentOwner,wg=!1;function R(a,b,c,d){b.child=null===a?gh(b,null,c,d):fh(b,a.child,c,d)}function ni(a,b,c,d,e){c=c.render;var f=b.ref;return vg(b,e),d=Ih(a,b,c,d,f,e),null===a||wg?(b.effectTag|=1,R(a,b,d,e),b.child):(b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),oi(a,b,e))}function pi(a,b,c,d,e,f){if(null===a){var g=c.type;return"function"!=typeof g||qi(g)||void 0!==g.defaultProps||null!==c.compare||void 0!==c.defaultProps?((a=ch(c.type,null,d,null,b.mode,f)).ref=b.ref,a.return=b,b.child=a):(b.tag=15,b.type=g,ri(a,b,g,d,e,f))}return g=a.child,e<f&&(e=g.memoizedProps,(c=null!==(c=c.compare)?c:qf)(e,d)&&a.ref===b.ref)?oi(a,b,f):(b.effectTag|=1,(a=ah(g,d)).ref=b.ref,a.return=b,b.child=a)}function ri(a,b,c,d,e,f){return null!==a&&qf(a.memoizedProps,d)&&a.ref===b.ref&&(wg=!1,e<f)?oi(a,b,f):si(a,b,c,d,f)}function ti(a,b){var c=b.ref;(null===a&&null!==c||null!==a&&a.ref!==c)&&(b.effectTag|=128)}function si(a,b,c,d,e){var f=L(c)?Df:J.current;return f=Ef(b,f),vg(b,e),c=Ih(a,b,c,d,f,e),null===a||wg?(b.effectTag|=1,R(a,b,c,e),b.child):(b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),oi(a,b,e))}function ui(a,b,c,d,e){if(L(c)){var f=!0;Jf(b)}else f=!1;if(vg(b,e),null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),Ug(b,c,d),Wg(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;"object"==typeof l&&null!==l?l=xg(l):l=Ef(b,l=L(c)?Df:J.current);var m=c.getDerivedStateFromProps,C="function"==typeof m||"function"==typeof g.getSnapshotBeforeUpdate;C||"function"!=typeof g.UNSAFE_componentWillReceiveProps&&"function"!=typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Vg(b,g,d,l),yg=!1;var y=b.memoizedState;k=g.state=y;var H=b.updateQueue;null!==H&&(Hg(b,H,d,g,e),k=b.memoizedState),h!==d||y!==k||K.current||yg?("function"==typeof m&&(Og(b,c,m,d),k=b.memoizedState),(h=yg||Tg(b,c,h,d,y,k,l))?(C||"function"!=typeof g.UNSAFE_componentWillMount&&"function"!=typeof g.componentWillMount||("function"==typeof g.componentWillMount&&g.componentWillMount(),"function"==typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"==typeof g.componentDidMount&&(b.effectTag|=4)):("function"==typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):("function"==typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,h=b.memoizedProps,g.props=b.type===b.elementType?h:mg(b.type,h),k=g.context,"object"==typeof(l=c.contextType)&&null!==l?l=xg(l):l=Ef(b,l=L(c)?Df:J.current),(C="function"==typeof(m=c.getDerivedStateFromProps)||"function"==typeof g.getSnapshotBeforeUpdate)||"function"!=typeof g.UNSAFE_componentWillReceiveProps&&"function"!=typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Vg(b,g,d,l),yg=!1,k=b.memoizedState,y=g.state=k,null!==(H=b.updateQueue)&&(Hg(b,H,d,g,e),y=b.memoizedState),h!==d||k!==y||K.current||yg?("function"==typeof m&&(Og(b,c,m,d),y=b.memoizedState),(m=yg||Tg(b,c,h,d,k,y,l))?(C||"function"!=typeof g.UNSAFE_componentWillUpdate&&"function"!=typeof g.componentWillUpdate||("function"==typeof g.componentWillUpdate&&g.componentWillUpdate(d,y,l),"function"==typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,y,l)),"function"==typeof g.componentDidUpdate&&(b.effectTag|=4),"function"==typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):("function"!=typeof g.componentDidUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=4),"function"!=typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=y),g.props=d,g.state=y,g.context=l,d=m):("function"!=typeof g.componentDidUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=4),"function"!=typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=256),d=!1);return vi(a,b,c,d,f,e)}function vi(a,b,c,d,e,f){ti(a,b);var g=0!=(64&b.effectTag);if(!d&&!g)return e&&Kf(b,c,!1),oi(a,b,f);d=b.stateNode,mi.current=b;var h=g&&"function"!=typeof c.getDerivedStateFromError?null:d.render();return b.effectTag|=1,null!==a&&g?(b.child=fh(b,a.child,null,f),b.child=fh(b,null,h,f)):R(a,b,h,f),b.memoizedState=d.state,e&&Kf(b,c,!0),b.child}function wi(a){var b=a.stateNode;b.pendingContext?Hf(0,b.pendingContext,b.pendingContext!==b.context):b.context&&Hf(0,b.context,!1),mh(a,b.containerInfo)}var Hi,Ii,Ji,Ki,xi={dehydrated:null,retryTime:0};function yi(a,b,c){var h,d=b.mode,e=b.pendingProps,f=M.current,g=!1;if((h=0!=(64&b.effectTag))||(h=0!=(2&f)&&(null===a||null!==a.memoizedState)),h?(g=!0,b.effectTag&=-65):null!==a&&null===a.memoizedState||void 0===e.fallback||!0===e.unstable_avoidThisFallback||(f|=1),I(M,1&f),null===a){if(void 0!==e.fallback&&ii(b),g){if(g=e.fallback,(e=eh(null,d,0,null)).return=b,0==(2&b.mode))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;return(c=eh(g,d,c,null)).return=b,e.sibling=c,b.memoizedState=xi,b.child=e,c}return d=e.children,b.memoizedState=null,b.child=gh(b,null,d,c)}if(null!==a.memoizedState){if(d=(a=a.child).sibling,g){if(e=e.fallback,(c=ah(a,a.pendingProps)).return=b,0==(2&b.mode)&&(g=null!==b.memoizedState?b.child.child:b.child)!==a.child)for(c.child=g;null!==g;)g.return=c,g=g.sibling;return(d=ah(d,e,d.expirationTime)).return=b,c.sibling=d,c.childExpirationTime=0,b.memoizedState=xi,b.child=c,d}return c=fh(b,a.child,e.children,c),b.memoizedState=null,b.child=c}if(a=a.child,g){if(g=e.fallback,(e=eh(null,d,0,null)).return=b,e.child=a,null!==a&&(a.return=e),0==(2&b.mode))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;return(c=eh(g,d,c,null)).return=b,e.sibling=c,c.effectTag|=2,e.childExpirationTime=0,b.memoizedState=xi,b.child=e,c}return b.memoizedState=null,b.child=fh(b,a,e.children,c)}function zi(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b),ug(a.return,b)}function Ai(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,last:d,tail:c,tailExpiration:0,tailMode:e,lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.last=d,g.tail=c,g.tailExpiration=0,g.tailMode=e,g.lastEffect=f)}function Bi(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;if(R(a,b,d.children,c),0!=(2&(d=M.current)))d=1&d|2,b.effectTag|=64;else{if(null!==a&&0!=(64&a.effectTag))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&zi(a,c);else if(19===a.tag)zi(a,c);else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return,a=a.sibling}d&=1}if(I(M,d),0==(2&b.mode))b.memoizedState=null;else switch(e){case"forwards":for(c=b.child,e=null;null!==c;)null!==(a=c.alternate)&&null===qh(a)&&(e=c),c=c.sibling;null===(c=e)?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null),Ai(b,!1,e,c,f,b.lastEffect);break;case"backwards":for(c=null,e=b.child,b.child=null;null!==e;){if(null!==(a=e.alternate)&&null===qh(a)){b.child=e;break}a=e.sibling,e.sibling=c,c=e,e=a}Ai(b,!0,c,null,f,b.lastEffect);break;case"together":Ai(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}function oi(a,b,c){null!==a&&(b.dependencies=a.dependencies);var d=b.expirationTime;if(0!==d&&Jg(d),b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child)throw Error(u(153));if(null!==b.child){for(c=ah(a=b.child,a.pendingProps,a.expirationTime),b.child=c,c.return=b;null!==a.sibling;)a=a.sibling,(c=c.sibling=ah(a,a.pendingProps,a.expirationTime)).return=b;c.sibling=null}return b.child}function Ci(a){a.effectTag|=4}function Li(a,b){switch(a.tailMode){case"hidden":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}function Mi(a){switch(a.tag){case 1:L(a.type)&&Ff();var b=a.effectTag;return 4096&b?(a.effectTag=-4097&b|64,a):null;case 3:if(nh(),Gf(),0!=(64&(b=a.effectTag)))throw Error(u(285));return a.effectTag=-4097&b|64,a;case 5:return ph(a),null;case 13:return G(M),4096&(b=a.effectTag)?(a.effectTag=-4097&b|64,a):null;case 19:return G(M),null;case 4:return nh(),null;case 10:return tg(a),null;default:return null}}function Ni(a,b){return{value:a,source:b,stack:Xa(b)}}Hi=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c,c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Ii=function(){},Ji=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var h,k,g=b.stateNode;switch(lh(ih.current),a=null,c){case"input":f=Ab(g,f),d=Ab(g,d),a=[];break;case"option":f=Ib(g,f),d=Ib(g,d),a=[];break;case"select":f=n({},f,{value:void 0}),d=n({},d,{value:void 0}),a=[];break;case"textarea":f=Kb(g,f),d=Kb(g,d),a=[];break;default:"function"!=typeof f.onClick&&"function"==typeof d.onClick&&(g.onclick=ae)}for(h in Yd(c,d),c=null,f)if(!d.hasOwnProperty(h)&&f.hasOwnProperty(h)&&null!=f[h])if("style"===h)for(k in g=f[h])g.hasOwnProperty(k)&&(c||(c={}),c[k]="");else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(ia.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in d){var l=d[h];if(g=null!=f?f[h]:void 0,d.hasOwnProperty(h)&&l!==g&&(null!=l||null!=g))if("style"===h)if(g){for(k in g)!g.hasOwnProperty(k)||l&&l.hasOwnProperty(k)||(c||(c={}),c[k]="");for(k in l)l.hasOwnProperty(k)&&g[k]!==l[k]&&(c||(c={}),c[k]=l[k])}else c||(a||(a=[]),a.push(h,c)),c=l;else"dangerouslySetInnerHTML"===h?(l=l?l.__html:void 0,g=g?g.__html:void 0,null!=l&&g!==l&&(a=a||[]).push(h,""+l)):"children"===h?g===l||"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(h,""+l):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(ia.hasOwnProperty(h)?(null!=l&&$d(e,h),a||g===l||(a=[])):(a=a||[]).push(h,l))}c&&(a=a||[]).push("style",c),e=a,(b.updateQueue=e)&&Ci(b)}},Ki=function(a,b,c,d){c!==d&&Ci(b)};var Oi="function"==typeof WeakSet?WeakSet:Set;function Pi(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=Xa(c)),null!==c&&Wa(c.type),b=b.value,null!==a&&1===a.tag&&Wa(a.type);try{console.error(b)}catch(e){setTimeout((function(){throw e}))}}function Si(a){var b=a.ref;if(null!==b)if("function"==typeof b)try{b(null)}catch(c){Ri(a,c)}else b.current=null}function Ti(a,b){switch(b.tag){case 0:case 11:case 15:Ui(2,0,b);break;case 1:if(256&b.effectTag&&null!==a){var c=a.memoizedProps,d=a.memoizedState;b=(a=b.stateNode).getSnapshotBeforeUpdate(b.elementType===b.type?c:mg(b.type,c),d),a.__reactInternalSnapshotBeforeUpdate=b}break;case 3:case 5:case 6:case 4:case 17:break;default:throw Error(u(163))}}function Ui(a,b,c){if(null!==(c=null!==(c=c.updateQueue)?c.lastEffect:null)){var d=c=c.next;do{if(0!=(d.tag&a)){var e=d.destroy;d.destroy=void 0,void 0!==e&&e()}0!=(d.tag&b)&&(e=d.create,d.destroy=e()),d=d.next}while(d!==c)}}function Vi(a,b,c){switch("function"==typeof Wi&&Wi(b),b.tag){case 0:case 11:case 14:case 15:if(null!==(a=b.updateQueue)&&null!==(a=a.lastEffect)){var d=a.next;fg(97<c?97:c,(function(){var a=d;do{var c=a.destroy;if(void 0!==c){var g=b;try{c()}catch(h){Ri(g,h)}}a=a.next}while(a!==d)}))}break;case 1:Si(b),"function"==typeof(c=b.stateNode).componentWillUnmount&&function Qi(a,b){try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){Ri(a,c)}}(b,c);break;case 5:Si(b);break;case 4:Xi(a,b,c)}}function Yi(a){var b=a.alternate;a.return=null,a.child=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.alternate=null,a.firstEffect=null,a.lastEffect=null,a.pendingProps=null,a.memoizedProps=null,null!==b&&Yi(b)}function Zi(a){return 5===a.tag||3===a.tag||4===a.tag}function $i(a){a:{for(var b=a.return;null!==b;){if(Zi(b)){var c=b;break a}b=b.return}throw Error(u(160))}switch(b=c.stateNode,c.tag){case 5:var d=!1;break;case 3:case 4:b=b.containerInfo,d=!0;break;default:throw Error(u(161))}16&c.effectTag&&(Tb(b,""),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Zi(c.return)){c=null;break a}c=c.return}for(c.sibling.return=c.return,c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(2&c.effectTag)continue b;if(null===c.child||4===c.tag)continue b;c.child.return=c,c=c.child}if(!(2&c.effectTag)){c=c.stateNode;break a}}for(var e=a;;){var f=5===e.tag||6===e.tag;if(f){var g=f?e.stateNode:e.stateNode.instance;if(c)if(d){var h=g;g=c,8===(f=b).nodeType?f.parentNode.insertBefore(h,g):f.insertBefore(h,g)}else b.insertBefore(g,c);else d?(8===(h=b).nodeType?(f=h.parentNode).insertBefore(g,h):(f=h).appendChild(g),null!=(h=h._reactRootContainer)||null!==f.onclick||(f.onclick=ae)):b.appendChild(g)}else if(4!==e.tag&&null!==e.child){e.child.return=e,e=e.child;continue}if(e===a)break;for(;null===e.sibling;){if(null===e.return||e.return===a)return;e=e.return}e.sibling.return=e.return,e=e.sibling}}function Xi(a,b,c){for(var f,g,d=b,e=!1;;){if(!e){e=d.return;a:for(;;){if(null===e)throw Error(u(160));switch(f=e.stateNode,e.tag){case 5:g=!1;break a;case 3:case 4:f=f.containerInfo,g=!0;break a}e=e.return}e=!0}if(5===d.tag||6===d.tag){a:for(var h=a,k=d,l=c,m=k;;)if(Vi(h,m,l),null!==m.child&&4!==m.tag)m.child.return=m,m=m.child;else{if(m===k)break;for(;null===m.sibling;){if(null===m.return||m.return===k)break a;m=m.return}m.sibling.return=m.return,m=m.sibling}g?(h=f,k=d.stateNode,8===h.nodeType?h.parentNode.removeChild(k):h.removeChild(k)):f.removeChild(d.stateNode)}else if(4===d.tag){if(null!==d.child){f=d.stateNode.containerInfo,g=!0,d.child.return=d,d=d.child;continue}}else if(Vi(a,d,c),null!==d.child){d.child.return=d,d=d.child;continue}if(d===b)break;for(;null===d.sibling;){if(null===d.return||d.return===b)return;4===(d=d.return).tag&&(e=!1)}d.sibling.return=d.return,d=d.sibling}}function aj(a,b){switch(b.tag){case 0:case 11:case 14:case 15:Ui(4,8,b);break;case 1:break;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps,e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;if(b.updateQueue=null,null!==f){for(c[ve]=d,"input"===a&&"radio"===d.type&&null!=d.name&&Cb(c,d),Zd(a,e),b=Zd(a,d),e=0;e<f.length;e+=2){var g=f[e],h=f[e+1];"style"===g?Wd(c,h):"dangerouslySetInnerHTML"===g?Sb(c,h):"children"===g?Tb(c,h):vb(c,g,h,b)}switch(a){case"input":Eb(c,d);break;case"textarea":Mb(c,d);break;case"select":b=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,null!=(a=d.value)?Jb(c,!!d.multiple,a,!1):b!==!!d.multiple&&(null!=d.defaultValue?Jb(c,!!d.multiple,d.defaultValue,!0):Jb(c,!!d.multiple,d.multiple?[]:"",!1))}}}break;case 6:if(null===b.stateNode)throw Error(u(162));b.stateNode.nodeValue=b.memoizedProps;break;case 3:(b=b.stateNode).hydrate&&(b.hydrate=!1,Lc(b.containerInfo));break;case 12:break;case 13:if(c=b,null===b.memoizedState?d=!1:(d=!0,c=b.child,bj=cg()),null!==c)a:for(a=c;;){if(5===a.tag)f=a.stateNode,d?"function"==typeof(f=f.style).setProperty?f.setProperty("display","none","important"):f.display="none":(f=a.stateNode,e=null!=(e=a.memoizedProps.style)&&e.hasOwnProperty("display")?e.display:null,f.style.display=Vd("display",e));else if(6===a.tag)a.stateNode.nodeValue=d?"":a.memoizedProps;else{if(13===a.tag&&null!==a.memoizedState&&null===a.memoizedState.dehydrated){(f=a.child.sibling).return=a,a=f;continue}if(null!==a.child){a.child.return=a,a=a.child;continue}}if(a===c)break a;for(;null===a.sibling;){if(null===a.return||a.return===c)break a;a=a.return}a.sibling.return=a.return,a=a.sibling}cj(b);break;case 19:cj(b);break;case 17:case 20:case 21:break;default:throw Error(u(163))}}function cj(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Oi),b.forEach((function(b){var d=dj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))}))}}var ej="function"==typeof WeakMap?WeakMap:Map;function fj(a,b,c){(c=Bg(c,null)).tag=3,c.payload={element:null};var d=b.value;return c.callback=function(){gj||(gj=!0,hj=d),Pi(a,b)},c}function ij(a,b,c){(c=Bg(c,null)).tag=3;var d=a.type.getDerivedStateFromError;if("function"==typeof d){var e=b.value;c.payload=function(){return Pi(a,b),d(e)}}var f=a.stateNode;return null!==f&&"function"==typeof f.componentDidCatch&&(c.callback=function(){"function"!=typeof d&&(null===jj?jj=new Set([this]):jj.add(this),Pi(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:""})}),c}var gk,kj=Math.ceil,lj=Ea.ReactCurrentDispatcher,mj=Ea.ReactCurrentOwner,S=0,nj=8,oj=16,pj=32,qj=0,rj=1,sj=2,tj=3,uj=4,vj=5,T=S,U=null,V=null,W=0,X=qj,wj=null,xj=1073741823,yj=1073741823,zj=null,Aj=0,Bj=!1,bj=0,Cj=500,Y=null,gj=!1,hj=null,jj=null,Dj=!1,Ej=null,Fj=90,Gj=null,Hj=0,Ij=null,Jj=0;function Pg(){return(T&(oj|pj))!==S?1073741821-(cg()/10|0):0!==Jj?Jj:Jj=1073741821-(cg()/10|0)}function Qg(a,b,c){if(0==(2&(b=b.mode)))return 1073741823;var d=dg();if(0==(4&b))return 99===d?1073741823:1073741822;if((T&oj)!==S)return W;if(null!==c)a=lg(a,0|c.timeoutMs||5e3,250);else switch(d){case 99:a=1073741823;break;case 98:a=lg(a,150,100);break;case 97:case 96:a=lg(a,5e3,250);break;case 95:a=2;break;default:throw Error(u(326))}return null!==U&&a===W&&--a,a}function Rg(a,b){if(50<Hj)throw Hj=0,Ij=null,Error(u(185));if(null!==(a=Kj(a,b))){var c=dg();1073741823===b?(T&nj)!==S&&(T&(oj|pj))===S?Lj(a):(Z(a),T===S&&jg()):Z(a),(4&T)===S||98!==c&&99!==c||(null===Gj?Gj=new Map([[a,b]]):(void 0===(c=Gj.get(a))||c>b)&&Gj.set(a,b))}}function Kj(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){if(c=d.alternate,d.childExpirationTime<b&&(d.childExpirationTime=b),null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b),null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}return null!==e&&(U===e&&(Jg(b),X===uj&&Mj(e,W)),Nj(e,b)),e}function Oj(a){var b=a.lastExpiredTime;return 0!==b?b:Pj(a,b=a.firstPendingTime)?(b=a.lastPingedTime)>(a=a.nextKnownPendingLevel)?b:a:b}function Z(a){if(0!==a.lastExpiredTime)a.callbackExpirationTime=1073741823,a.callbackPriority=99,a.callbackNode=hg(Lj.bind(null,a));else{var b=Oj(a),c=a.callbackNode;if(0===b)null!==c&&(a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90);else{var d=Pg();if(1073741823===b?d=99:1===b||2===b?d=95:d=0>=(d=10*(1073741821-b)-10*(1073741821-d))?99:250>=d?98:5250>=d?97:95,null!==c){var e=a.callbackPriority;if(a.callbackExpirationTime===b&&e>=d)return;c!==Xf&&Nf(c)}a.callbackExpirationTime=b,a.callbackPriority=d,b=1073741823===b?hg(Lj.bind(null,a)):gg(d,Qj.bind(null,a),{timeout:10*(1073741821-b)-cg()}),a.callbackNode=b}}}function Qj(a,b){if(Jj=0,b)return Rj(a,b=Pg()),Z(a),null;var c=Oj(a);if(0!==c){if(b=a.callbackNode,(T&(oj|pj))!==S)throw Error(u(327));if(Sj(),a===U&&c===W||Tj(a,c),null!==V){var d=T;T|=oj;for(var e=Uj();;)try{Vj();break}catch(h){Wj(a,h)}if(rg(),T=d,lj.current=e,X===rj)throw b=wj,Tj(a,c),Mj(a,c),Z(a),b;if(null===V)switch(e=a.finishedWork=a.current.alternate,a.finishedExpirationTime=c,d=X,U=null,d){case qj:case rj:throw Error(u(345));case sj:Rj(a,2<c?2:c);break;case tj:if(Mj(a,c),c===(d=a.lastSuspendedTime)&&(a.nextKnownPendingLevel=Xj(e)),1073741823===xj&&10<(e=bj+Cj-cg())){if(Bj){var f=a.lastPingedTime;if(0===f||f>=c){a.lastPingedTime=c,Tj(a,c);break}}if(0!==(f=Oj(a))&&f!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}a.timeoutHandle=pe(Yj.bind(null,a),e);break}Yj(a);break;case uj:if(Mj(a,c),c===(d=a.lastSuspendedTime)&&(a.nextKnownPendingLevel=Xj(e)),Bj&&(0===(e=a.lastPingedTime)||e>=c)){a.lastPingedTime=c,Tj(a,c);break}if(0!==(e=Oj(a))&&e!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}if(1073741823!==yj?d=10*(1073741821-yj)-cg():1073741823===xj?d=0:(d=10*(1073741821-xj)-5e3,0>(d=(e=cg())-d)&&(d=0),(c=10*(1073741821-c)-e)<(d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*kj(d/1960))-d)&&(d=c)),10<d){a.timeoutHandle=pe(Yj.bind(null,a),d);break}Yj(a);break;case vj:if(1073741823!==xj&&null!==zj){f=xj;var g=zj;if(0>=(d=0|g.busyMinDurationMs)?d=0:(e=0|g.busyDelayMs,d=(f=cg()-(10*(1073741821-f)-(0|g.timeoutMs||5e3)))<=e?0:e+d-f),10<d){Mj(a,c),a.timeoutHandle=pe(Yj.bind(null,a),d);break}}Yj(a);break;default:throw Error(u(329))}if(Z(a),a.callbackNode===b)return Qj.bind(null,a)}}return null}function Lj(a){var b=a.lastExpiredTime;if(b=0!==b?b:1073741823,a.finishedExpirationTime===b)Yj(a);else{if((T&(oj|pj))!==S)throw Error(u(327));if(Sj(),a===U&&b===W||Tj(a,b),null!==V){var c=T;T|=oj;for(var d=Uj();;)try{Zj();break}catch(e){Wj(a,e)}if(rg(),T=c,lj.current=d,X===rj)throw c=wj,Tj(a,b),Mj(a,b),Z(a),c;if(null!==V)throw Error(u(261));a.finishedWork=a.current.alternate,a.finishedExpirationTime=b,U=null,Yj(a),Z(a)}}return null}function bk(a,b){var c=T;T|=1;try{return a(b)}finally{(T=c)===S&&jg()}}function ck(a,b){var c=T;T&=-2,T|=nj;try{return a(b)}finally{(T=c)===S&&jg()}}function Tj(a,b){a.finishedWork=null,a.finishedExpirationTime=0;var c=a.timeoutHandle;if(-1!==c&&(a.timeoutHandle=-1,qe(c)),null!==V)for(c=V.return;null!==c;){var d=c;switch(d.tag){case 1:var e=d.type.childContextTypes;null!=e&&Ff();break;case 3:nh(),Gf();break;case 5:ph(d);break;case 4:nh();break;case 13:case 19:G(M);break;case 10:tg(d)}c=c.return}U=a,V=ah(a.current,null),W=b,X=qj,wj=null,yj=xj=1073741823,zj=null,Aj=0,Bj=!1}function Wj(a,b){for(;;){try{if(rg(),Mh(),null===V||null===V.return)return X=rj,wj=b,null;a:{var c=a,d=V.return,e=V,f=b;if(b=W,e.effectTag|=2048,e.firstEffect=e.lastEffect=null,null!==f&&"object"==typeof f&&"function"==typeof f.then){var g=f,h=0!=(1&M.current),k=d;do{var l;if(l=13===k.tag){var m=k.memoizedState;if(null!==m)l=null!==m.dehydrated;else{var C=k.memoizedProps;l=void 0!==C.fallback&&(!0!==C.unstable_avoidThisFallback||!h)}}if(l){var y=k.updateQueue;if(null===y){var H=new Set;H.add(g),k.updateQueue=H}else y.add(g);if(0==(2&k.mode)){if(k.effectTag|=64,e.effectTag&=-2981,1===e.tag)if(null===e.alternate)e.tag=17;else{var z=Bg(1073741823,null);z.tag=2,Dg(e,z)}e.expirationTime=1073741823;break a}f=void 0,e=b;var ta=c.pingCache;if(null===ta?(ta=c.pingCache=new ej,f=new Set,ta.set(g,f)):void 0===(f=ta.get(g))&&(f=new Set,ta.set(g,f)),!f.has(e)){f.add(e);var r=dk.bind(null,c,g,e);g.then(r,r)}k.effectTag|=4096,k.expirationTime=b;break a}k=k.return}while(null!==k);f=Error((Wa(e.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Xa(e))}X!==vj&&(X=sj),f=Ni(f,e),k=d;do{switch(k.tag){case 3:g=f,k.effectTag|=4096,k.expirationTime=b,Eg(k,fj(k,g,b));break a;case 1:g=f;var A=k.type,p=k.stateNode;if(0==(64&k.effectTag)&&("function"==typeof A.getDerivedStateFromError||null!==p&&"function"==typeof p.componentDidCatch&&(null===jj||!jj.has(p)))){k.effectTag|=4096,k.expirationTime=b,Eg(k,ij(k,g,b));break a}}k=k.return}while(null!==k)}V=ek(V)}catch(v){b=v;continue}break}}function Uj(){var a=lj.current;return lj.current=Lh,null===a?Lh:a}function Ig(a,b){a<xj&&2<a&&(xj=a),null!==b&&a<yj&&2<a&&(yj=a,zj=b)}function Jg(a){a>Aj&&(Aj=a)}function Zj(){for(;null!==V;)V=fk(V)}function Vj(){for(;null!==V&&!Of();)V=fk(V)}function fk(a){var b=gk(a.alternate,a,W);return a.memoizedProps=a.pendingProps,null===b&&(b=ek(a)),mj.current=null,b}function ek(a){V=a;do{var b=V.alternate;if(a=V.return,0==(2048&V.effectTag)){a:{var c=b,d=W,e=(b=V).pendingProps;switch(b.tag){case 2:case 16:break;case 15:case 0:break;case 1:L(b.type)&&Ff();break;case 3:nh(),Gf(),(e=b.stateNode).pendingContext&&(e.context=e.pendingContext,e.pendingContext=null),(null===c||null===c.child)&&ki(b)&&Ci(b),Ii(b);break;case 5:ph(b),d=lh(kh.current);var f=b.type;if(null!==c&&null!=b.stateNode)Ji(c,b,f,e,d),c.ref!==b.ref&&(b.effectTag|=128);else if(e){var g=lh(ih.current);if(ki(b)){var h=(e=b).stateNode;c=e.type;var k=e.memoizedProps,l=d;switch(h[ue]=e,h[ve]=k,f=void 0,d=h,c){case"iframe":case"object":case"embed":F("load",d);break;case"video":case"audio":for(h=0;h<dc.length;h++)F(dc[h],d);break;case"source":F("error",d);break;case"img":case"image":case"link":F("error",d),F("load",d);break;case"form":F("reset",d),F("submit",d);break;case"details":F("toggle",d);break;case"input":Bb(d,k),F("invalid",d),$d(l,"onChange");break;case"select":d._wrapperState={wasMultiple:!!k.multiple},F("invalid",d),$d(l,"onChange");break;case"textarea":Lb(d,k),F("invalid",d),$d(l,"onChange")}for(f in Yd(c,k),h=null,k)k.hasOwnProperty(f)&&(g=k[f],"children"===f?"string"==typeof g?d.textContent!==g&&(h=["children",g]):"number"==typeof g&&d.textContent!==""+g&&(h=["children",""+g]):ia.hasOwnProperty(f)&&null!=g&&$d(l,f));switch(c){case"input":yb(d),Gb(d,k,!0);break;case"textarea":yb(d),Nb(d);break;case"select":case"option":break;default:"function"==typeof k.onClick&&(d.onclick=ae)}f=h,e.updateQueue=f,(e=null!==f)&&Ci(b)}else{c=b,l=f,k=e,h=9===d.nodeType?d:d.ownerDocument,g===Ob.html&&(g=Pb(l)),g===Ob.html?"script"===l?((k=h.createElement("div")).innerHTML="<script><\/script>",h=k.removeChild(k.firstChild)):"string"==typeof k.is?h=h.createElement(l,{is:k.is}):(h=h.createElement(l),"select"===l&&(l=h,k.multiple?l.multiple=!0:k.size&&(l.size=k.size))):h=h.createElementNS(g,l),(k=h)[ue]=c,k[ve]=e,Hi(k,b,!1,!1),b.stateNode=k;var m=d,C=Zd(l=f,c=e);switch(l){case"iframe":case"object":case"embed":F("load",k),d=c;break;case"video":case"audio":for(d=0;d<dc.length;d++)F(dc[d],k);d=c;break;case"source":F("error",k),d=c;break;case"img":case"image":case"link":F("error",k),F("load",k),d=c;break;case"form":F("reset",k),F("submit",k),d=c;break;case"details":F("toggle",k),d=c;break;case"input":Bb(k,c),d=Ab(k,c),F("invalid",k),$d(m,"onChange");break;case"option":d=Ib(k,c);break;case"select":k._wrapperState={wasMultiple:!!c.multiple},d=n({},c,{value:void 0}),F("invalid",k),$d(m,"onChange");break;case"textarea":Lb(k,c),d=Kb(k,c),F("invalid",k),$d(m,"onChange");break;default:d=c}Yd(l,d),h=void 0,g=l;var y=k,H=d;for(h in H)if(H.hasOwnProperty(h)){var z=H[h];"style"===h?Wd(y,z):"dangerouslySetInnerHTML"===h?null!=(z=z?z.__html:void 0)&&Sb(y,z):"children"===h?"string"==typeof z?("textarea"!==g||""!==z)&&Tb(y,z):"number"==typeof z&&Tb(y,""+z):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(ia.hasOwnProperty(h)?null!=z&&$d(m,h):null!=z&&vb(y,h,z,C))}switch(l){case"input":yb(k),Gb(k,c,!1);break;case"textarea":yb(k),Nb(k);break;case"option":null!=c.value&&k.setAttribute("value",""+ub(c.value));break;case"select":(d=k).multiple=!!c.multiple,null!=(k=c.value)?Jb(d,!!c.multiple,k,!1):null!=c.defaultValue&&Jb(d,!!c.multiple,c.defaultValue,!0);break;default:"function"==typeof d.onClick&&(k.onclick=ae)}(e=ne(f,e))&&Ci(b)}null!==b.ref&&(b.effectTag|=128)}else if(null===b.stateNode)throw Error(u(166));break;case 6:if(c&&null!=b.stateNode)Ki(c,b,c.memoizedProps,e);else{if("string"!=typeof e&&null===b.stateNode)throw Error(u(166));d=lh(kh.current),lh(ih.current),ki(b)?(f=(e=b).stateNode,d=e.memoizedProps,f[ue]=e,(e=f.nodeValue!==d)&&Ci(b)):(f=b,(e=(9===d.nodeType?d:d.ownerDocument).createTextNode(e))[ue]=f,b.stateNode=e)}break;case 11:break;case 13:if(G(M),e=b.memoizedState,0!=(64&b.effectTag)){b.expirationTime=d;break a}e=null!==e,f=!1,null===c?void 0!==b.memoizedProps.fallback&&ki(b):(f=null!==(d=c.memoizedState),e||null===d||null!==(d=c.child.sibling)&&(null!==(k=b.firstEffect)?(b.firstEffect=d,d.nextEffect=k):(b.firstEffect=b.lastEffect=d,d.nextEffect=null),d.effectTag=8)),e&&!f&&0!=(2&b.mode)&&(null===c&&!0!==b.memoizedProps.unstable_avoidThisFallback||0!=(1&M.current)?X===qj&&(X=tj):(X!==qj&&X!==tj||(X=uj),0!==Aj&&null!==U&&(Mj(U,W),Nj(U,Aj)))),(e||f)&&(b.effectTag|=4);break;case 7:case 8:case 12:break;case 4:nh(),Ii(b);break;case 10:tg(b);break;case 9:case 14:break;case 17:L(b.type)&&Ff();break;case 19:if(G(M),null===(e=b.memoizedState))break;if(f=0!=(64&b.effectTag),null===(k=e.rendering)){if(f)Li(e,!1);else if(X!==qj||null!==c&&0!=(64&c.effectTag))for(c=b.child;null!==c;){if(null!==(k=qh(c))){for(b.effectTag|=64,Li(e,!1),null!==(f=k.updateQueue)&&(b.updateQueue=f,b.effectTag|=4),null===e.lastEffect&&(b.firstEffect=null),b.lastEffect=e.lastEffect,e=d,f=b.child;null!==f;)c=e,(d=f).effectTag&=2,d.nextEffect=null,d.firstEffect=null,d.lastEffect=null,null===(k=d.alternate)?(d.childExpirationTime=0,d.expirationTime=c,d.child=null,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null):(d.childExpirationTime=k.childExpirationTime,d.expirationTime=k.expirationTime,d.child=k.child,d.memoizedProps=k.memoizedProps,d.memoizedState=k.memoizedState,d.updateQueue=k.updateQueue,c=k.dependencies,d.dependencies=null===c?null:{expirationTime:c.expirationTime,firstContext:c.firstContext,responders:c.responders}),f=f.sibling;I(M,1&M.current|2),b=b.child;break a}c=c.sibling}}else{if(!f)if(null!==(c=qh(k))){if(b.effectTag|=64,f=!0,null!==(d=c.updateQueue)&&(b.updateQueue=d,b.effectTag|=4),Li(e,!0),null===e.tail&&"hidden"===e.tailMode){null!==(b=b.lastEffect=e.lastEffect)&&(b.nextEffect=null);break}}else cg()>e.tailExpiration&&1<d&&(b.effectTag|=64,f=!0,Li(e,!1),b.expirationTime=b.childExpirationTime=d-1);e.isBackwards?(k.sibling=b.child,b.child=k):(null!==(d=e.last)?d.sibling=k:b.child=k,e.last=k)}if(null!==e.tail){0===e.tailExpiration&&(e.tailExpiration=cg()+500),d=e.tail,e.rendering=d,e.tail=d.sibling,e.lastEffect=b.lastEffect,d.sibling=null,e=M.current,I(M,e=f?1&e|2:1&e),b=d;break a}break;case 20:case 21:break;default:throw Error(u(156,b.tag))}b=null}if(e=V,1===W||1!==e.childExpirationTime){for(f=0,d=e.child;null!==d;)(c=d.expirationTime)>f&&(f=c),(k=d.childExpirationTime)>f&&(f=k),d=d.sibling;e.childExpirationTime=f}if(null!==b)return b;null!==a&&0==(2048&a.effectTag)&&(null===a.firstEffect&&(a.firstEffect=V.firstEffect),null!==V.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=V.firstEffect),a.lastEffect=V.lastEffect),1<V.effectTag&&(null!==a.lastEffect?a.lastEffect.nextEffect=V:a.firstEffect=V,a.lastEffect=V))}else{if(null!==(b=Mi(V)))return b.effectTag&=2047,b;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=2048)}if(null!==(b=V.sibling))return b;V=a}while(null!==V);return X===qj&&(X=vj),null}function Xj(a){var b=a.expirationTime;return b>(a=a.childExpirationTime)?b:a}function Yj(a){var b=dg();return fg(99,ik.bind(null,a,b)),null}function ik(a,b){if(Sj(),(T&(oj|pj))!==S)throw Error(u(327));var c=a.finishedWork,d=a.finishedExpirationTime;if(null===c)return null;if(a.finishedWork=null,a.finishedExpirationTime=0,c===a.current)throw Error(u(177));a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90,a.nextKnownPendingLevel=0;var e=Xj(c);if(a.firstPendingTime=e,d<=a.lastSuspendedTime?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:d<=a.firstSuspendedTime&&(a.firstSuspendedTime=d-1),d<=a.lastPingedTime&&(a.lastPingedTime=0),d<=a.lastExpiredTime&&(a.lastExpiredTime=0),a===U&&(V=U=null,W=0),1<c.effectTag?null!==c.lastEffect?(c.lastEffect.nextEffect=c,e=c.firstEffect):e=c:e=c.firstEffect,null!==e){var f=T;T|=pj,mj.current=null,le=Ld;var g=fe();if(ge(g)){if("selectionStart"in g)var h={start:g.selectionStart,end:g.selectionEnd};else a:{var k=(h=(h=g.ownerDocument)&&h.defaultView||window).getSelection&&h.getSelection();if(k&&0!==k.rangeCount){h=k.anchorNode;var l=k.anchorOffset,m=k.focusNode;k=k.focusOffset;try{h.nodeType,m.nodeType}catch(Db){h=null;break a}var C=0,y=-1,H=-1,z=0,ta=0,r=g,x=null;b:for(;;){for(var A;r!==h||0!==l&&3!==r.nodeType||(y=C+l),r!==m||0!==k&&3!==r.nodeType||(H=C+k),3===r.nodeType&&(C+=r.nodeValue.length),null!==(A=r.firstChild);)x=r,r=A;for(;;){if(r===g)break b;if(x===h&&++z===l&&(y=C),x===m&&++ta===k&&(H=C),null!==(A=r.nextSibling))break;x=(r=x).parentNode}r=A}h=-1===y||-1===H?null:{start:y,end:H}}else h=null}h=h||{start:0,end:0}}else h=null;me={focusedElem:g,selectionRange:h},Ld=!1,Y=e;do{try{jk()}catch(Db){if(null===Y)throw Error(u(330));Ri(Y,Db),Y=Y.nextEffect}}while(null!==Y);Y=e;do{try{for(g=a,h=b;null!==Y;){var p=Y.effectTag;if(16&p&&Tb(Y.stateNode,""),128&p){var t=Y.alternate;if(null!==t){var v=t.ref;null!==v&&("function"==typeof v?v(null):v.current=null)}}switch(1038&p){case 2:$i(Y),Y.effectTag&=-3;break;case 6:$i(Y),Y.effectTag&=-3,aj(Y.alternate,Y);break;case 1024:Y.effectTag&=-1025;break;case 1028:Y.effectTag&=-1025,aj(Y.alternate,Y);break;case 4:aj(Y.alternate,Y);break;case 8:Xi(g,l=Y,h),Yi(l)}Y=Y.nextEffect}}catch(Db){if(null===Y)throw Error(u(330));Ri(Y,Db),Y=Y.nextEffect}}while(null!==Y);if(v=me,t=fe(),p=v.focusedElem,h=v.selectionRange,t!==p&&p&&p.ownerDocument&&function ee(a,b){return!(!a||!b)&&(a===b||(!a||3!==a.nodeType)&&(b&&3===b.nodeType?ee(a,b.parentNode):"contains"in a?a.contains(b):!!a.compareDocumentPosition&&!!(16&a.compareDocumentPosition(b))))}(p.ownerDocument.documentElement,p)){null!==h&&ge(p)&&(t=h.start,void 0===(v=h.end)&&(v=t),"selectionStart"in p?(p.selectionStart=t,p.selectionEnd=Math.min(v,p.value.length)):(v=(t=p.ownerDocument||document)&&t.defaultView||window).getSelection&&(v=v.getSelection(),l=p.textContent.length,g=Math.min(h.start,l),h=void 0===h.end?g:Math.min(h.end,l),!v.extend&&g>h&&(l=h,h=g,g=l),l=de(p,g),m=de(p,h),l&&m&&(1!==v.rangeCount||v.anchorNode!==l.node||v.anchorOffset!==l.offset||v.focusNode!==m.node||v.focusOffset!==m.offset)&&((t=t.createRange()).setStart(l.node,l.offset),v.removeAllRanges(),g>h?(v.addRange(t),v.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),v.addRange(t))))),t=[];for(v=p;v=v.parentNode;)1===v.nodeType&&t.push({element:v,left:v.scrollLeft,top:v.scrollTop});for("function"==typeof p.focus&&p.focus(),p=0;p<t.length;p++)(v=t[p]).element.scrollLeft=v.left,v.element.scrollTop=v.top}me=null,Ld=!!le,le=null,a.current=c,Y=e;do{try{for(p=d;null!==Y;){var Dh=Y.effectTag;if(36&Dh){var cc=Y.alternate;switch(v=p,(t=Y).tag){case 0:case 11:case 15:Ui(16,32,t);break;case 1:var dd=t.stateNode;if(4&t.effectTag)if(null===cc)dd.componentDidMount();else{var hk=t.elementType===t.type?cc.memoizedProps:mg(t.type,cc.memoizedProps);dd.componentDidUpdate(hk,cc.memoizedState,dd.__reactInternalSnapshotBeforeUpdate)}var Eh=t.updateQueue;null!==Eh&&Kg(0,Eh,dd);break;case 3:var Fh=t.updateQueue;if(null!==Fh){if(g=null,null!==t.child)switch(t.child.tag){case 5:g=t.child.stateNode;break;case 1:g=t.child.stateNode}Kg(0,Fh,g)}break;case 5:var xk=t.stateNode;null===cc&&4&t.effectTag&&ne(t.type,t.memoizedProps)&&xk.focus();break;case 6:case 4:case 12:break;case 13:if(null===t.memoizedState){var Di=t.alternate;if(null!==Di){var Ei=Di.memoizedState;if(null!==Ei){var Fi=Ei.dehydrated;null!==Fi&&Lc(Fi)}}}break;case 19:case 17:case 20:case 21:break;default:throw Error(u(163))}}if(128&Dh){t=void 0;var wd=Y.ref;if(null!==wd){var Gi=Y.stateNode;switch(Y.tag){case 5:t=Gi;break;default:t=Gi}"function"==typeof wd?wd(t):wd.current=t}}Y=Y.nextEffect}}catch(Db){if(null===Y)throw Error(u(330));Ri(Y,Db),Y=Y.nextEffect}}while(null!==Y);Y=null,Yf(),T=f}else a.current=c;if(Dj)Dj=!1,Ej=a,Fj=b;else for(Y=e;null!==Y;)b=Y.nextEffect,Y.nextEffect=null,Y=b;if(0===(b=a.firstPendingTime)&&(jj=null),1073741823===b?a===Ij?Hj++:(Hj=0,Ij=a):Hj=0,"function"==typeof kk&&kk(c.stateNode,d),Z(a),gj)throw gj=!1,a=hj,hj=null,a;return(T&nj)!==S?null:(jg(),null)}function jk(){for(;null!==Y;){var a=Y.effectTag;0!=(256&a)&&Ti(Y.alternate,Y),0==(512&a)||Dj||(Dj=!0,gg(97,(function(){return Sj(),null}))),Y=Y.nextEffect}}function Sj(){if(90!==Fj){var a=97<Fj?97:Fj;return Fj=90,fg(a,lk)}}function lk(){if(null===Ej)return!1;var a=Ej;if(Ej=null,(T&(oj|pj))!==S)throw Error(u(331));var b=T;for(T|=pj,a=a.current.firstEffect;null!==a;){try{var c=a;if(0!=(512&c.effectTag))switch(c.tag){case 0:case 11:case 15:Ui(128,0,c),Ui(0,64,c)}}catch(d){if(null===a)throw Error(u(330));Ri(a,d)}c=a.nextEffect,a.nextEffect=null,a=c}return T=b,jg(),!0}function mk(a,b,c){Dg(a,b=fj(a,b=Ni(c,b),1073741823)),null!==(a=Kj(a,1073741823))&&Z(a)}function Ri(a,b){if(3===a.tag)mk(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){mk(c,a,b);break}if(1===c.tag){var d=c.stateNode;if("function"==typeof c.type.getDerivedStateFromError||"function"==typeof d.componentDidCatch&&(null===jj||!jj.has(d))){Dg(c,a=ij(c,a=Ni(b,a),1073741823)),null!==(c=Kj(c,1073741823))&&Z(c);break}}c=c.return}}function dk(a,b,c){var d=a.pingCache;null!==d&&d.delete(b),U===a&&W===c?X===uj||X===tj&&1073741823===xj&&cg()-bj<Cj?Tj(a,W):Bj=!0:Pj(a,c)&&(0!==(b=a.lastPingedTime)&&b<c||(a.lastPingedTime=c,a.finishedExpirationTime===c&&(a.finishedExpirationTime=0,a.finishedWork=null),Z(a)))}function dj(a,b){var c=a.stateNode;null!==c&&c.delete(b),0===(b=0)&&(b=Qg(b=Pg(),a,null)),null!==(a=Kj(a,b))&&Z(a)}gk=function(a,b,c){var d=b.expirationTime;if(null!==a){var e=b.pendingProps;if(a.memoizedProps!==e||K.current)wg=!0;else{if(d<c){switch(wg=!1,b.tag){case 3:wi(b),li();break;case 5:if(oh(b),4&b.mode&&1!==c&&e.hidden)return b.expirationTime=b.childExpirationTime=1,null;break;case 1:L(b.type)&&Jf(b);break;case 4:mh(b,b.stateNode.containerInfo);break;case 10:sg(b,b.memoizedProps.value);break;case 13:if(null!==b.memoizedState)return 0!==(d=b.child.childExpirationTime)&&d>=c?yi(a,b,c):(I(M,1&M.current),null!==(b=oi(a,b,c))?b.sibling:null);I(M,1&M.current);break;case 19:if(d=b.childExpirationTime>=c,0!=(64&a.effectTag)){if(d)return Bi(a,b,c);b.effectTag|=64}if(null!==(e=b.memoizedState)&&(e.rendering=null,e.tail=null),I(M,M.current),!d)return null}return oi(a,b,c)}wg=!1}}else wg=!1;switch(b.expirationTime=0,b.tag){case 2:if(d=b.type,null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),a=b.pendingProps,e=Ef(b,J.current),vg(b,c),e=Ih(null,b,d,a,e,c),b.effectTag|=1,"object"==typeof e&&null!==e&&"function"==typeof e.render&&void 0===e.$$typeof){if(b.tag=1,Mh(),L(d)){var f=!0;Jf(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;var g=d.getDerivedStateFromProps;"function"==typeof g&&Og(b,d,g,a),e.updater=Sg,b.stateNode=e,e._reactInternalFiber=b,Wg(b,d,a,c),b=vi(null,b,d,!0,f,c)}else b.tag=0,R(null,b,e,c),b=b.child;return b;case 16:if(e=b.elementType,null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),a=b.pendingProps,function Va(a){if(-1===a._status){a._status=0;var b=a._ctor;b=b(),a._result=b,b.then((function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)}),(function(b){0===a._status&&(a._status=2,a._result=b)}))}}(e),1!==e._status)throw e._result;switch(e=e._result,b.type=e,f=b.tag=function nk(a){if("function"==typeof a)return qi(a)?1:0;if(null!=a){if((a=a.$$typeof)===Oa)return 11;if(a===Ra)return 14}return 2}(e),a=mg(e,a),f){case 0:b=si(null,b,e,a,c);break;case 1:b=ui(null,b,e,a,c);break;case 11:b=ni(null,b,e,a,c);break;case 14:b=pi(null,b,e,mg(e.type,a),d,c);break;default:throw Error(u(306,e,""))}return b;case 0:return d=b.type,e=b.pendingProps,si(a,b,d,e=b.elementType===d?e:mg(d,e),c);case 1:return d=b.type,e=b.pendingProps,ui(a,b,d,e=b.elementType===d?e:mg(d,e),c);case 3:if(wi(b),null===(d=b.updateQueue))throw Error(u(282));if(e=null!==(e=b.memoizedState)?e.element:null,Hg(b,d,b.pendingProps,null,c),(d=b.memoizedState.element)===e)li(),b=oi(a,b,c);else{if((e=b.stateNode.hydrate)&&(di=re(b.stateNode.containerInfo.firstChild),ci=b,e=ei=!0),e)for(c=gh(b,null,d,c),b.child=c;c;)c.effectTag=-3&c.effectTag|1024,c=c.sibling;else R(a,b,d,c),li();b=b.child}return b;case 5:return oh(b),null===a&&ii(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,oe(d,e)?g=null:null!==f&&oe(d,f)&&(b.effectTag|=16),ti(a,b),4&b.mode&&1!==c&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):(R(a,b,g,c),b=b.child),b;case 6:return null===a&&ii(b),null;case 13:return yi(a,b,c);case 4:return mh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=fh(b,null,d,c):R(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,ni(a,b,d,e=b.elementType===d?e:mg(d,e),c);case 7:return R(a,b,b.pendingProps,c),b.child;case 8:case 12:return R(a,b,b.pendingProps.children,c),b.child;case 10:a:{if(d=b.type._context,e=b.pendingProps,g=b.memoizedProps,sg(b,f=e.value),null!==g){var h=g.value;if(0===(f=of(h,f)?0:0|("function"==typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823))){if(g.children===e.children&&!K.current){b=oi(a,b,c);break a}}else for(null!==(h=b.child)&&(h.return=b);null!==h;){var k=h.dependencies;if(null!==k){g=h.child;for(var l=k.firstContext;null!==l;){if(l.context===d&&0!=(l.observedBits&f)){1===h.tag&&((l=Bg(c,null)).tag=2,Dg(h,l)),h.expirationTime<c&&(h.expirationTime=c),null!==(l=h.alternate)&&l.expirationTime<c&&(l.expirationTime=c),ug(h.return,c),k.expirationTime<c&&(k.expirationTime=c);break}l=l.next}}else g=10===h.tag&&h.type===b.type?null:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}if(null!==(h=g.sibling)){h.return=g.return,g=h;break}g=g.return}h=g}}R(a,b,e.children,c),b=b.child}return b;case 9:return e=b.type,d=(f=b.pendingProps).children,vg(b,c),d=d(e=xg(e,f.unstable_observedBits)),b.effectTag|=1,R(a,b,d,c),b.child;case 14:return f=mg(e=b.type,b.pendingProps),pi(a,b,e,f=mg(e.type,f),d,c);case 15:return ri(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:mg(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,L(d)?(a=!0,Jf(b)):a=!1,vg(b,c),Ug(b,d,e),Wg(b,d,e,c),vi(null,b,d,!0,a,c);case 19:return Bi(a,b,c)}throw Error(u(156,b.tag))};var kk=null,Wi=null;function pk(a,b,c,d){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=b,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function gi(a,b,c,d){return new pk(a,b,c,d)}function qi(a){return!(!(a=a.prototype)||!a.isReactComponent)}function ah(a,b){var c=a.alternate;return null===c?((c=gi(a.tag,b,a.key,a.mode)).elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null),c.childExpirationTime=a.childExpirationTime,c.expirationTime=a.expirationTime,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,b=a.dependencies,c.dependencies=null===b?null:{expirationTime:b.expirationTime,firstContext:b.firstContext,responders:b.responders},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c}function ch(a,b,c,d,e,f){var g=2;if(d=a,"function"==typeof a)qi(a)&&(g=1);else if("string"==typeof a)g=5;else a:switch(a){case Ia:return eh(c.children,e,f,b);case Na:g=8,e|=7;break;case Ja:g=8,e|=1;break;case Ka:return(a=gi(12,c,b,8|e)).elementType=Ka,a.type=Ka,a.expirationTime=f,a;case Pa:return(a=gi(13,c,b,e)).type=Pa,a.elementType=Pa,a.expirationTime=f,a;case Qa:return(a=gi(19,c,b,e)).elementType=Qa,a.expirationTime=f,a;default:if("object"==typeof a&&null!==a)switch(a.$$typeof){case La:g=10;break a;case Ma:g=9;break a;case Oa:g=11;break a;case Ra:g=14;break a;case Sa:g=16,d=null;break a}throw Error(u(130,null==a?a:typeof a,""))}return(b=gi(g,c,b,e)).elementType=a,b.type=d,b.expirationTime=f,b}function eh(a,b,c,d){return(a=gi(7,a,d,b)).expirationTime=c,a}function bh(a,b,c){return(a=gi(6,a,null,b)).expirationTime=c,a}function dh(a,b,c){return(b=gi(4,null!==a.children?a.children:[],a.key,b)).expirationTime=c,b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},b}function qk(a,b,c){this.tag=b,this.current=null,this.containerInfo=a,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=c,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Pj(a,b){var c=a.firstSuspendedTime;return a=a.lastSuspendedTime,0!==c&&c>=b&&a<=b}function Mj(a,b){var c=a.firstSuspendedTime,d=a.lastSuspendedTime;c<b&&(a.firstSuspendedTime=b),(d>b||0===c)&&(a.lastSuspendedTime=b),b<=a.lastPingedTime&&(a.lastPingedTime=0),b<=a.lastExpiredTime&&(a.lastExpiredTime=0)}function Nj(a,b){b>a.firstPendingTime&&(a.firstPendingTime=b);var c=a.firstSuspendedTime;0!==c&&(b>=c?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:b>=a.lastSuspendedTime&&(a.lastSuspendedTime=b+1),b>a.nextKnownPendingLevel&&(a.nextKnownPendingLevel=b))}function Rj(a,b){var c=a.lastExpiredTime;(0===c||c>b)&&(a.lastExpiredTime=b)}function rk(a,b,c,d){var e=b.current,f=Pg(),g=Mg.suspense;f=Qg(f,e,g);a:if(c){b:{if(ec(c=c._reactInternalFiber)!==c||1!==c.tag)throw Error(u(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(L(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(u(171))}if(1===c.tag){var k=c.type;if(L(k)){c=If(c,k,h);break a}}c=h}else c=Cf;return null===b.context?b.context=c:b.pendingContext=c,(b=Bg(f,g)).payload={element:a},null!==(d=void 0===d?null:d)&&(b.callback=d),Dg(e,b),Rg(e,f),f}function sk(a){if(!(a=a.current).child)return null;switch(a.child.tag){case 5:default:return a.child.stateNode}}function tk(a,b){null!==(a=a.memoizedState)&&null!==a.dehydrated&&a.retryTime<b&&(a.retryTime=b)}function uk(a,b){tk(a,b),(a=a.alternate)&&tk(a,b)}function wk(a,b,c){var d=new qk(a,b,c=null!=c&&!0===c.hydrate),e=gi(3,null,null,2===b?7:1===b?3:0);d.current=e,e.stateNode=d,a[we]=d.current,c&&0!==b&&function wc(a){var b=xc(a);uc.forEach((function(c){yc(c,a,b)})),vc.forEach((function(c){yc(c,a,b)}))}(9===a.nodeType?a:a.ownerDocument),this._internalRoot=d}function yk(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function Ak(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;if("function"==typeof e){var h=e;e=function(){var a=sk(g);h.call(a)}}rk(b,g,a,e)}else{if(f=c._reactRootContainer=function zk(a,b){if(b||(b=!(!(b=a?9===a.nodeType?a.documentElement:a.firstChild:null)||1!==b.nodeType||!b.hasAttribute("data-reactroot"))),!b)for(var c;c=a.lastChild;)a.removeChild(c);return new wk(a,0,b?{hydrate:!0}:void 0)}(c,d),g=f._internalRoot,"function"==typeof e){var k=e;e=function(){var a=sk(g);k.call(a)}}ck((function(){rk(b,g,a,e)}))}return sk(g)}function Bk(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!yk(b))throw Error(u(200));return function vk(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ha,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}(a,b,null,c)}jc=function(a){if(13===a.tag){var b=lg(Pg(),150,100);Rg(a,b),uk(a,b)}},kc=function(a){if(13===a.tag){Pg();var b=kg++;Rg(a,b),uk(a,b)}},lc=function(a){if(13===a.tag){var b=Pg();Rg(a,b=Qg(b,a,null)),uk(a,b)}},Za=function(a,b,c){switch(b){case"input":if(Eb(a,c),b=c.name,"radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]'),b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=ye(d);if(!e)throw Error(u(90));zb(d),Eb(d,e)}}}break;case"textarea":Mb(a,c);break;case"select":null!=(b=c.value)&&Jb(a,!!c.multiple,b,!1)}},wk.prototype.render=function(a,b){rk(a,this._internalRoot,null,void 0===b?null:b)},wk.prototype.unmount=function(a){rk(null,this._internalRoot,null,void 0===a?null:a)},eb=bk,fb=function(a,b,c,d){var e=T;T|=4;try{return fg(98,a.bind(null,b,c,d))}finally{(T=e)===S&&jg()}},gb=function(){(T&(1|oj|pj))===S&&(function ak(){if(null!==Gj){var a=Gj;Gj=null,a.forEach((function(a,c){Rj(c,a),Z(c)})),jg()}}(),Sj())},hb=function(a,b){var c=T;T|=2;try{return a(b)}finally{(T=c)===S&&jg()}};var a,b,Ck={createPortal:Bk,findDOMNode:function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;if(void 0===b){if("function"==typeof a.render)throw Error(u(188));throw Error(u(268,Object.keys(a)))}return a=null===(a=ic(b))?null:a.stateNode},hydrate:function(a,b,c){if(!yk(b))throw Error(u(200));return Ak(null,a,b,!0,c)},render:function(a,b,c){if(!yk(b))throw Error(u(200));return Ak(null,a,b,!1,c)},unstable_renderSubtreeIntoContainer:function(a,b,c,d){if(!yk(c))throw Error(u(200));if(null==a||void 0===a._reactInternalFiber)throw Error(u(38));return Ak(a,b,c,!1,d)},unmountComponentAtNode:function(a){if(!yk(a))throw Error(u(40));return!!a._reactRootContainer&&(ck((function(){Ak(null,null,a,!1,(function(){a._reactRootContainer=null}))})),!0)},unstable_createPortal:function(){return Bk.apply(void 0,arguments)},unstable_batchedUpdates:bk,flushSync:function(a,b){if((T&(oj|pj))!==S)throw Error(u(187));var c=T;T|=1;try{return fg(99,a.bind(null,b))}finally{T=c,jg()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[Cc,xe,ye,Ca.injectEventPluginsByName,fa,Sc,function(a){ya(a,Rc)},cb,db,Pd,Ba,Sj,{current:!1}]}};b=(a={findFiberByHostInstance:Fc,bundleType:0,version:"16.11.0",rendererPackageName:"react-dom"}).findFiberByHostInstance,function ok(a){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=b.inject(a);kk=function(a){try{b.onCommitFiberRoot(c,a,void 0,64==(64&a.current.effectTag))}catch(e){}},Wi=function(a){try{b.onCommitFiberUnmount(c,a)}catch(e){}}}catch(d){}return!0}(n({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ea.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return null===(a=ic(a))?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}));var Dk={default:Ck},Ek=Dk&&Ck||Dk;module.exports=Ek.default||Ek},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(561)},function(module,exports,__webpack_require__){"use strict";
/** @license React v0.17.0
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f,g,h,k,l;if(Object.defineProperty(exports,"__esModule",{value:!0}),"undefined"==typeof window||"function"!=typeof MessageChannel){var p=null,q=null,t=function(){if(null!==p)try{var a=exports.unstable_now();p(!0,a),p=null}catch(b){throw setTimeout(t,0),b}},u=Date.now();exports.unstable_now=function(){return Date.now()-u},f=function(a){null!==p?setTimeout(f,0,a):(p=a,setTimeout(t,0))},g=function(a,b){q=setTimeout(a,b)},h=function(){clearTimeout(q)},k=function(){return!1},l=exports.unstable_forceFrameRate=function(){}}else{var w=window.performance,x=window.Date,y=window.setTimeout,z=window.clearTimeout,A=window.requestAnimationFrame,B=window.cancelAnimationFrame;if("undefined"!=typeof console&&("function"!=typeof A&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof B&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")),"object"==typeof w&&"function"==typeof w.now)exports.unstable_now=function(){return w.now()};else{var C=x.now();exports.unstable_now=function(){return x.now()-C}}var D=!1,E=null,F=-1,G=5,H=0;k=function(){return exports.unstable_now()>=H},l=function(){},exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):G=0<a?Math.floor(1e3/a):33.33};var I=new MessageChannel,J=I.port2;I.port1.onmessage=function(){if(null!==E){var a=exports.unstable_now();H=a+G;try{E(!0,a)?J.postMessage(null):(D=!1,E=null)}catch(b){throw J.postMessage(null),b}}else D=!1},f=function(a){E=a,D||(D=!0,J.postMessage(null))},g=function(a,b){F=y((function(){a(exports.unstable_now())}),b)},h=function(){z(F),F=-1}}function K(a,b){var c=a.length;a.push(b);a:for(;;){var d=Math.floor((c-1)/2),e=a[d];if(!(void 0!==e&&0<L(e,b)))break a;a[d]=b,a[c]=e,c=d}}function M(a){return void 0===(a=a[0])?null:a}function N(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length;d<e;){var m=2*(d+1)-1,n=a[m],v=m+1,r=a[v];if(void 0!==n&&0>L(n,c))void 0!==r&&0>L(r,n)?(a[d]=r,a[v]=c,d=v):(a[d]=n,a[m]=c,d=m);else{if(!(void 0!==r&&0>L(r,c)))break a;a[d]=r,a[v]=c,d=v}}}return b}return null}function L(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}var O=[],P=[],Q=1,R=null,S=3,T=!1,U=!1,V=!1;function W(a){for(var b=M(P);null!==b;){if(null===b.callback)N(P);else{if(!(b.startTime<=a))break;N(P),b.sortIndex=b.expirationTime,K(O,b)}b=M(P)}}function X(a){if(V=!1,W(a),!U)if(null!==M(O))U=!0,f(Y);else{var b=M(P);null!==b&&g(X,b.startTime-a)}}function Y(a,b){U=!1,V&&(V=!1,h()),T=!0;var c=S;try{for(W(b),R=M(O);null!==R&&(!(R.expirationTime>b)||a&&!k());){var d=R.callback;if(null!==d){R.callback=null,S=R.priorityLevel;var e=d(R.expirationTime<=b);b=exports.unstable_now(),"function"==typeof e?R.callback=e:R===M(O)&&N(O),W(b)}else N(O);R=M(O)}if(null!==R)var m=!0;else{var n=M(P);null!==n&&g(X,n.startTime-b),m=!1}return m}finally{R=null,S=c,T=!1}}function Z(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var aa=l;exports.unstable_ImmediatePriority=1,exports.unstable_UserBlockingPriority=2,exports.unstable_NormalPriority=3,exports.unstable_IdlePriority=5,exports.unstable_LowPriority=4,exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=S;S=a;try{return b()}finally{S=c}},exports.unstable_next=function(a){switch(S){case 1:case 2:case 3:var b=3;break;default:b=S}var c=S;S=b;try{return a()}finally{S=c}},exports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();if("object"==typeof c&&null!==c){var e=c.delay;e="number"==typeof e&&0<e?d+e:d,c="number"==typeof c.timeout?c.timeout:Z(a)}else c=Z(a),e=d;return a={id:Q++,callback:b,priorityLevel:a,startTime:e,expirationTime:c=e+c,sortIndex:-1},e>d?(a.sortIndex=e,K(P,a),null===M(O)&&a===M(P)&&(V?h():V=!0,g(X,e-d))):(a.sortIndex=c,K(O,a),U||T||(U=!0,f(Y))),a},exports.unstable_cancelCallback=function(a){a.callback=null},exports.unstable_wrapCallback=function(a){var b=S;return function(){var c=S;S=b;try{return a.apply(this,arguments)}finally{S=c}}},exports.unstable_getCurrentPriorityLevel=function(){return S},exports.unstable_shouldYield=function(){var a=exports.unstable_now();W(a);var b=M(O);return b!==R&&null!==R&&null!==b&&null!==b.callback&&b.startTime<=a&&b.expirationTime<R.expirationTime||k()},exports.unstable_requestPaint=aa,exports.unstable_continueExecution=function(){U||T||(U=!0,f(Y))},exports.unstable_pauseExecution=function(){},exports.unstable_getFirstCallbackNode=function(){return M(O)},exports.unstable_Profiling=null},function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var entities=__webpack_require__(563),defaults={fg:"#FFF",bg:"#000",newline:!1,escapeXML:!1,stream:!1,colors:function getDefaultColors(){var colors={0:"#000",1:"#A00",2:"#0A0",3:"#A50",4:"#00A",5:"#A0A",6:"#0AA",7:"#AAA",8:"#555",9:"#F55",10:"#5F5",11:"#FF5",12:"#55F",13:"#F5F",14:"#5FF",15:"#FFF"};return range(0,5).forEach((function(red){range(0,5).forEach((function(green){range(0,5).forEach((function(blue){return function setStyleColor(red,green,blue,colors){var r=red>0?40*red+55:0,g=green>0?40*green+55:0,b=blue>0?40*blue+55:0;colors[16+36*red+6*green+blue]=function toColorHexString(ref){var results=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=ref[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var r=_step.value;results.push(toHexString(r))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return"#"+results.join("")}([r,g,b])}(red,green,blue,colors)}))}))})),range(0,23).forEach((function(gray){var c=gray+232,l=toHexString(10*gray+8);colors[c]="#"+l+l+l})),colors}()};function toHexString(num){for(var str=num.toString(16);str.length<2;)str="0"+str;return str}function generateOutput(stack,token,data,options){var result;return"text"===token?result=function pushText(text,options){if(options.escapeXML)return entities.encodeXML(text);return text}(data,options):"display"===token?result=function handleDisplay(stack,code,options){code=parseInt(code,10);var result,codeMap={"-1":function _(){return"<br/>"},0:function _(){return stack.length&&resetStyles(stack)},1:function _(){return pushTag(stack,"b")},3:function _(){return pushTag(stack,"i")},4:function _(){return pushTag(stack,"u")},8:function _(){return pushStyle(stack,"display:none")},9:function _(){return pushTag(stack,"strike")},22:function _(){return pushStyle(stack,"font-weight:normal;text-decoration:none;font-style:normal")},23:function _(){return closeTag(stack,"i")},24:function _(){return closeTag(stack,"u")},39:function _(){return pushForegroundColor(stack,options.fg)},49:function _(){return pushBackgroundColor(stack,options.bg)},53:function _(){return pushStyle(stack,"text-decoration:overline")}};codeMap[code]?result=codeMap[code]():4<code&&code<7?result=pushTag(stack,"blink"):29<code&&code<38?result=pushForegroundColor(stack,options.colors[code-30]):39<code&&code<48?result=pushBackgroundColor(stack,options.colors[code-40]):89<code&&code<98?result=pushForegroundColor(stack,options.colors[code-90+8]):99<code&&code<108&&(result=pushBackgroundColor(stack,options.colors[code-100+8]));return result}(stack,data,options):"xterm256"===token?result=pushForegroundColor(stack,options.colors[data]):"rgb"===token&&(result=function handleRgb(stack,data){var operation=+(data=data.substring(2).slice(0,-1)).substr(0,2),rgb=data.substring(5).split(";").map((function(value){return("0"+Number(value).toString(16)).substr(-2)})).join("");return pushStyle(stack,(38===operation?"color:#":"background-color:#")+rgb)}(stack,data)),result}function resetStyles(stack){var stackClone=stack.slice(0);return stack.length=0,stackClone.reverse().map((function(tag){return"</"+tag+">"})).join("")}function range(low,high){for(var results=[],j=low;j<=high;j++)results.push(j);return results}function categoryForCode(code){var result=null;return 0===(code=parseInt(code,10))?result="all":1===code?result="bold":2<code&&code<5?result="underline":4<code&&code<7?result="blink":8===code?result="hide":9===code?result="strike":29<code&&code<38||39===code||89<code&&code<98?result="foreground-color":(39<code&&code<48||49===code||99<code&&code<108)&&(result="background-color"),result}function pushTag(stack,tag,style){return style||(style=""),stack.push(tag),["<"+tag,style?' style="'+style+'"':void 0,">"].join("")}function pushStyle(stack,style){return pushTag(stack,"span",style)}function pushForegroundColor(stack,color){return pushTag(stack,"span","color:"+color)}function pushBackgroundColor(stack,color){return pushTag(stack,"span","background-color:"+color)}function closeTag(stack,style){var last;if(stack.slice(-1)[0]===style&&(last=stack.pop()),last)return"</"+style+">"}var Filter=function(){function Filter(options){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Filter),(options=options||{}).colors&&(options.colors=Object.assign({},defaults.colors,options.colors)),this.options=Object.assign({},defaults,options),this.stack=[],this.stickyStack=[]}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Filter,[{key:"toHtml",value:function toHtml(input){var _this=this;input="string"==typeof input?[input]:input;var stack=this.stack,options=this.options,buf=[];return this.stickyStack.forEach((function(element){var output=generateOutput(stack,element.token,element.data,options);output&&buf.push(output)})),function tokenize(text,options,callback){var ansiMatch=!1,ansiHandler=3;function remove(){return""}function newline(m){return options.newline?callback("display",-1):callback("text",m),""}var tokens=[{pattern:/^\x08+/,sub:remove},{pattern:/^\x1b\[[012]?K/,sub:remove},{pattern:/^\x1b\[\(B/,sub:remove},{pattern:/^\x1b\[[34]8;2;\d+;\d+;\d+m/,sub:function rgb(m){return callback("rgb",m),""}},{pattern:/^\x1b\[38;5;(\d+)m/,sub:function removeXterm256(m,g1){return callback("xterm256",g1),""}},{pattern:/^\n/,sub:newline},{pattern:/^\r\n/,sub:newline},{pattern:/^\x1b\[((?:\d{1,3};?)+|)m/,sub:function ansiMess(m,g1){ansiMatch=!0,0===g1.trim().length&&(g1="0"),g1=g1.trimRight(";").split(";");var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=g1[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var g=_step2.value;callback("display",g)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return""}},{pattern:/^\x1b\[\d?J/,sub:remove},{pattern:/^\x1b\[\d{0,3};\d{0,3}f/,sub:remove},{pattern:/^\x1b\[?[\d;]{0,3}/,sub:remove},{pattern:/^(([^\x1b\x08\r\n])+)/,sub:function realText(m){return callback("text",m),""}}];function process(handler,i){i>ansiHandler&&ansiMatch||(ansiMatch=!1,text=text.replace(handler.pattern,handler.sub))}var results1=[],length=text.length;outer:for(;length>0;){for(var i=0,o=0,len=tokens.length;o<len;i=++o){if(process(tokens[i],i),text.length!==length){length=text.length;continue outer}}if(text.length===length)break;results1.push(0),length=text.length}return results1}(input.join(""),options,(function(token,data){var output=generateOutput(stack,token,data,options);output&&buf.push(output),options.stream&&(_this.stickyStack=function updateStickyStack(stickyStack,token,data){return"text"!==token&&(stickyStack=stickyStack.filter(function notCategory(category){return function(e){return(null===category||e.category!==category)&&"all"!==category}}(categoryForCode(data)))).push({token:token,data:data,category:categoryForCode(data)}),stickyStack}(_this.stickyStack,token,data))})),stack.length&&buf.push(resetStyles(stack)),buf.join("")}}]),Filter}();module.exports=Filter},function(module,exports,__webpack_require__){var encode=__webpack_require__(564),decode=__webpack_require__(565);exports.decode=function(data,level){return(!level||level<=0?decode.XML:decode.HTML)(data)},exports.decodeStrict=function(data,level){return(!level||level<=0?decode.XML:decode.HTMLStrict)(data)},exports.encode=function(data,level){return(!level||level<=0?encode.XML:encode.HTML)(data)},exports.encodeXML=encode.XML,exports.encodeHTML4=exports.encodeHTML5=exports.encodeHTML=encode.HTML,exports.decodeXML=exports.decodeXMLStrict=decode.XML,exports.decodeHTML4=exports.decodeHTML5=exports.decodeHTML=decode.HTML,exports.decodeHTML4Strict=exports.decodeHTML5Strict=exports.decodeHTMLStrict=decode.HTMLStrict,exports.escape=encode.escape},function(module,exports,__webpack_require__){var inverseXML=getInverseObj(__webpack_require__(266)),xmlReplacer=getInverseReplacer(inverseXML);exports.XML=getInverse(inverseXML,xmlReplacer);var inverseHTML=getInverseObj(__webpack_require__(267)),htmlReplacer=getInverseReplacer(inverseHTML);function getInverseObj(obj){return Object.keys(obj).sort().reduce((function(inverse,name){return inverse[obj[name]]="&"+name+";",inverse}),{})}function getInverseReplacer(inverse){var single=[],multiple=[];return Object.keys(inverse).forEach((function(k){1===k.length?single.push("\\"+k):multiple.push(k)})),multiple.unshift("["+single.join("")+"]"),new RegExp(multiple.join("|"),"g")}exports.HTML=getInverse(inverseHTML,htmlReplacer);var re_nonASCII=/[^\0-\x7F]/g,re_astralSymbols=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function singleCharReplacer(c){return"&#x"+c.charCodeAt(0).toString(16).toUpperCase()+";"}function astralReplacer(c){return"&#x"+(1024*(c.charCodeAt(0)-55296)+c.charCodeAt(1)-56320+65536).toString(16).toUpperCase()+";"}function getInverse(inverse,re){function func(name){return inverse[name]}return function(data){return data.replace(re,func).replace(re_astralSymbols,astralReplacer).replace(re_nonASCII,singleCharReplacer)}}var re_xmlChars=getInverseReplacer(inverseXML);exports.escape=function escapeXML(data){return data.replace(re_xmlChars,singleCharReplacer).replace(re_astralSymbols,astralReplacer).replace(re_nonASCII,singleCharReplacer)}},function(module,exports,__webpack_require__){var entityMap=__webpack_require__(267),legacyMap=__webpack_require__(566),xmlMap=__webpack_require__(266),decodeCodePoint=__webpack_require__(567),decodeXMLStrict=getStrictDecoder(xmlMap),decodeHTMLStrict=getStrictDecoder(entityMap);function getStrictDecoder(map){var keys=Object.keys(map).join("|"),replace=getReplacer(map),re=new RegExp("&(?:"+(keys+="|#[xX][\\da-fA-F]+|#\\d+")+");","g");return function(str){return String(str).replace(re,replace)}}var decodeHTML=function(){for(var legacy=Object.keys(legacyMap).sort(sorter),keys=Object.keys(entityMap).sort(sorter),i=0,j=0;i<keys.length;i++)legacy[j]===keys[i]?(keys[i]+=";?",j++):keys[i]+=";";var re=new RegExp("&(?:"+keys.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),replace=getReplacer(entityMap);function replacer(str){return";"!==str.substr(-1)&&(str+=";"),replace(str)}return function(str){return String(str).replace(re,replacer)}}();function sorter(a,b){return a<b?1:-1}function getReplacer(map){return function replace(str){return"#"===str.charAt(1)?"X"===str.charAt(2)||"x"===str.charAt(2)?decodeCodePoint(parseInt(str.substr(3),16)):decodeCodePoint(parseInt(str.substr(2),10)):map[str.slice(1,-1)]}}module.exports={XML:decodeXMLStrict,HTML:decodeHTML,HTMLStrict:decodeHTMLStrict}},function(module){module.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Acirc":"Â","acirc":"â","acute":"´","AElig":"Æ","aelig":"æ","Agrave":"À","agrave":"à","amp":"&","AMP":"&","Aring":"Å","aring":"å","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","brvbar":"¦","Ccedil":"Ç","ccedil":"ç","cedil":"¸","cent":"¢","copy":"©","COPY":"©","curren":"¤","deg":"°","divide":"÷","Eacute":"É","eacute":"é","Ecirc":"Ê","ecirc":"ê","Egrave":"È","egrave":"è","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","frac12":"½","frac14":"¼","frac34":"¾","gt":">","GT":">","Iacute":"Í","iacute":"í","Icirc":"Î","icirc":"î","iexcl":"¡","Igrave":"Ì","igrave":"ì","iquest":"¿","Iuml":"Ï","iuml":"ï","laquo":"«","lt":"<","LT":"<","macr":"¯","micro":"µ","middot":"·","nbsp":" ","not":"¬","Ntilde":"Ñ","ntilde":"ñ","Oacute":"Ó","oacute":"ó","Ocirc":"Ô","ocirc":"ô","Ograve":"Ò","ograve":"ò","ordf":"ª","ordm":"º","Oslash":"Ø","oslash":"ø","Otilde":"Õ","otilde":"õ","Ouml":"Ö","ouml":"ö","para":"¶","plusmn":"±","pound":"£","quot":"\\"","QUOT":"\\"","raquo":"»","reg":"®","REG":"®","sect":"§","shy":"­","sup1":"¹","sup2":"²","sup3":"³","szlig":"ß","THORN":"Þ","thorn":"þ","times":"×","Uacute":"Ú","uacute":"ú","Ucirc":"Û","ucirc":"û","Ugrave":"Ù","ugrave":"ù","uml":"¨","Uuml":"Ü","uuml":"ü","Yacute":"Ý","yacute":"ý","yen":"¥","yuml":"ÿ"}')},function(module,exports,__webpack_require__){var decodeMap=__webpack_require__(568);module.exports=function decodeCodePoint(codePoint){if(codePoint>=55296&&codePoint<=57343||codePoint>1114111)return"�";codePoint in decodeMap&&(codePoint=decodeMap[codePoint]);var output="";codePoint>65535&&(codePoint-=65536,output+=String.fromCharCode(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint);return output+=String.fromCharCode(codePoint)}},function(module){module.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),__webpack_require__(24),__webpack_require__(25),__webpack_require__(28),__webpack_require__(14),__webpack_require__(60),__webpack_require__(39),__webpack_require__(17),__webpack_require__(61),__webpack_require__(104),__webpack_require__(570),__webpack_require__(573),__webpack_require__(2),__webpack_require__(16),__webpack_require__(98),__webpack_require__(62),__webpack_require__(27),__webpack_require__(15),__webpack_require__(21),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function createChannel(_ref2){var page=_ref2.page,transport=new PostmsgTransport({page:page});return new _channels.default({transport:transport})},exports.PostmsgTransport=exports.KEY=void 0;var _global=__webpack_require__(36),_channels=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(229)),_clientLogger=__webpack_require__(63),_telejson=__webpack_require__(575);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var KEY="storybook-channel";exports.KEY=KEY;var PostmsgTransport=function(){function PostmsgTransport(config){if(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PostmsgTransport),this.config=config,this.buffer=void 0,this.handler=void 0,this.connected=void 0,this.buffer=[],this.handler=null,_global.window.addEventListener("message",this.handleEvent.bind(this),!1),"manager"!==config.page&&"preview"!==config.page)throw new Error('postmsg-channel: "config.page" cannot be "'.concat(config.page,'"'))}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(PostmsgTransport,[{key:"setHandler",value:function setHandler(handler){var _this=this;this.handler=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];handler.apply(_this,args),!_this.connected&&_this.getWindow()&&(_this.flush(),_this.connected=!0)}}},{key:"send",value:function send(event,options){var _this2=this,iframeWindow=this.getWindow();if(!iframeWindow)return new Promise((function(resolve,reject){_this2.buffer.push({event:event,resolve:resolve,reject:reject})}));var depth=15,allowFunction=!0;options&&"boolean"==typeof options.allowFunction&&(allowFunction=options.allowFunction),options&&Number.isInteger(options.depth)&&(depth=options.depth);var data=(0,_telejson.stringify)({key:KEY,event:event},{maxDepth:depth,allowFunction:allowFunction});return iframeWindow.postMessage(data,"*"),Promise.resolve(null)}},{key:"flush",value:function flush(){var _this3=this,buffer=this.buffer;this.buffer=[],buffer.forEach((function(item){_this3.send(item.event).then(item.resolve).catch(item.reject)}))}},{key:"getWindow",value:function getWindow(){if("manager"===this.config.page){var iframe=_global.document.getElementById("storybook-preview-iframe");return iframe?iframe.contentWindow:null}return _global.window.parent}},{key:"handleEvent",value:function handleEvent(rawEvent){try{var data=rawEvent.data,_ref="string"==typeof data&&(0,_telejson.isJSON)(data)?(0,_telejson.parse)(data):data,key=_ref.key,event=_ref.event;key===KEY&&(_clientLogger.logger.debug.apply(_clientLogger.logger,["message arrived at ".concat(this.config.page),event.type].concat(_toConsumableArray(event.args))),this.handler(event))}catch(error){_clientLogger.logger.error(error)}}}]),PostmsgTransport}();exports.PostmsgTransport=PostmsgTransport},function(module,exports,__webpack_require__){"use strict";var DESCRIPTORS=__webpack_require__(12),global=__webpack_require__(5),isForced=__webpack_require__(93),redefine=__webpack_require__(30),has=__webpack_require__(18),classof=__webpack_require__(38),inheritIfRequired=__webpack_require__(234),toPrimitive=__webpack_require__(68),fails=__webpack_require__(7),create=__webpack_require__(59),getOwnPropertyNames=__webpack_require__(91).f,getOwnPropertyDescriptor=__webpack_require__(57).f,defineProperty=__webpack_require__(19).f,trim=__webpack_require__(571).trim,NativeNumber=global.Number,NumberPrototype=NativeNumber.prototype,BROKEN_CLASSOF="Number"==classof(create(NumberPrototype)),toNumber=function(argument){var first,third,radix,maxCode,digits,length,index,code,it=toPrimitive(argument,!1);if("string"==typeof it&&it.length>2)if(43===(first=(it=trim(it)).charCodeAt(0))||45===first){if(88===(third=it.charCodeAt(2))||120===third)return NaN}else if(48===first){switch(it.charCodeAt(1)){case 66:case 98:radix=2,maxCode=49;break;case 79:case 111:radix=8,maxCode=55;break;default:return+it}for(length=(digits=it.slice(2)).length,index=0;index<length;index++)if((code=digits.charCodeAt(index))<48||code>maxCode)return NaN;return parseInt(digits,radix)}return+it};if(isForced("Number",!NativeNumber(" 0o1")||!NativeNumber("0b1")||NativeNumber("+0x1"))){for(var key,NumberWrapper=function Number(value){var it=arguments.length<1?0:value,dummy=this;return dummy instanceof NumberWrapper&&(BROKEN_CLASSOF?fails((function(){NumberPrototype.valueOf.call(dummy)})):"Number"!=classof(dummy))?inheritIfRequired(new NativeNumber(toNumber(it)),dummy,NumberWrapper):toNumber(it)},keys=DESCRIPTORS?getOwnPropertyNames(NativeNumber):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),j=0;keys.length>j;j++)has(NativeNumber,key=keys[j])&&!has(NumberWrapper,key)&&defineProperty(NumberWrapper,key,getOwnPropertyDescriptor(NativeNumber,key));NumberWrapper.prototype=NumberPrototype,NumberPrototype.constructor=NumberWrapper,redefine(global,"Number",NumberWrapper)}},function(module,exports,__webpack_require__){var requireObjectCoercible=__webpack_require__(35),whitespace="["+__webpack_require__(572)+"]",ltrim=RegExp("^"+whitespace+whitespace+"*"),rtrim=RegExp(whitespace+whitespace+"*$"),createMethod=function(TYPE){return function($this){var string=String(requireObjectCoercible($this));return 1&TYPE&&(string=string.replace(ltrim,"")),2&TYPE&&(string=string.replace(rtrim,"")),string}};module.exports={start:createMethod(1),end:createMethod(2),trim:createMethod(3)}},function(module,exports){module.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(module,exports,__webpack_require__){__webpack_require__(3)({target:"Number",stat:!0},{isInteger:__webpack_require__(574)})},function(module,exports,__webpack_require__){var isObject=__webpack_require__(9),floor=Math.floor;module.exports=function isInteger(it){return!isObject(it)&&isFinite(it)&&floor(it)===it}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parse=exports.stringify=exports.isJSON=exports.reviver=exports.replacer=void 0;var _isRegex=_interopRequireDefault(__webpack_require__(194)),_isFunction=_interopRequireDefault(__webpack_require__(576)),_isSymbol=_interopRequireDefault(__webpack_require__(181)),_isobject=_interopRequireDefault(__webpack_require__(577)),_get=_interopRequireDefault(__webpack_require__(259)),_memoizerific=_interopRequireDefault(__webpack_require__(161));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){if(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var isObject=_isobject.default,removeCodeComments=function removeCodeComments(code){var inQuoteChar=null,inBlockComment=!1,inLineComment=!1,inRegexLiteral=!1,newCode="";if(code.indexOf("//")>=0||code.indexOf("/*")>=0)for(var i=0;i<code.length;i+=1)inQuoteChar||inBlockComment||inLineComment||inRegexLiteral?(inQuoteChar&&(code[i]===inQuoteChar&&"\\"!==code[i-1]||"\n"===code[i]&&"`"!==inQuoteChar)&&(inQuoteChar=null),inRegexLiteral&&("/"===code[i]&&"\\"!==code[i-1]||"\n"===code[i])&&(inRegexLiteral=!1),inBlockComment&&"/"===code[i-1]&&"*"===code[i-2]&&(inBlockComment=!1),inLineComment&&"\n"===code[i]&&(inLineComment=!1)):'"'===code[i]||"'"===code[i]||"`"===code[i]?inQuoteChar=code[i]:"/"===code[i]&&"*"===code[i+1]?inBlockComment=!0:"/"===code[i]&&"/"===code[i+1]?inLineComment=!0:"/"===code[i]&&"/"!==code[i+1]&&(inRegexLiteral=!0),inBlockComment||inLineComment||(newCode+=code[i]);else newCode=code;return newCode},cleanCode=(0,_memoizerific.default)(1e4)((function(code){return removeCodeComments(code).replace(/\n\s*/g,"").trim()})),dateFormat=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z$/,replacer=function replacer(options){var objects,stack,keys;return function replace(key,value){if(""===key)return keys=["root"],objects=[{keys:"root",value:value}],stack=[],value;for(;stack.length&&this!==stack[0];)stack.shift(),keys.pop();if((0,_isRegex.default)(value)){if(!options.allowRegExp)return;return"_regexp_".concat(value.flags,"|").concat(value.source)}if((0,_isFunction.default)(value)){if(!options.allowFunction)return;var name=value.name,stringified=value.toString();return stringified.match(/(\[native code\]|WEBPACK_IMPORTED_MODULE|__webpack_exports__|__webpack_require__)/)?"_function_".concat(name,"|").concat(function(){}.toString()):"_function_".concat(name,"|").concat(cleanCode(stringified))}if((0,_isSymbol.default)(value)){if(!options.allowSymbol)return;return"_symbol_".concat(value.toString().slice(7,-1))}if("string"==typeof value&&dateFormat.test(value)){if(!options.allowDate)return;return"_date_".concat(value)}if(void 0===value){if(!options.allowUndefined)return;return"_undefined_"}if("number"==typeof value)return value===-1/0?"_-Infinity_":value===1/0?"_Infinity_":Number.isNaN(value)?"_NaN_":value;if("string"==typeof value)return value;if("boolean"==typeof value)return value;if(stack.length>=options.maxDepth)return Array.isArray(value)?"[Array(".concat(value.length,")]"):"[Object]";var found=objects.find((function(o){return o.value===value}));if(!found){if(value&&isObject(value)&&value.constructor&&value.constructor.name&&"Object"!==value.constructor.name){if(!options.allowClass)return;try{Object.assign(value,{"_constructor-name_":value.constructor.name})}catch(e){}}return keys.push(key),stack.unshift(value),objects.push({keys:keys.join("."),value:value}),value}return"_duplicate_".concat(found.keys)}};exports.replacer=replacer;var reviver=function reviver(){var refs=[],root;return function revive(key,value){if(""===key&&(root=value,refs.forEach((function(_ref){var target=_ref.target,container=_ref.container,replacement=_ref.replacement;container[target]="root"===replacement?root:(0,_get.default)(root,replacement.replace("root.",""))}))),"_constructor-name_"===key)return value;if(isObject(value)&&value["_constructor-name_"]){var name=value["_constructor-name_"];if("Object"!==name){var Fn=new Function("return function ".concat(name,"(){}"))();Object.setPrototypeOf(value,new Fn)}return delete value["_constructor-name_"],value}if("string"==typeof value&&value.startsWith("_function_")){var _ref2=value.match(/_function_([^|]*)\|(.*)/)||[],_ref3=_slicedToArray(_ref2,3),_name=_ref3[1],source=_ref3[2],result=function result(){var f=eval("(".concat(source,")"));return f.apply(void 0,arguments)};return Object.defineProperty(result,"toString",{value:function value(){return source}}),Object.defineProperty(result,"name",{value:_name}),result}if("string"==typeof value&&value.startsWith("_regexp_")){var _ref4=value.match(/_regexp_([^|]*)\|(.*)/)||[],_ref5=_slicedToArray(_ref4,3),flags=_ref5[1],_source=_ref5[2];return new RegExp(_source,flags)}return"string"==typeof value&&value.startsWith("_date_")?new Date(value.replace("_date_","")):"string"==typeof value&&value.startsWith("_duplicate_")?(refs.push({target:key,container:this,replacement:value.replace("_duplicate_","")}),null):"string"==typeof value&&value.startsWith("_symbol_")?Symbol(value.replace("_symbol_","")):"string"==typeof value&&"_-Infinity_"===value?-1/0:"string"==typeof value&&"_Infinity_"===value?1/0:"string"==typeof value&&"_NaN_"===value?NaN:value}};exports.reviver=reviver;var isJSON=function isJSON(input){return input.match(/^[\[\{\"\}].*[\]\}\"]$/)};exports.isJSON=isJSON;var defaultOptions={maxDepth:10,space:void 0,allowFunction:!0,allowRegExp:!0,allowDate:!0,allowClass:!0,allowUndefined:!0,allowSymbol:!0},stringify=function stringify(data){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},mergedOptions=Object.assign({},defaultOptions,options);return JSON.stringify(data,replacer(mergedOptions),options.space)};exports.stringify=stringify;var mutator=function mutator(){var mutated=[];return function mutateUndefined(value){isObject(value)&&Object.entries(value).forEach((function(_ref6){var _ref7=_slicedToArray(_ref6,2),k=_ref7[0],v=_ref7[1];"_undefined_"===v?value[k]=void 0:mutated.includes(v)||(mutated.push(v),mutateUndefined(v))})),Array.isArray(value)&&value.forEach((function(v){mutated.push(v),mutateUndefined(v)}))}},parse=function parse(data){var result=JSON.parse(data,reviver());return mutator()(result),result};exports.parse=parse},function(module,exports){module.exports=function isFunction(fn){var string=toString.call(fn);return"[object Function]"===string||"function"==typeof fn&&"[object RegExp]"!==string||"undefined"!=typeof window&&(fn===window.setTimeout||fn===window.alert||fn===window.confirm||fn===window.prompt)};var toString=Object.prototype.toString},function(module,__webpack_exports__,__webpack_require__){"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function isObject(val){return null!=val&&"object"==typeof val&&!1===Array.isArray(val)}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return isObject}))},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),__webpack_require__(28),__webpack_require__(263),__webpack_require__(40),__webpack_require__(2),__webpack_require__(26),__webpack_require__(50),__webpack_require__(83),__webpack_require__(158),Object.defineProperty(exports,"__esModule",{value:!0}),exports.pathToId=pathToId,exports.initializePath=exports.parseQueryParameters=exports.getIdFromLegacyQuery=exports.setPath=void 0;var _global=__webpack_require__(36),_qs=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(159)),_utils=__webpack_require__(105);function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function pathToId(path){var match=(path||"").match(/^\/story\/(.+)/);if(!match)throw new Error("Invalid path '".concat(path,"',  must start with '/story/'"));return match[1]}var setPath=function setPath(_ref){var storyId=_ref.storyId,viewMode=_ref.viewMode,_qs$parse=_qs.default.parse(_global.document.location.search,{ignoreQueryPrefix:!0}),rest=(_qs$parse.path,_qs$parse.selectedKind,_qs$parse.selectedStory,_objectWithoutProperties(_qs$parse,["path","selectedKind","selectedStory"])),newPath="".concat(_global.document.location.pathname,"?").concat(_qs.default.stringify(Object.assign({},rest,{id:storyId,viewMode:viewMode})));_global.history.replaceState({},"",newPath)};exports.setPath=setPath;var getIdFromLegacyQuery=function getIdFromLegacyQuery(_ref2){var path=_ref2.path,selectedKind=_ref2.selectedKind,selectedStory=_ref2.selectedStory;return path&&pathToId(path)||selectedKind&&selectedStory&&(0,_utils.toId)(selectedKind,selectedStory)};exports.getIdFromLegacyQuery=getIdFromLegacyQuery;exports.parseQueryParameters=function parseQueryParameters(search){return _qs.default.parse(search,{ignoreQueryPrefix:!0}).id};exports.initializePath=function initializePath(){var query=_qs.default.parse(_global.document.location.search,{ignoreQueryPrefix:!0}),storyId=query.id,viewMode=query.viewMode;return storyId||(storyId=getIdFromLegacyQuery(query))&&setPath({storyId:storyId,viewMode:viewMode}),{storyId:storyId,viewMode:viewMode}}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(2),Object.defineProperty(exports,"__esModule",{value:!0}),exports.NoDocs=void 0;var _react=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(1));var _ref=_react.default.createElement("div",{style:{fontSize:"14px",letterSpacing:"0.2px",margin:"10px 0"},className:"sb-nodocs sb-wrapper"},_react.default.createElement("div",{style:{margin:"auto",padding:"30px",borderRadius:"10px",background:"rgba(0,0,0,0.03)"}},_react.default.createElement("h1",{style:{textAlign:"center"}},"No Docs"),_react.default.createElement("p",null,"Sorry, but there are no docs for the selected story. To add them, set the story's"," ",_react.default.createElement("code",null,"docs")," parameter. If you think this is an error:"),_react.default.createElement("ul",null,_react.default.createElement("li",null,"Please check the story definition."),_react.default.createElement("li",null,"Please check the Storybook config."),_react.default.createElement("li",null,"Try reloading the page.")),_react.default.createElement("p",null,"If the problem persists, check the browser console, or the terminal you've run Storybook from."))),NoDocs=function NoDocs(){return _ref};exports.NoDocs=NoDocs,NoDocs.displayName="NoDocs"},function(module,exports,__webpack_require__){"use strict";var _global=__webpack_require__(36);if(_global.window&&_global.window.parent!==_global.window)try{_global.window.__REACT_DEVTOOLS_GLOBAL_HOOK__=_global.window.parent.__REACT_DEVTOOLS_GLOBAL_HOOK__}catch(error){}_global.window&&(_global.window.STORYBOOK_ENV="react")},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),__webpack_require__(24),__webpack_require__(25),__webpack_require__(28),__webpack_require__(17),__webpack_require__(117),__webpack_require__(2),__webpack_require__(79),__webpack_require__(118),__webpack_require__(16),__webpack_require__(98),__webpack_require__(27),__webpack_require__(21),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function renderMain(_x){return _renderMain.apply(this,arguments)},__webpack_require__(127);var _global=__webpack_require__(36),_react=_interopRequireDefault(__webpack_require__(1)),_reactDom=_interopRequireDefault(__webpack_require__(265));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}var rootEl=_global.document?_global.document.getElementById("root"):null,render=function render(node,el){return new Promise((function(resolve){_reactDom.default.render(Object({NODE_ENV:"production",NODE_PATH:"",PUBLIC_URL:"."}).STORYBOOK_EXAMPLE_APP?_react.default.createElement(_react.default.StrictMode,null,node):node,el,resolve)}))},ErrorBoundary=function(_React$Component){function ErrorBoundary(){var _getPrototypeOf2,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ErrorBoundary);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ErrorBoundary)).call.apply(_getPrototypeOf2,[this].concat(args)))).state={hasError:!1},_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(ErrorBoundary,_React$Component),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ErrorBoundary,[{key:"componentDidMount",value:function componentDidMount(){var hasError=this.state.hasError,showMain=this.props.showMain;hasError||showMain()}},{key:"componentDidCatch",value:function componentDidCatch(err){(0,this.props.showException)(err)}},{key:"render",value:function render(){var hasError=this.state.hasError,children=this.props.children;return hasError?null:children}}],[{key:"getDerivedStateFromError",value:function getDerivedStateFromError(){return{hasError:!0}}}]),ErrorBoundary}(_react.default.Component);function _renderMain(){return(_renderMain=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(_ref){var StoryFn,showMain,showException,forceRender,element;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return StoryFn=_ref.storyFn,showMain=_ref.showMain,showException=_ref.showException,forceRender=_ref.forceRender,element=_react.default.createElement(ErrorBoundary,{showMain:showMain,showException:showException},_react.default.createElement(StoryFn,null)),forceRender||_reactDom.default.unmountComponentAtNode(rootEl),_context.next=5,render(element,rootEl);case 5:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}},,,,,function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];return list.toString=function toString(){return this.map((function(item){var content=function cssWithMappingToString(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}(cssMapping),sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot).concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}(item,useSourceMap);return item[2]?"@media ".concat(item[2],"{").concat(content,"}"):content})).join("")},list.i=function(modules,mediaQuery){"string"==typeof modules&&(modules=[[null,modules,""]]);for(var alreadyImportedModules={},i=0;i<this.length;i++){var id=this[i][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _i=0;_i<modules.length;_i++){var item=modules[_i];null!=item[0]&&alreadyImportedModules[item[0]]||(mediaQuery&&!item[2]?item[2]=mediaQuery:mediaQuery&&(item[2]="(".concat(item[2],") and (").concat(mediaQuery,")")),list.push(item))}},list}},function(module,exports,__webpack_require__){var fn,memo,stylesInDom={},isOldIE=(fn=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===memo&&(memo=fn.apply(this,arguments)),memo}),getTarget=function(target,parent){return parent?parent.querySelector(target):document.querySelector(target)},getElement=function(fn){var memo={};return function(target,parent){if("function"==typeof target)return target();if(void 0===memo[target]){var styleTarget=getTarget.call(this,target,parent);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}(),singleton=null,singletonCounter=0,stylesInsertedAtTop=[],fixUrls=__webpack_require__(588);function addStylesToDom(styles,options){for(var i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];if(domStyle){domStyle.refs++;for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j](item.parts[j]);for(;j<item.parts.length;j++)domStyle.parts.push(addStyle(item.parts[j],options))}else{var parts=[];for(j=0;j<item.parts.length;j++)parts.push(addStyle(item.parts[j],options));stylesInDom[item.id]={id:item.id,refs:1,parts:parts}}}}function listToStyles(list,options){for(var styles=[],newStyles={},i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],part={css:item[1],media:item[2],sourceMap:item[3]};newStyles[id]?newStyles[id].parts.push(part):styles.push(newStyles[id]={id:id,parts:[part]})}return styles}function insertStyleElement(options,style){var target=getElement(options.insertInto);if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var lastStyleElementInsertedAtTop=stylesInsertedAtTop[stylesInsertedAtTop.length-1];if("top"===options.insertAt)lastStyleElementInsertedAtTop?lastStyleElementInsertedAtTop.nextSibling?target.insertBefore(style,lastStyleElementInsertedAtTop.nextSibling):target.appendChild(style):target.insertBefore(style,target.firstChild),stylesInsertedAtTop.push(style);else if("bottom"===options.insertAt)target.appendChild(style);else{if("object"!=typeof options.insertAt||!options.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var nextSibling=getElement(options.insertAt.before,target);target.insertBefore(style,nextSibling)}}function removeStyleElement(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style);var idx=stylesInsertedAtTop.indexOf(style);idx>=0&&stylesInsertedAtTop.splice(idx,1)}function createStyleElement(options){var style=document.createElement("style");if(void 0===options.attrs.type&&(options.attrs.type="text/css"),void 0===options.attrs.nonce){var nonce=function getNonce(){0;return __webpack_require__.nc}();nonce&&(options.attrs.nonce=nonce)}return addAttrs(style,options.attrs),insertStyleElement(options,style),style}function addAttrs(el,attrs){Object.keys(attrs).forEach((function(key){el.setAttribute(key,attrs[key])}))}function addStyle(obj,options){var style,update,remove,result;if(options.transform&&obj.css){if(!(result="function"==typeof options.transform?options.transform(obj.css):options.transform.default(obj.css)))return function(){};obj.css=result}if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=createStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else obj.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(style=function createLinkElement(options){var link=document.createElement("link");return void 0===options.attrs.type&&(options.attrs.type="text/css"),options.attrs.rel="stylesheet",addAttrs(link,options.attrs),insertStyleElement(options,link),link}(options),update=updateLink.bind(null,style,options),remove=function(){removeStyleElement(style),style.href&&URL.revokeObjectURL(style.href)}):(style=createStyleElement(options),update=applyToTag.bind(null,style),remove=function(){removeStyleElement(style)});return update(obj),function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}module.exports=function(list,options){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(options=options||{}).attrs="object"==typeof options.attrs?options.attrs:{},options.singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE()),options.insertInto||(options.insertInto="head"),options.insertAt||(options.insertAt="bottom");var styles=listToStyles(list,options);return addStylesToDom(styles,options),function update(newList){for(var mayRemove=[],i=0;i<styles.length;i++){var item=styles[i];(domStyle=stylesInDom[item.id]).refs--,mayRemove.push(domStyle)}newList&&addStylesToDom(listToStyles(newList,options),options);for(i=0;i<mayRemove.length;i++){var domStyle;if(0===(domStyle=mayRemove[i]).refs){for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j]();delete stylesInDom[domStyle.id]}}}};var textStore,replaceText=(textStore=[],function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")});function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}function applyToTag(style,obj){var css=obj.css,media=obj.media;if(media&&style.setAttribute("media",media),style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}function updateLink(link,options,obj){var css=obj.css,sourceMap=obj.sourceMap,autoFixUrls=void 0===options.convertToAbsoluteUrls&&sourceMap;(options.convertToAbsoluteUrls||autoFixUrls)&&(css=fixUrls(css)),sourceMap&&(css+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */");var blob=new Blob([css],{type:"text/css"}),oldSrc=link.href;link.href=URL.createObjectURL(blob),oldSrc&&URL.revokeObjectURL(oldSrc)}},function(module,exports){module.exports=function(css){var location="undefined"!=typeof window&&window.location;if(!location)throw new Error("fixUrls requires window.location");if(!css||"string"!=typeof css)return css;var baseUrl=location.protocol+"//"+location.host,currentDir=baseUrl+location.pathname.replace(/\/[^\/]*$/,"/");return css.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(fullMatch,origUrl){var newUrl,unquotedOrigUrl=origUrl.trim().replace(/^"(.*)"$/,(function(o,$1){return $1})).replace(/^'(.*)'$/,(function(o,$1){return $1}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(unquotedOrigUrl)?fullMatch:(newUrl=0===unquotedOrigUrl.indexOf("//")?unquotedOrigUrl:0===unquotedOrigUrl.indexOf("/")?baseUrl+unquotedOrigUrl:currentDir+unquotedOrigUrl.replace(/^\.\//,""),"url("+JSON.stringify(newUrl)+")")}))}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(14),__webpack_require__(2),__webpack_require__(26),__webpack_require__(15),Object.defineProperty(exports,"__esModule",{value:!0});var _ActionDisplay=__webpack_require__(590);Object.keys(_ActionDisplay).forEach((function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _ActionDisplay[key]}})}));var _ActionsFunction=__webpack_require__(591);Object.keys(_ActionsFunction).forEach((function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _ActionsFunction[key]}})}));var _ActionOptions=__webpack_require__(592);Object.keys(_ActionOptions).forEach((function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _ActionOptions[key]}})}));var _ActionsMap=__webpack_require__(593);Object.keys(_ActionsMap).forEach((function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _ActionsMap[key]}})}));var _DecoratorFunction=__webpack_require__(594);Object.keys(_DecoratorFunction).forEach((function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _DecoratorFunction[key]}})}));var _HandlerFunction=__webpack_require__(595);Object.keys(_HandlerFunction).forEach((function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _HandlerFunction[key]}})}))},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){"use strict";__webpack_require__(14),__webpack_require__(2),__webpack_require__(26),__webpack_require__(15),Object.defineProperty(exports,"__esModule",{value:!0});var _action=__webpack_require__(170);Object.keys(_action).forEach((function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _action[key]}})}));var _actions=__webpack_require__(172);Object.keys(_actions).forEach((function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _actions[key]}})}));var _configureActions=__webpack_require__(171);Object.keys(_configureActions).forEach((function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _configureActions[key]}})}));var _decorateAction=__webpack_require__(600);Object.keys(_decorateAction).forEach((function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _decorateAction[key]}})}));var _withActions=__webpack_require__(269);Object.keys(_withActions).forEach((function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _withActions[key]}})}))},function(module,exports,__webpack_require__){var rng=__webpack_require__(598),bytesToUuid=__webpack_require__(599);module.exports=function v4(options,buf,offset){var i=buf&&offset||0;"string"==typeof options&&(buf="binary"===options?new Array(16):null,options=null);var rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf)for(var ii=0;ii<16;++ii)buf[i+ii]=rnds[ii];return buf||bytesToUuid(rnds)}},function(module,exports){var getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){var rnds8=new Uint8Array(16);module.exports=function whatwgRNG(){return getRandomValues(rnds8),rnds8}}else{var rnds=new Array(16);module.exports=function mathRNG(){for(var r,i=0;i<16;i++)0==(3&i)&&(r=4294967296*Math.random()),rnds[i]=r>>>((3&i)<<3)&255;return rnds}}},function(module,exports){for(var byteToHex=[],i=0;i<256;++i)byteToHex[i]=(i+256).toString(16).substr(1);module.exports=function bytesToUuid(buf,offset){var i=offset||0,bth=byteToHex;return[bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]]].join("")}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),__webpack_require__(24),__webpack_require__(25),__webpack_require__(14),__webpack_require__(60),__webpack_require__(39),__webpack_require__(17),__webpack_require__(152),__webpack_require__(61),__webpack_require__(2),__webpack_require__(26),__webpack_require__(16),__webpack_require__(62),__webpack_require__(27),__webpack_require__(15),__webpack_require__(21),Object.defineProperty(exports,"__esModule",{value:!0}),exports.decorate=exports.decorateAction=void 0;var _action=__webpack_require__(170),_actions=__webpack_require__(172),_withActions=__webpack_require__(269);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var applyDecorators=function applyDecorators(decorators,actionCallback){return function(){for(var _len=arguments.length,_args=new Array(_len),_key=0;_key<_len;_key++)_args[_key]=arguments[_key];var decorated=decorators.reduce((function(args,storyFn){return storyFn(args)}),_args);actionCallback.apply(void 0,_toConsumableArray(decorated))}},decorateAction=function decorateAction(decorators){return function(name,options){var callAction=(0,_action.action)(name,options);return applyDecorators(decorators,callAction)}};exports.decorateAction=decorateAction;exports.decorate=function decorate(decorators){var decoratedActions=function decoratedActions(){var rawActions=_actions.actions.apply(void 0,arguments),actionsObject={};return Object.keys(rawActions).forEach((function(name){actionsObject[name]=applyDecorators(decorators,rawActions[name])})),actionsObject};return{action:decorateAction(decorators),actions:decoratedActions,withActions:(0,_withActions.createDecorator)(decoratedActions)}}},function(module,exports,__webpack_require__){"use strict";exports.byteLength=function byteLength(b64){var lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1];return 3*(validLen+placeHoldersLen)/4-placeHoldersLen},exports.toByteArray=function toByteArray(b64){var tmp,i,lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1],arr=new Arr(function _byteLength(b64,validLen,placeHoldersLen){return 3*(validLen+placeHoldersLen)/4-placeHoldersLen}(0,validLen,placeHoldersLen)),curByte=0,len=placeHoldersLen>0?validLen-4:validLen;for(i=0;i<len;i+=4)tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)],arr[curByte++]=tmp>>16&255,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp;2===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4,arr[curByte++]=255&tmp);1===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp);return arr},exports.fromByteArray=function fromByteArray(uint8){for(var tmp,len=uint8.length,extraBytes=len%3,parts=[],i=0,len2=len-extraBytes;i<len2;i+=16383)parts.push(encodeChunk(uint8,i,i+16383>len2?len2:i+16383));1===extraBytes?(tmp=uint8[len-1],parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")):2===extraBytes&&(tmp=(uint8[len-2]<<8)+uint8[len-1],parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"="));return parts.join("")};for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(b64){var len=b64.length;if(len%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var validLen=b64.indexOf("=");return-1===validLen&&(validLen=len),[validLen,validLen===len?0:4-validLen%4]}function encodeChunk(uint8,start,end){for(var tmp,num,output=[],i=start;i<end;i+=3)tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(255&uint8[i+2]),output.push(lookup[(num=tmp)>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[63&num]);return output.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63},function(module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:1/0*(s?-1:1);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||0===value&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),(value+=e+eBias>=1?rt/c:rt*Math.pow(2,1-eBias))*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}},function(module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject=function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["",""],["",""]);var TemplateTag_TemplateTag=function(){function TemplateTag(){for(var _this=this,_len=arguments.length,transformers=Array(_len),_key=0;_key<_len;_key++)transformers[_key]=arguments[_key];return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TemplateTag),this.tag=function(strings){for(var _len2=arguments.length,expressions=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)expressions[_key2-1]=arguments[_key2];return"function"==typeof strings?_this.interimTag.bind(_this,strings):"string"==typeof strings?_this.transformEndResult(strings):(strings=strings.map(_this.transformString.bind(_this)),_this.transformEndResult(strings.reduce(_this.processSubstitutions.bind(_this,expressions))))},transformers.length>0&&Array.isArray(transformers[0])&&(transformers=transformers[0]),this.transformers=transformers.map((function(transformer){return"function"==typeof transformer?transformer():transformer})),this.tag}return _createClass(TemplateTag,[{key:"interimTag",value:function interimTag(previousTag,template){for(var _len3=arguments.length,substitutions=Array(_len3>2?_len3-2:0),_key3=2;_key3<_len3;_key3++)substitutions[_key3-2]=arguments[_key3];return this.tag(_templateObject,previousTag.apply(void 0,[template].concat(substitutions)))}},{key:"processSubstitutions",value:function processSubstitutions(substitutions,resultSoFar,remainingPart){var substitution=this.transformSubstitution(substitutions.shift(),resultSoFar);return"".concat(resultSoFar,substitution,remainingPart)}},{key:"transformString",value:function transformString(str){return this.transformers.reduce((function cb(res,transform){return transform.onString?transform.onString(res):res}),str)}},{key:"transformSubstitution",value:function transformSubstitution(substitution,resultSoFar){return this.transformers.reduce((function cb(res,transform){return transform.onSubstitution?transform.onSubstitution(res,resultSoFar):res}),substitution)}},{key:"transformEndResult",value:function transformEndResult(endResult){return this.transformers.reduce((function cb(res,transform){return transform.onEndResult?transform.onEndResult(res):res}),endResult)}}]),TemplateTag}(),trimResultTransformer_trimResultTransformer=function trimResultTransformer(){var side=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{onEndResult:function onEndResult(endResult){if(""===side)return endResult.trim();if("start"===(side=side.toLowerCase())||"left"===side)return endResult.replace(/^\s*/,"");if("end"===side||"right"===side)return endResult.replace(/\s*$/,"");throw new Error("Side not supported: "+side)}}};function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var stripIndentTransformer_stripIndentTransformer=function stripIndentTransformer(){var type=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"initial";return{onEndResult:function onEndResult(endResult){if("initial"===type){var match=endResult.match(/^[^\S\n]*(?=\S)/gm),indent=match&&Math.min.apply(Math,_toConsumableArray(match.map((function(el){return el.length}))));if(indent){var regexp=new RegExp("^.{"+indent+"}","gm");return endResult.replace(regexp,"")}return endResult}if("all"===type)return endResult.replace(/^[^\S\n]+/gm,"");throw new Error("Unknown type: "+type)}}},replaceResultTransformer_replaceResultTransformer=function replaceResultTransformer(replaceWhat,replaceWith){return{onEndResult:function onEndResult(endResult){if(null==replaceWhat||null==replaceWith)throw new Error("replaceResultTransformer requires at least 2 arguments.");return endResult.replace(replaceWhat,replaceWith)}}},replaceSubstitutionTransformer_replaceSubstitutionTransformer=function replaceSubstitutionTransformer(replaceWhat,replaceWith){return{onSubstitution:function onSubstitution(substitution,resultSoFar){if(null==replaceWhat||null==replaceWith)throw new Error("replaceSubstitutionTransformer requires at least 2 arguments.");return null==substitution?substitution:substitution.toString().replace(replaceWhat,replaceWith)}}},replaceStringTransformer_replaceStringTransformer=function replaceStringTransformer(replaceWhat,replaceWith){return{onString:function onString(str){if(null==replaceWhat||null==replaceWith)throw new Error("replaceStringTransformer requires at least 2 arguments.");return str.replace(replaceWhat,replaceWith)}}},defaults={separator:"",conjunction:"",serial:!1},inlineArrayTransformer_inlineArrayTransformer=function inlineArrayTransformer(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:defaults;return{onSubstitution:function onSubstitution(substitution,resultSoFar){if(Array.isArray(substitution)){var arrayLength=substitution.length,separator=opts.separator,conjunction=opts.conjunction,serial=opts.serial,indent=resultSoFar.match(/(\n?[^\S\n]+)$/);if(substitution=indent?substitution.join(separator+indent[1]):substitution.join(separator+" "),conjunction&&arrayLength>1){var separatorIndex=substitution.lastIndexOf(separator);substitution=substitution.slice(0,separatorIndex)+(serial?separator:"")+" "+conjunction+substitution.slice(separatorIndex+1)}}return substitution}}},splitStringTransformer_splitStringTransformer=function splitStringTransformer(splitBy){return{onSubstitution:function onSubstitution(substitution,resultSoFar){if(null==splitBy||"string"!=typeof splitBy)throw new Error("You need to specify a string character to split by.");return"string"==typeof substitution&&substitution.includes(splitBy)&&(substitution=substitution.split(splitBy)),substitution}}},isValidValue=function isValidValue(x){return null!=x&&!Number.isNaN(x)&&"boolean"!=typeof x},removeNonPrintingValuesTransformer_removeNonPrintingValuesTransformer=function removeNonPrintingValuesTransformer(){return{onSubstitution:function onSubstitution(substitution){return Array.isArray(substitution)?substitution.filter(isValidValue):isValidValue(substitution)?substitution:""}}},commaLists_commaLists=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer({separator:","}),stripIndentTransformer_stripIndentTransformer,trimResultTransformer_trimResultTransformer),commaListsAnd_commaListsAnd=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer({separator:",",conjunction:"and"}),stripIndentTransformer_stripIndentTransformer,trimResultTransformer_trimResultTransformer),commaListsOr_commaListsOr=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer({separator:",",conjunction:"or"}),stripIndentTransformer_stripIndentTransformer,trimResultTransformer_trimResultTransformer),html_html=new TemplateTag_TemplateTag(splitStringTransformer_splitStringTransformer("\n"),removeNonPrintingValuesTransformer_removeNonPrintingValuesTransformer,inlineArrayTransformer_inlineArrayTransformer,stripIndentTransformer_stripIndentTransformer,trimResultTransformer_trimResultTransformer),safeHtml_safeHtml=new TemplateTag_TemplateTag(splitStringTransformer_splitStringTransformer("\n"),inlineArrayTransformer_inlineArrayTransformer,stripIndentTransformer_stripIndentTransformer,trimResultTransformer_trimResultTransformer,replaceSubstitutionTransformer_replaceSubstitutionTransformer(/&/g,"&amp;"),replaceSubstitutionTransformer_replaceSubstitutionTransformer(/</g,"&lt;"),replaceSubstitutionTransformer_replaceSubstitutionTransformer(/>/g,"&gt;"),replaceSubstitutionTransformer_replaceSubstitutionTransformer(/"/g,"&quot;"),replaceSubstitutionTransformer_replaceSubstitutionTransformer(/'/g,"&#x27;"),replaceSubstitutionTransformer_replaceSubstitutionTransformer(/`/g,"&#x60;")),oneLine_oneLine=new TemplateTag_TemplateTag(replaceResultTransformer_replaceResultTransformer(/(?:\n(?:\s*))+/g," "),trimResultTransformer_trimResultTransformer),oneLineTrim_oneLineTrim=new TemplateTag_TemplateTag(replaceResultTransformer_replaceResultTransformer(/(?:\n\s*)/g,""),trimResultTransformer_trimResultTransformer),oneLineCommaLists_oneLineCommaLists=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer({separator:","}),replaceResultTransformer_replaceResultTransformer(/(?:\s+)/g," "),trimResultTransformer_trimResultTransformer),oneLineCommaListsOr_oneLineCommaListsOr=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer({separator:",",conjunction:"or"}),replaceResultTransformer_replaceResultTransformer(/(?:\s+)/g," "),trimResultTransformer_trimResultTransformer),oneLineCommaListsAnd_oneLineCommaListsAnd=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer({separator:",",conjunction:"and"}),replaceResultTransformer_replaceResultTransformer(/(?:\s+)/g," "),trimResultTransformer_trimResultTransformer),inlineLists_inlineLists=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer,stripIndentTransformer_stripIndentTransformer,trimResultTransformer_trimResultTransformer),oneLineInlineLists_oneLineInlineLists=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer,replaceResultTransformer_replaceResultTransformer(/(?:\s+)/g," "),trimResultTransformer_trimResultTransformer),stripIndent_stripIndent=new TemplateTag_TemplateTag(stripIndentTransformer_stripIndentTransformer,trimResultTransformer_trimResultTransformer),stripIndents_stripIndents=new TemplateTag_TemplateTag(stripIndentTransformer_stripIndentTransformer("all"),trimResultTransformer_trimResultTransformer);__webpack_require__.d(__webpack_exports__,"TemplateTag",(function(){return TemplateTag_TemplateTag})),__webpack_require__.d(__webpack_exports__,"trimResultTransformer",(function(){return trimResultTransformer_trimResultTransformer})),__webpack_require__.d(__webpack_exports__,"stripIndentTransformer",(function(){return stripIndentTransformer_stripIndentTransformer})),__webpack_require__.d(__webpack_exports__,"replaceResultTransformer",(function(){return replaceResultTransformer_replaceResultTransformer})),__webpack_require__.d(__webpack_exports__,"replaceSubstitutionTransformer",(function(){return replaceSubstitutionTransformer_replaceSubstitutionTransformer})),__webpack_require__.d(__webpack_exports__,"replaceStringTransformer",(function(){return replaceStringTransformer_replaceStringTransformer})),__webpack_require__.d(__webpack_exports__,"inlineArrayTransformer",(function(){return inlineArrayTransformer_inlineArrayTransformer})),__webpack_require__.d(__webpack_exports__,"splitStringTransformer",(function(){return splitStringTransformer_splitStringTransformer})),__webpack_require__.d(__webpack_exports__,"removeNonPrintingValuesTransformer",(function(){return removeNonPrintingValuesTransformer_removeNonPrintingValuesTransformer})),__webpack_require__.d(__webpack_exports__,"commaLists",(function(){return commaLists_commaLists})),__webpack_require__.d(__webpack_exports__,"commaListsAnd",(function(){return commaListsAnd_commaListsAnd})),__webpack_require__.d(__webpack_exports__,"commaListsOr",(function(){return commaListsOr_commaListsOr})),__webpack_require__.d(__webpack_exports__,"html",(function(){return html_html})),__webpack_require__.d(__webpack_exports__,"codeBlock",(function(){return html_html})),__webpack_require__.d(__webpack_exports__,"source",(function(){return html_html})),__webpack_require__.d(__webpack_exports__,"safeHtml",(function(){return safeHtml_safeHtml})),__webpack_require__.d(__webpack_exports__,"oneLine",(function(){return oneLine_oneLine})),__webpack_require__.d(__webpack_exports__,"oneLineTrim",(function(){return oneLineTrim_oneLineTrim})),__webpack_require__.d(__webpack_exports__,"oneLineCommaLists",(function(){return oneLineCommaLists_oneLineCommaLists})),__webpack_require__.d(__webpack_exports__,"oneLineCommaListsOr",(function(){return oneLineCommaListsOr_oneLineCommaListsOr})),__webpack_require__.d(__webpack_exports__,"oneLineCommaListsAnd",(function(){return oneLineCommaListsAnd_oneLineCommaListsAnd})),__webpack_require__.d(__webpack_exports__,"inlineLists",(function(){return inlineLists_inlineLists})),__webpack_require__.d(__webpack_exports__,"oneLineInlineLists",(function(){return oneLineInlineLists_oneLineInlineLists})),__webpack_require__.d(__webpack_exports__,"stripIndent",(function(){return stripIndent_stripIndent})),__webpack_require__.d(__webpack_exports__,"stripIndents",(function(){return stripIndents_stripIndents}))},function(module,__webpack_exports__,__webpack_require__){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function isObjectObject(o){return!0===
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function isObject(val){return null!=val&&"object"==typeof val&&!1===Array.isArray(val)}(o)&&"[object Object]"===Object.prototype.toString.call(o)}function isPlainObject(o){var ctor,prot;return!1!==isObjectObject(o)&&("function"==typeof(ctor=o.constructor)&&(!1!==isObjectObject(prot=ctor.prototype)&&!1!==prot.hasOwnProperty("isPrototypeOf")))}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return isPlainObject}))}]]);
//# sourceMappingURL=vendors~main.ff84228fff4d072a3777.bundle.js.map